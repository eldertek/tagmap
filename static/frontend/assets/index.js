var SD=Object.defineProperty;var CD=(t,e,n)=>e in t?SD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Je=(t,e,n)=>CD(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const ji={},dp=[],qu=()=>{},ED=()=>!1,Cm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),r_=t=>t.startsWith("onUpdate:"),_s=Object.assign,i_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},PD=Object.prototype.hasOwnProperty,ts=(t,e)=>PD.call(t,e),lr=Array.isArray,hp=t=>Ip(t)==="[object Map]",xf=t=>Ip(t)==="[object Set]",Cx=t=>Ip(t)==="[object Date]",MD=t=>Ip(t)==="[object RegExp]",Ir=t=>typeof t=="function",As=t=>typeof t=="string",Lc=t=>typeof t=="symbol",hs=t=>t!==null&&typeof t=="object",s_=t=>(hs(t)||Ir(t))&&Ir(t.then)&&Ir(t.catch),CL=Object.prototype.toString,Ip=t=>CL.call(t),kD=t=>Ip(t).slice(8,-1),hy=t=>Ip(t)==="[object Object]",o_=t=>As(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,fp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),fy=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},AD=/-(\w)/g,Ga=fy(t=>t.replace(AD,(e,n)=>n?n.toUpperCase():"")),TD=/\B([A-Z])/g,Ql=fy(t=>t.replace(TD,"-$1").toLowerCase()),Em=fy(t=>t.charAt(0).toUpperCase()+t.slice(1)),Dg=fy(t=>t?`on${Em(t)}`:""),Ol=(t,e)=>!Object.is(t,e),pp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},EL=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Lv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Sv=t=>{const e=As(t)?Number(t):NaN;return isNaN(e)?t:e};let Ex;const py=()=>Ex||(Ex=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),DD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",OD=dy(DD);function nu(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=As(r)?RD(r):nu(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(As(t)||hs(t))return t}const ND=/;(?![^(]*\))/g,ID=/:([^]+)/,BD=/\/\*[^]*?\*\//g;function RD(t){const e={};return t.replace(BD,"").split(ND).forEach(n=>{if(n){const r=n.split(ID);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Di(t){let e="";if(As(t))e=t;else if(lr(t))for(let n=0;n<t.length;n++){const r=Di(t[n]);r&&(e+=r+" ")}else if(hs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function FD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!As(e)&&(t.class=Di(e)),n&&(t.style=nu(n)),t}const jD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",zD=dy(jD);function PL(t){return!!t||t===""}function $D(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=_h(t[r],e[r]);return n}function _h(t,e){if(t===e)return!0;let n=Cx(t),r=Cx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=Lc(t),r=Lc(e),n||r)return t===e;if(n=lr(t),r=lr(e),n||r)return n&&r?$D(t,e):!1;if(n=hs(t),r=hs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!_h(t[o],e[o]))return!1}}return String(t)===String(e)}function gy(t,e){return t.findIndex(n=>_h(n,e))}const ML=t=>!!(t&&t.__v_isRef===!0),kt=t=>As(t)?t:t==null?"":lr(t)||hs(t)&&(t.toString===CL||!Ir(t.toString))?ML(t)?kt(t.value):JSON.stringify(t,kL,2):String(t),kL=(t,e)=>ML(e)?kL(t,e.value):hp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[P1(r,s)+" =>"]=i,n),{})}:xf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>P1(n))}:Lc(e)?P1(e):hs(e)&&!lr(e)&&!hy(e)?String(e):e,P1=(t,e="")=>{var n;return Lc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Dl;class a_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Dl,!e&&Dl&&(this.index=(Dl.scopes||(Dl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Dl;try{return Dl=this,e()}finally{Dl=n}}}on(){Dl=this}off(){Dl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function l_(t){return new a_(t)}function u_(){return Dl}function AL(t,e=!1){Dl&&Dl.cleanups.push(t)}let Ms;const M1=new WeakSet;class nm{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Dl&&Dl.active&&Dl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,M1.has(this)&&(M1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||DL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Px(this),OL(this);const e=Ms,n=wc;Ms=this,wc=!0;try{return this.fn()}finally{NL(this),Ms=e,wc=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)h_(e);this.deps=this.depsTail=void 0,Px(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?M1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){O2(this)&&this.run()}get dirty(){return O2(this)}}let TL=0,Og,Ng;function DL(t,e=!1){if(t.flags|=8,e){t.next=Ng,Ng=t;return}t.next=Og,Og=t}function c_(){TL++}function d_(){if(--TL>0)return;if(Ng){let e=Ng;for(Ng=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Og;){let e=Og;for(Og=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function OL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function NL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),h_(r),VD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function O2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(IL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function IL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===rm))return;t.globalVersion=rm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!O2(t)){t.flags&=-3;return}const n=Ms,r=wc;Ms=t,wc=!0;try{OL(t);const i=t.fn(t._value);(e.version===0||Ol(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ms=n,wc=r,NL(t),t.flags&=-3}}function h_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)h_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function VD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function UD(t,e){t.effect instanceof nm&&(t=t.effect.fn);const n=new nm(t);e&&_s(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function HD(t){t.effect.stop()}let wc=!0;const BL=[];function Ph(){BL.push(wc),wc=!1}function Mh(){const t=BL.pop();wc=t===void 0?!0:t}function Px(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ms;Ms=void 0;try{e()}finally{Ms=n}}}let rm=0;class WD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class my{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ms||!wc||Ms===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ms)n=this.activeLink=new WD(Ms,this),Ms.deps?(n.prevDep=Ms.depsTail,Ms.depsTail.nextDep=n,Ms.depsTail=n):Ms.deps=Ms.depsTail=n,RL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ms.depsTail,n.nextDep=void 0,Ms.depsTail.nextDep=n,Ms.depsTail=n,Ms.deps===n&&(Ms.deps=r)}return n}trigger(e){this.version++,rm++,this.notify(e)}notify(e){c_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{d_()}}}function RL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)RL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Cv=new WeakMap,lf=Symbol(""),N2=Symbol(""),im=Symbol("");function dl(t,e,n){if(wc&&Ms){let r=Cv.get(t);r||Cv.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new my),i.map=r,i.key=n),i.track()}}function Ed(t,e,n,r,i,s){const o=Cv.get(t);if(!o){rm++;return}const a=l=>{l&&l.trigger()};if(c_(),e==="clear")o.forEach(a);else{const l=lr(t),c=l&&o_(n);if(l&&n==="length"){const h=Number(r);o.forEach((p,v)=>{(v==="length"||v===im||!Lc(v)&&v>=h)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(im)),e){case"add":l?c&&a(o.get("length")):(a(o.get(lf)),hp(t)&&a(o.get(N2)));break;case"delete":l||(a(o.get(lf)),hp(t)&&a(o.get(N2)));break;case"set":hp(t)&&a(o.get(lf));break}}d_()}function GD(t,e){const n=Cv.get(t);return n&&n.get(e)}function Hf(t){const e=Fi(t);return e===t?e:(dl(e,"iterate",im),Eu(t)?e:e.map(hl))}function vy(t){return dl(t=Fi(t),"iterate",im),t}const qD={__proto__:null,[Symbol.iterator](){return k1(this,Symbol.iterator,hl)},concat(...t){return Hf(this).concat(...t.map(e=>lr(e)?Hf(e):e))},entries(){return k1(this,"entries",t=>(t[1]=hl(t[1]),t))},every(t,e){return vd(this,"every",t,e,void 0,arguments)},filter(t,e){return vd(this,"filter",t,e,n=>n.map(hl),arguments)},find(t,e){return vd(this,"find",t,e,hl,arguments)},findIndex(t,e){return vd(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return vd(this,"findLast",t,e,hl,arguments)},findLastIndex(t,e){return vd(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return vd(this,"forEach",t,e,void 0,arguments)},includes(...t){return A1(this,"includes",t)},indexOf(...t){return A1(this,"indexOf",t)},join(t){return Hf(this).join(t)},lastIndexOf(...t){return A1(this,"lastIndexOf",t)},map(t,e){return vd(this,"map",t,e,void 0,arguments)},pop(){return Kp(this,"pop")},push(...t){return Kp(this,"push",t)},reduce(t,...e){return Mx(this,"reduce",t,e)},reduceRight(t,...e){return Mx(this,"reduceRight",t,e)},shift(){return Kp(this,"shift")},some(t,e){return vd(this,"some",t,e,void 0,arguments)},splice(...t){return Kp(this,"splice",t)},toReversed(){return Hf(this).toReversed()},toSorted(t){return Hf(this).toSorted(t)},toSpliced(...t){return Hf(this).toSpliced(...t)},unshift(...t){return Kp(this,"unshift",t)},values(){return k1(this,"values",hl)}};function k1(t,e,n){const r=vy(t),i=r[e]();return r!==t&&!Eu(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const YD=Array.prototype;function vd(t,e,n,r,i,s){const o=vy(t),a=o!==t&&!Eu(t),l=o[e];if(l!==YD[e]){const p=l.apply(t,s);return a?hl(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,hl(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const h=l.call(o,c,r);return a&&i?i(h):h}function Mx(t,e,n,r){const i=vy(t);let s=n;return i!==t&&(Eu(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,hl(a),l,t)}),i[e](s,...r)}function A1(t,e,n){const r=Fi(t);dl(r,"iterate",im);const i=r[e](...n);return(i===-1||i===!1)&&_y(n[0])?(n[0]=Fi(n[0]),r[e](...n)):i}function Kp(t,e,n=[]){Ph(),c_();const r=Fi(t)[e].apply(t,n);return d_(),Mh(),r}const KD=dy("__proto__,__v_isRef,__isVue"),FL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Lc));function ZD(t){Lc(t)||(t=String(t));const e=Fi(this);return dl(e,"has",t),e.hasOwnProperty(t)}class jL{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?WL:HL:s?UL:VL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=lr(e);if(!i){let l;if(o&&(l=qD[n]))return l;if(n==="hasOwnProperty")return ZD}const a=Reflect.get(e,n,po(e)?e:r);return(Lc(n)?FL.has(n):KD(n))||(i||dl(e,"get",n),s)?a:po(a)?o&&o_(n)?a:a.value:hs(a)?i?pc(a):su(a):a}}class zL extends jL{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=wh(s);if(!Eu(r)&&!wh(r)&&(s=Fi(s),r=Fi(r)),!lr(e)&&po(s)&&!po(r))return l?!1:(s.value=r,!0)}const o=lr(e)&&o_(n)?Number(n)<e.length:ts(e,n),a=Reflect.set(e,n,r,po(e)?e:i);return e===Fi(i)&&(o?Ol(r,s)&&Ed(e,"set",n,r):Ed(e,"add",n,r)),a}deleteProperty(e,n){const r=ts(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ed(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!Lc(n)||!FL.has(n))&&dl(e,"has",n),r}ownKeys(e){return dl(e,"iterate",lr(e)?"length":lf),Reflect.ownKeys(e)}}class $L extends jL{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const XD=new zL,JD=new $L,QD=new zL(!0),e8=new $L(!0),I2=t=>t,a0=t=>Reflect.getPrototypeOf(t);function t8(t,e,n){return function(...r){const i=this.__v_raw,s=Fi(i),o=hp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),h=n?I2:e?B2:hl;return!e&&dl(s,"iterate",l?N2:lf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[h(p[0]),h(p[1])]:h(p),done:v}},[Symbol.iterator](){return this}}}}function l0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function n8(t,e){const n={get(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);t||(Ol(i,a)&&dl(o,"get",i),dl(o,"get",a));const{has:l}=a0(o),c=e?I2:t?B2:hl;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&dl(Fi(i),"iterate",lf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Fi(s),a=Fi(i);return t||(Ol(i,a)&&dl(o,"has",i),dl(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Fi(a),c=e?I2:t?B2:hl;return!t&&dl(l,"iterate",lf),a.forEach((h,p)=>i.call(s,c(h),c(p),o))}};return _s(n,t?{add:l0("add"),set:l0("set"),delete:l0("delete"),clear:l0("clear")}:{add(i){!e&&!Eu(i)&&!wh(i)&&(i=Fi(i));const s=Fi(this);return a0(s).has.call(s,i)||(s.add(i),Ed(s,"add",i,i)),this},set(i,s){!e&&!Eu(s)&&!wh(s)&&(s=Fi(s));const o=Fi(this),{has:a,get:l}=a0(o);let c=a.call(o,i);c||(i=Fi(i),c=a.call(o,i));const h=l.call(o,i);return o.set(i,s),c?Ol(s,h)&&Ed(o,"set",i,s):Ed(o,"add",i,s),this},delete(i){const s=Fi(this),{has:o,get:a}=a0(s);let l=o.call(s,i);l||(i=Fi(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ed(s,"delete",i,void 0),c},clear(){const i=Fi(this),s=i.size!==0,o=i.clear();return s&&Ed(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=t8(i,t,e)}),n}function yy(t,e){const n=n8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ts(n,i)&&i in r?n:r,i,s)}const r8={get:yy(!1,!1)},i8={get:yy(!1,!0)},s8={get:yy(!0,!1)},o8={get:yy(!0,!0)},VL=new WeakMap,UL=new WeakMap,HL=new WeakMap,WL=new WeakMap;function a8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function l8(t){return t.__v_skip||!Object.isExtensible(t)?0:a8(kD(t))}function su(t){return wh(t)?t:by(t,!1,XD,r8,VL)}function f_(t){return by(t,!1,QD,i8,UL)}function pc(t){return by(t,!0,JD,s8,HL)}function u8(t){return by(t,!0,e8,o8,WL)}function by(t,e,n,r,i){if(!hs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=l8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return wh(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function wh(t){return!!(t&&t.__v_isReadonly)}function Eu(t){return!!(t&&t.__v_isShallow)}function _y(t){return t?!!t.__v_raw:!1}function Fi(t){const e=t&&t.__v_raw;return e?Fi(e):t}function wy(t){return!ts(t,"__v_skip")&&Object.isExtensible(t)&&EL(t,"__v_skip",!0),t}const hl=t=>hs(t)?su(t):t,B2=t=>hs(t)?pc(t):t;function po(t){return t?t.__v_isRef===!0:!1}function Ct(t){return GL(t,!1)}function p_(t){return GL(t,!0)}function GL(t,e){return po(t)?t:new c8(t,e)}class c8{constructor(e,n){this.dep=new my,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Fi(e),this._value=n?e:hl(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Eu(e)||wh(e);e=r?e:Fi(e),Ol(e,n)&&(this._rawValue=e,this._value=r?e:hl(e),this.dep.trigger())}}function d8(t){t.dep&&t.dep.trigger()}function Yn(t){return po(t)?t.value:t}function h8(t){return Ir(t)?t():Yn(t)}const f8={get:(t,e,n)=>e==="__v_raw"?t:Yn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return po(i)&&!po(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function g_(t){return Zc(t)?t:new Proxy(t,f8)}class p8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new my,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function qL(t){return new p8(t)}function YL(t){const e=lr(t)?new Array(t.length):{};for(const n in t)e[n]=KL(t,n);return e}class g8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return GD(Fi(this._object),this._key)}}class m8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function v8(t,e,n){return po(t)?t:Ir(t)?new m8(t):hs(t)&&arguments.length>1?KL(t,e,n):Ct(t)}function KL(t,e,n){const r=t[e];return po(r)?r:new g8(t,e,n)}class y8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new my(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=rm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ms!==this)return DL(this,!0),!0}get value(){const e=this.dep.track();return IL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function b8(t,e,n=!1){let r,i;return Ir(t)?r=t:(r=t.get,i=t.set),new y8(r,i,n)}const _8={GET:"get",HAS:"has",ITERATE:"iterate"},w8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},u0={},Ev=new WeakMap;let nh;function x8(){return nh}function ZL(t,e=!1,n=nh){if(n){let r=Ev.get(n);r||Ev.set(n,r=[]),r.push(t)}}function L8(t,e,n=ji){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:Eu(Y)||i===!1||i===0?Pd(Y,1):Pd(Y);let h,p,v,g,x=!1,E=!1;if(po(t)?(p=()=>t.value,x=Eu(t)):Zc(t)?(p=()=>c(t),x=!0):lr(t)?(E=!0,x=t.some(Y=>Zc(Y)||Eu(Y)),p=()=>t.map(Y=>{if(po(Y))return Y.value;if(Zc(Y))return c(Y);if(Ir(Y))return l?l(Y,2):Y()})):Ir(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){Ph();try{v()}finally{Mh()}}const Y=nh;nh=h;try{return l?l(t,3,[g]):t(g)}finally{nh=Y}}:p=qu,e&&i){const Y=p,te=i===!0?1/0:i;p=()=>Pd(Y(),te)}const k=u_(),A=()=>{h.stop(),k&&k.active&&i_(k.effects,h)};if(s&&e){const Y=e;e=(...te)=>{Y(...te),A()}}let D=E?new Array(t.length).fill(u0):u0;const z=Y=>{if(!(!(h.flags&1)||!h.dirty&&!Y))if(e){const te=h.run();if(i||x||(E?te.some((ge,pe)=>Ol(ge,D[pe])):Ol(te,D))){v&&v();const ge=nh;nh=h;try{const pe=[te,D===u0?void 0:E&&D[0]===u0?[]:D,g];l?l(e,3,pe):e(...pe),D=te}finally{nh=ge}}}else h.run()};return a&&a(z),h=new nm(p),h.scheduler=o?()=>o(z,!1):z,g=Y=>ZL(Y,!1,h),v=h.onStop=()=>{const Y=Ev.get(h);if(Y){if(l)l(Y,4);else for(const te of Y)te();Ev.delete(h)}},e?r?z(!0):D=h.run():o?o(z.bind(null,!0),!0):h.run(),A.pause=h.pause.bind(h),A.resume=h.resume.bind(h),A.stop=A,A}function Pd(t,e=1/0,n){if(e<=0||!hs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,po(t))Pd(t.value,e,n);else if(lr(t))for(let r=0;r<t.length;r++)Pd(t[r],e,n);else if(xf(t)||hp(t))t.forEach(r=>{Pd(r,e,n)});else if(hy(t)){for(const r in t)Pd(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Pd(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const XL=[];function S8(t){XL.push(t)}function C8(){XL.pop()}function E8(t,e){}const P8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},M8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Bp(t,e,n,r){try{return r?t(...r):t()}catch(i){Lf(i,e,n)}}function Ku(t,e,n,r){if(Ir(t)){const i=Bp(t,e,n,r);return i&&s_(i)&&i.catch(s=>{Lf(s,e,n)}),i}if(lr(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Ku(t[s],e,n,r));return i}}function Lf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||ji;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const h=a.ec;if(h){for(let p=0;p<h.length;p++)if(h[p](t,l,c)===!1)return}a=a.parent}if(s){Ph(),Bp(s,null,10,[t,l,c]),Mh();return}}k8(t,n,i,r,o)}function k8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Nl=[];let $c=-1;const gp=[];let rh=null,tp=0;const JL=Promise.resolve();let Pv=null;function da(t){const e=Pv||JL;return t?e.then(this?t.bind(this):t):e}function A8(t){let e=$c+1,n=Nl.length;for(;e<n;){const r=e+n>>>1,i=Nl[r],s=om(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function m_(t){if(!(t.flags&1)){const e=om(t),n=Nl[Nl.length-1];!n||!(t.flags&2)&&e>=om(n)?Nl.push(t):Nl.splice(A8(e),0,t),t.flags|=1,QL()}}function QL(){Pv||(Pv=JL.then(eS))}function sm(t){lr(t)?gp.push(...t):rh&&t.id===-1?rh.splice(tp+1,0,t):t.flags&1||(gp.push(t),t.flags|=1),QL()}function kx(t,e,n=$c+1){for(;n<Nl.length;n++){const r=Nl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Nl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Mv(t){if(gp.length){const e=[...new Set(gp)].sort((n,r)=>om(n)-om(r));if(gp.length=0,rh){rh.push(...e);return}for(rh=e,tp=0;tp<rh.length;tp++){const n=rh[tp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}rh=null,tp=0}}const om=t=>t.id==null?t.flags&2?-1:1/0:t.id;function eS(t){try{for($c=0;$c<Nl.length;$c++){const e=Nl[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Bp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<Nl.length;$c++){const e=Nl[$c];e&&(e.flags&=-2)}$c=-1,Nl.length=0,Mv(),Pv=null,(Nl.length||gp.length)&&eS()}}let np,c0=[];function tS(t,e){var n,r;np=t,np?(np.enabled=!0,c0.forEach(({event:i,args:s})=>np.emit(i,...s)),c0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{tS(s,e)}),setTimeout(()=>{np||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,c0=[])},3e3)):c0=[]}let fa=null,xy=null;function am(t){const e=fa;return fa=t,xy=t&&t.type.__scopeId||null,e}function T8(t){xy=t}function D8(){xy=null}const O8=t=>Gu;function Gu(t,e=fa,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&H2(-1);const s=am(e);let o;try{o=t(...i)}finally{am(s),r._d&&H2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function kn(t,e){if(fa===null)return t;const n=km(fa),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=ji]=e[i];s&&(Ir(s)&&(s={mounted:s,updated:s}),s.deep&&Pd(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(Ph(),Ku(l,n,8,[t.el,a,t,e]),Mh())}}const nS=Symbol("_vte"),rS=t=>t.__isTeleport,Ig=t=>t&&(t.disabled||t.disabled===""),Ax=t=>t&&(t.defer||t.defer===""),Tx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Dx=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,R2=(t,e)=>{const n=t&&t.to;return As(n)?e?e(n):null:n},iS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:h,pc:p,pbc:v,o:{insert:g,querySelector:x,createText:E,createComment:k}}=c,A=Ig(e.props);let{shapeFlag:D,children:z,dynamicChildren:Y}=e;if(t==null){const te=e.el=E(""),ge=e.anchor=E("");g(te,n,r),g(ge,n,r);const pe=(j,K)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=j),h(z,j,K,i,s,o,a,l))},N=()=>{const j=e.target=R2(e.props,x),K=sS(j,e,E,g);j&&(o!=="svg"&&Tx(j)?o="svg":o!=="mathml"&&Dx(j)&&(o="mathml"),A||(pe(j,K),Y0(e,!1)))};A&&(pe(n,ge),Y0(e,!0)),Ax(e.props)?ca(()=>{N(),e.el.__isMounted=!0},s):N()}else{if(Ax(e.props)&&!t.el.__isMounted){ca(()=>{iS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const te=e.anchor=t.anchor,ge=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,N=Ig(t.props),j=N?n:ge,K=N?te:pe;if(o==="svg"||Tx(ge)?o="svg":(o==="mathml"||Dx(ge))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,j,i,s,o,a),E_(t,e,!0)):l||p(t,e,j,K,i,s,o,a,!1),A)N?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):d0(e,n,te,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const I=e.target=R2(e.props,x);I&&d0(e,I,null,c,0)}else N&&d0(e,ge,pe,c,1);Y0(e,A)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:h,target:p,props:v}=t;if(p&&(i(c),i(h)),s&&i(l),o&16){const g=s||!Ig(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,g,!!E.dynamicChildren)}}},move:d0,hydrate:N8};function d0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:h}=t,p=s===2;if(p&&r(o,e,n),(!p||Ig(h))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function N8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:h}},p){const v=e.target=R2(e.props,l);if(v){const g=Ig(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(g)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||sS(v,e,h,c),p(x&&o(x),e,v,n,r,i,s)}Y0(e,g)}return e.anchor&&o(e.anchor)}const q0=iS;function Y0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function sS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[nS]=s,t&&(r(i,t),r(s,t)),s}const ih=Symbol("_leaveCb"),h0=Symbol("_enterCb");function v_(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return go(()=>{t.isMounted=!0}),kh(()=>{t.isUnmounting=!0}),t}const ju=[Function,Array],y_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ju,onEnter:ju,onAfterEnter:ju,onEnterCancelled:ju,onBeforeLeave:ju,onLeave:ju,onAfterLeave:ju,onLeaveCancelled:ju,onBeforeAppear:ju,onAppear:ju,onAfterAppear:ju,onAppearCancelled:ju},oS=t=>{const e=t.subTree;return e.component?oS(e.component):e},I8={name:"BaseTransition",props:y_,setup(t,{slots:e}){const n=Ju(),r=v_();return()=>{const i=e.default&&Ly(e.default(),!0);if(!i||!i.length)return;const s=aS(i),o=Fi(t),{mode:a}=o;if(r.isLeaving)return T1(s);const l=Ox(s);if(!l)return T1(s);let c=xp(l,o,r,n,p=>c=p);l.type!==ia&&Id(l,c);let h=n.subTree&&Ox(n.subTree);if(h&&h.type!==ia&&!yc(l,h)&&oS(n).type!==ia){let p=xp(h,o,r,n);if(Id(h,p),a==="out-in"&&l.type!==ia)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,h=void 0},T1(s);a==="in-out"&&l.type!==ia?p.delayLeave=(v,g,x)=>{const E=uS(r,h);E[String(h.key)]=h,v[ih]=()=>{g(),v[ih]=void 0,delete c.delayedLeave,h=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,h=void 0}}:h=void 0}else h&&(h=void 0);return s}}};function aS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ia){e=n;break}}return e}const lS=I8;function uS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function xp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:h,onEnterCancelled:p,onBeforeLeave:v,onLeave:g,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:k,onAppear:A,onAfterAppear:D,onAppearCancelled:z}=e,Y=String(t.key),te=uS(n,t),ge=(j,K)=>{j&&Ku(j,r,9,K)},pe=(j,K)=>{const I=K[1];ge(j,K),lr(j)?j.every(R=>R.length<=1)&&I():j.length<=1&&I()},N={mode:o,persisted:a,beforeEnter(j){let K=l;if(!n.isMounted)if(s)K=k||l;else return;j[ih]&&j[ih](!0);const I=te[Y];I&&yc(t,I)&&I.el[ih]&&I.el[ih](),ge(K,[j])},enter(j){let K=c,I=h,R=p;if(!n.isMounted)if(s)K=A||c,I=D||h,R=z||p;else return;let B=!1;const $=j[h0]=U=>{B||(B=!0,U?ge(R,[j]):ge(I,[j]),N.delayedLeave&&N.delayedLeave(),j[h0]=void 0)};K?pe(K,[j,$]):$()},leave(j,K){const I=String(t.key);if(j[h0]&&j[h0](!0),n.isUnmounting)return K();ge(v,[j]);let R=!1;const B=j[ih]=$=>{R||(R=!0,K(),$?ge(E,[j]):ge(x,[j]),j[ih]=void 0,te[I]===t&&delete te[I])};te[I]=t,g?pe(g,[j,B]):B()},clone(j){const K=xp(j,e,n,r,i);return i&&i(K),K}};return N}function T1(t){if(Pm(t))return t=ed(t),t.children=null,t}function Ox(t){if(!Pm(t))return rS(t.type)&&t.children?aS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Ir(n.default))return n.default()}}function Id(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Id(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Ly(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===wn?(o.patchFlag&128&&i++,r=r.concat(Ly(o.children,e,a))):(e||o.type!==ia)&&r.push(a!=null?ed(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function Rs(t,e){return Ir(t)?_s({name:t.name},e,{setup:t}):t}function B8(){const t=Ju();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function b_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function R8(t){const e=Ju(),n=p_(null);if(e){const i=e.refs===ji?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function lm(t,e,n,r,i=!1){if(lr(t)){t.forEach((x,E)=>lm(x,e&&(lr(e)?e[E]:e),n,r,i));return}if(mh(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&lm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?km(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,h=a.refs===ji?a.refs={}:a.refs,p=a.setupState,v=Fi(p),g=p===ji?()=>!1:x=>ts(v,x);if(c!=null&&c!==l&&(As(c)?(h[c]=null,g(c)&&(p[c]=null)):po(c)&&(c.value=null)),Ir(l))Bp(l,a,12,[o,h]);else{const x=As(l),E=po(l);if(x||E){const k=()=>{if(t.f){const A=x?g(l)?p[l]:h[l]:l.value;i?lr(A)&&i_(A,s):lr(A)?A.includes(s)||A.push(s):x?(h[l]=[s],g(l)&&(p[l]=h[l])):(l.value=[s],t.k&&(h[t.k]=l.value))}else x?(h[l]=o,g(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(h[t.k]=o))};o?(k.id=-1,ca(k,n)):k()}}}let Nx=!1;const Wf=()=>{Nx||(console.error("Hydration completed but contains mismatches."),Nx=!0)},F8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",j8=t=>t.namespaceURI.includes("MathML"),f0=t=>{if(t.nodeType===1){if(F8(t))return"svg";if(j8(t))return"mathml"}},lp=t=>t.nodeType===8;function z8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,h=(z,Y)=>{if(!Y.hasChildNodes()){n(null,z,Y),Mv(),Y._vnode=z;return}p(Y.firstChild,z,null,null,null),Mv(),Y._vnode=z},p=(z,Y,te,ge,pe,N=!1)=>{N=N||!!Y.dynamicChildren;const j=lp(z)&&z.data==="[",K=()=>E(z,Y,te,ge,pe,j),{type:I,ref:R,shapeFlag:B,patchFlag:$}=Y;let U=z.nodeType;Y.el=z,$===-2&&(N=!1,Y.dynamicChildren=null);let V=null;switch(I){case vh:U!==3?Y.children===""?(l(Y.el=i(""),o(z),z),V=z):V=K():(z.data!==Y.children&&(Wf(),z.data=Y.children),V=s(z));break;case ia:D(z)?(V=s(z),A(Y.el=z.content.firstChild,z,te)):U!==8||j?V=K():V=s(z);break;case cf:if(j&&(z=s(z),U=z.nodeType),U===1||U===3){V=z;const ne=!Y.children.length;for(let X=0;X<Y.staticCount;X++)ne&&(Y.children+=V.nodeType===1?V.outerHTML:V.data),X===Y.staticCount-1&&(Y.anchor=V),V=s(V);return j?s(V):V}else K();break;case wn:j?V=x(z,Y,te,ge,pe,N):V=K();break;default:if(B&1)(U!==1||Y.type.toLowerCase()!==z.tagName.toLowerCase())&&!D(z)?V=K():V=v(z,Y,te,ge,pe,N);else if(B&6){Y.slotScopeIds=pe;const ne=o(z);if(j?V=k(z):lp(z)&&z.data==="teleport start"?V=k(z,z.data,"teleport end"):V=s(z),e(Y,ne,null,te,ge,f0(ne),N),mh(Y)&&!Y.type.__asyncResolved){let X;j?(X=mi(wn),X.anchor=V?V.previousSibling:ne.lastChild):X=z.nodeType===3?Xr(""):mi("div"),X.el=z,Y.component.subTree=X}}else B&64?U!==8?V=K():V=Y.type.hydrate(z,Y,te,ge,pe,N,t,g):B&128&&(V=Y.type.hydrate(z,Y,te,ge,f0(o(z)),pe,N,t,p))}return R!=null&&lm(R,null,ge,Y),V},v=(z,Y,te,ge,pe,N)=>{N=N||!!Y.dynamicChildren;const{type:j,props:K,patchFlag:I,shapeFlag:R,dirs:B,transition:$}=Y,U=j==="input"||j==="option";if(U||I!==-1){B&&Uc(Y,null,te,"created");let V=!1;if(D(z)){V=BS(null,$)&&te&&te.vnode.props&&te.vnode.props.appear;const X=z.content.firstChild;V&&$.beforeEnter(X),A(X,z,te),Y.el=z=X}if(R&16&&!(K&&(K.innerHTML||K.textContent))){let X=g(z.firstChild,Y,z,te,ge,pe,N);for(;X;){p0(z,1)||Wf();const we=X;X=X.nextSibling,a(we)}}else if(R&8){let X=Y.children;X[0]===`
`&&(z.tagName==="PRE"||z.tagName==="TEXTAREA")&&(X=X.slice(1)),z.textContent!==X&&(p0(z,0)||Wf(),z.textContent=Y.children)}if(K){if(U||!N||I&48){const X=z.tagName.includes("-");for(const we in K)(U&&(we.endsWith("value")||we==="indeterminate")||Cm(we)&&!fp(we)||we[0]==="."||X)&&r(z,we,null,K[we],void 0,te)}else if(K.onClick)r(z,"onClick",null,K.onClick,void 0,te);else if(I&4&&Zc(K.style))for(const X in K.style)K.style[X]}let ne;(ne=K&&K.onVnodeBeforeMount)&&Xl(ne,te,Y),B&&Uc(Y,null,te,"beforeMount"),((ne=K&&K.onVnodeMounted)||B||V)&&WS(()=>{ne&&Xl(ne,te,Y),V&&$.enter(z),B&&Uc(Y,null,te,"mounted")},ge)}return z.nextSibling},g=(z,Y,te,ge,pe,N,j)=>{j=j||!!Y.dynamicChildren;const K=Y.children,I=K.length;for(let R=0;R<I;R++){const B=j?K[R]:K[R]=Jl(K[R]),$=B.type===vh;z?($&&!j&&R+1<I&&Jl(K[R+1]).type===vh&&(l(i(z.data.slice(B.children.length)),te,s(z)),z.data=B.children),z=p(z,B,ge,pe,N,j)):$&&!B.children?l(B.el=i(""),te):(p0(te,1)||Wf(),n(null,B,te,null,ge,pe,f0(te),N))}return z},x=(z,Y,te,ge,pe,N)=>{const{slotScopeIds:j}=Y;j&&(pe=pe?pe.concat(j):j);const K=o(z),I=g(s(z),Y,K,te,ge,pe,N);return I&&lp(I)&&I.data==="]"?s(Y.anchor=I):(Wf(),l(Y.anchor=c("]"),K,I),I)},E=(z,Y,te,ge,pe,N)=>{if(p0(z.parentElement,1)||Wf(),Y.el=null,N){const I=k(z);for(;;){const R=s(z);if(R&&R!==I)a(R);else break}}const j=s(z),K=o(z);return a(z),n(null,Y,K,j,te,ge,f0(K),pe),te&&(te.vnode.el=Y.el,Py(te,Y.el)),j},k=(z,Y="[",te="]")=>{let ge=0;for(;z;)if(z=s(z),z&&lp(z)&&(z.data===Y&&ge++,z.data===te)){if(ge===0)return s(z);ge--}return z},A=(z,Y,te)=>{const ge=Y.parentNode;ge&&ge.replaceChild(z,Y);let pe=te;for(;pe;)pe.vnode.el===Y&&(pe.vnode.el=pe.subTree.el=z),pe=pe.parent},D=z=>z.nodeType===1&&z.tagName==="TEMPLATE";return[h,p]}const Ix="data-allow-mismatch",$8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function p0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Ix);)t=t.parentElement;const n=t&&t.getAttribute(Ix);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes($8[e])}}const V8=py().requestIdleCallback||(t=>setTimeout(t,1)),U8=py().cancelIdleCallback||(t=>clearTimeout(t)),H8=(t=1e4)=>e=>{const n=V8(e,{timeout:t});return()=>U8(n)};function W8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const G8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(W8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},q8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},Y8=(t=[])=>(e,n)=>{As(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function K8(t,e){if(lp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(lp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const mh=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function Z8(t){Ir(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,h,p=0;const v=()=>(p++,c=null,g()),g=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((k,A)=>{l(E,()=>k(v()),()=>A(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),h=E,E)))};return Rs({name:"AsyncComponentWrapper",__asyncLoader:g,__asyncHydrate(x,E,k){const A=s?()=>{const D=s(k,z=>K8(x,z));D&&(E.bum||(E.bum=[])).push(D)}:k;h?A():g().then(()=>!E.isUnmounted&&A())},get __asyncResolved(){return h},setup(){const x=ha;if(b_(x),h)return()=>D1(h,x);const E=z=>{c=null,Lf(z,x,13,!r)};if(a&&x.suspense||Lp)return g().then(z=>()=>D1(z,x)).catch(z=>(E(z),()=>r?mi(r,{error:z}):null));const k=Ct(!1),A=Ct(),D=Ct(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!k.value&&!A.value){const z=new Error(`Async component timed out after ${o}ms.`);E(z),A.value=z}},o),g().then(()=>{k.value=!0,x.parent&&Pm(x.parent.vnode)&&x.parent.update()}).catch(z=>{E(z),A.value=z}),()=>{if(k.value&&h)return D1(h,x);if(A.value&&r)return mi(r,{error:A.value});if(n&&!D.value)return mi(n)}}})}function D1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=mi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const Pm=t=>t.type.__isKeepAlive,X8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Ju(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:h,o:{createElement:p}}}=r,v=p("div");r.activate=(D,z,Y,te,ge)=>{const pe=D.component;c(D,z,Y,0,a),l(pe.vnode,D,z,Y,pe,a,te,D.slotScopeIds,ge),ca(()=>{pe.isDeactivated=!1,pe.a&&pp(pe.a);const N=D.props&&D.props.onVnodeMounted;N&&Xl(N,pe.parent,D)},a)},r.deactivate=D=>{const z=D.component;Av(z.m),Av(z.a),c(D,v,null,1,a),ca(()=>{z.da&&pp(z.da);const Y=D.props&&D.props.onVnodeUnmounted;Y&&Xl(Y,z.parent,D),z.isDeactivated=!0},a)};function g(D){O1(D),h(D,n,a,!0)}function x(D){i.forEach((z,Y)=>{const te=K2(z.type);te&&!D(te)&&E(Y)})}function E(D){const z=i.get(D);z&&(!o||!yc(z,o))?g(z):o&&O1(o),i.delete(D),s.delete(D)}ki(()=>[t.include,t.exclude],([D,z])=>{D&&x(Y=>mg(D,Y)),z&&x(Y=>!mg(z,Y))},{flush:"post",deep:!0});let k=null;const A=()=>{k!=null&&(Tv(n.subTree.type)?ca(()=>{i.set(k,g0(n.subTree))},n.subTree.suspense):i.set(k,g0(n.subTree)))};return go(A),Cy(A),kh(()=>{i.forEach(D=>{const{subTree:z,suspense:Y}=n,te=g0(z);if(D.type===te.type&&D.key===te.key){O1(te);const ge=te.component.da;ge&&ca(ge,Y);return}g(D)})}),()=>{if(k=null,!e.default)return o=null;const D=e.default(),z=D[0];if(D.length>1)return o=null,D;if(!Bd(z)||!(z.shapeFlag&4)&&!(z.shapeFlag&128))return o=null,z;let Y=g0(z);if(Y.type===ia)return o=null,Y;const te=Y.type,ge=K2(mh(Y)?Y.type.__asyncResolved||{}:te),{include:pe,exclude:N,max:j}=t;if(pe&&(!ge||!mg(pe,ge))||N&&ge&&mg(N,ge))return Y.shapeFlag&=-257,o=Y,z;const K=Y.key==null?te:Y.key,I=i.get(K);return Y.el&&(Y=ed(Y),z.shapeFlag&128&&(z.ssContent=Y)),k=K,I?(Y.el=I.el,Y.component=I.component,Y.transition&&Id(Y,Y.transition),Y.shapeFlag|=512,s.delete(K),s.add(K)):(s.add(K),j&&s.size>parseInt(j,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Tv(z.type)?z:Y}}},J8=X8;function mg(t,e){return lr(t)?t.some(n=>mg(n,e)):As(t)?t.split(",").includes(e):MD(t)?(t.lastIndex=0,t.test(e)):!1}function cS(t,e){hS(t,"a",e)}function dS(t,e){hS(t,"da",e)}function hS(t,e,n=ha){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Sy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)Pm(i.parent.vnode)&&Q8(r,e,n,i),i=i.parent}}function Q8(t,e,n,r){const i=Sy(e,t,r,!0);Zu(()=>{i_(r[e],i)},n)}function O1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function g0(t){return t.shapeFlag&128?t.ssContent:t}function Sy(t,e,n=ha,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{Ph();const a=vf(n),l=Ku(e,n,t,o);return a(),Mh(),l});return r?i.unshift(s):i.push(s),s}}const Fd=t=>(e,n=ha)=>{(!Lp||t==="sp")&&Sy(t,(...r)=>e(...r),n)},fS=Fd("bm"),go=Fd("m"),__=Fd("bu"),Cy=Fd("u"),kh=Fd("bum"),Zu=Fd("um"),pS=Fd("sp"),gS=Fd("rtg"),mS=Fd("rtc");function vS(t,e=ha){Sy("ec",t,e)}const w_="components",eO="directives";function yS(t,e){return x_(w_,t,!0,e)||t}const bS=Symbol.for("v-ndc");function tO(t){return As(t)?x_(w_,t,!1)||t:t||bS}function nO(t){return x_(eO,t)}function x_(t,e,n=!0,r=!1){const i=fa||ha;if(i){const s=i.type;if(t===w_){const a=K2(s,!1);if(a&&(a===e||a===Ga(e)||a===Em(Ga(e))))return s}const o=Bx(i[t]||s[t],e)||Bx(i.appContext[t],e);return!o&&r?s:o}}function Bx(t,e){return t&&(t[e]||t[Ga(e)]||t[Em(Ga(e))])}function ir(t,e,n,r){let i;const s=n&&n[r],o=lr(t);if(o||As(t)){const a=o&&Zc(t);let l=!1;a&&(l=!Eu(t),t=vy(t)),i=new Array(t.length);for(let c=0,h=t.length;c<h;c++)i[c]=e(l?hl(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(hs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const h=a[l];i[l]=e(t[h],h,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function rO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(lr(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function iO(t,e,n={},r,i){if(fa.ce||fa.parent&&mh(fa.parent)&&fa.parent.ce)return e!=="default"&&(n.name=e),Te(),Sa(wn,null,[mi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Te();const o=s&&L_(s(n)),a=n.key||o&&o.key,l=Sa(wn,{key:(a&&!Lc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function L_(t){return t.some(e=>Bd(e)?!(e.type===ia||e.type===wn&&!L_(e.children)):!0)?t:null}function sO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Dg(r)]=t[r];return n}const F2=t=>t?JS(t)?km(t):F2(t.parent):null,Bg=_s(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>F2(t.parent),$root:t=>F2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>S_(t),$forceUpdate:t=>t.f||(t.f=()=>{m_(t.update)}),$nextTick:t=>t.n||(t.n=da.bind(t.proxy)),$watch:t=>IO.bind(t)}),N1=(t,e)=>t!==ji&&!t.__isScriptSetup&&ts(t,e),j2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const g=o[e];if(g!==void 0)switch(g){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(N1(r,e))return o[e]=1,r[e];if(i!==ji&&ts(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ts(c,e))return o[e]=3,s[e];if(n!==ji&&ts(n,e))return o[e]=4,n[e];z2&&(o[e]=0)}}const h=Bg[e];let p,v;if(h)return e==="$attrs"&&dl(t.attrs,"get",""),h(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==ji&&ts(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,ts(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return N1(i,e)?(i[e]=n,!0):r!==ji&&ts(r,e)?(r[e]=n,!0):ts(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==ji&&ts(t,o)||N1(e,o)||(a=s[0])&&ts(a,o)||ts(r,o)||ts(Bg,o)||ts(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ts(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},oO=_s({},j2,{get(t,e){if(e!==Symbol.unscopables)return j2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!OD(e)}});function aO(){return null}function lO(){return null}function uO(t){}function cO(t){}function dO(){return null}function hO(){}function fO(t,e){return null}function pO(){return _S().slots}function gO(){return _S().attrs}function _S(){const t=Ju();return t.setupContext||(t.setupContext=tC(t))}function um(t){return lr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function mO(t,e){const n=um(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?lr(i)||Ir(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function vO(t,e){return!t||!e?t||e:lr(t)&&lr(e)?t.concat(e):_s({},um(t),um(e))}function yO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function bO(t){const e=Ju();let n=t();return G2(),s_(n)&&(n=n.catch(r=>{throw vf(e),r})),[n,()=>vf(e)]}let z2=!0;function _O(t){const e=S_(t),n=t.proxy,r=t.ctx;z2=!1,e.beforeCreate&&Rx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:h,beforeMount:p,mounted:v,beforeUpdate:g,updated:x,activated:E,deactivated:k,beforeDestroy:A,beforeUnmount:D,destroyed:z,unmounted:Y,render:te,renderTracked:ge,renderTriggered:pe,errorCaptured:N,serverPrefetch:j,expose:K,inheritAttrs:I,components:R,directives:B,filters:$}=e;if(c&&wO(c,r,null),o)for(const ne in o){const X=o[ne];Ir(X)&&(r[ne]=X.bind(n))}if(i){const ne=i.call(n,n);hs(ne)&&(t.data=su(ne))}if(z2=!0,s)for(const ne in s){const X=s[ne],we=Ir(X)?X.bind(n,n):Ir(X.get)?X.get.bind(n,n):qu,ve=!Ir(X)&&Ir(X.set)?X.set.bind(n):qu,Ze=Jn({get:we,set:ve});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>Ze.value,set:ie=>Ze.value=ie})}if(a)for(const ne in a)wS(a[ne],r,n,ne);if(l){const ne=Ir(l)?l.call(n):l;Reflect.ownKeys(ne).forEach(X=>{Rg(X,ne[X])})}h&&Rx(h,t,"c");function V(ne,X){lr(X)?X.forEach(we=>ne(we.bind(n))):X&&ne(X.bind(n))}if(V(fS,p),V(go,v),V(__,g),V(Cy,x),V(cS,E),V(dS,k),V(vS,N),V(mS,ge),V(gS,pe),V(kh,D),V(Zu,Y),V(pS,j),lr(K))if(K.length){const ne=t.exposed||(t.exposed={});K.forEach(X=>{Object.defineProperty(ne,X,{get:()=>n[X],set:we=>n[X]=we})})}else t.exposed||(t.exposed={});te&&t.render===qu&&(t.render=te),I!=null&&(t.inheritAttrs=I),R&&(t.components=R),B&&(t.directives=B),j&&b_(t)}function wO(t,e,n=qu){lr(t)&&(t=$2(t));for(const r in t){const i=t[r];let s;hs(i)?"default"in i?s=Pu(i.from||r,i.default,!0):s=Pu(i.from||r):s=Pu(i),po(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function Rx(t,e,n){Ku(lr(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function wS(t,e,n,r){let i=r.includes(".")?$S(n,r):()=>n[r];if(As(t)){const s=e[t];Ir(s)&&ki(i,s)}else if(Ir(t))ki(i,t.bind(n));else if(hs(t))if(lr(t))t.forEach(s=>wS(s,e,n,r));else{const s=Ir(t.handler)?t.handler.bind(n):e[t.handler];Ir(s)&&ki(i,s,t)}}function S_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>kv(l,c,o,!0)),kv(l,e,o)),hs(e)&&s.set(e,l),l}function kv(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&kv(t,s,n,!0),i&&i.forEach(o=>kv(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=xO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const xO={data:Fx,props:jx,emits:jx,methods:vg,computed:vg,beforeCreate:Pl,created:Pl,beforeMount:Pl,mounted:Pl,beforeUpdate:Pl,updated:Pl,beforeDestroy:Pl,beforeUnmount:Pl,destroyed:Pl,unmounted:Pl,activated:Pl,deactivated:Pl,errorCaptured:Pl,serverPrefetch:Pl,components:vg,directives:vg,watch:SO,provide:Fx,inject:LO};function Fx(t,e){return e?t?function(){return _s(Ir(t)?t.call(this,this):t,Ir(e)?e.call(this,this):e)}:e:t}function LO(t,e){return vg($2(t),$2(e))}function $2(t){if(lr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Pl(t,e){return t?[...new Set([].concat(t,e))]:e}function vg(t,e){return t?_s(Object.create(null),t,e):e}function jx(t,e){return t?lr(t)&&lr(e)?[...new Set([...t,...e])]:_s(Object.create(null),um(t),um(e??{})):e}function SO(t,e){if(!t)return e;if(!e)return t;const n=_s(Object.create(null),t);for(const r in e)n[r]=Pl(t[r],e[r]);return n}function xS(){return{app:null,config:{isNativeTag:ED,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CO=0;function EO(t,e){return function(r,i=null){Ir(r)||(r=_s({},r)),i!=null&&!hs(i)&&(i=null);const s=xS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:CO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:rC,get config(){return s.config},set config(h){},use(h,...p){return o.has(h)||(h&&Ir(h.install)?(o.add(h),h.install(c,...p)):Ir(h)&&(o.add(h),h(c,...p))),c},mixin(h){return s.mixins.includes(h)||s.mixins.push(h),c},component(h,p){return p?(s.components[h]=p,c):s.components[h]},directive(h,p){return p?(s.directives[h]=p,c):s.directives[h]},mount(h,p,v){if(!l){const g=c._ceVNode||mi(r,i);return g.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(g,h):t(g,h,v),l=!0,c._container=h,h.__vue_app__=c,km(g.component)}},onUnmount(h){a.push(h)},unmount(){l&&(Ku(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(h,p){return s.provides[h]=p,c},runWithContext(h){const p=uf;uf=c;try{return h()}finally{uf=p}}};return c}}let uf=null;function Rg(t,e){if(ha){let n=ha.provides;const r=ha.parent&&ha.parent.provides;r===n&&(n=ha.provides=Object.create(r)),n[t]=e}}function Pu(t,e,n=!1){const r=ha||fa;if(r||uf){const i=uf?uf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&Ir(e)?e.call(r&&r.proxy):e}}function LS(){return!!(ha||fa||uf)}const SS={},CS=()=>Object.create(SS),ES=t=>Object.getPrototypeOf(t)===SS;function PO(t,e,n,r=!1){const i={},s=CS();t.propsDefaults=Object.create(null),PS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:f_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function MO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Fi(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const h=t.vnode.dynamicProps;for(let p=0;p<h.length;p++){let v=h[p];if(Ey(t.emitsOptions,v))continue;const g=e[v];if(l)if(ts(s,v))g!==s[v]&&(s[v]=g,c=!0);else{const x=Ga(v);i[x]=V2(l,a,x,g,t,!1)}else g!==s[v]&&(s[v]=g,c=!0)}}}else{PS(t,e,i,s)&&(c=!0);let h;for(const p in a)(!e||!ts(e,p)&&((h=Ql(p))===p||!ts(e,h)))&&(l?n&&(n[p]!==void 0||n[h]!==void 0)&&(i[p]=V2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!ts(e,p))&&(delete s[p],c=!0)}c&&Ed(t.attrs,"set","")}function PS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(fp(l))continue;const c=e[l];let h;i&&ts(i,h=Ga(l))?!s||!s.includes(h)?n[h]=c:(a||(a={}))[h]=c:Ey(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Fi(n),c=a||ji;for(let h=0;h<s.length;h++){const p=s[h];n[p]=V2(i,l,p,c[p],t,!ts(c,p))}}return o}function V2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ts(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Ir(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const h=vf(i);r=c[n]=l.call(null,e),h()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Ql(n))&&(r=!0))}return r}const kO=new WeakMap;function MS(t,e,n=!1){const r=n?kO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!Ir(t)){const h=p=>{l=!0;const[v,g]=MS(p,e,!0);_s(o,v),g&&a.push(...g)};!n&&e.mixins.length&&e.mixins.forEach(h),t.extends&&h(t.extends),t.mixins&&t.mixins.forEach(h)}if(!s&&!l)return hs(t)&&r.set(t,dp),dp;if(lr(s))for(let h=0;h<s.length;h++){const p=Ga(s[h]);zx(p)&&(o[p]=ji)}else if(s)for(const h in s){const p=Ga(h);if(zx(p)){const v=s[h],g=o[p]=lr(v)||Ir(v)?{type:v}:_s({},v),x=g.type;let E=!1,k=!0;if(lr(x))for(let A=0;A<x.length;++A){const D=x[A],z=Ir(D)&&D.name;if(z==="Boolean"){E=!0;break}else z==="String"&&(k=!1)}else E=Ir(x)&&x.name==="Boolean";g[0]=E,g[1]=k,(E||ts(g,"default"))&&a.push(p)}}const c=[o,a];return hs(t)&&r.set(t,c),c}function zx(t){return t[0]!=="$"&&!fp(t)}const kS=t=>t[0]==="_"||t==="$stable",C_=t=>lr(t)?t.map(Jl):[Jl(t)],AO=(t,e,n)=>{if(e._n)return e;const r=Gu((...i)=>C_(e(...i)),n);return r._c=!1,r},AS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(kS(i))continue;const s=t[i];if(Ir(s))e[i]=AO(i,s,r);else if(s!=null){const o=C_(s);e[i]=()=>o}}},TS=(t,e)=>{const n=C_(e);t.slots.default=()=>n},DS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},TO=(t,e,n)=>{const r=t.slots=CS();if(t.vnode.shapeFlag&32){const i=e._;i?(DS(r,e,n),n&&EL(r,"_",i,!0)):AS(e,r)}else e&&TS(t,e)},DO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=ji;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:DS(i,e,n):(s=!e.$stable,AS(e,i)),o=e}else e&&(TS(t,e),o={default:1});if(s)for(const a in i)!kS(a)&&o[a]==null&&delete i[a]},ca=WS;function OS(t){return IS(t)}function NS(t){return IS(t,z8)}function IS(t,e){const n=py();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:h,parentNode:p,nextSibling:v,setScopeId:g=qu,insertStaticContent:x}=t,E=(he,Q,se,ue=null,ze=null,Ce=null,ye=void 0,Ve=null,Ye=!!Q.dynamicChildren)=>{if(he===Q)return;he&&!yc(he,Q)&&(ue=de(he),ie(he,ze,Ce,!0),he=null),Q.patchFlag===-2&&(Ye=!1,Q.dynamicChildren=null);const{type:Ke,ref:_t,shapeFlag:Ge}=Q;switch(Ke){case vh:k(he,Q,se,ue);break;case ia:A(he,Q,se,ue);break;case cf:he==null&&D(Q,se,ue,ye);break;case wn:R(he,Q,se,ue,ze,Ce,ye,Ve,Ye);break;default:Ge&1?te(he,Q,se,ue,ze,Ce,ye,Ve,Ye):Ge&6?B(he,Q,se,ue,ze,Ce,ye,Ve,Ye):(Ge&64||Ge&128)&&Ke.process(he,Q,se,ue,ze,Ce,ye,Ve,Ye,Re)}_t!=null&&ze&&lm(_t,he&&he.ref,Ce,Q||he,!Q)},k=(he,Q,se,ue)=>{if(he==null)r(Q.el=a(Q.children),se,ue);else{const ze=Q.el=he.el;Q.children!==he.children&&c(ze,Q.children)}},A=(he,Q,se,ue)=>{he==null?r(Q.el=l(Q.children||""),se,ue):Q.el=he.el},D=(he,Q,se,ue)=>{[he.el,he.anchor]=x(he.children,Q,se,ue,he.el,he.anchor)},z=({el:he,anchor:Q},se,ue)=>{let ze;for(;he&&he!==Q;)ze=v(he),r(he,se,ue),he=ze;r(Q,se,ue)},Y=({el:he,anchor:Q})=>{let se;for(;he&&he!==Q;)se=v(he),i(he),he=se;i(Q)},te=(he,Q,se,ue,ze,Ce,ye,Ve,Ye)=>{Q.type==="svg"?ye="svg":Q.type==="math"&&(ye="mathml"),he==null?ge(Q,se,ue,ze,Ce,ye,Ve,Ye):j(he,Q,ze,Ce,ye,Ve,Ye)},ge=(he,Q,se,ue,ze,Ce,ye,Ve)=>{let Ye,Ke;const{props:_t,shapeFlag:Ge,transition:ft,dirs:Ut}=he;if(Ye=he.el=o(he.type,Ce,_t&&_t.is,_t),Ge&8?h(Ye,he.children):Ge&16&&N(he.children,Ye,null,ue,ze,I1(he,Ce),ye,Ve),Ut&&Uc(he,null,ue,"created"),pe(Ye,he,he.scopeId,ye,ue),_t){for(const yn in _t)yn!=="value"&&!fp(yn)&&s(Ye,yn,null,_t[yn],Ce,ue);"value"in _t&&s(Ye,"value",null,_t.value,Ce),(Ke=_t.onVnodeBeforeMount)&&Xl(Ke,ue,he)}Ut&&Uc(he,null,ue,"beforeMount");const tn=BS(ze,ft);tn&&ft.beforeEnter(Ye),r(Ye,Q,se),((Ke=_t&&_t.onVnodeMounted)||tn||Ut)&&ca(()=>{Ke&&Xl(Ke,ue,he),tn&&ft.enter(Ye),Ut&&Uc(he,null,ue,"mounted")},ze)},pe=(he,Q,se,ue,ze)=>{if(se&&g(he,se),ue)for(let Ce=0;Ce<ue.length;Ce++)g(he,ue[Ce]);if(ze){let Ce=ze.subTree;if(Q===Ce||Tv(Ce.type)&&(Ce.ssContent===Q||Ce.ssFallback===Q)){const ye=ze.vnode;pe(he,ye,ye.scopeId,ye.slotScopeIds,ze.parent)}}},N=(he,Q,se,ue,ze,Ce,ye,Ve,Ye=0)=>{for(let Ke=Ye;Ke<he.length;Ke++){const _t=he[Ke]=Ve?sh(he[Ke]):Jl(he[Ke]);E(null,_t,Q,se,ue,ze,Ce,ye,Ve)}},j=(he,Q,se,ue,ze,Ce,ye)=>{const Ve=Q.el=he.el;let{patchFlag:Ye,dynamicChildren:Ke,dirs:_t}=Q;Ye|=he.patchFlag&16;const Ge=he.props||ji,ft=Q.props||ji;let Ut;if(se&&$h(se,!1),(Ut=ft.onVnodeBeforeUpdate)&&Xl(Ut,se,Q,he),_t&&Uc(Q,he,se,"beforeUpdate"),se&&$h(se,!0),(Ge.innerHTML&&ft.innerHTML==null||Ge.textContent&&ft.textContent==null)&&h(Ve,""),Ke?K(he.dynamicChildren,Ke,Ve,se,ue,I1(Q,ze),Ce):ye||X(he,Q,Ve,null,se,ue,I1(Q,ze),Ce,!1),Ye>0){if(Ye&16)I(Ve,Ge,ft,se,ze);else if(Ye&2&&Ge.class!==ft.class&&s(Ve,"class",null,ft.class,ze),Ye&4&&s(Ve,"style",Ge.style,ft.style,ze),Ye&8){const tn=Q.dynamicProps;for(let yn=0;yn<tn.length;yn++){const Qe=tn[yn],at=Ge[Qe],it=ft[Qe];(it!==at||Qe==="value")&&s(Ve,Qe,at,it,ze,se)}}Ye&1&&he.children!==Q.children&&h(Ve,Q.children)}else!ye&&Ke==null&&I(Ve,Ge,ft,se,ze);((Ut=ft.onVnodeUpdated)||_t)&&ca(()=>{Ut&&Xl(Ut,se,Q,he),_t&&Uc(Q,he,se,"updated")},ue)},K=(he,Q,se,ue,ze,Ce,ye)=>{for(let Ve=0;Ve<Q.length;Ve++){const Ye=he[Ve],Ke=Q[Ve],_t=Ye.el&&(Ye.type===wn||!yc(Ye,Ke)||Ye.shapeFlag&70)?p(Ye.el):se;E(Ye,Ke,_t,null,ue,ze,Ce,ye,!0)}},I=(he,Q,se,ue,ze)=>{if(Q!==se){if(Q!==ji)for(const Ce in Q)!fp(Ce)&&!(Ce in se)&&s(he,Ce,Q[Ce],null,ze,ue);for(const Ce in se){if(fp(Ce))continue;const ye=se[Ce],Ve=Q[Ce];ye!==Ve&&Ce!=="value"&&s(he,Ce,Ve,ye,ze,ue)}"value"in se&&s(he,"value",Q.value,se.value,ze)}},R=(he,Q,se,ue,ze,Ce,ye,Ve,Ye)=>{const Ke=Q.el=he?he.el:a(""),_t=Q.anchor=he?he.anchor:a("");let{patchFlag:Ge,dynamicChildren:ft,slotScopeIds:Ut}=Q;Ut&&(Ve=Ve?Ve.concat(Ut):Ut),he==null?(r(Ke,se,ue),r(_t,se,ue),N(Q.children||[],se,_t,ze,Ce,ye,Ve,Ye)):Ge>0&&Ge&64&&ft&&he.dynamicChildren?(K(he.dynamicChildren,ft,se,ze,Ce,ye,Ve),(Q.key!=null||ze&&Q===ze.subTree)&&E_(he,Q,!0)):X(he,Q,se,_t,ze,Ce,ye,Ve,Ye)},B=(he,Q,se,ue,ze,Ce,ye,Ve,Ye)=>{Q.slotScopeIds=Ve,he==null?Q.shapeFlag&512?ze.ctx.activate(Q,se,ue,ye,Ye):$(Q,se,ue,ze,Ce,ye,Ye):U(he,Q,Ye)},$=(he,Q,se,ue,ze,Ce,ye)=>{const Ve=he.component=XS(he,ue,ze);if(Pm(he)&&(Ve.ctx.renderer=Re),QS(Ve,!1,ye),Ve.asyncDep){if(ze&&ze.registerDep(Ve,V,ye),!he.el){const Ye=Ve.subTree=mi(ia);A(null,Ye,Q,se)}}else V(Ve,he,Q,se,ze,Ce,ye)},U=(he,Q,se)=>{const ue=Q.component=he.component;if($O(he,Q,se))if(ue.asyncDep&&!ue.asyncResolved){ne(ue,Q,se);return}else ue.next=Q,ue.update();else Q.el=he.el,ue.vnode=Q},V=(he,Q,se,ue,ze,Ce,ye)=>{const Ve=()=>{if(he.isMounted){let{next:Ge,bu:ft,u:Ut,parent:tn,vnode:yn}=he;{const Zt=RS(he);if(Zt){Ge&&(Ge.el=yn.el,ne(he,Ge,ye)),Zt.asyncDep.then(()=>{he.isUnmounted||Ve()});return}}let Qe=Ge,at;$h(he,!1),Ge?(Ge.el=yn.el,ne(he,Ge,ye)):Ge=yn,ft&&pp(ft),(at=Ge.props&&Ge.props.onVnodeBeforeUpdate)&&Xl(at,tn,Ge,yn),$h(he,!0);const it=K0(he),$t=he.subTree;he.subTree=it,E($t,it,p($t.el),de($t),he,ze,Ce),Ge.el=it.el,Qe===null&&Py(he,it.el),Ut&&ca(Ut,ze),(at=Ge.props&&Ge.props.onVnodeUpdated)&&ca(()=>Xl(at,tn,Ge,yn),ze)}else{let Ge;const{el:ft,props:Ut}=Q,{bm:tn,m:yn,parent:Qe,root:at,type:it}=he,$t=mh(Q);if($h(he,!1),tn&&pp(tn),!$t&&(Ge=Ut&&Ut.onVnodeBeforeMount)&&Xl(Ge,Qe,Q),$h(he,!0),ft&&et){const Zt=()=>{he.subTree=K0(he),et(ft,he.subTree,he,ze,null)};$t&&it.__asyncHydrate?it.__asyncHydrate(ft,he,Zt):Zt()}else{at.ce&&at.ce._injectChildStyle(it);const Zt=he.subTree=K0(he);E(null,Zt,se,ue,he,ze,Ce),Q.el=Zt.el}if(yn&&ca(yn,ze),!$t&&(Ge=Ut&&Ut.onVnodeMounted)){const Zt=Q;ca(()=>Xl(Ge,Qe,Zt),ze)}(Q.shapeFlag&256||Qe&&mh(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&he.a&&ca(he.a,ze),he.isMounted=!0,Q=se=ue=null}};he.scope.on();const Ye=he.effect=new nm(Ve);he.scope.off();const Ke=he.update=Ye.run.bind(Ye),_t=he.job=Ye.runIfDirty.bind(Ye);_t.i=he,_t.id=he.uid,Ye.scheduler=()=>m_(_t),$h(he,!0),Ke()},ne=(he,Q,se)=>{Q.component=he;const ue=he.vnode.props;he.vnode=Q,he.next=null,MO(he,Q.props,ue,se),DO(he,Q.children,se),Ph(),kx(he),Mh()},X=(he,Q,se,ue,ze,Ce,ye,Ve,Ye=!1)=>{const Ke=he&&he.children,_t=he?he.shapeFlag:0,Ge=Q.children,{patchFlag:ft,shapeFlag:Ut}=Q;if(ft>0){if(ft&128){ve(Ke,Ge,se,ue,ze,Ce,ye,Ve,Ye);return}else if(ft&256){we(Ke,Ge,se,ue,ze,Ce,ye,Ve,Ye);return}}Ut&8?(_t&16&&fe(Ke,ze,Ce),Ge!==Ke&&h(se,Ge)):_t&16?Ut&16?ve(Ke,Ge,se,ue,ze,Ce,ye,Ve,Ye):fe(Ke,ze,Ce,!0):(_t&8&&h(se,""),Ut&16&&N(Ge,se,ue,ze,Ce,ye,Ve,Ye))},we=(he,Q,se,ue,ze,Ce,ye,Ve,Ye)=>{he=he||dp,Q=Q||dp;const Ke=he.length,_t=Q.length,Ge=Math.min(Ke,_t);let ft;for(ft=0;ft<Ge;ft++){const Ut=Q[ft]=Ye?sh(Q[ft]):Jl(Q[ft]);E(he[ft],Ut,se,null,ze,Ce,ye,Ve,Ye)}Ke>_t?fe(he,ze,Ce,!0,!1,Ge):N(Q,se,ue,ze,Ce,ye,Ve,Ye,Ge)},ve=(he,Q,se,ue,ze,Ce,ye,Ve,Ye)=>{let Ke=0;const _t=Q.length;let Ge=he.length-1,ft=_t-1;for(;Ke<=Ge&&Ke<=ft;){const Ut=he[Ke],tn=Q[Ke]=Ye?sh(Q[Ke]):Jl(Q[Ke]);if(yc(Ut,tn))E(Ut,tn,se,null,ze,Ce,ye,Ve,Ye);else break;Ke++}for(;Ke<=Ge&&Ke<=ft;){const Ut=he[Ge],tn=Q[ft]=Ye?sh(Q[ft]):Jl(Q[ft]);if(yc(Ut,tn))E(Ut,tn,se,null,ze,Ce,ye,Ve,Ye);else break;Ge--,ft--}if(Ke>Ge){if(Ke<=ft){const Ut=ft+1,tn=Ut<_t?Q[Ut].el:ue;for(;Ke<=ft;)E(null,Q[Ke]=Ye?sh(Q[Ke]):Jl(Q[Ke]),se,tn,ze,Ce,ye,Ve,Ye),Ke++}}else if(Ke>ft)for(;Ke<=Ge;)ie(he[Ke],ze,Ce,!0),Ke++;else{const Ut=Ke,tn=Ke,yn=new Map;for(Ke=tn;Ke<=ft;Ke++){const Tn=Q[Ke]=Ye?sh(Q[Ke]):Jl(Q[Ke]);Tn.key!=null&&yn.set(Tn.key,Ke)}let Qe,at=0;const it=ft-tn+1;let $t=!1,Zt=0;const On=new Array(it);for(Ke=0;Ke<it;Ke++)On[Ke]=0;for(Ke=Ut;Ke<=Ge;Ke++){const Tn=he[Ke];if(at>=it){ie(Tn,ze,Ce,!0);continue}let Qn;if(Tn.key!=null)Qn=yn.get(Tn.key);else for(Qe=tn;Qe<=ft;Qe++)if(On[Qe-tn]===0&&yc(Tn,Q[Qe])){Qn=Qe;break}Qn===void 0?ie(Tn,ze,Ce,!0):(On[Qn-tn]=Ke+1,Qn>=Zt?Zt=Qn:$t=!0,E(Tn,Q[Qn],se,null,ze,Ce,ye,Ve,Ye),at++)}const mn=$t?OO(On):dp;for(Qe=mn.length-1,Ke=it-1;Ke>=0;Ke--){const Tn=tn+Ke,Qn=Q[Tn],Qt=Tn+1<_t?Q[Tn+1].el:ue;On[Ke]===0?E(null,Qn,se,Qt,ze,Ce,ye,Ve,Ye):$t&&(Qe<0||Ke!==mn[Qe]?Ze(Qn,se,Qt,2):Qe--)}}},Ze=(he,Q,se,ue,ze=null)=>{const{el:Ce,type:ye,transition:Ve,children:Ye,shapeFlag:Ke}=he;if(Ke&6){Ze(he.component.subTree,Q,se,ue);return}if(Ke&128){he.suspense.move(Q,se,ue);return}if(Ke&64){ye.move(he,Q,se,Re);return}if(ye===wn){r(Ce,Q,se);for(let Ge=0;Ge<Ye.length;Ge++)Ze(Ye[Ge],Q,se,ue);r(he.anchor,Q,se);return}if(ye===cf){z(he,Q,se);return}if(ue!==2&&Ke&1&&Ve)if(ue===0)Ve.beforeEnter(Ce),r(Ce,Q,se),ca(()=>Ve.enter(Ce),ze);else{const{leave:Ge,delayLeave:ft,afterLeave:Ut}=Ve,tn=()=>r(Ce,Q,se),yn=()=>{Ge(Ce,()=>{tn(),Ut&&Ut()})};ft?ft(Ce,tn,yn):yn()}else r(Ce,Q,se)},ie=(he,Q,se,ue=!1,ze=!1)=>{const{type:Ce,props:ye,ref:Ve,children:Ye,dynamicChildren:Ke,shapeFlag:_t,patchFlag:Ge,dirs:ft,cacheIndex:Ut}=he;if(Ge===-2&&(ze=!1),Ve!=null&&lm(Ve,null,se,he,!0),Ut!=null&&(Q.renderCache[Ut]=void 0),_t&256){Q.ctx.deactivate(he);return}const tn=_t&1&&ft,yn=!mh(he);let Qe;if(yn&&(Qe=ye&&ye.onVnodeBeforeUnmount)&&Xl(Qe,Q,he),_t&6)me(he.component,se,ue);else{if(_t&128){he.suspense.unmount(se,ue);return}tn&&Uc(he,null,Q,"beforeUnmount"),_t&64?he.type.remove(he,Q,se,Re,ue):Ke&&!Ke.hasOnce&&(Ce!==wn||Ge>0&&Ge&64)?fe(Ke,Q,se,!1,!0):(Ce===wn&&Ge&384||!ze&&_t&16)&&fe(Ye,Q,se),ue&&H(he)}(yn&&(Qe=ye&&ye.onVnodeUnmounted)||tn)&&ca(()=>{Qe&&Xl(Qe,Q,he),tn&&Uc(he,null,Q,"unmounted")},se)},H=he=>{const{type:Q,el:se,anchor:ue,transition:ze}=he;if(Q===wn){Z(se,ue);return}if(Q===cf){Y(he);return}const Ce=()=>{i(se),ze&&!ze.persisted&&ze.afterLeave&&ze.afterLeave()};if(he.shapeFlag&1&&ze&&!ze.persisted){const{leave:ye,delayLeave:Ve}=ze,Ye=()=>ye(se,Ce);Ve?Ve(he.el,Ce,Ye):Ye()}else Ce()},Z=(he,Q)=>{let se;for(;he!==Q;)se=v(he),i(he),he=se;i(Q)},me=(he,Q,se)=>{const{bum:ue,scope:ze,job:Ce,subTree:ye,um:Ve,m:Ye,a:Ke}=he;Av(Ye),Av(Ke),ue&&pp(ue),ze.stop(),Ce&&(Ce.flags|=8,ie(ye,he,Q,se)),Ve&&ca(Ve,Q),ca(()=>{he.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&he.asyncDep&&!he.asyncResolved&&he.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},fe=(he,Q,se,ue=!1,ze=!1,Ce=0)=>{for(let ye=Ce;ye<he.length;ye++)ie(he[ye],Q,se,ue,ze)},de=he=>{if(he.shapeFlag&6)return de(he.component.subTree);if(he.shapeFlag&128)return he.suspense.next();const Q=v(he.anchor||he.el),se=Q&&Q[nS];return se?v(se):Q};let ce=!1;const J=(he,Q,se)=>{he==null?Q._vnode&&ie(Q._vnode,null,null,!0):E(Q._vnode||null,he,Q,null,null,null,se),Q._vnode=he,ce||(ce=!0,kx(),Mv(),ce=!1)},Re={p:E,um:ie,m:Ze,r:H,mt:$,mc:N,pc:X,pbc:K,n:de,o:t};let De,et;return e&&([De,et]=e(Re)),{render:J,hydrate:De,createApp:EO(J,De)}}function I1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function $h({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function BS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function E_(t,e,n=!1){const r=t.children,i=e.children;if(lr(r)&&lr(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=sh(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&E_(o,a)),a.type===vh&&(a.el=o.el)}}function OO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function RS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:RS(e)}function Av(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const FS=Symbol.for("v-scx"),jS=()=>Pu(FS);function cm(t,e){return Mm(t,null,e)}function NO(t,e){return Mm(t,null,{flush:"post"})}function zS(t,e){return Mm(t,null,{flush:"sync"})}function ki(t,e,n){return Mm(t,e,n)}function Mm(t,e,n=ji){const{immediate:r,deep:i,flush:s,once:o}=n,a=_s({},n),l=e&&r||!e&&s!=="post";let c;if(Lp){if(s==="sync"){const g=jS();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!l){const g=()=>{};return g.stop=qu,g.resume=qu,g.pause=qu,g}}const h=ha;a.call=(g,x,E)=>Ku(g,h,x,E);let p=!1;s==="post"?a.scheduler=g=>{ca(g,h&&h.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(g,x)=>{x?g():m_(g)}),a.augmentJob=g=>{e&&(g.flags|=4),p&&(g.flags|=2,h&&(g.id=h.uid,g.i=h))};const v=L8(t,e,a);return Lp&&(c?c.push(v):l&&v()),v}function IO(t,e,n){const r=this.proxy,i=As(t)?t.includes(".")?$S(r,t):()=>r[t]:t.bind(r,r);let s;Ir(e)?s=e:(s=e.handler,n=e);const o=vf(this),a=Mm(i,s.bind(r),n);return o(),a}function $S(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function BO(t,e,n=ji){const r=Ju(),i=Ga(e),s=Ql(e),o=VS(t,i),a=qL((l,c)=>{let h,p=ji,v;return zS(()=>{const g=t[i];Ol(h,g)&&(h=g,c())}),{get(){return l(),n.get?n.get(h):h},set(g){const x=n.set?n.set(g):g;if(!Ol(x,h)&&!(p!==ji&&Ol(g,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(h=g,c()),r.emit(`update:${e}`,x),Ol(g,x)&&Ol(g,p)&&!Ol(x,v)&&c(),p=g,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||ji:a,done:!1}:{done:!0}}}},a}const VS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Ga(e)}Modifiers`]||t[`${Ql(e)}Modifiers`];function RO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ji;let i=n;const s=e.startsWith("update:"),o=s&&VS(r,e.slice(7));o&&(o.trim&&(i=n.map(h=>As(h)?h.trim():h)),o.number&&(i=n.map(Lv)));let a,l=r[a=Dg(e)]||r[a=Dg(Ga(e))];!l&&s&&(l=r[a=Dg(Ql(e))]),l&&Ku(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Ku(c,t,6,i)}}function US(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!Ir(t)){const l=c=>{const h=US(c,e,!0);h&&(a=!0,_s(o,h))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(hs(t)&&r.set(t,null),null):(lr(s)?s.forEach(l=>o[l]=null):_s(o,s),hs(t)&&r.set(t,o),o)}function Ey(t,e){return!t||!Cm(e)?!1:(e=e.slice(2).replace(/Once$/,""),ts(t,e[0].toLowerCase()+e.slice(1))||ts(t,Ql(e))||ts(t,e))}function K0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:h,props:p,data:v,setupState:g,ctx:x,inheritAttrs:E}=t,k=am(t);let A,D;try{if(n.shapeFlag&4){const Y=i||r,te=Y;A=Jl(c.call(te,Y,h,p,g,v,x)),D=a}else{const Y=e;A=Jl(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),D=e.props?a:jO(a)}}catch(Y){Fg.length=0,Lf(Y,t,1),A=mi(ia)}let z=A;if(D&&E!==!1){const Y=Object.keys(D),{shapeFlag:te}=z;Y.length&&te&7&&(s&&Y.some(r_)&&(D=zO(D,s)),z=ed(z,D,!1,!0))}return n.dirs&&(z=ed(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&Id(z,n.transition),A=z,am(k),A}function FO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Bd(i)){if(i.type!==ia||i.children==="v-if"){if(n)return;n=i}}else return}return n}const jO=t=>{let e;for(const n in t)(n==="class"||n==="style"||Cm(n))&&((e||(e={}))[n]=t[n]);return e},zO=(t,e)=>{const n={};for(const r in t)(!r_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function $O(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?$x(r,o,c):!!o;if(l&8){const h=e.dynamicProps;for(let p=0;p<h.length;p++){const v=h[p];if(o[v]!==r[v]&&!Ey(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?$x(r,o,c):!0:!!o;return!1}function $x(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Ey(n,s))return!0}return!1}function Py({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Tv=t=>t.__isSuspense;let U2=0;const VO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)HO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}WO(t,e,n,r,i,o,a,l,c)}},hydrate:GO,normalize:qO},UO=VO;function dm(t,e){const n=t.props&&t.props[e];Ir(n)&&n()}function HO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:h}}=l,p=h("div"),v=t.suspense=HS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(dm(t,"onPending"),dm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),mp(v,t.ssFallback)):v.resolve(!1,!0)}function WO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:h}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,g=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:k,isHydrating:A}=p;if(E)p.pendingBranch=v,yc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():k&&(A||(l(x,g,n,r,i,null,s,o,a),mp(p,g)))):(p.pendingId=U2++,A?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=h("div"),k?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,g,n,r,i,null,s,o,a),mp(p,g))):x&&yc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&yc(v,x))l(x,v,n,r,i,p,s,o,a),mp(p,v);else if(dm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=U2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:z}=p;D>0?setTimeout(()=>{p.pendingId===z&&p.fallback(g)},D):D===0&&p.fallback(g)}}function HS(t,e,n,r,i,s,o,a,l,c,h=!1){const{p,m:v,um:g,n:x,o:{parentNode:E,remove:k}}=c;let A;const D=YO(t);D&&e&&e.pendingBranch&&(A=e.pendingId,e.deps++);const z=t.props?Sv(t.props.timeout):void 0,Y=s,te={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:U2++,timeout:typeof z=="number"?z:-1,activeBranch:null,pendingBranch:null,isInFallback:!h,isHydrating:h,isUnmounted:!1,effects:[],resolve(ge=!1,pe=!1){const{vnode:N,activeBranch:j,pendingBranch:K,pendingId:I,effects:R,parentComponent:B,container:$}=te;let U=!1;te.isHydrating?te.isHydrating=!1:ge||(U=j&&K.transition&&K.transition.mode==="out-in",U&&(j.transition.afterLeave=()=>{I===te.pendingId&&(v(K,$,s===Y?x(j):s,0),sm(R))}),j&&(E(j.el)===$&&(s=x(j)),g(j,B,te,!0)),U||v(K,$,s,0)),mp(te,K),te.pendingBranch=null,te.isInFallback=!1;let V=te.parent,ne=!1;for(;V;){if(V.pendingBranch){V.effects.push(...R),ne=!0;break}V=V.parent}!ne&&!U&&sm(R),te.effects=[],D&&e&&e.pendingBranch&&A===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),dm(N,"onResolve")},fallback(ge){if(!te.pendingBranch)return;const{vnode:pe,activeBranch:N,parentComponent:j,container:K,namespace:I}=te;dm(pe,"onFallback");const R=x(N),B=()=>{te.isInFallback&&(p(null,ge,K,R,j,null,I,a,l),mp(te,ge))},$=ge.transition&&ge.transition.mode==="out-in";$&&(N.transition.afterLeave=B),te.isInFallback=!0,g(N,j,null,!0),$||B()},move(ge,pe,N){te.activeBranch&&v(te.activeBranch,ge,pe,N),te.container=ge},next(){return te.activeBranch&&x(te.activeBranch)},registerDep(ge,pe,N){const j=!!te.pendingBranch;j&&te.deps++;const K=ge.vnode.el;ge.asyncDep.catch(I=>{Lf(I,ge,0)}).then(I=>{if(ge.isUnmounted||te.isUnmounted||te.pendingId!==ge.suspenseId)return;ge.asyncResolved=!0;const{vnode:R}=ge;q2(ge,I,!1),K&&(R.el=K);const B=!K&&ge.subTree.el;pe(ge,R,E(K||ge.subTree.el),K?null:x(ge.subTree),te,o,N),B&&k(B),Py(ge,R.el),j&&--te.deps===0&&te.resolve()})},unmount(ge,pe){te.isUnmounted=!0,te.activeBranch&&g(te.activeBranch,n,ge,pe),te.pendingBranch&&g(te.pendingBranch,n,ge,pe)}};return te}function GO(t,e,n,r,i,s,o,a,l){const c=e.suspense=HS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),h=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),h}function qO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Vx(r?n.default:n),t.ssFallback=r?Vx(n.fallback):mi(ia)}function Vx(t){let e;if(Ir(t)){const n=mf&&t._c;n&&(t._d=!1,Te()),t=t(),n&&(t._d=!0,e=ml,GS())}return lr(t)&&(t=FO(t)),t=Jl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function WS(t,e){e&&e.pendingBranch?lr(t)?e.effects.push(...t):e.effects.push(t):sm(t)}function mp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,Py(r,i))}function YO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const wn=Symbol.for("v-fgt"),vh=Symbol.for("v-txt"),ia=Symbol.for("v-cmt"),cf=Symbol.for("v-stc"),Fg=[];let ml=null;function Te(t=!1){Fg.push(ml=t?null:[])}function GS(){Fg.pop(),ml=Fg[Fg.length-1]||null}let mf=1;function H2(t,e=!1){mf+=t,t<0&&ml&&e&&(ml.hasOnce=!0)}function qS(t){return t.dynamicChildren=mf>0?ml||dp:null,GS(),mf>0&&ml&&ml.push(t),t}function Ie(t,e,n,r,i,s){return qS(S(t,e,n,r,i,s,!0))}function Sa(t,e,n,r,i){return qS(mi(t,e,n,r,i,!0))}function Bd(t){return t?t.__v_isVNode===!0:!1}function yc(t,e){return t.type===e.type&&t.key===e.key}function KO(t){}const YS=({key:t})=>t??null,Z0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?As(t)||po(t)||Ir(t)?{i:fa,r:t,k:e,f:!!n}:t:null);function S(t,e=null,n=null,r=0,i=null,s=t===wn?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&YS(e),ref:e&&Z0(e),scopeId:xy,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:fa};return a?(P_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=As(n)?8:16),mf>0&&!o&&ml&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&ml.push(l),l}const mi=ZO;function ZO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===bS)&&(t=ia),Bd(t)){const a=ed(t,e,!0);return n&&P_(a,n),mf>0&&!s&&ml&&(a.shapeFlag&6?ml[ml.indexOf(t)]=a:ml.push(a)),a.patchFlag=-2,a}if(rN(t)&&(t=t.__vccOpts),e){e=KS(e);let{class:a,style:l}=e;a&&!As(a)&&(e.class=Di(a)),hs(l)&&(_y(l)&&!lr(l)&&(l=_s({},l)),e.style=nu(l))}const o=As(t)?1:Tv(t)?128:rS(t)?64:hs(t)?4:Ir(t)?2:0;return S(t,e,n,r,i,o,s,!0)}function KS(t){return t?_y(t)||ES(t)?_s({},t):t:null}function ed(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?ZS(i||{},e):i,h={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&YS(c),ref:e&&e.ref?n&&s?lr(s)?s.concat(Z0(e)):[s,Z0(e)]:Z0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==wn?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&ed(t.ssContent),ssFallback:t.ssFallback&&ed(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Id(h,l.clone(h)),h}function Xr(t=" ",e=0){return mi(vh,null,t,e)}function tu(t,e){const n=mi(cf,null,t);return n.staticCount=e,n}function Jt(t="",e=!1){return e?(Te(),Sa(ia,null,t)):mi(ia,null,t)}function Jl(t){return t==null||typeof t=="boolean"?mi(ia):lr(t)?mi(wn,null,t.slice()):Bd(t)?sh(t):mi(vh,null,String(t))}function sh(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:ed(t)}function P_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(lr(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),P_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!ES(e)?e._ctx=fa:i===3&&fa&&(fa.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Ir(e)?(e={default:e,_ctx:fa},n=32):(e=String(e),r&64?(n=16,e=[Xr(e)]):n=8);t.children=e,t.shapeFlag|=n}function ZS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Di([e.class,r.class]));else if(i==="style")e.style=nu([e.style,r.style]);else if(Cm(i)){const s=e[i],o=r[i];o&&s!==o&&!(lr(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Xl(t,e,n,r=null){Ku(t,e,7,[n,r])}const XO=xS();let JO=0;function XS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||XO,s={uid:JO++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new a_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:MS(r,i),emitsOptions:US(r,i),emit:null,emitted:null,propsDefaults:ji,inheritAttrs:r.inheritAttrs,ctx:ji,data:ji,props:ji,attrs:ji,slots:ji,refs:ji,setupState:ji,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=RO.bind(null,s),t.ce&&t.ce(s),s}let ha=null;const Ju=()=>ha||fa;let Dv,W2;{const t=py(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Dv=e("__VUE_INSTANCE_SETTERS__",n=>ha=n),W2=e("__VUE_SSR_SETTERS__",n=>Lp=n)}const vf=t=>{const e=ha;return Dv(t),t.scope.on(),()=>{t.scope.off(),Dv(e)}},G2=()=>{ha&&ha.scope.off(),Dv(null)};function JS(t){return t.vnode.shapeFlag&4}let Lp=!1;function QS(t,e=!1,n=!1){e&&W2(e);const{props:r,children:i}=t.vnode,s=JS(t);PO(t,r,s,e),TO(t,i,n);const o=s?QO(t,e):void 0;return e&&W2(!1),o}function QO(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,j2);const{setup:r}=n;if(r){Ph();const i=t.setupContext=r.length>1?tC(t):null,s=vf(t),o=Bp(r,t,0,[t.props,i]),a=s_(o);if(Mh(),s(),(a||t.sp)&&!mh(t)&&b_(t),a){if(o.then(G2,G2),e)return o.then(l=>{q2(t,l,e)}).catch(l=>{Lf(l,t,0)});t.asyncDep=o}else q2(t,o,e)}else eC(t,e)}function q2(t,e,n){Ir(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:hs(e)&&(t.setupState=g_(e)),eC(t,n)}let Ov,Y2;function eN(t){Ov=t,Y2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,oO))}}const tN=()=>!Ov;function eC(t,e,n){const r=t.type;if(!t.render){if(!e&&Ov&&!r.render){const i=r.template||S_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=_s(_s({isCustomElement:s,delimiters:a},o),l);r.render=Ov(i,c)}}t.render=r.render||qu,Y2&&Y2(t)}{const i=vf(t);Ph();try{_O(t)}finally{Mh(),i()}}}const nN={get(t,e){return dl(t,"get",""),t[e]}};function tC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,nN),slots:t.slots,emit:t.emit,expose:e}}function km(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(g_(wy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Bg)return Bg[n](t)},has(e,n){return n in e||n in Bg}})):t.proxy}function K2(t,e=!0){return Ir(t)?t.displayName||t.name:t.name||e&&t.__name}function rN(t){return Ir(t)&&"__vccOpts"in t}const Jn=(t,e)=>b8(t,e,Lp);function My(t,e,n){const r=arguments.length;return r===2?hs(e)&&!lr(e)?Bd(e)?mi(t,null,[e]):mi(t,e):mi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Bd(n)&&(n=[n]),mi(t,e,n))}function iN(){}function sN(t,e,n,r){const i=n[r];if(i&&nC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function nC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Ol(n[r],e[r]))return!1;return mf>0&&ml&&ml.push(t),!0}const rC="3.5.13",oN=qu,aN=M8,lN=np,uN=tS,cN={createComponentInstance:XS,setupComponent:QS,renderComponentRoot:K0,setCurrentRenderingInstance:am,isVNode:Bd,normalizeVNode:Jl,getComponentPublicInstance:km,ensureValidVNode:L_,pushWarningContext:S8,popWarningContext:C8},dN=cN,hN=null,fN=null,pN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Z2;const Ux=typeof window<"u"&&window.trustedTypes;if(Ux)try{Z2=Ux.createPolicy("vue",{createHTML:t=>t})}catch{}const iC=Z2?t=>Z2.createHTML(t):t=>t,gN="http://www.w3.org/2000/svg",mN="http://www.w3.org/1998/Math/MathML",Sd=typeof document<"u"?document:null,Hx=Sd&&Sd.createElement("template"),vN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Sd.createElementNS(gN,t):e==="mathml"?Sd.createElementNS(mN,t):n?Sd.createElement(t,{is:n}):Sd.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Sd.createTextNode(t),createComment:t=>Sd.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Sd.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{Hx.innerHTML=iC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=Hx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Yd="transition",Zp="animation",Sp=Symbol("_vtc"),sC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},oC=_s({},y_,sC),yN=t=>(t.displayName="Transition",t.props=oC,t),X2=yN((t,{slots:e})=>My(lS,aC(t),e)),Vh=(t,e=[])=>{lr(t)?t.forEach(n=>n(...e)):t&&t(...e)},Wx=t=>t?lr(t)?t.some(e=>e.length>1):t.length>1:!1;function aC(t){const e={};for(const R in t)R in sC||(e[R]=t[R]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:h=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:g=`${n}-leave-to`}=t,x=bN(i),E=x&&x[0],k=x&&x[1],{onBeforeEnter:A,onEnter:D,onEnterCancelled:z,onLeave:Y,onLeaveCancelled:te,onBeforeAppear:ge=A,onAppear:pe=D,onAppearCancelled:N=z}=e,j=(R,B,$,U)=>{R._enterCancelled=U,eh(R,B?h:a),eh(R,B?c:o),$&&$()},K=(R,B)=>{R._isLeaving=!1,eh(R,p),eh(R,g),eh(R,v),B&&B()},I=R=>(B,$)=>{const U=R?pe:D,V=()=>j(B,R,$);Vh(U,[B,V]),Gx(()=>{eh(B,R?l:s),Fc(B,R?h:a),Wx(U)||qx(B,r,E,V)})};return _s(e,{onBeforeEnter(R){Vh(A,[R]),Fc(R,s),Fc(R,o)},onBeforeAppear(R){Vh(ge,[R]),Fc(R,l),Fc(R,c)},onEnter:I(!1),onAppear:I(!0),onLeave(R,B){R._isLeaving=!0;const $=()=>K(R,B);Fc(R,p),R._enterCancelled?(Fc(R,v),J2()):(J2(),Fc(R,v)),Gx(()=>{R._isLeaving&&(eh(R,p),Fc(R,g),Wx(Y)||qx(R,r,k,$))}),Vh(Y,[R,$])},onEnterCancelled(R){j(R,!1,void 0,!0),Vh(z,[R])},onAppearCancelled(R){j(R,!0,void 0,!0),Vh(N,[R])},onLeaveCancelled(R){K(R),Vh(te,[R])}})}function bN(t){if(t==null)return null;if(hs(t))return[B1(t.enter),B1(t.leave)];{const e=B1(t);return[e,e]}}function B1(t){return Sv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Sp]||(t[Sp]=new Set)).add(e)}function eh(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Sp];n&&(n.delete(e),n.size||(t[Sp]=void 0))}function Gx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let _N=0;function qx(t,e,n,r){const i=t._endId=++_N,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=lC(t,e);if(!o)return r();const c=o+"end";let h=0;const p=()=>{t.removeEventListener(c,v),s()},v=g=>{g.target===t&&++h>=l&&p()};setTimeout(()=>{h<l&&p()},a+1),t.addEventListener(c,v)}function lC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Yd}Delay`),s=r(`${Yd}Duration`),o=Yx(i,s),a=r(`${Zp}Delay`),l=r(`${Zp}Duration`),c=Yx(a,l);let h=null,p=0,v=0;e===Yd?o>0&&(h=Yd,p=o,v=s.length):e===Zp?c>0&&(h=Zp,p=c,v=l.length):(p=Math.max(o,c),h=p>0?o>c?Yd:Zp:null,v=h?h===Yd?s.length:l.length:0);const g=h===Yd&&/\b(transform|all)(,|$)/.test(r(`${Yd}Property`).toString());return{type:h,timeout:p,propCount:v,hasTransform:g}}function Yx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Kx(n)+Kx(t[r])))}function Kx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function J2(){return document.body.offsetHeight}function wN(t,e,n){const r=t[Sp];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Nv=Symbol("_vod"),uC=Symbol("_vsh"),ky={beforeMount(t,{value:e},{transition:n}){t[Nv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Xp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Xp(t,!0),r.enter(t)):r.leave(t,()=>{Xp(t,!1)}):Xp(t,e))},beforeUnmount(t,{value:e}){Xp(t,e)}};function Xp(t,e){t.style.display=e?t[Nv]:"none",t[uC]=!e}function xN(){ky.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const cC=Symbol("");function LN(t){const e=Ju();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Iv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Iv(e.ce,i):Q2(e.subTree,i),n(i)};__(()=>{sm(r)}),go(()=>{ki(r,qu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Zu(()=>i.disconnect())})}function Q2(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Q2(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Iv(t.el,e);else if(t.type===wn)t.children.forEach(n=>Q2(n,e));else if(t.type===cf){let{el:n,anchor:r}=t;for(;n&&(Iv(n,e),n!==r);)n=n.nextSibling}}function Iv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[cC]=r}}const SN=/(^|;)\s*display\s*:/;function CN(t,e,n){const r=t.style,i=As(n);let s=!1;if(n&&!i){if(e)if(As(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&X0(r,a,"")}else for(const o in e)n[o]==null&&X0(r,o,"");for(const o in n)o==="display"&&(s=!0),X0(r,o,n[o])}else if(i){if(e!==n){const o=r[cC];o&&(n+=";"+o),r.cssText=n,s=SN.test(n)}}else e&&t.removeAttribute("style");Nv in t&&(t[Nv]=s?r.display:"",t[uC]&&(r.display="none"))}const Zx=/\s*!important$/;function X0(t,e,n){if(lr(n))n.forEach(r=>X0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=EN(t,e);Zx.test(n)?t.setProperty(Ql(r),n.replace(Zx,""),"important"):t[r]=n}}const Xx=["Webkit","Moz","ms"],R1={};function EN(t,e){const n=R1[e];if(n)return n;let r=Ga(e);if(r!=="filter"&&r in t)return R1[e]=r;r=Em(r);for(let i=0;i<Xx.length;i++){const s=Xx[i]+r;if(s in t)return R1[e]=s}return e}const Jx="http://www.w3.org/1999/xlink";function Qx(t,e,n,r,i,s=zD(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(Jx,e.slice(6,e.length)):t.setAttributeNS(Jx,e,n):n==null||s&&!PL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":Lc(n)?String(n):n)}function e4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?iC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=PL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Md(t,e,n,r){t.addEventListener(e,n,r)}function PN(t,e,n,r){t.removeEventListener(e,n,r)}const t4=Symbol("_vei");function MN(t,e,n,r,i=null){const s=t[t4]||(t[t4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=kN(e);if(r){const c=s[e]=DN(r,i);Md(t,a,c,l)}else o&&(PN(t,a,o,l),s[e]=void 0)}}const n4=/(?:Once|Passive|Capture)$/;function kN(t){let e;if(n4.test(t)){e={};let r;for(;r=t.match(n4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Ql(t.slice(2)),e]}let F1=0;const AN=Promise.resolve(),TN=()=>F1||(AN.then(()=>F1=0),F1=Date.now());function DN(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ku(ON(r,n.value),e,5,[r])};return n.value=t,n.attached=TN(),n}function ON(t,e){if(lr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const r4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,NN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?wN(t,r,o):e==="style"?CN(t,n,r):Cm(e)?r_(e)||MN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):IN(t,e,r,o))?(e4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Qx(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!As(r))?e4(t,Ga(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),Qx(t,e,r,o))};function IN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&r4(e)&&Ir(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return r4(e)&&As(n)?!1:e in t}const i4={};/*! #__NO_SIDE_EFFECTS__ */function dC(t,e,n){const r=Rs(t,e);hy(r)&&_s(r,e);class i extends Ay{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const BN=(t,e)=>dC(t,e,wC),RN=typeof HTMLElement<"u"?HTMLElement:class{};class Ay extends RN{constructor(e,n={},r=Rv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Rv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ay){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,da(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!lr(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Sv(this._props[l])),(a||(a=Object.create(null)))[Ga(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ts(this,r)||Object.defineProperty(this,r,{get:()=>Yn(n[r])})}_resolveProps(e){const{props:n}=e,r=lr(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map(Ga))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):i4;const i=Ga(e);n&&this._numberProps&&this._numberProps[i]&&(r=Sv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===i4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Ql(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Ql(e),n+""):n||this.removeAttribute(Ql(e)),s&&s.observe(this,{attributes:!0})}}_update(){_C(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=mi(this._def,_s(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,hy(o[0])?_s({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Ql(s)!==s&&i(Ql(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",h=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=h.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function hC(t){const e=Ju(),n=e&&e.ce;return n||null}function FN(){const t=hC();return t&&t.shadowRoot}function jN(t="$style"){{const e=Ju();if(!e)return ji;const n=e.type.__cssModules;if(!n)return ji;const r=n[t];return r||ji}}const fC=new WeakMap,pC=new WeakMap,Bv=Symbol("_moveCb"),s4=Symbol("_enterCb"),zN=t=>(delete t.props.mode,t),$N=zN({name:"TransitionGroup",props:_s({},oC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Ju(),r=v_();let i,s;return Cy(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!GN(i[0].el,n.vnode.el,o))return;i.forEach(UN),i.forEach(HN);const a=i.filter(WN);J2(),a.forEach(l=>{const c=l.el,h=c.style;Fc(c,o),h.transform=h.webkitTransform=h.transitionDuration="";const p=c[Bv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Bv]=null,eh(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=Fi(t),a=aC(o);let l=o.tag||wn;if(i=[],s)for(let c=0;c<s.length;c++){const h=s[c];h.el&&h.el instanceof Element&&(i.push(h),Id(h,xp(h,a,r,n)),fC.set(h,h.el.getBoundingClientRect()))}s=e.default?Ly(e.default()):[];for(let c=0;c<s.length;c++){const h=s[c];h.key!=null&&Id(h,xp(h,a,r,n))}return mi(l,null,s)}}}),VN=$N;function UN(t){const e=t.el;e[Bv]&&e[Bv](),e[s4]&&e[s4]()}function HN(t){pC.set(t,t.el.getBoundingClientRect())}function WN(t){const e=fC.get(t),n=pC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function GN(t,e,n){const r=t.cloneNode(),i=t[Sp];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=lC(r);return s.removeChild(r),o}const xh=t=>{const e=t.props["onUpdate:modelValue"]||!1;return lr(e)?n=>pp(e,n):e};function qN(t){t.target.composing=!0}function o4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Yu=Symbol("_assign"),$r={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[Yu]=xh(i);const s=r||i.props&&i.props.type==="number";Md(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Lv(a)),t[Yu](a)}),n&&Md(t,"change",()=>{t.value=t.value.trim()}),e||(Md(t,"compositionstart",qN),Md(t,"compositionend",o4),Md(t,"change",o4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[Yu]=xh(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Lv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Al={deep:!0,created(t,e,n){t[Yu]=xh(n),Md(t,"change",()=>{const r=t._modelValue,i=Cp(t),s=t.checked,o=t[Yu];if(lr(r)){const a=gy(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(xf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(gC(t,s))})},mounted:a4,beforeUpdate(t,e,n){t[Yu]=xh(n),a4(t,e,n)}};function a4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(lr(e))i=gy(e,r.props.value)>-1;else if(xf(e))i=e.has(r.props.value);else{if(e===n)return;i=_h(e,gC(t,!0))}t.checked!==i&&(t.checked=i)}const M_={created(t,{value:e},n){t.checked=_h(e,n.props.value),t[Yu]=xh(n),Md(t,"change",()=>{t[Yu](Cp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[Yu]=xh(r),e!==n&&(t.checked=_h(e,r.props.value))}},ns={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=xf(e);Md(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Lv(Cp(o)):Cp(o));t[Yu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,da(()=>{t._assigning=!1})}),t[Yu]=xh(r)},mounted(t,{value:e}){l4(t,e)},beforeUpdate(t,e,n){t[Yu]=xh(n)},updated(t,{value:e}){t._assigning||l4(t,e)}};function l4(t,e){const n=t.multiple,r=lr(e);if(!(n&&!r&&!xf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Cp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=gy(e,a)>-1}else o.selected=e.has(a);else if(_h(Cp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Cp(t){return"_value"in t?t._value:t.value}function gC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const k_={created(t,e,n){m0(t,e,n,null,"created")},mounted(t,e,n){m0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){m0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){m0(t,e,n,r,"updated")}};function mC(t,e){switch(t){case"SELECT":return ns;case"TEXTAREA":return $r;default:switch(e){case"checkbox":return Al;case"radio":return M_;default:return $r}}}function m0(t,e,n,r,i){const o=mC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function YN(){$r.getSSRProps=({value:t})=>({value:t}),M_.getSSRProps=({value:t},e)=>{if(e.props&&_h(e.props.value,t))return{checked:!0}},Al.getSSRProps=({value:t},e)=>{if(lr(t)){if(e.props&&gy(t,e.props.value)>-1)return{checked:!0}}else if(xf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},k_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=mC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const KN=["ctrl","shift","alt","meta"],ZN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>KN.some(n=>t[`${n}Key`]&&!e.includes(n))},Su=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=ZN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},XN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},JN=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Ql(i.key);if(e.some(o=>o===s||XN[o]===s))return t(i)})},vC=_s({patchProp:NN},vN);let jg,u4=!1;function yC(){return jg||(jg=OS(vC))}function bC(){return jg=u4?jg:NS(vC),u4=!0,jg}const _C=(...t)=>{yC().render(...t)},QN=(...t)=>{bC().hydrate(...t)},Rv=(...t)=>{const e=yC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(!i)return;const s=e._component;!Ir(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,xC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},wC=(...t)=>{const e=bC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=LC(r);if(i)return n(i,!0,xC(i))},e};function xC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function LC(t){return As(t)?document.querySelector(t):t}let c4=!1;const eI=()=>{c4||(c4=!0,YN(),xN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const tI=()=>{},nI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:lS,BaseTransitionPropsValidators:y_,Comment:ia,DeprecationTypes:pN,EffectScope:a_,ErrorCodes:P8,ErrorTypeStrings:aN,Fragment:wn,KeepAlive:J8,ReactiveEffect:nm,Static:cf,Suspense:UO,Teleport:q0,Text:vh,TrackOpTypes:_8,Transition:X2,TransitionGroup:VN,TriggerOpTypes:w8,VueElement:Ay,assertNumber:E8,callWithAsyncErrorHandling:Ku,callWithErrorHandling:Bp,camelize:Ga,capitalize:Em,cloneVNode:ed,compatUtils:fN,compile:tI,computed:Jn,createApp:Rv,createBlock:Sa,createCommentVNode:Jt,createElementBlock:Ie,createElementVNode:S,createHydrationRenderer:NS,createPropsRestProxy:yO,createRenderer:OS,createSSRApp:wC,createSlots:rO,createStaticVNode:tu,createTextVNode:Xr,createVNode:mi,customRef:qL,defineAsyncComponent:Z8,defineComponent:Rs,defineCustomElement:dC,defineEmits:lO,defineExpose:uO,defineModel:hO,defineOptions:cO,defineProps:aO,defineSSRCustomElement:BN,defineSlots:dO,devtools:lN,effect:UD,effectScope:l_,getCurrentInstance:Ju,getCurrentScope:u_,getCurrentWatcher:x8,getTransitionRawChildren:Ly,guardReactiveProps:KS,h:My,handleError:Lf,hasInjectionContext:LS,hydrate:QN,hydrateOnIdle:H8,hydrateOnInteraction:Y8,hydrateOnMediaQuery:q8,hydrateOnVisible:G8,initCustomFormatter:iN,initDirectivesForSSR:eI,inject:Pu,isMemoSame:nC,isProxy:_y,isReactive:Zc,isReadonly:wh,isRef:po,isRuntimeOnly:tN,isShallow:Eu,isVNode:Bd,markRaw:wy,mergeDefaults:mO,mergeModels:vO,mergeProps:ZS,nextTick:da,normalizeClass:Di,normalizeProps:FD,normalizeStyle:nu,onActivated:cS,onBeforeMount:fS,onBeforeUnmount:kh,onBeforeUpdate:__,onDeactivated:dS,onErrorCaptured:vS,onMounted:go,onRenderTracked:mS,onRenderTriggered:gS,onScopeDispose:AL,onServerPrefetch:pS,onUnmounted:Zu,onUpdated:Cy,onWatcherCleanup:ZL,openBlock:Te,popScopeId:D8,provide:Rg,proxyRefs:g_,pushScopeId:T8,queuePostFlushCb:sm,reactive:su,readonly:pc,ref:Ct,registerRuntimeCompiler:eN,render:_C,renderList:ir,renderSlot:iO,resolveComponent:yS,resolveDirective:nO,resolveDynamicComponent:tO,resolveFilter:hN,resolveTransitionHooks:xp,setBlockTracking:H2,setDevtoolsHook:uN,setTransitionHooks:Id,shallowReactive:f_,shallowReadonly:u8,shallowRef:p_,ssrContextKey:FS,ssrUtils:dN,stop:HD,toDisplayString:kt,toHandlerKey:Dg,toHandlers:sO,toRaw:Fi,toRef:v8,toRefs:YL,toValue:h8,transformVNodeArgs:KO,triggerRef:d8,unref:Yn,useAttrs:gO,useCssModule:jN,useCssVars:LN,useHost:hC,useId:B8,useModel:BO,useSSRContext:jS,useShadowRoot:FN,useSlots:pO,useTemplateRef:R8,useTransitionState:v_,vModelCheckbox:Al,vModelDynamic:k_,vModelRadio:M_,vModelSelect:ns,vModelText:$r,vShow:ky,version:rC,warn:oN,watch:ki,watchEffect:cm,watchPostEffect:NO,watchSyncEffect:zS,withAsyncContext:bO,withCtx:Gu,withDefaults:fO,withDirectives:kn,withKeys:JN,withMemo:sN,withModifiers:Su,withScopeId:O8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let SC;const Ty=t=>SC=t,CC=Symbol();function eb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var zg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(zg||(zg={}));function rI(){const t=l_(!0),e=t.run(()=>Ct({}));let n=[],r=[];const i=wy({install(s){Ty(i),i._a=s,s.provide(CC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const EC=()=>{};function d4(t,e,n,r=EC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&u_()&&AL(i),i}function Gf(t,...e){t.slice().forEach(n=>{n(...e)})}const iI=t=>t(),h4=Symbol(),j1=Symbol();function tb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];eb(i)&&eb(r)&&t.hasOwnProperty(n)&&!po(r)&&!Zc(r)?t[n]=tb(i,r):t[n]=r}return t}const sI=Symbol();function oI(t){return!eb(t)||!t.hasOwnProperty(sI)}const{assign:th}=Object;function aI(t){return!!(po(t)&&t.effect)}function lI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const h=YL(n.state.value[t]);return th(h,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=wy(Jn(()=>{Ty(n);const g=n._s.get(t);return o[v].call(g,g)})),p),{}))}return l=PC(t,c,e,n,r,!0),l}function PC(t,e,n={},r,i,s){let o;const a=th({actions:{}},n),l={deep:!0};let c,h,p=[],v=[],g;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Ct({});let E;function k(N){let j;c=h=!1,typeof N=="function"?(N(r.state.value[t]),j={type:zg.patchFunction,storeId:t,events:g}):(tb(r.state.value[t],N),j={type:zg.patchObject,payload:N,storeId:t,events:g});const K=E=Symbol();da().then(()=>{E===K&&(c=!0)}),h=!0,Gf(p,j,r.state.value[t])}const A=s?function(){const{state:j}=n,K=j?j():{};this.$patch(I=>{th(I,K)})}:EC;function D(){o.stop(),p=[],v=[],r._s.delete(t)}const z=(N,j="")=>{if(h4 in N)return N[j1]=j,N;const K=function(){Ty(r);const I=Array.from(arguments),R=[],B=[];function $(ne){R.push(ne)}function U(ne){B.push(ne)}Gf(v,{args:I,name:K[j1],store:te,after:$,onError:U});let V;try{V=N.apply(this&&this.$id===t?this:te,I)}catch(ne){throw Gf(B,ne),ne}return V instanceof Promise?V.then(ne=>(Gf(R,ne),ne)).catch(ne=>(Gf(B,ne),Promise.reject(ne))):(Gf(R,V),V)};return K[h4]=!0,K[j1]=j,K},Y={_p:r,$id:t,$onAction:d4.bind(null,v),$patch:k,$reset:A,$subscribe(N,j={}){const K=d4(p,N,j.detached,()=>I()),I=o.run(()=>ki(()=>r.state.value[t],R=>{(j.flush==="sync"?h:c)&&N({storeId:t,type:zg.direct,events:g},R)},th({},l,j)));return K},$dispose:D},te=su(Y);r._s.set(t,te);const pe=(r._a&&r._a.runWithContext||iI)(()=>r._e.run(()=>(o=l_()).run(()=>e({action:z}))));for(const N in pe){const j=pe[N];if(po(j)&&!aI(j)||Zc(j))s||(x&&oI(j)&&(po(j)?j.value=x[N]:tb(j,x[N])),r.state.value[t][N]=j);else if(typeof j=="function"){const K=z(j,N);pe[N]=K,a.actions[N]=j}}return th(te,pe),th(Fi(te),pe),Object.defineProperty(te,"$state",{get:()=>r.state.value[t],set:N=>{k(j=>{th(j,N)})}}),r._p.forEach(N=>{th(te,o.run(()=>N({store:te,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(te.$state,x),c=!0,h=!0,te}/*! #__NO_SIDE_EFFECTS__ */function Rp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=LS();return a=a||(c?Pu(CC,null):null),a&&Ty(a),a=SC,a._s.has(r)||(s?PC(r,e,i,a):lI(r,i,a)),a._s.get(r)}return o.$id=r,o}function MC(t,e){return function(){return t.apply(e,arguments)}}const{toString:uI}=Object.prototype,{getPrototypeOf:A_}=Object,Dy=(t=>e=>{const n=uI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ec=t=>(t=t.toLowerCase(),e=>Dy(e)===t),Oy=t=>e=>typeof e===t,{isArray:Fp}=Array,hm=Oy("undefined");function cI(t){return t!==null&&!hm(t)&&t.constructor!==null&&!hm(t.constructor)&&Mu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kC=Ec("ArrayBuffer");function dI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&kC(t.buffer),e}const hI=Oy("string"),Mu=Oy("function"),AC=Oy("number"),Ny=t=>t!==null&&typeof t=="object",fI=t=>t===!0||t===!1,J0=t=>{if(Dy(t)!=="object")return!1;const e=A_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},pI=Ec("Date"),gI=Ec("File"),mI=Ec("Blob"),vI=Ec("FileList"),yI=t=>Ny(t)&&Mu(t.pipe),bI=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Mu(t.append)&&((e=Dy(t))==="formdata"||e==="object"&&Mu(t.toString)&&t.toString()==="[object FormData]"))},_I=Ec("URLSearchParams"),[wI,xI,LI,SI]=["ReadableStream","Request","Response","Headers"].map(Ec),CI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Am(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Fp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function TC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const sf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,DC=t=>!hm(t)&&t!==sf;function nb(){const{caseless:t}=DC(this)&&this||{},e={},n=(r,i)=>{const s=t&&TC(e,i)||i;J0(e[s])&&J0(r)?e[s]=nb(e[s],r):J0(r)?e[s]=nb({},r):Fp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Am(arguments[r],n);return e}const EI=(t,e,n,{allOwnKeys:r}={})=>(Am(e,(i,s)=>{n&&Mu(i)?t[s]=MC(i,n):t[s]=i},{allOwnKeys:r}),t),PI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),MI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},kI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&A_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},AI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},TI=t=>{if(!t)return null;if(Fp(t))return t;let e=t.length;if(!AC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},DI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&A_(Uint8Array)),OI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},NI=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},II=Ec("HTMLFormElement"),BI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),f4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),RI=Ec("RegExp"),OC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Am(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},FI=t=>{OC(t,(e,n)=>{if(Mu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Mu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},jI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Fp(t)?r(t):r(String(t).split(e)),n},zI=()=>{},$I=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function VI(t){return!!(t&&Mu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const UI=t=>{const e=new Array(10),n=(r,i)=>{if(Ny(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Fp(r)?[]:{};return Am(r,(o,a)=>{const l=n(o,i+1);!hm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},HI=Ec("AsyncFunction"),WI=t=>t&&(Ny(t)||Mu(t))&&Mu(t.then)&&Mu(t.catch),NC=((t,e)=>t?setImmediate:e?((n,r)=>(sf.addEventListener("message",({source:i,data:s})=>{i===sf&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),sf.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Mu(sf.postMessage)),GI=typeof queueMicrotask<"u"?queueMicrotask.bind(sf):typeof process<"u"&&process.nextTick||NC,Xt={isArray:Fp,isArrayBuffer:kC,isBuffer:cI,isFormData:bI,isArrayBufferView:dI,isString:hI,isNumber:AC,isBoolean:fI,isObject:Ny,isPlainObject:J0,isReadableStream:wI,isRequest:xI,isResponse:LI,isHeaders:SI,isUndefined:hm,isDate:pI,isFile:gI,isBlob:mI,isRegExp:RI,isFunction:Mu,isStream:yI,isURLSearchParams:_I,isTypedArray:DI,isFileList:vI,forEach:Am,merge:nb,extend:EI,trim:CI,stripBOM:PI,inherits:MI,toFlatObject:kI,kindOf:Dy,kindOfTest:Ec,endsWith:AI,toArray:TI,forEachEntry:OI,matchAll:NI,isHTMLForm:II,hasOwnProperty:f4,hasOwnProp:f4,reduceDescriptors:OC,freezeMethods:FI,toObjectSet:jI,toCamelCase:BI,noop:zI,toFiniteNumber:$I,findKey:TC,global:sf,isContextDefined:DC,isSpecCompliantForm:VI,toJSONObject:UI,isAsyncFn:HI,isThenable:WI,setImmediate:NC,asap:GI};function li(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xt.inherits(li,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xt.toJSONObject(this.config),code:this.code,status:this.status}}});const IC=li.prototype,BC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{BC[t]={value:t}});Object.defineProperties(li,BC);Object.defineProperty(IC,"isAxiosError",{value:!0});li.from=(t,e,n,r,i,s)=>{const o=Object.create(IC);return Xt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),li.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const qI=null;function rb(t){return Xt.isPlainObject(t)||Xt.isArray(t)}function RC(t){return Xt.endsWith(t,"[]")?t.slice(0,-2):t}function p4(t,e,n){return t?t.concat(e).map(function(i,s){return i=RC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function YI(t){return Xt.isArray(t)&&!t.some(rb)}const KI=Xt.toFlatObject(Xt,{},null,function(e){return/^is[A-Z]/.test(e)});function Iy(t,e,n){if(!Xt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,k){return!Xt.isUndefined(k[E])});const r=n.metaTokens,i=n.visitor||h,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xt.isSpecCompliantForm(e);if(!Xt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Xt.isDate(x))return x.toISOString();if(!l&&Xt.isBlob(x))throw new li("Blob is not supported. Use a Buffer instead.");return Xt.isArrayBuffer(x)||Xt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,E,k){let A=x;if(x&&!k&&typeof x=="object"){if(Xt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Xt.isArray(x)&&YI(x)||(Xt.isFileList(x)||Xt.endsWith(E,"[]"))&&(A=Xt.toArray(x)))return E=RC(E),A.forEach(function(z,Y){!(Xt.isUndefined(z)||z===null)&&e.append(o===!0?p4([E],Y,s):o===null?E:E+"[]",c(z))}),!1}return rb(x)?!0:(e.append(p4(k,E,s),c(x)),!1)}const p=[],v=Object.assign(KI,{defaultVisitor:h,convertValue:c,isVisitable:rb});function g(x,E){if(!Xt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Xt.forEach(x,function(A,D){(!(Xt.isUndefined(A)||A===null)&&i.call(e,A,Xt.isString(D)?D.trim():D,E,v))===!0&&g(A,E?E.concat(D):[D])}),p.pop()}}if(!Xt.isObject(t))throw new TypeError("data must be an object");return g(t),e}function g4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function T_(t,e){this._pairs=[],t&&Iy(t,this,e)}const FC=T_.prototype;FC.append=function(e,n){this._pairs.push([e,n])};FC.toString=function(e){const n=e?function(r){return e.call(this,r,g4)}:g4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function ZI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jC(t,e,n){if(!e)return t;const r=n&&n.encode||ZI;Xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Xt.isURLSearchParams(e)?e.toString():new T_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class m4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const zC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XI=typeof URLSearchParams<"u"?URLSearchParams:T_,JI=typeof FormData<"u"?FormData:null,QI=typeof Blob<"u"?Blob:null,e7={isBrowser:!0,classes:{URLSearchParams:XI,FormData:JI,Blob:QI},protocols:["http","https","file","blob","url","data"]},D_=typeof window<"u"&&typeof document<"u",ib=typeof navigator=="object"&&navigator||void 0,t7=D_&&(!ib||["ReactNative","NativeScript","NS"].indexOf(ib.product)<0),n7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r7=D_&&window.location.href||"http://localhost",i7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:D_,hasStandardBrowserEnv:t7,hasStandardBrowserWebWorkerEnv:n7,navigator:ib,origin:r7},Symbol.toStringTag,{value:"Module"})),fl={...i7,...e7};function s7(t,e){return Iy(t,new fl.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return fl.isNode&&Xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function o7(t){return Xt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function a7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function $C(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Xt.isArray(i)?i.length:o,l?(Xt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Xt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Xt.isArray(i[o])&&(i[o]=a7(i[o])),!a)}if(Xt.isFormData(t)&&Xt.isFunction(t.entries)){const n={};return Xt.forEachEntry(t,(r,i)=>{e(o7(r),i,n,0)}),n}return null}function l7(t,e,n){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Tm={transitional:zC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Xt.isObject(e);if(s&&Xt.isHTMLForm(e)&&(e=new FormData(e)),Xt.isFormData(e))return i?JSON.stringify($C(e)):e;if(Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)||Xt.isReadableStream(e))return e;if(Xt.isArrayBufferView(e))return e.buffer;if(Xt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return s7(e,this.formSerializer).toString();if((a=Xt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return Iy(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),l7(e)):e}],transformResponse:[function(e){const n=this.transitional||Tm.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xt.isResponse(e)||Xt.isReadableStream(e))return e;if(e&&Xt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?li.from(a,li.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fl.classes.FormData,Blob:fl.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xt.forEach(["delete","get","head","post","put","patch"],t=>{Tm.headers[t]={}});const u7=Xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&u7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},v4=Symbol("internals");function Jp(t){return t&&String(t).trim().toLowerCase()}function Q0(t){return t===!1||t==null?t:Xt.isArray(t)?t.map(Q0):String(t)}function d7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const h7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function z1(t,e,n,r,i){if(Xt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xt.isString(e)){if(Xt.isString(r))return e.indexOf(r)!==-1;if(Xt.isRegExp(r))return r.test(e)}}function f7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function p7(t,e){const n=Xt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let ru=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const h=Jp(l);if(!h)throw new Error("header name must be a non-empty string");const p=Xt.findKey(i,h);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=Q0(a))}const o=(a,l)=>Xt.forEach(a,(c,h)=>s(c,h,l));if(Xt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Xt.isString(e)&&(e=e.trim())&&!h7(e))o(c7(e),n);else if(Xt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=Jp(e),e){const r=Xt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return d7(i);if(Xt.isFunction(n))return n.call(this,i,r);if(Xt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Jp(e),e){const r=Xt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||z1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=Jp(o),o){const a=Xt.findKey(r,o);a&&(!n||z1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||z1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Xt.forEach(this,(i,s)=>{const o=Xt.findKey(r,s);if(o){n[o]=Q0(i),delete n[s];return}const a=e?f7(s):String(s).trim();a!==s&&delete n[s],n[a]=Q0(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[v4]=this[v4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=Jp(o);r[a]||(p7(i,o),r[a]=!0)}return Xt.isArray(e)?e.forEach(s):s(e),this}};ru.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xt.reduceDescriptors(ru.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xt.freezeMethods(ru);function $1(t,e){const n=this||Tm,r=e||n,i=ru.from(r.headers);let s=r.data;return Xt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function VC(t){return!!(t&&t.__CANCEL__)}function jp(t,e,n){li.call(this,t??"canceled",li.ERR_CANCELED,e,n),this.name="CanceledError"}Xt.inherits(jp,li,{__CANCEL__:!0});function UC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new li("Request failed with status code "+n.status,[li.ERR_BAD_REQUEST,li.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function g7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function m7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),h=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const g=h&&c-h;return g?Math.round(v*1e3/g):void 0}}function v7(t,e){let n=0,r=1e3/e,i,s;const o=(c,h=Date.now())=>{n=h,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const h=Date.now(),p=h-n;p>=r?o(c,h):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const Fv=(t,e,n=3)=>{let r=0;const i=m7(50,250);return v7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),h=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&h?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},y4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},b4=t=>(...e)=>Xt.asap(()=>t(...e)),y7=fl.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,fl.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(fl.origin),fl.navigator&&/(msie|trident)/i.test(fl.navigator.userAgent)):()=>!0,b7=fl.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Xt.isString(r)&&o.push("path="+r),Xt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function _7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function w7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function HC(t,e,n){let r=!_7(e);return t&&(r||n==!1)?w7(t,e):e}const _4=t=>t instanceof ru?{...t}:t;function yf(t,e){e=e||{};const n={};function r(c,h,p,v){return Xt.isPlainObject(c)&&Xt.isPlainObject(h)?Xt.merge.call({caseless:v},c,h):Xt.isPlainObject(h)?Xt.merge({},h):Xt.isArray(h)?h.slice():h}function i(c,h,p,v){if(Xt.isUndefined(h)){if(!Xt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,h,p,v)}function s(c,h){if(!Xt.isUndefined(h))return r(void 0,h)}function o(c,h){if(Xt.isUndefined(h)){if(!Xt.isUndefined(c))return r(void 0,c)}else return r(void 0,h)}function a(c,h,p){if(p in e)return r(c,h);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,h,p)=>i(_4(c),_4(h),p,!0)};return Xt.forEach(Object.keys(Object.assign({},t,e)),function(h){const p=l[h]||i,v=p(t[h],e[h],h);Xt.isUndefined(v)&&p!==a||(n[h]=v)}),n}const WC=t=>{const e=yf({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=ru.from(o),e.url=jC(HC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Xt.isFormData(n)){if(fl.hasStandardBrowserEnv||fl.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...h]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...h].join("; "))}}if(fl.hasStandardBrowserEnv&&(r&&Xt.isFunction(r)&&(r=r(e)),r||r!==!1&&y7(e.url))){const c=i&&s&&b7.read(s);c&&o.set(i,c)}return e},x7=typeof XMLHttpRequest<"u",L7=x7&&function(t){return new Promise(function(n,r){const i=WC(t);let s=i.data;const o=ru.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,h,p,v,g,x;function E(){g&&g(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function A(){if(!k)return;const z=ru.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),te={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:z,config:t,request:k};UC(function(pe){n(pe),E()},function(pe){r(pe),E()},te),k=null}"onloadend"in k?k.onloadend=A:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(A)},k.onabort=function(){k&&(r(new li("Request aborted",li.ECONNABORTED,t,k)),k=null)},k.onerror=function(){r(new li("Network Error",li.ERR_NETWORK,t,k)),k=null},k.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const te=i.transitional||zC;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new li(Y,te.clarifyTimeoutError?li.ETIMEDOUT:li.ECONNABORTED,t,k)),k=null},s===void 0&&o.setContentType(null),"setRequestHeader"in k&&Xt.forEach(o.toJSON(),function(Y,te){k.setRequestHeader(te,Y)}),Xt.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([v,x]=Fv(c,!0),k.addEventListener("progress",v)),l&&k.upload&&([p,g]=Fv(l),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",g)),(i.cancelToken||i.signal)&&(h=z=>{k&&(r(!z||z.type?new jp(null,t,k):z),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const D=g7(i.url);if(D&&fl.protocols.indexOf(D)===-1){r(new li("Unsupported protocol "+D+":",li.ERR_BAD_REQUEST,t));return}k.send(s||null)})},S7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const h=c instanceof Error?c:this.reason;r.abort(h instanceof li?h:new jp(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,s(new li(`timeout ${e} of ms exceeded`,li.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Xt.asap(a),l}},C7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},E7=async function*(t,e){for await(const n of P7(t))yield*C7(n,e)},P7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},w4=(t,e,n,r)=>{const i=E7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:h}=await i.next();if(c){a(),l.close();return}let p=h.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(h))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},By=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",GC=By&&typeof ReadableStream=="function",M7=By&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),qC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},k7=GC&&qC(()=>{let t=!1;const e=new Request(fl.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),x4=64*1024,sb=GC&&qC(()=>Xt.isReadableStream(new Response("").body)),jv={stream:sb&&(t=>t.body)};By&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!jv[e]&&(jv[e]=Xt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new li(`Response type '${e}' is not supported`,li.ERR_NOT_SUPPORT,r)})})})(new Response);const A7=async t=>{if(t==null)return 0;if(Xt.isBlob(t))return t.size;if(Xt.isSpecCompliantForm(t))return(await new Request(fl.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xt.isArrayBufferView(t)||Xt.isArrayBuffer(t))return t.byteLength;if(Xt.isURLSearchParams(t)&&(t=t+""),Xt.isString(t))return(await M7(t)).byteLength},T7=async(t,e)=>{const n=Xt.toFiniteNumber(t.getContentLength());return n??A7(e)},D7=By&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:h,withCredentials:p="same-origin",fetchOptions:v}=WC(t);c=c?(c+"").toLowerCase():"text";let g=S7([i,s&&s.toAbortSignal()],o),x;const E=g&&g.unsubscribe&&(()=>{g.unsubscribe()});let k;try{if(l&&k7&&n!=="get"&&n!=="head"&&(k=await T7(h,r))!==0){let te=new Request(e,{method:"POST",body:r,duplex:"half"}),ge;if(Xt.isFormData(r)&&(ge=te.headers.get("content-type"))&&h.setContentType(ge),te.body){const[pe,N]=y4(k,Fv(b4(l)));r=w4(te.body,x4,pe,N)}}Xt.isString(p)||(p=p?"include":"omit");const A="credentials"in Request.prototype;x=new Request(e,{...v,signal:g,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:r,duplex:"half",credentials:A?p:void 0});let D=await fetch(x);const z=sb&&(c==="stream"||c==="response");if(sb&&(a||z&&E)){const te={};["status","statusText","headers"].forEach(j=>{te[j]=D[j]});const ge=Xt.toFiniteNumber(D.headers.get("content-length")),[pe,N]=a&&y4(ge,Fv(b4(a),!0))||[];D=new Response(w4(D.body,x4,pe,()=>{N&&N(),E&&E()}),te)}c=c||"text";let Y=await jv[Xt.findKey(jv,c)||"text"](D,t);return!z&&E&&E(),await new Promise((te,ge)=>{UC(te,ge,{data:Y,headers:ru.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:x})})}catch(A){throw E&&E(),A&&A.name==="TypeError"&&/fetch/i.test(A.message)?Object.assign(new li("Network Error",li.ERR_NETWORK,t,x),{cause:A.cause||A}):li.from(A,A&&A.code,t,x)}}),ob={http:qI,xhr:L7,fetch:D7};Xt.forEach(ob,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const L4=t=>`- ${t}`,O7=t=>Xt.isFunction(t)||t===null||t===!1,YC={getAdapter:t=>{t=Xt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!O7(n)&&(r=ob[(o=String(n)).toLowerCase()],r===void 0))throw new li(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(L4).join(`
`):" "+L4(s[0]):"as no adapter specified";throw new li("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:ob};function V1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new jp(null,t)}function S4(t){return V1(t),t.headers=ru.from(t.headers),t.data=$1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),YC.getAdapter(t.adapter||Tm.adapter)(t).then(function(r){return V1(t),r.data=$1.call(t,t.transformResponse,r),r.headers=ru.from(r.headers),r},function(r){return VC(r)||(V1(t),r&&r.response&&(r.response.data=$1.call(t,t.transformResponse,r.response),r.response.headers=ru.from(r.response.headers))),Promise.reject(r)})}const KC="1.8.4",Ry={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ry[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const C4={};Ry.transitional=function(e,n,r){function i(s,o){return"[Axios v"+KC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new li(i(o," has been removed"+(n?" in "+n:"")),li.ERR_DEPRECATED);return n&&!C4[o]&&(C4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Ry.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function N7(t,e,n){if(typeof t!="object")throw new li("options must be an object",li.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new li("option "+s+" must be "+l,li.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new li("Unknown option "+s,li.ERR_BAD_OPTION)}}const ev={assertOptions:N7,validators:Ry},Bc=ev.validators;let df=class{constructor(e){this.defaults=e,this.interceptors={request:new m4,response:new m4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=yf(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&ev.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Xt.isFunction(i)?n.paramsSerializer={serialize:i}:ev.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ev.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Xt.merge(s.common,s[n.method]);s&&Xt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=ru.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let h,p=0,v;if(!l){const x=[S4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,h=Promise.resolve(n);p<v;)h=h.then(x[p++],x[p++]);return h}v=a.length;let g=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{g=x(g)}catch(k){E.call(this,k);break}}try{h=S4.call(this,g)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)h=h.then(c[p++],c[p++]);return h}getUri(e){e=yf(this.defaults,e);const n=HC(e.baseURL,e.url,e.allowAbsoluteUrls);return jC(n,e.params,e.paramsSerializer)}};Xt.forEach(["delete","get","head","options"],function(e){df.prototype[e]=function(n,r){return this.request(yf(r||{},{method:e,url:n,data:(r||{}).data}))}});Xt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(yf(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}df.prototype[e]=n(),df.prototype[e+"Form"]=n(!0)});let I7=class ZC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new jp(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new ZC(function(i){e=i}),cancel:e}}};function B7(t){return function(n){return t.apply(null,n)}}function R7(t){return Xt.isObject(t)&&t.isAxiosError===!0}const ab={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ab).forEach(([t,e])=>{ab[e]=t});function XC(t){const e=new df(t),n=MC(df.prototype.request,e);return Xt.extend(n,df.prototype,e,{allOwnKeys:!0}),Xt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return XC(yf(t,i))},n}const Ko=XC(Tm);Ko.Axios=df;Ko.CanceledError=jp;Ko.CancelToken=I7;Ko.isCancel=VC;Ko.VERSION=KC;Ko.toFormData=Iy;Ko.AxiosError=li;Ko.Cancel=Ko.CanceledError;Ko.all=function(e){return Promise.all(e)};Ko.spread=B7;Ko.isAxiosError=R7;Ko.mergeConfig=yf;Ko.AxiosHeaders=ru;Ko.formToJSON=t=>$C(Xt.isHTMLForm(t)?new FormData(t):t);Ko.getAdapter=YC.getAdapter;Ko.HttpStatusCode=ab;Ko.default=Ko;const{Axios:$oe,AxiosError:Voe,CanceledError:Uoe,isCancel:Hoe,CancelToken:Woe,VERSION:Goe,all:qoe,Cancel:Yoe,isAxiosError:Koe,spread:Zoe,toFormData:Xoe,AxiosHeaders:Joe,HttpStatusCode:Qoe,formToJSON:eae,getAdapter:tae,mergeConfig:nae}=Ko,gn=su({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let yh=null,of=null;const F7=1e3;function Fy(){if(gn.isEnabled){gn.isRecording=!0,gn.startTime=performance.now(),gn.frameCount=0,gn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(yh=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{gn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Sc()})})}),yh.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tches non support",t)}j7(),O_()}}function zv(){gn.isRecording=!1,yh&&(yh.disconnect(),yh=null),tE()}function lb(){yh&&(yh.disconnect(),yh=null),tE(),gn.measures=[],gn.longTasks=[],gn.memorySnapshots=[],gn.operationHistory=[],gn.frameCount=0,gn.framesPerSecond=0,gn.lastFpsUpdate=0,gn.isEnabled&&Fy()}function JC(t,e,n){if(!gn.isEnabled||!gn.isRecording)return()=>{};const r=performance.now(),i=gn.currentOperation;return gn.currentOperation=t,gn.operationStack.push(t),()=>{const s=performance.now()-r;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:r,duration:s,component:e||Sc(),info:n,parentOperation:i||void 0}),s>10&&gn.operationHistory.push({operation:t,component:e||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function QC(t,e,n,r){if(!gn.isEnabled||!gn.isRecording)return e();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=t,gn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:i,duration:o,component:n||Sc(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:t,component:n||Sc()||"unknown",durationMs:o,timestamp:Date.now()})}}function eE(t,e,n,r){if(!gn.isEnabled||!gn.isRecording)return e();const i=performance.now(),s=gn.currentOperation;gn.currentOperation=t,gn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;gn.operationStack.pop(),gn.currentOperation=gn.operationStack[gn.operationStack.length-1]||null,gn.measures.push({name:t,startTime:i,duration:o,component:n||Sc(),info:r,parentOperation:s||void 0}),o>10&&gn.operationHistory.push({operation:t,component:n||Sc()||"unknown",durationMs:o,timestamp:Date.now()})}}function O_(){!gn.isEnabled||!gn.isRecording||(performance.memory?gn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):gn.memorySnapshots.push({timestamp:performance.now()}))}function j7(){of!==null&&cancelAnimationFrame(of),gn.frameCount=0,gn.lastFpsUpdate=performance.now();function t(){gn.frameCount++;const e=performance.now();e-gn.lastFpsUpdate>=F7&&(gn.framesPerSecond=Math.round(gn.frameCount*1e3/(e-gn.lastFpsUpdate)),gn.frameCount=0,gn.lastFpsUpdate=e),gn.isRecording&&(of=requestAnimationFrame(t))}of=requestAnimationFrame(t)}function tE(){of!==null&&(cancelAnimationFrame(of),of=null)}function Sc(){return""}function ub(t){gn.isEnabled=t,t&&!gn.isRecording?Fy():!t&&gn.isRecording&&zv()}function nE(t,e,n){return(...r)=>{if(!gn.isEnabled||!gn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;gn.measures.push({name:e,startTime:i,duration:s,component:n||Sc(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:e,component:n||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function rE(t,e,n){return async(...r)=>{if(!gn.isEnabled||!gn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;gn.measures.push({name:e,startTime:i,duration:s,component:n||Sc(),info:{args:r}}),s>10&&gn.operationHistory.push({operation:e,component:n||Sc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function z7(t,e){const n=gn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function cb(t,e){const n=t||gn.startTime,r=e||performance.now(),i=z7(n,r),s=r-n,o=new Map;function a(c){const h=o.get(c.operation)||{duration:0,component:c.component};h.duration+=c.duration,o.set(c.operation,h),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:h,component:p}])=>({operation:c,duration:h,component:p,impact:h/s*100})).sort((c,h)=>h.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function zp(){const t=Ct(!1);go(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,ub(r),lb()}catch(n){console.warn("Erreur lors de la vrification du paramtre perf:",n),t.value=!1,ub(!1)}}),Zu(()=>{gn.isRecording&&zv()});const e=(n,r)=>{if(!gn.isEnabled||!gn.isRecording)return null;const i=gn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=gn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=gn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=gn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:pc(Ct(gn.isEnabled)),isQueryParamEnabled:pc(t),isRecording:pc(Ct(gn.isRecording)),measures:pc(Ct(gn.measures)),longTasks:pc(Ct(gn.longTasks)),memorySnapshots:pc(Ct(gn.memorySnapshots)),framesPerSecond:pc(Ct(gn.framesPerSecond)),operationHistory:pc(Ct(gn.operationHistory)),startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:O_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,getOperationDetails:e,getSlowOperations:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!gn.isEnabled||!gn.isRecording?[]:[...gn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!gn.isEnabled||!gn.isRecording)return null;const n=cb();return{totalMeasures:gn.measures.length,totalLongTasks:gn.longTasks.length,slowestOperations:[...gn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:gn.framesPerSecond,memoryUsage:gn.memorySnapshots.length>0?gn.memorySnapshots[gn.memorySnapshots.length-1]:null,operationsByComponent:$7(gn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:gn.isRecording?performance.now()-gn.startTime:null}},analyzeCriticalPaths:cb}}function $7(t){if(!gn.isEnabled||!gn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const An={startRecording:Fy,stopRecording:zv,clearRecording:lb,startMeasure:JC,measure:eE,measureAsync:QC,captureMemorySnapshot:O_,createPerformanceTracker:nE,createAsyncPerformanceTracker:rE,setEnabled:ub,analyzeCriticalPaths:cb},In=Ko.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),Gr=zp();function iE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}In.interceptors.request.use(async t=>{const e=Gr.startMeasure("api_request_interceptor","ApiService");try{const n=iE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));In.interceptors.response.use(t=>t,async t=>{var r,i;const e=Gr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=ga();try{await Gr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=iE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,In(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function V7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function tv(t){console.log("[fetchUsersByHierarchy] Rcupration des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqus:",e);try{const n=await Tl.getUsers(e);return console.log(`[fetchUsersByHierarchy] Rsultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la rcupration des utilisateurs:",n),n}}const Tl={async getUsers(t={}){const e=Gr.startMeasure("get_users","UserService");try{return await Gr.measureAsync("get_users_request",()=>In.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await In.get(`/users/${t}/`)},async createUser(t){return await In.post("/users/",t)},async updateUser(t,e){return await In.patch(`/users/${t}/`,e)},async deleteUser(t){return await In.delete(`/users/${t}/`)},async getEntreprises(){return await In.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await In.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await In.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await In.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=Gr.startMeasure("get_users_hierarchy","UserService");try{const n=Gr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await Gr.measureAsync("get_users_hierarchy_request",()=>In.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await In.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await In.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await In.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await In.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return Gr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=Gr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await Gr.measureAsync("upload_logo_request",()=>In.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function U1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} choue, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const v0={async getPlans(){const t=Gr.startMeasure("get_plans","IrrigationService");try{return await Gr.measureAsync("get_plans_request",()=>In.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=Gr.startMeasure("create_plan","IrrigationService");try{const n=Gr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await Gr.measureAsync("create_plan_request",()=>In.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=Gr.startMeasure("update_plan","IrrigationService");try{return await Gr.measureAsync("update_plan_request",()=>In.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=Gr.startMeasure("delete_plan","IrrigationService");try{return await Gr.measureAsync("delete_plan_request",()=>In.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await In.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await In.post("/plans/",t)},async getEntreprisePlans(t){return await In.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await In.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await In.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await In.post("/plans/",n)}},Ca={async getNotes(t={}){const e=Gr.startMeasure("get_notes","NoteService");try{return await Gr.measureAsync("get_notes_request",()=>In.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=Gr.startMeasure("get_notes_by_plan","NoteService");try{return await Gr.measureAsync("get_notes_by_plan_request",()=>In.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=Gr.startMeasure("get_note","NoteService");try{return await Gr.measureAsync("get_note_request",()=>In.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=Gr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await Gr.measureAsync("create_note_request",()=>In.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise  jour de la note:",{noteId:t,noteData:e});const n=Gr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Donnes formates:",r);const i=await Gr.measureAsync("update_note_request",()=>In.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Rponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise  jour:",r),r}finally{n()}},async deleteNote(t){const e=Gr.startMeasure("delete_note","NoteService");try{return await Gr.measureAsync("delete_note_request",()=>In.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await In.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await In.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await In.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await In.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await In.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await In.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await In.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await In.delete(`/notes/${t}/photos/${e}/`)}},H1={async getDevices(t={}){const e=Gr.startMeasure("get_weather_devices","WeatherService");try{return await U1(()=>In.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=Gr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await U1(()=>In.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=Gr.startMeasure("get_history_data","WeatherService");try{return await U1(()=>In.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},y0={async getFilters(){const t=Gr.startMeasure("get_map_filters","MapFilterService");try{return await Gr.measureAsync("get_map_filters_request",()=>In.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=Gr.startMeasure("get_map_filter","MapFilterService");try{return await Gr.measureAsync("get_map_filter_request",()=>In.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=Gr.startMeasure("create_map_filter","MapFilterService");try{return await Gr.measureAsync("create_map_filter_request",()=>In.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=Gr.startMeasure("update_map_filter","MapFilterService");try{return await Gr.measureAsync("update_map_filter_request",()=>In.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=Gr.startMeasure("delete_map_filter","MapFilterService");try{return await Gr.measureAsync("delete_map_filter_request",()=>In.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};In.defaults.baseURL="/api";In.defaults.headers.common["Content-Type"]="application/json";In.defaults.withCredentials=!0;function fm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}In.interceptors.request.use(t=>{const e=fm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));In.interceptors.response.use(t=>t,async t=>{var r,i;const e=ga(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!fm("access_token"))throw new Error("No token available");await e.refreshToken();const o=fm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,In(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function U7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function Lu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function H7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const W7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function G7(t){return W7[t]||t}function q7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function Y7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function K7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Tl.getUsers(i)).data}const ga=Rp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!fm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await In.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await In.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accs non reu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await In.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await In.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!fm("refresh_token"))throw new Error("No refresh token available");const r=await In.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return U7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Tl.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la rcupration des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Tl.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Tl.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Tl.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Tl.createUser(t)).data}catch(e){throw this.error="Erreur lors de la cration de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Tl.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise  jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Tl.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await In.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la rcupration des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await In.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise  jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await In.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise  jour du rle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await In.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise  jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Tl.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du tlversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await K7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Tl.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Tl.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la rcupration des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const rp=typeof document<"u";function sE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Z7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&sE(t.default)}const os=Object.assign;function W1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Cc(i)?i.map(t):t(i)}return n}const $g=()=>{},Cc=Array.isArray,oE=/#/g,X7=/&/g,J7=/\//g,Q7=/=/g,eB=/\?/g,aE=/\+/g,tB=/%5B/g,nB=/%5D/g,lE=/%5E/g,rB=/%60/g,uE=/%7B/g,iB=/%7C/g,cE=/%7D/g,sB=/%20/g;function N_(t){return encodeURI(""+t).replace(iB,"|").replace(tB,"[").replace(nB,"]")}function oB(t){return N_(t).replace(uE,"{").replace(cE,"}").replace(lE,"^")}function db(t){return N_(t).replace(aE,"%2B").replace(sB,"+").replace(oE,"%23").replace(X7,"%26").replace(rB,"`").replace(uE,"{").replace(cE,"}").replace(lE,"^")}function aB(t){return db(t).replace(Q7,"%3D")}function lB(t){return N_(t).replace(oE,"%23").replace(eB,"%3F")}function uB(t){return t==null?"":lB(t).replace(J7,"%2F")}function pm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cB=/\/$/,dB=t=>t.replace(cB,"");function G1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=gB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:pm(o)}}function hB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function E4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function fB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Ep(e.matched[r],n.matched[i])&&dE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Ep(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function dE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!pB(t[n],e[n]))return!1;return!0}function pB(t,e){return Cc(t)?P4(t,e):Cc(e)?P4(e,t):t===e}function P4(t,e){return Cc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function gB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Kd={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gm;(function(t){t.pop="pop",t.push="push"})(gm||(gm={}));var Vg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Vg||(Vg={}));function mB(t){if(!t)if(rp){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dB(t)}const vB=/^[^#]+#/;function yB(t,e){return t.replace(vB,"#")+e}function bB(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const jy=()=>({left:window.scrollX,top:window.scrollY});function _B(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=bB(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function M4(t,e){return(history.state?history.state.position-e:-1)+t}const hb=new Map;function wB(t,e){hb.set(t,e)}function xB(t){const e=hb.get(t);return hb.delete(t),e}let LB=()=>location.protocol+"//"+location.host;function hE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),E4(l,"")}return E4(n,t)+r+i}function SB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const g=hE(t,location),x=n.value,E=e.value;let k=0;if(v){if(n.value=g,e.value=v,o&&o===x){o=null;return}k=E?v.position-E.position:0}else r(g);i.forEach(A=>{A(n.value,x,{delta:k,type:gm.pop,direction:k?k>0?Vg.forward:Vg.back:Vg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const g=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(g),g}function h(){const{history:v}=window;v.state&&v.replaceState(os({},v.state,{scroll:jy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function k4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?jy():null}}function CB(t){const{history:e,location:n}=window,r={value:hE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,h){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:LB()+t+l;try{e[h?"replaceState":"pushState"](c,"",v),i.value=c}catch(g){console.error(g),n[h?"replace":"assign"](v)}}function o(l,c){const h=os({},e.state,k4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,h,!0),r.value=l}function a(l,c){const h=os({},i.value,e.state,{forward:l,scroll:jy()});s(h.current,h,!0);const p=os({},k4(r.value,l,null),{position:h.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function EB(t){t=mB(t);const e=CB(t),n=SB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=os({location:"",base:t,go:r,createHref:yB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function PB(t){return typeof t=="string"||t&&typeof t=="object"}function fE(t){return typeof t=="string"||typeof t=="symbol"}const pE=Symbol("");var A4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(A4||(A4={}));function Pp(t,e){return os(new Error,{type:t,[pE]:!0},e)}function yd(t,e){return t instanceof Error&&pE in t&&(e==null||!!(t.type&e))}const T4="[^/]+?",MB={sensitive:!1,strict:!1,start:!0,end:!0},kB=/[.+*?^${}()[\]/\\]/g;function AB(t,e){const n=os({},MB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const h=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let g=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(kB,"\\$&"),g+=40;else if(v.type===1){const{value:x,repeatable:E,optional:k,regexp:A}=v;s.push({name:x,repeatable:E,optional:k});const D=A||T4;if(D!==T4){g+=10;try{new RegExp(`(${D})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${D}): `+Y.message)}}let z=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||(z=k&&c.length<2?`(?:/${z})`:"/"+z),k&&(z+="?"),i+=z,g+=20,k&&(g+=-8),E&&(g+=-20),D===".*"&&(g+=-50)}h.push(g)}r.push(h)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const h=c.match(o),p={};if(!h)return null;for(let v=1;v<h.length;v++){const g=h[v]||"",x=s[v-1];p[x.name]=g&&x.repeatable?g.split("/"):g}return p}function l(c){let h="",p=!1;for(const v of t){(!p||!h.endsWith("/"))&&(h+="/"),p=!1;for(const g of v)if(g.type===0)h+=g.value;else if(g.type===1){const{value:x,repeatable:E,optional:k}=g,A=x in c?c[x]:"";if(Cc(A)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const D=Cc(A)?A.join("/"):A;if(!D)if(k)v.length<2&&(h.endsWith("/")?h=h.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);h+=D}}return h||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function TB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function gE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=TB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(D4(r))return 1;if(D4(i))return-1}return i.length-r.length}function D4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const DB={type:0,value:""},OB=/[a-zA-Z0-9_]/;function NB(t){if(!t)return[[]];if(t==="/")return[[DB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(g){throw new Error(`ERR (${n})/"${c}": ${g}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",h="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:h,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:OB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?h[h.length-1]=="\\"?h=h.slice(0,-1)+l:n=3:h+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,h="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function IB(t,e,n){const r=AB(NB(t.path),n),i=os(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function BB(t,e){const n=[],r=new Map;e=B4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,g){const x=!g,E=N4(p);E.aliasOf=g&&g.record;const k=B4(e,p),A=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of Y)A.push(N4(os({},E,{components:g?g.record.components:E.components,path:te,aliasOf:g?g.record:E})))}let D,z;for(const Y of A){const{path:te}=Y;if(v&&te[0]!=="/"){const ge=v.record.path,pe=ge[ge.length-1]==="/"?"":"/";Y.path=v.record.path+(te&&pe+te)}if(D=IB(Y,v,k),g?g.alias.push(D):(z=z||D,z!==D&&z.alias.push(D),x&&p.name&&!I4(D)&&o(p.name)),mE(D)&&l(D),E.children){const ge=E.children;for(let pe=0;pe<ge.length;pe++)s(ge[pe],D,g&&g.children[pe])}g=g||D}return z?()=>{o(z)}:$g}function o(p){if(fE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=jB(p,n);n.splice(v,0,p),p.record.name&&!I4(p)&&r.set(p.record.name,p)}function c(p,v){let g,x={},E,k;if("name"in p&&p.name){if(g=r.get(p.name),!g)throw Pp(1,{location:p});k=g.record.name,x=os(O4(v.params,g.keys.filter(z=>!z.optional).concat(g.parent?g.parent.keys.filter(z=>z.optional):[]).map(z=>z.name)),p.params&&O4(p.params,g.keys.map(z=>z.name))),E=g.stringify(x)}else if(p.path!=null)E=p.path,g=n.find(z=>z.re.test(E)),g&&(x=g.parse(E),k=g.record.name);else{if(g=v.name?r.get(v.name):n.find(z=>z.re.test(v.path)),!g)throw Pp(1,{location:p,currentLocation:v});k=g.record.name,x=os({},v.params,p.params),E=g.stringify(x)}const A=[];let D=g;for(;D;)A.unshift(D.record),D=D.parent;return{name:k,path:E,params:x,matched:A,meta:FB(A)}}t.forEach(p=>s(p));function h(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:h,getRoutes:a,getRecordMatcher:i}}function O4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function N4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:RB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function RB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function I4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function FB(t){return t.reduce((e,n)=>os(e,n.meta),{})}function B4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function jB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;gE(t,e[s])<0?r=s:n=s+1}const i=zB(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function zB(t){let e=t;for(;e=e.parent;)if(mE(e)&&gE(t,e)===0)return e}function mE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function $B(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(aE," "),o=s.indexOf("="),a=pm(o<0?s:s.slice(0,o)),l=o<0?null:pm(s.slice(o+1));if(a in e){let c=e[a];Cc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function R4(t){let e="";for(let n in t){const r=t[n];if(n=aB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Cc(r)?r.map(s=>s&&db(s)):[r&&db(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function VB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Cc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const UB=Symbol(""),F4=Symbol(""),zy=Symbol(""),I_=Symbol(""),fb=Symbol("");function Qp(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function oh(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(Pp(4,{from:n,to:e})):v instanceof Error?l(v):PB(v)?l(Pp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},h=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(h);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function q1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(sE(l)){const h=(l.__vccOpts||l)[e];h&&s.push(oh(h,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(h=>{if(!h)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=Z7(h)?h.default:h;o.mods[a]=h,o.components[a]=p;const g=(p.__vccOpts||p)[e];return g&&oh(g,n,r,o,a,i)()}))}}return s}function j4(t){const e=Pu(zy),n=Pu(I_),r=Jn(()=>{const l=Yn(t.to);return e.resolve(l)}),i=Jn(()=>{const{matched:l}=r.value,{length:c}=l,h=l[c-1],p=n.matched;if(!h||!p.length)return-1;const v=p.findIndex(Ep.bind(null,h));if(v>-1)return v;const g=z4(l[c-2]);return c>1&&z4(h)===g&&p[p.length-1].path!==g?p.findIndex(Ep.bind(null,l[c-2])):v}),s=Jn(()=>i.value>-1&&qB(n.params,r.value.params)),o=Jn(()=>i.value>-1&&i.value===n.matched.length-1&&dE(n.params,r.value.params));function a(l={}){if(GB(l)){const c=e[Yn(t.replace)?"replace":"push"](Yn(t.to)).catch($g);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Jn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function HB(t){return t.length===1?t[0]:t}const WB=Rs({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:j4,setup(t,{slots:e}){const n=su(j4(t)),{options:r}=Pu(zy),i=Jn(()=>({[$4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[$4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&HB(e.default(n));return t.custom?s:My("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),yg=WB;function GB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function qB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Cc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function z4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const $4=(t,e,n)=>t??e??n,YB=Rs({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Pu(fb),i=Jn(()=>t.route||r.value),s=Pu(F4,0),o=Jn(()=>{let c=Yn(s);const{matched:h}=i.value;let p;for(;(p=h[c])&&!p.components;)c++;return c}),a=Jn(()=>i.value.matched[o.value]);Rg(F4,Jn(()=>o.value+1)),Rg(UB,a),Rg(fb,i);const l=Ct();return ki(()=>[l.value,a.value,t.name],([c,h,p],[v,g,x])=>{h&&(h.instances[p]=c,g&&g!==h&&c&&c===v&&(h.leaveGuards.size||(h.leaveGuards=g.leaveGuards),h.updateGuards.size||(h.updateGuards=g.updateGuards))),c&&h&&(!g||!Ep(h,g)||!v)&&(h.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,h=t.name,p=a.value,v=p&&p.components[h];if(!v)return V4(n.default,{Component:v,route:c});const g=p.props[h],x=g?g===!0?c.params:typeof g=="function"?g(c):g:null,k=My(v,os({},x,e,{onVnodeUnmounted:A=>{A.component.isUnmounted&&(p.instances[h]=null)},ref:l}));return V4(n.default,{Component:k,route:c})||k}}});function V4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const vE=YB;function KB(t){const e=BB(t.routes,t),n=t.parseQuery||$B,r=t.stringifyQuery||R4,i=t.history,s=Qp(),o=Qp(),a=Qp(),l=p_(Kd);let c=Kd;rp&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const h=W1.bind(null,de=>""+de),p=W1.bind(null,uB),v=W1.bind(null,pm);function g(de,ce){let J,Re;return fE(de)?(J=e.getRecordMatcher(de),Re=ce):Re=de,e.addRoute(Re,J)}function x(de){const ce=e.getRecordMatcher(de);ce&&e.removeRoute(ce)}function E(){return e.getRoutes().map(de=>de.record)}function k(de){return!!e.getRecordMatcher(de)}function A(de,ce){if(ce=os({},ce||l.value),typeof de=="string"){const Q=G1(n,de,ce.path),se=e.resolve({path:Q.path},ce),ue=i.createHref(Q.fullPath);return os(Q,se,{params:v(se.params),hash:pm(Q.hash),redirectedFrom:void 0,href:ue})}let J;if(de.path!=null)J=os({},de,{path:G1(n,de.path,ce.path).path});else{const Q=os({},de.params);for(const se in Q)Q[se]==null&&delete Q[se];J=os({},de,{params:p(Q)}),ce.params=p(ce.params)}const Re=e.resolve(J,ce),De=de.hash||"";Re.params=h(v(Re.params));const et=hB(r,os({},de,{hash:oB(De),path:Re.path})),he=i.createHref(et);return os({fullPath:et,hash:De,query:r===R4?VB(de.query):de.query||{}},Re,{redirectedFrom:void 0,href:he})}function D(de){return typeof de=="string"?G1(n,de,l.value.path):os({},de)}function z(de,ce){if(c!==de)return Pp(8,{from:ce,to:de})}function Y(de){return pe(de)}function te(de){return Y(os(D(de),{replace:!0}))}function ge(de){const ce=de.matched[de.matched.length-1];if(ce&&ce.redirect){const{redirect:J}=ce;let Re=typeof J=="function"?J(de):J;return typeof Re=="string"&&(Re=Re.includes("?")||Re.includes("#")?Re=D(Re):{path:Re},Re.params={}),os({query:de.query,hash:de.hash,params:Re.path!=null?{}:de.params},Re)}}function pe(de,ce){const J=c=A(de),Re=l.value,De=de.state,et=de.force,he=de.replace===!0,Q=ge(J);if(Q)return pe(os(D(Q),{state:typeof Q=="object"?os({},De,Q.state):De,force:et,replace:he}),ce||J);const se=J;se.redirectedFrom=ce;let ue;return!et&&fB(r,Re,J)&&(ue=Pp(16,{to:se,from:Re}),Ze(Re,Re,!0,!1)),(ue?Promise.resolve(ue):K(se,Re)).catch(ze=>yd(ze)?yd(ze,2)?ze:ve(ze):X(ze,se,Re)).then(ze=>{if(ze){if(yd(ze,2))return pe(os({replace:he},D(ze.to),{state:typeof ze.to=="object"?os({},De,ze.to.state):De,force:et}),ce||se)}else ze=R(se,Re,!0,he,De);return I(se,Re,ze),ze})}function N(de,ce){const J=z(de,ce);return J?Promise.reject(J):Promise.resolve()}function j(de){const ce=Z.values().next().value;return ce&&typeof ce.runWithContext=="function"?ce.runWithContext(de):de()}function K(de,ce){let J;const[Re,De,et]=ZB(de,ce);J=q1(Re.reverse(),"beforeRouteLeave",de,ce);for(const Q of Re)Q.leaveGuards.forEach(se=>{J.push(oh(se,de,ce))});const he=N.bind(null,de,ce);return J.push(he),fe(J).then(()=>{J=[];for(const Q of s.list())J.push(oh(Q,de,ce));return J.push(he),fe(J)}).then(()=>{J=q1(De,"beforeRouteUpdate",de,ce);for(const Q of De)Q.updateGuards.forEach(se=>{J.push(oh(se,de,ce))});return J.push(he),fe(J)}).then(()=>{J=[];for(const Q of et)if(Q.beforeEnter)if(Cc(Q.beforeEnter))for(const se of Q.beforeEnter)J.push(oh(se,de,ce));else J.push(oh(Q.beforeEnter,de,ce));return J.push(he),fe(J)}).then(()=>(de.matched.forEach(Q=>Q.enterCallbacks={}),J=q1(et,"beforeRouteEnter",de,ce,j),J.push(he),fe(J))).then(()=>{J=[];for(const Q of o.list())J.push(oh(Q,de,ce));return J.push(he),fe(J)}).catch(Q=>yd(Q,8)?Q:Promise.reject(Q))}function I(de,ce,J){a.list().forEach(Re=>j(()=>Re(de,ce,J)))}function R(de,ce,J,Re,De){const et=z(de,ce);if(et)return et;const he=ce===Kd,Q=rp?history.state:{};J&&(Re||he?i.replace(de.fullPath,os({scroll:he&&Q&&Q.scroll},De)):i.push(de.fullPath,De)),l.value=de,Ze(de,ce,J,he),ve()}let B;function $(){B||(B=i.listen((de,ce,J)=>{if(!me.listening)return;const Re=A(de),De=ge(Re);if(De){pe(os(De,{replace:!0,force:!0}),Re).catch($g);return}c=Re;const et=l.value;rp&&wB(M4(et.fullPath,J.delta),jy()),K(Re,et).catch(he=>yd(he,12)?he:yd(he,2)?(pe(os(D(he.to),{force:!0}),Re).then(Q=>{yd(Q,20)&&!J.delta&&J.type===gm.pop&&i.go(-1,!1)}).catch($g),Promise.reject()):(J.delta&&i.go(-J.delta,!1),X(he,Re,et))).then(he=>{he=he||R(Re,et,!1),he&&(J.delta&&!yd(he,8)?i.go(-J.delta,!1):J.type===gm.pop&&yd(he,20)&&i.go(-1,!1)),I(Re,et,he)}).catch($g)}))}let U=Qp(),V=Qp(),ne;function X(de,ce,J){ve(de);const Re=V.list();return Re.length?Re.forEach(De=>De(de,ce,J)):console.error(de),Promise.reject(de)}function we(){return ne&&l.value!==Kd?Promise.resolve():new Promise((de,ce)=>{U.add([de,ce])})}function ve(de){return ne||(ne=!de,$(),U.list().forEach(([ce,J])=>de?J(de):ce()),U.reset()),de}function Ze(de,ce,J,Re){const{scrollBehavior:De}=t;if(!rp||!De)return Promise.resolve();const et=!J&&xB(M4(de.fullPath,0))||(Re||!J)&&history.state&&history.state.scroll||null;return da().then(()=>De(de,ce,et)).then(he=>he&&_B(he)).catch(he=>X(he,de,ce))}const ie=de=>i.go(de);let H;const Z=new Set,me={currentRoute:l,listening:!0,addRoute:g,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:E,resolve:A,options:t,push:Y,replace:te,go:ie,back:()=>ie(-1),forward:()=>ie(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:V.add,isReady:we,install(de){const ce=this;de.component("RouterLink",yg),de.component("RouterView",vE),de.config.globalProperties.$router=ce,Object.defineProperty(de.config.globalProperties,"$route",{enumerable:!0,get:()=>Yn(l)}),rp&&!H&&l.value===Kd&&(H=!0,Y(i.location).catch(De=>{}));const J={};for(const De in Kd)Object.defineProperty(J,De,{get:()=>l.value[De],enumerable:!0});de.provide(zy,ce),de.provide(I_,f_(J)),de.provide(fb,l);const Re=de.unmount;Z.add(de),de.unmount=function(){Z.delete(de),Z.size<1&&(c=Kd,B&&B(),B=null,l.value=Kd,H=!1,ne=!1),Re()}}};function fe(de){return de.reduce((ce,J)=>ce.then(()=>j(J)),Promise.resolve())}return me}function ZB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Ep(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Ep(c,l))||i.push(l))}return[n,r,i]}function Dm(){return Pu(zy)}function XB(t){return Pu(I_)}const iu=Rp("notification",()=>{const t=Ct([]),e=Ct(0),n=Ct(null),r=Jn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:g=5e3}){const x=++e.value,E=Date.now(),k={id:x,type:p,message:v,duration:g,timestamp:E};return t.value.push(k),n.value=x,g>0&&setTimeout(()=>{c(x)},g),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(g=>g.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function h(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:h,success:s,error:o,info:a,warning:l}}),JB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:iu},Symbol.toStringTag,{value:"Module"}));var Ea=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function B_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function yE(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function QB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var bE=QB,eR=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,tR=eR,nR=tR,rR=typeof self=="object"&&self&&self.Object===Object&&self,iR=nR||rR||Function("return this")(),_E=iR,sR=_E,oR=function(){return sR.Date.now()},aR=oR,lR=/\s/;function uR(t){for(var e=t.length;e--&&lR.test(t.charAt(e)););return e}var cR=uR,dR=cR,hR=/^\s+/;function fR(t){return t&&t.slice(0,dR(t)+1).replace(hR,"")}var pR=fR,gR=_E,mR=gR.Symbol,wE=mR,U4=wE,xE=Object.prototype,vR=xE.hasOwnProperty,yR=xE.toString,eg=U4?U4.toStringTag:void 0;function bR(t){var e=vR.call(t,eg),n=t[eg];try{t[eg]=void 0;var r=!0}catch{}var i=yR.call(t);return r&&(e?t[eg]=n:delete t[eg]),i}var _R=bR,wR=Object.prototype,xR=wR.toString;function LR(t){return xR.call(t)}var SR=LR,H4=wE,CR=_R,ER=SR,PR="[object Null]",MR="[object Undefined]",W4=H4?H4.toStringTag:void 0;function kR(t){return t==null?t===void 0?MR:PR:W4&&W4 in Object(t)?CR(t):ER(t)}var AR=kR;function TR(t){return t!=null&&typeof t=="object"}var DR=TR,OR=AR,NR=DR,IR="[object Symbol]";function BR(t){return typeof t=="symbol"||NR(t)&&OR(t)==IR}var RR=BR,FR=pR,G4=bE,jR=RR,q4=NaN,zR=/^[-+]0x[0-9a-f]+$/i,$R=/^0b[01]+$/i,VR=/^0o[0-7]+$/i,UR=parseInt;function HR(t){if(typeof t=="number")return t;if(jR(t))return q4;if(G4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=G4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=FR(t);var n=$R.test(t);return n||VR.test(t)?UR(t.slice(2),n?2:8):zR.test(t)?q4:+t}var WR=HR,GR=bE,Y1=aR,Y4=WR,qR="Expected a function",YR=Math.max,KR=Math.min;function ZR(t,e,n){var r,i,s,o,a,l,c=0,h=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(qR);e=Y4(e)||0,GR(n)&&(h=!!n.leading,p="maxWait"in n,s=p?YR(Y4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function g(ge){var pe=r,N=i;return r=i=void 0,c=ge,o=t.apply(N,pe),o}function x(ge){return c=ge,a=setTimeout(A,e),h?g(ge):o}function E(ge){var pe=ge-l,N=ge-c,j=e-pe;return p?KR(j,s-N):j}function k(ge){var pe=ge-l,N=ge-c;return l===void 0||pe>=e||pe<0||p&&N>=s}function A(){var ge=Y1();if(k(ge))return D(ge);a=setTimeout(A,E(ge))}function D(ge){return a=void 0,v&&r?g(ge):(r=i=void 0,o)}function z(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:D(Y1())}function te(){var ge=Y1(),pe=k(ge);if(r=arguments,i=this,l=ge,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(A,e),g(l)}return a===void 0&&(a=setTimeout(A,e)),o}return te.cancel=z,te.flush=Y,te}var XR=ZR;const JR=B_(XR),QR={class:"relative w-full"},eF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},tF=["onClick"],K4=Rs({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Ct(""),r=Ct([]),i=e,s=JR(async l=>{if(l.length<3){r.value=[];return}try{const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=h}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Te(),Ie("div",QR,[kn(S("input",{"onUpdate:modelValue":c[0]||(c[0]=h=>n.value=h),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[$r,n.value]]),r.value.length>0?(Te(),Ie("div",eF,[(Te(!0),Ie(wn,null,ir(r.value,h=>(Te(),Ie("div",{key:h.place_id,onClick:p=>a(h),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},kt(h.display_name),9,tF))),128))])):Jt("",!0)]))}}),nF={class:"perf-title"},rF={class:"perf-basic-stats"},iF={class:"perf-stat"},sF={class:"perf-stat"},oF={class:"perf-expand-btn"},aF={key:0,class:"perf-content"},lF={class:"perf-section"},uF={class:"perf-metrics"},cF={class:"perf-metric"},dF={class:"perf-metric-value"},hF={class:"perf-metric"},fF={class:"perf-metric-value"},pF={class:"perf-metric"},gF={class:"perf-metric-value"},mF={class:"perf-metric"},vF={class:"perf-metric-value"},yF={class:"perf-section"},bF={class:"perf-metrics"},_F={key:0,class:"perf-metric"},wF={class:"perf-metric-value"},xF={key:1,class:"perf-metric"},LF={class:"perf-metric-value"},SF={key:2,class:"perf-metric"},CF={class:"perf-metric-value"},EF={class:"perf-section"},PF={class:"perf-table"},MF={class:"perf-table-cell"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF=["onClick"],OF={key:0,class:"perf-empty"},NF=Rs({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Ct(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:h,startRecording:p,stopRecording:v,clearRecording:g,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:k,getOperationDetails:A}=zp(),D=Jn(()=>{const R=k()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:R.totalMeasures,totalLongTasks:R.totalLongTasks,averageDuration:R.slowestOperations.length>0?R.slowestOperations.reduce((B,$)=>B+$.duration,0)/R.slowestOperations.length:0,fps:R.averageFps,slowestOperations:R.slowestOperations,memoryUsage:R.memoryUsage}}),z=Jn(()=>(k()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(B=>({operation:B.name,component:B.component||"unknown",durationMs:B.duration,timestamp:B.startTime}))),Y=Ct(null);go(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Zu(()=>{Y.value!==null&&clearInterval(Y.value)});function te(R){return R===void 0?"N/A":R<1024?R+" B":R<1024*1024?(R/1024).toFixed(2)+" KB":R<1024*1024*1024?(R/(1024*1024)).toFixed(2)+" MB":(R/(1024*1024*1024)).toFixed(2)+" GB"}function ge(R){return R.toFixed(2)}const pe=()=>{x()};function N(){const R=k(),B="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(R,null,2)),$=document.createElement("a");$.setAttribute("href",B),$.setAttribute("download","performance_report.json"),document.body.appendChild($),$.click(),$.remove()}function j(){g(),pe()}function K(){const R=k();navigator.clipboard.writeText(JSON.stringify(R,null,2)).then(()=>{alert("Donnes de performance copies dans le presse-papiers")}).catch(B=>{console.error("Erreur lors de la copie des donnes",B),alert("Erreur lors de la copie des donnes")})}async function I(R){const B=A(R.operation,R.timestamp);if(!B){alert("Impossible de trouver les dtails de cette opration");return}const $={operation:{...B.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(B.operation.startTime).toISOString()},context:{...B.context,relatedOperations:B.context.relatedOperations.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),longTasks:B.context.longTasks.map(U=>({...U,startTime:`+${U.startTime.toFixed(2)}ms`})),memorySnapshots:B.context.memorySnapshots.map(U=>({...U,timestamp:`+${U.timestamp.toFixed(2)}ms`,usedJSHeapSize:U.usedJSHeapSize?te(U.usedJSHeapSize):"N/A",totalJSHeapSize:U.totalJSHeapSize?te(U.totalJSHeapSize):"N/A"}))},summary:{...B.summary,memoryDelta:te(B.summary.memoryDelta),maxLongTaskDuration:`${B.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify($,null,2)),alert("Dtails de l'opration copis dans le presse-papiers")}catch(U){console.error("Erreur lors de la copie des dtails",U),alert("Erreur lors de la copie des dtails")}}return(R,B)=>{var $,U,V,ne,X,we;return Yn(i)?(Te(),Ie("div",{key:0,class:Di(["performance-panel",`position-${Yn(n)}`,{expanded:r.value}])},[S("div",{class:"perf-header",onClick:B[0]||(B[0]=ve=>r.value=!r.value)},[S("div",nF,[S("div",{class:Di(["perf-indicator",{active:Yn(s)}])},null,2),B[1]||(B[1]=S("span",null,"Performance",-1))]),S("div",rF,[S("span",iF,kt(D.value.fps)+" FPS",1),S("span",sF,kt(ge(D.value.averageDuration))+"ms",1)]),S("button",oF,kt(r.value?"":""),1)]),r.value?(Te(),Ie("div",aF,[S("div",lF,[B[6]||(B[6]=S("h3",null,"Mtriques gnrales",-1)),S("div",uF,[S("div",cF,[B[2]||(B[2]=S("span",{class:"perf-metric-label"},"Mesures",-1)),S("span",dF,kt(D.value.totalMeasures),1)]),S("div",hF,[B[3]||(B[3]=S("span",{class:"perf-metric-label"},"Tches longues",-1)),S("span",fF,kt(D.value.totalLongTasks),1)]),S("div",pF,[B[4]||(B[4]=S("span",{class:"perf-metric-label"},"Dure moyenne",-1)),S("span",gF,kt(ge(D.value.averageDuration))+"ms",1)]),S("div",mF,[B[5]||(B[5]=S("span",{class:"perf-metric-label"},"FPS",-1)),S("span",vF,kt(D.value.fps),1)])])]),S("div",yF,[B[10]||(B[10]=S("h3",null,"Mmoire",-1)),S("div",bF,[(($=D.value.memoryUsage)==null?void 0:$.usedJSHeapSize)!==void 0?(Te(),Ie("div",_F,[B[7]||(B[7]=S("span",{class:"perf-metric-label"},"Utilise",-1)),S("span",wF,kt(te((U=D.value.memoryUsage)==null?void 0:U.usedJSHeapSize)),1)])):Jt("",!0),((V=D.value.memoryUsage)==null?void 0:V.totalJSHeapSize)!==void 0?(Te(),Ie("div",xF,[B[8]||(B[8]=S("span",{class:"perf-metric-label"},"Totale",-1)),S("span",LF,kt(te((ne=D.value.memoryUsage)==null?void 0:ne.totalJSHeapSize)),1)])):Jt("",!0),((X=D.value.memoryUsage)==null?void 0:X.jsHeapSizeLimit)!==void 0?(Te(),Ie("div",SF,[B[9]||(B[9]=S("span",{class:"perf-metric-label"},"Limite",-1)),S("span",CF,kt(te((we=D.value.memoryUsage)==null?void 0:we.jsHeapSizeLimit)),1)])):Jt("",!0)])]),S("div",EF,[B[13]||(B[13]=S("h3",null,"Oprations les plus lentes",-1)),S("div",PF,[B[12]||(B[12]=tu('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opration</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Dure</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Te(!0),Ie(wn,null,ir(z.value,ve=>(Te(),Ie("div",{class:"perf-table-row",key:ve.timestamp},[S("div",MF,kt(ve.operation),1),S("div",kF,kt(ve.component),1),S("div",AF,kt(ge(ve.durationMs))+"ms",1),S("div",TF,[S("button",{onClick:Ze=>I(ve),class:"perf-action-button",title:"Copier les dtails"},B[11]||(B[11]=[S("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,DF)])]))),128)),z.value.length===0?(Te(),Ie("div",OF," Aucune opration enregistre ")):Jt("",!0)])]),S("div",{class:"perf-actions"},[S("button",{onClick:j,class:"perf-button"}," Rinitialiser "),S("button",{onClick:N,class:"perf-button"}," Tlcharger "),S("button",{onClick:K,class:"perf-button"}," Copier ")])])):Jt("",!0)],2)):Jt("",!0)}}}),rd=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},IF=rd(NF,[["__scopeId","data-v-fefe39b0"]]),BF={key:0,class:"pwa-update-notification"},RF=Rs({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Ct(!1),r=async()=>{window.location.reload(),n.value=!1},i=()=>{n.value=!1};return e({showUpdateNotification:n,refreshApp:r,closeNotification:i}),(s,o)=>n.value?(Te(),Ie("div",BF,[S("div",{class:"pwa-update-content"},[o[0]||(o[0]=S("p",null,"Une nouvelle version est disponible",-1)),S("div",{class:"pwa-update-actions"},[S("button",{onClick:r,class:"pwa-update-button"},"Mettre  jour"),S("button",{onClick:i,class:"pwa-close-button"},"Plus tard")])])])):Jt("",!0)}}),FF=rd(RF,[["__scopeId","data-v-aa687693"]]),jF="/static/frontend/img/icons/android-chrome-192x192.png",zF={class:"prompt-content"},$F={class:"prompt-body"},VF={key:0,class:"install-instructions ios"},UF={key:1,class:"install-instructions android"},HF={key:2,class:"install-instructions desktop"},WF={key:3,class:"install-instructions desktop"},GF=Rs({__name:"PWAInstallPrompt",setup(t){const e=Ct(!1),n=Ct(!1),r=Ct(null);Ct(null);const i=Ct(!1),s=Ct(!1),o=Ct(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const g=localStorage.getItem("pwaPromptLastClosed");if(!g)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(g)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",g=>{g.preventDefault(),r.value=g,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",g=>{console.log("Application installe avec succs",g),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},h=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};go(()=>{c()}),kh(()=>{h()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const g=await r.value.userChoice;r.value=null,g.outcome==="accepted"?(console.log("Installation accepte"),e.value=!1):console.log("Installation refuse")}catch(g){console.error("Erreur lors de l'installation:",g)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(g,x)=>e.value?(Te(),Ie("div",{key:0,class:Di(["pwa-install-prompt",{fullscreen:n.value}])},[S("div",zF,[S("div",{class:"prompt-header"},[x[1]||(x[1]=S("div",{class:"app-info"},[S("img",{src:jF,alt:"TagMap Logo",class:"app-logo"}),S("div",{class:"app-details"},[S("h2",null,"Installer TagMap"),S("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),S("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[S("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),S("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),S("div",$F,[i.value?(Te(),Ie("div",VF,x[2]||(x[2]=[tu('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites dfiler et appuyez sur <strong data-v-48772823>Sur l&#39;cran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut  droite</p></div></div>',4)]))):s.value?(Te(),Ie("div",UF,[x[3]||(x[3]=S("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Te(),Ie("div",HF,[x[5]||(x[5]=S("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=S("div",{class:"instruction-step"},[S("div",{class:"step-number"},"1"),S("div",{class:"step-content"},[S("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),S("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Te(),Ie("div",WF,x[7]||(x[7]=[tu('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icne d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),S("div",{class:"prompt-footer"},[x[8]||(x[8]=tu('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Scuris</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),S("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):Jt("",!0)}}),qF=rd(GF,[["__scopeId","data-v-48772823"]]),YF={class:"h-screen flex flex-col"},KF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},ZF={class:"mx-auto px-4 sm:px-6 lg:px-8"},XF={class:"flex h-16 items-center justify-between"},JF={class:"flex items-center"},QF={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},t9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},n9={class:"hidden md:flex md:ml-6 space-x-8"},r9={key:0,class:"flex-1 mx-2"},i9={class:"hidden md:block"},s9={class:"md:hidden"},o9={key:1,class:"flex-1"},a9={class:"flex items-center space-x-2 md:space-x-4"},l9={class:"relative"},u9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},c9={class:"flex items-center justify-between w-full"},d9={class:"flex items-center space-x-3"},h9={class:"max-h-72 overflow-y-auto"},f9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},p9={class:"flex items-start"},g9={class:"flex-shrink-0 mr-3"},m9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},v9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},y9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={class:"flex-1"},w9={class:"text-sm md:text-sm text-gray-800"},x9=["onClick"],L9={class:"relative"},S9={class:"hidden md:flex flex-col items-end"},C9={class:"text-sm font-medium text-gray-700"},E9={key:0,class:"text-xs text-gray-500"},P9=["src","alt"],M9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},k9={class:"text-sm font-semibold text-gray-700"},A9={class:"text-xs text-gray-500"},T9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},D9={class:"space-y-1 px-2 pb-3 pt-2"},O9=Rs({__name:"App",setup(t){const e=Dm(),n=ga(),r=iu(),i=Ct(!1),s=Ct(!1),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(!1),h=Ct(!1),p=Ct(null),v=Ct("13px"),g=Ct("65px"),x=Ct(null),E=Ct(null),k=Ct(!1);function A(){h.value=window.innerWidth<768}go(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",D),window.addEventListener("pwa-update-available",()=>{k.value=!0})}),kh(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",D),window.removeEventListener("pwa-update-available",()=>{})});function D(){if(!p.value)return;const U=p.value.getBoundingClientRect();v.value=`${U.top+window.scrollY+5}px`;const V=U.left+U.width/2;g.value=`${window.innerWidth-V-22}px`}const z=Jn(()=>{const U=n.user;if(!U)return"";const V=`${U.first_name} ${U.last_name.toUpperCase()}`;return U.company_name?`${V} (${U.company_name})`:V}),Y=Jn(()=>{var V;switch((V=n.user)==null?void 0:V.user_type){case"admin":return"Accs administrateur";case"entreprise":return"Accs entreprise";case"salarie":return"Accs salarie";case"visiteur":return"Accs visiteur";default:return""}}),te=Jn(()=>{var U;return((U=n.user)==null?void 0:U.user_type)==="admin"}),ge=Jn(()=>n.isAuthenticated),pe=[{name:"Carte",to:"/"},{name:"Mto",to:"/meteo"},{name:"Notes",to:"/notes"}],N=Jn(()=>{var V;if(!ge.value)return[];const U=[...pe];return(te.value||((V=n.user)==null?void 0:V.user_type)==="entreprise")&&U.push({name:"Utilisateurs",to:"/users"}),U}),j=Jn(()=>ge.value?[{name:"Mon profil",to:"/profile"}]:[]);async function K(){try{await n.logout(),e.push("/login")}catch(U){console.error("Erreur lors de la dconnexion:",U)}}function I(U){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:U.lat,lng:U.lng,zoom:16}}))}go(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const V=localStorage.getItem("lastPlanId");V&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:V}}))}else console.log("No token found")}catch(U){console.error("Auth check error:",U),e.push("/login")}});const R=Jn(()=>{const U="TagMap";if(!ge.value)return`${U} - Connexion`;const V=e.currentRoute.value,X={home:"Carte",meteo:"Mto",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[V.name]||"";return X?`${U} - ${X}`:U});ki(R,U=>{document.title=U},{immediate:!0});const B=Jn(()=>r.notifications.length);function $(){r.clearAll(),o.value=!1}return cm(()=>{if(r.lastAddedId!==null){const U=r.notifications.find(V=>V.id===r.lastAddedId);U&&da(()=>{D(),a.value=!0,l.value={id:U.id,message:U.message,type:U.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var V;((V=l.value)==null?void 0:V.id)===U.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(U,V)=>{var ne;return Te(),Ie("div",YF,[ge.value?(Te(),Ie("header",KF,[S("nav",ZF,[S("div",XF,[S("div",JF,[S("button",{onClick:V[0]||(V[0]=X=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[V[7]||(V[7]=S("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Te(),Ie("svg",QF,[s.value?(Te(),Ie("path",t9)):(Te(),Ie("path",e9))]))]),mi(Yn(yg),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Gu(()=>V[8]||(V[8]=[S("span",{class:"md:inline hidden"},"TagMap",-1),S("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),S("div",n9,[(Te(!0),Ie(wn,null,ir(N.value,X=>(Te(),Sa(Yn(yg),{key:X.name,to:X.to,class:Di(["text-sm font-medium transition-colors duration-200",[U.$route.path===X.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Gu(()=>[Xr(kt(X.name),1)]),_:2},1032,["to","class"]))),128))])]),U.$route.path==="/"?(Te(),Ie("div",r9,[S("div",i9,[mi(K4,{onSelectLocation:I})]),S("div",s9,[mi(K4,{onSelectLocation:I,class:"max-w-full"})])])):(Te(),Ie("div",o9)),S("div",a9,[S("div",l9,[S("button",{ref_key:"bellButtonRef",ref:p,onClick:V[1]||(V[1]=X=>o.value=!o.value),class:Di(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},V[9]||(V[9]=[S("span",{class:"sr-only"},"Voir les notifications",-1),S("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Te(),Ie("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:nu(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",u9,[S("div",c9,[V[11]||(V[11]=S("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),S("div",d9,[B.value>0?(Te(),Ie("button",{key:0,onClick:$,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):Jt("",!0),S("button",{onClick:V[2]||(V[2]=X=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},V[10]||(V[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),S("div",h9,[B.value===0?(Te(),Ie("div",f9," Aucune notification ")):Jt("",!0),(Te(!0),Ie(wn,null,ir(Yn(r).notifications,X=>(Te(),Ie("div",{key:X.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[S("div",p9,[S("div",g9,[X.type==="success"?(Te(),Ie("svg",m9,V[12]||(V[12]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):X.type==="error"?(Te(),Ie("svg",v9,V[13]||(V[13]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):X.type==="warning"?(Te(),Ie("svg",y9,V[14]||(V[14]=[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Te(),Ie("svg",b9,V[15]||(V[15]=[S("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),S("div",_9,[S("p",w9,kt(X.message),1),S("button",{onClick:we=>Yn(r).removeNotification(X.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,x9)])])]))),128))])],4)):Jt("",!0)]),S("div",L9,[S("button",{onClick:V[3]||(V[3]=X=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[S("div",S9,[S("span",C9,kt(z.value),1),Y.value?(Te(),Ie("span",E9,kt(Y.value),1)):Jt("",!0)]),S("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((ne=Yn(n).user)==null?void 0:ne.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(z.value),alt:z.value},null,8,P9)]),i.value?(Te(),Ie("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:nu(h.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[S("div",M9,[S("div",null,[S("div",k9,kt(z.value),1),S("div",A9,kt(Y.value),1)]),S("button",{onClick:V[4]||(V[4]=X=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},V[16]||(V[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Te(!0),Ie(wn,null,ir(j.value,X=>(Te(),Sa(Yn(yg),{key:X.name,to:X.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:V[5]||(V[5]=we=>i.value=!1)},{default:Gu(()=>[Xr(kt(X.name),1)]),_:2},1032,["to"]))),128)),S("button",{onClick:K,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Dconnexion ")],4)):Jt("",!0)])])]),s.value?(Te(),Ie("div",T9,[S("div",D9,[(Te(!0),Ie(wn,null,ir(N.value,X=>(Te(),Sa(Yn(yg),{key:X.name,to:X.to,class:Di(["block px-3 py-2 rounded-md text-base font-medium",[U.$route.path===X.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:V[6]||(V[6]=we=>s.value=!1)},{default:Gu(()=>[Xr(kt(X.name),1)]),_:2},1032,["to","class"]))),128))])])):Jt("",!0)])])):Jt("",!0),S("main",{class:Di([U.$route.path==="/"&&!h.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[mi(Yn(vE))],2),mi(IF,{position:"bottom-left"}),mi(FF,{ref_key:"pwaUpdateNotification",ref:x},null,512),mi(qF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),N9="modulepreload",I9=function(t){return"/static/frontend/"+t},Z4={},kd=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=I9(l),l in Z4)return;Z4[l]=!0;const c=l.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":N9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},B9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},R9={class:"max-w-md w-full space-y-8"},F9={class:"space-y-4"},j9={class:"mt-1"},z9={class:"mt-1"},$9={class:"mt-1"},V9={key:0,class:"rounded-md bg-red-50 p-4"},U9={class:"flex"},H9={class:"ml-3"},W9={class:"text-sm font-medium text-red-800"},G9={key:1,class:"rounded-md bg-yellow-50 p-4"},q9={class:"flex"},Y9={class:"ml-3"},K9={class:"mt-2 text-sm text-yellow-700"},Z9={class:"list-disc pl-5 space-y-1"},X9=["disabled"],J9={class:"absolute left-0 inset-y-0 flex items-center pl-3"},Q9={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},ej={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},tj=Rs({__name:"ChangePasswordForm",setup(t){const e=Dm(),n=ga(),r=su({oldPassword:"",newPassword:"",confirmPassword:""}),i=Ct(!1),s=Ct("");go(()=>{var c,h;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(h=n.user)==null?void 0:h.must_change_password})});const o=Jn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractres"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Jn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,h,p,v,g,x,E,k;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifi";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(A){console.error("Password change failed:",A),(p=(h=A.response)==null?void 0:h.data)!=null&&p.detail?s.value=A.response.data.detail:(g=(v=A.response)==null?void 0:v.data)!=null&&g.old_password?s.value=A.response.data.old_password[0]:(E=(x=A.response)==null?void 0:x.data)!=null&&E.password?s.value=A.response.data.password[0]:((k=A.response)==null?void 0:k.status)===401?(s.value="Session expire, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,h)=>(Te(),Ie("div",B9,[S("div",R9,[h[12]||(h[12]=S("div",null,[S("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),S("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de scurit, vous devez changer votre mot de passe. ")],-1)),S("form",{class:"mt-8 space-y-6",onSubmit:Su(l,["prevent"])},[S("div",F9,[S("div",null,[h[3]||(h[3]=S("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),S("div",j9,[kn(S("input",{id:"old-password","onUpdate:modelValue":h[0]||(h[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[$r,r.oldPassword]])])]),S("div",null,[h[4]||(h[4]=S("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),S("div",z9,[kn(S("input",{id:"new-password","onUpdate:modelValue":h[1]||(h[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[$r,r.newPassword]])]),h[5]||(h[5]=S("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractres ",-1))]),S("div",null,[h[6]||(h[6]=S("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),S("div",$9,[kn(S("input",{id:"confirm-password","onUpdate:modelValue":h[2]||(h[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[$r,r.confirmPassword]])])])]),s.value?(Te(),Ie("div",V9,[S("div",U9,[h[7]||(h[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",H9,[S("h3",W9,kt(s.value),1)])])])):Jt("",!0),o.value.length>0?(Te(),Ie("div",G9,[S("div",q9,[h[9]||(h[9]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),S("div",Y9,[h[8]||(h[8]=S("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),S("div",K9,[S("ul",Z9,[(Te(!0),Ie(wn,null,ir(o.value,(p,v)=>(Te(),Ie("li",{key:v},kt(p),1))),128))])])])])])):Jt("",!0),S("div",null,[S("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[S("span",J9,[i.value?(Te(),Ie("svg",ej,h[11]||(h[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Te(),Ie("svg",Q9,h[10]||(h[10]=[S("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),Xr(" "+kt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,X9)])],32)])]))}}),nj="/static/frontend/assets/background.svg",rj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},ij={class:"container mx-auto relative z-10"},sj={class:"sm:mx-auto sm:w-full sm:max-w-md"},oj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},aj={key:0,class:"rounded-md bg-red-50 p-4"},lj={class:"flex"},uj={class:"ml-3"},cj={class:"text-sm font-medium text-red-800"},dj={class:"mt-1"},hj={class:"mt-1 relative"},fj=["type"],pj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},gj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},mj={class:"flex items-center justify-between"},vj={class:"flex items-center"},yj={class:"text-sm"},bj=["disabled"],_j={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},wj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xj={class:"mt-12"},Lj={class:"flex flex-wrap justify-center gap-2 mb-8"},Sj=["onClick"],Cj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ej={class:"flex items-center mb-4"},Pj={class:"text-2xl mr-2"},Mj={class:"text-xl font-semibold text-gray-900"},kj={class:"text-gray-600 text-sm"},Aj={key:0,class:"flex justify-center mt-8 gap-2"},Tj=["onClick"],K1=6,Dj=Rs({__name:"LoginView",setup(t){const e=Dm(),n=ga(),r=Ct(!1),i=Ct(null),s=Ct(!1),o=Ct("Tous"),a=Ct(1),l=su({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"",text:"En tant qu'entreprise, j'ai mis en place un sous-compte  agriculteur  permettant la golocalisation des parcelles. Cela offre  nos salaris et prestataires une visibilit complte sur l'ensemble des parcelles et facilite leur accs. De plus, ils peuvent y ajouter des notes et des photos si ncessaire. Grce aux trackers, nous renforons galement la scurit de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrler l'accs de nos salaris aux diffrentes tches."},{type:"Agence de voyage",sector:"Tourisme",icon:"",text:"L'outil nous permet de crer gratuitement et sans limite des sous-comptes clients, d'tablir des itinraires personnaliss avec des points d'intrt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"",text:"Nous disposons d'un compte entreprise avec des sous-comptes ddis  chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grce aux stations mto connectes, nous optimisons la gestion des tours d'irrigation par secteur gographique en fonction des prcipitations."},{type:"Conseil municipal",sector:"Collectivit",icon:"",text:"Cette solution nous permet de gagner en efficacit dans la gestion des tches  raliser, en les golocalisant et en offrant  nos employs communaux la possibilit d'ajouter des commentaires et des photos sur chaque tche gorfrence."},{type:"Location de matriel",sector:"Services",icon:"",text:"Cette solution nous permet de golocaliser notre flotte grce  des trackers sans abonnement, avec uniquement un abonnement  la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"",text:"J'ai quip tous mes canons d'enrouleurs de trackers et de camras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"",text:"Nous assurons la golocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"",text:"Nous avons golocalis tous les forages de nos clients et ajout en commentaire la procdure d'entre, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"",text:"Nous golocalisons tous nos chantiers et ajoutons une photo du chantier termin en commentaire, servant de preuve en cas de litige."}],h=Jn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Jn(()=>{let x=o.value==="Tous"?c:c.filter(A=>A.sector===o.value);const E=(a.value-1)*K1,k=E+K1;return x.slice(E,k)}),v=Jn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/K1)});go(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function g(){var x,E,k,A,D,z,Y,te,ge;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez ressayer dans quelques instants.":((k=pe==null?void 0:pe.response)==null?void 0:k.status)===401||((A=pe==null?void 0:pe.response)==null?void 0:A.status)===403?i.value="Identifiants incorrects. Veuillez vrifier votre nom d'utilisateur et mot de passe.":(z=(D=pe==null?void 0:pe.response)==null?void 0:D.data)!=null&&z.detail?i.value=pe.response.data.detail:(ge=(te=(Y=pe==null?void 0:pe.response)==null?void 0:Y.data)==null?void 0:te.non_field_errors)!=null&&ge[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vrifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez ressayer."}finally{r.value=!1}}return(x,E)=>{const k=yS("router-link");return Te(),Ie("div",rj,[S("div",{class:"fixed inset-0 z-0",style:nu({backgroundImage:`url(${Yn(nj)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=S("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),S("div",ij,[S("div",sj,[S("div",oj,[E[12]||(E[12]=S("div",{class:"text-center mb-8"},[S("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),S("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),S("form",{class:"space-y-6",onSubmit:Su(g,["prevent"])},[i.value?(Te(),Ie("div",aj,[S("div",lj,[E[4]||(E[4]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",uj,[S("h3",cj,kt(i.value),1)])])])):Jt("",!0),S("div",null,[E[5]||(E[5]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),S("div",dj,[kn(S("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=A=>l.username=A),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[$r,l.username]])])]),S("div",null,[E[8]||(E[8]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),S("div",hj,[kn(S("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=A=>l.password=A),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,fj),[[k_,l.password]]),S("button",{type:"button",onClick:E[2]||(E[2]=A=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Te(),Ie("svg",pj,E[6]||(E[6]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Te(),Ie("svg",gj,E[7]||(E[7]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),S("div",mj,[S("div",vj,[kn(S("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=A=>l.rememberMe=A),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Al,l.rememberMe]]),E[9]||(E[9]=S("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),S("div",yj,[mi(k,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Gu(()=>E[10]||(E[10]=[Xr(" Mot de passe oubli ? ")])),_:1})])]),S("div",null,[S("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Te(),Ie("svg",_j,E[11]||(E[11]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),Xr(" "+kt(r.value?"Connexion en cours...":"Se connecter"),1)],8,bj)])],32)])]),S("div",wj,[E[14]||(E[14]=tu('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>quipements Connects sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Golocalisez et scurisez votre matriel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32></div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station mto</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos dcisions avec des donnes en temps rel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive o tout est sous contrle ! Tout est centralis, organis et accessible en un clin d&#39;il !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Rel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;quipe simplifi : Collaborez en temps rel sur une interface ultra-intuitive. Vos quipes restent synchronises et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32></span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accs Scuris</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accs scuris et intelligent : Grez les droits d&#39;accs de vos salaris et prestataires en un clic.</p></div></div>',2)),S("div",xj,[E[13]||(E[13]=S("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),S("div",Lj,[(Te(!0),Ie(wn,null,ir(h.value,A=>(Te(),Ie("button",{key:A,onClick:D=>o.value=A,class:Di(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,Sj))),128))]),S("div",Cj,[(Te(!0),Ie(wn,null,ir(p.value,A=>(Te(),Ie("div",{key:A.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[S("div",Ej,[S("span",Pj,kt(A.icon),1),S("span",Mj,kt(A.type),1)]),S("p",kj,kt(A.text),1)]))),128))]),v.value>1?(Te(),Ie("div",Aj,[(Te(!0),Ie(wn,null,ir(v.value,A=>(Te(),Ie("button",{key:A,onClick:D=>a.value=A,class:Di(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===A?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},kt(A),11,Tj))),128))])):Jt("",!0)])]),E[15]||(E[15]=S("div",{class:"h-16"},null,-1))])])}}}),Oj=rd(Dj,[["__scopeId","data-v-9ff7ee32"]]),X4="/static/frontend/assets/logo.svg";var pb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ea,function(n){var r="1.9.4";function i(u){var y,P,G,ae;for(P=1,G=arguments.length;P<G;P++){ae=arguments[P];for(y in ae)u[y]=ae[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var G=P.call(arguments,2);return function(){return u.apply(y,G.length?G.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var G,ae,Pe,ut;return ut=function(){G=!1,ae&&(Pe.apply(P,ae),ae=!1)},Pe=function(){G?ae=arguments:(u.apply(P,arguments),setTimeout(ut,y),G=!0)},Pe}function h(u,y,P){var G=y[1],ae=y[0],Pe=G-ae;return u===G&&P?u:((u-ae)%Pe+Pe)%Pe+ae}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function g(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return g(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function k(u,y,P){var G=[];for(var ae in u)G.push(encodeURIComponent(P?ae.toUpperCase():ae)+"="+encodeURIComponent(u[ae]));return(!y||y.indexOf("?")===-1?"?":"&")+G.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function D(u,y){return u.replace(A,function(P,G){var ae=y[G];if(ae===void 0)throw new Error("No value provided for variable "+P);return typeof ae=="function"&&(ae=ae(y)),ae})}var z=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ge(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function N(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var j=window.requestAnimationFrame||ge("RequestAnimationFrame")||N,K=window.cancelAnimationFrame||ge("CancelAnimationFrame")||ge("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function I(u,y,P){if(P&&j===N)u.call(y);else return j.call(window,o(u,y))}function R(u){u&&K.call(window,u)}var B={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:h,falseFn:p,formatNum:v,trim:g,splitWords:x,setOptions:E,getParamString:k,template:D,isArray:z,indexOf:Y,emptyImageUrl:te,requestFn:j,cancelFn:K,requestAnimFrame:I,cancelAnimFrame:R};function $(){}$.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,G=s(P);G.constructor=y,y.prototype=G;for(var ae in this)Object.prototype.hasOwnProperty.call(this,ae)&&ae!=="prototype"&&ae!=="__super__"&&(y[ae]=this[ae]);return u.statics&&i(y,u.statics),u.includes&&(U(u.includes),i.apply(null,[G].concat(u.includes))),i(G,u),delete G.statics,delete G.includes,G.options&&(G.options=P.options?s(P.options):{},i(G.options,u.options)),G._initHooks=[],G.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ut=G._initHooks.length;Pe<ut;Pe++)G._initHooks[Pe].call(this)}},y},$.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},$.mergeOptions=function(u){return i(this.prototype.options,u),this},$.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function U(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=z(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var V={on:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y);else{u=x(u);for(var ae=0,Pe=u.length;ae<Pe;ae++)this._on(u[ae],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var G in u)this._off(G,u[G],y);else{u=x(u);for(var ae=arguments.length===1,Pe=0,ut=u.length;Pe<ut;Pe++)ae?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,G){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var ae={fn:y,ctx:P};G&&(ae.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(ae)}},_off:function(u,y,P){var G,ae,Pe;if(this._events&&(G=this._events[u],!!G)){if(arguments.length===1){if(this._firingCount)for(ae=0,Pe=G.length;ae<Pe;ae++)G[ae].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ut=this._listens(u,y,P);if(ut!==!1){var Ot=G[ut];this._firingCount&&(Ot.fn=p,this._events[u]=G=G.slice()),G.splice(ut,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var G=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var ae=this._events[u];if(ae){this._firingCount=this._firingCount+1||1;for(var Pe=0,ut=ae.length;Pe<ut;Pe++){var Ot=ae[Pe],Wt=Ot.fn;Ot.once&&this.off(u,Wt,Ot.ctx),Wt.call(Ot.ctx||this,G)}this._firingCount--}}return P&&this._propagateEvent(G),this},listens:function(u,y,P,G){typeof u!="string"&&console.warn('"string" type argument expected');var ae=y;typeof y!="function"&&(G=!!y,ae=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,ae,P)!==!1)return!0;if(G){for(var ut in this._eventParents)if(this._eventParents[ut].listens(u,y,P,G))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var G=this._events[u]||[];if(!y)return!!G.length;P===this&&(P=void 0);for(var ae=0,Pe=G.length;ae<Pe;ae++)if(G[ae].fn===y&&G[ae].ctx===P)return ae;return!1},once:function(u,y,P){if(typeof u=="object")for(var G in u)this._on(G,u[G],y,!0);else{u=x(u);for(var ae=0,Pe=u.length;ae<Pe;ae++)this._on(u[ae],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};V.addEventListener=V.on,V.removeEventListener=V.clearAllEventListeners=V.off,V.addOneTimeEventListener=V.once,V.fireEvent=V.fire,V.hasEventListeners=V.listens;var ne=$.extend(V);function X(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var we=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};X.prototype={clone:function(){return new X(this.x,this.y)},add:function(u){return this.clone()._add(ve(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(ve(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new X(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new X(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=we(this.x),this.y=we(this.y),this},distanceTo:function(u){u=ve(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=ve(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=ve(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function ve(u,y,P){return u instanceof X?u:z(u)?new X(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new X(u.x,u.y):new X(u,y,P)}function Ze(u,y){if(u)for(var P=y?[u,y]:u,G=0,ae=P.length;G<ae;G++)this.extend(P[G])}Ze.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof X||typeof u[0]=="number"||"x"in u)y=P=ve(u);else if(u=ie(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return ve((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return ve(this.min.x,this.max.y)},getTopRight:function(){return ve(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof X?u=ve(u):u=ie(u),u instanceof Ze?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=ie(u);var y=this.min,P=this.max,G=u.min,ae=u.max,Pe=ae.x>=y.x&&G.x<=P.x,ut=ae.y>=y.y&&G.y<=P.y;return Pe&&ut},overlaps:function(u){u=ie(u);var y=this.min,P=this.max,G=u.min,ae=u.max,Pe=ae.x>y.x&&G.x<P.x,ut=ae.y>y.y&&G.y<P.y;return Pe&&ut},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,G=Math.abs(y.x-P.x)*u,ae=Math.abs(y.y-P.y)*u;return ie(ve(y.x-G,y.y-ae),ve(P.x+G,P.y+ae))},equals:function(u){return u?(u=ie(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function ie(u,y){return!u||u instanceof Ze?u:new Ze(u,y)}function H(u,y){if(u)for(var P=y?[u,y]:u,G=0,ae=P.length;G<ae;G++)this.extend(P[G])}H.prototype={extend:function(u){var y=this._southWest,P=this._northEast,G,ae;if(u instanceof me)G=u,ae=u;else if(u instanceof H){if(G=u._southWest,ae=u._northEast,!G||!ae)return this}else return u?this.extend(fe(u)||Z(u)):this;return!y&&!P?(this._southWest=new me(G.lat,G.lng),this._northEast=new me(ae.lat,ae.lng)):(y.lat=Math.min(G.lat,y.lat),y.lng=Math.min(G.lng,y.lng),P.lat=Math.max(ae.lat,P.lat),P.lng=Math.max(ae.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,G=Math.abs(y.lat-P.lat)*u,ae=Math.abs(y.lng-P.lng)*u;return new H(new me(y.lat-G,y.lng-ae),new me(P.lat+G,P.lng+ae))},getCenter:function(){return new me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new me(this.getNorth(),this.getWest())},getSouthEast:function(){return new me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof me||"lat"in u?u=fe(u):u=Z(u);var y=this._southWest,P=this._northEast,G,ae;return u instanceof H?(G=u.getSouthWest(),ae=u.getNorthEast()):G=ae=u,G.lat>=y.lat&&ae.lat<=P.lat&&G.lng>=y.lng&&ae.lng<=P.lng},intersects:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ae=u.getNorthEast(),Pe=ae.lat>=y.lat&&G.lat<=P.lat,ut=ae.lng>=y.lng&&G.lng<=P.lng;return Pe&&ut},overlaps:function(u){u=Z(u);var y=this._southWest,P=this._northEast,G=u.getSouthWest(),ae=u.getNorthEast(),Pe=ae.lat>y.lat&&G.lat<P.lat,ut=ae.lng>y.lng&&G.lng<P.lng;return Pe&&ut},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=Z(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Z(u,y){return u instanceof H?u:new H(u,y)}function me(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}me.prototype={equals:function(u,y){if(!u)return!1;u=fe(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return ce.distance(this,fe(u))},wrap:function(){return ce.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return Z([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new me(this.lat,this.lng,this.alt)}};function fe(u,y,P){return u instanceof me?u:z(u)&&typeof u[0]!="object"?u.length===3?new me(u[0],u[1],u[2]):u.length===2?new me(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new me(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new me(u,y,P)}var de={latLngToPoint:function(u,y){var P=this.projection.project(u),G=this.scale(y);return this.transformation._transform(P,G)},pointToLatLng:function(u,y){var P=this.scale(y),G=this.transformation.untransform(u,P);return this.projection.unproject(G)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),G=this.transformation.transform(y.min,P),ae=this.transformation.transform(y.max,P);return new Ze(G,ae)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?h(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?h(u.lat,this.wrapLat,!0):u.lat,G=u.alt;return new me(P,y,G)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),G=y.lat-P.lat,ae=y.lng-P.lng;if(G===0&&ae===0)return u;var Pe=u.getSouthWest(),ut=u.getNorthEast(),Ot=new me(Pe.lat-G,Pe.lng-ae),Wt=new me(ut.lat-G,ut.lng-ae);return new H(Ot,Wt)}},ce=i({},de,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,G=u.lat*P,ae=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),ut=Math.sin((y.lng-u.lng)*P/2),Ot=Pe*Pe+Math.cos(G)*Math.cos(ae)*ut*ut,Wt=2*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot));return this.R*Wt}}),J=6378137,Re={R:J,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,G=Math.max(Math.min(P,u.lat),-P),ae=Math.sin(G*y);return new X(this.R*u.lng*y,this.R*Math.log((1+ae)/(1-ae))/2)},unproject:function(u){var y=180/Math.PI;return new me((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=J*Math.PI;return new Ze([-u,-u],[u,u])}()};function De(u,y,P,G){if(z(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=G}De.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new X((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function et(u,y,P,G){return new De(u,y,P,G)}var he=i({},ce,{code:"EPSG:3857",projection:Re,transformation:function(){var u=.5/(Math.PI*Re.R);return et(u,.5,-u,.5)}()}),Q=i({},he,{code:"EPSG:900913"});function se(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function ue(u,y){var P="",G,ae,Pe,ut,Ot,Wt;for(G=0,Pe=u.length;G<Pe;G++){for(Ot=u[G],ae=0,ut=Ot.length;ae<ut;ae++)Wt=Ot[ae],P+=(ae?"L":"M")+Wt.x+" "+Wt.y;P+=y?dt.svg?"z":"x":""}return P||"M0 0"}var ze=document.documentElement.style,Ce="ActiveXObject"in window,ye=Ce&&!document.addEventListener,Ve="msLaunchUri"in navigator&&!("documentMode"in document),Ye=Be("webkit"),Ke=Be("android"),_t=Be("android 2")||Be("android 3"),Ge=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ft=Ke&&Be("Google")&&Ge<537&&!("AudioNode"in window),Ut=!!window.opera,tn=!Ve&&Be("chrome"),yn=Be("gecko")&&!Ye&&!Ut&&!Ce,Qe=!tn&&Be("safari"),at=Be("phantom"),it="OTransition"in ze,$t=navigator.platform.indexOf("Win")===0,Zt=Ce&&"transition"in ze,On="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!_t,mn="MozPerspective"in ze,Tn=!window.L_DISABLE_3D&&(Zt||On||mn)&&!it&&!at,Qn=typeof orientation<"u"||Be("mobile"),Qt=Qn&&Ye,xn=Qn&&On,Cn=!window.PointerEvent&&window.MSPointerEvent,er=!!(window.PointerEvent||Cn),vr="ontouchstart"in window||!!window.TouchEvent,xr=!window.L_NO_TOUCH&&(vr||er),ur=Qn&&Ut,qr=Qn&&yn,Fs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ai=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),Oo=function(){return!!document.createElement("canvas").getContext}(),Ts=!!(document.createElementNS&&se("svg").createSVGRect),tr=!!Ts&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ds=!Ts&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),No=navigator.platform.indexOf("Mac")===0,lt=navigator.platform.indexOf("Linux")===0;function Be(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var dt={ie:Ce,ielt9:ye,edge:Ve,webkit:Ye,android:Ke,android23:_t,androidStock:ft,opera:Ut,chrome:tn,gecko:yn,safari:Qe,phantom:at,opera12:it,win:$t,ie3d:Zt,webkit3d:On,gecko3d:mn,any3d:Tn,mobile:Qn,mobileWebkit:Qt,mobileWebkit3d:xn,msPointer:Cn,pointer:er,touch:xr,touchNative:vr,mobileOpera:ur,mobileGecko:qr,retina:Fs,passiveEvents:Ai,canvas:Oo,svg:Ts,vml:Ds,inlineSvg:tr,mac:No,linux:lt},Ln=dt.msPointer?"MSPointerDown":"pointerdown",Vn=dt.msPointer?"MSPointerMove":"pointermove",En=dt.msPointer?"MSPointerUp":"pointerup",jt=dt.msPointer?"MSPointerCancel":"pointercancel",Hn={touchstart:Ln,touchmove:Vn,touchend:En,touchcancel:jt},St={touchstart:Qr,touchmove:zi,touchend:zi,touchcancel:zi},qt={},Un=!1;function dr(u,y,P){return y==="touchstart"&&Br(),St[y]?(P=St[y].bind(this,P),u.addEventListener(Hn[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function Lr(u,y,P){if(!Hn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(Hn[y],P,!1)}function pn(u){qt[u.pointerId]=u}function rn(u){qt[u.pointerId]&&(qt[u.pointerId]=u)}function zr(u){delete qt[u.pointerId]}function Br(){Un||(document.addEventListener(Ln,pn,!0),document.addEventListener(Vn,rn,!0),document.addEventListener(En,zr,!0),document.addEventListener(jt,zr,!0),Un=!0)}function zi(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in qt)y.touches.push(qt[P]);y.changedTouches=[y],u(y)}}function Qr(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Pr(y),zi(u,y)}function _r(u){var y={},P,G;for(G in u)P=u[G],y[G]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Ar=200;function hi(u,y){u.addEventListener("dblclick",y);var P=0,G;function ae(Pe){if(Pe.detail!==1){G=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ut=Qs(Pe);if(!(ut.some(function(Wt){return Wt instanceof HTMLLabelElement&&Wt.attributes.for})&&!ut.some(function(Wt){return Wt instanceof HTMLInputElement||Wt instanceof HTMLSelectElement}))){var Ot=Date.now();Ot-P<=Ar?(G++,G===2&&y(_r(Pe))):G=1,P=Ot}}}return u.addEventListener("click",ae),{dblclick:y,simDblclick:ae}}function Rr(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var an=vo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ni=vo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vi=Ni==="webkitTransition"||Ni==="OTransition"?Ni+"End":"transitionend";function Ki(u){return typeof u=="string"?document.getElementById(u):u}function ei(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var G=document.defaultView.getComputedStyle(u,null);P=G?G[y]:null}return P==="auto"?null:P}function hr(u,y,P){var G=document.createElement(u);return G.className=y||"",P&&P.appendChild(G),G}function Dn(u){var y=u.parentNode;y&&y.removeChild(u)}function Sr(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function ws(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function mo(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function cr(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=ti(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function Sn(u,y){if(u.classList!==void 0)for(var P=x(y),G=0,ae=P.length;G<ae;G++)u.classList.add(P[G]);else if(!cr(u,y)){var Pe=ti(u);yi(u,(Pe?Pe+" ":"")+y)}}function sn(u,y){u.classList!==void 0?u.classList.remove(y):yi(u,g((" "+ti(u)+" ").replace(" "+y+" "," ")))}function yi(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function ti(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function bi(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Zs(u,y)}function Zs(u,y){var P=!1,G="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(G)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+G+"(opacity="+y+")"}function vo(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function js(u,y,P){var G=y||new X(0,0);u.style[an]=(dt.ie3d?"translate("+G.x+"px,"+G.y+"px)":"translate3d("+G.x+"px,"+G.y+"px,0)")+(P?" scale("+P+")":"")}function yr(u,y){u._leaflet_pos=y,dt.any3d?js(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Xs(u){return u._leaflet_pos||new X(0,0)}var Vi,Gi,fi;if("onselectstart"in document)Vi=function(){Cr(window,"selectstart",Pr)},Gi=function(){Tr(window,"selectstart",Pr)};else{var Mn=vo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vi=function(){if(Mn){var u=document.documentElement.style;fi=u[Mn],u[Mn]="none"}},Gi=function(){Mn&&(document.documentElement.style[Mn]=fi,fi=void 0)}}function vn(){Cr(window,"dragstart",Pr)}function Yr(){Tr(window,"dragstart",Pr)}var xs,Js;function qa(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(ds(),xs=u,Js=u.style.outlineStyle,u.style.outlineStyle="none",Cr(window,"keydown",ds))}function ds(){xs&&(xs.style.outlineStyle=Js,xs=void 0,Js=void 0,Tr(window,"keydown",ds))}function Ma(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function bl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var $n={__proto__:null,TRANSFORM:an,TRANSITION:Ni,TRANSITION_END:vi,get:Ki,getStyle:ei,create:hr,remove:Dn,empty:Sr,toFront:ws,toBack:mo,hasClass:cr,addClass:Sn,removeClass:sn,setClass:yi,getClass:ti,setOpacity:bi,testProp:vo,setTransform:js,setPosition:yr,getPosition:Xs,get disableTextSelection(){return Vi},get enableTextSelection(){return Gi},disableImageDrag:vn,enableImageDrag:Yr,preventOutline:qa,restoreOutline:ds,getSizedParentNode:Ma,getScale:bl};function Cr(u,y,P,G){if(y&&typeof y=="object")for(var ae in y)Aa(u,ae,y[ae],P);else{y=x(y);for(var Pe=0,ut=y.length;Pe<ut;Pe++)Aa(u,y[Pe],P,G)}return this}var is="_leaflet_events";function Tr(u,y,P,G){if(arguments.length===1)Zo(u),delete u[is];else if(y&&typeof y=="object")for(var ae in y)Xo(u,ae,y[ae],P);else if(y=x(y),arguments.length===2)Zo(u,function(Ot){return Y(y,Ot)!==-1});else for(var Pe=0,ut=y.length;Pe<ut;Pe++)Xo(u,y[Pe],P,G);return this}function Zo(u,y){for(var P in u[is]){var G=P.split(/\d/)[0];(!y||y(G))&&Xo(u,G,null,null,P)}}var ka={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Aa(u,y,P,G){var ae=y+l(P)+(G?"_"+l(G):"");if(u[is]&&u[is][ae])return this;var Pe=function(Ot){return P.call(G||u,Ot||window.event)},ut=Pe;!dt.touchNative&&dt.pointer&&y.indexOf("touch")===0?Pe=dr(u,y,Pe):dt.touch&&y==="dblclick"?Pe=hi(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(ka[y]||y,Pe,dt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Ot){Ot=Ot||window.event,Il(u,Ot)&&ut(Ot)},u.addEventListener(ka[y],Pe,!1)):u.addEventListener(y,ut,!1):u.attachEvent("on"+y,Pe),u[is]=u[is]||{},u[is][ae]=Pe}function Xo(u,y,P,G,ae){ae=ae||y+l(P)+(G?"_"+l(G):"");var Pe=u[is]&&u[is][ae];if(!Pe)return this;!dt.touchNative&&dt.pointer&&y.indexOf("touch")===0?Lr(u,y,Pe):dt.touch&&y==="dblclick"?Rr(u,Pe):"removeEventListener"in u?u.removeEventListener(ka[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[is][ae]=null}function sa(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function _l(u){return Aa(u,"wheel",sa),this}function Ta(u){return Cr(u,"mousedown touchstart dblclick contextmenu",sa),u._leaflet_disable_click=!0,this}function Pr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Kn(u){return Pr(u),sa(u),this}function Qs(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function yo(u,y){if(!y)return new X(u.clientX,u.clientY);var P=bl(y),G=P.boundingClientRect;return new X((u.clientX-G.left)/P.x-y.clientLeft,(u.clientY-G.top)/P.y-y.clientTop)}var au=dt.linux&&dt.chrome?window.devicePixelRatio:dt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ku(u){return dt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/au:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Il(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var lu={__proto__:null,on:Cr,off:Tr,stopPropagation:sa,disableScrollPropagation:_l,disableClickPropagation:Ta,preventDefault:Pr,stop:Kn,getPropagationPath:Qs,getMousePosition:yo,getWheelDelta:ku,isExternalTarget:Il,addListener:Cr,removeListener:Tr},Au=ne.extend({run:function(u,y,P,G){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(G||.5,.2),this._startPos=Xs(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=I(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),yr(this._el,P),this.fire("step")},_complete:function(){R(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ni=ne.extend({options:{crs:he,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(fe(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ni&&dt.any3d&&!dt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Cr(this._proxy,vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(fe(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var G=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(G)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(dt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var G=this.getZoomScale(y),ae=this.getSize().divideBy(2),Pe=u instanceof X?u:this.latLngToContainerPoint(u),ut=Pe.subtract(ae).multiplyBy(1-1/G),Ot=this.containerPointToLatLng(ae.add(ut));return this.setView(Ot,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():Z(u);var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ae=this.getBoundsZoom(u,!1,P.add(G));if(ae=typeof y.maxZoom=="number"?Math.min(y.maxZoom,ae):ae,ae===1/0)return{center:u.getCenter(),zoom:ae};var Pe=G.subtract(P).divideBy(2),ut=this.project(u.getSouthWest(),ae),Ot=this.project(u.getNorthEast(),ae),Wt=this.unproject(ut.add(Ot).divideBy(2).add(Pe),ae);return{center:Wt,zoom:ae}},fitBounds:function(u,y){if(u=Z(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=ve(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Au,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){Sn(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!dt.any3d)return this.setView(u,y,P);this._stop();var G=this.project(this.getCenter()),ae=this.project(u),Pe=this.getSize(),ut=this._zoom;u=fe(u),y=y===void 0?ut:y;var Ot=Math.max(Pe.x,Pe.y),Wt=Ot*this.getZoomScale(ut,y),un=ae.distanceTo(G)||1,jn=1.42,sr=jn*jn;function Vr(_i){var ao=_i?-1:1,Ne=_i?Wt:Ot,jo=Wt*Wt-Ot*Ot+ao*sr*sr*un*un,tc=2*Ne*sr*un,Gs=jo/tc,Wr=Math.sqrt(Gs*Gs+1)-Gs,$d=Wr<1e-9?-18:Math.log(Wr);return $d}function Es(_i){return(Math.exp(_i)-Math.exp(-_i))/2}function as(_i){return(Math.exp(_i)+Math.exp(-_i))/2}function Ws(_i){return Es(_i)/as(_i)}var Qi=Vr(0);function Fo(_i){return Ot*(as(Qi)/as(Qi+jn*_i))}function od(_i){return Ot*(as(Qi)*Ws(Qi+jn*_i)-Es(Qi))/sr}function $a(_i){return 1-Math.pow(1-_i,1.5)}var wa=Date.now(),la=(Vr(1)-Qi)/jn,Th=P.duration?1e3*P.duration:1e3*la*.8;function Ou(){var _i=(Date.now()-wa)/Th,ao=$a(_i)*la;_i<=1?(this._flyToFrame=I(Ou,this),this._move(this.unproject(G.add(ae.subtract(G).multiplyBy(od(ao)/un)),ut),this.getScaleZoom(Ot/Fo(ao),ut),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Ou.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=Z(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),G=this._limitCenter(P,this._zoom,Z(u));return P.equals(G)||this.panTo(G,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=ve(y.paddingTopLeft||y.padding||[0,0]),G=ve(y.paddingBottomRight||y.padding||[0,0]),ae=this.project(this.getCenter()),Pe=this.project(u),ut=this.getPixelBounds(),Ot=ie([ut.min.add(P),ut.max.subtract(G)]),Wt=Ot.getSize();if(!Ot.contains(Pe)){this._enforcingBounds=!0;var un=Pe.subtract(Ot.getCenter()),jn=Ot.extend(Pe).getSize().subtract(Wt);ae.x+=un.x<0?-jn.x:jn.x,ae.y+=un.y<0?-jn.y:jn.y,this.panTo(this.unproject(ae),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),G=y.divideBy(2).round(),ae=P.divideBy(2).round(),Pe=G.subtract(ae);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,G=new me(y,P),ae=G.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ut=this.getBoundsZoom(ae);this.setView(G,Pe.maxZoom?Math.min(ut,Pe.maxZoom):ut)}var Ot={latlng:G,bounds:ae,timestamp:u.timestamp};for(var Wt in u.coords)typeof u.coords[Wt]=="number"&&(Ot[Wt]=u.coords[Wt]);this.fire("locationfound",Ot)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(R(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)Dn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),G=hr("div",P,y||this._mapPane);return u&&(this._panes[u]=G),G},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new H(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=Z(u),P=ve(P||[0,0]);var G=this.getZoom()||0,ae=this.getMinZoom(),Pe=this.getMaxZoom(),ut=u.getNorthWest(),Ot=u.getSouthEast(),Wt=this.getSize().subtract(P),un=ie(this.project(Ot,G),this.project(ut,G)).getSize(),jn=dt.any3d?this.options.zoomSnap:1,sr=Wt.x/un.x,Vr=Wt.y/un.y,Es=y?Math.max(sr,Vr):Math.min(sr,Vr);return G=this.getScaleZoom(Es,G),jn&&(G=Math.round(G/(jn/100))*(jn/100),G=y?Math.ceil(G/jn)*jn:Math.floor(G/jn)*jn),Math.max(ae,Math.min(Pe,G))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new X(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new Ze(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var G=P.zoom(u*P.scale(y));return isNaN(G)?1/0:G},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(fe(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(ve(u),y)},layerPointToLatLng:function(u){var y=ve(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(fe(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(fe(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(Z(u))},distance:function(u,y){return this.options.crs.distance(fe(u),fe(y))},containerPointToLayerPoint:function(u){return ve(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return ve(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(ve(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(u)))},mouseEventToContainerPoint:function(u){return yo(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=Ki(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Cr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&dt.any3d,Sn(u,"leaflet-container"+(dt.touch?" leaflet-touch":"")+(dt.retina?" leaflet-retina":"")+(dt.ielt9?" leaflet-oldie":"")+(dt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=ei(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yr(this._mapPane,new X(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Sn(u.markerPane,"leaflet-zoom-hide"),Sn(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){yr(this._mapPane,new X(0,0));var G=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var ae=this._zoom!==y;this._moveStart(ae,P)._move(u,y)._moveEnd(ae),this.fire("viewreset"),G&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,G){y===void 0&&(y=this._zoom);var ae=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),G?P&&P.pinch&&this.fire("zoom",P):((ae||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return R(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){yr(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Tr:Cr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),dt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){R(this._resizeRequest),this._resizeRequest=I(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],G,ae=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,ut=!1;Pe;){if(G=this._targets[l(Pe)],G&&(y==="click"||y==="preclick")&&this._draggableMoved(G)){ut=!0;break}if(G&&G.listens(y,!0)&&(ae&&!Il(Pe,u)||(P.push(G),ae))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!ut&&!ae&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&qa(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var G=i({},u);G.type="preclick",this._fireDOMEvent(G,G.type,P)}var ae=this._findEventTargets(u,y);if(P){for(var Pe=[],ut=0;ut<P.length;ut++)P[ut].listens(y,!0)&&Pe.push(P[ut]);ae=Pe.concat(ae)}if(ae.length){y==="contextmenu"&&Pr(u);var Ot=ae[0],Wt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var un=Ot.getLatLng&&(!Ot._radius||Ot._radius<=10);Wt.containerPoint=un?this.latLngToContainerPoint(Ot.getLatLng()):this.mouseEventToContainerPoint(u),Wt.layerPoint=this.containerPointToLayerPoint(Wt.containerPoint),Wt.latlng=un?Ot.getLatLng():this.layerPointToLatLng(Wt.layerPoint)}for(ut=0;ut<ae.length;ut++)if(ae[ut].fire(y,Wt,!0),Wt.originalEvent._stopped||ae[ut].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Xs(this._mapPane)||new X(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(G)},_latLngBoundsToNewLayerBounds:function(u,y,P){var G=this._getNewPixelOrigin(P,y);return ie([this.project(u.getSouthWest(),y)._subtract(G),this.project(u.getNorthWest(),y)._subtract(G),this.project(u.getSouthEast(),y)._subtract(G),this.project(u.getNorthEast(),y)._subtract(G)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var G=this.project(u,y),ae=this.getSize().divideBy(2),Pe=new Ze(G.subtract(ae),G.add(ae)),ut=this._getBoundsOffset(Pe,P,y);return Math.abs(ut.x)<=1&&Math.abs(ut.y)<=1?u:this.unproject(G.add(ut),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),G=new Ze(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(G,y))},_getBoundsOffset:function(u,y,P){var G=ie(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),ae=G.min.subtract(u.min),Pe=G.max.subtract(u.max),ut=this._rebound(ae.x,-Pe.x),Ot=this._rebound(ae.y,-Pe.y);return new X(ut,Ot)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),G=dt.any3d?this.options.zoomSnap:1;return G&&(u=Math.round(u/G)*G),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){sn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=hr("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=an,G=this._proxy.style[P];js(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),G===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();js(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var G=this.getZoomScale(y),ae=this._getCenterOffset(u)._divideBy(1-1/G);return P.animate!==!0&&!this.getSize().contains(ae)?!1:(I(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,G){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,Sn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:G}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&sn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fs(u,y){return new ni(u,y)}var gr=$.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),G=u._controlCorners[P];return Sn(y,"leaflet-control"),P.indexOf("bottom")!==-1?G.insertBefore(y,G.firstChild):G.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),ps=function(u){return new gr(u)};ni.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=hr("div",y+"control-container",this._container);function G(ae,Pe){var ut=y+ae+" "+y+Pe;u[ae+Pe]=hr("div",ut,P)}G("top","left"),G("top","right"),G("bottom","left"),G("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)Dn(this._controlCorners[u]);Dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bl=gr.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,G){return P<G?-1:G<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var G in u)this._addLayer(u[G],G);for(G in y)this._addLayer(y[G],G,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return gr.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){Sn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(Sn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):sn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return sn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=hr("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),Ta(y),_l(y);var G=this._section=hr("section",u+"-list");P&&(this._map.on("click",this.collapse,this),Cr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var ae=this._layersLink=hr("a",u+"-toggle",y);ae.href="#",ae.title="Layers",ae.setAttribute("role","button"),Cr(ae,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Pr(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=hr("div",u+"-base",G),this._separator=hr("div",u+"-separator",G),this._overlaysList=hr("div",u+"-overlays",G),y.appendChild(G)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(G,ae){return this.options.sortFunction(G.layer,ae.layer,G.name,ae.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Sr(this._baseLayersList),Sr(this._overlaysList),this._layerControlInputs=[];var u,y,P,G,ae=0;for(P=0;P<this._layers.length;P++)G=this._layers[P],this._addItem(G),y=y||G.overlay,u=u||!G.overlay,ae+=G.overlay?0:1;return this.options.hideSingleBase&&(u=u&&ae>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",G=document.createElement("div");return G.innerHTML=P,G.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),G;u.overlay?(G=document.createElement("input"),G.type="checkbox",G.className="leaflet-control-layers-selector",G.defaultChecked=P):G=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(G),G.layerId=l(u.layer),Cr(G,"click",this._onInputClick,this);var ae=document.createElement("span");ae.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(G),Pe.appendChild(ae);var ut=u.overlay?this._overlaysList:this._baseLayersList;return ut.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,G=[],ae=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?G.push(P):y.checked||ae.push(P);for(Pe=0;Pe<ae.length;Pe++)this._map.hasLayer(ae[Pe])&&this._map.removeLayer(ae[Pe]);for(Pe=0;Pe<G.length;Pe++)this._map.hasLayer(G[Pe])||this._map.addLayer(G[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,G=this._map.getZoom(),ae=u.length-1;ae>=0;ae--)y=u[ae],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&G<P.options.minZoom||P.options.maxZoom!==void 0&&G>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,Cr(u,"click",Pr),this.expand();var y=this;setTimeout(function(){Tr(u,"click",Pr),y._preventClick=!1})}}),Ya=function(u,y,P){return new Bl(u,y,P)},Zi=gr.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=hr("div",y+" leaflet-bar"),G=this.options;return this._zoomInButton=this._createButton(G.zoomInText,G.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(G.zoomOutText,G.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,G,ae){var Pe=hr("a",P,G);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),Ta(Pe),Cr(Pe,"click",Kn),Cr(Pe,"click",ae,this),Cr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";sn(this._zoomInButton,y),sn(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(Sn(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(Sn(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});ni.mergeOptions({zoomControl:!0}),ni.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zi,this.addControl(this.zoomControl))});var Tu=function(u){return new Zi(u)},Da=gr.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=hr("div",y),G=this.options;return this._addScales(G,y+"-line",P),u.on(G.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=hr("div",y,P)),u.imperial&&(this._iScale=hr("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,G,ae;y>5280?(P=y/5280,G=this._getRoundNum(P),this._updateScale(this._iScale,G+" mi",G/P)):(ae=this._getRoundNum(y),this._updateScale(this._iScale,ae+" ft",ae/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),uu=function(u){return new Da(u)},cu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',oa=gr.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(dt.inlineSvg?cu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=hr("div","leaflet-control-attribution"),Ta(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});ni.mergeOptions({attributionControl:!0}),ni.addInitHook(function(){this.options.attributionControl&&new oa().addTo(this)});var du=function(u){return new oa(u)};gr.Layers=Bl,gr.Zoom=Zi,gr.Scale=Da,gr.Attribution=oa,ps.layers=Ya,ps.zoom=Tu,ps.scale=uu,ps.attribution=du;var Li=$.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Li.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:V},zs=dt.touch?"touchstart mousedown":"mousedown",ma=ne.extend({options:{clickTolerance:3},initialize:function(u,y,P,G){E(this,G),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(Cr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ma._dragging===this&&this.finishDrag(!0),Tr(this._dragStartTarget,zs,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!cr(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ma._dragging===this&&this.finishDrag();return}if(!(ma._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ma._dragging=this,this._preventOutline&&qa(this._element),vn(),Vi(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=Ma(this._element);this._startPoint=new X(y.clientX,y.clientY),this._startPos=Xs(this._element),this._parentScale=bl(P);var G=u.type==="mousedown";Cr(document,G?"mousemove":"touchmove",this._onMove,this),Cr(document,G?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new X(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Pr(u),this._moved||(this.fire("dragstart"),this._moved=!0,Sn(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Sn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),yr(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){sn(document.body,"leaflet-dragging"),this._lastTarget&&(sn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Tr(document,"mousemove touchmove",this._onMove,this),Tr(document,"mouseup touchend touchcancel",this._onUp,this),Yr(),Gi();var y=this._moved&&this._moving;this._moving=!1,ma._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function hu(u,y,P){var G,ae=[1,4,2,8],Pe,ut,Ot,Wt,un,jn,sr,Vr;for(Pe=0,jn=u.length;Pe<jn;Pe++)u[Pe]._code=Ht(u[Pe],y);for(Ot=0;Ot<4;Ot++){for(sr=ae[Ot],G=[],Pe=0,jn=u.length,ut=jn-1;Pe<jn;ut=Pe++)Wt=u[Pe],un=u[ut],Wt._code&sr?un._code&sr||(Vr=Mt(un,Wt,sr,y,P),Vr._code=Ht(Vr,y),G.push(Vr)):(un._code&sr&&(Vr=Mt(un,Wt,sr,y,P),Vr._code=Ht(Vr,y),G.push(Vr)),G.push(Wt));u=G}return u}function va(u,y){var P,G,ae,Pe,ut,Ot,Wt,un,jn;if(!u||u.length===0)throw new Error("latlngs not passed");Wn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var sr=fe([0,0]),Vr=Z(u),Es=Vr.getNorthWest().distanceTo(Vr.getSouthWest())*Vr.getNorthEast().distanceTo(Vr.getNorthWest());Es<1700&&(sr=Rl(u));var as=u.length,Ws=[];for(P=0;P<as;P++){var Qi=fe(u[P]);Ws.push(y.project(fe([Qi.lat-sr.lat,Qi.lng-sr.lng])))}for(Ot=Wt=un=0,P=0,G=as-1;P<as;G=P++)ae=Ws[P],Pe=Ws[G],ut=ae.y*Pe.x-Pe.y*ae.x,Wt+=(ae.x+Pe.x)*ut,un+=(ae.y+Pe.y)*ut,Ot+=ut*3;Ot===0?jn=Ws[0]:jn=[Wt/Ot,un/Ot];var Fo=y.unproject(ve(jn));return fe([Fo.lat+sr.lat,Fo.lng+sr.lng])}function Rl(u){for(var y=0,P=0,G=0,ae=0;ae<u.length;ae++){var Pe=fe(u[ae]);y+=Pe.lat,P+=Pe.lng,G++}return fe([y/G,P/G])}var Fl={__proto__:null,clipPolygon:hu,polygonCenter:va,centroid:Rl};function Si(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=xe(u,P),u=gs(u,P),u}function Jo(u,y,P){return Math.sqrt(Fn(u,y,P,!0))}function Ka(u,y,P){return Fn(u,y,P)}function gs(u,y){var P=u.length,G=typeof Uint8Array<"u"?Uint8Array:Array,ae=new G(P);ae[0]=ae[P-1]=1,F(u,ae,y,0,P-1);var Pe,ut=[];for(Pe=0;Pe<P;Pe++)ae[Pe]&&ut.push(u[Pe]);return ut}function F(u,y,P,G,ae){var Pe=0,ut,Ot,Wt;for(Ot=G+1;Ot<=ae-1;Ot++)Wt=Fn(u[Ot],u[G],u[ae],!0),Wt>Pe&&(ut=Ot,Pe=Wt);Pe>P&&(y[ut]=1,F(u,y,P,G,ut),F(u,y,P,ut,ae))}function xe(u,y){for(var P=[u[0]],G=1,ae=0,Pe=u.length;G<Pe;G++)hn(u[G],u[ae])>y&&(P.push(u[G]),ae=G);return ae<Pe-1&&P.push(u[Pe-1]),P}var tt;function pt(u,y,P,G,ae){var Pe=G?tt:Ht(u,P),ut=Ht(y,P),Ot,Wt,un;for(tt=ut;;){if(!(Pe|ut))return[u,y];if(Pe&ut)return!1;Ot=Pe||ut,Wt=Mt(u,y,Ot,P,ae),un=Ht(Wt,P),Ot===Pe?(u=Wt,Pe=un):(y=Wt,ut=un)}}function Mt(u,y,P,G,ae){var Pe=y.x-u.x,ut=y.y-u.y,Ot=G.min,Wt=G.max,un,jn;return P&8?(un=u.x+Pe*(Wt.y-u.y)/ut,jn=Wt.y):P&4?(un=u.x+Pe*(Ot.y-u.y)/ut,jn=Ot.y):P&2?(un=Wt.x,jn=u.y+ut*(Wt.x-u.x)/Pe):P&1&&(un=Ot.x,jn=u.y+ut*(Ot.x-u.x)/Pe),new X(un,jn,ae)}function Ht(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function hn(u,y){var P=y.x-u.x,G=y.y-u.y;return P*P+G*G}function Fn(u,y,P,G){var ae=y.x,Pe=y.y,ut=P.x-ae,Ot=P.y-Pe,Wt=ut*ut+Ot*Ot,un;return Wt>0&&(un=((u.x-ae)*ut+(u.y-Pe)*Ot)/Wt,un>1?(ae=P.x,Pe=P.y):un>0&&(ae+=ut*un,Pe+=Ot*un)),ut=u.x-ae,Ot=u.y-Pe,G?ut*ut+Ot*Ot:new X(ae,Pe)}function Wn(u){return!z(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function fr(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Wn(u)}function Er(u,y){var P,G,ae,Pe,ut,Ot,Wt,un;if(!u||u.length===0)throw new Error("latlngs not passed");Wn(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var jn=fe([0,0]),sr=Z(u),Vr=sr.getNorthWest().distanceTo(sr.getSouthWest())*sr.getNorthEast().distanceTo(sr.getNorthWest());Vr<1700&&(jn=Rl(u));var Es=u.length,as=[];for(P=0;P<Es;P++){var Ws=fe(u[P]);as.push(y.project(fe([Ws.lat-jn.lat,Ws.lng-jn.lng])))}for(P=0,G=0;P<Es-1;P++)G+=as[P].distanceTo(as[P+1])/2;if(G===0)un=as[0];else for(P=0,Pe=0;P<Es-1;P++)if(ut=as[P],Ot=as[P+1],ae=ut.distanceTo(Ot),Pe+=ae,Pe>G){Wt=(Pe-G)/ae,un=[Ot.x-Wt*(Ot.x-ut.x),Ot.y-Wt*(Ot.y-ut.y)];break}var Qi=y.unproject(ve(un));return fe([Qi.lat+jn.lat,Qi.lng+jn.lng])}var Ur={__proto__:null,simplify:Si,pointToSegmentDistance:Jo,closestPointOnSegment:Ka,clipSegment:pt,_getEdgeIntersection:Mt,_getBitCode:Ht,_sqClosestPointOnSegment:Fn,isFlat:Wn,_flat:fr,polylineCenter:Er},qi={project:function(u){return new X(u.lng,u.lat)},unproject:function(u){return new me(u.y,u.x)},bounds:new Ze([-180,-90],[180,90])},gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Ze([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,G=u.lat*y,ae=this.R_MINOR/P,Pe=Math.sqrt(1-ae*ae),ut=Pe*Math.sin(G),Ot=Math.tan(Math.PI/4-G/2)/Math.pow((1-ut)/(1+ut),Pe/2);return G=-P*Math.log(Math.max(Ot,1e-10)),new X(u.lng*y*P,G)},unproject:function(u){for(var y=180/Math.PI,P=this.R,G=this.R_MINOR/P,ae=Math.sqrt(1-G*G),Pe=Math.exp(-u.y/P),ut=Math.PI/2-2*Math.atan(Pe),Ot=0,Wt=.1,un;Ot<15&&Math.abs(Wt)>1e-7;Ot++)un=ae*Math.sin(ut),un=Math.pow((1-un)/(1+un),ae/2),Wt=Math.PI/2-2*Math.atan(Pe*un)-ut,ut+=Wt;return new me(ut*y,u.x*y/P)}},Ci={__proto__:null,LonLat:qi,Mercator:gi,SphericalMercator:Re},ms=i({},ce,{code:"EPSG:3395",projection:gi,transformation:function(){var u=.5/(Math.PI*gi.R);return et(u,.5,-u,.5)}()}),Ls=i({},ce,{code:"EPSG:4326",projection:qi,transformation:et(1/180,1,-1/180,.5)}),Qo=i({},de,{projection:qi,transformation:et(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,G=y.lat-u.lat;return Math.sqrt(P*P+G*G)},infinite:!0});de.Earth=ce,de.EPSG3395=ms,de.EPSG3857=he,de.EPSG900913=Q,de.EPSG4326=Ls,de.Simple=Qo;var Hr=ne.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});ni.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?z(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var G in this._zoomBoundLayers){var ae=this._zoomBoundLayers[G].options;u=ae.minZoom===void 0?u:Math.min(u,ae.minZoom),y=ae.maxZoom===void 0?y:Math.max(y,ae.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var eo=Hr.extend({initialize:function(u,y){E(this,y),this._layers={};var P,G;if(u)for(P=0,G=u.length;P<G;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,G;for(P in this._layers)G=this._layers[P],G[u]&&G[u].apply(G,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),jl=function(u,y){return new eo(u,y)},bo=eo.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),eo.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),eo.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new H;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Du=function(u,y){return new bo(u,y)},Oa=$.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var G=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(G,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(G.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),G},_setIconStyles:function(u,y){var P=this.options,G=P[y+"Size"];typeof G=="number"&&(G=[G,G]);var ae=ve(G),Pe=ve(y==="shadow"&&P.shadowAnchor||P.iconAnchor||ae&&ae.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),ae&&(u.style.width=ae.x+"px",u.style.height=ae.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return dt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Qu(u){return new Oa(u)}var wl=Oa.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+Oa.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,G,ae){var Pe=G.exec(P);return Pe&&Pe[ae]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=hr("div","leaflet-default-icon-path",document.body),y=ei(u,"background-image")||ei(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),xl=Li.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ma(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Sn(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&sn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,G=this._marker.options.autoPanSpeed,ae=this._marker.options.autoPanPadding,Pe=Xs(y._icon),ut=P.getPixelBounds(),Ot=P.getPixelOrigin(),Wt=ie(ut.min._subtract(Ot).add(ae),ut.max._subtract(Ot).subtract(ae));if(!Wt.contains(Pe)){var un=ve((Math.max(Wt.max.x,Pe.x)-Wt.max.x)/(ut.max.x-Wt.max.x)-(Math.min(Wt.min.x,Pe.x)-Wt.min.x)/(ut.min.x-Wt.min.x),(Math.max(Wt.max.y,Pe.y)-Wt.max.y)/(ut.max.y-Wt.max.y)-(Math.min(Wt.min.y,Pe.y)-Wt.min.y)/(ut.min.y-Wt.min.y)).multiplyBy(G);P.panBy(un,{animate:!1}),this._draggable._newPos._add(un),this._draggable._startPos._add(un),yr(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=I(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(R(this._panRequest),this._panRequest=I(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,G=Xs(y._icon),ae=y._map.layerPointToLatLng(G);P&&yr(P,G),y._latlng=ae,u.latlng=ae,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){R(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Ss=Hr.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=fe(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=fe(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),G=!1;P!==this._icon&&(this._icon&&this._removeIcon(),G=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),Sn(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Cr(P,"focus",this._panOnFocus,this);var ae=u.icon.createShadow(this._shadow),Pe=!1;ae!==this._shadow&&(this._removeShadow(),Pe=!0),ae&&(Sn(ae,y),ae.alt=""),this._shadow=ae,u.opacity<1&&this._updateOpacity(),G&&this.getPane().appendChild(this._icon),this._initInteraction(),ae&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Tr(this._icon,"focus",this._panOnFocus,this),Dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Dn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&yr(this._icon,u),this._shadow&&yr(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(Sn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&bi(this._icon,u),this._shadow&&bi(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?ve(y.iconSize):ve(0,0),G=y.iconAnchor?ve(y.iconAnchor):ve(0,0);u.panInside(this._latlng,{paddingTopLeft:G,paddingBottomRight:P.subtract(G)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Na(u,y){return new Ss(u,y)}var ea=Hr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Io=ea.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=fe(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=fe(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return ea.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),G=[u+P,y+P];this._pxBounds=new Ze(this._point.subtract(G),this._point.add(G))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function zl(u,y){return new Io(u,y)}var to=Io.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=fe(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new H(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:ea.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,G=P.options.crs;if(G.distance===ce.distance){var ae=Math.PI/180,Pe=this._mRadius/ce.R/ae,ut=P.project([y+Pe,u]),Ot=P.project([y-Pe,u]),Wt=ut.add(Ot).divideBy(2),un=P.unproject(Wt).lat,jn=Math.acos((Math.cos(Pe*ae)-Math.sin(y*ae)*Math.sin(un*ae))/(Math.cos(y*ae)*Math.cos(un*ae)))/ae;(isNaN(jn)||jn===0)&&(jn=Pe/Math.cos(Math.PI/180*y)),this._point=Wt.subtract(P.getPixelOrigin()),this._radius=isNaN(jn)?0:Wt.x-P.project([un,u-jn]).x,this._radiusY=Wt.y-ut.y}else{var sr=G.unproject(G.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(sr).x}this._updateBounds()}});function _o(u,y,P){return new to(u,y,P)}var wo=ea.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,G=Fn,ae,Pe,ut=0,Ot=this._parts.length;ut<Ot;ut++)for(var Wt=this._parts[ut],un=1,jn=Wt.length;un<jn;un++){ae=Wt[un-1],Pe=Wt[un];var sr=G(u,ae,Pe,!0);sr<y&&(y=sr,P=G(u,ae,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Er(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=fe(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new H,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return Wn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=Wn(u),G=0,ae=u.length;G<ae;G++)P?(y[G]=fe(u[G]),this._bounds.extend(y[G])):y[G]=this._convertLatLngs(u[G]);return y},_project:function(){var u=new Ze;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new X(u,u);this._rawPxBounds&&(this._pxBounds=new Ze([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var G=u[0]instanceof me,ae=u.length,Pe,ut;if(G){for(ut=[],Pe=0;Pe<ae;Pe++)ut[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(ut[Pe]);y.push(ut)}else for(Pe=0;Pe<ae;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,G,ae,Pe,ut,Ot,Wt;for(P=0,ae=0,Pe=this._rings.length;P<Pe;P++)for(Wt=this._rings[P],G=0,ut=Wt.length;G<ut-1;G++)Ot=pt(Wt[G],Wt[G+1],u,G,!0),Ot&&(y[ae]=y[ae]||[],y[ae].push(Ot[0]),(Ot[1]!==Wt[G+1]||G===ut-2)&&(y[ae].push(Ot[1]),ae++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,G=u.length;P<G;P++)u[P]=Si(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,G,ae,Pe,ut,Ot,Wt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Ot=this._parts[P],G=0,ut=Ot.length,ae=ut-1;G<ut;ae=G++)if(!(!y&&G===0)&&Jo(u,Ot[ae],Ot[G])<=Wt)return!0;return!1}});function Ac(u,y){return new wo(u,y)}wo._flat=fr;var Os=wo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return va(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=wo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof me&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){wo.prototype._setLatLngs.call(this,u),Wn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Wn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new X(y,y);if(u=new Ze(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var G=0,ae=this._rings.length,Pe;G<ae;G++)Pe=hu(this._rings[G],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,G,ae,Pe,ut,Ot,Wt,un;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,Wt=this._parts.length;Pe<Wt;Pe++)for(P=this._parts[Pe],ut=0,un=P.length,Ot=un-1;ut<un;Ot=ut++)G=P[ut],ae=P[Ot],G.y>u.y!=ae.y>u.y&&u.x<(ae.x-G.x)*(u.y-G.y)/(ae.y-G.y)+G.x&&(y=!y);return y||wo.prototype._containsPoint.call(this,u,!0)}});function Za(u,y){return new Os(u,y)}var no=bo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=z(u)?u:u.features,P,G,ae;if(y){for(P=0,G=y.length;P<G;P++)ae=y[P],(ae.geometries||ae.geometry||ae.features||ae.coordinates)&&this.addData(ae);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var ut=ro(u,Pe);return ut?(ut.feature=so(u),ut.defaultOptions=ut.options,this.resetStyle(ut),Pe.onEachFeature&&Pe.onEachFeature(u,ut),this.addLayer(ut)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function ro(u,y){var P=u.type==="Feature"?u.geometry:u,G=P?P.coordinates:null,ae=[],Pe=y&&y.pointToLayer,ut=y&&y.coordsToLatLng||Ja,Ot,Wt,un,jn;if(!G&&!P)return null;switch(P.type){case"Point":return Ot=ut(G),Xa(Pe,u,Ot,y);case"MultiPoint":for(un=0,jn=G.length;un<jn;un++)Ot=ut(G[un]),ae.push(Xa(Pe,u,Ot,y));return new bo(ae);case"LineString":case"MultiLineString":return Wt=io(G,P.type==="LineString"?0:1,ut),new wo(Wt,y);case"Polygon":case"MultiPolygon":return Wt=io(G,P.type==="Polygon"?1:2,ut),new Os(Wt,y);case"GeometryCollection":for(un=0,jn=P.geometries.length;un<jn;un++){var sr=ro({geometry:P.geometries[un],type:"Feature",properties:u.properties},y);sr&&ae.push(sr)}return new bo(ae);case"FeatureCollection":for(un=0,jn=P.features.length;un<jn;un++){var Vr=ro(P.features[un],y);Vr&&ae.push(Vr)}return new bo(ae);default:throw new Error("Invalid GeoJSON object.")}}function Xa(u,y,P,G){return u?u(y,P):new Ss(P,G&&G.markersInheritOptions&&G)}function Ja(u){return new me(u[1],u[0],u[2])}function io(u,y,P){for(var G=[],ae=0,Pe=u.length,ut;ae<Pe;ae++)ut=y?io(u[ae],y-1,P):(P||Ja)(u[ae]),G.push(ut);return G}function $s(u,y){return u=fe(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Ia(u,y,P,G){for(var ae=[],Pe=0,ut=u.length;Pe<ut;Pe++)ae.push(y?Ia(u[Pe],Wn(u[Pe])?0:y-1,P,G):$s(u[Pe],G));return!y&&P&&ae.length>0&&ae.push(ae[0].slice()),ae}function ta(u,y){return u.feature?i({},u.feature,{geometry:y}):so(y)}function so(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var Lt={toGeoJSON:function(u){return ta(this,{type:"Point",coordinates:$s(this.getLatLng(),u)})}};Ss.include(Lt),to.include(Lt),Io.include(Lt),wo.include({toGeoJSON:function(u){var y=!Wn(this._latlngs),P=Ia(this._latlngs,y?1:0,!1,u);return ta(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Os.include({toGeoJSON:function(u){var y=!Wn(this._latlngs),P=y&&!Wn(this._latlngs[0]),G=Ia(this._latlngs,P?2:y?1:0,!0,u);return y||(G=[G]),ta(this,{type:(P?"Multi":"")+"Polygon",coordinates:G})}}),eo.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),ta(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",G=[];return this.eachLayer(function(ae){if(ae.toGeoJSON){var Pe=ae.toGeoJSON(u);if(P)G.push(Pe.geometry);else{var ut=so(Pe);ut.type==="FeatureCollection"?G.push.apply(G,ut.features):G.push(ut)}}}),P?ta(this,{geometries:G,type:"GeometryCollection"}):{type:"FeatureCollection",features:G}}});function Yt(u,y){return new no(u,y)}var Nt=Yt,Bn=Hr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=Z(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Sn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&ws(this._image),this},bringToBack:function(){return this._map&&mo(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=Z(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:hr("img");if(Sn(y,"leaflet-image-layer"),this._zoomAnimated&&Sn(y,"leaflet-zoom-animated"),this.options.className&&Sn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;js(this._image,P,y)},_reset:function(){var u=this._image,y=new Ze(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();yr(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){bi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),nr=function(u,y,P){return new Bn(u,y,P)},Mr=Bn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:hr("video");if(Sn(y,"leaflet-image-layer"),this._zoomAnimated&&Sn(y,"leaflet-zoom-animated"),this.options.className&&Sn(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),G=[],ae=0;ae<P.length;ae++)G.push(P[ae].src);this._url=P.length>0?G:[y.src];return}z(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ut=hr("source");ut.src=this._url[Pe],y.appendChild(ut)}}});function Xi(u,y,P){return new Mr(u,y,P)}var Ei=Bn.extend({_initImage:function(){var u=this._image=this._url;Sn(u,"leaflet-image-layer"),this._zoomAnimated&&Sn(u,"leaflet-zoom-animated"),this.options.className&&Sn(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function fu(u,y,P){return new Ei(u,y,P)}var xo=Hr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof me||z(u))?(this._latlng=fe(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&bi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&bi(this._container,1),this.bringToFront(),this.options.interactive&&(Sn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(bi(this._container,0),this._removeTimeout=setTimeout(o(Dn,void 0,this._container),200)):Dn(this._container),this.options.interactive&&(sn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=fe(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ws(this._container),this},bringToBack:function(){return this._map&&mo(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof bo){y=null;var P=this._source._layers;for(var G in P)if(P[G]._map){y=P[G];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=ve(this.options.offset),P=this._getAnchor();this._zoomAnimated?yr(this._container,u.add(P)):y=y.add(u).add(P);var G=this._containerBottom=-y.y,ae=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=G+"px",this._container.style.left=ae+"px"}},_getAnchor:function(){return[0,0]}});ni.include({_initOverlay:function(u,y,P,G){var ae=y;return ae instanceof u||(ae=new u(G).setContent(y)),P&&ae.setLatLng(P),ae}}),Hr.include({_initOverlay:function(u,y,P,G){var ae=P;return ae instanceof u?(E(ae,G),ae._source=this):(ae=y&&!G?y:new u(G,this),ae.setContent(P)),ae}});var Ji=xo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,xo.prototype.openOn.call(this,u)},onAdd:function(u){xo.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ea||this._source.on("preclick",sa))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ea||this._source.off("preclick",sa))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=hr("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=hr("div",u+"-content-wrapper",y);if(this._contentNode=hr("div",u+"-content",P),Ta(y),_l(this._contentNode),Cr(y,"contextmenu",sa),this._tipContainer=hr("div",u+"-tip-container",y),this._tip=hr("div",u+"-tip",this._tipContainer),this.options.closeButton){var G=this._closeButton=hr("a",u+"-close-button",y);G.setAttribute("role","button"),G.setAttribute("aria-label","Close popup"),G.href="#close",G.innerHTML='<span aria-hidden="true">&#215;</span>',Cr(G,"click",function(ae){Pr(ae),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var G=u.offsetHeight,ae=this.options.maxHeight,Pe="leaflet-popup-scrolled";ae&&G>ae?(y.height=ae+"px",Sn(u,Pe)):sn(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();yr(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(ei(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,G=this._containerWidth,ae=new X(this._containerLeft,-P-this._containerBottom);ae._add(Xs(this._container));var Pe=u.layerPointToContainerPoint(ae),ut=ve(this.options.autoPanPadding),Ot=ve(this.options.autoPanPaddingTopLeft||ut),Wt=ve(this.options.autoPanPaddingBottomRight||ut),un=u.getSize(),jn=0,sr=0;Pe.x+G+Wt.x>un.x&&(jn=Pe.x+G-un.x+Wt.x),Pe.x-jn-Ot.x<0&&(jn=Pe.x-Ot.x),Pe.y+P+Wt.y>un.y&&(sr=Pe.y+P-un.y+Wt.y),Pe.y-sr-Ot.y<0&&(sr=Pe.y-Ot.y),(jn||sr)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([jn,sr]))}},_getAnchor:function(){return ve(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ba=function(u,y){return new Ji(u,y)};ni.mergeOptions({closePopupOnClick:!0}),ni.include({openPopup:function(u,y,P){return this._initOverlay(Ji,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Hr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Ji,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof bo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Kn(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof ea)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Qa=xo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){xo.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){xo.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=xo.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=hr("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,G=this._map,ae=this._container,Pe=G.latLngToContainerPoint(G.getCenter()),ut=G.layerPointToContainerPoint(u),Ot=this.options.direction,Wt=ae.offsetWidth,un=ae.offsetHeight,jn=ve(this.options.offset),sr=this._getAnchor();Ot==="top"?(y=Wt/2,P=un):Ot==="bottom"?(y=Wt/2,P=0):Ot==="center"?(y=Wt/2,P=un/2):Ot==="right"?(y=0,P=un/2):Ot==="left"?(y=Wt,P=un/2):ut.x<Pe.x?(Ot="right",y=0,P=un/2):(Ot="left",y=Wt+(jn.x+sr.x)*2,P=un/2),u=u.subtract(ve(y,P,!0)).add(jn).add(sr),sn(ae,"leaflet-tooltip-right"),sn(ae,"leaflet-tooltip-left"),sn(ae,"leaflet-tooltip-top"),sn(ae,"leaflet-tooltip-bottom"),Sn(ae,"leaflet-tooltip-"+Ot),yr(ae,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&bi(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return ve(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ra=function(u,y){return new Qa(u,y)};ni.include({openTooltip:function(u,y,P){return this._initOverlay(Qa,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Hr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Qa,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof bo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(Cr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),Cr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,G;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),G=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(G)),this._tooltip.setLatLng(y)}});var Fa=Oa.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(Sr(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var G=ve(P.bgPos);y.style.backgroundPosition=-G.x+"px "+-G.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function ja(u){return new Fa(u)}Oa.Default=wl;var ri=Hr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:dt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),Dn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ws(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(mo(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof X?u:new X(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),G=0,ae=y.length,Pe;G<ae;G++)Pe=y[G].style.zIndex,y[G]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!dt.ielt9){bi(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var G in this._tiles){var ae=this._tiles[G];if(!(!ae.current||!ae.loaded)){var Pe=Math.min(1,(u-ae.loaded)/200);bi(ae.el,Pe),Pe<1?y=!0:(ae.active?P=!0:this._onOpaqueTile(ae),ae.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(R(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=hr("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(Dn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var G=this._levels[u],ae=this._map;return G||(G=this._levels[u]={},G.el=hr("div","leaflet-tile-container leaflet-zoom-animated",this._container),G.el.style.zIndex=y,G.origin=ae.project(ae.unproject(ae.getPixelOrigin()),u).round(),G.zoom=u,this._setZoomTransform(G,ae.getCenter(),ae.getZoom()),p(G.el.offsetWidth),this._onCreateLevel(G)),this._level=G,G}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var G=y.coords;this._retainParent(G.x,G.y,G.z,G.z-5)||this._retainChildren(G.x,G.y,G.z,G.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)Dn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,G){var ae=Math.floor(u/2),Pe=Math.floor(y/2),ut=P-1,Ot=new X(+ae,+Pe);Ot.z=+ut;var Wt=this._tileCoordsToKey(Ot),un=this._tiles[Wt];return un&&un.active?(un.retain=!0,!0):(un&&un.loaded&&(un.retain=!0),ut>G?this._retainParent(ae,Pe,ut,G):!1)},_retainChildren:function(u,y,P,G){for(var ae=2*u;ae<2*u+2;ae++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ut=new X(ae,Pe);ut.z=P+1;var Ot=this._tileCoordsToKey(ut),Wt=this._tiles[Ot];if(Wt&&Wt.active){Wt.retain=!0;continue}else Wt&&Wt.loaded&&(Wt.retain=!0);P+1<G&&this._retainChildren(ae,Pe,P+1,G)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,G){var ae=Math.round(y);this.options.maxZoom!==void 0&&ae>this.options.maxZoom||this.options.minZoom!==void 0&&ae<this.options.minZoom?ae=void 0:ae=this._clampZoom(ae);var Pe=this.options.updateWhenZooming&&ae!==this._tileZoom;(!G||Pe)&&(this._tileZoom=ae,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),ae!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var G=this._map.getZoomScale(P,u.zoom),ae=u.origin.multiplyBy(G).subtract(this._map._getNewPixelOrigin(y,P)).round();dt.any3d?js(u.el,ae,G):yr(u.el,ae)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),G=this._tileZoom,ae=this._map.getPixelWorldBounds(this._tileZoom);ae&&(this._globalTileRange=this._pxBoundsToTileRange(ae)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],G).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],G).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],G).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],G).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),G=y.getZoomScale(P,this._tileZoom),ae=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(G*2);return new Ze(ae.subtract(Pe),ae.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var G=this._getTiledPixelBounds(u),ae=this._pxBoundsToTileRange(G),Pe=ae.getCenter(),ut=[],Ot=this.options.keepBuffer,Wt=new Ze(ae.getBottomLeft().subtract([Ot,-Ot]),ae.getTopRight().add([Ot,-Ot]));if(!(isFinite(ae.min.x)&&isFinite(ae.min.y)&&isFinite(ae.max.x)&&isFinite(ae.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var un in this._tiles){var jn=this._tiles[un].coords;(jn.z!==this._tileZoom||!Wt.contains(new X(jn.x,jn.y)))&&(this._tiles[un].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var sr=ae.min.y;sr<=ae.max.y;sr++)for(var Vr=ae.min.x;Vr<=ae.max.x;Vr++){var Es=new X(Vr,sr);if(Es.z=this._tileZoom,!!this._isValidTile(Es)){var as=this._tiles[this._tileCoordsToKey(Es)];as?as.current=!0:ut.push(Es)}}if(ut.sort(function(Qi,Fo){return Qi.distanceTo(Pe)-Fo.distanceTo(Pe)}),ut.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ws=document.createDocumentFragment();for(Vr=0;Vr<ut.length;Vr++)this._addTile(ut[Vr],Ws);this._level.el.appendChild(Ws)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var G=this._tileCoordsToBounds(u);return Z(this.options.bounds).overlaps(G)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),G=u.scaleBy(P),ae=G.add(P),Pe=y.unproject(G,u.z),ut=y.unproject(ae,u.z);return[Pe,ut]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new H(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new X(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(Dn(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){Sn(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,dt.ielt9&&this.options.opacity<1&&bi(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),G=this._tileCoordsToKey(u),ae=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(ae),this.createTile.length<2&&I(o(this._tileReady,this,u,null,ae)),yr(ae,P),this._tiles[G]={el:ae,coords:u,current:!0},y.appendChild(ae),this.fire("tileloadstart",{tile:ae,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var G=this._tileCoordsToKey(u);P=this._tiles[G],P&&(P.loaded=+new Date,this._map._fadeAnimated?(bi(P.el,0),R(this._fadeFrame),this._fadeFrame=I(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(Sn(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),dt.ielt9||!this._map._fadeAnimated?I(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new X(this._wrapX?h(u.x,this._wrapX):u.x,this._wrapY?h(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new Ze(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ya(u){return new ri(u)}var Vs=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&dt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return Cr(P,"load",o(this._tileOnLoad,this,y,P)),Cr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:dt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return D(this._url,i(y,this.options))},_tileOnLoad:function(u,y){dt.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var G=this.options.errorTileUrl;G&&y.getAttribute("src")!==G&&(y.src=G),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,G=this.options.zoomOffset;return P&&(u=y-u),u+G},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=te;var P=this._tiles[u].coords;Dn(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",te),ri.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===te))return ri.prototype._tileReady.call(this,u,y,P)}});function Pi(u,y){return new Vs(u,y)}var Ii=Vs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var G in y)G in this.options||(P[G]=y[G]);y=E(this,y);var ae=y.detectRetina&&dt.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*ae,P.height=Pe.y*ae,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Vs.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,G=ie(P.project(y[0]),P.project(y[1])),ae=G.min,Pe=G.max,ut=(this._wmsVersion>=1.3&&this._crs===Ls?[ae.y,ae.x,Pe.y,Pe.x]:[ae.x,ae.y,Pe.x,Pe.y]).join(","),Ot=Vs.prototype.getTileUrl.call(this,u);return Ot+k(this.wmsParams,Ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ut},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function vs(u,y){return new Ii(u,y)}Vs.WMS=Ii,Pi.wms=vs;var Ui=Hr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Sn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),G=this._map.getSize().multiplyBy(.5+this.options.padding),ae=this._map.project(this._center,y),Pe=G.multiplyBy(-P).add(ae).subtract(this._map._getNewPixelOrigin(u,y));dt.any3d?js(this._container,Pe,P):yr(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new Ze(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),na=Ui.extend({options:{tolerance:0},getEvents:function(){var u=Ui.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");Cr(u,"mousemove",this._onMouseMove,this),Cr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Cr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){R(this._redrawRequest),delete this._ctx,Dn(this._container),Tr(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),G=dt.retina?2:1;yr(y,u.min),y.width=G*P.x,y.height=G*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",dt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,G=y.prev;P?P.prev=G:this._drawLast=G,G?G.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],G,ae;for(ae=0;ae<y.length;ae++){if(G=Number(y[ae]),isNaN(G))return;P.push(G)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||I(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Ze,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var G=this._drawFirst;G;G=G.next)u=G.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,G,ae,Pe,ut=u._parts,Ot=ut.length,Wt=this._ctx;if(Ot){for(Wt.beginPath(),P=0;P<Ot;P++){for(G=0,ae=ut[P].length;G<ae;G++)Pe=ut[P][G],Wt[G?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Wt.closePath()}this._fillStroke(Wt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,G=Math.max(Math.round(u._radius),1),ae=(Math.max(Math.round(u._radiusY),1)||G)/G;ae!==1&&(P.save(),P.scale(1,ae)),P.beginPath(),P.arc(y.x,y.y/ae,G,0,Math.PI*2,!1),ae!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,G,ae=this._drawFirst;ae;ae=ae.next)P=ae.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(G=P);this._fireEvent(G?[G]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(sn(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,G,ae=this._drawFirst;ae;ae=ae.next)P=ae.layer,P.options.interactive&&P._containsPoint(y)&&(G=P);G!==this._hoveredLayer&&(this._handleMouseOut(u),G&&(Sn(this._container,"leaflet-interactive"),this._fireEvent([G],u,"mouseover"),this._hoveredLayer=G)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(P)P.prev=G;else return;G?G.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,G=y.prev;if(G)G.next=P;else return;P?P.prev=G:G&&(this._drawLast=G),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Bo(u){return dt.canvas?new na(u):null}var aa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ec={_initContainer:function(){this._container=hr("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ui.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=aa("shape");Sn(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=aa("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;Dn(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,G=u.options,ae=u._container;ae.stroked=!!G.stroke,ae.filled=!!G.fill,G.stroke?(y||(y=u._stroke=aa("stroke")),ae.appendChild(y),y.weight=G.weight+"px",y.color=G.color,y.opacity=G.opacity,G.dashArray?y.dashStyle=z(G.dashArray)?G.dashArray.join(" "):G.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=G.lineCap.replace("butt","flat"),y.joinstyle=G.lineJoin):y&&(ae.removeChild(y),u._stroke=null),G.fill?(P||(P=u._fill=aa("fill")),ae.appendChild(P),P.color=G.fillColor||G.color,P.opacity=G.fillOpacity):P&&(ae.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),G=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+G+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){ws(u._container)},_bringToBack:function(u){mo(u._container)}},za=dt.vml?aa:se,Cs=Ui.extend({_initContainer:function(){this._container=za("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=za("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Dn(this._container),Tr(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ui.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),yr(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=za("path");u.options.className&&Sn(y,u.options.className),u.options.interactive&&Sn(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){Dn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,ue(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),G=Math.max(Math.round(u._radiusY),1)||P,ae="a"+P+","+G+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+ae+P*2+",0 "+ae+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){ws(u._path)},_bringToBack:function(u){mo(u._path)}});dt.vml&&Cs.include(ec);function $i(u){return dt.svg||dt.vml?new Cs(u):null}ni.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Bo(u)||$i(u)}});var oo=Os.extend({initialize:function(u,y){Os.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=Z(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function Ro(u,y){return new oo(u,y)}Cs.create=za,Cs.pointsToPath=ue,no.geometryToLayer=ro,no.coordsToLatLng=Ja,no.coordsToLatLngs=io,no.latLngToCoords=$s,no.latLngsToCoords=Ia,no.getFeature=ta,no.asFeature=so,ni.mergeOptions({boxZoom:!0});var wr=Li.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){Cr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Tr(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vi(),vn(),this._startPoint=this._map.mouseEventToContainerPoint(u),Cr(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=hr("div","leaflet-zoom-box",this._container),Sn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new Ze(this._point,this._startPoint),P=y.getSize();yr(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(Dn(this._box),sn(this._container,"leaflet-crosshair")),Gi(),Yr(),Tr(document,{contextmenu:Kn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new H(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ni.addInitHook("addHandler","boxZoom",wr),ni.mergeOptions({doubleClickZoom:!0});var el=Li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),G=y.options.zoomDelta,ae=u.originalEvent.shiftKey?P-G:P+G;y.options.doubleClickZoom==="center"?y.setZoom(ae):y.setZoomAround(u.containerPoint,ae)}});ni.addInitHook("addHandler","doubleClickZoom",el),ni.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var tl=Li.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ma(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}Sn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){sn(this._map._container,"leaflet-grab"),sn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=Z(this._map.options.maxBounds);this._offsetLimit=ie(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,G=this._draggable._newPos.x,ae=(G-y+P)%u+y-P,Pe=(G+y+P)%u-y-P,ut=Math.abs(ae+P)<Math.abs(Pe+P)?ae:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ut},_onDragEnd:function(u){var y=this._map,P=y.options,G=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),G)y.fire("moveend");else{this._prunePositions(+new Date);var ae=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ut=P.easeLinearity,Ot=ae.multiplyBy(ut/Pe),Wt=Ot.distanceTo([0,0]),un=Math.min(P.inertiaMaxSpeed,Wt),jn=Ot.multiplyBy(un/Wt),sr=un/(P.inertiaDeceleration*ut),Vr=jn.multiplyBy(-sr/2).round();!Vr.x&&!Vr.y?y.fire("moveend"):(Vr=y._limitOffset(Vr,y.options.maxBounds),I(function(){y.panBy(Vr,{duration:sr,easeLinearity:ut,noMoveStart:!0,animate:!0})}))}}});ni.addInitHook("addHandler","dragging",tl),ni.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ba=Li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),Cr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Tr(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,G=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(G,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,G,ae;for(G=0,ae=P.left.length;G<ae;G++)y[P.left[G]]=[-1*u,0];for(G=0,ae=P.right.length;G<ae;G++)y[P.right[G]]=[u,0];for(G=0,ae=P.down.length;G<ae;G++)y[P.down[G]]=[0,u];for(G=0,ae=P.up.length;G<ae;G++)y[P.up[G]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,G,ae;for(G=0,ae=P.zoomIn.length;G<ae;G++)y[P.zoomIn[G]]=u;for(G=0,ae=P.zoomOut.length;G<ae;G++)y[P.zoomOut[G]]=-u},_addHooks:function(){Cr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Tr(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,G;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(G=this._panKeys[y],u.shiftKey&&(G=ve(G).multiplyBy(3)),P.options.maxBounds&&(G=P._limitOffset(ve(G),P.options.maxBounds)),P.options.worldCopyJump){var ae=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(G)));P.panTo(ae)}else P.panBy(G)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Kn(u)}}});ni.addInitHook("addHandler","keyboard",ba),ni.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Lo=Li.extend({addHooks:function(){Cr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Tr(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=ku(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var G=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),G),Kn(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var G=this._delta/(this._map.options.wheelPxPerZoomLevel*4),ae=4*Math.log(2/(1+Math.exp(-Math.abs(G))))/Math.LN2,Pe=P?Math.ceil(ae/P)*P:ae,ut=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ut&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ut):u.setZoomAround(this._lastMousePos,y+ut))}});ni.addInitHook("addHandler","scrollWheelZoom",Lo);var sd=600;ni.mergeOptions({tapHold:dt.touchNative&&dt.safari&&dt.mobile,tapTolerance:15});var Us=Li.extend({addHooks:function(){Cr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Tr(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new X(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(Cr(document,"touchend",Pr),Cr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),sd),Cr(document,"touchend touchcancel contextmenu",this._cancel,this),Cr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Tr(document,"touchend",Pr),Tr(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Tr(document,"touchend touchcancel contextmenu",this._cancel,this),Tr(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new X(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});ni.addInitHook("addHandler","tapHold",Us),ni.mergeOptions({touchZoom:dt.touch,bounceAtZoomLimits:!0});var Hs=Li.extend({addHooks:function(){Sn(this._map._container,"leaflet-touch-zoom"),Cr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){sn(this._map._container,"leaflet-touch-zoom"),Tr(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(G)._divideBy(2))),this._startDist=P.distanceTo(G),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),Cr(document,"touchmove",this._onTouchMove,this),Cr(document,"touchend touchcancel",this._onTouchEnd,this),Pr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),G=y.mouseEventToContainerPoint(u.touches[1]),ae=P.distanceTo(G)/this._startDist;if(this._zoom=y.getScaleZoom(ae,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&ae<1||this._zoom>y.getMaxZoom()&&ae>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,ae===1)return}else{var Pe=P._add(G)._divideBy(2)._subtract(this._centerPoint);if(ae===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),R(this._animRequest);var ut=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=I(ut,this,!0),Pr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,R(this._animRequest),Tr(document,"touchmove",this._onTouchMove,this),Tr(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ni.addInitHook("addHandler","touchZoom",Hs),ni.BoxZoom=wr,ni.DoubleClickZoom=el,ni.Drag=tl,ni.Keyboard=ba,ni.ScrollWheelZoom=Lo,ni.TapHold=Us,ni.TouchZoom=Hs,n.Bounds=Ze,n.Browser=dt,n.CRS=de,n.Canvas=na,n.Circle=to,n.CircleMarker=Io,n.Class=$,n.Control=gr,n.DivIcon=Fa,n.DivOverlay=xo,n.DomEvent=lu,n.DomUtil=$n,n.Draggable=ma,n.Evented=ne,n.FeatureGroup=bo,n.GeoJSON=no,n.GridLayer=ri,n.Handler=Li,n.Icon=Oa,n.ImageOverlay=Bn,n.LatLng=me,n.LatLngBounds=H,n.Layer=Hr,n.LayerGroup=eo,n.LineUtil=Ur,n.Map=ni,n.Marker=Ss,n.Mixin=kc,n.Path=ea,n.Point=X,n.PolyUtil=Fl,n.Polygon=Os,n.Polyline=wo,n.Popup=Ji,n.PosAnimation=Au,n.Projection=Ci,n.Rectangle=oo,n.Renderer=Ui,n.SVG=Cs,n.SVGOverlay=Ei,n.TileLayer=Vs,n.Tooltip=Qa,n.Transformation=De,n.Util=B,n.VideoOverlay=Mr,n.bind=o,n.bounds=ie,n.canvas=Bo,n.circle=_o,n.circleMarker=zl,n.control=ps,n.divIcon=ja,n.extend=i,n.featureGroup=Du,n.geoJSON=Yt,n.geoJson=Nt,n.gridLayer=ya,n.icon=Qu,n.imageOverlay=nr,n.latLng=fe,n.latLngBounds=Z,n.layerGroup=jl,n.map=fs,n.marker=Na,n.point=ve,n.polygon=Za,n.polyline=Ac,n.popup=Ba,n.rectangle=Ro,n.setOptions=E,n.stamp=l,n.svg=$i,n.svgOverlay=fu,n.tileLayer=Pi,n.tooltip=Ra,n.transformation=et,n.version=r,n.videoOverlay=Xi;var _a=window.L;n.noConflict=function(){return window.L=_a,this},window.L=n})})(pb,pb.exports);var Vt=pb.exports;const Xn=B_(Vt);var J4={exports:{}};(function(t,e){(function(n,r){r(e)})(Ea,function(n){var r=typeof window<"u"?window:typeof Ea<"u"?Ea:typeof self<"u"?self:{};function i(c,h){return c(h={exports:{}},h.exports),h.exports}var s=i(function(c,h){(function(p){const v={escape:function(U){return U.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:g,mimeType:function(U){return U=g(U).toLowerCase(),function(){var V="application/font-woff",ne="image/jpeg";return{woff:V,woff2:V,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ne,jpeg:ne,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[U]||""},dataAsUrl:function(U,V){return`data:${V};base64,`+U},isDataUrl:function(U){return U.search(/^(data:)/)!==-1},canvasToBlob:function(U){return U.toBlob?new Promise(function(ne){U.toBlob(ne)}):(V=U,new Promise(function(ne){const X=pe(V.toDataURL().split(",")[1]);var we=X.length;const ve=new Uint8Array(we);for(let Ze=0;Ze<we;Ze++)ve[Ze]=X.charCodeAt(Ze);ne(new Blob([ve],{type:"image/png"}))}));var V},resolveUrl:function(U,V){const ne=document.implementation.createHTMLDocument(),X=ne.createElement("base"),we=(ne.head.appendChild(X),ne.createElement("a"));return ne.body.appendChild(we),X.href=V,we.href=U,we.href},getAndEncode:function(U){let V=te.impl.urlCache.find(function(ne){return ne.url===U});return V||(V={url:U,promise:null},te.impl.urlCache.push(V)),V.promise===null&&(te.impl.options.cacheBust&&(U+=(/\?/.test(U)?"&":"?")+new Date().getTime()),V.promise=new Promise(function(ne){const X=te.impl.options.httpTimeout,we=new XMLHttpRequest;let ve;var Ze;function ie(H){console.error(H),ne("")}we.onreadystatechange=function(){if(we.readyState===4)if(we.status!==200)ve?ne(ve):ie(`cannot fetch resource: ${U}, status: `+we.status);else{const H=new FileReader;H.onloadend=function(){var Z=H.result.split(/,/)[1];ne(Z)},H.readAsDataURL(we.response)}},we.ontimeout=function(){ve?ne(ve):ie(`timeout of ${X}ms occured while fetching resource: `+U)},we.responseType="blob",we.timeout=X,te.impl.options.useCredentials&&(we.withCredentials=!0),we.open("GET",U,!0),we.send(),te.impl.options.imagePlaceholder&&(Ze=te.impl.options.imagePlaceholder.split(/,/))&&Ze[1]&&(ve=Ze[1])})),V.promise},uid:function(){let U=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+U++}}(),delay:function(U){return function(V){return new Promise(function(ne){setTimeout(function(){ne(V)},U)})}},asArray:function(U){const V=[],ne=U.length;for(let X=0;X<ne;X++)V.push(U[X]);return V},escapeXhtml:function(U){return U.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(U){return U!=="data:,"?new Promise(function(V,ne){const X=new Image;te.impl.options.useCredentials&&(X.crossOrigin="use-credentials"),X.onload=function(){V(X)},X.onerror=ne,X.src=U}):Promise.resolve()},width:function(U){var V=x(U,"border-left-width"),ne=x(U,"border-right-width");return U.scrollWidth+V+ne},height:function(U){var V=x(U,"border-top-width"),ne=x(U,"border-bottom-width");return U.scrollHeight+V+ne}};function g(U){return(U=/\.([^\.\/]*?)(\?|$)/g.exec(U))?U[1]:""}function x(U,V){const ne=ge(U).getPropertyValue(V);return parseFloat(ne.replace("px",""))}const E=function(){const U=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(we,ve,Ze){return V(we)?Promise.resolve(we).then(ne).then(function(ie){let H=Promise.resolve(we);return ie.forEach(function(Z){H=H.then(function(me){return X(me,Z,ve,Ze)})}),H}):Promise.resolve(we)},shouldProcess:V,impl:{readUrls:ne,inline:X}};function V(we){return we.search(U)!==-1}function ne(we){const ve=[];for(var Ze;(Ze=U.exec(we))!==null;)ve.push(Ze[1]);return ve.filter(function(ie){return!v.isDataUrl(ie)})}function X(we,ve,Ze,ie){return Promise.resolve(ve).then(function(H){return Ze?v.resolveUrl(H,Ze):H}).then(ie||v.getAndEncode).then(function(H){return v.dataAsUrl(H,v.mimeType(ve))}).then(function(H){return we.replace((Z=ve,new RegExp(`(url\\(['"]?)(${v.escape(Z)})(['"]?\\))`,"g")),`$1${H}$3`);var Z})}}(),k={resolveAll:function(){return A().then(function(U){return Promise.all(U.map(function(V){return V.resolve()}))}).then(function(U){return U.join(`
`)})},impl:{readAll:A}};function A(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(V){const ne=[];return V.forEach(function(X){if(Object.getPrototypeOf(X).hasOwnProperty("cssRules"))try{v.asArray(X.cssRules||[]).forEach(ne.push.bind(ne))}catch(we){console.log("Error while reading CSS rules from "+X.href,we.toString())}}),ne}).then(function(V){return V.filter(function(ne){return ne.type===CSSRule.FONT_FACE_RULE}).filter(function(ne){return E.shouldProcess(ne.style.getPropertyValue("src"))})}).then(function(V){return V.map(U)});function U(V){return{resolve:function(){var ne=(V.parentStyleSheet||{}).href;return E.inlineAll(V.cssText,ne)},src:function(){return V.style.getPropertyValue("src")}}}}const D={inlineAll:function U(V){return V instanceof Element?function(ne){const X=ne.style.getPropertyValue("background");return X?E.inlineAll(X).then(function(we){ne.style.setProperty("background",we,X)}).then(function(){return ne}):Promise.resolve(ne)}(V).then(function(){return V instanceof HTMLImageElement?z(V).inline():Promise.all(v.asArray(V.childNodes).map(function(ne){return U(ne)}))}):Promise.resolve(V)},impl:{newImage:z}};function z(U){return{inline:function(V){return v.isDataUrl(U.src)?Promise.resolve():Promise.resolve(U.src).then(V||v.getAndEncode).then(function(ne){return v.dataAsUrl(ne,v.mimeType(U.src))}).then(function(ne){return new Promise(function(X){U.onload=X,U.onerror=X,U.src=ne})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},te={toSvg:N,toPng:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(ne){return ne.toDataURL()})},toJpeg:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(ne){return ne.toDataURL("image/jpeg",V.quality||1)})},toBlob:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(v.canvasToBlob)},toPixelData:function(U,V){return(V=V||{}).raster=!0,j(U,V).then(function(ne){return ne.getContext("2d").getImageData(0,0,v.width(U),v.height(U)).data})},toCanvas:function(U,V){return(V=V||{}).raster=!0,j(U,V||{})},impl:{fontFaces:k,images:D,util:v,inliner:E,urlCache:[],options:{}}},ge=(c.exports=te,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function N(U,V){var ne=V=V||{};return ne.imagePlaceholder===void 0?te.impl.options.imagePlaceholder=Y.imagePlaceholder:te.impl.options.imagePlaceholder=ne.imagePlaceholder,ne.cacheBust===void 0?te.impl.options.cacheBust=Y.cacheBust:te.impl.options.cacheBust=ne.cacheBust,ne.useCredentials===void 0?te.impl.options.useCredentials=Y.useCredentials:te.impl.options.useCredentials=ne.useCredentials,Promise.resolve(U).then(function(X){return function we(ve,Ze,ie,H,Z=null){return ie||!Ze||Ze(ve)?Promise.resolve(ve).then(function(me){return me instanceof HTMLCanvasElement?v.makeImage(me.toDataURL()):me.nodeName==="IFRAME"?html2canvas(me.contentDocument.body).then(fe=>fe.toDataURL()).then(v.makeImage):me.cloneNode(!1)}).then(function(me){return function(fe,de){const ce=fe.childNodes;return ce.length===0?Promise.resolve(de):function(J,Re){const De=ge(fe);let et=Promise.resolve();return Re.forEach(function(he){et=et.then(function(){return we(he,Ze,!1,H,De)}).then(function(Q){Q&&J.appendChild(Q)})}),et}(de,v.asArray(ce)).then(function(){return de})}(ve,me)}).then(function(me){return function(fe,de,ce){return de instanceof Element?Promise.resolve().then(function(){(function(J,Re){const De=ge(J);De.cssText?(Re.style.cssText=De.cssText,function(et,he){he.font=et.font,he.fontFamily=et.fontFamily,he.fontFeatureSettings=et.fontFeatureSettings,he.fontKerning=et.fontKerning,he.fontSize=et.fontSize,he.fontStretch=et.fontStretch,he.fontStyle=et.fontStyle,he.fontVariant=et.fontVariant,he.fontVariantCaps=et.fontVariantCaps,he.fontVariantEastAsian=et.fontVariantEastAsian,he.fontVariantLigatures=et.fontVariantLigatures,he.fontVariantNumeric=et.fontVariantNumeric,he.fontVariationSettings=et.fontVariationSettings,he.fontWeight=et.fontWeight}(De,Re.style)):(ce?function(et,he,Q,se){const ue=Q.style,ze=et.style;for(var Ce of he){var ye=he.getPropertyValue(Ce),Ve=ze.getPropertyValue(Ce),Ye=(ze.setProperty(Ce,se?"initial":"unset"),he.getPropertyValue(Ce));Ye!==ye?ue.setProperty(Ce,ye):ue.removeProperty(Ce),ze.setProperty(Ce,Ve)}}(J,De,Re,ie):function(et,he,Q){const se=function(ze){if($[ze])return $[ze];B||((B=document.createElement("iframe")).style.visibility="hidden",B.style.position="fixed",document.body.appendChild(B),B.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const Ce=document.createElement(ze),ye=(B.contentWindow.document.body.appendChild(Ce),Ce.textContent=".",B.contentWindow.getComputedStyle(Ce)),Ve={};return v.asArray(ye).forEach(function(Ye){Ve[Ye]=Ye==="width"||Ye==="height"?"auto":ye.getPropertyValue(Ye)}),B.contentWindow.document.body.removeChild(Ce),$[ze]=Ve}(Q.tagName),ue=Q.style;v.asArray(et).forEach(function(ze){var Ce=et.getPropertyValue(ze);(Ce!==se[ze]||he&&Ce!==he.getPropertyValue(ze))&&ue.setProperty(ze,Ce,et.getPropertyPriority(ze))})}(De,Z,Re),ie&&(["inset-block","inset-block-start","inset-block-end"].forEach(et=>Re.style.removeProperty(et)),["left","right","top","bottom"].forEach(et=>{Re.style.getPropertyValue(et)&&Re.style.setProperty(et,"0px")})))})(fe,de)}).then(function(){[":before",":after"].forEach(function(J){(function(Re){const De=ge(fe,Re),et=De.getPropertyValue("content");if(et!==""&&et!=="none"){const he=v.uid(),Q=de.getAttribute("class"),se=(Q&&de.setAttribute("class",Q+" "+he),document.createElement("style"));se.appendChild(function(){const ue=`.${he}:`+Re,ze=(De.cssText?function(){return`${De.cssText} content: ${De.getPropertyValue("content")};`}:function(){return v.asArray(De).map(function(Ce){return Ce+": "+De.getPropertyValue(Ce)+(De.getPropertyPriority(Ce)?" !important":"")}).join("; ")+";"})();return document.createTextNode(ue+`{${ze}}`)}()),de.appendChild(se)}})(J)})}).then(function(){fe instanceof HTMLTextAreaElement&&(de.innerHTML=fe.value),fe instanceof HTMLInputElement&&de.setAttribute("value",fe.value)}).then(function(){de instanceof SVGElement&&(de.setAttribute("xmlns","http://www.w3.org/2000/svg"),de instanceof SVGRectElement&&["width","height"].forEach(function(J){const Re=de.getAttribute(J);Re&&de.style.setProperty(J,Re)}))}).then(function(){return de}):de}(ve,me,H)}):Promise.resolve()}(X,V.filter,!0,!V.raster)}).then(K).then(I).then(function(X){V.bgcolor&&(X.style.backgroundColor=V.bgcolor),V.width&&(X.style.width=V.width+"px"),V.height&&(X.style.height=V.height+"px"),V.style&&Object.keys(V.style).forEach(function(ve){X.style[ve]=V.style[ve]});let we=null;return typeof V.onclone=="function"&&(we=V.onclone(X)),Promise.resolve(we).then(function(){return X})}).then(function(X){return X=X,we=V.width||v.width(U),ve=V.height||v.height(U),Promise.resolve(X).then(function(Ze){return Ze.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(Ze)}).then(v.escapeXhtml).then(function(Ze){return`<foreignObject x="0" y="0" width="100%" height="100%">${Ze}</foreignObject>`}).then(function(Ze){return`<svg xmlns="http://www.w3.org/2000/svg" width="${we}" height="${ve}">${Ze}</svg>`}).then(function(Ze){return"data:image/svg+xml;charset=utf-8,"+Ze});var we,ve}).then(function(X){return te.impl.urlCache=[],X})}function j(U,V){return N(U,V).then(v.makeImage).then(v.delay(0)).then(function(ne){var X=typeof V.scale!="number"?1:V.scale;const we=function(Ze,ie){const H=document.createElement("canvas");if(H.width=(V.width||v.width(Ze))*ie,H.height=(V.height||v.height(Ze))*ie,V.bgcolor){const Z=H.getContext("2d");Z.fillStyle=V.bgcolor,Z.fillRect(0,0,H.width,H.height)}return H}(U,X),ve=we.getContext("2d");return ve.mozImageSmoothingEnabled=!1,ve.msImageSmoothingEnabled=!1,ve.imageSmoothingEnabled=!1,ne&&(ve.scale(X,X),ve.drawImage(ne,0,0)),B&&(document.body.removeChild(B),B=null,R&&clearTimeout(R),R=setTimeout(()=>{R=null,$={}},2e4)),we})}function K(U){return k.resolveAll().then(function(V){const ne=document.createElement("style");return U.appendChild(ne),ne.appendChild(document.createTextNode(V)),U})}function I(U){return D.inlineAll(U).then(function(){return U})}let R=null,B=null,$={}})(r)}),o=i(function(c,h){(function(){function p(k,A,D){var z=new XMLHttpRequest;z.open("GET",k),z.responseType="blob",z.onload=function(){E(z.response,A,D)},z.onerror=function(){console.error("could not download file")},z.send()}function v(k){var A=new XMLHttpRequest;A.open("HEAD",k,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function g(k){try{k.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),k.dispatchEvent(A)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(k,A,D){var z=x.URL||x.webkitURL,Y=document.createElement("a");A=A||k.name||"download",Y.download=A,Y.rel="noopener",typeof k=="string"?(Y.href=k,Y.origin===location.origin?g(Y):v(Y.href)?p(k,A,D):g(Y,Y.target="_blank")):(Y.href=z.createObjectURL(k),setTimeout(function(){z.revokeObjectURL(Y.href)},4e4),setTimeout(function(){g(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(k,A,D){if(A=A||k.name||"download",typeof k!="string")navigator.msSaveOrOpenBlob(function(Y,te){return te===void 0?te={autoBom:!1}:typeof te!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),te={autoBom:!te}),te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(k,D),A);else if(v(k))p(k,A,D);else{var z=document.createElement("a");z.href=k,z.target="_blank",setTimeout(function(){g(z)})}}:function(k,A,D,z){if((z=z||open("","_blank"))&&(z.document.title=z.document.body.innerText="downloading..."),typeof k=="string")return p(k,A,D);var Y=k.type==="application/octet-stream",te=/constructor/i.test(x.HTMLElement)||x.safari,ge=/CriOS\/[\d]+/.test(navigator.userAgent);if((ge||Y&&te)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var K=pe.result;K=ge?K:K.replace(/^data:[^;]*;/,"data:attachment/file;"),z?z.location.href=K:location=K,z=null},pe.readAsDataURL(k)}else{var N=x.URL||x.webkitURL,j=N.createObjectURL(k);z?z.location=j:location.href=j,z=null,setTimeout(function(){N.revokeObjectURL(j)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var h=c.node,p=c.error;return console.warn("Map node is very big "+h.scrollWidth+"x"+h.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var g in this.options)p.hasOwnProperty(g)?v[g]=p[g]:v[g]=this.options[g];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return h==="image"?c._canvasToImage(x,v):h==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),g=!0,x=!1,E=void 0;try{for(var k,A=v[Symbol.iterator]();!(g=(k=A.next()).done);g=!0)k.value.style.opacity=h===!1?0:1}catch(D){x=!0,E=D}finally{try{!g&&A.return&&A.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,h){var p=h.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,h){var p=h.mimeType;return new Promise(function(v,g){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,h){var p=h.captionOffset,v=h.caption,g=h.captionFontSize,x=h.captionFont,E=h.captionColor,k=h.captionBgColor,A=this._node,D=A.screenHeight,z=A.screenWidth,Y=document.createElement("canvas");Y.width=z,Y.height=D;for(var te=Y.getContext("2d"),ge=te.createImageData(z,D),pe=0;pe<c.length;++pe)ge.data[pe]=c[pe];te.putImageData(ge,0,0),ge=null;var N=document.createElement("canvas"),j=N.getContext("2d"),K=0,I=0,R=D,B=z;if(this.options.cropImageByInnerWH===!0){for(var $=[],U=0,V=0;V<D;++V){U=0;for(var ne=0;ne<z;++ne)c[4*V*z+4*ne+4]===0&&U++;U===z&&$.push(V)}var X=this._getMinAndMaxOnValuesBreak($);K=X.min;for(var we=z,ve=X.max,Ze=[],ie=0,H=I;H<we;++H){ie=0;for(var Z=0;Z<D;++Z)c[4*Z*z+4*H+4]===0&&ie++;ie===D&&Ze.push(H)}var me=this._getMinAndMaxOnValuesBreak(Ze);I=me.min,we=me.max,(I===0&&we===0||we===null)&&(we=z),(K===0&&ve===0||ve===null)&&(ve=D),this.options.debugMode===!0&&(console.log("emptyYLine",$),console.log("minMaxY",X),console.log("emptyXLine",Ze),console.log("minMaxX",me),console.log("debugX",{}),console.log("debugY",{})),K===0&&ve===D&&I===0&&we===z||(K+=this.options.onCropBorderSize,ve-=this.options.onCropBorderSize,I+=this.options.onCropBorderSize,we-=this.options.onCropBorderSize),R=ve-K,B=we-I,N.width=B,N.height=R}else N.width=B,N.height=R;var fe=null;return v&&(fe=typeof v=="function"?v.call(this):v),fe!==null&&(N.height=N.height+(p+g+p),j.beginPath(),j.rect(0,0,N.width,N.height),j.fillStyle=k,j.fill(),j.save()),j.drawImage(Y,I,K,B,R,0,0,B,R),fe!==null&&(j.font=g+"px "+x,j.fillStyle=E,j.fillText(fe,p,R+p+g)),Promise.resolve(N)},_getMinAndMaxOnValuesBreak:function(c){for(var h=0,p=0,v=!1,g=1;g<c.length;g++){if(c[g]-1!==c[g-1]){p=c[g],v=!0;break}h=c[g]}return v===!1&&c[0]>1?(h=0,p=c[0]):v===!1&&(h=c[c.length-1]||0,p=null),{min:h,max:p}},_getPixelData:function(c){var h=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(g){return console.warn("May be map size very big on that zoom level, we have error:",g.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),h._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=this._map.getContainer();return this._node={node:h,screenHeight:h.scrollHeight,screenWidth:h.scrollWidth},s.toPixelData(h,c)},_getPixelDataOfBigMap:function(){var c=this,h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var g=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,h).then(function(x){return g(),x}).catch(function(x){return g(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:h}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,h=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),h.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(h){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(h,p+".png")}).catch(function(h){c._map.fire("simpleMapScreenshoter.error",{e:h})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(h){var p=setInterval(function(){c._interaction||(h(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(J4,J4.exports);var kl=63710088e-1,LE={centimeters:kl*100,centimetres:kl*100,degrees:360/(2*Math.PI),feet:kl*3.28084,inches:kl*39.37,kilometers:kl/1e3,kilometres:kl/1e3,meters:kl,metres:kl,miles:kl/1609.344,millimeters:kl*1e3,millimetres:kl*1e3,nauticalmiles:kl/1852,radians:1,yards:kl*1.0936};function Mp(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function $v(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Q4(t[0])||!Q4(t[1]))throw new Error("coordinates must contain numbers");return Mp({type:"Point",coordinates:t},e,n)}function Wu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Mp({type:"Polygon",coordinates:t},e,n)}function mc(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Mp({type:"LineString",coordinates:t},e,n)}function Nj(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Ij(t,e,n={}){return Mp({type:"MultiPolygon",coordinates:t},e,n)}function Bj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Rj(t,e="kilometers"){const n=LE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function gb(t){return t%(2*Math.PI)*180/Math.PI}function bc(t){return t%360*Math.PI/180}function Q4(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function e5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Fj(t){return t.type==="Feature"?t.geometry:t}function SE(t,e,n={}){if(n.final===!0)return jj(t,e);const r=e5(t),i=e5(e),s=bc(r[0]),o=bc(i[0]),a=bc(r[1]),l=bc(i[1]),c=Math.sin(o-s)*Math.cos(l),h=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return gb(Math.atan2(c,h))}function jj(t,e){let n=SE(e,t);return n=(n+180)%360,n}function zj(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function R_(t,e,n,r={}){const i=zj(t),s=bc(i[0]),o=bc(i[1]),a=bc(n),l=Rj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),h=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=gb(h),v=gb(c);return $v([p,v],r.properties)}var t5=R_;function n5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function F_(t,e,n={}){var r=n5(t),i=n5(e),s=bc(i[1]-r[1]),o=bc(i[0]-r[0]),a=bc(r[1]),l=bc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Bj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var Z1=F_;function $j(t,e,n={}){const i=Fj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=SE(i[o],i[o-1])-180;return R_(i[o],a,l,n)}else return $v(i[o])}else s+=F_(i[o],i[o+1],n);return $v(i[i.length-1])}var r5=$j;function Vj(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Uj(t,e,n){var r=n;return Vj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function CE(t){return Uj(t,(e,n)=>e+Hj(n),0)}function Hj(t){let e=0,n;switch(t.type){case"Polygon":return i5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=i5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function i5(t){let e=0;if(t&&t.length>0){e+=Math.abs(s5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(s5(t[n]))}return e}var Wj=kl*kl/2,X1=Math.PI/180;function s5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*X1,l=s[1]*X1,c=o[0]*X1;n+=(c-a)*Math.sin(l),r++}return n*Wj}var Rc=CE;function EE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var z=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(h=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(l,p,A,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,Y)===!1)return!1;p++,te==="MultiPoint"&&z++}te==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,A,z,Y)===!1)return!1;p++}te==="MultiLineString"&&z++,te==="Polygon"&&Y++}te==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,A,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(EE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Gj(t,e={}){let n=0,r=0,i=0;return EE(t,function(s){n+=s[0],r+=s[1],i++}),$v([n/i,r/i],e.properties)}var Ug=Gj;function qj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(R_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Wu([s],i)}var Yj=qj,Kj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,J1=Math.ceil,Uu=Math.floor,Zl="[BigNumber Error] ",o5=Zl+"Number primitive has more than 15 significant digits: ",uc=1e14,oi=14,a5=9007199254740991,Q1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Zd=1e7,yu=1e9;function PE(t){var e,n,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,c=21,h=-1e7,p=1e7,v=!1,g=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},k="0123456789abcdefghijklmnopqrstuvwxyz",A=!0;function D(N,j){var K,I,R,B,$,U,V,ne,X=this;if(!(X instanceof D))return new D(N,j);if(j==null){if(N&&N._isBigNumber===!0){X.s=N.s,!N.c||N.e>p?X.c=X.e=null:N.e<h?X.c=[X.e=0]:(X.e=N.e,X.c=N.c.slice());return}if((U=typeof N=="number")&&N*0==0){if(X.s=1/N<0?(N=-N,-1):1,N===~~N){for(B=0,$=N;$>=10;$/=10,B++);B>p?X.c=X.e=null:(X.e=B,X.c=[N]);return}ne=String(N)}else{if(!Kj.test(ne=String(N)))return r(X,ne,U);X.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(B=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),($=ne.search(/e/i))>0?(B<0&&(B=$),B+=+ne.slice($+1),ne=ne.substring(0,$)):B<0&&(B=ne.length)}else{if(co(j,2,k.length,"Base"),j==10&&A)return X=new D(N),ge(X,o+X.e+1,a);if(ne=String(N),U=typeof N=="number"){if(N*0!=0)return r(X,ne,U,j);if(X.s=1/N<0?(ne=ne.slice(1),-1):1,D.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(o5+N)}else X.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(K=k.slice(0,j),B=$=0,V=ne.length;$<V;$++)if(K.indexOf(I=ne.charAt($))<0){if(I=="."){if($>B){B=V;continue}}else if(!R&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){R=!0,$=-1,B=0;continue}return r(X,String(N),U,j)}U=!1,ne=n(ne,j,10,X.s),(B=ne.indexOf("."))>-1?ne=ne.replace(".",""):B=ne.length}for($=0;ne.charCodeAt($)===48;$++);for(V=ne.length;ne.charCodeAt(--V)===48;);if(ne=ne.slice($,++V)){if(V-=$,U&&D.DEBUG&&V>15&&(N>a5||N!==Uu(N)))throw Error(o5+X.s*N);if((B=B-$-1)>p)X.c=X.e=null;else if(B<h)X.c=[X.e=0];else{if(X.e=B,X.c=[],$=(B+1)%oi,B<0&&($+=oi),$<V){for($&&X.c.push(+ne.slice(0,$)),V-=oi;$<V;)X.c.push(+ne.slice($,$+=oi));$=oi-(ne=ne.slice($)).length}else $-=V;for(;$--;ne+="0");X.c.push(+ne)}}else X.c=[X.e=0]}D.clone=PE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(N){var j,K;if(N!=null)if(typeof N=="object"){if(N.hasOwnProperty(j="DECIMAL_PLACES")&&(K=N[j],co(K,0,yu,j),o=K),N.hasOwnProperty(j="ROUNDING_MODE")&&(K=N[j],co(K,0,8,j),a=K),N.hasOwnProperty(j="EXPONENTIAL_AT")&&(K=N[j],K&&K.pop?(co(K[0],-1e9,0,j),co(K[1],0,yu,j),l=K[0],c=K[1]):(co(K,-1e9,yu,j),l=-(c=K<0?-K:K))),N.hasOwnProperty(j="RANGE"))if(K=N[j],K&&K.pop)co(K[0],-1e9,-1,j),co(K[1],1,yu,j),h=K[0],p=K[1];else if(co(K,-1e9,yu,j),K)h=-(p=K<0?-K:K);else throw Error(Zl+j+" cannot be zero: "+K);if(N.hasOwnProperty(j="CRYPTO"))if(K=N[j],K===!!K)if(K)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=K;else throw v=!K,Error(Zl+"crypto unavailable");else v=K;else throw Error(Zl+j+" not true or false: "+K);if(N.hasOwnProperty(j="MODULO_MODE")&&(K=N[j],co(K,0,9,j),g=K),N.hasOwnProperty(j="POW_PRECISION")&&(K=N[j],co(K,0,yu,j),x=K),N.hasOwnProperty(j="FORMAT"))if(K=N[j],typeof K=="object")E=K;else throw Error(Zl+j+" not an object: "+K);if(N.hasOwnProperty(j="ALPHABET"))if(K=N[j],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))A=K.slice(0,10)=="0123456789",k=K;else throw Error(Zl+j+" invalid: "+K)}else throw Error(Zl+"Object expected: "+N);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[h,p],CRYPTO:v,MODULO_MODE:g,POW_PRECISION:x,FORMAT:E,ALPHABET:k}},D.isBigNumber=function(N){if(!N||N._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var j,K,I=N.c,R=N.e,B=N.s;e:if({}.toString.call(I)=="[object Array]"){if((B===1||B===-1)&&R>=-1e9&&R<=yu&&R===Uu(R)){if(I[0]===0){if(R===0&&I.length===1)return!0;break e}if(j=(R+1)%oi,j<1&&(j+=oi),String(I[0]).length==j){for(j=0;j<I.length;j++)if(K=I[j],K<0||K>=uc||K!==Uu(K))break e;if(K!==0)return!0}}}else if(I===null&&R===null&&(B===null||B===1||B===-1))return!0;throw Error(Zl+"Invalid BigNumber: "+N)},D.maximum=D.max=function(){return Y(arguments,-1)},D.minimum=D.min=function(){return Y(arguments,1)},D.random=function(){var N=9007199254740992,j=Math.random()*N&2097151?function(){return Uu(Math.random()*N)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var I,R,B,$,U,V=0,ne=[],X=new D(s);if(K==null?K=o:co(K,0,yu),$=J1(K/oi),v)if(crypto.getRandomValues){for(I=crypto.getRandomValues(new Uint32Array($*=2));V<$;)U=I[V]*131072+(I[V+1]>>>11),U>=9e15?(R=crypto.getRandomValues(new Uint32Array(2)),I[V]=R[0],I[V+1]=R[1]):(ne.push(U%1e14),V+=2);V=$/2}else if(crypto.randomBytes){for(I=crypto.randomBytes($*=7);V<$;)U=(I[V]&31)*281474976710656+I[V+1]*1099511627776+I[V+2]*4294967296+I[V+3]*16777216+(I[V+4]<<16)+(I[V+5]<<8)+I[V+6],U>=9e15?crypto.randomBytes(7).copy(I,V):(ne.push(U%1e14),V+=7);V=$/7}else throw v=!1,Error(Zl+"crypto unavailable");if(!v)for(;V<$;)U=j(),U<9e15&&(ne[V++]=U%1e14);for($=ne[--V],K%=oi,$&&K&&(U=Q1[oi-K],ne[V]=Uu($/U)*U);ne[V]===0;ne.pop(),V--);if(V<0)ne=[B=0];else{for(B=-1;ne[0]===0;ne.splice(0,1),B-=oi);for(V=1,U=ne[0];U>=10;U/=10,V++);V<oi&&(B-=oi-V)}return X.e=B,X.c=ne,X}}(),D.sum=function(){for(var N=1,j=arguments,K=new D(j[0]);N<j.length;)K=K.plus(j[N++]);return K},n=function(){var N="0123456789";function j(K,I,R,B){for(var $,U=[0],V,ne=0,X=K.length;ne<X;){for(V=U.length;V--;U[V]*=I);for(U[0]+=B.indexOf(K.charAt(ne++)),$=0;$<U.length;$++)U[$]>R-1&&(U[$+1]==null&&(U[$+1]=0),U[$+1]+=U[$]/R|0,U[$]%=R)}return U.reverse()}return function(K,I,R,B,$){var U,V,ne,X,we,ve,Ze,ie,H=K.indexOf("."),Z=o,me=a;for(H>=0&&(X=x,x=0,K=K.replace(".",""),ie=new D(I),ve=ie.pow(K.length-H),x=X,ie.c=j(bd(zu(ve.c),ve.e,"0"),10,R,N),ie.e=ie.c.length),Ze=j(K,I,R,$?(U=k,N):(U=N,k)),ne=X=Ze.length;Ze[--X]==0;Ze.pop());if(!Ze[0])return U.charAt(0);if(H<0?--ne:(ve.c=Ze,ve.e=ne,ve.s=B,ve=e(ve,ie,Z,me,R),Ze=ve.c,we=ve.r,ne=ve.e),V=ne+Z+1,H=Ze[V],X=R/2,we=we||V<0||Ze[V+1]!=null,we=me<4?(H!=null||we)&&(me==0||me==(ve.s<0?3:2)):H>X||H==X&&(me==4||we||me==6&&Ze[V-1]&1||me==(ve.s<0?8:7)),V<1||!Ze[0])K=we?bd(U.charAt(1),-Z,U.charAt(0)):U.charAt(0);else{if(Ze.length=V,we)for(--R;++Ze[--V]>R;)Ze[V]=0,V||(++ne,Ze=[1].concat(Ze));for(X=Ze.length;!Ze[--X];);for(H=0,K="";H<=X;K+=U.charAt(Ze[H++]));K=bd(K,ne,U.charAt(0))}return K}}(),e=function(){function N(I,R,B){var $,U,V,ne,X=0,we=I.length,ve=R%Zd,Ze=R/Zd|0;for(I=I.slice();we--;)V=I[we]%Zd,ne=I[we]/Zd|0,$=Ze*V+ne*ve,U=ve*V+$%Zd*Zd+X,X=(U/B|0)+($/Zd|0)+Ze*ne,I[we]=U%B;return X&&(I=[X].concat(I)),I}function j(I,R,B,$){var U,V;if(B!=$)V=B>$?1:-1;else for(U=V=0;U<B;U++)if(I[U]!=R[U]){V=I[U]>R[U]?1:-1;break}return V}function K(I,R,B,$){for(var U=0;B--;)I[B]-=U,U=I[B]<R[B]?1:0,I[B]=U*$+I[B]-R[B];for(;!I[0]&&I.length>1;I.splice(0,1));}return function(I,R,B,$,U){var V,ne,X,we,ve,Ze,ie,H,Z,me,fe,de,ce,J,Re,De,et,he=I.s==R.s?1:-1,Q=I.c,se=R.c;if(!Q||!Q[0]||!se||!se[0])return new D(!I.s||!R.s||(Q?se&&Q[0]==se[0]:!se)?NaN:Q&&Q[0]==0||!se?he*0:he/0);for(H=new D(he),Z=H.c=[],ne=I.e-R.e,he=B+ne+1,U||(U=uc,ne=Hu(I.e/oi)-Hu(R.e/oi),he=he/oi|0),X=0;se[X]==(Q[X]||0);X++);if(se[X]>(Q[X]||0)&&ne--,he<0)Z.push(1),we=!0;else{for(J=Q.length,De=se.length,X=0,he+=2,ve=Uu(U/(se[0]+1)),ve>1&&(se=N(se,ve,U),Q=N(Q,ve,U),De=se.length,J=Q.length),ce=De,me=Q.slice(0,De),fe=me.length;fe<De;me[fe++]=0);et=se.slice(),et=[0].concat(et),Re=se[0],se[1]>=U/2&&Re++;do{if(ve=0,V=j(se,me,De,fe),V<0){if(de=me[0],De!=fe&&(de=de*U+(me[1]||0)),ve=Uu(de/Re),ve>1)for(ve>=U&&(ve=U-1),Ze=N(se,ve,U),ie=Ze.length,fe=me.length;j(Ze,me,ie,fe)==1;)ve--,K(Ze,De<ie?et:se,ie,U),ie=Ze.length,V=1;else ve==0&&(V=ve=1),Ze=se.slice(),ie=Ze.length;if(ie<fe&&(Ze=[0].concat(Ze)),K(me,Ze,fe,U),fe=me.length,V==-1)for(;j(se,me,De,fe)<1;)ve++,K(me,De<fe?et:se,fe,U),fe=me.length}else V===0&&(ve++,me=[0]);Z[X++]=ve,me[0]?me[fe++]=Q[ce]||0:(me=[Q[ce]],fe=1)}while((ce++<J||me[0]!=null)&&he--);we=me[0]!=null,Z[0]||Z.splice(0,1)}if(U==uc){for(X=1,he=Z[0];he>=10;he/=10,X++);ge(H,B+(H.e=X+ne*oi-1)+1,$,we)}else H.e=ne,H.r=+we;return H}}();function z(N,j,K,I){var R,B,$,U,V;if(K==null?K=a:co(K,0,8),!N.c)return N.toString();if(R=N.c[0],$=N.e,j==null)V=zu(N.c),V=I==1||I==2&&($<=l||$>=c)?_0(V,$):bd(V,$,"0");else if(N=ge(new D(N),j,K),B=N.e,V=zu(N.c),U=V.length,I==1||I==2&&(j<=B||B<=l)){for(;U<j;V+="0",U++);V=_0(V,B)}else if(j-=$,V=bd(V,B,"0"),B+1>U){if(--j>0)for(V+=".";j--;V+="0");}else if(j+=B-U,j>0)for(B+1==U&&(V+=".");j--;V+="0");return N.s<0&&R?"-"+V:V}function Y(N,j){for(var K,I,R=1,B=new D(N[0]);R<N.length;R++)I=new D(N[R]),(!I.s||(K=Uh(B,I))===j||K===0&&B.s===j)&&(B=I);return B}function te(N,j,K){for(var I=1,R=j.length;!j[--R];j.pop());for(R=j[0];R>=10;R/=10,I++);return(K=I+K*oi-1)>p?N.c=N.e=null:K<h?N.c=[N.e=0]:(N.e=K,N.c=j),N}r=function(){var N=/^(-?)0([xbo])(?=\w[\w.]*$)/i,j=/^([^.]+)\.$/,K=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,R=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(B,$,U,V){var ne,X=U?$:$.replace(R,"");if(I.test(X))B.s=isNaN(X)?null:X<0?-1:1;else{if(!U&&(X=X.replace(N,function(we,ve,Ze){return ne=(Ze=Ze.toLowerCase())=="x"?16:Ze=="b"?2:8,!V||V==ne?ve:we}),V&&(ne=V,X=X.replace(j,"$1").replace(K,"0.$1")),$!=X))return new D(X,ne);if(D.DEBUG)throw Error(Zl+"Not a"+(V?" base "+V:"")+" number: "+$);B.s=null}B.c=B.e=null}}();function ge(N,j,K,I){var R,B,$,U,V,ne,X,we=N.c,ve=Q1;if(we){e:{for(R=1,U=we[0];U>=10;U/=10,R++);if(B=j-R,B<0)B+=oi,$=j,V=we[ne=0],X=Uu(V/ve[R-$-1]%10);else if(ne=J1((B+1)/oi),ne>=we.length)if(I){for(;we.length<=ne;we.push(0));V=X=0,R=1,B%=oi,$=B-oi+1}else break e;else{for(V=U=we[ne],R=1;U>=10;U/=10,R++);B%=oi,$=B-oi+R,X=$<0?0:Uu(V/ve[R-$-1]%10)}if(I=I||j<0||we[ne+1]!=null||($<0?V:V%ve[R-$-1]),I=K<4?(X||I)&&(K==0||K==(N.s<0?3:2)):X>5||X==5&&(K==4||I||K==6&&(B>0?$>0?V/ve[R-$]:0:we[ne-1])%10&1||K==(N.s<0?8:7)),j<1||!we[0])return we.length=0,I?(j-=N.e+1,we[0]=ve[(oi-j%oi)%oi],N.e=-j||0):we[0]=N.e=0,N;if(B==0?(we.length=ne,U=1,ne--):(we.length=ne+1,U=ve[oi-B],we[ne]=$>0?Uu(V/ve[R-$]%ve[$])*U:0),I)for(;;)if(ne==0){for(B=1,$=we[0];$>=10;$/=10,B++);for($=we[0]+=U,U=1;$>=10;$/=10,U++);B!=U&&(N.e++,we[0]==uc&&(we[0]=1));break}else{if(we[ne]+=U,we[ne]!=uc)break;we[ne--]=0,U=1}for(B=we.length;we[--B]===0;we.pop());}N.e>p?N.c=N.e=null:N.e<h&&(N.c=[N.e=0])}return N}function pe(N){var j,K=N.e;return K===null?N.toString():(j=zu(N.c),j=K<=l||K>=c?_0(j,K):bd(j,K,"0"),N.s<0?"-"+j:j)}return i.absoluteValue=i.abs=function(){var N=new D(this);return N.s<0&&(N.s=1),N},i.comparedTo=function(N,j){return Uh(this,new D(N,j))},i.decimalPlaces=i.dp=function(N,j){var K,I,R,B=this;if(N!=null)return co(N,0,yu),j==null?j=a:co(j,0,8),ge(new D(B),N+B.e+1,j);if(!(K=B.c))return null;if(I=((R=K.length-1)-Hu(this.e/oi))*oi,R=K[R])for(;R%10==0;R/=10,I--);return I<0&&(I=0),I},i.dividedBy=i.div=function(N,j){return e(this,new D(N,j),o,a)},i.dividedToIntegerBy=i.idiv=function(N,j){return e(this,new D(N,j),0,1)},i.exponentiatedBy=i.pow=function(N,j){var K,I,R,B,$,U,V,ne,X,we=this;if(N=new D(N),N.c&&!N.isInteger())throw Error(Zl+"Exponent not an integer: "+pe(N));if(j!=null&&(j=new D(j)),U=N.e>14,!we.c||!we.c[0]||we.c[0]==1&&!we.e&&we.c.length==1||!N.c||!N.c[0])return X=new D(Math.pow(+pe(we),U?N.s*(2-b0(N)):+pe(N))),j?X.mod(j):X;if(V=N.s<0,j){if(j.c?!j.c[0]:!j.s)return new D(NaN);I=!V&&we.isInteger()&&j.isInteger(),I&&(we=we.mod(j))}else{if(N.e>9&&(we.e>0||we.e<-1||(we.e==0?we.c[0]>1||U&&we.c[1]>=24e7:we.c[0]<8e13||U&&we.c[0]<=9999975e7)))return B=we.s<0&&b0(N)?-0:0,we.e>-1&&(B=1/B),new D(V?1/B:B);x&&(B=J1(x/oi+2))}for(U?(K=new D(.5),V&&(N.s=1),ne=b0(N)):(R=Math.abs(+pe(N)),ne=R%2),X=new D(s);;){if(ne){if(X=X.times(we),!X.c)break;B?X.c.length>B&&(X.c.length=B):I&&(X=X.mod(j))}if(R){if(R=Uu(R/2),R===0)break;ne=R%2}else if(N=N.times(K),ge(N,N.e+1,1),N.e>14)ne=b0(N);else{if(R=+pe(N),R===0)break;ne=R%2}we=we.times(we),B?we.c&&we.c.length>B&&(we.c.length=B):I&&(we=we.mod(j))}return I?X:(V&&(X=s.div(X)),j?X.mod(j):B?ge(X,x,a,$):X)},i.integerValue=function(N){var j=new D(this);return N==null?N=a:co(N,0,8),ge(j,j.e+1,N)},i.isEqualTo=i.eq=function(N,j){return Uh(this,new D(N,j))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(N,j){return Uh(this,new D(N,j))>0},i.isGreaterThanOrEqualTo=i.gte=function(N,j){return(j=Uh(this,new D(N,j)))===1||j===0},i.isInteger=function(){return!!this.c&&Hu(this.e/oi)>this.c.length-2},i.isLessThan=i.lt=function(N,j){return Uh(this,new D(N,j))<0},i.isLessThanOrEqualTo=i.lte=function(N,j){return(j=Uh(this,new D(N,j)))===-1||j===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(N,j){var K,I,R,B,$=this,U=$.s;if(N=new D(N,j),j=N.s,!U||!j)return new D(NaN);if(U!=j)return N.s=-j,$.plus(N);var V=$.e/oi,ne=N.e/oi,X=$.c,we=N.c;if(!V||!ne){if(!X||!we)return X?(N.s=-j,N):new D(we?$:NaN);if(!X[0]||!we[0])return we[0]?(N.s=-j,N):new D(X[0]?$:a==3?-0:0)}if(V=Hu(V),ne=Hu(ne),X=X.slice(),U=V-ne){for((B=U<0)?(U=-U,R=X):(ne=V,R=we),R.reverse(),j=U;j--;R.push(0));R.reverse()}else for(I=(B=(U=X.length)<(j=we.length))?U:j,U=j=0;j<I;j++)if(X[j]!=we[j]){B=X[j]<we[j];break}if(B&&(R=X,X=we,we=R,N.s=-N.s),j=(I=we.length)-(K=X.length),j>0)for(;j--;X[K++]=0);for(j=uc-1;I>U;){if(X[--I]<we[I]){for(K=I;K&&!X[--K];X[K]=j);--X[K],X[I]+=uc}X[I]-=we[I]}for(;X[0]==0;X.splice(0,1),--ne);return X[0]?te(N,X,ne):(N.s=a==3?-1:1,N.c=[N.e=0],N)},i.modulo=i.mod=function(N,j){var K,I,R=this;return N=new D(N,j),!R.c||!N.s||N.c&&!N.c[0]?new D(NaN):!N.c||R.c&&!R.c[0]?new D(R):(g==9?(I=N.s,N.s=1,K=e(R,N,0,3),N.s=I,K.s*=I):K=e(R,N,0,g),N=R.minus(K.times(N)),!N.c[0]&&g==1&&(N.s=R.s),N)},i.multipliedBy=i.times=function(N,j){var K,I,R,B,$,U,V,ne,X,we,ve,Ze,ie,H,Z,me=this,fe=me.c,de=(N=new D(N,j)).c;if(!fe||!de||!fe[0]||!de[0])return!me.s||!N.s||fe&&!fe[0]&&!de||de&&!de[0]&&!fe?N.c=N.e=N.s=null:(N.s*=me.s,!fe||!de?N.c=N.e=null:(N.c=[0],N.e=0)),N;for(I=Hu(me.e/oi)+Hu(N.e/oi),N.s*=me.s,V=fe.length,we=de.length,V<we&&(ie=fe,fe=de,de=ie,R=V,V=we,we=R),R=V+we,ie=[];R--;ie.push(0));for(H=uc,Z=Zd,R=we;--R>=0;){for(K=0,ve=de[R]%Z,Ze=de[R]/Z|0,$=V,B=R+$;B>R;)ne=fe[--$]%Z,X=fe[$]/Z|0,U=Ze*ne+X*ve,ne=ve*ne+U%Z*Z+ie[B]+K,K=(ne/H|0)+(U/Z|0)+Ze*X,ie[B--]=ne%H;ie[B]=K}return K?++I:ie.splice(0,1),te(N,ie,I)},i.negated=function(){var N=new D(this);return N.s=-N.s||null,N},i.plus=function(N,j){var K,I=this,R=I.s;if(N=new D(N,j),j=N.s,!R||!j)return new D(NaN);if(R!=j)return N.s=-j,I.minus(N);var B=I.e/oi,$=N.e/oi,U=I.c,V=N.c;if(!B||!$){if(!U||!V)return new D(R/0);if(!U[0]||!V[0])return V[0]?N:new D(U[0]?I:R*0)}if(B=Hu(B),$=Hu($),U=U.slice(),R=B-$){for(R>0?($=B,K=V):(R=-R,K=U),K.reverse();R--;K.push(0));K.reverse()}for(R=U.length,j=V.length,R-j<0&&(K=V,V=U,U=K,j=R),R=0;j;)R=(U[--j]=U[j]+V[j]+R)/uc|0,U[j]=uc===U[j]?0:U[j]%uc;return R&&(U=[R].concat(U),++$),te(N,U,$)},i.precision=i.sd=function(N,j){var K,I,R,B=this;if(N!=null&&N!==!!N)return co(N,1,yu),j==null?j=a:co(j,0,8),ge(new D(B),N,j);if(!(K=B.c))return null;if(R=K.length-1,I=R*oi+1,R=K[R]){for(;R%10==0;R/=10,I--);for(R=K[0];R>=10;R/=10,I++);}return N&&B.e+1>I&&(I=B.e+1),I},i.shiftedBy=function(N){return co(N,-9007199254740991,a5),this.times("1e"+N)},i.squareRoot=i.sqrt=function(){var N,j,K,I,R,B=this,$=B.c,U=B.s,V=B.e,ne=o+4,X=new D("0.5");if(U!==1||!$||!$[0])return new D(!U||U<0&&(!$||$[0])?NaN:$?B:1/0);if(U=Math.sqrt(+pe(B)),U==0||U==1/0?(j=zu($),(j.length+V)%2==0&&(j+="0"),U=Math.sqrt(+j),V=Hu((V+1)/2)-(V<0||V%2),U==1/0?j="5e"+V:(j=U.toExponential(),j=j.slice(0,j.indexOf("e")+1)+V),K=new D(j)):K=new D(U+""),K.c[0]){for(V=K.e,U=V+ne,U<3&&(U=0);;)if(R=K,K=X.times(R.plus(e(B,R,ne,1))),zu(R.c).slice(0,U)===(j=zu(K.c)).slice(0,U))if(K.e<V&&--U,j=j.slice(U-3,U+1),j=="9999"||!I&&j=="4999"){if(!I&&(ge(R,R.e+o+2,0),R.times(R).eq(B))){K=R;break}ne+=4,U+=4,I=1}else{(!+j||!+j.slice(1)&&j.charAt(0)=="5")&&(ge(K,K.e+o+2,1),N=!K.times(K).eq(B));break}}return ge(K,K.e+o+1,a,N)},i.toExponential=function(N,j){return N!=null&&(co(N,0,yu),N++),z(this,N,j,1)},i.toFixed=function(N,j){return N!=null&&(co(N,0,yu),N=N+this.e+1),z(this,N,j)},i.toFormat=function(N,j,K){var I,R=this;if(K==null)N!=null&&j&&typeof j=="object"?(K=j,j=null):N&&typeof N=="object"?(K=N,N=j=null):K=E;else if(typeof K!="object")throw Error(Zl+"Argument not an object: "+K);if(I=R.toFixed(N,j),R.c){var B,$=I.split("."),U=+K.groupSize,V=+K.secondaryGroupSize,ne=K.groupSeparator||"",X=$[0],we=$[1],ve=R.s<0,Ze=ve?X.slice(1):X,ie=Ze.length;if(V&&(B=U,U=V,V=B,ie-=B),U>0&&ie>0){for(B=ie%U||U,X=Ze.substr(0,B);B<ie;B+=U)X+=ne+Ze.substr(B,U);V>0&&(X+=ne+Ze.slice(B)),ve&&(X="-"+X)}I=we?X+(K.decimalSeparator||"")+((V=+K.fractionGroupSize)?we.replace(new RegExp("\\d{"+V+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):we):X}return(K.prefix||"")+I+(K.suffix||"")},i.toFraction=function(N){var j,K,I,R,B,$,U,V,ne,X,we,ve,Ze=this,ie=Ze.c;if(N!=null&&(U=new D(N),!U.isInteger()&&(U.c||U.s!==1)||U.lt(s)))throw Error(Zl+"Argument "+(U.isInteger()?"out of range: ":"not an integer: ")+pe(U));if(!ie)return new D(Ze);for(j=new D(s),ne=K=new D(s),I=V=new D(s),ve=zu(ie),B=j.e=ve.length-Ze.e-1,j.c[0]=Q1[($=B%oi)<0?oi+$:$],N=!N||U.comparedTo(j)>0?B>0?j:ne:U,$=p,p=1/0,U=new D(ve),V.c[0]=0;X=e(U,j,0,1),R=K.plus(X.times(I)),R.comparedTo(N)!=1;)K=I,I=R,ne=V.plus(X.times(R=ne)),V=R,j=U.minus(X.times(R=j)),U=R;return R=e(N.minus(K),I,0,1),V=V.plus(R.times(ne)),K=K.plus(R.times(I)),V.s=ne.s=Ze.s,B=B*2,we=e(ne,I,B,a).minus(Ze).abs().comparedTo(e(V,K,B,a).minus(Ze).abs())<1?[ne,I]:[V,K],p=$,we},i.toNumber=function(){return+pe(this)},i.toPrecision=function(N,j){return N!=null&&co(N,1,yu),z(this,N,j,2)},i.toString=function(N){var j,K=this,I=K.s,R=K.e;return R===null?I?(j="Infinity",I<0&&(j="-"+j)):j="NaN":(N==null?j=R<=l||R>=c?_0(zu(K.c),R):bd(zu(K.c),R,"0"):N===10&&A?(K=ge(new D(K),o+R+1,a),j=bd(zu(K.c),K.e,"0")):(co(N,2,k.length,"Base"),j=n(bd(zu(K.c),R,"0"),10,N,I,!0)),I<0&&K.c[0]&&(j="-"+j)),j},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&D.set(t),D}function Hu(t){var e=t|0;return t>0||t===e?e:e-1}function zu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=oi-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Uh(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function co(t,e,n,r){if(t<e||t>n||t!==Uu(t))throw Error(Zl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function b0(t){var e=t.c.length-1;return Hu(t.e/oi)==e&&t.c[e]%2!=0}function _0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function bd(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=PE(),Zj=class{constructor(t){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=t}},tg=class extends Zj{constructor(t){super(t)}},Xj=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},LL,SL,Vv=class bg extends Xj{constructor(n,r){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,LL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new tg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new tg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new bg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new bg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new bg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new bg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new tg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new tg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new tg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new Qj(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(SL=Symbol.iterator,LL=Symbol.toStringTag,SL)](){return new Jj(this.wrap())}},ME=class{constructor(t){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},Jj=class extends ME{getValue(t){return t.key}},Qj=class extends ME{getValue(t){return[t.key,t.key]}},kE=t=>()=>t,mb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):kE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function ez(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):kE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var tz=t=>t,nz=t=>{if(t){const e=new Vv(mb(t)),n=new Vv(mb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return tz},vb=t=>({set:e=>{Rd=vb(e)},reset:()=>vb(t),compare:mb(t),snap:nz(t),orient:ez(t)}),Rd=vb(),ng=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),yb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},nv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),AE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Uv=t=>AE(t,t).sqrt(),rz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return nv(i,r).div(Uv(i)).div(Uv(r))},iz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return AE(i,r).div(Uv(i)).div(Uv(r))},l5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},u5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},sz=(t,e,n,r)=>{if(e.x.isZero())return u5(n,r,t.x);if(r.x.isZero())return u5(t,e,n.x);if(e.y.isZero())return l5(n,r,t.y);if(r.y.isZero())return l5(t,e,n.y);const i=nv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=nv(s,e).div(i),a=nv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),h=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),g=h.plus(p).div(2);return{x:v,y:g}},Hc=class TE{constructor(e,n){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=TE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Hv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:rz(this.point,e.point,s.point),cosine:iz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},oz=class bb{constructor(e){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],h=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==h;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,k=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${k.x}, ${k.y}].`)}if(v.length===1){l=v[0].otherSE;break}let g=null;for(let E=0,k=p.length;E<k;E++)if(p[E].point===a.point){g=E;break}if(g!==null){const E=p.splice(g)[0],k=c.splice(E.index);k.unshift(k[0].otherSE),n.push(new bb(k.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new bb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,h=this.events.length-1;c<h;c++){const p=this.events[c].point,v=this.events[c+1].point;Rd.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rd.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},c5=class{constructor(t){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},az=class{constructor(t){Je(this,"rings");Je(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new c5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new c5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},lz=class{constructor(t,e=Hv.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=t,this.tree=new Vv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,h=l.length;c<h;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},uz=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(t,e,n){_g.type=t;const r=[new h5(e,!0)];for(let c=0,h=n.length;c<h;c++)r.push(new h5(n[c],!1));if(_g.numMultiPolys=r.length,_g.type==="difference"){const c=r[0];let h=1;for(;h<r.length;)yb(r[h].bbox,c.bbox)!==null?h++:r.splice(h,1)}if(_g.type==="intersection")for(let c=0,h=r.length;c<h;c++){const p=r[c];for(let v=c+1,g=r.length;v<g;v++)if(yb(p.bbox,r[v].bbox)===null)return[]}const i=new Vv(Hc.compare);for(let c=0,h=r.length;c<h;c++){const p=r[c].getSweepEvents();for(let v=0,g=p.length;v<g;v++)i.add(p[v])}const s=new lz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let h=0,p=c.length;h<p;h++){const v=c[h];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rd.reset();const a=oz.factory(s.segments);return new az(a).getGeom()}},_g=new uz,_b=_g,cz=0,Hv=class rv{constructor(e,n,r,i){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++cz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,h=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(h))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(h))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),g=h.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&g.isLessThan(x))return 1;if(p.isLessThan(v)&&g.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(h)?-1:c.isGreaterThan(h)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new rv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rd.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=yb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=ng(n,a)&&this.comparePoint(a)===0,h=ng(r,s)&&e.comparePoint(s)===0,p=ng(n,l)&&this.comparePoint(l)===0,v=ng(r,o)&&e.comparePoint(o)===0;if(h&&c)return v&&!p?o:!v&&p?l:null;if(h)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const g=sz(s,this.vector(),a,e.vector());return g===null||!ng(i,g)?null:Rd.snap(g)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new rv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=rv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],h=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(h)):r[p]+=h}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],h=c.poly;if(o.indexOf(h)===-1)if(c.isExterior)s.push(h);else{o.indexOf(h)===-1&&o.push(h);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(_b.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===_b.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},d5=class{constructor(t,e,n){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rd.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rd.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Hv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Hv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},dz=class{constructor(t,e){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new d5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new d5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},h5=class{constructor(t,e){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new dz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},hz=(t,...e)=>_b.run("intersection",t,e);Rd.set;function fz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function pz(t,e={}){const n=[];if(fz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=hz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Wu(r[0],e.properties):Ij(r,e.properties)}var gz=pz;function DE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,h=0,p=0,v,g=t.type,x=g==="FeatureCollection",E=g==="Feature",k=x?t.features.length:1,A=0;A<k;A++){c=x?t.features[A].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var z=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(h=0,te){case null:break;case"Point":if(e(l,p,A,z,Y)===!1)return!1;p++,z++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,A,z,Y)===!1)return!1;p++,te==="MultiPoint"&&z++}te==="LineString"&&z++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-h;i++){if(e(l[r][i],p,A,z,Y)===!1)return!1;p++}te==="MultiLineString"&&z++,te==="Polygon"&&Y++}te==="Polygon"&&z++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-h;s++){if(e(l[r][i][s],p,A,z,Y)===!1)return!1;p++}Y++}z++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(DE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function mz(t,e){var n,r,i,s,o,a,l,c,h,p,v=0,g=t.type==="FeatureCollection",x=t.type==="Feature",E=g?t.features.length:1;for(n=0;n<E;n++){for(a=g?t.features[n].geometry:x?t.geometry:t,c=g?t.features[n].properties:x?t.properties:{},h=g?t.features[n].bbox:x?t.bbox:void 0,p=g?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,h,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,h,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,h,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function vz(t,e){mz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Mp(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var h=n.coordinates[c],p={type:l,coordinates:h};if(e(Mp(p,i),r,c)===!1)return!1}})}function yz(t,e){vz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,h=0;if(DE(n,function(p,v,g,x,E){if(a===void 0||r>l||x>c||E>h){a=p,l=r,c=x,h=E,s=0;return}var k=mc([a,p],n.properties);if(e(k,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function bz(t,e,n){var r=n,i=!1;return yz(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Wv(t,e={}){return bz(t,(n,r)=>{const i=r.geometry.coordinates;return n+F_(i[0],i[1],e)},0)}var Hh=Wv;class uh extends Xn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");this.properties=An.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){An.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(A=>[A.lng,A.lat]);l.push(l[0]);const c=Wu([l]),h=CE(c),p=Wv(mc([...l]),{units:"meters"}),v=Ug(c),g=Xn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",k=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(A=>({lat:A.lat,lng:A.lng})),surface:h,perimeter:p,center:{lat:g.lat,lng:g.lng},vertices:a.length,category:E,accessLevel:k,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){An.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return An.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return An.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Xn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){An.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Xn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){An.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Xn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return An.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Xn.latLng(s.lat+n.lat,s.lng+n.lng));return Xn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return An.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Xn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Xn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Wu([i]),o=Ug(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calcul invalide");return Xn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centrode avec turf.js, utilisation de la mthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Xn.LatLng(0,0)):new Xn.LatLng(i/o,s/o)}})}getSegmentLengths(){return An.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class ua extends Xn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Je(this,"properties");Je(this,"cachedProperties",{});Je(this,"needsUpdate",!0);this.properties=An.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){An.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=mc(r),h=Wv(c,{units:"meters"});let p;if(n.length===2)p=Xn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const k=r5(c,h/2,{units:"meters"});p=Xn.latLng(k.geometry.coordinates[1],k.geometry.coordinates[0])}const v=10,g=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:h,coordinates:n.map(k=>({lat:k.lat,lng:k.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:h*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:g}},this.cachedProperties.length=h,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){An.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){An.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return An.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides dtects pour le segment",i);continue}r.push(Xn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return An.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Xn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){An.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){An.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Xn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return An.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Xn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return An.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Xn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=mc(r),s=Wv(i,{units:"meters"}),o=r5(i,s/2,{units:"meters"}),a=Xn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Xn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return An.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return An.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return An.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return An.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}var Gv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Gv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,h="__lodash_placeholder__",p=1,v=2,g=4,x=1,E=2,k=1,A=2,D=4,z=8,Y=16,te=32,ge=64,pe=128,N=256,j=512,K=30,I="...",R=800,B=16,$=1,U=2,V=3,ne=1/0,X=9007199254740991,we=17976931348623157e292,ve=NaN,Ze=4294967295,ie=Ze-1,H=Ze>>>1,Z=[["ary",pe],["bind",k],["bindKey",A],["curry",z],["curryRight",Y],["flip",j],["partial",te],["partialRight",ge],["rearg",N]],me="[object Arguments]",fe="[object Array]",de="[object AsyncFunction]",ce="[object Boolean]",J="[object Date]",Re="[object DOMException]",De="[object Error]",et="[object Function]",he="[object GeneratorFunction]",Q="[object Map]",se="[object Number]",ue="[object Null]",ze="[object Object]",Ce="[object Promise]",ye="[object Proxy]",Ve="[object RegExp]",Ye="[object Set]",Ke="[object String]",_t="[object Symbol]",Ge="[object Undefined]",ft="[object WeakMap]",Ut="[object WeakSet]",tn="[object ArrayBuffer]",yn="[object DataView]",Qe="[object Float32Array]",at="[object Float64Array]",it="[object Int8Array]",$t="[object Int16Array]",Zt="[object Int32Array]",On="[object Uint8Array]",mn="[object Uint8ClampedArray]",Tn="[object Uint16Array]",Qn="[object Uint32Array]",Qt=/\b__p \+= '';/g,xn=/\b(__p \+=) '' \+/g,Cn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,er=/&(?:amp|lt|gt|quot|#39);/g,vr=/[&<>"']/g,xr=RegExp(er.source),ur=RegExp(vr.source),qr=/<%-([\s\S]+?)%>/g,Fs=/<%([\s\S]+?)%>/g,Ai=/<%=([\s\S]+?)%>/g,Oo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ts=/^\w*$/,tr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ds=/[\\^$.*+?()[\]{}|]/g,No=RegExp(Ds.source),lt=/^\s+/,Be=/\s/,dt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ln=/\{\n\/\* \[wrapped with (.+)\] \*/,Vn=/,? & /,En=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/[()=,{}\[\]\/\s]/,Hn=/\\(\\)?/g,St=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qt=/\w*$/,Un=/^[-+]0x[0-9a-f]+$/i,dr=/^0b[01]+$/i,Lr=/^\[object .+?Constructor\]$/,pn=/^0o[0-7]+$/i,rn=/^(?:0|[1-9]\d*)$/,zr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,zi=/['\n\r\u2028\u2029\\]/g,Qr="\\ud800-\\udfff",_r="\\u0300-\\u036f",Ar="\\ufe20-\\ufe2f",hi="\\u20d0-\\u20ff",Rr=_r+Ar+hi,an="\\u2700-\\u27bf",Ni="a-z\\xdf-\\xf6\\xf8-\\xff",vi="\\xac\\xb1\\xd7\\xf7",Ki="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ei="\\u2000-\\u206f",hr=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Dn="A-Z\\xc0-\\xd6\\xd8-\\xde",Sr="\\ufe0e\\ufe0f",ws=vi+Ki+ei+hr,mo="[']",cr="["+Qr+"]",Sn="["+ws+"]",sn="["+Rr+"]",yi="\\d+",ti="["+an+"]",bi="["+Ni+"]",Zs="[^"+Qr+ws+yi+an+Ni+Dn+"]",vo="\\ud83c[\\udffb-\\udfff]",js="(?:"+sn+"|"+vo+")",yr="[^"+Qr+"]",Xs="(?:\\ud83c[\\udde6-\\uddff]){2}",Vi="[\\ud800-\\udbff][\\udc00-\\udfff]",Gi="["+Dn+"]",fi="\\u200d",Mn="(?:"+bi+"|"+Zs+")",vn="(?:"+Gi+"|"+Zs+")",Yr="(?:"+mo+"(?:d|ll|m|re|s|t|ve))?",xs="(?:"+mo+"(?:D|LL|M|RE|S|T|VE))?",Js=js+"?",qa="["+Sr+"]?",ds="(?:"+fi+"(?:"+[yr,Xs,Vi].join("|")+")"+qa+Js+")*",Ma="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",bl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$n=qa+Js+ds,Cr="(?:"+[ti,Xs,Vi].join("|")+")"+$n,is="(?:"+[yr+sn+"?",sn,Xs,Vi,cr].join("|")+")",Tr=RegExp(mo,"g"),Zo=RegExp(sn,"g"),ka=RegExp(vo+"(?="+vo+")|"+is+$n,"g"),Aa=RegExp([Gi+"?"+bi+"+"+Yr+"(?="+[Sn,Gi,"$"].join("|")+")",vn+"+"+xs+"(?="+[Sn,Gi+Mn,"$"].join("|")+")",Gi+"?"+Mn+"+"+Yr,Gi+"+"+xs,bl,Ma,yi,Cr].join("|"),"g"),Xo=RegExp("["+fi+Qr+Rr+Sr+"]"),sa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_l=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ta=-1,Pr={};Pr[Qe]=Pr[at]=Pr[it]=Pr[$t]=Pr[Zt]=Pr[On]=Pr[mn]=Pr[Tn]=Pr[Qn]=!0,Pr[me]=Pr[fe]=Pr[tn]=Pr[ce]=Pr[yn]=Pr[J]=Pr[De]=Pr[et]=Pr[Q]=Pr[se]=Pr[ze]=Pr[Ve]=Pr[Ye]=Pr[Ke]=Pr[ft]=!1;var Kn={};Kn[me]=Kn[fe]=Kn[tn]=Kn[yn]=Kn[ce]=Kn[J]=Kn[Qe]=Kn[at]=Kn[it]=Kn[$t]=Kn[Zt]=Kn[Q]=Kn[se]=Kn[ze]=Kn[Ve]=Kn[Ye]=Kn[Ke]=Kn[_t]=Kn[On]=Kn[mn]=Kn[Tn]=Kn[Qn]=!0,Kn[De]=Kn[et]=Kn[ft]=!1;var Qs={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},yo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},au={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ku={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Il=parseFloat,lu=parseInt,Au=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea,ni=typeof self=="object"&&self&&self.Object===Object&&self,fs=Au||ni||Function("return this")(),gr=e&&!e.nodeType&&e,ps=gr&&!0&&t&&!t.nodeType&&t,Bl=ps&&ps.exports===gr,Ya=Bl&&Au.process,Zi=function(){try{var Lt=ps&&ps.require&&ps.require("util").types;return Lt||Ya&&Ya.binding&&Ya.binding("util")}catch{}}(),Tu=Zi&&Zi.isArrayBuffer,Da=Zi&&Zi.isDate,uu=Zi&&Zi.isMap,cu=Zi&&Zi.isRegExp,oa=Zi&&Zi.isSet,du=Zi&&Zi.isTypedArray;function Li(Lt,Yt,Nt){switch(Nt.length){case 0:return Lt.call(Yt);case 1:return Lt.call(Yt,Nt[0]);case 2:return Lt.call(Yt,Nt[0],Nt[1]);case 3:return Lt.call(Yt,Nt[0],Nt[1],Nt[2])}return Lt.apply(Yt,Nt)}function kc(Lt,Yt,Nt,Bn){for(var nr=-1,Mr=Lt==null?0:Lt.length;++nr<Mr;){var Xi=Lt[nr];Yt(Bn,Xi,Nt(Xi),Lt)}return Bn}function zs(Lt,Yt){for(var Nt=-1,Bn=Lt==null?0:Lt.length;++Nt<Bn&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function ma(Lt,Yt){for(var Nt=Lt==null?0:Lt.length;Nt--&&Yt(Lt[Nt],Nt,Lt)!==!1;);return Lt}function hu(Lt,Yt){for(var Nt=-1,Bn=Lt==null?0:Lt.length;++Nt<Bn;)if(!Yt(Lt[Nt],Nt,Lt))return!1;return!0}function va(Lt,Yt){for(var Nt=-1,Bn=Lt==null?0:Lt.length,nr=0,Mr=[];++Nt<Bn;){var Xi=Lt[Nt];Yt(Xi,Nt,Lt)&&(Mr[nr++]=Xi)}return Mr}function Rl(Lt,Yt){var Nt=Lt==null?0:Lt.length;return!!Nt&&hn(Lt,Yt,0)>-1}function Fl(Lt,Yt,Nt){for(var Bn=-1,nr=Lt==null?0:Lt.length;++Bn<nr;)if(Nt(Yt,Lt[Bn]))return!0;return!1}function Si(Lt,Yt){for(var Nt=-1,Bn=Lt==null?0:Lt.length,nr=Array(Bn);++Nt<Bn;)nr[Nt]=Yt(Lt[Nt],Nt,Lt);return nr}function Jo(Lt,Yt){for(var Nt=-1,Bn=Yt.length,nr=Lt.length;++Nt<Bn;)Lt[nr+Nt]=Yt[Nt];return Lt}function Ka(Lt,Yt,Nt,Bn){var nr=-1,Mr=Lt==null?0:Lt.length;for(Bn&&Mr&&(Nt=Lt[++nr]);++nr<Mr;)Nt=Yt(Nt,Lt[nr],nr,Lt);return Nt}function gs(Lt,Yt,Nt,Bn){var nr=Lt==null?0:Lt.length;for(Bn&&nr&&(Nt=Lt[--nr]);nr--;)Nt=Yt(Nt,Lt[nr],nr,Lt);return Nt}function F(Lt,Yt){for(var Nt=-1,Bn=Lt==null?0:Lt.length;++Nt<Bn;)if(Yt(Lt[Nt],Nt,Lt))return!0;return!1}var xe=Er("length");function tt(Lt){return Lt.split("")}function pt(Lt){return Lt.match(En)||[]}function Mt(Lt,Yt,Nt){var Bn;return Nt(Lt,function(nr,Mr,Xi){if(Yt(nr,Mr,Xi))return Bn=Mr,!1}),Bn}function Ht(Lt,Yt,Nt,Bn){for(var nr=Lt.length,Mr=Nt+(Bn?1:-1);Bn?Mr--:++Mr<nr;)if(Yt(Lt[Mr],Mr,Lt))return Mr;return-1}function hn(Lt,Yt,Nt){return Yt===Yt?Os(Lt,Yt,Nt):Ht(Lt,Wn,Nt)}function Fn(Lt,Yt,Nt,Bn){for(var nr=Nt-1,Mr=Lt.length;++nr<Mr;)if(Bn(Lt[nr],Yt))return nr;return-1}function Wn(Lt){return Lt!==Lt}function fr(Lt,Yt){var Nt=Lt==null?0:Lt.length;return Nt?Ci(Lt,Yt)/Nt:ve}function Er(Lt){return function(Yt){return Yt==null?n:Yt[Lt]}}function Ur(Lt){return function(Yt){return Lt==null?n:Lt[Yt]}}function qi(Lt,Yt,Nt,Bn,nr){return nr(Lt,function(Mr,Xi,Ei){Nt=Bn?(Bn=!1,Mr):Yt(Nt,Mr,Xi,Ei)}),Nt}function gi(Lt,Yt){var Nt=Lt.length;for(Lt.sort(Yt);Nt--;)Lt[Nt]=Lt[Nt].value;return Lt}function Ci(Lt,Yt){for(var Nt,Bn=-1,nr=Lt.length;++Bn<nr;){var Mr=Yt(Lt[Bn]);Mr!==n&&(Nt=Nt===n?Mr:Nt+Mr)}return Nt}function ms(Lt,Yt){for(var Nt=-1,Bn=Array(Lt);++Nt<Lt;)Bn[Nt]=Yt(Nt);return Bn}function Ls(Lt,Yt){return Si(Yt,function(Nt){return[Nt,Lt[Nt]]})}function Qo(Lt){return Lt&&Lt.slice(0,Xa(Lt)+1).replace(lt,"")}function Hr(Lt){return function(Yt){return Lt(Yt)}}function eo(Lt,Yt){return Si(Yt,function(Nt){return Lt[Nt]})}function jl(Lt,Yt){return Lt.has(Yt)}function bo(Lt,Yt){for(var Nt=-1,Bn=Lt.length;++Nt<Bn&&hn(Yt,Lt[Nt],0)>-1;);return Nt}function Du(Lt,Yt){for(var Nt=Lt.length;Nt--&&hn(Yt,Lt[Nt],0)>-1;);return Nt}function Oa(Lt,Yt){for(var Nt=Lt.length,Bn=0;Nt--;)Lt[Nt]===Yt&&++Bn;return Bn}var Qu=Ur(Qs),wl=Ur(yo);function xl(Lt){return"\\"+ku[Lt]}function Ss(Lt,Yt){return Lt==null?n:Lt[Yt]}function Na(Lt){return Xo.test(Lt)}function ea(Lt){return sa.test(Lt)}function Io(Lt){for(var Yt,Nt=[];!(Yt=Lt.next()).done;)Nt.push(Yt.value);return Nt}function zl(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Bn,nr){Nt[++Yt]=[nr,Bn]}),Nt}function to(Lt,Yt){return function(Nt){return Lt(Yt(Nt))}}function _o(Lt,Yt){for(var Nt=-1,Bn=Lt.length,nr=0,Mr=[];++Nt<Bn;){var Xi=Lt[Nt];(Xi===Yt||Xi===h)&&(Lt[Nt]=h,Mr[nr++]=Nt)}return Mr}function wo(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Bn){Nt[++Yt]=Bn}),Nt}function Ac(Lt){var Yt=-1,Nt=Array(Lt.size);return Lt.forEach(function(Bn){Nt[++Yt]=[Bn,Bn]}),Nt}function Os(Lt,Yt,Nt){for(var Bn=Nt-1,nr=Lt.length;++Bn<nr;)if(Lt[Bn]===Yt)return Bn;return-1}function Za(Lt,Yt,Nt){for(var Bn=Nt+1;Bn--;)if(Lt[Bn]===Yt)return Bn;return Bn}function no(Lt){return Na(Lt)?io(Lt):xe(Lt)}function ro(Lt){return Na(Lt)?$s(Lt):tt(Lt)}function Xa(Lt){for(var Yt=Lt.length;Yt--&&Be.test(Lt.charAt(Yt)););return Yt}var Ja=Ur(au);function io(Lt){for(var Yt=ka.lastIndex=0;ka.test(Lt);)++Yt;return Yt}function $s(Lt){return Lt.match(ka)||[]}function Ia(Lt){return Lt.match(Aa)||[]}var ta=function Lt(Yt){Yt=Yt==null?fs:so.defaults(fs.Object(),Yt,so.pick(fs,_l));var Nt=Yt.Array,Bn=Yt.Date,nr=Yt.Error,Mr=Yt.Function,Xi=Yt.Math,Ei=Yt.Object,fu=Yt.RegExp,xo=Yt.String,Ji=Yt.TypeError,Ba=Nt.prototype,Qa=Mr.prototype,Ra=Ei.prototype,Fa=Yt["__core-js_shared__"],ja=Qa.toString,ri=Ra.hasOwnProperty,ya=0,Vs=function(){var f=/[^.]+$/.exec(Fa&&Fa.keys&&Fa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Pi=Ra.toString,Ii=ja.call(Ei),vs=fs._,Ui=fu("^"+ja.call(ri).replace(Ds,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),na=Bl?Yt.Buffer:n,Bo=Yt.Symbol,aa=Yt.Uint8Array,ec=na?na.allocUnsafe:n,za=to(Ei.getPrototypeOf,Ei),Cs=Ei.create,$i=Ra.propertyIsEnumerable,oo=Ba.splice,Ro=Bo?Bo.isConcatSpreadable:n,wr=Bo?Bo.iterator:n,el=Bo?Bo.toStringTag:n,tl=function(){try{var f=Fh(Ei,"defineProperty");return f({},"",{}),f}catch{}}(),ba=Yt.clearTimeout!==fs.clearTimeout&&Yt.clearTimeout,Lo=Bn&&Bn.now!==fs.Date.now&&Bn.now,sd=Yt.setTimeout!==fs.setTimeout&&Yt.setTimeout,Us=Xi.ceil,Hs=Xi.floor,_a=Ei.getOwnPropertySymbols,u=na?na.isBuffer:n,y=Yt.isFinite,P=Ba.join,G=to(Ei.keys,Ei),ae=Xi.max,Pe=Xi.min,ut=Bn.now,Ot=Yt.parseInt,Wt=Xi.random,un=Ba.reverse,jn=Fh(Yt,"DataView"),sr=Fh(Yt,"Map"),Vr=Fh(Yt,"Promise"),Es=Fh(Yt,"Set"),as=Fh(Yt,"WeakMap"),Ws=Fh(Ei,"create"),Qi=as&&new as,Fo={},od=jh(jn),$a=jh(sr),wa=jh(Vr),la=jh(Es),Th=jh(as),Ou=Bo?Bo.prototype:n,_i=Ou?Ou.valueOf:n,ao=Ou?Ou.toString:n;function Ne(f){if(So(f)&&!si(f)&&!(f instanceof Wr)){if(f instanceof Gs)return f;if(ri.call(f,"__wrapped__"))return Hw(f)}return new Gs(f)}var jo=function(){function f(){}return function(b){if(!uo(b))return{};if(Cs)return Cs(b);f.prototype=b;var O=new f;return f.prototype=n,O}}();function tc(){}function Gs(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ne.templateSettings={escape:qr,evaluate:Fs,interpolate:Ai,variable:"",imports:{_:Ne}},Ne.prototype=tc.prototype,Ne.prototype.constructor=Ne,Gs.prototype=jo(tc.prototype),Gs.prototype.constructor=Gs;function Wr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ze,this.__views__=[]}function $d(){var f=new Wr(this.__wrapped__);return f.__actions__=Vl(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=Vl(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=Vl(this.__views__),f}function Mf(){if(this.__filtered__){var f=new Wr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Vd(){var f=this.__wrapped__.value(),b=this.__dir__,O=si(f),re=b<0,Se=O?f.length:0,Ue=XM(0,Se,this.__views__),ot=Ue.start,bt=Ue.end,Dt=bt-ot,cn=re?bt:ot-1,dn=this.__iteratees__,bn=dn.length,qn=0,mr=Pe(Dt,this.__takeCount__);if(!O||!re&&Se==Dt&&mr==Dt)return Nu(f,this.__actions__);var Dr=[];e:for(;Dt--&&qn<mr;){cn+=b;for(var pi=-1,Or=f[cn];++pi<bn;){var Mi=dn[pi],Ri=Mi.iteratee,mu=Mi.type,El=Ri(Or);if(mu==U)Or=El;else if(!El){if(mu==$)continue e;break e}}Dr[qn++]=Or}return Dr}Wr.prototype=jo(tc.prototype),Wr.prototype.constructor=Wr;function Ll(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var re=f[b];this.set(re[0],re[1])}}function ad(){this.__data__=Ws?Ws(null):{},this.size=0}function Dh(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function $p(f){var b=this.__data__;if(Ws){var O=b[f];return O===l?n:O}return ri.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Ws?b[f]!==n:ri.call(b,f)}function Ud(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Ws&&b===n?l:b,this}Ll.prototype.clear=ad,Ll.prototype.delete=Dh,Ll.prototype.get=$p,Ll.prototype.has=Tc,Ll.prototype.set=Ud;function pu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var re=f[b];this.set(re[0],re[1])}}function Vp(){this.__data__=[],this.size=0}function Hd(f){var b=this.__data__,O=xt(b,f);if(O<0)return!1;var re=b.length-1;return O==re?b.pop():oo.call(b,O,1),--this.size,!0}function Wd(f){var b=this.__data__,O=xt(b,f);return O<0?n:b[O][1]}function kf(f){return xt(this.__data__,f)>-1}function Af(f,b){var O=this.__data__,re=xt(O,f);return re<0?(++this.size,O.push([f,b])):O[re][1]=b,this}pu.prototype.clear=Vp,pu.prototype.delete=Hd,pu.prototype.get=Wd,pu.prototype.has=kf,pu.prototype.set=Af;function nl(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var re=f[b];this.set(re[0],re[1])}}function Tf(){this.size=0,this.__data__={hash:new Ll,map:new(sr||pu),string:new Ll}}function Df(f){var b=Xm(this,f).delete(f);return this.size-=b?1:0,b}function Of(f){return Xm(this,f).get(f)}function w(f){return Xm(this,f).has(f)}function T(f,b){var O=Xm(this,f),re=O.size;return O.set(f,b),this.size+=O.size==re?0:1,this}nl.prototype.clear=Tf,nl.prototype.delete=Df,nl.prototype.get=Of,nl.prototype.has=w,nl.prototype.set=T;function q(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new nl;++b<O;)this.add(f[b])}function le(f){return this.__data__.set(f,l),this}function Le(f){return this.__data__.has(f)}q.prototype.add=q.prototype.push=le,q.prototype.has=Le;function Me(f){var b=this.__data__=new pu(f);this.size=b.size}function Ae(){this.__data__=new pu,this.size=0}function Oe(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function Fe(f){return this.__data__.get(f)}function Xe(f){return this.__data__.has(f)}function mt(f,b){var O=this.__data__;if(O instanceof pu){var re=O.__data__;if(!sr||re.length<i-1)return re.push([f,b]),this.size=++O.size,this;O=this.__data__=new nl(re)}return O.set(f,b),this.size=O.size,this}Me.prototype.clear=Ae,Me.prototype.delete=Oe,Me.prototype.get=Fe,Me.prototype.has=Xe,Me.prototype.set=mt;function Rt(f,b){var O=si(f),re=!O&&zh(f),Se=!O&&!re&&qd(f),Ue=!O&&!re&&!Se&&Vf(f),ot=O||re||Se||Ue,bt=ot?ms(f.length,xo):[],Dt=bt.length;for(var cn in f)(b||ri.call(f,cn))&&!(ot&&(cn=="length"||Se&&(cn=="offset"||cn=="parent")||Ue&&(cn=="buffer"||cn=="byteLength"||cn=="byteOffset")||fd(cn,Dt)))&&bt.push(cn);return bt}function Ft(f){var b=f.length;return b?f[Ih(0,b-1)]:n}function Pt(f,b){return Jm(Vl(f),or(b,0,f.length))}function Kt(f){return Jm(Vl(f))}function Gt(f,b,O){(O!==n&&!ac(f[b],O)||O===n&&!(b in f))&&Rn(f,b,O)}function vt(f,b,O){var re=f[b];(!(ri.call(f,b)&&ac(re,O))||O===n&&!(b in f))&&Rn(f,b,O)}function xt(f,b){for(var O=f.length;O--;)if(ac(f[O][0],b))return O;return-1}function nn(f,b,O,re){return W(f,function(Se,Ue,ot){b(re,Se,O(Se),ot)}),re}function fn(f,b){return f&&Nc(b,xa(b),f)}function on(f,b){return f&&Nc(b,Hl(b),f)}function Rn(f,b,O){b=="__proto__"&&tl?tl(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function Nn(f,b){for(var O=-1,re=b.length,Se=Nt(re),Ue=f==null;++O<re;)Se[O]=Ue?n:y1(f,b[O]);return Se}function or(f,b,O){return f===f&&(O!==n&&(f=f<=O?f:O),b!==n&&(f=f>=b?f:b)),f}function d(f,b,O,re,Se,Ue){var ot,bt=b&p,Dt=b&v,cn=b&g;if(O&&(ot=Se?O(f,re,Se,Ue):O(f)),ot!==n)return ot;if(!uo(f))return f;var dn=si(f);if(dn){if(ot=QM(f),!bt)return Vl(f,ot)}else{var bn=il(f),qn=bn==et||bn==he;if(qd(f))return mw(f,bt);if(bn==ze||bn==me||qn&&!Se){if(ot=Dt||qn?{}:Iw(f),!bt)return Dt?VM(f,on(ot,f)):$M(f,fn(ot,f))}else{if(!Kn[bn])return Se?f:{};ot=ek(f,bn,bt)}}Ue||(Ue=new Me);var mr=Ue.get(f);if(mr)return mr;Ue.set(f,ot),cx(f)?f.forEach(function(Or){ot.add(d(Or,b,O,Or,f,Ue))}):lx(f)&&f.forEach(function(Or,Mi){ot.set(Mi,d(Or,b,O,Mi,f,Ue))});var Dr=cn?Dt?i1:r1:Dt?Hl:xa,pi=dn?n:Dr(f);return zs(pi||f,function(Or,Mi){pi&&(Mi=Or,Or=f[Mi]),vt(ot,Mi,d(Or,b,O,Mi,f,Ue))}),ot}function m(f){var b=xa(f);return function(O){return _(O,f,b)}}function _(f,b,O){var re=O.length;if(f==null)return!re;for(f=Ei(f);re--;){var Se=O[re],Ue=b[Se],ot=f[Se];if(ot===n&&!(Se in f)||!Ue(ot))return!1}return!0}function C(f,b,O){if(typeof f!="function")throw new Ji(o);return qp(function(){f.apply(n,O)},b)}function M(f,b,O,re){var Se=-1,Ue=Rl,ot=!0,bt=f.length,Dt=[],cn=b.length;if(!bt)return Dt;O&&(b=Si(b,Hr(O))),re?(Ue=Fl,ot=!1):b.length>=i&&(Ue=jl,ot=!1,b=new q(b));e:for(;++Se<bt;){var dn=f[Se],bn=O==null?dn:O(dn);if(dn=re||dn!==0?dn:0,ot&&bn===bn){for(var qn=cn;qn--;)if(b[qn]===bn)continue e;Dt.push(dn)}else Ue(b,bn,re)||Dt.push(dn)}return Dt}var W=ww(en),ee=ww(_n,!0);function oe(f,b){var O=!0;return W(f,function(re,Se,Ue){return O=!!b(re,Se,Ue),O}),O}function be(f,b,O){for(var re=-1,Se=f.length;++re<Se;){var Ue=f[re],ot=b(Ue);if(ot!=null&&(bt===n?ot===ot&&!gu(ot):O(ot,bt)))var bt=ot,Dt=Ue}return Dt}function Ee(f,b,O,re){var Se=f.length;for(O=di(O),O<0&&(O=-O>Se?0:Se+O),re=re===n||re>Se?Se:di(re),re<0&&(re+=Se),re=O>re?0:hx(re);O<re;)f[O++]=b;return f}function rt(f,b){var O=[];return W(f,function(re,Se,Ue){b(re,Se,Ue)&&O.push(re)}),O}function qe(f,b,O,re,Se){var Ue=-1,ot=f.length;for(O||(O=nk),Se||(Se=[]);++Ue<ot;){var bt=f[Ue];b>0&&O(bt)?b>1?qe(bt,b-1,O,re,Se):Jo(Se,bt):re||(Se[Se.length]=bt)}return Se}var wt=xw(),It=xw(!0);function en(f,b){return f&&wt(f,b,xa)}function _n(f,b){return f&&It(f,b,xa)}function Pn(f,b){return va(b,function(O){return pd(f[O])})}function br(f,b){b=oc(b,f);for(var O=0,re=b.length;f!=null&&O<re;)f=f[Ic(b[O++])];return O&&O==re?f:n}function nt(f,b,O){var re=b(f);return si(f)?re:Jo(re,O(f))}function st(f){return f==null?f===n?Ge:ue:el&&el in Ei(f)?ZM(f):uk(f)}function gt(f,b){return f>b}function zt(f,b){return f!=null&&ri.call(f,b)}function Et(f,b){return f!=null&&b in Ei(f)}function Bt(f,b,O){return f>=Pe(b,O)&&f<ae(b,O)}function _e(f,b,O){for(var re=O?Fl:Rl,Se=f[0].length,Ue=f.length,ot=Ue,bt=Nt(Ue),Dt=1/0,cn=[];ot--;){var dn=f[ot];ot&&b&&(dn=Si(dn,Hr(b))),Dt=Pe(dn.length,Dt),bt[ot]=!O&&(b||Se>=120&&dn.length>=120)?new q(ot&&dn):n}dn=f[0];var bn=-1,qn=bt[0];e:for(;++bn<Se&&cn.length<Dt;){var mr=dn[bn],Dr=b?b(mr):mr;if(mr=O||mr!==0?mr:0,!(qn?jl(qn,Dr):re(cn,Dr,O))){for(ot=Ue;--ot;){var pi=bt[ot];if(!(pi?jl(pi,Dr):re(f[ot],Dr,O)))continue e}qn&&qn.push(Dr),cn.push(mr)}}return cn}function ke(f,b,O,re){return en(f,function(Se,Ue,ot){b(re,O(Se),Ue,ot)}),re}function $e(f,b,O){b=oc(b,f),f=jw(f,b);var re=f==null?f:f[Ic(Ru(b))];return re==null?n:Li(re,f,O)}function je(f){return So(f)&&st(f)==me}function He(f){return So(f)&&st(f)==tn}function We(f){return So(f)&&st(f)==J}function ct(f,b,O,re,Se){return f===b?!0:f==null||b==null||!So(f)&&!So(b)?f!==f&&b!==b:ht(f,b,O,re,ct,Se)}function ht(f,b,O,re,Se,Ue){var ot=si(f),bt=si(b),Dt=ot?fe:il(f),cn=bt?fe:il(b);Dt=Dt==me?ze:Dt,cn=cn==me?ze:cn;var dn=Dt==ze,bn=cn==ze,qn=Dt==cn;if(qn&&qd(f)){if(!qd(b))return!1;ot=!0,dn=!1}if(qn&&!dn)return Ue||(Ue=new Me),ot||Vf(f)?Dw(f,b,O,re,Se,Ue):YM(f,b,Dt,O,re,Se,Ue);if(!(O&x)){var mr=dn&&ri.call(f,"__wrapped__"),Dr=bn&&ri.call(b,"__wrapped__");if(mr||Dr){var pi=mr?f.value():f,Or=Dr?b.value():b;return Ue||(Ue=new Me),Se(pi,Or,O,re,Ue)}}return qn?(Ue||(Ue=new Me),KM(f,b,O,re,Se,Ue)):!1}function yt(f){return So(f)&&il(f)==Q}function At(f,b,O,re){var Se=O.length,Ue=Se,ot=!re;if(f==null)return!Ue;for(f=Ei(f);Se--;){var bt=O[Se];if(ot&&bt[2]?bt[1]!==f[bt[0]]:!(bt[0]in f))return!1}for(;++Se<Ue;){bt=O[Se];var Dt=bt[0],cn=f[Dt],dn=bt[1];if(ot&&bt[2]){if(cn===n&&!(Dt in f))return!1}else{var bn=new Me;if(re)var qn=re(cn,dn,Dt,f,b,bn);if(!(qn===n?ct(dn,cn,x|E,re,bn):qn))return!1}}return!0}function Tt(f){if(!uo(f)||ik(f))return!1;var b=pd(f)?Ui:Lr;return b.test(jh(f))}function ln(f){return So(f)&&st(f)==Ve}function Gn(f){return So(f)&&il(f)==Ye}function Zn(f){return So(f)&&i0(f.length)&&!!Pr[st(f)]}function ar(f){return typeof f=="function"?f:f==null?Wl:typeof f=="object"?si(f)?nc(f[0],f[1]):zo(f):Lx(f)}function wi(f){if(!Gp(f))return G(f);var b=[];for(var O in Ei(f))ri.call(f,O)&&O!="constructor"&&b.push(O);return b}function Bi(f){if(!uo(f))return lk(f);var b=Gp(f),O=[];for(var re in f)re=="constructor"&&(b||!ri.call(f,re))||O.push(re);return O}function ii(f,b){return f<b}function Hi(f,b){var O=-1,re=Ul(f)?Nt(f.length):[];return W(f,function(Se,Ue,ot){re[++O]=b(Se,Ue,ot)}),re}function zo(f){var b=o1(f);return b.length==1&&b[0][2]?Rw(b[0][0],b[0][1]):function(O){return O===f||At(O,f,b)}}function nc(f,b){return l1(f)&&Bw(b)?Rw(Ic(f),b):function(O){var re=y1(O,f);return re===n&&re===b?b1(O,f):ct(b,re,x|E)}}function Va(f,b,O,re,Se){f!==b&&wt(b,function(Ue,ot){if(Se||(Se=new Me),uo(Ue))Oh(f,b,ot,O,Va,re,Se);else{var bt=re?re(c1(f,ot),Ue,ot+"",f,b,Se):n;bt===n&&(bt=Ue),Gt(f,ot,bt)}},Hl)}function Oh(f,b,O,re,Se,Ue,ot){var bt=c1(f,O),Dt=c1(b,O),cn=ot.get(Dt);if(cn){Gt(f,O,cn);return}var dn=Ue?Ue(bt,Dt,O+"",f,b,ot):n,bn=dn===n;if(bn){var qn=si(Dt),mr=!qn&&qd(Dt),Dr=!qn&&!mr&&Vf(Dt);dn=Dt,qn||mr||Dr?si(bt)?dn=bt:$o(bt)?dn=Vl(bt):mr?(bn=!1,dn=mw(Dt,!0)):Dr?(bn=!1,dn=vw(Dt,!0)):dn=[]:Yp(Dt)||zh(Dt)?(dn=bt,zh(bt)?dn=fx(bt):(!uo(bt)||pd(bt))&&(dn=Iw(Dt))):bn=!1}bn&&(ot.set(Dt,dn),Se(dn,Dt,re,Ue,ot),ot.delete(Dt)),Gt(f,O,dn)}function Sl(f,b){var O=f.length;if(O)return b+=b<0?O:0,fd(b,O)?f[b]:n}function Dc(f,b,O){b.length?b=Si(b,function(Ue){return si(Ue)?function(ot){return br(ot,Ue.length===1?Ue[0]:Ue)}:Ue}):b=[Wl];var re=-1;b=Si(b,Hr(kr()));var Se=Hi(f,function(Ue,ot,bt){var Dt=Si(b,function(cn){return cn(Ue)});return{criteria:Dt,index:++re,value:Ue}});return gi(Se,function(Ue,ot){return zM(Ue,ot,O)})}function Ua(f,b){return lo(f,b,function(O,re){return b1(f,re)})}function lo(f,b,O){for(var re=-1,Se=b.length,Ue={};++re<Se;){var ot=b[re],bt=br(f,ot);O(bt,ot)&&ld(Ue,oc(ot,f),bt)}return Ue}function ys(f){return function(b){return br(b,f)}}function Nf(f,b,O,re){var Se=re?Fn:hn,Ue=-1,ot=b.length,bt=f;for(f===b&&(b=Vl(b)),O&&(bt=Si(f,Hr(O)));++Ue<ot;)for(var Dt=0,cn=b[Ue],dn=O?O(cn):cn;(Dt=Se(bt,dn,Dt,re))>-1;)bt!==f&&oo.call(bt,Dt,1),oo.call(f,Dt,1);return f}function Nh(f,b){for(var O=f?b.length:0,re=O-1;O--;){var Se=b[O];if(O==re||Se!==Ue){var Ue=Se;fd(Se)?oo.call(f,Se,1):ud(f,Se)}}return f}function Ih(f,b){return f+Hs(Wt()*(b-f+1))}function Bh(f,b,O,re){for(var Se=-1,Ue=ae(Us((b-f)/(O||1)),0),ot=Nt(Ue);Ue--;)ot[re?Ue:++Se]=f,f+=O;return ot}function If(f,b){var O="";if(!f||b<1||b>X)return O;do b%2&&(O+=f),b=Hs(b/2),b&&(f+=f);while(b);return O}function ci(f,b){return d1(Fw(f,b,Wl),f+"")}function Bf(f){return Ft(Uf(f))}function zm(f,b){var O=Uf(f);return Jm(O,or(b,0,O.length))}function ld(f,b,O,re){if(!uo(f))return f;b=oc(b,f);for(var Se=-1,Ue=b.length,ot=Ue-1,bt=f;bt!=null&&++Se<Ue;){var Dt=Ic(b[Se]),cn=O;if(Dt==="__proto__"||Dt==="constructor"||Dt==="prototype")return f;if(Se!=ot){var dn=bt[Dt];cn=re?re(dn,Dt,bt):n,cn===n&&(cn=uo(dn)?dn:fd(b[Se+1])?[]:{})}vt(bt,Dt,cn),bt=bt[Dt]}return f}var rc=Qi?function(f,b){return Qi.set(f,b),f}:Wl,$m=tl?function(f,b){return tl(f,"toString",{configurable:!0,enumerable:!1,value:w1(b),writable:!0})}:Wl;function Vm(f){return Jm(Uf(f))}function $l(f,b,O){var re=-1,Se=f.length;b<0&&(b=-b>Se?0:Se+b),O=O>Se?Se:O,O<0&&(O+=Se),Se=b>O?0:O-b>>>0,b>>>=0;for(var Ue=Nt(Se);++re<Se;)Ue[re]=f[re+b];return Ue}function Um(f,b){var O;return W(f,function(re,Se,Ue){return O=b(re,Se,Ue),!O}),!!O}function ic(f,b,O){var re=0,Se=f==null?re:f.length;if(typeof b=="number"&&b===b&&Se<=H){for(;re<Se;){var Ue=re+Se>>>1,ot=f[Ue];ot!==null&&!gu(ot)&&(O?ot<=b:ot<b)?re=Ue+1:Se=Ue}return Se}return Up(f,b,Wl,O)}function Up(f,b,O,re){var Se=0,Ue=f==null?0:f.length;if(Ue===0)return 0;b=O(b);for(var ot=b!==b,bt=b===null,Dt=gu(b),cn=b===n;Se<Ue;){var dn=Hs((Se+Ue)/2),bn=O(f[dn]),qn=bn!==n,mr=bn===null,Dr=bn===bn,pi=gu(bn);if(ot)var Or=re||Dr;else cn?Or=Dr&&(re||qn):bt?Or=Dr&&qn&&(re||!mr):Dt?Or=Dr&&qn&&!mr&&(re||!pi):mr||pi?Or=!1:Or=re?bn<=b:bn<b;Or?Se=dn+1:Ue=dn}return Pe(Ue,ie)}function Hp(f,b){for(var O=-1,re=f.length,Se=0,Ue=[];++O<re;){var ot=f[O],bt=b?b(ot):ot;if(!O||!ac(bt,Dt)){var Dt=bt;Ue[Se++]=ot===0?0:ot}}return Ue}function Hm(f){return typeof f=="number"?f:gu(f)?ve:+f}function rl(f){if(typeof f=="string")return f;if(si(f))return Si(f,rl)+"";if(gu(f))return ao?ao.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Oc(f,b,O){var re=-1,Se=Rl,Ue=f.length,ot=!0,bt=[],Dt=bt;if(O)ot=!1,Se=Fl;else if(Ue>=i){var cn=b?null:GM(f);if(cn)return wo(cn);ot=!1,Se=jl,Dt=new q}else Dt=b?[]:bt;e:for(;++re<Ue;){var dn=f[re],bn=b?b(dn):dn;if(dn=O||dn!==0?dn:0,ot&&bn===bn){for(var qn=Dt.length;qn--;)if(Dt[qn]===bn)continue e;b&&Dt.push(bn),bt.push(dn)}else Se(Dt,bn,O)||(Dt!==bt&&Dt.push(bn),bt.push(dn))}return bt}function ud(f,b){return b=oc(b,f),f=jw(f,b),f==null||delete f[Ic(Ru(b))]}function Rf(f,b,O,re){return ld(f,b,O(br(f,b)),re)}function cd(f,b,O,re){for(var Se=f.length,Ue=re?Se:-1;(re?Ue--:++Ue<Se)&&b(f[Ue],Ue,f););return O?$l(f,re?0:Ue,re?Ue+1:Se):$l(f,re?Ue+1:0,re?Se:Ue)}function Nu(f,b){var O=f;return O instanceof Wr&&(O=O.value()),Ka(b,function(re,Se){return Se.func.apply(Se.thisArg,Jo([re],Se.args))},O)}function Iu(f,b,O){var re=f.length;if(re<2)return re?Oc(f[0]):[];for(var Se=-1,Ue=Nt(re);++Se<re;)for(var ot=f[Se],bt=-1;++bt<re;)bt!=Se&&(Ue[Se]=M(Ue[Se]||ot,f[bt],b,O));return Oc(qe(Ue,1),b,O)}function sc(f,b,O){for(var re=-1,Se=f.length,Ue=b.length,ot={};++re<Se;){var bt=re<Ue?b[re]:n;O(ot,f[re],bt)}return ot}function Gd(f){return $o(f)?f:[]}function Rh(f){return typeof f=="function"?f:Wl}function oc(f,b){return si(f)?f:l1(f,b)?[f]:Uw(ss(f))}var Qy=ci;function Bu(f,b,O){var re=f.length;return O=O===n?re:O,!b&&O>=re?f:$l(f,b,O)}var Ff=ba||function(f){return fs.clearTimeout(f)};function mw(f,b){if(b)return f.slice();var O=f.length,re=ec?ec(O):new f.constructor(O);return f.copy(re),re}function e1(f){var b=new f.constructor(f.byteLength);return new aa(b).set(new aa(f)),b}function RM(f,b){var O=b?e1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function FM(f){var b=new f.constructor(f.source,qt.exec(f));return b.lastIndex=f.lastIndex,b}function jM(f){return _i?Ei(_i.call(f)):{}}function vw(f,b){var O=b?e1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function yw(f,b){if(f!==b){var O=f!==n,re=f===null,Se=f===f,Ue=gu(f),ot=b!==n,bt=b===null,Dt=b===b,cn=gu(b);if(!bt&&!cn&&!Ue&&f>b||Ue&&ot&&Dt&&!bt&&!cn||re&&ot&&Dt||!O&&Dt||!Se)return 1;if(!re&&!Ue&&!cn&&f<b||cn&&O&&Se&&!re&&!Ue||bt&&O&&Se||!ot&&Se||!Dt)return-1}return 0}function zM(f,b,O){for(var re=-1,Se=f.criteria,Ue=b.criteria,ot=Se.length,bt=O.length;++re<ot;){var Dt=yw(Se[re],Ue[re]);if(Dt){if(re>=bt)return Dt;var cn=O[re];return Dt*(cn=="desc"?-1:1)}}return f.index-b.index}function bw(f,b,O,re){for(var Se=-1,Ue=f.length,ot=O.length,bt=-1,Dt=b.length,cn=ae(Ue-ot,0),dn=Nt(Dt+cn),bn=!re;++bt<Dt;)dn[bt]=b[bt];for(;++Se<ot;)(bn||Se<Ue)&&(dn[O[Se]]=f[Se]);for(;cn--;)dn[bt++]=f[Se++];return dn}function _w(f,b,O,re){for(var Se=-1,Ue=f.length,ot=-1,bt=O.length,Dt=-1,cn=b.length,dn=ae(Ue-bt,0),bn=Nt(dn+cn),qn=!re;++Se<dn;)bn[Se]=f[Se];for(var mr=Se;++Dt<cn;)bn[mr+Dt]=b[Dt];for(;++ot<bt;)(qn||Se<Ue)&&(bn[mr+O[ot]]=f[Se++]);return bn}function Vl(f,b){var O=-1,re=f.length;for(b||(b=Nt(re));++O<re;)b[O]=f[O];return b}function Nc(f,b,O,re){var Se=!O;O||(O={});for(var Ue=-1,ot=b.length;++Ue<ot;){var bt=b[Ue],Dt=re?re(O[bt],f[bt],bt,O,f):n;Dt===n&&(Dt=f[bt]),Se?Rn(O,bt,Dt):vt(O,bt,Dt)}return O}function $M(f,b){return Nc(f,a1(f),b)}function VM(f,b){return Nc(f,Ow(f),b)}function Wm(f,b){return function(O,re){var Se=si(O)?kc:nn,Ue=b?b():{};return Se(O,f,kr(re,2),Ue)}}function jf(f){return ci(function(b,O){var re=-1,Se=O.length,Ue=Se>1?O[Se-1]:n,ot=Se>2?O[2]:n;for(Ue=f.length>3&&typeof Ue=="function"?(Se--,Ue):n,ot&&Cl(O[0],O[1],ot)&&(Ue=Se<3?n:Ue,Se=1),b=Ei(b);++re<Se;){var bt=O[re];bt&&f(b,bt,re,Ue)}return b})}function ww(f,b){return function(O,re){if(O==null)return O;if(!Ul(O))return f(O,re);for(var Se=O.length,Ue=b?Se:-1,ot=Ei(O);(b?Ue--:++Ue<Se)&&re(ot[Ue],Ue,ot)!==!1;);return O}}function xw(f){return function(b,O,re){for(var Se=-1,Ue=Ei(b),ot=re(b),bt=ot.length;bt--;){var Dt=ot[f?bt:++Se];if(O(Ue[Dt],Dt,Ue)===!1)break}return b}}function UM(f,b,O){var re=b&k,Se=Wp(f);function Ue(){var ot=this&&this!==fs&&this instanceof Ue?Se:f;return ot.apply(re?O:this,arguments)}return Ue}function Lw(f){return function(b){b=ss(b);var O=Na(b)?ro(b):n,re=O?O[0]:b.charAt(0),Se=O?Bu(O,1).join(""):b.slice(1);return re[f]()+Se}}function zf(f){return function(b){return Ka(wx(_x(b).replace(Tr,"")),f,"")}}function Wp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=jo(f.prototype),re=f.apply(O,b);return uo(re)?re:O}}function HM(f,b,O){var re=Wp(f);function Se(){for(var Ue=arguments.length,ot=Nt(Ue),bt=Ue,Dt=$f(Se);bt--;)ot[bt]=arguments[bt];var cn=Ue<3&&ot[0]!==Dt&&ot[Ue-1]!==Dt?[]:_o(ot,Dt);if(Ue-=cn.length,Ue<O)return Mw(f,b,Gm,Se.placeholder,n,ot,cn,n,n,O-Ue);var dn=this&&this!==fs&&this instanceof Se?re:f;return Li(dn,this,ot)}return Se}function Sw(f){return function(b,O,re){var Se=Ei(b);if(!Ul(b)){var Ue=kr(O,3);b=xa(b),O=function(bt){return Ue(Se[bt],bt,Se)}}var ot=f(b,O,re);return ot>-1?Se[Ue?b[ot]:ot]:n}}function Cw(f){return hd(function(b){var O=b.length,re=O,Se=Gs.prototype.thru;for(f&&b.reverse();re--;){var Ue=b[re];if(typeof Ue!="function")throw new Ji(o);if(Se&&!ot&&Zm(Ue)=="wrapper")var ot=new Gs([],!0)}for(re=ot?re:O;++re<O;){Ue=b[re];var bt=Zm(Ue),Dt=bt=="wrapper"?s1(Ue):n;Dt&&u1(Dt[0])&&Dt[1]==(pe|z|te|N)&&!Dt[4].length&&Dt[9]==1?ot=ot[Zm(Dt[0])].apply(ot,Dt[3]):ot=Ue.length==1&&u1(Ue)?ot[bt]():ot.thru(Ue)}return function(){var cn=arguments,dn=cn[0];if(ot&&cn.length==1&&si(dn))return ot.plant(dn).value();for(var bn=0,qn=O?b[bn].apply(this,cn):dn;++bn<O;)qn=b[bn].call(this,qn);return qn}})}function Gm(f,b,O,re,Se,Ue,ot,bt,Dt,cn){var dn=b&pe,bn=b&k,qn=b&A,mr=b&(z|Y),Dr=b&j,pi=qn?n:Wp(f);function Or(){for(var Mi=arguments.length,Ri=Nt(Mi),mu=Mi;mu--;)Ri[mu]=arguments[mu];if(mr)var El=$f(Or),vu=Oa(Ri,El);if(re&&(Ri=bw(Ri,re,Se,mr)),Ue&&(Ri=_w(Ri,Ue,ot,mr)),Mi-=vu,mr&&Mi<cn){var Vo=_o(Ri,El);return Mw(f,b,Gm,Or.placeholder,O,Ri,Vo,bt,Dt,cn-Mi)}var lc=bn?O:this,md=qn?lc[f]:f;return Mi=Ri.length,bt?Ri=ck(Ri,bt):Dr&&Mi>1&&Ri.reverse(),dn&&Dt<Mi&&(Ri.length=Dt),this&&this!==fs&&this instanceof Or&&(md=pi||Wp(md)),md.apply(lc,Ri)}return Or}function Ew(f,b){return function(O,re){return ke(O,f,b(re),{})}}function qm(f,b){return function(O,re){var Se;if(O===n&&re===n)return b;if(O!==n&&(Se=O),re!==n){if(Se===n)return re;typeof O=="string"||typeof re=="string"?(O=rl(O),re=rl(re)):(O=Hm(O),re=Hm(re)),Se=f(O,re)}return Se}}function t1(f){return hd(function(b){return b=Si(b,Hr(kr())),ci(function(O){var re=this;return f(b,function(Se){return Li(Se,re,O)})})})}function Ym(f,b){b=b===n?" ":rl(b);var O=b.length;if(O<2)return O?If(b,f):b;var re=If(b,Us(f/no(b)));return Na(b)?Bu(ro(re),0,f).join(""):re.slice(0,f)}function WM(f,b,O,re){var Se=b&k,Ue=Wp(f);function ot(){for(var bt=-1,Dt=arguments.length,cn=-1,dn=re.length,bn=Nt(dn+Dt),qn=this&&this!==fs&&this instanceof ot?Ue:f;++cn<dn;)bn[cn]=re[cn];for(;Dt--;)bn[cn++]=arguments[++bt];return Li(qn,Se?O:this,bn)}return ot}function Pw(f){return function(b,O,re){return re&&typeof re!="number"&&Cl(b,O,re)&&(O=re=n),b=gd(b),O===n?(O=b,b=0):O=gd(O),re=re===n?b<O?1:-1:gd(re),Bh(b,O,re,f)}}function Km(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=Fu(b),O=Fu(O)),f(b,O)}}function Mw(f,b,O,re,Se,Ue,ot,bt,Dt,cn){var dn=b&z,bn=dn?ot:n,qn=dn?n:ot,mr=dn?Ue:n,Dr=dn?n:Ue;b|=dn?te:ge,b&=~(dn?ge:te),b&D||(b&=-4);var pi=[f,b,Se,mr,bn,Dr,qn,bt,Dt,cn],Or=O.apply(n,pi);return u1(f)&&zw(Or,pi),Or.placeholder=re,$w(Or,f,b)}function n1(f){var b=Xi[f];return function(O,re){if(O=Fu(O),re=re==null?0:Pe(di(re),292),re&&y(O)){var Se=(ss(O)+"e").split("e"),Ue=b(Se[0]+"e"+(+Se[1]+re));return Se=(ss(Ue)+"e").split("e"),+(Se[0]+"e"+(+Se[1]-re))}return b(O)}}var GM=Es&&1/wo(new Es([,-0]))[1]==ne?function(f){return new Es(f)}:S1;function kw(f){return function(b){var O=il(b);return O==Q?zl(b):O==Ye?Ac(b):Ls(b,f(b))}}function dd(f,b,O,re,Se,Ue,ot,bt){var Dt=b&A;if(!Dt&&typeof f!="function")throw new Ji(o);var cn=re?re.length:0;if(cn||(b&=-97,re=Se=n),ot=ot===n?ot:ae(di(ot),0),bt=bt===n?bt:di(bt),cn-=Se?Se.length:0,b&ge){var dn=re,bn=Se;re=Se=n}var qn=Dt?n:s1(f),mr=[f,b,O,re,Se,dn,bn,Ue,ot,bt];if(qn&&ak(mr,qn),f=mr[0],b=mr[1],O=mr[2],re=mr[3],Se=mr[4],bt=mr[9]=mr[9]===n?Dt?0:f.length:ae(mr[9]-cn,0),!bt&&b&(z|Y)&&(b&=-25),!b||b==k)var Dr=UM(f,b,O);else b==z||b==Y?Dr=HM(f,b,bt):(b==te||b==(k|te))&&!Se.length?Dr=WM(f,b,O,re):Dr=Gm.apply(n,mr);var pi=qn?rc:zw;return $w(pi(Dr,mr),f,b)}function Aw(f,b,O,re){return f===n||ac(f,Ra[O])&&!ri.call(re,O)?b:f}function Tw(f,b,O,re,Se,Ue){return uo(f)&&uo(b)&&(Ue.set(b,f),Va(f,b,n,Tw,Ue),Ue.delete(b)),f}function qM(f){return Yp(f)?n:f}function Dw(f,b,O,re,Se,Ue){var ot=O&x,bt=f.length,Dt=b.length;if(bt!=Dt&&!(ot&&Dt>bt))return!1;var cn=Ue.get(f),dn=Ue.get(b);if(cn&&dn)return cn==b&&dn==f;var bn=-1,qn=!0,mr=O&E?new q:n;for(Ue.set(f,b),Ue.set(b,f);++bn<bt;){var Dr=f[bn],pi=b[bn];if(re)var Or=ot?re(pi,Dr,bn,b,f,Ue):re(Dr,pi,bn,f,b,Ue);if(Or!==n){if(Or)continue;qn=!1;break}if(mr){if(!F(b,function(Mi,Ri){if(!jl(mr,Ri)&&(Dr===Mi||Se(Dr,Mi,O,re,Ue)))return mr.push(Ri)})){qn=!1;break}}else if(!(Dr===pi||Se(Dr,pi,O,re,Ue))){qn=!1;break}}return Ue.delete(f),Ue.delete(b),qn}function YM(f,b,O,re,Se,Ue,ot){switch(O){case yn:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case tn:return!(f.byteLength!=b.byteLength||!Ue(new aa(f),new aa(b)));case ce:case J:case se:return ac(+f,+b);case De:return f.name==b.name&&f.message==b.message;case Ve:case Ke:return f==b+"";case Q:var bt=zl;case Ye:var Dt=re&x;if(bt||(bt=wo),f.size!=b.size&&!Dt)return!1;var cn=ot.get(f);if(cn)return cn==b;re|=E,ot.set(f,b);var dn=Dw(bt(f),bt(b),re,Se,Ue,ot);return ot.delete(f),dn;case _t:if(_i)return _i.call(f)==_i.call(b)}return!1}function KM(f,b,O,re,Se,Ue){var ot=O&x,bt=r1(f),Dt=bt.length,cn=r1(b),dn=cn.length;if(Dt!=dn&&!ot)return!1;for(var bn=Dt;bn--;){var qn=bt[bn];if(!(ot?qn in b:ri.call(b,qn)))return!1}var mr=Ue.get(f),Dr=Ue.get(b);if(mr&&Dr)return mr==b&&Dr==f;var pi=!0;Ue.set(f,b),Ue.set(b,f);for(var Or=ot;++bn<Dt;){qn=bt[bn];var Mi=f[qn],Ri=b[qn];if(re)var mu=ot?re(Ri,Mi,qn,b,f,Ue):re(Mi,Ri,qn,f,b,Ue);if(!(mu===n?Mi===Ri||Se(Mi,Ri,O,re,Ue):mu)){pi=!1;break}Or||(Or=qn=="constructor")}if(pi&&!Or){var El=f.constructor,vu=b.constructor;El!=vu&&"constructor"in f&&"constructor"in b&&!(typeof El=="function"&&El instanceof El&&typeof vu=="function"&&vu instanceof vu)&&(pi=!1)}return Ue.delete(f),Ue.delete(b),pi}function hd(f){return d1(Fw(f,n,qw),f+"")}function r1(f){return nt(f,xa,a1)}function i1(f){return nt(f,Hl,Ow)}var s1=Qi?function(f){return Qi.get(f)}:S1;function Zm(f){for(var b=f.name+"",O=Fo[b],re=ri.call(Fo,b)?O.length:0;re--;){var Se=O[re],Ue=Se.func;if(Ue==null||Ue==f)return Se.name}return b}function $f(f){var b=ri.call(Ne,"placeholder")?Ne:f;return b.placeholder}function kr(){var f=Ne.iteratee||x1;return f=f===x1?ar:f,arguments.length?f(arguments[0],arguments[1]):f}function Xm(f,b){var O=f.__data__;return rk(b)?O[typeof b=="string"?"string":"hash"]:O.map}function o1(f){for(var b=xa(f),O=b.length;O--;){var re=b[O],Se=f[re];b[O]=[re,Se,Bw(Se)]}return b}function Fh(f,b){var O=Ss(f,b);return Tt(O)?O:n}function ZM(f){var b=ri.call(f,el),O=f[el];try{f[el]=n;var re=!0}catch{}var Se=Pi.call(f);return re&&(b?f[el]=O:delete f[el]),Se}var a1=_a?function(f){return f==null?[]:(f=Ei(f),va(_a(f),function(b){return $i.call(f,b)}))}:C1,Ow=_a?function(f){for(var b=[];f;)Jo(b,a1(f)),f=za(f);return b}:C1,il=st;(jn&&il(new jn(new ArrayBuffer(1)))!=yn||sr&&il(new sr)!=Q||Vr&&il(Vr.resolve())!=Ce||Es&&il(new Es)!=Ye||as&&il(new as)!=ft)&&(il=function(f){var b=st(f),O=b==ze?f.constructor:n,re=O?jh(O):"";if(re)switch(re){case od:return yn;case $a:return Q;case wa:return Ce;case la:return Ye;case Th:return ft}return b});function XM(f,b,O){for(var re=-1,Se=O.length;++re<Se;){var Ue=O[re],ot=Ue.size;switch(Ue.type){case"drop":f+=ot;break;case"dropRight":b-=ot;break;case"take":b=Pe(b,f+ot);break;case"takeRight":f=ae(f,b-ot);break}}return{start:f,end:b}}function JM(f){var b=f.match(Ln);return b?b[1].split(Vn):[]}function Nw(f,b,O){b=oc(b,f);for(var re=-1,Se=b.length,Ue=!1;++re<Se;){var ot=Ic(b[re]);if(!(Ue=f!=null&&O(f,ot)))break;f=f[ot]}return Ue||++re!=Se?Ue:(Se=f==null?0:f.length,!!Se&&i0(Se)&&fd(ot,Se)&&(si(f)||zh(f)))}function QM(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&ri.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Iw(f){return typeof f.constructor=="function"&&!Gp(f)?jo(za(f)):{}}function ek(f,b,O){var re=f.constructor;switch(b){case tn:return e1(f);case ce:case J:return new re(+f);case yn:return RM(f,O);case Qe:case at:case it:case $t:case Zt:case On:case mn:case Tn:case Qn:return vw(f,O);case Q:return new re;case se:case Ke:return new re(f);case Ve:return FM(f);case Ye:return new re;case _t:return jM(f)}}function tk(f,b){var O=b.length;if(!O)return f;var re=O-1;return b[re]=(O>1?"& ":"")+b[re],b=b.join(O>2?", ":" "),f.replace(dt,`{
/* [wrapped with `+b+`] */
`)}function nk(f){return si(f)||zh(f)||!!(Ro&&f&&f[Ro])}function fd(f,b){var O=typeof f;return b=b??X,!!b&&(O=="number"||O!="symbol"&&rn.test(f))&&f>-1&&f%1==0&&f<b}function Cl(f,b,O){if(!uo(O))return!1;var re=typeof b;return(re=="number"?Ul(O)&&fd(b,O.length):re=="string"&&b in O)?ac(O[b],f):!1}function l1(f,b){if(si(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||gu(f)?!0:Ts.test(f)||!Oo.test(f)||b!=null&&f in Ei(b)}function rk(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function u1(f){var b=Zm(f),O=Ne[b];if(typeof O!="function"||!(b in Wr.prototype))return!1;if(f===O)return!0;var re=s1(O);return!!re&&f===re[0]}function ik(f){return!!Vs&&Vs in f}var sk=Fa?pd:E1;function Gp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||Ra;return f===O}function Bw(f){return f===f&&!uo(f)}function Rw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==n||f in Ei(O))}}function ok(f){var b=n0(f,function(re){return O.size===c&&O.clear(),re}),O=b.cache;return b}function ak(f,b){var O=f[1],re=b[1],Se=O|re,Ue=Se<(k|A|pe),ot=re==pe&&O==z||re==pe&&O==N&&f[7].length<=b[8]||re==(pe|N)&&b[7].length<=b[8]&&O==z;if(!(Ue||ot))return f;re&k&&(f[2]=b[2],Se|=O&k?0:D);var bt=b[3];if(bt){var Dt=f[3];f[3]=Dt?bw(Dt,bt,b[4]):bt,f[4]=Dt?_o(f[3],h):b[4]}return bt=b[5],bt&&(Dt=f[5],f[5]=Dt?_w(Dt,bt,b[6]):bt,f[6]=Dt?_o(f[5],h):b[6]),bt=b[7],bt&&(f[7]=bt),re&pe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Se,f}function lk(f){var b=[];if(f!=null)for(var O in Ei(f))b.push(O);return b}function uk(f){return Pi.call(f)}function Fw(f,b,O){return b=ae(b===n?f.length-1:b,0),function(){for(var re=arguments,Se=-1,Ue=ae(re.length-b,0),ot=Nt(Ue);++Se<Ue;)ot[Se]=re[b+Se];Se=-1;for(var bt=Nt(b+1);++Se<b;)bt[Se]=re[Se];return bt[b]=O(ot),Li(f,this,bt)}}function jw(f,b){return b.length<2?f:br(f,$l(b,0,-1))}function ck(f,b){for(var O=f.length,re=Pe(b.length,O),Se=Vl(f);re--;){var Ue=b[re];f[re]=fd(Ue,O)?Se[Ue]:n}return f}function c1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var zw=Vw(rc),qp=sd||function(f,b){return fs.setTimeout(f,b)},d1=Vw($m);function $w(f,b,O){var re=b+"";return d1(f,tk(re,dk(JM(re),O)))}function Vw(f){var b=0,O=0;return function(){var re=ut(),Se=B-(re-O);if(O=re,Se>0){if(++b>=R)return arguments[0]}else b=0;return f.apply(n,arguments)}}function Jm(f,b){var O=-1,re=f.length,Se=re-1;for(b=b===n?re:b;++O<b;){var Ue=Ih(O,Se),ot=f[Ue];f[Ue]=f[O],f[O]=ot}return f.length=b,f}var Uw=ok(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(tr,function(O,re,Se,Ue){b.push(Se?Ue.replace(Hn,"$1"):re||O)}),b});function Ic(f){if(typeof f=="string"||gu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function jh(f){if(f!=null){try{return ja.call(f)}catch{}try{return f+""}catch{}}return""}function dk(f,b){return zs(Z,function(O){var re="_."+O[0];b&O[1]&&!Rl(f,re)&&f.push(re)}),f.sort()}function Hw(f){if(f instanceof Wr)return f.clone();var b=new Gs(f.__wrapped__,f.__chain__);return b.__actions__=Vl(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function hk(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=ae(di(b),0);var re=f==null?0:f.length;if(!re||b<1)return[];for(var Se=0,Ue=0,ot=Nt(Us(re/b));Se<re;)ot[Ue++]=$l(f,Se,Se+=b);return ot}function fk(f){for(var b=-1,O=f==null?0:f.length,re=0,Se=[];++b<O;){var Ue=f[b];Ue&&(Se[re++]=Ue)}return Se}function pk(){var f=arguments.length;if(!f)return[];for(var b=Nt(f-1),O=arguments[0],re=f;re--;)b[re-1]=arguments[re];return Jo(si(O)?Vl(O):[O],qe(b,1))}var gk=ci(function(f,b){return $o(f)?M(f,qe(b,1,$o,!0)):[]}),mk=ci(function(f,b){var O=Ru(b);return $o(O)&&(O=n),$o(f)?M(f,qe(b,1,$o,!0),kr(O,2)):[]}),vk=ci(function(f,b){var O=Ru(b);return $o(O)&&(O=n),$o(f)?M(f,qe(b,1,$o,!0),n,O):[]});function yk(f,b,O){var re=f==null?0:f.length;return re?(b=O||b===n?1:di(b),$l(f,b<0?0:b,re)):[]}function bk(f,b,O){var re=f==null?0:f.length;return re?(b=O||b===n?1:di(b),b=re-b,$l(f,0,b<0?0:b)):[]}function _k(f,b){return f&&f.length?cd(f,kr(b,3),!0,!0):[]}function wk(f,b){return f&&f.length?cd(f,kr(b,3),!0):[]}function xk(f,b,O,re){var Se=f==null?0:f.length;return Se?(O&&typeof O!="number"&&Cl(f,b,O)&&(O=0,re=Se),Ee(f,b,O,re)):[]}function Ww(f,b,O){var re=f==null?0:f.length;if(!re)return-1;var Se=O==null?0:di(O);return Se<0&&(Se=ae(re+Se,0)),Ht(f,kr(b,3),Se)}function Gw(f,b,O){var re=f==null?0:f.length;if(!re)return-1;var Se=re-1;return O!==n&&(Se=di(O),Se=O<0?ae(re+Se,0):Pe(Se,re-1)),Ht(f,kr(b,3),Se,!0)}function qw(f){var b=f==null?0:f.length;return b?qe(f,1):[]}function Lk(f){var b=f==null?0:f.length;return b?qe(f,ne):[]}function Sk(f,b){var O=f==null?0:f.length;return O?(b=b===n?1:di(b),qe(f,b)):[]}function Ck(f){for(var b=-1,O=f==null?0:f.length,re={};++b<O;){var Se=f[b];re[Se[0]]=Se[1]}return re}function Yw(f){return f&&f.length?f[0]:n}function Ek(f,b,O){var re=f==null?0:f.length;if(!re)return-1;var Se=O==null?0:di(O);return Se<0&&(Se=ae(re+Se,0)),hn(f,b,Se)}function Pk(f){var b=f==null?0:f.length;return b?$l(f,0,-1):[]}var Mk=ci(function(f){var b=Si(f,Gd);return b.length&&b[0]===f[0]?_e(b):[]}),kk=ci(function(f){var b=Ru(f),O=Si(f,Gd);return b===Ru(O)?b=n:O.pop(),O.length&&O[0]===f[0]?_e(O,kr(b,2)):[]}),Ak=ci(function(f){var b=Ru(f),O=Si(f,Gd);return b=typeof b=="function"?b:n,b&&O.pop(),O.length&&O[0]===f[0]?_e(O,n,b):[]});function Tk(f,b){return f==null?"":P.call(f,b)}function Ru(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Dk(f,b,O){var re=f==null?0:f.length;if(!re)return-1;var Se=re;return O!==n&&(Se=di(O),Se=Se<0?ae(re+Se,0):Pe(Se,re-1)),b===b?Za(f,b,Se):Ht(f,Wn,Se,!0)}function Ok(f,b){return f&&f.length?Sl(f,di(b)):n}var Nk=ci(Kw);function Kw(f,b){return f&&f.length&&b&&b.length?Nf(f,b):f}function Ik(f,b,O){return f&&f.length&&b&&b.length?Nf(f,b,kr(O,2)):f}function Bk(f,b,O){return f&&f.length&&b&&b.length?Nf(f,b,n,O):f}var Rk=hd(function(f,b){var O=f==null?0:f.length,re=Nn(f,b);return Nh(f,Si(b,function(Se){return fd(Se,O)?+Se:Se}).sort(yw)),re});function Fk(f,b){var O=[];if(!(f&&f.length))return O;var re=-1,Se=[],Ue=f.length;for(b=kr(b,3);++re<Ue;){var ot=f[re];b(ot,re,f)&&(O.push(ot),Se.push(re))}return Nh(f,Se),O}function h1(f){return f==null?f:un.call(f)}function jk(f,b,O){var re=f==null?0:f.length;return re?(O&&typeof O!="number"&&Cl(f,b,O)?(b=0,O=re):(b=b==null?0:di(b),O=O===n?re:di(O)),$l(f,b,O)):[]}function zk(f,b){return ic(f,b)}function $k(f,b,O){return Up(f,b,kr(O,2))}function Vk(f,b){var O=f==null?0:f.length;if(O){var re=ic(f,b);if(re<O&&ac(f[re],b))return re}return-1}function Uk(f,b){return ic(f,b,!0)}function Hk(f,b,O){return Up(f,b,kr(O,2),!0)}function Wk(f,b){var O=f==null?0:f.length;if(O){var re=ic(f,b,!0)-1;if(ac(f[re],b))return re}return-1}function Gk(f){return f&&f.length?Hp(f):[]}function qk(f,b){return f&&f.length?Hp(f,kr(b,2)):[]}function Yk(f){var b=f==null?0:f.length;return b?$l(f,1,b):[]}function Kk(f,b,O){return f&&f.length?(b=O||b===n?1:di(b),$l(f,0,b<0?0:b)):[]}function Zk(f,b,O){var re=f==null?0:f.length;return re?(b=O||b===n?1:di(b),b=re-b,$l(f,b<0?0:b,re)):[]}function Xk(f,b){return f&&f.length?cd(f,kr(b,3),!1,!0):[]}function Jk(f,b){return f&&f.length?cd(f,kr(b,3)):[]}var Qk=ci(function(f){return Oc(qe(f,1,$o,!0))}),eA=ci(function(f){var b=Ru(f);return $o(b)&&(b=n),Oc(qe(f,1,$o,!0),kr(b,2))}),tA=ci(function(f){var b=Ru(f);return b=typeof b=="function"?b:n,Oc(qe(f,1,$o,!0),n,b)});function nA(f){return f&&f.length?Oc(f):[]}function rA(f,b){return f&&f.length?Oc(f,kr(b,2)):[]}function iA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Oc(f,n,b):[]}function f1(f){if(!(f&&f.length))return[];var b=0;return f=va(f,function(O){if($o(O))return b=ae(O.length,b),!0}),ms(b,function(O){return Si(f,Er(O))})}function Zw(f,b){if(!(f&&f.length))return[];var O=f1(f);return b==null?O:Si(O,function(re){return Li(b,n,re)})}var sA=ci(function(f,b){return $o(f)?M(f,b):[]}),oA=ci(function(f){return Iu(va(f,$o))}),aA=ci(function(f){var b=Ru(f);return $o(b)&&(b=n),Iu(va(f,$o),kr(b,2))}),lA=ci(function(f){var b=Ru(f);return b=typeof b=="function"?b:n,Iu(va(f,$o),n,b)}),uA=ci(f1);function cA(f,b){return sc(f||[],b||[],vt)}function dA(f,b){return sc(f||[],b||[],ld)}var hA=ci(function(f){var b=f.length,O=b>1?f[b-1]:n;return O=typeof O=="function"?(f.pop(),O):n,Zw(f,O)});function Xw(f){var b=Ne(f);return b.__chain__=!0,b}function fA(f,b){return b(f),f}function Qm(f,b){return b(f)}var pA=hd(function(f){var b=f.length,O=b?f[0]:0,re=this.__wrapped__,Se=function(Ue){return Nn(Ue,f)};return b>1||this.__actions__.length||!(re instanceof Wr)||!fd(O)?this.thru(Se):(re=re.slice(O,+O+(b?1:0)),re.__actions__.push({func:Qm,args:[Se],thisArg:n}),new Gs(re,this.__chain__).thru(function(Ue){return b&&!Ue.length&&Ue.push(n),Ue}))});function gA(){return Xw(this)}function mA(){return new Gs(this.value(),this.__chain__)}function vA(){this.__values__===n&&(this.__values__=dx(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function yA(){return this}function bA(f){for(var b,O=this;O instanceof tc;){var re=Hw(O);re.__index__=0,re.__values__=n,b?Se.__wrapped__=re:b=re;var Se=re;O=O.__wrapped__}return Se.__wrapped__=f,b}function _A(){var f=this.__wrapped__;if(f instanceof Wr){var b=f;return this.__actions__.length&&(b=new Wr(this)),b=b.reverse(),b.__actions__.push({func:Qm,args:[h1],thisArg:n}),new Gs(b,this.__chain__)}return this.thru(h1)}function wA(){return Nu(this.__wrapped__,this.__actions__)}var xA=Wm(function(f,b,O){ri.call(f,O)?++f[O]:Rn(f,O,1)});function LA(f,b,O){var re=si(f)?hu:oe;return O&&Cl(f,b,O)&&(b=n),re(f,kr(b,3))}function SA(f,b){var O=si(f)?va:rt;return O(f,kr(b,3))}var CA=Sw(Ww),EA=Sw(Gw);function PA(f,b){return qe(e0(f,b),1)}function MA(f,b){return qe(e0(f,b),ne)}function kA(f,b,O){return O=O===n?1:di(O),qe(e0(f,b),O)}function Jw(f,b){var O=si(f)?zs:W;return O(f,kr(b,3))}function Qw(f,b){var O=si(f)?ma:ee;return O(f,kr(b,3))}var AA=Wm(function(f,b,O){ri.call(f,O)?f[O].push(b):Rn(f,O,[b])});function TA(f,b,O,re){f=Ul(f)?f:Uf(f),O=O&&!re?di(O):0;var Se=f.length;return O<0&&(O=ae(Se+O,0)),s0(f)?O<=Se&&f.indexOf(b,O)>-1:!!Se&&hn(f,b,O)>-1}var DA=ci(function(f,b,O){var re=-1,Se=typeof b=="function",Ue=Ul(f)?Nt(f.length):[];return W(f,function(ot){Ue[++re]=Se?Li(b,ot,O):$e(ot,b,O)}),Ue}),OA=Wm(function(f,b,O){Rn(f,O,b)});function e0(f,b){var O=si(f)?Si:Hi;return O(f,kr(b,3))}function NA(f,b,O,re){return f==null?[]:(si(b)||(b=b==null?[]:[b]),O=re?n:O,si(O)||(O=O==null?[]:[O]),Dc(f,b,O))}var IA=Wm(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function BA(f,b,O){var re=si(f)?Ka:qi,Se=arguments.length<3;return re(f,kr(b,4),O,Se,W)}function RA(f,b,O){var re=si(f)?gs:qi,Se=arguments.length<3;return re(f,kr(b,4),O,Se,ee)}function FA(f,b){var O=si(f)?va:rt;return O(f,r0(kr(b,3)))}function jA(f){var b=si(f)?Ft:Bf;return b(f)}function zA(f,b,O){(O?Cl(f,b,O):b===n)?b=1:b=di(b);var re=si(f)?Pt:zm;return re(f,b)}function $A(f){var b=si(f)?Kt:Vm;return b(f)}function VA(f){if(f==null)return 0;if(Ul(f))return s0(f)?no(f):f.length;var b=il(f);return b==Q||b==Ye?f.size:wi(f).length}function UA(f,b,O){var re=si(f)?F:Um;return O&&Cl(f,b,O)&&(b=n),re(f,kr(b,3))}var HA=ci(function(f,b){if(f==null)return[];var O=b.length;return O>1&&Cl(f,b[0],b[1])?b=[]:O>2&&Cl(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,qe(b,1),[])}),t0=Lo||function(){return fs.Date.now()};function WA(f,b){if(typeof b!="function")throw new Ji(o);return f=di(f),function(){if(--f<1)return b.apply(this,arguments)}}function ex(f,b,O){return b=O?n:b,b=f&&b==null?f.length:b,dd(f,pe,n,n,n,n,b)}function tx(f,b){var O;if(typeof b!="function")throw new Ji(o);return f=di(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=n),O}}var p1=ci(function(f,b,O){var re=k;if(O.length){var Se=_o(O,$f(p1));re|=te}return dd(f,re,b,O,Se)}),nx=ci(function(f,b,O){var re=k|A;if(O.length){var Se=_o(O,$f(nx));re|=te}return dd(b,re,f,O,Se)});function rx(f,b,O){b=O?n:b;var re=dd(f,z,n,n,n,n,n,b);return re.placeholder=rx.placeholder,re}function ix(f,b,O){b=O?n:b;var re=dd(f,Y,n,n,n,n,n,b);return re.placeholder=ix.placeholder,re}function sx(f,b,O){var re,Se,Ue,ot,bt,Dt,cn=0,dn=!1,bn=!1,qn=!0;if(typeof f!="function")throw new Ji(o);b=Fu(b)||0,uo(O)&&(dn=!!O.leading,bn="maxWait"in O,Ue=bn?ae(Fu(O.maxWait)||0,b):Ue,qn="trailing"in O?!!O.trailing:qn);function mr(Vo){var lc=re,md=Se;return re=Se=n,cn=Vo,ot=f.apply(md,lc),ot}function Dr(Vo){return cn=Vo,bt=qp(Mi,b),dn?mr(Vo):ot}function pi(Vo){var lc=Vo-Dt,md=Vo-cn,Sx=b-lc;return bn?Pe(Sx,Ue-md):Sx}function Or(Vo){var lc=Vo-Dt,md=Vo-cn;return Dt===n||lc>=b||lc<0||bn&&md>=Ue}function Mi(){var Vo=t0();if(Or(Vo))return Ri(Vo);bt=qp(Mi,pi(Vo))}function Ri(Vo){return bt=n,qn&&re?mr(Vo):(re=Se=n,ot)}function mu(){bt!==n&&Ff(bt),cn=0,re=Dt=Se=bt=n}function El(){return bt===n?ot:Ri(t0())}function vu(){var Vo=t0(),lc=Or(Vo);if(re=arguments,Se=this,Dt=Vo,lc){if(bt===n)return Dr(Dt);if(bn)return Ff(bt),bt=qp(Mi,b),mr(Dt)}return bt===n&&(bt=qp(Mi,b)),ot}return vu.cancel=mu,vu.flush=El,vu}var GA=ci(function(f,b){return C(f,1,b)}),qA=ci(function(f,b,O){return C(f,Fu(b)||0,O)});function YA(f){return dd(f,j)}function n0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Ji(o);var O=function(){var re=arguments,Se=b?b.apply(this,re):re[0],Ue=O.cache;if(Ue.has(Se))return Ue.get(Se);var ot=f.apply(this,re);return O.cache=Ue.set(Se,ot)||Ue,ot};return O.cache=new(n0.Cache||nl),O}n0.Cache=nl;function r0(f){if(typeof f!="function")throw new Ji(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function KA(f){return tx(2,f)}var ZA=Qy(function(f,b){b=b.length==1&&si(b[0])?Si(b[0],Hr(kr())):Si(qe(b,1),Hr(kr()));var O=b.length;return ci(function(re){for(var Se=-1,Ue=Pe(re.length,O);++Se<Ue;)re[Se]=b[Se].call(this,re[Se]);return Li(f,this,re)})}),g1=ci(function(f,b){var O=_o(b,$f(g1));return dd(f,te,n,b,O)}),ox=ci(function(f,b){var O=_o(b,$f(ox));return dd(f,ge,n,b,O)}),XA=hd(function(f,b){return dd(f,N,n,n,n,b)});function JA(f,b){if(typeof f!="function")throw new Ji(o);return b=b===n?b:di(b),ci(f,b)}function QA(f,b){if(typeof f!="function")throw new Ji(o);return b=b==null?0:ae(di(b),0),ci(function(O){var re=O[b],Se=Bu(O,0,b);return re&&Jo(Se,re),Li(f,this,Se)})}function e6(f,b,O){var re=!0,Se=!0;if(typeof f!="function")throw new Ji(o);return uo(O)&&(re="leading"in O?!!O.leading:re,Se="trailing"in O?!!O.trailing:Se),sx(f,b,{leading:re,maxWait:b,trailing:Se})}function t6(f){return ex(f,1)}function n6(f,b){return g1(Rh(b),f)}function r6(){if(!arguments.length)return[];var f=arguments[0];return si(f)?f:[f]}function i6(f){return d(f,g)}function s6(f,b){return b=typeof b=="function"?b:n,d(f,g,b)}function o6(f){return d(f,p|g)}function a6(f,b){return b=typeof b=="function"?b:n,d(f,p|g,b)}function l6(f,b){return b==null||_(f,b,xa(b))}function ac(f,b){return f===b||f!==f&&b!==b}var u6=Km(gt),c6=Km(function(f,b){return f>=b}),zh=je(function(){return arguments}())?je:function(f){return So(f)&&ri.call(f,"callee")&&!$i.call(f,"callee")},si=Nt.isArray,d6=Tu?Hr(Tu):He;function Ul(f){return f!=null&&i0(f.length)&&!pd(f)}function $o(f){return So(f)&&Ul(f)}function h6(f){return f===!0||f===!1||So(f)&&st(f)==ce}var qd=u||E1,f6=Da?Hr(Da):We;function p6(f){return So(f)&&f.nodeType===1&&!Yp(f)}function g6(f){if(f==null)return!0;if(Ul(f)&&(si(f)||typeof f=="string"||typeof f.splice=="function"||qd(f)||Vf(f)||zh(f)))return!f.length;var b=il(f);if(b==Q||b==Ye)return!f.size;if(Gp(f))return!wi(f).length;for(var O in f)if(ri.call(f,O))return!1;return!0}function m6(f,b){return ct(f,b)}function v6(f,b,O){O=typeof O=="function"?O:n;var re=O?O(f,b):n;return re===n?ct(f,b,n,O):!!re}function m1(f){if(!So(f))return!1;var b=st(f);return b==De||b==Re||typeof f.message=="string"&&typeof f.name=="string"&&!Yp(f)}function y6(f){return typeof f=="number"&&y(f)}function pd(f){if(!uo(f))return!1;var b=st(f);return b==et||b==he||b==de||b==ye}function ax(f){return typeof f=="number"&&f==di(f)}function i0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=X}function uo(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function So(f){return f!=null&&typeof f=="object"}var lx=uu?Hr(uu):yt;function b6(f,b){return f===b||At(f,b,o1(b))}function _6(f,b,O){return O=typeof O=="function"?O:n,At(f,b,o1(b),O)}function w6(f){return ux(f)&&f!=+f}function x6(f){if(sk(f))throw new nr(s);return Tt(f)}function L6(f){return f===null}function S6(f){return f==null}function ux(f){return typeof f=="number"||So(f)&&st(f)==se}function Yp(f){if(!So(f)||st(f)!=ze)return!1;var b=za(f);if(b===null)return!0;var O=ri.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&ja.call(O)==Ii}var v1=cu?Hr(cu):ln;function C6(f){return ax(f)&&f>=-9007199254740991&&f<=X}var cx=oa?Hr(oa):Gn;function s0(f){return typeof f=="string"||!si(f)&&So(f)&&st(f)==Ke}function gu(f){return typeof f=="symbol"||So(f)&&st(f)==_t}var Vf=du?Hr(du):Zn;function E6(f){return f===n}function P6(f){return So(f)&&il(f)==ft}function M6(f){return So(f)&&st(f)==Ut}var k6=Km(ii),A6=Km(function(f,b){return f<=b});function dx(f){if(!f)return[];if(Ul(f))return s0(f)?ro(f):Vl(f);if(wr&&f[wr])return Io(f[wr]());var b=il(f),O=b==Q?zl:b==Ye?wo:Uf;return O(f)}function gd(f){if(!f)return f===0?f:0;if(f=Fu(f),f===ne||f===-1/0){var b=f<0?-1:1;return b*we}return f===f?f:0}function di(f){var b=gd(f),O=b%1;return b===b?O?b-O:b:0}function hx(f){return f?or(di(f),0,Ze):0}function Fu(f){if(typeof f=="number")return f;if(gu(f))return ve;if(uo(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=uo(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Qo(f);var O=dr.test(f);return O||pn.test(f)?lu(f.slice(2),O?2:8):Un.test(f)?ve:+f}function fx(f){return Nc(f,Hl(f))}function T6(f){return f?or(di(f),-9007199254740991,X):f===0?f:0}function ss(f){return f==null?"":rl(f)}var D6=jf(function(f,b){if(Gp(b)||Ul(b)){Nc(b,xa(b),f);return}for(var O in b)ri.call(b,O)&&vt(f,O,b[O])}),px=jf(function(f,b){Nc(b,Hl(b),f)}),o0=jf(function(f,b,O,re){Nc(b,Hl(b),f,re)}),O6=jf(function(f,b,O,re){Nc(b,xa(b),f,re)}),N6=hd(Nn);function I6(f,b){var O=jo(f);return b==null?O:fn(O,b)}var B6=ci(function(f,b){f=Ei(f);var O=-1,re=b.length,Se=re>2?b[2]:n;for(Se&&Cl(b[0],b[1],Se)&&(re=1);++O<re;)for(var Ue=b[O],ot=Hl(Ue),bt=-1,Dt=ot.length;++bt<Dt;){var cn=ot[bt],dn=f[cn];(dn===n||ac(dn,Ra[cn])&&!ri.call(f,cn))&&(f[cn]=Ue[cn])}return f}),R6=ci(function(f){return f.push(n,Tw),Li(gx,n,f)});function F6(f,b){return Mt(f,kr(b,3),en)}function j6(f,b){return Mt(f,kr(b,3),_n)}function z6(f,b){return f==null?f:wt(f,kr(b,3),Hl)}function $6(f,b){return f==null?f:It(f,kr(b,3),Hl)}function V6(f,b){return f&&en(f,kr(b,3))}function U6(f,b){return f&&_n(f,kr(b,3))}function H6(f){return f==null?[]:Pn(f,xa(f))}function W6(f){return f==null?[]:Pn(f,Hl(f))}function y1(f,b,O){var re=f==null?n:br(f,b);return re===n?O:re}function G6(f,b){return f!=null&&Nw(f,b,zt)}function b1(f,b){return f!=null&&Nw(f,b,Et)}var q6=Ew(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),f[b]=O},w1(Wl)),Y6=Ew(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),ri.call(f,b)?f[b].push(O):f[b]=[O]},kr),K6=ci($e);function xa(f){return Ul(f)?Rt(f):wi(f)}function Hl(f){return Ul(f)?Rt(f,!0):Bi(f)}function Z6(f,b){var O={};return b=kr(b,3),en(f,function(re,Se,Ue){Rn(O,b(re,Se,Ue),re)}),O}function X6(f,b){var O={};return b=kr(b,3),en(f,function(re,Se,Ue){Rn(O,Se,b(re,Se,Ue))}),O}var J6=jf(function(f,b,O){Va(f,b,O)}),gx=jf(function(f,b,O,re){Va(f,b,O,re)}),Q6=hd(function(f,b){var O={};if(f==null)return O;var re=!1;b=Si(b,function(Ue){return Ue=oc(Ue,f),re||(re=Ue.length>1),Ue}),Nc(f,i1(f),O),re&&(O=d(O,p|v|g,qM));for(var Se=b.length;Se--;)ud(O,b[Se]);return O});function eT(f,b){return mx(f,r0(kr(b)))}var tT=hd(function(f,b){return f==null?{}:Ua(f,b)});function mx(f,b){if(f==null)return{};var O=Si(i1(f),function(re){return[re]});return b=kr(b),lo(f,O,function(re,Se){return b(re,Se[0])})}function nT(f,b,O){b=oc(b,f);var re=-1,Se=b.length;for(Se||(Se=1,f=n);++re<Se;){var Ue=f==null?n:f[Ic(b[re])];Ue===n&&(re=Se,Ue=O),f=pd(Ue)?Ue.call(f):Ue}return f}function rT(f,b,O){return f==null?f:ld(f,b,O)}function iT(f,b,O,re){return re=typeof re=="function"?re:n,f==null?f:ld(f,b,O,re)}var vx=kw(xa),yx=kw(Hl);function sT(f,b,O){var re=si(f),Se=re||qd(f)||Vf(f);if(b=kr(b,4),O==null){var Ue=f&&f.constructor;Se?O=re?new Ue:[]:uo(f)?O=pd(Ue)?jo(za(f)):{}:O={}}return(Se?zs:en)(f,function(ot,bt,Dt){return b(O,ot,bt,Dt)}),O}function oT(f,b){return f==null?!0:ud(f,b)}function aT(f,b,O){return f==null?f:Rf(f,b,Rh(O))}function lT(f,b,O,re){return re=typeof re=="function"?re:n,f==null?f:Rf(f,b,Rh(O),re)}function Uf(f){return f==null?[]:eo(f,xa(f))}function uT(f){return f==null?[]:eo(f,Hl(f))}function cT(f,b,O){return O===n&&(O=b,b=n),O!==n&&(O=Fu(O),O=O===O?O:0),b!==n&&(b=Fu(b),b=b===b?b:0),or(Fu(f),b,O)}function dT(f,b,O){return b=gd(b),O===n?(O=b,b=0):O=gd(O),f=Fu(f),Bt(f,b,O)}function hT(f,b,O){if(O&&typeof O!="boolean"&&Cl(f,b,O)&&(b=O=n),O===n&&(typeof b=="boolean"?(O=b,b=n):typeof f=="boolean"&&(O=f,f=n)),f===n&&b===n?(f=0,b=1):(f=gd(f),b===n?(b=f,f=0):b=gd(b)),f>b){var re=f;f=b,b=re}if(O||f%1||b%1){var Se=Wt();return Pe(f+Se*(b-f+Il("1e-"+((Se+"").length-1))),b)}return Ih(f,b)}var fT=zf(function(f,b,O){return b=b.toLowerCase(),f+(O?bx(b):b)});function bx(f){return _1(ss(f).toLowerCase())}function _x(f){return f=ss(f),f&&f.replace(zr,Qu).replace(Zo,"")}function pT(f,b,O){f=ss(f),b=rl(b);var re=f.length;O=O===n?re:or(di(O),0,re);var Se=O;return O-=b.length,O>=0&&f.slice(O,Se)==b}function gT(f){return f=ss(f),f&&ur.test(f)?f.replace(vr,wl):f}function mT(f){return f=ss(f),f&&No.test(f)?f.replace(Ds,"\\$&"):f}var vT=zf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),yT=zf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),bT=Lw("toLowerCase");function _T(f,b,O){f=ss(f),b=di(b);var re=b?no(f):0;if(!b||re>=b)return f;var Se=(b-re)/2;return Ym(Hs(Se),O)+f+Ym(Us(Se),O)}function wT(f,b,O){f=ss(f),b=di(b);var re=b?no(f):0;return b&&re<b?f+Ym(b-re,O):f}function xT(f,b,O){f=ss(f),b=di(b);var re=b?no(f):0;return b&&re<b?Ym(b-re,O)+f:f}function LT(f,b,O){return O||b==null?b=0:b&&(b=+b),Ot(ss(f).replace(lt,""),b||0)}function ST(f,b,O){return(O?Cl(f,b,O):b===n)?b=1:b=di(b),If(ss(f),b)}function CT(){var f=arguments,b=ss(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var ET=zf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function PT(f,b,O){return O&&typeof O!="number"&&Cl(f,b,O)&&(b=O=n),O=O===n?Ze:O>>>0,O?(f=ss(f),f&&(typeof b=="string"||b!=null&&!v1(b))&&(b=rl(b),!b&&Na(f))?Bu(ro(f),0,O):f.split(b,O)):[]}var MT=zf(function(f,b,O){return f+(O?" ":"")+_1(b)});function kT(f,b,O){return f=ss(f),O=O==null?0:or(di(O),0,f.length),b=rl(b),f.slice(O,O+b.length)==b}function AT(f,b,O){var re=Ne.templateSettings;O&&Cl(f,b,O)&&(b=n),f=ss(f),b=o0({},b,re,Aw);var Se=o0({},b.imports,re.imports,Aw),Ue=xa(Se),ot=eo(Se,Ue),bt,Dt,cn=0,dn=b.interpolate||Br,bn="__p += '",qn=fu((b.escape||Br).source+"|"+dn.source+"|"+(dn===Ai?St:Br).source+"|"+(b.evaluate||Br).source+"|$","g"),mr="//# sourceURL="+(ri.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ta+"]")+`
`;f.replace(qn,function(Or,Mi,Ri,mu,El,vu){return Ri||(Ri=mu),bn+=f.slice(cn,vu).replace(zi,xl),Mi&&(bt=!0,bn+=`' +
__e(`+Mi+`) +
'`),El&&(Dt=!0,bn+=`';
`+El+`;
__p += '`),Ri&&(bn+=`' +
((__t = (`+Ri+`)) == null ? '' : __t) +
'`),cn=vu+Or.length,Or}),bn+=`';
`;var Dr=ri.call(b,"variable")&&b.variable;if(!Dr)bn=`with (obj) {
`+bn+`
}
`;else if(jt.test(Dr))throw new nr(a);bn=(Dt?bn.replace(Qt,""):bn).replace(xn,"$1").replace(Cn,"$1;"),bn="function("+(Dr||"obj")+`) {
`+(Dr?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(bt?", __e = _.escape":"")+(Dt?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+bn+`return __p
}`;var pi=xx(function(){return Mr(Ue,mr+"return "+bn).apply(n,ot)});if(pi.source=bn,m1(pi))throw pi;return pi}function TT(f){return ss(f).toLowerCase()}function DT(f){return ss(f).toUpperCase()}function OT(f,b,O){if(f=ss(f),f&&(O||b===n))return Qo(f);if(!f||!(b=rl(b)))return f;var re=ro(f),Se=ro(b),Ue=bo(re,Se),ot=Du(re,Se)+1;return Bu(re,Ue,ot).join("")}function NT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.slice(0,Xa(f)+1);if(!f||!(b=rl(b)))return f;var re=ro(f),Se=Du(re,ro(b))+1;return Bu(re,0,Se).join("")}function IT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.replace(lt,"");if(!f||!(b=rl(b)))return f;var re=ro(f),Se=bo(re,ro(b));return Bu(re,Se).join("")}function BT(f,b){var O=K,re=I;if(uo(b)){var Se="separator"in b?b.separator:Se;O="length"in b?di(b.length):O,re="omission"in b?rl(b.omission):re}f=ss(f);var Ue=f.length;if(Na(f)){var ot=ro(f);Ue=ot.length}if(O>=Ue)return f;var bt=O-no(re);if(bt<1)return re;var Dt=ot?Bu(ot,0,bt).join(""):f.slice(0,bt);if(Se===n)return Dt+re;if(ot&&(bt+=Dt.length-bt),v1(Se)){if(f.slice(bt).search(Se)){var cn,dn=Dt;for(Se.global||(Se=fu(Se.source,ss(qt.exec(Se))+"g")),Se.lastIndex=0;cn=Se.exec(dn);)var bn=cn.index;Dt=Dt.slice(0,bn===n?bt:bn)}}else if(f.indexOf(rl(Se),bt)!=bt){var qn=Dt.lastIndexOf(Se);qn>-1&&(Dt=Dt.slice(0,qn))}return Dt+re}function RT(f){return f=ss(f),f&&xr.test(f)?f.replace(er,Ja):f}var FT=zf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),_1=Lw("toUpperCase");function wx(f,b,O){return f=ss(f),b=O?n:b,b===n?ea(f)?Ia(f):pt(f):f.match(b)||[]}var xx=ci(function(f,b){try{return Li(f,n,b)}catch(O){return m1(O)?O:new nr(O)}}),jT=hd(function(f,b){return zs(b,function(O){O=Ic(O),Rn(f,O,p1(f[O],f))}),f});function zT(f){var b=f==null?0:f.length,O=kr();return f=b?Si(f,function(re){if(typeof re[1]!="function")throw new Ji(o);return[O(re[0]),re[1]]}):[],ci(function(re){for(var Se=-1;++Se<b;){var Ue=f[Se];if(Li(Ue[0],this,re))return Li(Ue[1],this,re)}})}function $T(f){return m(d(f,p))}function w1(f){return function(){return f}}function VT(f,b){return f==null||f!==f?b:f}var UT=Cw(),HT=Cw(!0);function Wl(f){return f}function x1(f){return ar(typeof f=="function"?f:d(f,p))}function WT(f){return zo(d(f,p))}function GT(f,b){return nc(f,d(b,p))}var qT=ci(function(f,b){return function(O){return $e(O,f,b)}}),YT=ci(function(f,b){return function(O){return $e(f,O,b)}});function L1(f,b,O){var re=xa(b),Se=Pn(b,re);O==null&&!(uo(b)&&(Se.length||!re.length))&&(O=b,b=f,f=this,Se=Pn(b,xa(b)));var Ue=!(uo(O)&&"chain"in O)||!!O.chain,ot=pd(f);return zs(Se,function(bt){var Dt=b[bt];f[bt]=Dt,ot&&(f.prototype[bt]=function(){var cn=this.__chain__;if(Ue||cn){var dn=f(this.__wrapped__),bn=dn.__actions__=Vl(this.__actions__);return bn.push({func:Dt,args:arguments,thisArg:f}),dn.__chain__=cn,dn}return Dt.apply(f,Jo([this.value()],arguments))})}),f}function KT(){return fs._===this&&(fs._=vs),this}function S1(){}function ZT(f){return f=di(f),ci(function(b){return Sl(b,f)})}var XT=t1(Si),JT=t1(hu),QT=t1(F);function Lx(f){return l1(f)?Er(Ic(f)):ys(f)}function eD(f){return function(b){return f==null?n:br(f,b)}}var tD=Pw(),nD=Pw(!0);function C1(){return[]}function E1(){return!1}function rD(){return{}}function iD(){return""}function sD(){return!0}function oD(f,b){if(f=di(f),f<1||f>X)return[];var O=Ze,re=Pe(f,Ze);b=kr(b),f-=Ze;for(var Se=ms(re,b);++O<f;)b(O);return Se}function aD(f){return si(f)?Si(f,Ic):gu(f)?[f]:Vl(Uw(ss(f)))}function lD(f){var b=++ya;return ss(f)+b}var uD=qm(function(f,b){return f+b},0),cD=n1("ceil"),dD=qm(function(f,b){return f/b},1),hD=n1("floor");function fD(f){return f&&f.length?be(f,Wl,gt):n}function pD(f,b){return f&&f.length?be(f,kr(b,2),gt):n}function gD(f){return fr(f,Wl)}function mD(f,b){return fr(f,kr(b,2))}function vD(f){return f&&f.length?be(f,Wl,ii):n}function yD(f,b){return f&&f.length?be(f,kr(b,2),ii):n}var bD=qm(function(f,b){return f*b},1),_D=n1("round"),wD=qm(function(f,b){return f-b},0);function xD(f){return f&&f.length?Ci(f,Wl):0}function LD(f,b){return f&&f.length?Ci(f,kr(b,2)):0}return Ne.after=WA,Ne.ary=ex,Ne.assign=D6,Ne.assignIn=px,Ne.assignInWith=o0,Ne.assignWith=O6,Ne.at=N6,Ne.before=tx,Ne.bind=p1,Ne.bindAll=jT,Ne.bindKey=nx,Ne.castArray=r6,Ne.chain=Xw,Ne.chunk=hk,Ne.compact=fk,Ne.concat=pk,Ne.cond=zT,Ne.conforms=$T,Ne.constant=w1,Ne.countBy=xA,Ne.create=I6,Ne.curry=rx,Ne.curryRight=ix,Ne.debounce=sx,Ne.defaults=B6,Ne.defaultsDeep=R6,Ne.defer=GA,Ne.delay=qA,Ne.difference=gk,Ne.differenceBy=mk,Ne.differenceWith=vk,Ne.drop=yk,Ne.dropRight=bk,Ne.dropRightWhile=_k,Ne.dropWhile=wk,Ne.fill=xk,Ne.filter=SA,Ne.flatMap=PA,Ne.flatMapDeep=MA,Ne.flatMapDepth=kA,Ne.flatten=qw,Ne.flattenDeep=Lk,Ne.flattenDepth=Sk,Ne.flip=YA,Ne.flow=UT,Ne.flowRight=HT,Ne.fromPairs=Ck,Ne.functions=H6,Ne.functionsIn=W6,Ne.groupBy=AA,Ne.initial=Pk,Ne.intersection=Mk,Ne.intersectionBy=kk,Ne.intersectionWith=Ak,Ne.invert=q6,Ne.invertBy=Y6,Ne.invokeMap=DA,Ne.iteratee=x1,Ne.keyBy=OA,Ne.keys=xa,Ne.keysIn=Hl,Ne.map=e0,Ne.mapKeys=Z6,Ne.mapValues=X6,Ne.matches=WT,Ne.matchesProperty=GT,Ne.memoize=n0,Ne.merge=J6,Ne.mergeWith=gx,Ne.method=qT,Ne.methodOf=YT,Ne.mixin=L1,Ne.negate=r0,Ne.nthArg=ZT,Ne.omit=Q6,Ne.omitBy=eT,Ne.once=KA,Ne.orderBy=NA,Ne.over=XT,Ne.overArgs=ZA,Ne.overEvery=JT,Ne.overSome=QT,Ne.partial=g1,Ne.partialRight=ox,Ne.partition=IA,Ne.pick=tT,Ne.pickBy=mx,Ne.property=Lx,Ne.propertyOf=eD,Ne.pull=Nk,Ne.pullAll=Kw,Ne.pullAllBy=Ik,Ne.pullAllWith=Bk,Ne.pullAt=Rk,Ne.range=tD,Ne.rangeRight=nD,Ne.rearg=XA,Ne.reject=FA,Ne.remove=Fk,Ne.rest=JA,Ne.reverse=h1,Ne.sampleSize=zA,Ne.set=rT,Ne.setWith=iT,Ne.shuffle=$A,Ne.slice=jk,Ne.sortBy=HA,Ne.sortedUniq=Gk,Ne.sortedUniqBy=qk,Ne.split=PT,Ne.spread=QA,Ne.tail=Yk,Ne.take=Kk,Ne.takeRight=Zk,Ne.takeRightWhile=Xk,Ne.takeWhile=Jk,Ne.tap=fA,Ne.throttle=e6,Ne.thru=Qm,Ne.toArray=dx,Ne.toPairs=vx,Ne.toPairsIn=yx,Ne.toPath=aD,Ne.toPlainObject=fx,Ne.transform=sT,Ne.unary=t6,Ne.union=Qk,Ne.unionBy=eA,Ne.unionWith=tA,Ne.uniq=nA,Ne.uniqBy=rA,Ne.uniqWith=iA,Ne.unset=oT,Ne.unzip=f1,Ne.unzipWith=Zw,Ne.update=aT,Ne.updateWith=lT,Ne.values=Uf,Ne.valuesIn=uT,Ne.without=sA,Ne.words=wx,Ne.wrap=n6,Ne.xor=oA,Ne.xorBy=aA,Ne.xorWith=lA,Ne.zip=uA,Ne.zipObject=cA,Ne.zipObjectDeep=dA,Ne.zipWith=hA,Ne.entries=vx,Ne.entriesIn=yx,Ne.extend=px,Ne.extendWith=o0,L1(Ne,Ne),Ne.add=uD,Ne.attempt=xx,Ne.camelCase=fT,Ne.capitalize=bx,Ne.ceil=cD,Ne.clamp=cT,Ne.clone=i6,Ne.cloneDeep=o6,Ne.cloneDeepWith=a6,Ne.cloneWith=s6,Ne.conformsTo=l6,Ne.deburr=_x,Ne.defaultTo=VT,Ne.divide=dD,Ne.endsWith=pT,Ne.eq=ac,Ne.escape=gT,Ne.escapeRegExp=mT,Ne.every=LA,Ne.find=CA,Ne.findIndex=Ww,Ne.findKey=F6,Ne.findLast=EA,Ne.findLastIndex=Gw,Ne.findLastKey=j6,Ne.floor=hD,Ne.forEach=Jw,Ne.forEachRight=Qw,Ne.forIn=z6,Ne.forInRight=$6,Ne.forOwn=V6,Ne.forOwnRight=U6,Ne.get=y1,Ne.gt=u6,Ne.gte=c6,Ne.has=G6,Ne.hasIn=b1,Ne.head=Yw,Ne.identity=Wl,Ne.includes=TA,Ne.indexOf=Ek,Ne.inRange=dT,Ne.invoke=K6,Ne.isArguments=zh,Ne.isArray=si,Ne.isArrayBuffer=d6,Ne.isArrayLike=Ul,Ne.isArrayLikeObject=$o,Ne.isBoolean=h6,Ne.isBuffer=qd,Ne.isDate=f6,Ne.isElement=p6,Ne.isEmpty=g6,Ne.isEqual=m6,Ne.isEqualWith=v6,Ne.isError=m1,Ne.isFinite=y6,Ne.isFunction=pd,Ne.isInteger=ax,Ne.isLength=i0,Ne.isMap=lx,Ne.isMatch=b6,Ne.isMatchWith=_6,Ne.isNaN=w6,Ne.isNative=x6,Ne.isNil=S6,Ne.isNull=L6,Ne.isNumber=ux,Ne.isObject=uo,Ne.isObjectLike=So,Ne.isPlainObject=Yp,Ne.isRegExp=v1,Ne.isSafeInteger=C6,Ne.isSet=cx,Ne.isString=s0,Ne.isSymbol=gu,Ne.isTypedArray=Vf,Ne.isUndefined=E6,Ne.isWeakMap=P6,Ne.isWeakSet=M6,Ne.join=Tk,Ne.kebabCase=vT,Ne.last=Ru,Ne.lastIndexOf=Dk,Ne.lowerCase=yT,Ne.lowerFirst=bT,Ne.lt=k6,Ne.lte=A6,Ne.max=fD,Ne.maxBy=pD,Ne.mean=gD,Ne.meanBy=mD,Ne.min=vD,Ne.minBy=yD,Ne.stubArray=C1,Ne.stubFalse=E1,Ne.stubObject=rD,Ne.stubString=iD,Ne.stubTrue=sD,Ne.multiply=bD,Ne.nth=Ok,Ne.noConflict=KT,Ne.noop=S1,Ne.now=t0,Ne.pad=_T,Ne.padEnd=wT,Ne.padStart=xT,Ne.parseInt=LT,Ne.random=hT,Ne.reduce=BA,Ne.reduceRight=RA,Ne.repeat=ST,Ne.replace=CT,Ne.result=nT,Ne.round=_D,Ne.runInContext=Lt,Ne.sample=jA,Ne.size=VA,Ne.snakeCase=ET,Ne.some=UA,Ne.sortedIndex=zk,Ne.sortedIndexBy=$k,Ne.sortedIndexOf=Vk,Ne.sortedLastIndex=Uk,Ne.sortedLastIndexBy=Hk,Ne.sortedLastIndexOf=Wk,Ne.startCase=MT,Ne.startsWith=kT,Ne.subtract=wD,Ne.sum=xD,Ne.sumBy=LD,Ne.template=AT,Ne.times=oD,Ne.toFinite=gd,Ne.toInteger=di,Ne.toLength=hx,Ne.toLower=TT,Ne.toNumber=Fu,Ne.toSafeInteger=T6,Ne.toString=ss,Ne.toUpper=DT,Ne.trim=OT,Ne.trimEnd=NT,Ne.trimStart=IT,Ne.truncate=BT,Ne.unescape=RT,Ne.uniqueId=lD,Ne.upperCase=FT,Ne.upperFirst=_1,Ne.each=Jw,Ne.eachRight=Qw,Ne.first=Yw,L1(Ne,function(){var f={};return en(Ne,function(b,O){ri.call(Ne.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Ne.VERSION=r,zs(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ne[f].placeholder=Ne}),zs(["drop","take"],function(f,b){Wr.prototype[f]=function(O){O=O===n?1:ae(di(O),0);var re=this.__filtered__&&!b?new Wr(this):this.clone();return re.__filtered__?re.__takeCount__=Pe(O,re.__takeCount__):re.__views__.push({size:Pe(O,Ze),type:f+(re.__dir__<0?"Right":"")}),re},Wr.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),zs(["filter","map","takeWhile"],function(f,b){var O=b+1,re=O==$||O==V;Wr.prototype[f]=function(Se){var Ue=this.clone();return Ue.__iteratees__.push({iteratee:kr(Se,3),type:O}),Ue.__filtered__=Ue.__filtered__||re,Ue}}),zs(["head","last"],function(f,b){var O="take"+(b?"Right":"");Wr.prototype[f]=function(){return this[O](1).value()[0]}}),zs(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Wr.prototype[f]=function(){return this.__filtered__?new Wr(this):this[O](1)}}),Wr.prototype.compact=function(){return this.filter(Wl)},Wr.prototype.find=function(f){return this.filter(f).head()},Wr.prototype.findLast=function(f){return this.reverse().find(f)},Wr.prototype.invokeMap=ci(function(f,b){return typeof f=="function"?new Wr(this):this.map(function(O){return $e(O,f,b)})}),Wr.prototype.reject=function(f){return this.filter(r0(kr(f)))},Wr.prototype.slice=function(f,b){f=di(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Wr(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==n&&(b=di(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Wr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Wr.prototype.toArray=function(){return this.take(Ze)},en(Wr.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),re=/^(?:head|last)$/.test(b),Se=Ne[re?"take"+(b=="last"?"Right":""):b],Ue=re||/^find/.test(b);Se&&(Ne.prototype[b]=function(){var ot=this.__wrapped__,bt=re?[1]:arguments,Dt=ot instanceof Wr,cn=bt[0],dn=Dt||si(ot),bn=function(Mi){var Ri=Se.apply(Ne,Jo([Mi],bt));return re&&qn?Ri[0]:Ri};dn&&O&&typeof cn=="function"&&cn.length!=1&&(Dt=dn=!1);var qn=this.__chain__,mr=!!this.__actions__.length,Dr=Ue&&!qn,pi=Dt&&!mr;if(!Ue&&dn){ot=pi?ot:new Wr(this);var Or=f.apply(ot,bt);return Or.__actions__.push({func:Qm,args:[bn],thisArg:n}),new Gs(Or,qn)}return Dr&&pi?f.apply(this,bt):(Or=this.thru(bn),Dr?re?Or.value()[0]:Or.value():Or)})}),zs(["pop","push","shift","sort","splice","unshift"],function(f){var b=Ba[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",re=/^(?:pop|shift)$/.test(f);Ne.prototype[f]=function(){var Se=arguments;if(re&&!this.__chain__){var Ue=this.value();return b.apply(si(Ue)?Ue:[],Se)}return this[O](function(ot){return b.apply(si(ot)?ot:[],Se)})}}),en(Wr.prototype,function(f,b){var O=Ne[b];if(O){var re=O.name+"";ri.call(Fo,re)||(Fo[re]=[]),Fo[re].push({name:b,func:O})}}),Fo[Gm(n,A).name]=[{name:"wrapper",func:n}],Wr.prototype.clone=$d,Wr.prototype.reverse=Mf,Wr.prototype.value=Vd,Ne.prototype.at=pA,Ne.prototype.chain=gA,Ne.prototype.commit=mA,Ne.prototype.next=vA,Ne.prototype.plant=bA,Ne.prototype.reverse=_A,Ne.prototype.toJSON=Ne.prototype.valueOf=Ne.prototype.value=wA,Ne.prototype.first=Ne.prototype.head,wr&&(Ne.prototype[wr]=yA),Ne},so=ta();ps?((ps.exports=so)._=so,gr._=so):fs._=so}).call(Ea)})(Gv,Gv.exports);var OE=Gv.exports;class Wa extends Xn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Je(this,"_width");Je(this,"_height");Je(this,"_center");Je(this,"_rotation");Je(this,"_isMapReady",!1);Je(this,"properties");Je(this,"_helperPoints",{corners:[],midPoints:[]});Je(this,"_throttledUpdateProperties");const i=n instanceof Xn.LatLngBounds?n:Xn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=An.measure("Rectangle.constructor.calculateWidth",()=>{const a=Z1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=An.measure("Rectangle.constructor.calculateHeight",()=>{const a=Z1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calcules depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=An.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=An.measure("Rectangle.constructor.initThrottle",()=>OE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){An.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Dbut mise  jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=t5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=t5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Xn.latLng(this._center.lat+o/2,this._center.lng-a/2),Xn.latLng(this._center.lat+o/2,this._center.lng+a/2),Xn.latLng(this._center.lat-o/2,this._center.lng+a/2),Xn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),h=l.map(k=>this._map.latLngToContainerPoint(k)),p=-this._rotation*Math.PI/180,v=Math.cos(p),g=Math.sin(p),E=h.map(k=>{const A=k.x-c.x,D=k.y-c.y;return Xn.point(c.x+(A*v-D*g),c.y+(A*g+D*v))}).map(k=>this._map.containerPointToLatLng(k));console.log("[Rectangle][_updatePolygonCoordinates] Rsultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return An.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Xn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=Z1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par dfaut"),1):a})}getRotatedCorners(){return An.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Xn.latLng(this._center.lat+i,this._center.lng-r),Xn.latLng(this._center.lat+i,this._center.lng+r),Xn.latLng(this._center.lat-i,this._center.lng+r),Xn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Xn.latLng(this._center.lat+i,this._center.lng-r),Xn.latLng(this._center.lat+i,this._center.lng+r),Xn.latLng(this._center.lat-i,this._center.lng+r),Xn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return An.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Xn.latLng(this._center.lat+s,this._center.lng),Xn.latLng(this._center.lat,this._center.lng+i),Xn.latLng(this._center.lat-s,this._center.lng),Xn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Xn.latLng(this._center.lat+i,this._center.lng),Xn.latLng(this._center.lat,this._center.lng+r),Xn.latLng(this._center.lat-i,this._center.lng),Xn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return An.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Xn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return An.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){An.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return An.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){An.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){An.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return An.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){An.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Dbut de la mise  jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise  jour des coordonnes du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise  jour des proprits"),this.updateProperties(),console.log("[Rectangle][setDimensions] mission de l'vnement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){An.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,g=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,k=Math.max(Math.abs(p*2)/g,1),A=Math.max(Math.abs(v*2)/g,1),D=k*g/2,z=A*g/2,Y=x*D*c-E*z*h,te=x*D*h+E*z*c,ge=Xn.point(s.x-Y,s.y-te),pe=this._map.containerPointToLatLng(ge),K=[Xn.point(ge.x-D,ge.y+z),Xn.point(ge.x+D,ge.y+z),Xn.point(ge.x+D,ge.y-z),Xn.point(ge.x-D,ge.y-z)].map(I=>{const R=I.x-ge.x,B=I.y-ge.y;return Xn.point(ge.x+(R*c-B*h),ge.y+(R*h+B*c))}).map(I=>this._map.containerPointToLatLng(I));this._width=k,this._height=A,this._center=pe,this.setLatLngs(K),this.fire("coordinates:updated",{corners:K,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){An.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),h=Math.sin(l),p=o*c-a*h,v=o*h+a*c,g=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/g:this._width=Math.abs(p*2)/g,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){An.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){An.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){An.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return An.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){An.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Xn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Xn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){An.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){An.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return An.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){An.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return An.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,h=r[o].lat;l>n.lat!=h>n.lat&&n.lng<(c-a)*(n.lat-l)/(h-l)+a&&(i=!i)}return i})}}var Yi=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Yi||{});const bf=Rp("notes",()=>{const t=Ct([]),e=Ct([]),n=Jn(()=>I=>t.value.find(R=>R.id===I)),r=Jn(()=>I=>{const R=t.value.find(B=>B.id===I);return R?R.color:"#6B7280"}),i=Jn(()=>I=>e.value.filter(R=>R.columnId===I).sort((R,B)=>R.order-B.order)),s=Jn(()=>t.value.find(I=>I.isDefault)||t.value[0]),o=Jn(()=>[...t.value].sort((I,R)=>I.order-R.order)),a=Jn(()=>I=>{const R=ga();if(!R.user)return!1;if(R.isAdmin)return!0;switch(I.accessLevel){case"private":return!0;case"company":return R.isAdmin||R.isEntreprise;case"employee":return R.isAdmin||R.isEntreprise||R.isSalarie;case"visitor":return R.isAdmin||R.isEntreprise||R.isSalarie||R.isVisiteur;default:return!1}}),l=Jn(()=>e.value.filter(I=>a.value(I))),c=Jn(()=>I=>l.value.filter(R=>R.columnId===I).sort((R,B)=>R.order-B.order));async function h(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const I=[{id:"1",title:"Ides",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:" faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Termines",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=I,console.log("[NotesStore][loadColumns] Colonnes fixes initialises:",t.value)}catch(I){throw console.error("[NotesStore][loadColumns] Erreur:",I),I}}async function p(I){console.log(`
[NotesStore][addColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function v(I,R){console.log(`
[NotesStore][updateColumn] Mise  jour locale de la colonne:`,I,R);try{const B=t.value.findIndex($=>$.id===I);B!==-1&&(t.value[B]={...t.value[B],...R},console.log("[NotesStore][updateColumn] tat des colonnes aprs mise  jour:",t.value))}catch(B){throw console.error("[NotesStore][updateColumn] Erreur:",B),B}}async function g(I){console.log(`
[NotesStore][removeColumn] Fonction dsactive - Utilisation de colonnes fixes`)}async function x(I){console.log(`
[NotesStore][reorderColumns] FONCTION DSACTIVE - Le dplacement des colonnes n'est plus possible`)}function E(I){if(!I)return"private";switch(I.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accs inconnu: ${I}, utilisation de PRIVATE par dfaut`),"private"}}function k(I){if(!I.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const R=new Date().toISOString(),B=e.value.filter(V=>V.columnId===I.columnId),$=B.length>0?Math.max(...B.map(V=>V.order))+1:0,U=E(I.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",I.id,"et niveau d'accs:",U),e.value.push({...I,id:I.id,order:$,accessLevel:U,createdAt:R,updatedAt:R,comments:[],photos:[]}),I.id}function A(I,R){console.log(`
[NotesStore][updateNote] Mise  jour de la note:`,I,R);try{const B=e.value.findIndex($=>$.id===I);B!==-1&&(R.color&&(R.style={...e.value[B].style,color:R.color,fillColor:R.color}),R.access_level&&(R.accessLevel=E(R.access_level),delete R.access_level),e.value[B]={...e.value[B],...R},console.log("[NotesStore][updateNote] Note mise  jour:",e.value[B]))}catch(B){throw console.error("[NotesStore][updateNote] Erreur:",B),B}}function D(I){e.value.findIndex(B=>B.id===I)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",I),e.value=e.value.filter(B=>B.id!==I)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",I)}function z(I,R){const B=e.value.findIndex($=>$.id===I);if(B!==-1){const $=e.value[B];if($.columnId!==R){const V=e.value.filter(we=>we.columnId===R),ne=V.length>0?Math.max(...V.map(we=>we.order))+1:0,X={...$,columnId:R,order:ne,updatedAt:new Date().toISOString()};e.value[B]=X}else e.value[B]={...e.value[B],updatedAt:new Date().toISOString()}}}function Y(I,R){R.forEach((B,$)=>{const U=e.value.findIndex(V=>V.id===B&&V.columnId===I);U!==-1&&(e.value[U]={...e.value[U],order:$,updatedAt:new Date().toISOString()})})}function te(I){switch(I){case"private":return"Priv";case"company":return"Entreprise";case"employee":return"Salaris";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function ge(I,R){try{const B=ga();if(!B.user)throw new Error("Vous devez tre connect pour ajouter un commentaire");if(!B.isEntreprise&&!B.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(ve=>ve.id===I))throw new Error(`La note avec l'ID ${I} n'existe pas`);const V=(await Ca.addComment(I,R)).data,ne=e.value.findIndex(ve=>ve.id===I);if(ne===-1)return;const X=e.value[ne];X.comments||(X.comments=[]);const we={id:V.id,text:V.text,createdAt:V.created_at,userId:V.user,userName:V.user_name,userRole:V.user_role};return X.comments.push(we),X.updatedAt=new Date().toISOString(),e.value[ne]={...X},we.id}catch(B){throw console.error("Erreur lors de l'ajout du commentaire:",B),B}}async function pe(I,R){try{const B=e.value.findIndex(V=>V.id===I);if(B===-1)throw new Error(`La note avec l'ID ${I} n'existe pas`);const $=e.value[B];if(!$.comments||$.comments.length===0)throw new Error("Aucun commentaire trouv pour cette note");if(!$.comments.some(V=>V.id===R))throw new Error(`Le commentaire avec l'ID ${R} n'existe pas`);await Ca.deleteComment(I,R),$.comments=$.comments.filter(V=>V.id!==R),$.updatedAt=new Date().toISOString(),e.value[B]={...$}}catch(B){throw console.error("Erreur lors de la suppression du commentaire:",B),B}}async function N(I,R){try{if(R.id&&R.image){const B=e.value.findIndex(V=>V.id===I);if(B===-1)return;const $=e.value[B];$.photos||($.photos=[]);const U={id:R.id,url:R.image,caption:R.caption,createdAt:R.created_at};return $.photos.push(U),$.updatedAt=new Date().toISOString(),e.value[B]={...$},U.id}else{const B=new FormData;B.append("image",R.url),R.caption&&B.append("caption",R.caption);const U=(await Ca.addPhoto(I,B)).data,V=e.value.findIndex(we=>we.id===I);if(V===-1)return;const ne=e.value[V];ne.photos||(ne.photos=[]);const X={id:U.id,url:U.image,caption:U.caption,createdAt:U.created_at};return ne.photos.push(X),ne.updatedAt=new Date().toISOString(),e.value[V]={...ne},X.id}}catch(B){throw console.error("Erreur lors de l'ajout de la photo:",B),B}}async function j(I,R){try{await Ca.deletePhoto(I,R);const B=e.value.findIndex(V=>V.id===I);if(B===-1){console.error("[NotesStore] Note non trouve pour la suppression de la photo");return}e.value[B].photos||(e.value[B].photos=[]);const $=e.value[B],U=($.photos||[]).filter(V=>V.id!==R);e.value[B]={...$,photos:U,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprime avec succs, photos restantes:",U.length)}catch(B){throw console.error("Erreur lors de la suppression de la photo:",B),B}}async function K(I,R,B){try{await Ca.updatePhoto(I,R,{caption:B});const $=e.value.findIndex(ne=>ne.id===I);if($===-1||!e.value[$].photos)return;const U=e.value[$],V=U.photos.findIndex(ne=>ne.id===R);if(V===-1)return;U.photos[V].caption=B,U.updatedAt=new Date().toISOString(),e.value[$]={...U}}catch($){throw console.error("Erreur lors de la mise  jour de la lgende:",$),$}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:te,loadColumns:h,addColumn:p,updateColumn:v,removeColumn:g,reorderColumns:x,addNote:k,updateNote:A,removeNote:D,moveNote:z,reorderNotes:Y,addComment:ge,removeComment:pe,addPhoto:N,removePhoto:j,updatePhoto:K}});class Ad extends Vt.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${r.color||"#2b6451"}" />
        </svg>
      </div>
    `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36]});if(!document.getElementById("geo-note-style")){const l=document.createElement("style");l.id="geo-note-style",l.textContent=`
        .geo-note-icon {
          background: none !important;
          border: none !important;
        }
        .geo-note-marker {
          display: flex;
          align-items: center;
          justify-content: center;
          width: 100%;
          height: 100%;
          transform-origin: center bottom;
        }
      `,document.head.appendChild(l)}super(n,{icon:o,draggable:!1,autoPan:!0,riseOnHover:!0,bubblingMouseEvents:!1,interactive:!0,keyboard:!1});Je(this,"properties");Je(this,"_planSaved",!1);Je(this,"_isMoving",!1);Je(this,"_animateZoom",()=>{});this.properties={type:"Note",name:r.name||"Note golocalise",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Yi.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note cre avec columnId:",this.properties.columnId),this.on("dblclick",this.onDoubleClick),this.on("add",l=>{if(l.target&&l.target._map){const c=l.target._map;this._protectFromZoomAnimationErrors(c),c.on("zoomend",()=>this.refreshIconStyle()),c.on("moveend",()=>this.refreshIconStyle())}}),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] vnement reu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][updateStyle] Correspondance trouve, mise  jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,h=this._dbId||this.properties.id;console.log("[GeoNote][update] vnement reu pour noteId:",c,"Comparaison avec ID backend:",h),c===h&&(console.log("[GeoNote][update] Correspondance trouve, mise  jour des proprits:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),console.log("[GeoNote][update] Proprits mises  jour:",this.properties))}),console.log("[GeoNote][constructor] Note cre:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Ides",2:" faire",3:"En cours",4:"Termines",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Yi.PRIVATE:return"Priv";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salaris";case Yi.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Vt.DomEvent.stopPropagation(n),this.editNote()}editNote(){const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] dition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilis: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] dition de note avec columnId:",r.columnId),console.log("[GeoNote] mission de l'vnement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var s;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Yi.PRIVATE);const n=this.properties.style||{};let r=n.color||n.fillColor;if(!r){const o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path");if(o){const a=o.getAttribute("fill");a&&(r=a,console.log("[GeoNote][updateProperties] Couleur rcupre depuis SVG:",r))}}r||(r="#2b6451",console.log("[GeoNote][updateProperties] Utilisation de la couleur par dfaut:",r)),console.log("[GeoNote][updateProperties] Couleur finale utilise:",r);const i=n.radius||12;this.properties.style={...n,color:r,weight:n.weight||2,fillColor:r,fillOpacity:n.fillOpacity||.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},console.log("[GeoNote][updateProperties] Style mis  jour:",this.properties.style)}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise  jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=this.getElement();if(s)try{const l=s.querySelector("svg path");l?(l.setAttribute("fill",i),console.log("[GeoNote][setNoteStyle] Couleur mise  jour directement sur le SVG existant")):(console.warn("[GeoNote][setNoteStyle] Impossible de trouver le path SVG dans l'lment"),this._updateIconWithNewColor(i))}catch(l){console.warn("[GeoNote][setNoteStyle] Erreur lors de la mise  jour directe du SVG:",l),this._updateIconWithNewColor(i)}else this._updateIconWithNewColor(i);const o=n._accessLevel||n.accessLevel||this.properties.accessLevel,a=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:o,accessLevel:o,category:a}),o&&this.properties.accessLevel!==o&&(this.properties.accessLevel=o,console.log("[GeoNote][setNoteStyle] Niveau d'accs mis  jour:",o)),a&&this.properties.category!==a&&(this.properties.category=a,console.log("[GeoNote][setNoteStyle] Catgorie mise  jour:",a)),this.refreshIconStyle(),console.log("[GeoNote][setNoteStyle] Mise  jour du popup")}refreshIconStyle(){const n=this.getElement();if(n&&(n.style.display="none",n.offsetHeight,n.style.display="",this._map))try{const r=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(n,r)}catch(r){console.warn("[GeoNote][refreshIconStyle] Erreur lors de la mise  jour de la position:",r)}}_protectFromZoomAnimationErrors(n){try{const r=this._animateZoom;this._animateZoom=function(i){try{if(!this._map||!i.center||!i.zoom){console.warn("[GeoNote][_animateZoom] Animation de zoom ignore: proprits manquantes");return}r.call(this,i)}catch(s){console.warn("[GeoNote][_animateZoom] Erreur lors de l'animation de zoom:",s);try{const o=this.getElement();if(o&&this._map){const a=this._map.latLngToLayerPoint(this.getLatLng());Vt.DomUtil.setPosition(o,a)}}catch(o){console.error("[GeoNote][_animateZoom] Erreur lors de la rcupration:",o)}}},console.log("[GeoNote][_protectFromZoomAnimationErrors] Protection contre les erreurs d'animation de zoom active")}catch(r){console.error("[GeoNote][_protectFromZoomAnimationErrors] Erreur lors de la mise en place de la protection:",r)}}_updateIconWithNewColor(n){try{const r=this._map;let i=!1;r&&(i=r.options.zoomAnimation||!1,r.options.zoomAnimation=!1);const s=`
        <div class="geo-note-marker">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
            <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" fill="${n}" />
          </svg>
        </div>
      `,o=Vt.divIcon({html:s,className:"geo-note-icon",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o),r&&i&&setTimeout(()=>{r.options.zoomAnimation=!0},100),console.log("[GeoNote][_updateIconWithNewColor] Icne mise  jour avec la nouvelle couleur")}catch(r){console.error("[GeoNote][_updateIconWithNewColor] Erreur lors de la mise  jour de l'icne:",r)}}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,h,p,v;console.log("[GeoNote][updateFromBackendData] Dbut de la mise  jour avec les donnes:",n),console.log("[GeoNote][updateFromBackendData] Couleur dans les donnes reues:",{styleColor:(l=n.style)==null?void 0:l.color,styleFillColor:(c=n.style)==null?void 0:c.fillColor,styleObject:n.style}),this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style;console.log("[GeoNote][updateFromBackendData] Style aprs traitement initial:",r);const i=((h=n.style)==null?void 0:h._accessLevel)||((p=n.style)==null?void 0:p.accessLevel)||n.accessLevel||this.properties.accessLevel||Yi.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accs rcupr:",i);const s=((v=n.style)==null?void 0:v.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catgorie rcupre:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise  jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),console.log("[GeoNote][updateFromBackendData] Note mise  jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,h,p,v,g,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const k=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnes GeoJSON reues:",k),r=[k[1],k[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les donnes de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Cration d'une note  partir des donnes:",n),console.log("[GeoNote][fromBackendData] Position utilise:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Yi.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accs rcupr:",i,"Style:",n.style);const s=((h=n.style)==null?void 0:h.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catgorie rcupre:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Cration de note avec columnId:",o);const a=new Ad(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(g=n.style)==null?void 0:g.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),console.log("[GeoNote][fromBackendData] Note cre:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){var r,i,s,o,a,l,c,h,p,v;if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties(),console.log("[GeoNote][saveNote] Couleur avant sauvegarde:",{styleColor:(r=this.properties.style)==null?void 0:r.color,styleFillColor:(i=this.properties.style)==null?void 0:i.fillColor,iconColor:((o=(s=this.getElement())==null?void 0:s.querySelector(".geo-note-marker svg path"))==null?void 0:o.getAttribute("fill"))||"non disponible"});let g=((a=this.properties.style)==null?void 0:a.color)||"#2b6451";if(g.startsWith("rgb")){const A=(l=this.getElement())==null?void 0:l.querySelector(".geo-note-marker svg path");if(A){const D=A.getAttribute("fill");D&&(g=D,console.log("[GeoNote][saveNote] Couleur rcupre depuis SVG pour remplacer RGB:",g))}}const x={...this.properties.style,color:g,fillColor:g,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category};console.log("[GeoNote][saveNote] Style final pour l'envoi:",x);const E={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:x,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(E.plan=n),console.log("[GeoNote][saveNote] Donnes  envoyer:",E),console.log("[GeoNote][saveNote] Couleur dans les donnes envoyes:",{styleColor:E.style.color,styleFillColor:E.style.fillColor});let k;return this._dbId?(k=(await Ca.updateNote(this._dbId,E)).data,console.log("[GeoNote][saveNote] Note mise  jour avec succs:",k),console.log("[GeoNote][saveNote] Couleur dans la rponse du backend (update):",{styleColor:(c=k.style)==null?void 0:c.color,styleFillColor:(h=k.style)==null?void 0:h.fillColor,styleObject:k.style})):(k=(await Ca.createNote(E)).data,console.log("[GeoNote][saveNote] Note cre avec succs:",k),console.log("[GeoNote][saveNote] Couleur dans la rponse du backend (create):",{styleColor:(p=k.style)==null?void 0:p.color,styleFillColor:(v=k.style)==null?void 0:v.fillColor,styleObject:k.style}),this._dbId=k.id,bf().addNote({...k,id:k.id,columnId:k.column,accessLevel:k.access_level})),this._planSaved=!0,k.id}catch(g){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",g),iu().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function _z(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function wz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function f5(t){var e,n,r,i,s,o,a,l,c,h,p,v,g,x,E,k,A,D,z,Y,te,ge;if(console.log("[DrawingStore] Conversion de la forme en lment",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const pe=t.getLatLng();return{type_forme:"Note",data:{points:[[pe.lng,pe.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((h=t.properties.style)==null?void 0:h.name)||""}}}}if(t instanceof uh||((p=t.properties)==null?void 0:p.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(j=>[j.lng,j.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((g=t.properties.style)==null?void 0:g.weight)||3,opacity:((x=t.properties.style)==null?void 0:x.opacity)||1,fillColor:((E=t.properties.style)==null?void 0:E.fillColor)||"#2b6451",fillOpacity:((k=t.properties.style)==null?void 0:k.fillOpacity)||.2,name:((A=t.properties.style)==null?void 0:A.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ua||((D=t.properties)==null?void 0:D.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(j=>[j.lng,j.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((z=t.properties.style)==null?void 0:z.color)||"#2b6451",weight:((Y=t.properties.style)==null?void 0:Y.weight)||3,opacity:((te=t.properties.style)==null?void 0:te.opacity)||1,name:((ge=t.properties.style)==null?void 0:ge.name)||""}}};throw new Error("Type de forme non reconnu")}function xz(t){var e,n,r,i,s,o,a,l,c,h,p,v,g,x,E,k,A,D,z,Y,te,ge,pe,N,j,K,I,R,B,$,U,V,ne,X,we;switch(console.log("[DrawingStore] Conversion de l'lment stock en forme",{element:t}),t.type_forme){case"Polygon":{const ve=t.data;if(!_z(ve))return console.error("[DrawingStore] Donnes invalides pour Polygon"),null;const Ze=ve.points.map(Z=>Xn.latLng(Z[1],Z[0])),ie=((e=ve.style)==null?void 0:e._accessLevel)||((n=ve.style)==null?void 0:n.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accs rcupr:",ie,"Style:",ve.style),ve.accessLevel=ie;const H=new uh([Ze],{color:((r=ve.style)==null?void 0:r.color)||"#2b6451",weight:((i=ve.style)==null?void 0:i.weight)||3,opacity:((s=ve.style)==null?void 0:s.opacity)||1,fillColor:((o=ve.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ve.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ve.style)==null?void 0:l.dashArray)||"",name:((c=ve.style)==null?void 0:c.name)||"",category:ve.category||"forages",accessLevel:ie});return H.updateProperties(),H}case"Line":{const ve=t.data;if(!wz(ve))return console.error("[DrawingStore] Donnes invalides pour Ligne"),null;const Ze=ve.points.map(Z=>Xn.latLng(Z[1],Z[0])),ie=((h=ve.style)==null?void 0:h._accessLevel)||((p=ve.style)==null?void 0:p.accessLevel)||ve.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accs rcupr:",ie,"Style:",ve.style),ve.accessLevel=ie;const H=new ua(Ze,{...ve.style||{},name:((v=ve.style)==null?void 0:v.name)||"",category:ve.category||"forages",accessLevel:ie});return H.updateProperties(),H}case"Rectangle":{const ve=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ve,bounds:ve.bounds,width:ve.width,height:ve.height,rotation:ve.rotation}),!ve.bounds)return console.error("[DrawingStore] Donnes de bounds manquantes pour Rectangle"),null;const Ze=new Xn.LatLngBounds(Xn.latLng(ve.bounds.southWest[1],ve.bounds.southWest[0]),Xn.latLng(ve.bounds.northEast[1],ve.bounds.northEast[0])),ie=new Wa(Ze,{color:((g=ve.style)==null?void 0:g.color)||"#2b6451",weight:((x=ve.style)==null?void 0:x.weight)||3,opacity:((E=ve.style)==null?void 0:E.opacity)||1,fillColor:((k=ve.style)==null?void 0:k.fillColor)||"#2b6451",fillOpacity:((A=ve.style)==null?void 0:A.fillOpacity)||.2,dashArray:((D=ve.style)==null?void 0:D.dashArray)||"",name:((z=ve.style)==null?void 0:z.name)||"",width:ve.width,height:ve.height});return ve.rotation&&ie.setRotation(ve.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restaur:",{bounds:ie.getBounds(),dimensions:ie.getDimensions(),properties:ie.properties}),ie}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle  partir de l'API",{id:t.id,data:t.data,hasName:((te=(Y=t.data)==null?void 0:Y.style)==null?void 0:te.name)!==void 0,name:(pe=(ge=t.data)==null?void 0:ge.style)==null?void 0:pe.name});const ve=t.data;if(!ve.center||!ve.radius)return console.error("[DrawingStore] Donnes invalides pour Circle"),null;const Ze=Xn.circle([ve.center[1],ve.center[0]],{color:((N=ve.style)==null?void 0:N.color)||"#2b6451",weight:((j=ve.style)==null?void 0:j.weight)||3,opacity:((K=ve.style)==null?void 0:K.opacity)||1,fillColor:((I=ve.style)==null?void 0:I.fillColor)||"#2b6451",fillOpacity:((R=ve.style)==null?void 0:R.fillOpacity)||.2,dashArray:((B=ve.style)==null?void 0:B.dashArray)||"",radius:ve.radius});return Ze.properties={type:"Circle",radius:ve.radius,diameter:ve.radius*2,surface:Math.PI*ve.radius*ve.radius,perimeter:2*Math.PI*ve.radius,style:{...ve.style||{},name:(($=ve.style)==null?void 0:$.name)||""}},console.log("[DrawingStore] Cercle cr:",{centerType:typeof ve.center,center:ve.center,radius:ve.radius,style:Ze.properties.style,name:Ze.properties.style.name}),Ze}case"Note":{console.log("[DrawingStore] Traitement d'une Note  partir de l'API",{id:t.id,data:t.data});const ve=t.data;if(!ve.location)return console.error("[DrawingStore] Donnes invalides pour Note"),null;try{const Ze={location:ve.location,name:ve.name||"Note golocalise",description:ve.description||"",columnId:ve.columnId||"en-cours",accessLevel:ve.accessLevel||"private",category:ve.category||"forages",style:{color:((U=ve.style)==null?void 0:U.color)||"#2b6451",weight:((V=ve.style)==null?void 0:V.weight)||2,fillColor:((ne=ve.style)==null?void 0:ne.fillColor)||"#2b6451",fillOpacity:((X=ve.style)==null?void 0:X.fillOpacity)||.8,radius:((we=ve.style)==null?void 0:we.radius)||12},comments:ve.comments||[],photos:ve.photos||[],order:ve.order||0,createdAt:ve.createdAt||new Date().toISOString(),updatedAt:ve.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Donnes prpares pour la note:",Ze);const ie=Ad.fromBackendData(Ze);return ie._dbId=t.id,console.log("[DrawingStore] Note cre:",{id:t.id,location:Ze.location,name:Ze.name,type:ie.properties.type}),ie}catch(Ze){return console.error("[DrawingStore] Erreur lors de la cration de la Note:",Ze),null}}default:return console.warn("[DrawingStore] Type non gr pour la restauration:",t.type_forme),null}}const kp=Rp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:zp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun lment dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Dbut du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] lments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vrification de l'lment ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par catgorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} visible: type=${n.type_forme}, catgorie=${i}, accs=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] lment ${n.id} filtr par niveau d'accs: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Rsultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un lment",{element:t,isLeafletLayer:t instanceof Xn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Xn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>f5(t),"DrawingStore");console.log("[DrawingStore] lment converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(t.accessLevels&&({...this.filters.accessLevels},this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels}),t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories};const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}}))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes};const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}}))}}window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} dj charg avec ${this.elements.length} lments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Dbut du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>In.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Donnes du plan reues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse dtaille forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stocke",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme dj au format lment",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=xz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succs",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),f5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Charg ${this.elements.length} lments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des prfrences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des lments:",n),this.error="Erreur lors du chargement des lments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Dbut de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan slectionn pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>In.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] lments aprs filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),NE=Rp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:zp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=iu();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>y0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>y0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre cr avec succs:",n.data),n.data}catch(n){throw this.error="Erreur lors de la cration du filtre",console.error("[MapFilterStore] Erreur lors de la cration du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>y0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis  jour avec succs:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise  jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise  jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>y0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprim avec succs:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),$y=Rp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:zp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=ga();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>In.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=ga();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>In.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await v0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=iu();try{const i=ga();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>v0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a t cr avec succs`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la cration du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await v0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la cration du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement  sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return In.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=iu();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),In.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise  jour du plan:",i),r.error(`Erreur lors de la mise  jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await In.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la rcupration de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await In.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=iu();try{const r=this.plans.find(i=>i.id===t);await v0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a t supprim avec succs`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Lz={class:"hidden md:hidden flex-mobile items-center justify-between p-4 border-b border-gray-200"},Sz={class:"flex-1 overflow-y-auto"},Cz={class:"border-b border-gray-200"},Ez={class:"flex -mb-px"},Pz={class:"flex-1 overflow-hidden flex flex-col"},Mz={key:0,class:"p-3 overflow-y-auto flex-1"},kz={class:"grid grid-cols-3 gap-1.5 mb-4"},Az=["onClick","title"],Tz=["innerHTML"],Dz={key:1,class:"my-4 border-t border-gray-200"},Oz={key:2,class:"mt-4"},Nz={key:0,class:"mb-4"},Iz={class:"mb-4"},Bz=["value"],Rz={class:"mb-4"},Fz={class:"grid grid-cols-1 gap-4"},jz={key:0,class:"space-y-1"},zz={class:"flex justify-between items-center"},$z={class:"text-sm font-medium text-gray-500"},Vz={class:"flex justify-between items-center"},Uz={class:"text-sm font-medium text-gray-500"},Hz={class:"text-sm font-medium text-gray-500"},Wz={class:"flex flex-col space-y-2 w-full"},Gz={class:"flex justify-between items-center"},qz={class:"text-sm font-medium text-gray-500 ml-2"},Yz={class:"flex justify-between items-center"},Kz={class:"text-sm font-medium text-gray-500 ml-2"},Zz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},r$={ref:"elevationCanvas"},i$={key:1,class:"p-3 overflow-y-auto flex-1"},s$={class:"grid grid-cols-6 gap-2 mb-4"},o$=["onClick","title"],a$={key:0,class:"space-y-4"},l$={class:"flex items-center gap-4"},u$={class:"flex items-center gap-2"},c$={class:"flex items-center gap-4"},d$=["value"],h$={key:0,class:"flex items-center gap-4"},f$={class:"flex items-center gap-2"},p$={key:1,class:"space-y-4"},g$={class:"flex items-center gap-4"},m$={class:"flex items-center gap-2"},v$={class:"flex items-center gap-4"},y$={class:"flex items-center gap-2"},b$={key:2,class:"filters-tab"},_$={class:"filters-content"},w$={class:"space-y-2"},x$={class:"space-y-2 mt-4"},L$={class:"space-y-1"},S$={class:"flex items-center"},C$={class:"flex items-center"},E$={class:"flex items-center"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={key:0,class:"flex items-center"},T$=["onUpdate:modelValue"],D$={class:"ml-2 text-sm text-gray-700"},O$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},N$={class:"flex space-x-2"},I$=["disabled"],B$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},R$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},F$={class:"space-y-2 mt-4"},j$={class:"space-y-1"},z$={class:"flex items-center"},$$={class:"flex items-center"},V$={class:"flex items-center"},U$={class:"flex items-center"},H$={key:0,class:"p-3 border-t border-gray-200"},W$={class:"mt-3"},G$={class:"mb-4"},q$={class:"grid grid-cols-2 gap-2"},Y$={class:"grid grid-cols-2 gap-2"},K$=Rs({__name:"DrawingTools",props:{show:{type:Boolean,default:!1},selectedTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]},isDrawing:{type:Boolean,default:!1}},emits:["update:show","tool-selected","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=kp(),i=ga(),s=Jn(()=>i.isAdmin),o=Jn(()=>i.isEntreprise),a=NE(),l=$y(),c=su({name:""}),h=Ct(!1),p=Ct(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"Note",label:"Note golocalise"}],g=Ce=>{switch(Ce){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=Ct("tools");ki(()=>n.selectedTool,(Ce,ye)=>{console.log("[DrawingTools][watch selectedTool] Changement d'outil:",{newTool:Ce,oldTool:ye})}),ki(x,(Ce,ye)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Ce,oldTab:ye}),Ce==="filters"&&ye!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage  l'onglet filtres"),console.log("[DrawingTools][watch activeTab] tat actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] tat actuel des filtres locaux:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Dslection de la forme actuelle lors du passage  l'onglet filtres"),ue("tool-selected","")),setTimeout(()=>{ce()},0)),ye==="filters"&&Ce!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] tat des filtres locaux avant application:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),ce())});const E=Ct({samplePoints:!0,circleSections:!0}),k=Ct("#2b6451"),A=Ct(2),D=Ct("solid"),z=Ct("#2b6451"),Y=Ct(.2),te=Ct(!0),ge=Ct(""),pe=Ct("default"),N=Ct("visitor"),j=Ct({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),K=Ct({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),I=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],R=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointills"}],B=Ct("company"),$=su({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),U=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accs: ${Ce}`),B.value=Ce,Ce==="company"?($.accessLevels.company=!0,$.accessLevels.employee=!1,$.accessLevels.visitor=!1):Ce==="employee"?($.accessLevels.company=!1,$.accessLevels.employee=!0,$.accessLevels.visitor=!1):Ce==="visitor"&&($.accessLevels.company=!1,$.accessLevels.employee=!1,$.accessLevels.visitor=!0),ce()},V=Ce=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accs: ${Ce}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Dslection de la forme actuelle"),ue("tool-selected","")),U(Ce)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const ne=Jn(()=>n.selectedShape&&n.selectedShape.properties||null),X=Ce=>{E.value[Ce]=!E.value[Ce]},we=Ce=>{k.value=Ce,z.value=Ce,ve({strokeColor:Ce,fillColor:Ce})},ve=Ce=>{n.selectedShape&&ue("style-update",Ce)},Ze=()=>{n.selectedShape&&ue("properties-update",{name:ge.value})},ie=()=>{n.selectedShape&&ue("properties-update",{category:pe.value})},H=()=>{n.selectedShape&&ue("properties-update",{accessLevel:N.value})},Z=()=>{var Ce;!n.selectedShape||((Ce=ne.value)==null?void 0:Ce.type)!=="ElevationLine"||ue("style-update",{samplePointStyle:j.value})},me=()=>{var Ce;!n.selectedShape||((Ce=ne.value)==null?void 0:Ce.type)!=="ElevationLine"||ue("style-update",{minMaxPointStyle:K.value})},fe=()=>{console.log("[DrawingTools][resetFilters] Dbut de la rinitialisation des filtres"),console.log("[DrawingTools][resetFilters] tat actuel des filtres:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2));const Ce={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres  appliquer:",JSON.stringify(Ce,null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres locaux"),$.accessLevels.company=!0,$.accessLevels.employee=!0,$.accessLevels.visitor=!0,$.categories.forages=!0,$.categories.clients=!0,$.categories.entrepots=!0,$.categories.livraisons=!0,$.categories.cultures=!0,$.categories.parcelles=!0,$.shapeTypes.Polygon=!0,$.shapeTypes.Line=!0,$.shapeTypes.ElevationLine=!0,$.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux aprs mise  jour:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise  jour des filtres dans le store"),r.updateFilters(Ce),console.log("[DrawingTools][resetFilters] mission de l'event filter-change"),ue("filter-change",Ce),console.log("[DrawingTools][resetFilters] Mise  jour force de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres rinitialiss avec succs")},de=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Dbut de la rinitialisation des filtres avec dslection"),he(),fe(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres rinitialiss et forme dslectionne avec succs")},ce=()=>{const Ce={...$.accessLevels},ye={...$.categories},Ve={...$.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Ce,categories:ye,shapeTypes:Ve},null,2));const Ye={accessLevels:Ce,categories:ye,shapeTypes:Ve};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify(Ye,null,2)),r.updateFilters(Ye),console.log("[DrawingTools][applyFilters] mission de l'event filter-change"),ue("filter-change",Ye),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise  jour force de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:Ye}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqus avec succs")},J=Ce=>`${Math.round(Ce)} m`,Re=Ce=>Ce>=1e4?`${(Ce/1e4).toFixed(2)} ha`:`${Math.round(Ce)} m`,De=Ce=>`${Ce.toFixed(1)}%`,et=Ce=>p.value.includes(Ce)?Ce:Ce.split("_").map(ye=>ye.charAt(0).toUpperCase()+ye.slice(1)).join(" "),he=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Dslection de la forme actuelle"),ue("tool-selected",""))};async function Q(){var Ce,ye;if(!(!c.name||h.value)){h.value=!0;try{const Ve=c.name.toLowerCase().replace(/\s+/g,"_"),Ye=l.currentPlan;let Ke=null;if(Ye!=null&&Ye.entreprise_id?Ke=Ye.entreprise_id:Ye!=null&&Ye.entreprise&&typeof Ye.entreprise=="object"&&"id"in Ye.entreprise?Ke=Ye.entreprise.id:(Ce=i.user)!=null&&Ce.enterprise_id?Ke=i.user.enterprise_id:i.isEntreprise&&((ye=i.user)!=null&&ye.id)&&(Ke=i.user.id),!Ke){console.error("[DrawingTools] Impossible de crer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Cration d'un filtre pour l'entreprise:",Ke);const _t=await a.createFilter({name:c.name,category:Ve,entreprise:Ke});console.log("[DrawingTools] Filtre cr avec succs:",_t),$.categories[Ve]||(console.log(`[DrawingTools] Ajout de la catgorie ${Ve} aux filtres locaux`),$.categories[Ve]=!0),console.log(`[DrawingTools] Mise  jour du DrawingStore avec la catgorie ${Ve}`);const Ge={...r.filters.categories};Ge[Ve]=!0,r.updateFilters({categories:Ge}),console.log("[DrawingTools] mission de l'vnement filter-change"),ue("filter-change",$),c.name=""}catch(Ve){console.error("[DrawingTools] Erreur lors de la cration du filtre:",Ve)}finally{h.value=!1}}}const se=()=>{he(),x.value="filters"},ue=e;cm(()=>{var Ce,ye,Ve,Ye,Ke,_t,Ge;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise  jour des proprits pour la forme slectionne:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Ce=n.selectedShape.layer)==null?void 0:Ce._leaflet_id});const ft=n.selectedShape.options||{};k.value=ft.color||"#2b6451",A.value=ft.weight||3,D.value=ft.dashArray?"dashed":"solid",z.value=ft.fillColor||"#2b6451",Y.value=ft.fillOpacity||.2;const Ut=n.selectedShape.type||((ye=n.selectedShape.properties)==null?void 0:ye.type)||"";te.value=Ut!=="Line",console.log("[DrawingTools][watchEffect] Type de forme dtect:",Ut),ge.value=((Ve=n.selectedShape.properties)==null?void 0:Ve.name)||"",pe.value=((Ye=n.selectedShape.properties)==null?void 0:Ye.category)||"forages",N.value=((Ke=n.selectedShape.properties)==null?void 0:Ke.accessLevel)||"visitor",Ut==="ElevationLine"&&((_t=n.selectedShape.properties)!=null&&_t.samplePointStyle&&(j.value={...n.selectedShape.properties.samplePointStyle}),(Ge=n.selectedShape.properties)!=null&&Ge.minMaxPointStyle&&(K.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Proprits mises  jour avec succs")}}),go(async()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Ce=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Ce.accessLevels},categories:{...Ce.categories},shapeTypes:{...Ce.shapeTypes}},null,2)),$.accessLevels.company=Ce.accessLevels.company,$.accessLevels.employee=Ce.accessLevels.employee,$.accessLevels.visitor=Ce.accessLevels.visitor,$.categories.forages=Ce.categories.forages,$.categories.clients=Ce.categories.clients,$.categories.entrepots=Ce.categories.entrepots,$.categories.livraisons=Ce.categories.livraisons,$.categories.cultures=Ce.categories.cultures,$.categories.parcelles=Ce.categories.parcelles,$.shapeTypes.Polygon=Ce.shapeTypes.Polygon,$.shapeTypes.Line=Ce.shapeTypes.Line,$.shapeTypes.ElevationLine=Ce.shapeTypes.ElevationLine,$.shapeTypes.Note=Ce.shapeTypes.Note;try{console.log("[DrawingTools][onMounted] Chargement des filtres personnaliss"),await a.fetchFilters();const ye=a.getUniqueCategories;console.log("[DrawingTools][onMounted] Catgories personnalises trouves:",ye);const Ve=[];ye.forEach(Ye=>{!p.value.includes(Ye)&&!$.categories[Ye]&&(console.log(`[DrawingTools][onMounted] Ajout de la catgorie personnalise: ${Ye}`),$.categories[Ye]=!0,Ve.push(Ye))}),Ve.length>0&&(console.log("[DrawingTools][onMounted] Mise  jour du store avec les catgories personnalises:",Ve),r.updateFilters({categories:$.categories}),ue("filter-change",$))}catch(ye){console.error("[DrawingTools][onMounted] Erreur lors du chargement des filtres personnaliss:",ye)}console.log("[DrawingTools][onMounted] Filtres locaux aprs initialisation:",JSON.stringify({accessLevels:{...$.accessLevels},categories:{...$.categories},shapeTypes:{...$.shapeTypes}},null,2))}),ki($,(Ce,ye)=>{console.log("[DrawingTools][watch filters] Changement dtect:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Ce.accessLevels,categories:Ce.categories,shapeTypes:Ce.shapeTypes}),oldFilters:JSON.stringify({accessLevels:ye.accessLevels,categories:ye.categories,shapeTypes:ye.shapeTypes})});const Ve=Object.keys(Ce.accessLevels).filter(Ge=>ye.accessLevels[Ge]!==Ce.accessLevels[Ge]),Ye=Object.keys(Ce.categories).filter(Ge=>ye.categories[Ge]!==Ce.categories[Ge]),Ke=Object.keys(Ce.shapeTypes).filter(Ge=>ye.shapeTypes[Ge]!==Ce.shapeTypes[Ge]),_t=Ve.length>0||Ye.length>0||Ke.length>0;console.log("[DrawingTools][watch filters] Diffrences dtectes:",{accessLevelsDiff:Ve,categoriesDiff:Ye,shapeTypesDiff:Ke,hasChanges:_t}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),ce()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const ze=Ce=>{console.log("[DrawingTools][handleToolClick] Outil cliqu:",Ce,"Outil actuel:",n.selectedTool),ue("tool-selected",n.selectedTool===Ce?"":Ce),window.innerWidth<768&&ue("update:show",!1)};return(Ce,ye)=>{var Ve,Ye,Ke,_t;return Te(),Ie("div",{class:Di(["drawing-tools-panel",{open:t.show}])},[S("div",Lz,[ye[47]||(ye[47]=S("div",{class:"flex items-center"},[S("div",{class:"w-10 h-1.5 bg-gray-300 rounded-full mr-3"}),S("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),S("button",{onClick:ye[0]||(ye[0]=Ge=>Ce.$emit("update:show",!1)),class:"p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"},ye[46]||(ye[46]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-700",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",Sz,[S("div",Cz,[S("nav",Ez,[S("button",{onClick:ye[1]||(ye[1]=Ge=>x.value="tools"),class:Di([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ye[48]||(ye[48]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),S("span",null,"Outils",-1)]),2),t.selectedShape&&((Ve=t.selectedShape.properties)==null?void 0:Ve.type)!=="Note"?(Te(),Ie("button",{key:0,onClick:ye[2]||(ye[2]=Ge=>x.value="style"),class:Di([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ye[49]||(ye[49]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),S("span",null,"Style",-1)]),2)):Jt("",!0),S("button",{onClick:se,class:Di([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},ye[50]||(ye[50]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),S("span",null,"Filtres",-1)]),2)])]),S("div",Pz,[x.value==="tools"?(Te(),Ie("div",Mz,[S("div",kz,[(Te(!0),Ie(wn,null,ir(v.filter(Ge=>Ge.type!=="delete"),Ge=>(Te(),Ie("button",{key:Ge.type,class:Di(["flex items-center justify-center p-2 rounded-md border transition-all duration-200",{"bg-primary-50 border-primary-500 text-primary-600":n.selectedTool===Ge.type,"hover:bg-gray-50 border-gray-300 text-gray-700":n.selectedTool!==Ge.type}]),onClick:ft=>ze(Ge.type),title:Ge.label},[S("span",{class:"icon",innerHTML:g(Ge.type)},null,8,Tz)],10,Az))),128))]),t.selectedShape?(Te(),Ie("button",{key:0,class:Di(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":n.selectedTool==="delete"}]),onClick:ye[3]||(ye[3]=Ge=>Ce.$emit("delete-shape")),title:"Supprimer la forme"},ye[51]||(ye[51]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),S("span",{class:"text-sm"},"Supprimer",-1)]),2)):Jt("",!0),t.selectedShape&&ne.value?(Te(),Ie("div",Dz)):Jt("",!0),t.selectedShape&&ne.value?(Te(),Ie("div",Oz,[ne.value.type!=="Note"?(Te(),Ie("div",Nz,[ye[52]||(ye[52]=S("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),kn(S("input",{type:"text",id:"shapeName","onUpdate:modelValue":ye[4]||(ye[4]=Ge=>ge.value=Ge),onChange:Ze,placeholder:"Donnez un nom  cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[$r,ge.value]])])):Jt("",!0),S("div",Iz,[ye[55]||(ye[55]=S("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catgorie",-1)),kn(S("select",{id:"shapeCategory","onUpdate:modelValue":ye[5]||(ye[5]=Ge=>pe.value=Ge),onChange:ie,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},[ye[53]||(ye[53]=tu('<option value="forages" data-v-e536edf0>Forages</option><option value="clients" data-v-e536edf0>Clients</option><option value="entrepots" data-v-e536edf0>Entrepts</option><option value="livraisons" data-v-e536edf0>Lieux de livraison</option><option value="cultures" data-v-e536edf0>Cultures</option><option value="parcelles" data-v-e536edf0>Noms des parcelles</option>',6)),(Te(!0),Ie(wn,null,ir($.categories,(Ge,ft)=>(Te(),Ie(wn,{key:ft},[p.value.includes(String(ft))?Jt("",!0):(Te(),Ie("option",{key:0,value:String(ft)},kt(et(String(ft))),9,Bz))],64))),128)),ye[54]||(ye[54]=S("option",{value:"default"},"Autre",-1))],544),[[ns,pe.value]])]),S("div",Rz,[ye[57]||(ye[57]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accs",-1)),ye[58]||(ye[58]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Dfinit qui peut voir cet lment sur la carte. ",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":ye[6]||(ye[6]=Ge=>N.value=Ge),onChange:H,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},ye[56]||(ye[56]=[S("option",{value:"company"},"Entreprise uniquement",-1),S("option",{value:"employee"},"Entreprise et salaris",-1),S("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[ns,N.value]])]),S("div",Fz,[ne.value.type==="Polygon"?(Te(),Ie("div",jz,[S("div",zz,[ye[59]||(ye[59]=S("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),S("span",$z,kt(Re(ne.value.surface||0)),1)]),S("div",Vz,[ye[60]||(ye[60]=S("span",{class:"text-sm font-semibold text-gray-700"},"Primtre :",-1)),S("span",Uz,kt(J(ne.value.perimeter||0)),1)])])):ne.value.type==="Line"?(Te(),Ie(wn,{key:1},[ye[61]||(ye[61]=S("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),S("span",Hz,kt(J(ne.value.length||0)),1)],64)):ne.value.type==="ElevationLine"?(Te(),Ie(wn,{key:2},[S("div",Wz,[S("div",Gz,[ye[62]||(ye[62]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),S("span",qz,kt(J(ne.value.length||0)),1)]),S("div",Yz,[ye[63]||(ye[63]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel + :",-1)),S("span",Kz,kt(J(ne.value.elevationGain||0)),1)]),S("div",Zz,[ye[64]||(ye[64]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dnivel - :",-1)),S("span",Xz,kt(J(ne.value.elevationLoss||0)),1)]),S("div",Jz,[ye[65]||(ye[65]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),S("span",Qz,kt(De(ne.value.averageSlope||0)),1)]),S("div",e$,[ye[66]||(ye[66]=S("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),S("span",t$,kt(De(ne.value.maxSlope||0)),1)])]),S("div",n$,[S("canvas",r$,null,512)],512)],64)):Jt("",!0)])])):Jt("",!0)])):Jt("",!0),x.value==="style"&&t.selectedShape&&((Ye=t.selectedShape.properties)==null?void 0:Ye.type)!=="Note"?(Te(),Ie("div",i$,[S("div",s$,[(Te(),Ie(wn,null,ir(I,Ge=>S("button",{key:Ge,class:"w-8 h-8 rounded-full",style:nu({backgroundColor:Ge}),onClick:ft=>we(Ge),title:Ge},null,12,o$)),64))]),((Ke=ne.value)==null?void 0:Ke.type)!=="TextRectangle"?(Te(),Ie("div",a$,[S("div",l$,[ye[67]||(ye[67]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",u$,[kn(S("input",{type:"color","onUpdate:modelValue":ye[7]||(ye[7]=Ge=>k.value=Ge),class:"w-16 h-8 rounded border",onChange:ye[8]||(ye[8]=Ge=>ve({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[$r,k.value]]),kn(S("input",{type:"range","onUpdate:modelValue":ye[9]||(ye[9]=Ge=>A.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ye[10]||(ye[10]=Ge=>ve({strokeWidth:A.value})),title:"paisseur du contour"},null,544),[[$r,A.value]])])]),S("div",c$,[ye[68]||(ye[68]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),kn(S("select",{"onUpdate:modelValue":ye[11]||(ye[11]=Ge=>D.value=Ge),class:"w-full rounded border",onChange:ye[12]||(ye[12]=Ge=>ve({strokeStyle:D.value}))},[(Te(),Ie(wn,null,ir(R,Ge=>S("option",{key:Ge.value,value:Ge.value},kt(Ge.label),9,d$)),64))],544),[[ns,D.value]])]),te.value?(Te(),Ie("div",h$,[ye[69]||(ye[69]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",f$,[kn(S("input",{type:"color","onUpdate:modelValue":ye[13]||(ye[13]=Ge=>z.value=Ge),class:"w-16 h-8 rounded border",onChange:ye[14]||(ye[14]=Ge=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[$r,z.value]]),kn(S("input",{type:"range","onUpdate:modelValue":ye[15]||(ye[15]=Ge=>Y.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ye[16]||(ye[16]=Ge=>ve({fillOpacity:Y.value})),title:"Opacit du remplissage"},null,544),[[$r,Y.value]])])])):Jt("",!0)])):Jt("",!0),((_t=ne.value)==null?void 0:_t.type)==="TextRectangle"?(Te(),Ie("div",p$,[S("div",g$,[ye[70]||(ye[70]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),S("div",m$,[kn(S("input",{type:"color","onUpdate:modelValue":ye[17]||(ye[17]=Ge=>k.value=Ge),class:"w-16 h-8 rounded border",onChange:ye[18]||(ye[18]=Ge=>ve({strokeColor:k.value})),title:"Couleur du contour"},null,544),[[$r,k.value]]),kn(S("input",{type:"range","onUpdate:modelValue":ye[19]||(ye[19]=Ge=>A.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:ye[20]||(ye[20]=Ge=>ve({strokeWidth:A.value})),title:"paisseur du contour"},null,544),[[$r,A.value]])])]),S("div",v$,[ye[71]||(ye[71]=S("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),S("div",y$,[kn(S("input",{type:"color","onUpdate:modelValue":ye[21]||(ye[21]=Ge=>z.value=Ge),class:"w-16 h-8 rounded border",onChange:ye[22]||(ye[22]=Ge=>ve({fillColor:z.value})),title:"Couleur de remplissage"},null,544),[[$r,z.value]]),kn(S("input",{type:"range","onUpdate:modelValue":ye[23]||(ye[23]=Ge=>Y.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:ye[24]||(ye[24]=Ge=>ve({fillOpacity:Y.value})),title:"Opacit du remplissage"},null,544),[[$r,Y.value]])])])])):Jt("",!0)])):Jt("",!0),x.value==="filters"?(Te(),Ie("div",b$,[S("div",_$,[S("div",w$,[ye[74]||(ye[74]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accs",-1)),ye[75]||(ye[75]=S("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Slectionnez votre niveau d'accs pour filtrer les lments visibles sur la carte. ",-1)),S("div",null,[kn(S("select",{"onUpdate:modelValue":ye[25]||(ye[25]=Ge=>B.value=Ge),onChange:ye[26]||(ye[26]=Ge=>V(B.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},ye[72]||(ye[72]=[S("option",{value:"company"},"Entreprise (accs  tout)",-1),S("option",{value:"employee"},"Salaris (accs niveau salaris et visiteurs)",-1),S("option",{value:"visitor"},"Visiteurs (accs niveau visiteurs uniquement)",-1)]),544),[[ns,B.value]]),ye[73]||(ye[73]=S("div",{class:"mt-2 text-xs text-gray-500"},[S("p",null,[S("strong",null,"Entreprise"),Xr(" : Vous verrez tous les lments (entreprise, salaris, visiteurs)")]),S("p",null,[S("strong",null,"Salaris"),Xr(" : Vous verrez les lments pour salaris et visiteurs")]),S("p",null,[S("strong",null,"Visiteurs"),Xr(" : Vous ne verrez que les lments pour visiteurs")])],-1))])]),S("div",x$,[ye[84]||(ye[84]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Catgories",-1)),S("div",L$,[S("label",S$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[27]||(ye[27]=Ge=>$.categories.forages=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.forages]]),ye[76]||(ye[76]=S("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),S("label",C$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[28]||(ye[28]=Ge=>$.categories.clients=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.clients]]),ye[77]||(ye[77]=S("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),S("label",E$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[29]||(ye[29]=Ge=>$.categories.entrepots=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.entrepots]]),ye[78]||(ye[78]=S("span",{class:"ml-2 text-sm text-gray-700"},"Entrepts",-1))]),S("label",P$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[30]||(ye[30]=Ge=>$.categories.livraisons=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.livraisons]]),ye[79]||(ye[79]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),S("label",M$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[31]||(ye[31]=Ge=>$.categories.cultures=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.cultures]]),ye[80]||(ye[80]=S("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),S("label",k$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[32]||(ye[32]=Ge=>$.categories.parcelles=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.categories.parcelles]]),ye[81]||(ye[81]=S("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Te(!0),Ie(wn,null,ir($.categories,(Ge,ft)=>(Te(),Ie(wn,{key:ft},[p.value.includes(String(ft))?Jt("",!0):(Te(),Ie("label",A$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":Ut=>$.categories[ft]=Ut,onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,T$),[[Al,$.categories[ft]]]),S("span",D$,kt(ft),1)]))],64))),128)),s.value||o.value?(Te(),Ie("div",O$,[S("div",N$,[kn(S("input",{type:"text","onUpdate:modelValue":ye[33]||(ye[33]=Ge=>c.name=Ge),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[$r,c.name]]),S("button",{onClick:Q,disabled:!c.name||h.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[h.value?(Te(),Ie("svg",R$,ye[83]||(ye[83]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Te(),Ie("svg",B$,ye[82]||(ye[82]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,I$)])])):Jt("",!0)])]),S("div",F$,[ye[89]||(ye[89]=S("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),S("div",j$,[S("label",z$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[34]||(ye[34]=Ge=>$.shapeTypes.Polygon=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Polygon]]),ye[85]||(ye[85]=S("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),S("label",$$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[35]||(ye[35]=Ge=>$.shapeTypes.Line=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Line]]),ye[86]||(ye[86]=S("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),S("label",V$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[36]||(ye[36]=Ge=>$.shapeTypes.ElevationLine=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.ElevationLine]]),ye[87]||(ye[87]=S("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimtriques",-1))]),S("label",U$,[kn(S("input",{type:"checkbox","onUpdate:modelValue":ye[37]||(ye[37]=Ge=>$.shapeTypes.Note=Ge),onChange:he,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Al,$.shapeTypes.Note]]),ye[88]||(ye[88]=S("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),S("div",{class:"pt-4 mb-4"},[S("button",{onClick:de,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Rinitialiser ")])])])):Jt("",!0)])]),t.selectedShape&&ne.value&&ne.value.type==="ElevationLine"?(Te(),Ie("div",H$,[S("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:ye[38]||(ye[38]=Ge=>X("samplePoints"))},[ye[91]||(ye[91]=S("span",null,"Points d'chantillonnage",-1)),(Te(),Ie("svg",{class:Di(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ye[90]||(ye[90]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),kn(S("div",W$,[S("div",G$,[ye[96]||(ye[96]=S("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),S("div",q$,[S("div",null,[ye[92]||(ye[92]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(S("input",{type:"number","onUpdate:modelValue":ye[39]||(ye[39]=Ge=>j.value.radius=Ge),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[$r,j.value.radius]])]),S("div",null,[ye[93]||(ye[93]=S("label",{class:"text-xs text-gray-600"},"Couleur",-1)),kn(S("input",{type:"color","onUpdate:modelValue":ye[40]||(ye[40]=Ge=>j.value.color=Ge),class:"w-full h-8 px-1 border rounded",onChange:Z},null,544),[[$r,j.value.color]])]),S("div",null,[ye[94]||(ye[94]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),kn(S("input",{type:"range","onUpdate:modelValue":ye[41]||(ye[41]=Ge=>j.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:Z},null,544),[[$r,j.value.fillOpacity]])]),S("div",null,[ye[95]||(ye[95]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(S("input",{type:"number","onUpdate:modelValue":ye[42]||(ye[42]=Ge=>j.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:Z},null,544),[[$r,j.value.weight]])])])]),S("div",null,[ye[100]||(ye[100]=S("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),S("div",Y$,[S("div",null,[ye[97]||(ye[97]=S("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(S("input",{type:"number","onUpdate:modelValue":ye[43]||(ye[43]=Ge=>K.value.radius=Ge),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[$r,K.value.radius]])]),S("div",null,[ye[98]||(ye[98]=S("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(S("input",{type:"number","onUpdate:modelValue":ye[44]||(ye[44]=Ge=>K.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:me},null,544),[[$r,K.value.weight]])]),S("div",null,[ye[99]||(ye[99]=S("label",{class:"text-xs text-gray-600"},"Opacit",-1)),kn(S("input",{type:"range","onUpdate:modelValue":ye[45]||(ye[45]=Ge=>K.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:me},null,544),[[$r,K.value.fillOpacity]])])])])],512),[[ky,!E.value.samplePoints]])])):Jt("",!0)],2)}}}),Z$=rd(K$,[["__scopeId","data-v-e536edf0"]]),X$={class:"map-toolbar w-full"},J$={class:"hidden md:flex items-center space-x-2"},Q$={class:"dropdown"},eV={class:"dropdown-menu"},tV=["onClick"],nV={key:0,class:"border-l pl-2 flex-1"},rV={class:"flex items-center"},iV={class:"plan-info"},sV={class:"plan-name"},oV={key:0,class:"plan-description"},aV={class:"border-l pl-2 ml-auto"},lV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},cV={key:"saving"},dV={key:"success",class:"save-success-text"},hV={key:"default"},fV={class:"md:hidden"},pV={class:"flex justify-between items-center"},gV={key:0,class:"truncate mx-2 text-sm font-medium"},mV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},vV={class:"flex justify-between items-center mb-3 border-b pb-2"},yV={class:"flex flex-col space-y-4"},bV={key:0,class:"flex flex-col pb-3 border-b"},_V={class:"text-sm font-semibold text-gray-800"},wV={key:0,class:"text-xs text-gray-600 mt-1"},xV={class:"flex flex-col"},LV={class:"grid grid-cols-3 gap-2"},SV=["onClick"],CV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},EV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},PV={key:"saving"},MV={key:"success",class:"save-success-text"},kV={key:"default"},AV=Rs({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=Ct("Hybride"),s=Ct(!1),o=k=>{const A=k.currentTarget,D=A.nextElementSibling;if(D&&D.classList.contains("dropdown-menu")){const z=A.getBoundingClientRect();D.style.top=`${z.bottom}px`,D.style.left=`${z.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Jn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=k=>{i.value=k,n("change-map-type",k),E()},h=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},g=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(k,A)=>(Te(),Ie("div",X$,[S("div",J$,[S("div",Q$,[S("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[A[2]||(A[2]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),S("span",null,kt(a[i.value]),1)],32),S("div",eV,[(Te(),Ie(wn,null,ir(a,(D,z)=>S("button",{key:z,class:Di(["dropdown-item",{active:z===i.value}]),onClick:Y=>c(z)},kt(D),11,tV)),64))])]),k.planName?(Te(),Ie("div",nV,[S("div",rV,[S("div",iV,[S("h2",sV,kt(k.planName),1),k.planDescription?(Te(),Ie("p",oV,kt(k.planDescription),1)):Jt("",!0)])])])):Jt("",!0),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:h,class:"btn-toolbar",title:"Nouveau plan"},A[3]||(A[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),S("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},A[4]||(A[4]=[tu('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-b4cc3353><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-b4cc3353></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-b4cc3353></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-b4cc3353></path></svg><span class="hidden lg:inline ml-1" data-v-b4cc3353>Charger</span>',2)])),S("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},A[5]||(A[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),S("div",{class:"border-l pl-2"},[S("div",{class:"flex items-center space-x-1"},[S("button",{onClick:g,class:"btn-toolbar",title:"Ajuster la vue"},A[6]||(A[6]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),S("button",{onClick:x,class:"btn-toolbar",title:"Gnrer une synthse"},A[7]||(A[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),S("span",{class:"hidden lg:inline ml-1"},"Synthse",-1)]))])]),S("div",aV,[S("div",{class:Di(["text-xs hidden lg:flex items-center",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Te(),Ie("svg",lV,A[8]||(A[8]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Te(),Ie("svg",uV,A[9]||(A[9]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(X2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[k.saveStatus==="saving"?(Te(),Ie("span",cV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Te(),Ie("span",dV," Sauvegarde russie ! ")):(Te(),Ie("span",hV," Dernire modification : "+kt(l.value),1))]),_:1})],2)])]),S("div",fV,[S("div",pV,[S("button",{onClick:A[0]||(A[0]=D=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},A[10]||(A[10]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z","clip-rule":"evenodd"})],-1)])),k.planName?(Te(),Ie("div",gV,kt(k.planName),1)):Jt("",!0),S("div",{class:"flex space-x-2"},[S("button",{onClick:h,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[11]||(A[11]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),S("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[12]||(A[12]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),S("button",{onClick:g,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},A[13]||(A[13]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Te(),Ie("div",mV,[S("div",vV,[A[15]||(A[15]=S("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),S("button",{onClick:A[1]||(A[1]=D=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},A[14]||(A[14]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",yV,[k.planName?(Te(),Ie("div",bV,[S("h3",_V,kt(k.planName),1),k.planDescription?(Te(),Ie("p",wV,kt(k.planDescription),1)):Jt("",!0)])):Jt("",!0),S("div",xV,[A[16]||(A[16]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),S("div",LV,[(Te(),Ie(wn,null,ir(a,(D,z)=>S("button",{key:z,class:Di(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":z===i.value}]),onClick:Y=>c(z)},kt(D),11,SV)),64))])]),S("div",{class:"flex flex-col"},[A[20]||(A[20]=S("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),S("div",{class:"grid grid-cols-3 gap-2"},[S("button",{onClick:h,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[17]||(A[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),Xr(" Nouveau ")])),S("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[18]||(A[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),S("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),S("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),Xr(" Charger ")])),S("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},A[19]||(A[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),Xr(" Synthse ")]))])]),S("div",{class:Di(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!k.saveStatus,"text-primary-600 font-medium":k.saveStatus==="success","text-blue-600 font-medium":k.saveStatus==="saving"}])},[k.saveStatus==="saving"?(Te(),Ie("svg",CV,A[21]||(A[21]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),k.saveStatus==="success"?(Te(),Ie("svg",EV,A[22]||(A[22]=[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):Jt("",!0),mi(X2,{name:"fade-slide",mode:"out-in"},{default:Gu(()=>[k.saveStatus==="saving"?(Te(),Ie("span",PV," Sauvegarde en cours... ")):k.saveStatus==="success"?(Te(),Ie("span",MV," Sauvegarde russie ! ")):(Te(),Ie("span",kV," Dernire modification : "+kt(l.value),1))]),_:1})],2)])])):Jt("",!0)])]))}}),TV=rd(AV,[["__scopeId","data-v-b4cc3353"]]),DV={class:"comment-thread"},OV={key:0,class:"space-y-3 mb-4"},NV={class:"flex justify-between items-start"},IV={class:"flex items-center"},BV={class:"font-medium text-sm text-gray-900"},RV={class:"flex items-center"},FV={class:"text-xs text-gray-500"},jV=["onClick"],zV={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},$V={key:1,class:"text-center text-sm text-gray-500 italic my-4"},VV={key:2,class:"mt-3"},UV={class:"flex justify-end mt-2"},HV=["disabled"],WV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},GV=Rs({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reus initialement:",n.comments),ki(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis  jour:",E)},{deep:!0});const r=e,i=ga(),s=bf(),o=iu(),a=Ct(""),l=Jn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function h(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajout avec succs"),r("comment-added")}catch(k){if(console.error("Erreur lors de l'ajout du commentaire:",k),(E=k.response)!=null&&E.data){const A=k.response.data;A.note?o.error(`Erreur: ${A.note[0]}`):A.user?o.error(`Erreur: ${A.user[0]}`):A.text?o.error(`Erreur: ${A.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var k;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprim"),r("comment-deleted")}catch(A){if(console.error("Erreur lors de la suppression du commentaire:",A),(k=A.response)!=null&&k.data){const D=A.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const k=new Date(E);return isNaN(k.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(k)}catch(k){return console.error(`Erreur lors du formatage de la date: ${E}`,k),"Date invalide"}}function g(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salari";case"visiteur":return"Visiteur";default:return E}}return(E,k)=>(Te(),Ie("div",DV,[E.comments&&E.comments.length>0?(Te(),Ie("div",OV,[(Te(!0),Ie(wn,null,ir(E.comments,A=>(Te(),Ie("div",{key:A.id,class:"bg-gray-50 rounded-lg p-3"},[S("div",NV,[S("div",IV,[S("div",BV,kt(A.userName),1),S("span",{class:Di(["ml-2 text-xs px-2 py-0.5 rounded-full",g(A.userRole)])},kt(x(A.userRole)),3)]),S("div",RV,[S("span",FV,kt(v(A.createdAt)),1),c(A)?(Te(),Ie("button",{key:0,onClick:Su(D=>p(A.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},k[1]||(k[1]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,jV)):Jt("",!0)])]),S("p",zV,kt(A.text),1)]))),128))])):(Te(),Ie("div",$V," Aucun commentaire pour le moment ")),l.value?(Te(),Ie("div",VV,[kn(S("textarea",{"onUpdate:modelValue":k[0]||(k[0]=A=>a.value=A),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[$r,a.value]]),S("div",UV,[S("button",{type:"button",onClick:Su(h,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,HV)])])):(Te(),Ie("div",WV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),qV={class:"photo-gallery"},YV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},KV=["src","onClick"],ZV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},XV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},JV=["onClick"],QV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},eU={class:"flex space-x-2 mt-3"},tU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},nU={class:"relative bg-gray-900",style:{height:"300px"}},rU=["src"],iU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},sU={key:1,class:"flex space-x-3"},oU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},aU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},lU=["src"],uU=Rs({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=iu(),o=Ct(null),a=Ct(null),l=Ct(null);let c=null;const h=Ct(!1),p=Ct(!1),v=Ct(null),g=Ct(null);function x(pe){v.value=pe,h.value=!0}async function E(pe){var N;if(confirm("tes-vous sr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprime"),r("photo-deleted"),h.value&&((N=v.value)==null?void 0:N.id)===pe&&(h.value=!1,v.value=null)}catch(j){console.error("Erreur lors de la suppression de la photo:",j),s.error("Erreur lors de la suppression de la photo")}}function k(){l.value&&l.value.click()}async function A(pe){const N=pe.target;if(!N.files||N.files.length===0)return;const j=N.files[0];if(!j.type.startsWith("image/")){s.error("Le fichier doit tre une image");return}if(j.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const K=await D(j);await i.addPhoto(n.noteId,{url:K}),N.value="",s.success("Photo ajoute"),r("photo-added")}catch(K){console.error("Erreur lors de l'ajout de la photo:",K),s.error("Erreur lors de l'ajout de la photo")}}function D(pe){return new Promise((N,j)=>{const K=new FileReader;K.onload=()=>N(K.result),K.onerror=j,K.readAsDataURL(pe)})}ki(p,async pe=>{if(pe){g.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de camra non supporte sur ce navigateur");const N={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(N),o.value&&(o.value.srcObject=c,await new Promise(j=>{o.value.onloadedmetadata=()=>{o.value.play().then(j)}}))}catch(N){console.error("Erreur lors de l'accs  la camra:",N);let j="Impossible d'accder  la camra";N.name==="NotAllowedError"?j="L'accs  la camra a t refus. Veuillez vrifier vos permissions.":N.name==="NotFoundError"?j="Aucune camra n'a t trouve sur votre appareil.":N.name==="NotSupportedError"&&(j="Votre navigateur ne supporte pas l'accs  la camra."),s.error(j),p.value=!1}}else c&&(c.getTracks().forEach(N=>N.stop()),c=null)});function z(){if(!o.value||!a.value)return;const pe=o.value,N=a.value;N.width=pe.videoWidth,N.height=pe.videoHeight;const j=N.getContext("2d");j&&(j.drawImage(pe,0,0,N.width,N.height),g.value=N.toDataURL("image/jpeg"))}function Y(){g.value=null}async function te(){if(g.value)try{await i.addPhoto(n.noteId,{url:g.value}),p.value=!1,s.success("Photo ajoute"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function ge(){p.value=!1}return Zu(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,N)=>(Te(),Ie("div",qV,[pe.photos&&pe.photos.length>0?(Te(),Ie("div",YV,[(Te(!0),Ie(wn,null,ir(pe.photos,j=>(Te(),Ie("div",{key:j.id,class:"relative group"},[S("img",{src:j.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:K=>x(j)},null,8,KV),S("div",ZV,[S("div",XV,[S("button",{onClick:Su(K=>E(j.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},N[2]||(N[2]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,JV)])])]))),128))])):(Te(),Ie("div",QV," Aucune photo pour le moment ")),S("div",eU,[S("button",{type:"button",onClick:N[0]||(N[0]=j=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[3]||(N[3]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Xr(" Prendre une photo ")])),S("button",{type:"button",onClick:k,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},N[4]||(N[4]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),Xr(" Tlverser ")])),S("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:A},null,544)]),p.value?(Te(),Ie("div",tU,[S("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[N[6]||(N[6]=S("h3",{class:"text-sm font-medium text-gray-700"},"Mode camra",-1)),S("button",{type:"button",onClick:ge,class:"text-gray-400 hover:text-gray-500"},N[5]||(N[5]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",nU,[g.value?(Te(),Ie("img",{key:1,src:g.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,rU)):(Te(),Ie("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),S("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),S("div",iU,[g.value?(Te(),Ie("div",sU,[S("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),S("button",{type:"button",onClick:te,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Te(),Ie("button",{key:0,type:"button",onClick:z,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},N[7]||(N[7]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):Jt("",!0),h.value?(Te(),Ie("div",oU,[S("div",aU,[S("button",{type:"button",onClick:N[1]||(N[1]=j=>h.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},N[8]||(N[8]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Te(),Ie("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,lU)):Jt("",!0)])])):Jt("",!0)]))}}),cU=rd(uU,[["__scopeId","data-v-f87156b4"]]),dU={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},hU={class:"flex items-center justify-center min-h-screen w-full"},fU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden flex flex-col"},pU={class:"p-4 md:p-6 flex-1 overflow-y-auto pb-16",style:{"max-height":"calc(100vh - 180px)","overflow-y":"auto"}},gU={class:"flex justify-between items-center mb-4 border-b pb-4"},mU={class:"text-xl font-semibold text-gray-900"},vU={class:"mb-4 border-b border-gray-200"},yU={class:"flex space-x-4","aria-label":"Tabs"},bU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},_U={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},wU={key:0},xU={class:"mb-4"},LU={class:"mb-4"},SU={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},CU={class:"mb-4"},EU=["value"],PU={class:"mb-4"},MU=["value"],kU={class:"mb-4"},AU={class:"mt-1 flex space-x-2"},TU=["onClick"],DU={key:1,class:"mt-4"},OU={class:"hidden"},NU={key:2,class:"mt-4"},IU=Rs({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=bf(),s=iu(),o=Ct("info"),a=window.console;ki(o,async K=>{a.log("[NoteEditModal] Onglet actif chang:",K),K==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires slectionn, commentaires actuels:",l.value.comments),await p(n.note.id)),K==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos slectionn, photos actuelles:",l.value.photos),await v(n.note.id))});const l=Ct({title:"",description:"",columnId:"",accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(K){return Array.isArray(K)?K:typeof K=="object"&&"type"in K&&"coordinates"in K?[K.coordinates[1],K.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",K),[0,0])}function h(K){if(!K)return new Date().toISOString();try{const I=new Date(K);return isNaN(I.getTime())?(a.warn("[NoteEditModal] Date invalide:",K),new Date().toISOString()):I.toISOString()}catch(I){return a.error("[NoteEditModal] Erreur lors de la cration de la date:",I),new Date().toISOString()}}async function p(K){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${K}`);const I=await Ca.getComments(K);a.log("[NoteEditModal] Commentaires reus:",I.data);const R=I.data.map(B=>({id:B.id,text:B.text,createdAt:B.created_at,userId:B.user,userName:B.user_name,userRole:B.user_role}));return a.log("[NoteEditModal] Commentaires transforms:",R),n.note&&(i.updateNote(n.note.id,{comments:R}),l.value.comments=R,a.log("[NoteEditModal] Commentaires mis  jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments aprs mise  jour:",l.value.comments)),R}catch(I){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",I),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(K){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${K}`);const I=await Ca.getPhotos(K);a.log("[NoteEditModal] Photos reues:",I.data);const R=I.data.map(B=>({id:B.id,url:B.image,createdAt:B.created_at,caption:B.caption}));return n.note&&(i.updateNote(n.note.id,{photos:R}),l.value.photos=R,a.log("[NoteEditModal] Photos mises  jour dans le store et localement")),R}catch(I){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",I),s.error("Erreur lors du chargement des photos"),[]}}go(async()=>{var K,I;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes charges:",i.columns),n.note){a.log("[NoteEditModal] dition d'une note existante:",n.note);const R=JSON.parse(JSON.stringify(n.note));R.createdAt=h(R.createdAt),R.updatedAt=h(R.updatedAt),l.value=R,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Aprs chargement - Commentaires:",((K=l.value.comments)==null?void 0:K.length)||0),a.log("[NoteEditModal] Aprs chargement - Photos:",((I=l.value.photos)==null?void 0:I.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs aprs timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs aprs timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Cration d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Yi.PRIVATE,style:{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const R=c(n.location);l.value.location=R}a.log("[NoteEditModal] Niveau d'accs initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value aprs initialisation:",l.value)});const g=Jn(()=>i.getSortedColumns),x=Jn(()=>{var I;const K=((I=l.value.comments)==null?void 0:I.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalcul:",K),K}),E=Jn(()=>{var I;const K=((I=l.value.photos)==null?void 0:I.length)||0;return a.log("[NoteEditModal] Computed photosCount recalcul:",K),K}),k=[{id:Yi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Yi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et les salaris"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous"}],A=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=K=>{var I;if(l.value.style?(l.value.style.color=K,l.value.style.fillColor=K):l.value.style={color:K,weight:2,opacity:1,fillColor:K,fillOpacity:.6,radius:8},l.value.color=K,(I=n.note)!=null&&I.id){a.log("[NoteEditModal] mission de l'vnement de mise  jour de couleur:",K);const R=new CustomEvent("geonote:updateStyle",{detail:{noteId:n.note.id,style:{color:K,fillColor:K}}});window.dispatchEvent(R);const B=new CustomEvent("geonote:update",{detail:{noteId:n.note.id,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(B)}},z=()=>{var K,I,R,B,$,U,V,ne;l.value={title:((K=n.note)==null?void 0:K.title)||"",description:((I=n.note)==null?void 0:I.description)||"",columnId:((R=n.note)==null?void 0:R.columnId)||"",accessLevel:((B=n.note)==null?void 0:B.accessLevel)||"private",style:(($=n.note)==null?void 0:$.style)||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},location:n.location||((U=n.note)==null?void 0:U.location)||null,comments:((V=n.note)==null?void 0:V.comments)||[],photos:((ne=n.note)==null?void 0:ne.photos)||[]}};go(()=>{z()}),ki(()=>n.note,()=>{z()},{deep:!0});function Y(){r("close")}async function te(){a.log("[NoteEditModal] Commentaire ajout, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function ge(){a.log("[NoteEditModal] Photo ajoute, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function pe(){a.log("[NoteEditModal] Commentaire supprim, mise  jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function N(){a.log("[NoteEditModal] Photo supprime, mise  jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function j(){var K;try{const I=l.value.style.color;l.value.style={...l.value.style,color:I,fillColor:I,weight:2,opacity:1,fillOpacity:.6,radius:8};const R={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[],color:I};l.value.location&&(R.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Donnes de note  sauvegarder:",R);let B;if((K=n.note)!=null&&K.id){B=(await Ca.updateNote(n.note.id,R)).data,i.updateNote(n.note.id,{...l.value,...B,accessLevel:l.value.accessLevel,style:l.value.style,color:I,updatedAt:new Date().toISOString()});const U=n.note.id,V=new CustomEvent("geonote:update",{detail:{noteId:U,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style,color:I}}});window.dispatchEvent(V),s.success("Note mise  jour avec succs")}else{if(B=(await Ca.createNote(R)).data,!B.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const U=i.getDefaultColumn,V={...R,id:B.id,columnId:R.columnId||U.id,accessLevel:l.value.accessLevel,style:R.style,color:I};a.log("[NoteEditModal] Note  ajouter au store avec ID backend:",B.id),i.addNote(V),s.success("Note cre avec succs")}B&&(!B.comments&&l.value.comments&&(B.comments=l.value.comments),!B.photos&&l.value.photos&&(B.photos=l.value.photos),B.color=I,B.style={...B.style,color:I,fillColor:I}),r("save",B),r("close")}catch(I){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",I),s.error("Erreur lors de la sauvegarde de la note")}}return(K,I)=>{var R;return Te(),Ie("div",dU,[S("div",hU,[I[17]||(I[17]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",fU,[S("form",{onSubmit:Su(j,["prevent"]),class:"h-full md:h-auto flex flex-col max-h-screen md:max-h-[90vh] overflow-hidden"},[S("div",pU,[S("div",gU,[S("h3",mU,kt((R=K.note)!=null&&R.id?"Modifier la note":"Nouvelle note"),1),S("button",{type:"button",onClick:Y,class:"text-gray-400 hover:text-gray-500"},I[7]||(I[7]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",vU,[S("nav",yU,[S("button",{type:"button",onClick:I[0]||(I[0]=B=>o.value="info"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),S("button",{type:"button",onClick:I[1]||(I[1]=B=>o.value="comments"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[I[8]||(I[8]=Xr(" Commentaires ")),x.value>0?(Te(),Ie("span",bU,kt(x.value),1)):Jt("",!0)],2),S("button",{type:"button",onClick:I[2]||(I[2]=B=>o.value="photos"),class:Di(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[I[9]||(I[9]=Xr(" Photos ")),E.value>0?(Te(),Ie("span",_U,kt(E.value),1)):Jt("",!0)],2)])]),o.value==="info"?(Te(),Ie("div",wU,[S("div",xU,[I[10]||(I[10]=S("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),kn(S("input",{type:"text",id:"title","onUpdate:modelValue":I[3]||(I[3]=B=>l.value.title=B),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[$r,l.value.title]])]),S("div",LU,[I[11]||(I[11]=S("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),kn(S("textarea",{id:"description","onUpdate:modelValue":I[4]||(I[4]=B=>l.value.description=B),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[$r,l.value.description]])]),l.value.location?(Te(),Ie("div",SU,I[12]||(I[12]=[S("div",{class:"text-primary-600 mr-2"},[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),S("div",{class:"text-sm text-gray-600"}," Note golocalise ",-1)]))):Jt("",!0),S("div",CU,[I[13]||(I[13]=S("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"tat",-1)),kn(S("select",{id:"column","onUpdate:modelValue":I[5]||(I[5]=B=>l.value.columnId=B),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Te(!0),Ie(wn,null,ir(g.value,B=>(Te(),Ie("option",{key:B.id,value:B.id},kt(B.title),9,EU))),128))],512),[[ns,l.value.columnId]])]),S("div",PU,[I[14]||(I[14]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":I[6]||(I[6]=B=>l.value.accessLevel=B),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Te(),Ie(wn,null,ir(k,B=>S("option",{key:B.id,value:B.id},kt(B.title)+" - "+kt(B.description),9,MU)),64))],512),[[ns,l.value.accessLevel]])]),S("div",kU,[I[15]||(I[15]=S("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),S("div",AU,[(Te(),Ie(wn,null,ir(A,B=>S("div",{key:B,class:Di(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":l.value.style.color!==B,"border-black":l.value.style.color===B}]),style:nu({backgroundColor:B}),onClick:$=>D(B)},null,14,TU)),64))])])])):o.value==="comments"?(Te(),Ie("div",DU,[S("div",OU,kt(a.log("[NoteEditModal] Commentaires passs au composant:",l.value.comments)),1),K.note?(Te(),Sa(GV,{key:0,noteId:K.note.id,comments:l.value.comments||[],onCommentAdded:te,onCommentDeleted:pe},null,8,["noteId","comments"])):Jt("",!0)])):o.value==="photos"?(Te(),Ie("div",NU,[K.note?(Te(),Sa(cU,{key:0,noteId:K.note.id,photos:l.value.photos||[],onPhotoAdded:ge,onPhotoDeleted:N},null,8,["noteId","photos"])):Jt("",!0)])):Jt("",!0)]),S("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse sticky bottom-0 border-t border-gray-200"},[I[16]||(I[16]=S("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),S("button",{onClick:Y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}}),IE=rd(IU,[["__scopeId","data-v-e3639c83"]]);(()=>{var Nn,or;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(d,m)=>()=>(m||d((m={exports:{}}).exports,m),m.exports),a=(d,m,_,C)=>{if(m&&typeof m=="object"||typeof m=="function")for(let M of r(m))!s.call(d,M)&&M!==_&&e(d,M,{get:()=>m[M],enumerable:!(C=n(m,M))||C.enumerable});return d},l=(d,m,_)=>(_=d!=null?t(i(d)):{},a(m||!d||!d.__esModule?e(_,"default",{value:d,enumerable:!0}):_,d)),c=o((d,m)=>{function _(){this.__data__=[],this.size=0}m.exports=_}),h=o((d,m)=>{function _(C,M){return C===M||C!==C&&M!==M}m.exports=_}),p=o((d,m)=>{var _=h();function C(M,W){for(var ee=M.length;ee--;)if(_(M[ee][0],W))return ee;return-1}m.exports=C}),v=o((d,m)=>{var _=p(),C=Array.prototype,M=C.splice;function W(ee){var oe=this.__data__,be=_(oe,ee);if(be<0)return!1;var Ee=oe.length-1;return be==Ee?oe.pop():M.call(oe,be,1),--this.size,!0}m.exports=W}),g=o((d,m)=>{var _=p();function C(M){var W=this.__data__,ee=_(W,M);return ee<0?void 0:W[ee][1]}m.exports=C}),x=o((d,m)=>{var _=p();function C(M){return _(this.__data__,M)>-1}m.exports=C}),E=o((d,m)=>{var _=p();function C(M,W){var ee=this.__data__,oe=_(ee,M);return oe<0?(++this.size,ee.push([M,W])):ee[oe][1]=W,this}m.exports=C}),k=o((d,m)=>{var _=c(),C=v(),M=g(),W=x(),ee=E();function oe(be){var Ee=-1,rt=be==null?0:be.length;for(this.clear();++Ee<rt;){var qe=be[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ee,m.exports=oe}),A=o((d,m)=>{var _=k();function C(){this.__data__=new _,this.size=0}m.exports=C}),D=o((d,m)=>{function _(C){var M=this.__data__,W=M.delete(C);return this.size=M.size,W}m.exports=_}),z=o((d,m)=>{function _(C){return this.__data__.get(C)}m.exports=_}),Y=o((d,m)=>{function _(C){return this.__data__.has(C)}m.exports=_}),te=o((d,m)=>{var _=typeof Ea=="object"&&Ea&&Ea.Object===Object&&Ea;m.exports=_}),ge=o((d,m)=>{var _=te(),C=typeof self=="object"&&self&&self.Object===Object&&self,M=_||C||Function("return this")();m.exports=M}),pe=o((d,m)=>{var _=ge(),C=_.Symbol;m.exports=C}),N=o((d,m)=>{var _=pe(),C=Object.prototype,M=C.hasOwnProperty,W=C.toString,ee=_?_.toStringTag:void 0;function oe(be){var Ee=M.call(be,ee),rt=be[ee];try{be[ee]=void 0;var qe=!0}catch{}var wt=W.call(be);return qe&&(Ee?be[ee]=rt:delete be[ee]),wt}m.exports=oe}),j=o((d,m)=>{var _=Object.prototype,C=_.toString;function M(W){return C.call(W)}m.exports=M}),K=o((d,m)=>{var _=pe(),C=N(),M=j(),W="[object Null]",ee="[object Undefined]",oe=_?_.toStringTag:void 0;function be(Ee){return Ee==null?Ee===void 0?ee:W:oe&&oe in Object(Ee)?C(Ee):M(Ee)}m.exports=be}),I=o((d,m)=>{function _(C){var M=typeof C;return C!=null&&(M=="object"||M=="function")}m.exports=_}),R=o((d,m)=>{var _=K(),C=I(),M="[object AsyncFunction]",W="[object Function]",ee="[object GeneratorFunction]",oe="[object Proxy]";function be(Ee){if(!C(Ee))return!1;var rt=_(Ee);return rt==W||rt==ee||rt==M||rt==oe}m.exports=be}),B=o((d,m)=>{var _=ge(),C=_["__core-js_shared__"];m.exports=C}),$=o((d,m)=>{var _=B(),C=function(){var W=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return W?"Symbol(src)_1."+W:""}();function M(W){return!!C&&C in W}m.exports=M}),U=o((d,m)=>{var _=Function.prototype,C=_.toString;function M(W){if(W!=null){try{return C.call(W)}catch{}try{return W+""}catch{}}return""}m.exports=M}),V=o((d,m)=>{var _=R(),C=$(),M=I(),W=U(),ee=/[\\^$.*+?()[\]{}|]/g,oe=/^\[object .+?Constructor\]$/,be=Function.prototype,Ee=Object.prototype,rt=be.toString,qe=Ee.hasOwnProperty,wt=RegExp("^"+rt.call(qe).replace(ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(en){if(!M(en)||C(en))return!1;var _n=_(en)?wt:oe;return _n.test(W(en))}m.exports=It}),ne=o((d,m)=>{function _(C,M){return C==null?void 0:C[M]}m.exports=_}),X=o((d,m)=>{var _=V(),C=ne();function M(W,ee){var oe=C(W,ee);return _(oe)?oe:void 0}m.exports=M}),we=o((d,m)=>{var _=X(),C=ge(),M=_(C,"Map");m.exports=M}),ve=o((d,m)=>{var _=X(),C=_(Object,"create");m.exports=C}),Ze=o((d,m)=>{var _=ve();function C(){this.__data__=_?_(null):{},this.size=0}m.exports=C}),ie=o((d,m)=>{function _(C){var M=this.has(C)&&delete this.__data__[C];return this.size-=M?1:0,M}m.exports=_}),H=o((d,m)=>{var _=ve(),C="__lodash_hash_undefined__",M=Object.prototype,W=M.hasOwnProperty;function ee(oe){var be=this.__data__;if(_){var Ee=be[oe];return Ee===C?void 0:Ee}return W.call(be,oe)?be[oe]:void 0}m.exports=ee}),Z=o((d,m)=>{var _=ve(),C=Object.prototype,M=C.hasOwnProperty;function W(ee){var oe=this.__data__;return _?oe[ee]!==void 0:M.call(oe,ee)}m.exports=W}),me=o((d,m)=>{var _=ve(),C="__lodash_hash_undefined__";function M(W,ee){var oe=this.__data__;return this.size+=this.has(W)?0:1,oe[W]=_&&ee===void 0?C:ee,this}m.exports=M}),fe=o((d,m)=>{var _=Ze(),C=ie(),M=H(),W=Z(),ee=me();function oe(be){var Ee=-1,rt=be==null?0:be.length;for(this.clear();++Ee<rt;){var qe=be[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ee,m.exports=oe}),de=o((d,m)=>{var _=fe(),C=k(),M=we();function W(){this.size=0,this.__data__={hash:new _,map:new(M||C),string:new _}}m.exports=W}),ce=o((d,m)=>{function _(C){var M=typeof C;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?C!=="__proto__":C===null}m.exports=_}),J=o((d,m)=>{var _=ce();function C(M,W){var ee=M.__data__;return _(W)?ee[typeof W=="string"?"string":"hash"]:ee.map}m.exports=C}),Re=o((d,m)=>{var _=J();function C(M){var W=_(this,M).delete(M);return this.size-=W?1:0,W}m.exports=C}),De=o((d,m)=>{var _=J();function C(M){return _(this,M).get(M)}m.exports=C}),et=o((d,m)=>{var _=J();function C(M){return _(this,M).has(M)}m.exports=C}),he=o((d,m)=>{var _=J();function C(M,W){var ee=_(this,M),oe=ee.size;return ee.set(M,W),this.size+=ee.size==oe?0:1,this}m.exports=C}),Q=o((d,m)=>{var _=de(),C=Re(),M=De(),W=et(),ee=he();function oe(be){var Ee=-1,rt=be==null?0:be.length;for(this.clear();++Ee<rt;){var qe=be[Ee];this.set(qe[0],qe[1])}}oe.prototype.clear=_,oe.prototype.delete=C,oe.prototype.get=M,oe.prototype.has=W,oe.prototype.set=ee,m.exports=oe}),se=o((d,m)=>{var _=k(),C=we(),M=Q(),W=200;function ee(oe,be){var Ee=this.__data__;if(Ee instanceof _){var rt=Ee.__data__;if(!C||rt.length<W-1)return rt.push([oe,be]),this.size=++Ee.size,this;Ee=this.__data__=new M(rt)}return Ee.set(oe,be),this.size=Ee.size,this}m.exports=ee}),ue=o((d,m)=>{var _=k(),C=A(),M=D(),W=z(),ee=Y(),oe=se();function be(Ee){var rt=this.__data__=new _(Ee);this.size=rt.size}be.prototype.clear=C,be.prototype.delete=M,be.prototype.get=W,be.prototype.has=ee,be.prototype.set=oe,m.exports=be}),ze=o((d,m)=>{var _=X(),C=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();m.exports=C}),Ce=o((d,m)=>{var _=ze();function C(M,W,ee){W=="__proto__"&&_?_(M,W,{configurable:!0,enumerable:!0,value:ee,writable:!0}):M[W]=ee}m.exports=C}),ye=o((d,m)=>{var _=Ce(),C=h();function M(W,ee,oe){(oe!==void 0&&!C(W[ee],oe)||oe===void 0&&!(ee in W))&&_(W,ee,oe)}m.exports=M}),Ve=o((d,m)=>{function _(C){return function(M,W,ee){for(var oe=-1,be=Object(M),Ee=ee(M),rt=Ee.length;rt--;){var qe=Ee[C?rt:++oe];if(W(be[qe],qe,be)===!1)break}return M}}m.exports=_}),Ye=o((d,m)=>{var _=Ve(),C=_();m.exports=C}),Ke=o((d,m)=>{var _=ge(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof m=="object"&&m&&!m.nodeType&&m,W=M&&M.exports===C,ee=W?_.Buffer:void 0,oe=ee?ee.allocUnsafe:void 0;function be(Ee,rt){if(rt)return Ee.slice();var qe=Ee.length,wt=oe?oe(qe):new Ee.constructor(qe);return Ee.copy(wt),wt}m.exports=be}),_t=o((d,m)=>{var _=ge(),C=_.Uint8Array;m.exports=C}),Ge=o((d,m)=>{var _=_t();function C(M){var W=new M.constructor(M.byteLength);return new _(W).set(new _(M)),W}m.exports=C}),ft=o((d,m)=>{var _=Ge();function C(M,W){var ee=W?_(M.buffer):M.buffer;return new M.constructor(ee,M.byteOffset,M.length)}m.exports=C}),Ut=o((d,m)=>{function _(C,M){var W=-1,ee=C.length;for(M||(M=Array(ee));++W<ee;)M[W]=C[W];return M}m.exports=_}),tn=o((d,m)=>{var _=I(),C=Object.create,M=function(){function W(){}return function(ee){if(!_(ee))return{};if(C)return C(ee);W.prototype=ee;var oe=new W;return W.prototype=void 0,oe}}();m.exports=M}),yn=o((d,m)=>{function _(C,M){return function(W){return C(M(W))}}m.exports=_}),Qe=o((d,m)=>{var _=yn(),C=_(Object.getPrototypeOf,Object);m.exports=C}),at=o((d,m)=>{var _=Object.prototype;function C(M){var W=M&&M.constructor,ee=typeof W=="function"&&W.prototype||_;return M===ee}m.exports=C}),it=o((d,m)=>{var _=tn(),C=Qe(),M=at();function W(ee){return typeof ee.constructor=="function"&&!M(ee)?_(C(ee)):{}}m.exports=W}),$t=o((d,m)=>{function _(C){return C!=null&&typeof C=="object"}m.exports=_}),Zt=o((d,m)=>{var _=K(),C=$t(),M="[object Arguments]";function W(ee){return C(ee)&&_(ee)==M}m.exports=W}),On=o((d,m)=>{var _=Zt(),C=$t(),M=Object.prototype,W=M.hasOwnProperty,ee=M.propertyIsEnumerable,oe=_(function(){return arguments}())?_:function(be){return C(be)&&W.call(be,"callee")&&!ee.call(be,"callee")};m.exports=oe}),mn=o((d,m)=>{var _=Array.isArray;m.exports=_}),Tn=o((d,m)=>{var _=9007199254740991;function C(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}m.exports=C}),Qn=o((d,m)=>{var _=R(),C=Tn();function M(W){return W!=null&&C(W.length)&&!_(W)}m.exports=M}),Qt=o((d,m)=>{var _=Qn(),C=$t();function M(W){return C(W)&&_(W)}m.exports=M}),xn=o((d,m)=>{function _(){return!1}m.exports=_}),Cn=o((d,m)=>{var _=ge(),C=xn(),M=typeof d=="object"&&d&&!d.nodeType&&d,W=M&&typeof m=="object"&&m&&!m.nodeType&&m,ee=W&&W.exports===M,oe=ee?_.Buffer:void 0,be=oe?oe.isBuffer:void 0,Ee=be||C;m.exports=Ee}),er=o((d,m)=>{var _=K(),C=Qe(),M=$t(),W="[object Object]",ee=Function.prototype,oe=Object.prototype,be=ee.toString,Ee=oe.hasOwnProperty,rt=be.call(Object);function qe(wt){if(!M(wt)||_(wt)!=W)return!1;var It=C(wt);if(It===null)return!0;var en=Ee.call(It,"constructor")&&It.constructor;return typeof en=="function"&&en instanceof en&&be.call(en)==rt}m.exports=qe}),vr=o((d,m)=>{var _=K(),C=Tn(),M=$t(),W="[object Arguments]",ee="[object Array]",oe="[object Boolean]",be="[object Date]",Ee="[object Error]",rt="[object Function]",qe="[object Map]",wt="[object Number]",It="[object Object]",en="[object RegExp]",_n="[object Set]",Pn="[object String]",br="[object WeakMap]",nt="[object ArrayBuffer]",st="[object DataView]",gt="[object Float32Array]",zt="[object Float64Array]",Et="[object Int8Array]",Bt="[object Int16Array]",_e="[object Int32Array]",ke="[object Uint8Array]",$e="[object Uint8ClampedArray]",je="[object Uint16Array]",He="[object Uint32Array]",We={};We[gt]=We[zt]=We[Et]=We[Bt]=We[_e]=We[ke]=We[$e]=We[je]=We[He]=!0,We[W]=We[ee]=We[nt]=We[oe]=We[st]=We[be]=We[Ee]=We[rt]=We[qe]=We[wt]=We[It]=We[en]=We[_n]=We[Pn]=We[br]=!1;function ct(ht){return M(ht)&&C(ht.length)&&!!We[_(ht)]}m.exports=ct}),xr=o((d,m)=>{function _(C){return function(M){return C(M)}}m.exports=_}),ur=o((d,m)=>{var _=te(),C=typeof d=="object"&&d&&!d.nodeType&&d,M=C&&typeof m=="object"&&m&&!m.nodeType&&m,W=M&&M.exports===C,ee=W&&_.process,oe=function(){try{var be=M&&M.require&&M.require("util").types;return be||ee&&ee.binding&&ee.binding("util")}catch{}}();m.exports=oe}),qr=o((d,m)=>{var _=vr(),C=xr(),M=ur(),W=M&&M.isTypedArray,ee=W?C(W):_;m.exports=ee}),Fs=o((d,m)=>{function _(C,M){if(!(M==="constructor"&&typeof C[M]=="function")&&M!="__proto__")return C[M]}m.exports=_}),Ai=o((d,m)=>{var _=Ce(),C=h(),M=Object.prototype,W=M.hasOwnProperty;function ee(oe,be,Ee){var rt=oe[be];(!(W.call(oe,be)&&C(rt,Ee))||Ee===void 0&&!(be in oe))&&_(oe,be,Ee)}m.exports=ee}),Oo=o((d,m)=>{var _=Ai(),C=Ce();function M(W,ee,oe,be){var Ee=!oe;oe||(oe={});for(var rt=-1,qe=ee.length;++rt<qe;){var wt=ee[rt],It=be?be(oe[wt],W[wt],wt,oe,W):void 0;It===void 0&&(It=W[wt]),Ee?C(oe,wt,It):_(oe,wt,It)}return oe}m.exports=M}),Ts=o((d,m)=>{function _(C,M){for(var W=-1,ee=Array(C);++W<C;)ee[W]=M(W);return ee}m.exports=_}),tr=o((d,m)=>{var _=9007199254740991,C=/^(?:0|[1-9]\d*)$/;function M(W,ee){var oe=typeof W;return ee=ee??_,!!ee&&(oe=="number"||oe!="symbol"&&C.test(W))&&W>-1&&W%1==0&&W<ee}m.exports=M}),Ds=o((d,m)=>{var _=Ts(),C=On(),M=mn(),W=Cn(),ee=tr(),oe=qr(),be=Object.prototype,Ee=be.hasOwnProperty;function rt(qe,wt){var It=M(qe),en=!It&&C(qe),_n=!It&&!en&&W(qe),Pn=!It&&!en&&!_n&&oe(qe),br=It||en||_n||Pn,nt=br?_(qe.length,String):[],st=nt.length;for(var gt in qe)(wt||Ee.call(qe,gt))&&!(br&&(gt=="length"||_n&&(gt=="offset"||gt=="parent")||Pn&&(gt=="buffer"||gt=="byteLength"||gt=="byteOffset")||ee(gt,st)))&&nt.push(gt);return nt}m.exports=rt}),No=o((d,m)=>{function _(C){var M=[];if(C!=null)for(var W in Object(C))M.push(W);return M}m.exports=_}),lt=o((d,m)=>{var _=I(),C=at(),M=No(),W=Object.prototype,ee=W.hasOwnProperty;function oe(be){if(!_(be))return M(be);var Ee=C(be),rt=[];for(var qe in be)qe=="constructor"&&(Ee||!ee.call(be,qe))||rt.push(qe);return rt}m.exports=oe}),Be=o((d,m)=>{var _=Ds(),C=lt(),M=Qn();function W(ee){return M(ee)?_(ee,!0):C(ee)}m.exports=W}),dt=o((d,m)=>{var _=Oo(),C=Be();function M(W){return _(W,C(W))}m.exports=M}),Ln=o((d,m)=>{var _=ye(),C=Ke(),M=ft(),W=Ut(),ee=it(),oe=On(),be=mn(),Ee=Qt(),rt=Cn(),qe=R(),wt=I(),It=er(),en=qr(),_n=Fs(),Pn=dt();function br(nt,st,gt,zt,Et,Bt,_e){var ke=_n(nt,gt),$e=_n(st,gt),je=_e.get($e);if(je){_(nt,gt,je);return}var He=Bt?Bt(ke,$e,gt+"",nt,st,_e):void 0,We=He===void 0;if(We){var ct=be($e),ht=!ct&&rt($e),yt=!ct&&!ht&&en($e);He=$e,ct||ht||yt?be(ke)?He=ke:Ee(ke)?He=W(ke):ht?(We=!1,He=C($e,!0)):yt?(We=!1,He=M($e,!0)):He=[]:It($e)||oe($e)?(He=ke,oe(ke)?He=Pn(ke):(!wt(ke)||qe(ke))&&(He=ee($e))):We=!1}We&&(_e.set($e,He),Et(He,$e,zt,Bt,_e),_e.delete($e)),_(nt,gt,He)}m.exports=br}),Vn=o((d,m)=>{var _=ue(),C=ye(),M=Ye(),W=Ln(),ee=I(),oe=Be(),be=Fs();function Ee(rt,qe,wt,It,en){rt!==qe&&M(qe,function(_n,Pn){if(en||(en=new _),ee(_n))W(rt,qe,Pn,wt,Ee,It,en);else{var br=It?It(be(rt,Pn),_n,Pn+"",rt,qe,en):void 0;br===void 0&&(br=_n),C(rt,Pn,br)}},oe)}m.exports=Ee}),En=o((d,m)=>{function _(C){return C}m.exports=_}),jt=o((d,m)=>{function _(C,M,W){switch(W.length){case 0:return C.call(M);case 1:return C.call(M,W[0]);case 2:return C.call(M,W[0],W[1]);case 3:return C.call(M,W[0],W[1],W[2])}return C.apply(M,W)}m.exports=_}),Hn=o((d,m)=>{var _=jt(),C=Math.max;function M(W,ee,oe){return ee=C(ee===void 0?W.length-1:ee,0),function(){for(var be=arguments,Ee=-1,rt=C(be.length-ee,0),qe=Array(rt);++Ee<rt;)qe[Ee]=be[ee+Ee];Ee=-1;for(var wt=Array(ee+1);++Ee<ee;)wt[Ee]=be[Ee];return wt[ee]=oe(qe),_(W,this,wt)}}m.exports=M}),St=o((d,m)=>{function _(C){return function(){return C}}m.exports=_}),qt=o((d,m)=>{var _=St(),C=ze(),M=En(),W=C?function(ee,oe){return C(ee,"toString",{configurable:!0,enumerable:!1,value:_(oe),writable:!0})}:M;m.exports=W}),Un=o((d,m)=>{var _=800,C=16,M=Date.now;function W(ee){var oe=0,be=0;return function(){var Ee=M(),rt=C-(Ee-be);if(be=Ee,rt>0){if(++oe>=_)return arguments[0]}else oe=0;return ee.apply(void 0,arguments)}}m.exports=W}),dr=o((d,m)=>{var _=qt(),C=Un(),M=C(_);m.exports=M}),Lr=o((d,m)=>{var _=En(),C=Hn(),M=dr();function W(ee,oe){return M(C(ee,oe,_),ee+"")}m.exports=W}),pn=o((d,m)=>{var _=h(),C=Qn(),M=tr(),W=I();function ee(oe,be,Ee){if(!W(Ee))return!1;var rt=typeof be;return(rt=="number"?C(Ee)&&M(be,Ee.length):rt=="string"&&be in Ee)?_(Ee[be],oe):!1}m.exports=ee}),rn=o((d,m)=>{var _=Lr(),C=pn();function M(W){return _(function(ee,oe){var be=-1,Ee=oe.length,rt=Ee>1?oe[Ee-1]:void 0,qe=Ee>2?oe[2]:void 0;for(rt=W.length>3&&typeof rt=="function"?(Ee--,rt):void 0,qe&&C(oe[0],oe[1],qe)&&(rt=Ee<3?void 0:rt,Ee=1),ee=Object(ee);++be<Ee;){var wt=oe[be];wt&&W(ee,wt,be,rt)}return ee})}m.exports=M}),zr=o((d,m)=>{var _=Vn(),C=rn(),M=C(function(W,ee,oe){_(W,ee,oe)});m.exports=M}),Br=o((d,m)=>{var _=K(),C=$t(),M="[object Symbol]";function W(ee){return typeof ee=="symbol"||C(ee)&&_(ee)==M}m.exports=W}),zi=o((d,m)=>{var _=mn(),C=Br(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,W=/^\w*$/;function ee(oe,be){if(_(oe))return!1;var Ee=typeof oe;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||oe==null||C(oe)?!0:W.test(oe)||!M.test(oe)||be!=null&&oe in Object(be)}m.exports=ee}),Qr=o((d,m)=>{var _=Q(),C="Expected a function";function M(W,ee){if(typeof W!="function"||ee!=null&&typeof ee!="function")throw new TypeError(C);var oe=function(){var be=arguments,Ee=ee?ee.apply(this,be):be[0],rt=oe.cache;if(rt.has(Ee))return rt.get(Ee);var qe=W.apply(this,be);return oe.cache=rt.set(Ee,qe)||rt,qe};return oe.cache=new(M.Cache||_),oe}M.Cache=_,m.exports=M}),_r=o((d,m)=>{var _=Qr(),C=500;function M(W){var ee=_(W,function(be){return oe.size===C&&oe.clear(),be}),oe=ee.cache;return ee}m.exports=M}),Ar=o((d,m)=>{var _=_r(),C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,W=_(function(ee){var oe=[];return ee.charCodeAt(0)===46&&oe.push(""),ee.replace(C,function(be,Ee,rt,qe){oe.push(rt?qe.replace(M,"$1"):Ee||be)}),oe});m.exports=W}),hi=o((d,m)=>{function _(C,M){for(var W=-1,ee=C==null?0:C.length,oe=Array(ee);++W<ee;)oe[W]=M(C[W],W,C);return oe}m.exports=_}),Rr=o((d,m)=>{var _=pe(),C=hi(),M=mn(),W=Br(),ee=_?_.prototype:void 0,oe=ee?ee.toString:void 0;function be(Ee){if(typeof Ee=="string")return Ee;if(M(Ee))return C(Ee,be)+"";if(W(Ee))return oe?oe.call(Ee):"";var rt=Ee+"";return rt=="0"&&1/Ee==-1/0?"-0":rt}m.exports=be}),an=o((d,m)=>{var _=Rr();function C(M){return M==null?"":_(M)}m.exports=C}),Ni=o((d,m)=>{var _=mn(),C=zi(),M=Ar(),W=an();function ee(oe,be){return _(oe)?oe:C(oe,be)?[oe]:M(W(oe))}m.exports=ee}),vi=o((d,m)=>{var _=Br();function C(M){if(typeof M=="string"||_(M))return M;var W=M+"";return W=="0"&&1/M==-1/0?"-0":W}m.exports=C}),Ki=o((d,m)=>{var _=Ni(),C=vi();function M(W,ee){ee=_(ee,W);for(var oe=0,be=ee.length;W!=null&&oe<be;)W=W[C(ee[oe++])];return oe&&oe==be?W:void 0}m.exports=M}),ei=o((d,m)=>{var _=Ki();function C(M,W,ee){var oe=M==null?void 0:_(M,W);return oe===void 0?ee:oe}m.exports=C}),hr=o((d,m)=>{(function(_,C){typeof d=="object"&&typeof m<"u"?m.exports=C():(_=_||self).RBush=C()})(d,function(){function _(nt,st,gt,zt,Et){(function Bt(_e,ke,$e,je,He){for(;je>$e;){if(je-$e>600){var We=je-$e+1,ct=ke-$e+1,ht=Math.log(We),yt=.5*Math.exp(2*ht/3),At=.5*Math.sqrt(ht*yt*(We-yt)/We)*(ct-We/2<0?-1:1),Tt=Math.max($e,Math.floor(ke-ct*yt/We+At)),ln=Math.min(je,Math.floor(ke+(We-ct)*yt/We+At));Bt(_e,ke,Tt,ln,He)}var Gn=_e[ke],Zn=$e,ar=je;for(C(_e,$e,ke),He(_e[je],Gn)>0&&C(_e,$e,je);Zn<ar;){for(C(_e,Zn,ar),Zn++,ar--;He(_e[Zn],Gn)<0;)Zn++;for(;He(_e[ar],Gn)>0;)ar--}He(_e[$e],Gn)===0?C(_e,$e,ar):C(_e,++ar,je),ar<=ke&&($e=ar+1),ke<=ar&&(je=ar-1)}})(nt,st,gt||0,zt||nt.length-1,Et||M)}function C(nt,st,gt){var zt=nt[st];nt[st]=nt[gt],nt[gt]=zt}function M(nt,st){return nt<st?-1:nt>st?1:0}var W=function(nt){nt===void 0&&(nt=9),this._maxEntries=Math.max(4,nt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ee(nt,st,gt){if(!gt)return st.indexOf(nt);for(var zt=0;zt<st.length;zt++)if(gt(nt,st[zt]))return zt;return-1}function oe(nt,st){be(nt,0,nt.children.length,st,nt)}function be(nt,st,gt,zt,Et){Et||(Et=Pn(null)),Et.minX=1/0,Et.minY=1/0,Et.maxX=-1/0,Et.maxY=-1/0;for(var Bt=st;Bt<gt;Bt++){var _e=nt.children[Bt];Ee(Et,nt.leaf?zt(_e):_e)}return Et}function Ee(nt,st){return nt.minX=Math.min(nt.minX,st.minX),nt.minY=Math.min(nt.minY,st.minY),nt.maxX=Math.max(nt.maxX,st.maxX),nt.maxY=Math.max(nt.maxY,st.maxY),nt}function rt(nt,st){return nt.minX-st.minX}function qe(nt,st){return nt.minY-st.minY}function wt(nt){return(nt.maxX-nt.minX)*(nt.maxY-nt.minY)}function It(nt){return nt.maxX-nt.minX+(nt.maxY-nt.minY)}function en(nt,st){return nt.minX<=st.minX&&nt.minY<=st.minY&&st.maxX<=nt.maxX&&st.maxY<=nt.maxY}function _n(nt,st){return st.minX<=nt.maxX&&st.minY<=nt.maxY&&st.maxX>=nt.minX&&st.maxY>=nt.minY}function Pn(nt){return{children:nt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function br(nt,st,gt,zt,Et){for(var Bt=[st,gt];Bt.length;)if(!((gt=Bt.pop())-(st=Bt.pop())<=zt)){var _e=st+Math.ceil((gt-st)/zt/2)*zt;_(nt,_e,st,gt,Et),Bt.push(st,_e,_e,gt)}}return W.prototype.all=function(){return this._all(this.data,[])},W.prototype.search=function(nt){var st=this.data,gt=[];if(!_n(nt,st))return gt;for(var zt=this.toBBox,Et=[];st;){for(var Bt=0;Bt<st.children.length;Bt++){var _e=st.children[Bt],ke=st.leaf?zt(_e):_e;_n(nt,ke)&&(st.leaf?gt.push(_e):en(nt,ke)?this._all(_e,gt):Et.push(_e))}st=Et.pop()}return gt},W.prototype.collides=function(nt){var st=this.data;if(!_n(nt,st))return!1;for(var gt=[];st;){for(var zt=0;zt<st.children.length;zt++){var Et=st.children[zt],Bt=st.leaf?this.toBBox(Et):Et;if(_n(nt,Bt)){if(st.leaf||en(nt,Bt))return!0;gt.push(Et)}}st=gt.pop()}return!1},W.prototype.load=function(nt){if(!nt||!nt.length)return this;if(nt.length<this._minEntries){for(var st=0;st<nt.length;st++)this.insert(nt[st]);return this}var gt=this._build(nt.slice(),0,nt.length-1,0);if(this.data.children.length)if(this.data.height===gt.height)this._splitRoot(this.data,gt);else{if(this.data.height<gt.height){var zt=this.data;this.data=gt,gt=zt}this._insert(gt,this.data.height-gt.height-1,!0)}else this.data=gt;return this},W.prototype.insert=function(nt){return nt&&this._insert(nt,this.data.height-1),this},W.prototype.clear=function(){return this.data=Pn([]),this},W.prototype.remove=function(nt,st){if(!nt)return this;for(var gt,zt,Et,Bt=this.data,_e=this.toBBox(nt),ke=[],$e=[];Bt||ke.length;){if(Bt||(Bt=ke.pop(),zt=ke[ke.length-1],gt=$e.pop(),Et=!0),Bt.leaf){var je=ee(nt,Bt.children,st);if(je!==-1)return Bt.children.splice(je,1),ke.push(Bt),this._condense(ke),this}Et||Bt.leaf||!en(Bt,_e)?zt?(gt++,Bt=zt.children[gt],Et=!1):Bt=null:(ke.push(Bt),$e.push(gt),gt=0,zt=Bt,Bt=Bt.children[0])}return this},W.prototype.toBBox=function(nt){return nt},W.prototype.compareMinX=function(nt,st){return nt.minX-st.minX},W.prototype.compareMinY=function(nt,st){return nt.minY-st.minY},W.prototype.toJSON=function(){return this.data},W.prototype.fromJSON=function(nt){return this.data=nt,this},W.prototype._all=function(nt,st){for(var gt=[];nt;)nt.leaf?st.push.apply(st,nt.children):gt.push.apply(gt,nt.children),nt=gt.pop();return st},W.prototype._build=function(nt,st,gt,zt){var Et,Bt=gt-st+1,_e=this._maxEntries;if(Bt<=_e)return oe(Et=Pn(nt.slice(st,gt+1)),this.toBBox),Et;zt||(zt=Math.ceil(Math.log(Bt)/Math.log(_e)),_e=Math.ceil(Bt/Math.pow(_e,zt-1))),(Et=Pn([])).leaf=!1,Et.height=zt;var ke=Math.ceil(Bt/_e),$e=ke*Math.ceil(Math.sqrt(_e));br(nt,st,gt,$e,this.compareMinX);for(var je=st;je<=gt;je+=$e){var He=Math.min(je+$e-1,gt);br(nt,je,He,ke,this.compareMinY);for(var We=je;We<=He;We+=ke){var ct=Math.min(We+ke-1,He);Et.children.push(this._build(nt,We,ct,zt-1))}}return oe(Et,this.toBBox),Et},W.prototype._chooseSubtree=function(nt,st,gt,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==gt;){for(var Et=1/0,Bt=1/0,_e=void 0,ke=0;ke<st.children.length;ke++){var $e=st.children[ke],je=wt($e),He=(We=nt,ct=$e,(Math.max(ct.maxX,We.maxX)-Math.min(ct.minX,We.minX))*(Math.max(ct.maxY,We.maxY)-Math.min(ct.minY,We.minY))-je);He<Bt?(Bt=He,Et=je<Et?je:Et,_e=$e):He===Bt&&je<Et&&(Et=je,_e=$e)}st=_e||st.children[0]}var We,ct;return st},W.prototype._insert=function(nt,st,gt){var zt=gt?nt:this.toBBox(nt),Et=[],Bt=this._chooseSubtree(zt,this.data,st,Et);for(Bt.children.push(nt),Ee(Bt,zt);st>=0&&Et[st].children.length>this._maxEntries;)this._split(Et,st),st--;this._adjustParentBBoxes(zt,Et,st)},W.prototype._split=function(nt,st){var gt=nt[st],zt=gt.children.length,Et=this._minEntries;this._chooseSplitAxis(gt,Et,zt);var Bt=this._chooseSplitIndex(gt,Et,zt),_e=Pn(gt.children.splice(Bt,gt.children.length-Bt));_e.height=gt.height,_e.leaf=gt.leaf,oe(gt,this.toBBox),oe(_e,this.toBBox),st?nt[st-1].children.push(_e):this._splitRoot(gt,_e)},W.prototype._splitRoot=function(nt,st){this.data=Pn([nt,st]),this.data.height=nt.height+1,this.data.leaf=!1,oe(this.data,this.toBBox)},W.prototype._chooseSplitIndex=function(nt,st,gt){for(var zt,Et,Bt,_e,ke,$e,je,He=1/0,We=1/0,ct=st;ct<=gt-st;ct++){var ht=be(nt,0,ct,this.toBBox),yt=be(nt,ct,gt,this.toBBox),At=(Et=ht,Bt=yt,_e=void 0,ke=void 0,$e=void 0,je=void 0,_e=Math.max(Et.minX,Bt.minX),ke=Math.max(Et.minY,Bt.minY),$e=Math.min(Et.maxX,Bt.maxX),je=Math.min(Et.maxY,Bt.maxY),Math.max(0,$e-_e)*Math.max(0,je-ke)),Tt=wt(ht)+wt(yt);At<He?(He=At,zt=ct,We=Tt<We?Tt:We):At===He&&Tt<We&&(We=Tt,zt=ct)}return zt||gt-st},W.prototype._chooseSplitAxis=function(nt,st,gt){var zt=nt.leaf?this.compareMinX:rt,Et=nt.leaf?this.compareMinY:qe;this._allDistMargin(nt,st,gt,zt)<this._allDistMargin(nt,st,gt,Et)&&nt.children.sort(zt)},W.prototype._allDistMargin=function(nt,st,gt,zt){nt.children.sort(zt);for(var Et=this.toBBox,Bt=be(nt,0,st,Et),_e=be(nt,gt-st,gt,Et),ke=It(Bt)+It(_e),$e=st;$e<gt-st;$e++){var je=nt.children[$e];Ee(Bt,nt.leaf?Et(je):je),ke+=It(Bt)}for(var He=gt-st-1;He>=st;He--){var We=nt.children[He];Ee(_e,nt.leaf?Et(We):We),ke+=It(_e)}return ke},W.prototype._adjustParentBBoxes=function(nt,st,gt){for(var zt=gt;zt>=0;zt--)Ee(st[zt],nt)},W.prototype._condense=function(nt){for(var st=nt.length-1,gt=void 0;st>=0;st--)nt[st].children.length===0?st>0?(gt=nt[st-1].children).splice(gt.indexOf(nt[st]),1):this.clear():oe(nt[st],this.toBBox)},W})}),Dn=o(d=>{Object.defineProperty(d,"__esModule",{value:!0}),d.earthRadius=63710088e-1,d.factors={centimeters:d.earthRadius*100,centimetres:d.earthRadius*100,degrees:d.earthRadius/111325,feet:d.earthRadius*3.28084,inches:d.earthRadius*39.37,kilometers:d.earthRadius/1e3,kilometres:d.earthRadius/1e3,meters:d.earthRadius,metres:d.earthRadius,miles:d.earthRadius/1609.344,millimeters:d.earthRadius*1e3,millimetres:d.earthRadius*1e3,nauticalmiles:d.earthRadius/1852,radians:1,yards:d.earthRadius*1.0936},d.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/d.earthRadius,yards:1.0936133},d.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function m(je,He,We){We===void 0&&(We={});var ct={type:"Feature"};return(We.id===0||We.id)&&(ct.id=We.id),We.bbox&&(ct.bbox=We.bbox),ct.properties=He||{},ct.geometry=je,ct}d.feature=m;function _(je,He,We){switch(je){case"Point":return C(He).geometry;case"LineString":return oe(He).geometry;case"Polygon":return W(He).geometry;case"MultiPoint":return qe(He).geometry;case"MultiLineString":return rt(He).geometry;case"MultiPolygon":return wt(He).geometry;default:throw new Error(je+" is invalid")}}d.geometry=_;function C(je,He,We){if(We===void 0&&(We={}),!je)throw new Error("coordinates is required");if(!Array.isArray(je))throw new Error("coordinates must be an Array");if(je.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Bt(je[0])||!Bt(je[1]))throw new Error("coordinates must contain numbers");var ct={type:"Point",coordinates:je};return m(ct,He,We)}d.point=C;function M(je,He,We){return We===void 0&&(We={}),Ee(je.map(function(ct){return C(ct,He)}),We)}d.points=M;function W(je,He,We){We===void 0&&(We={});for(var ct=0,ht=je;ct<ht.length;ct++){var yt=ht[ct];if(yt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var At=0;At<yt[yt.length-1].length;At++)if(yt[yt.length-1][At]!==yt[0][At])throw new Error("First and last Position are not equivalent.")}var Tt={type:"Polygon",coordinates:je};return m(Tt,He,We)}d.polygon=W;function ee(je,He,We){return We===void 0&&(We={}),Ee(je.map(function(ct){return W(ct,He)}),We)}d.polygons=ee;function oe(je,He,We){if(We===void 0&&(We={}),je.length<2)throw new Error("coordinates must be an array of two or more positions");var ct={type:"LineString",coordinates:je};return m(ct,He,We)}d.lineString=oe;function be(je,He,We){return We===void 0&&(We={}),Ee(je.map(function(ct){return oe(ct,He)}),We)}d.lineStrings=be;function Ee(je,He){He===void 0&&(He={});var We={type:"FeatureCollection"};return He.id&&(We.id=He.id),He.bbox&&(We.bbox=He.bbox),We.features=je,We}d.featureCollection=Ee;function rt(je,He,We){We===void 0&&(We={});var ct={type:"MultiLineString",coordinates:je};return m(ct,He,We)}d.multiLineString=rt;function qe(je,He,We){We===void 0&&(We={});var ct={type:"MultiPoint",coordinates:je};return m(ct,He,We)}d.multiPoint=qe;function wt(je,He,We){We===void 0&&(We={});var ct={type:"MultiPolygon",coordinates:je};return m(ct,He,We)}d.multiPolygon=wt;function It(je,He,We){We===void 0&&(We={});var ct={type:"GeometryCollection",geometries:je};return m(ct,He,We)}d.geometryCollection=It;function en(je,He){if(He===void 0&&(He=0),He&&!(He>=0))throw new Error("precision must be a positive number");var We=Math.pow(10,He||0);return Math.round(je*We)/We}d.round=en;function _n(je,He){He===void 0&&(He="kilometers");var We=d.factors[He];if(!We)throw new Error(He+" units is invalid");return je*We}d.radiansToLength=_n;function Pn(je,He){He===void 0&&(He="kilometers");var We=d.factors[He];if(!We)throw new Error(He+" units is invalid");return je/We}d.lengthToRadians=Pn;function br(je,He){return st(Pn(je,He))}d.lengthToDegrees=br;function nt(je){var He=je%360;return He<0&&(He+=360),He}d.bearingToAzimuth=nt;function st(je){var He=je%(2*Math.PI);return He*180/Math.PI}d.radiansToDegrees=st;function gt(je){var He=je%360;return He*Math.PI/180}d.degreesToRadians=gt;function zt(je,He,We){if(He===void 0&&(He="kilometers"),We===void 0&&(We="kilometers"),!(je>=0))throw new Error("length must be a positive number");return _n(Pn(je,He),We)}d.convertLength=zt;function Et(je,He,We){if(He===void 0&&(He="meters"),We===void 0&&(We="kilometers"),!(je>=0))throw new Error("area must be a positive number");var ct=d.areaFactors[He];if(!ct)throw new Error("invalid original units");var ht=d.areaFactors[We];if(!ht)throw new Error("invalid final units");return je/ct*ht}d.convertArea=Et;function Bt(je){return!isNaN(je)&&je!==null&&!Array.isArray(je)}d.isNumber=Bt;function _e(je){return!!je&&je.constructor===Object}d.isObject=_e;function ke(je){if(!je)throw new Error("bbox is required");if(!Array.isArray(je))throw new Error("bbox must be an Array");if(je.length!==4&&je.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");je.forEach(function(He){if(!Bt(He))throw new Error("bbox must only contain numbers")})}d.validateBBox=ke;function $e(je){if(!je)throw new Error("id is required");if(["string","number"].indexOf(typeof je)===-1)throw new Error("id must be a number or a string")}d.validateId=$e}),Sr=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var m=Dn();function _(st,gt,zt){if(st!==null)for(var Et,Bt,_e,ke,$e,je,He,We=0,ct=0,ht,yt=st.type,At=yt==="FeatureCollection",Tt=yt==="Feature",ln=At?st.features.length:1,Gn=0;Gn<ln;Gn++){He=At?st.features[Gn].geometry:Tt?st.geometry:st,ht=He?He.type==="GeometryCollection":!1,$e=ht?He.geometries.length:1;for(var Zn=0;Zn<$e;Zn++){var ar=0,wi=0;if(ke=ht?He.geometries[Zn]:He,ke!==null){je=ke.coordinates;var Bi=ke.type;switch(We=zt&&(Bi==="Polygon"||Bi==="MultiPolygon")?1:0,Bi){case null:break;case"Point":if(gt(je,ct,Gn,ar,wi)===!1)return!1;ct++,ar++;break;case"LineString":case"MultiPoint":for(Et=0;Et<je.length;Et++){if(gt(je[Et],ct,Gn,ar,wi)===!1)return!1;ct++,Bi==="MultiPoint"&&ar++}Bi==="LineString"&&ar++;break;case"Polygon":case"MultiLineString":for(Et=0;Et<je.length;Et++){for(Bt=0;Bt<je[Et].length-We;Bt++){if(gt(je[Et][Bt],ct,Gn,ar,wi)===!1)return!1;ct++}Bi==="MultiLineString"&&ar++,Bi==="Polygon"&&wi++}Bi==="Polygon"&&ar++;break;case"MultiPolygon":for(Et=0;Et<je.length;Et++){for(wi=0,Bt=0;Bt<je[Et].length;Bt++){for(_e=0;_e<je[Et][Bt].length-We;_e++){if(gt(je[Et][Bt][_e],ct,Gn,ar,wi)===!1)return!1;ct++}wi++}ar++}break;case"GeometryCollection":for(Et=0;Et<ke.geometries.length;Et++)if(_(ke.geometries[Et],gt,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function C(st,gt,zt,Et){var Bt=zt;return _(st,function(_e,ke,$e,je,He){ke===0&&zt===void 0?Bt=_e:Bt=gt(Bt,_e,ke,$e,je,He)},Et),Bt}function M(st,gt){var zt;switch(st.type){case"FeatureCollection":for(zt=0;zt<st.features.length&&gt(st.features[zt].properties,zt)!==!1;zt++);break;case"Feature":gt(st.properties,0);break}}function W(st,gt,zt){var Et=zt;return M(st,function(Bt,_e){_e===0&&zt===void 0?Et=Bt:Et=gt(Et,Bt,_e)}),Et}function ee(st,gt){if(st.type==="Feature")gt(st,0);else if(st.type==="FeatureCollection")for(var zt=0;zt<st.features.length&&gt(st.features[zt],zt)!==!1;zt++);}function oe(st,gt,zt){var Et=zt;return ee(st,function(Bt,_e){_e===0&&zt===void 0?Et=Bt:Et=gt(Et,Bt,_e)}),Et}function be(st){var gt=[];return _(st,function(zt){gt.push(zt)}),gt}function Ee(st,gt){var zt,Et,Bt,_e,ke,$e,je,He,We,ct,ht=0,yt=st.type==="FeatureCollection",At=st.type==="Feature",Tt=yt?st.features.length:1;for(zt=0;zt<Tt;zt++){for($e=yt?st.features[zt].geometry:At?st.geometry:st,He=yt?st.features[zt].properties:At?st.properties:{},We=yt?st.features[zt].bbox:At?st.bbox:void 0,ct=yt?st.features[zt].id:At?st.id:void 0,je=$e?$e.type==="GeometryCollection":!1,ke=je?$e.geometries.length:1,Bt=0;Bt<ke;Bt++){if(_e=je?$e.geometries[Bt]:$e,_e===null){if(gt(null,ht,He,We,ct)===!1)return!1;continue}switch(_e.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(gt(_e,ht,He,We,ct)===!1)return!1;break}case"GeometryCollection":{for(Et=0;Et<_e.geometries.length;Et++)if(gt(_e.geometries[Et],ht,He,We,ct)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function rt(st,gt,zt){var Et=zt;return Ee(st,function(Bt,_e,ke,$e,je){_e===0&&zt===void 0?Et=Bt:Et=gt(Et,Bt,_e,ke,$e,je)}),Et}function qe(st,gt){Ee(st,function(zt,Et,Bt,_e,ke){var $e=zt===null?null:zt.type;switch($e){case null:case"Point":case"LineString":case"Polygon":return gt(m.feature(zt,Bt,{bbox:_e,id:ke}),Et,0)===!1?!1:void 0}var je;switch($e){case"MultiPoint":je="Point";break;case"MultiLineString":je="LineString";break;case"MultiPolygon":je="Polygon";break}for(var He=0;He<zt.coordinates.length;He++){var We=zt.coordinates[He],ct={type:je,coordinates:We};if(gt(m.feature(ct,Bt),Et,He)===!1)return!1}})}function wt(st,gt,zt){var Et=zt;return qe(st,function(Bt,_e,ke){_e===0&&ke===0&&zt===void 0?Et=Bt:Et=gt(Et,Bt,_e,ke)}),Et}function It(st,gt){qe(st,function(zt,Et,Bt){var _e=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var $e,je=0,He=0,We=0;if(_(zt,function(ct,ht,yt,At,Tt){if($e===void 0||Et>je||At>He||Tt>We){$e=ct,je=Et,He=At,We=Tt,_e=0;return}var ln=m.lineString([$e,ct],zt.properties);if(gt(ln,Et,Bt,Tt,_e)===!1)return!1;_e++,$e=ct})===!1)return!1}}})}function en(st,gt,zt){var Et=zt,Bt=!1;return It(st,function(_e,ke,$e,je,He){Bt===!1&&zt===void 0?Et=_e:Et=gt(Et,_e,ke,$e,je,He),Bt=!0}),Et}function _n(st,gt){if(!st)throw new Error("geojson is required");qe(st,function(zt,Et,Bt){if(zt.geometry!==null){var _e=zt.geometry.type,ke=zt.geometry.coordinates;switch(_e){case"LineString":if(gt(zt,Et,Bt,0,0)===!1)return!1;break;case"Polygon":for(var $e=0;$e<ke.length;$e++)if(gt(m.lineString(ke[$e],zt.properties),Et,Bt,$e)===!1)return!1;break}}})}function Pn(st,gt,zt){var Et=zt;return _n(st,function(Bt,_e,ke,$e){_e===0&&zt===void 0?Et=Bt:Et=gt(Et,Bt,_e,ke,$e)}),Et}function br(st,gt){if(gt=gt||{},!m.isObject(gt))throw new Error("options is invalid");var zt=gt.featureIndex||0,Et=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,_e=gt.segmentIndex||0,ke=gt.properties,$e;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,$e=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,$e=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":$e=st;break;default:throw new Error("geojson is invalid")}if($e===null)return null;var je=$e.coordinates;switch($e.type){case"Point":case"MultiPoint":return null;case"LineString":return _e<0&&(_e=je.length+_e-1),m.lineString([je[_e],je[_e+1]],ke,gt);case"Polygon":return Bt<0&&(Bt=je.length+Bt),_e<0&&(_e=je[Bt].length+_e-1),m.lineString([je[Bt][_e],je[Bt][_e+1]],ke,gt);case"MultiLineString":return Et<0&&(Et=je.length+Et),_e<0&&(_e=je[Et].length+_e-1),m.lineString([je[Et][_e],je[Et][_e+1]],ke,gt);case"MultiPolygon":return Et<0&&(Et=je.length+Et),Bt<0&&(Bt=je[Et].length+Bt),_e<0&&(_e=je[Et][Bt].length-_e-1),m.lineString([je[Et][Bt][_e],je[Et][Bt][_e+1]],ke,gt)}throw new Error("geojson is invalid")}function nt(st,gt){if(gt=gt||{},!m.isObject(gt))throw new Error("options is invalid");var zt=gt.featureIndex||0,Et=gt.multiFeatureIndex||0,Bt=gt.geometryIndex||0,_e=gt.coordIndex||0,ke=gt.properties,$e;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,$e=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,$e=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":$e=st;break;default:throw new Error("geojson is invalid")}if($e===null)return null;var je=$e.coordinates;switch($e.type){case"Point":return m.point(je,ke,gt);case"MultiPoint":return Et<0&&(Et=je.length+Et),m.point(je[Et],ke,gt);case"LineString":return _e<0&&(_e=je.length+_e),m.point(je[_e],ke,gt);case"Polygon":return Bt<0&&(Bt=je.length+Bt),_e<0&&(_e=je[Bt].length+_e),m.point(je[Bt][_e],ke,gt);case"MultiLineString":return Et<0&&(Et=je.length+Et),_e<0&&(_e=je[Et].length+_e),m.point(je[Et][_e],ke,gt);case"MultiPolygon":return Et<0&&(Et=je.length+Et),Bt<0&&(Bt=je[Et].length+Bt),_e<0&&(_e=je[Et][Bt].length-_e),m.point(je[Et][Bt][_e],ke,gt)}throw new Error("geojson is invalid")}d.coordAll=be,d.coordEach=_,d.coordReduce=C,d.featureEach=ee,d.featureReduce=oe,d.findPoint=nt,d.findSegment=br,d.flattenEach=qe,d.flattenReduce=wt,d.geomEach=Ee,d.geomReduce=rt,d.lineEach=_n,d.lineReduce=Pn,d.propEach=M,d.propReduce=W,d.segmentEach=It,d.segmentReduce=en}),ws=o(d=>{Object.defineProperty(d,"__esModule",{value:!0});var m=Sr();function _(C){var M=[1/0,1/0,-1/0,-1/0];return m.coordEach(C,function(W){M[0]>W[0]&&(M[0]=W[0]),M[1]>W[1]&&(M[1]=W[1]),M[2]<W[0]&&(M[2]=W[0]),M[3]<W[1]&&(M[3]=W[1])}),M}_.default=_,d.default=_}),mo=o((d,m)=>{var _=hr(),C=Dn(),M=Sr(),W=ws().default,ee=M.featureEach;M.coordEach,C.polygon;var oe=C.featureCollection;function be(Ee){var rt=new _(Ee);return rt.insert=function(qe){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:W(qe),_.prototype.insert.call(this,qe)},rt.load=function(qe){var wt=[];return Array.isArray(qe)?qe.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:W(It),wt.push(It)}):ee(qe,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:W(It),wt.push(It)}),_.prototype.load.call(this,wt)},rt.remove=function(qe,wt){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:W(qe),_.prototype.remove.call(this,qe,wt)},rt.clear=function(){return _.prototype.clear.call(this)},rt.search=function(qe){var wt=_.prototype.search.call(this,this.toBBox(qe));return oe(wt)},rt.collides=function(qe){return _.prototype.collides.call(this,this.toBBox(qe))},rt.all=function(){var qe=_.prototype.all.call(this);return oe(qe)},rt.toJSON=function(){return _.prototype.toJSON.call(this)},rt.fromJSON=function(qe){return _.prototype.fromJSON.call(this,qe)},rt.toBBox=function(qe){var wt;if(qe.bbox)wt=qe.bbox;else if(Array.isArray(qe)&&qe.length===4)wt=qe;else if(Array.isArray(qe)&&qe.length===6)wt=[qe[0],qe[1],qe[3],qe[4]];else if(qe.type==="Feature")wt=W(qe);else if(qe.type==="FeatureCollection")wt=W(qe);else throw new Error("invalid geojson");return{minX:wt[0],minY:wt[1],maxX:wt[2],maxY:wt[3]}},rt}m.exports=be,m.exports.default=be});Array.prototype.findIndex=Array.prototype.findIndex||function(d){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],M=0;M<_;M++)if(d.call(C,m[M],M,m))return M;return-1},Array.prototype.find=Array.prototype.find||function(d){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof d!="function")throw new TypeError("callback must be a function");for(var m=Object(this),_=m.length>>>0,C=arguments[1],M=0;M<_;M++){var W=m[M];if(d.call(C,W,M,m))return W}},typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");d=Object(d);for(var m=1;m<arguments.length;m++){var _=arguments[m];if(_!=null)for(var C in _)Object.prototype.hasOwnProperty.call(_,C)&&(d[C]=_[C])}return d}),function(d){d.forEach(function(m){m.hasOwnProperty("remove")||Object.defineProperty(m,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(d,m){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),C=_.length>>>0;if(C===0)return!1;var M=m|0,W=Math.max(M>=0?M:C-Math.abs(M),0);function ee(oe,be){return oe===be||typeof oe=="number"&&typeof be=="number"&&isNaN(oe)&&isNaN(be)}for(;W<C;){if(ee(_[W],d))return!0;W++}return!1}});var cr={version:"2.18.3"},Sn=l(zr()),sn={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},yi={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex lschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer lschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Lnge",segmentLength:"Segment Lnge",area:"Flche",radius:"Radius",perimeter:"Umfang",height:"Hhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},ti={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},bi={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Zs={tooltips:{placeMarker:"Adaug un punct",firstVertex:"Apas aici pentru a aduga primul Vertex",continueLine:"Apas aici pentru a continua desenul",finishLine:"Apas pe orice obiect pentru a finisa desenul",finishPoly:"Apas pe primul obiect pentru a finisa",finishRect:"Apas pentru a finisa",startCircle:"Apas pentru a desena un cerc",finishCircle:"Apas pentru a finisa un cerc",placeCircleMarker:"Adaug un punct"},actions:{finish:"Termin",cancel:"Anuleaz",removeLastVertex:"terge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaug o bulin",drawPolyButton:"Deseneaz un poligon",drawLineButton:"Deseneaz o linie",drawCircleButton:"Deseneaz un cerc",drawRectButton:"Deseneaz un dreptunghi",editButton:"Editeaz straturile",dragButton:"Mut straturile",cutButton:"Taie straturile",deleteButton:"terge straturile",drawCircleMarkerButton:"Deseneaz marcatorul cercului",snappingButton:"Fixai marcatorul glisat pe alte straturi i vrfuri",pinningButton:"Fixai vrfurile partajate mpreun",rotateButton:"Rotii stratul"}},vo={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:"     ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" "}},js={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vrtice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del crculo",finishCircle:"Presiona para finalizar el crculo",placeCircleMarker:"Presiona para colocar un marcador de crculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar ltimo vrtice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polgono",drawLineButton:"Dibujar Lnea",drawCircleButton:"Dibujar Crculo",drawRectButton:"Dibujar Rectngulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Crculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vrtices",pinningButton:"Fijar juntos los vrtices compartidos",rotateButton:"Rotar capa"}},yr={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beindigen",finishPoly:"Klik op het eerst punt om te beindigen",finishRect:"Klik om te beindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Xs={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer  dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"diter des calques",dragButton:"Dplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"pingler ensemble les sommets partags",rotateButton:"Tourner des calques"}},Vi={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},Gi={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:""}},fi={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vrtice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do crculo",finishCircle:"Clique para finalizar o crculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover ltimo vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},Mn={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vrtice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do crculo",finishCircle:"Clique para terminar o crculo",placeCircleMarker:"Clique para colocar marcador de crculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover ltimo Vrtice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polgonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Crculo",drawRectButton:"Desenhar Retngulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Crculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vrtices",pinningButton:"Unir vrtices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traado Automtico de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"rea",radius:"Raio",perimeter:"Permetro",height:"Altura",width:"Largura",coordinates:"Posio",coordinatesMarker:"Marcador de Posio"}},vn={tooltips:{placeMarker:"Kliknij, aby umieci znacznik",firstVertex:"Kliknij, aby umieci pierwszy wierzchoek",continueLine:"Kliknij, aby kontynuowa rysowanie",finishLine:"Kliknij dowolny istniejcy znacznik, aby zakoczy",finishPoly:"Kliknij pierwszy znacznik, aby zakoczy",finishRect:"Kliknij, aby zakoczy",startCircle:"Kliknij, aby umieci rodek okrgu",finishCircle:"Kliknij, aby zakoczy okrg",placeCircleMarker:"Kliknij, aby umieci znacznik okrgu",placeText:"Kliknij, aby umieci tekst"},actions:{finish:"Zakocz",cancel:"Anuluj",removeLastVertex:"Usu ostatni wierzchoek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokt",drawLineButton:"Rysuj lini",drawCircleButton:"Rysuj okrg",drawRectButton:"Rysuj prostokt",editButton:"Edytuj warstwy",dragButton:"Przecignij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usu warstwy",drawCircleMarkerButton:"Rysuj znacznik okrgy",snappingButton:"Przycignij przenoszony znacznik do innych warstw i wierzchokw",pinningButton:"Przypnij wsplne wierzchoki razem",rotateButton:"Obr warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne ledzenie linii"},measurements:{totalLength:"Dugo",segmentLength:"Dugo odcinka",area:"Obszar",radius:"Promie",perimeter:"Obwd",height:"Wysoko",width:"Szeroko",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},Yr={tooltips:{placeMarker:"Klicka fr att placera markr",firstVertex:"Klicka fr att placera frsta hrnet",continueLine:"Klicka fr att fortstta rita",finishLine:"Klicka p en existerande punkt fr att slutfra",finishPoly:"Klicka p den frsta punkten fr att slutfra",finishRect:"Klicka fr att slutfra",startCircle:"Klicka fr att placera cirkelns centrum",finishCircle:"Klicka fr att slutfra cirkeln",placeCircleMarker:"Klicka fr att placera cirkelmarkr"},actions:{finish:"Slutfr",cancel:"Avbryt",removeLastVertex:"Ta bort sista hrnet"},buttonTitles:{drawMarkerButton:"Rita Markr",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkr",snappingButton:"Snpp dra markren till andra lager och hrn",pinningButton:"Fst delade hrn tillsammans",rotateButton:"Rotera lagret"}},xs={tooltips:{placeMarker:"     ",firstVertex:"       ",continueLine:"      ",finishLine:"        ",finishPoly:"       ",finishRect:"    ",startCircle:"      ",finishCircle:"      ",placeCircleMarker:"      "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"        ",pinningButton:"   ",rotateButton:"  "}},Js={tooltips:{placeMarker:"Kattintson a jell elhelyezshez",firstVertex:"Kattintson az els pont elhelyezshez",continueLine:"Kattintson a kvetkez pont elhelyezshez",finishLine:"A befejezshez kattintson egy meglv pontra",finishPoly:"A befejezshez kattintson az els pontra",finishRect:"Kattintson a befejezshez",startCircle:"Kattintson a kr kzppontjnak elhelyezshez",finishCircle:"Kattintson a kr befejezshez",placeCircleMarker:"Kattintson a krjell elhelyezshez"},actions:{finish:"Befejezs",cancel:"Mgse",removeLastVertex:"Utols pont eltvoltsa"},buttonTitles:{drawMarkerButton:"Jell rajzolsa",drawPolyButton:"Poligon rajzolsa",drawLineButton:"Vonal rajzolsa",drawCircleButton:"Kr rajzolsa",drawRectButton:"Ngyzet rajzolsa",editButton:"Elemek szerkesztse",dragButton:"Elemek mozgatsa",cutButton:"Elemek vgsa",deleteButton:"Elemek trlse",drawCircleMarkerButton:"Kr jell rajzolsa",snappingButton:"Kapcsolja a jelltt msik elemhez vagy ponthoz",pinningButton:"Kzs pontok sszektse",rotateButton:"Flia elforgatsa"}},qa={tooltips:{placeMarker:"Tryk for at placere en markr",firstVertex:"Tryk for at placere det frste punkt",continueLine:"Tryk for at fortstte linjen",finishLine:"Tryk p et eksisterende punkt for at afslutte",finishPoly:"Tryk p det frste punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkr"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markr",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Trk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkr",snappingButton:"Fastgr trukket markr til andre elementer",pinningButton:"Sammenlg delte elementer",rotateButton:"Roter laget"}},ds={tooltips:{placeMarker:"Klikk for  plassere punkt",firstVertex:"Klikk for  plassere frste punkt",continueLine:"Klikk for  tegne videre",finishLine:"Klikk p et eksisterende punkt for  fullfre",finishPoly:"Klikk frste punkt for  fullfre",finishRect:"Klikk for  fullfre",startCircle:"Klikk for  sette sirkel midtpunkt",finishCircle:"Klikk for  fullfre sirkel",placeCircleMarker:"Klikk for  plassere sirkel",placeText:"Klikk for  plassere tekst"},actions:{finish:"Fullfr",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotr objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalr objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Omrde",radius:"Radius",perimeter:"Omriss",height:"Hyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkr"}},Ma={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"   ",finishLine:"      ",finishPoly:"     ",finishRect:"  ",startCircle:"    ",finishCircle:"    ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"      ",rotateButton:" ",drawTextButton:" ",scaleButton:"",autoTracingButton:" "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},bl={tooltips:{placeMarker:",   ",firstVertex:",    ",continueLine:",   ",finishLine:" -    ",finishPoly:"  ,  ",finishRect:",  ",startCircle:",    ",finishCircle:",   ",placeCircleMarker:",    "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"'   ",rotateButton:" "}},$n={tooltips:{placeMarker:"areti yerletirmek iin tklayn",firstVertex:"lk tepe noktasn yerletirmek iin tklayn",continueLine:"izime devam etmek iin tklayn",finishLine:"Bitirmek iin mevcut herhangi bir iaretiyi tklayn",finishPoly:"Bitirmek iin ilk iaretiyi tklayn",finishRect:"Bitirmek iin tklayn",startCircle:"Daire merkezine yerletirmek iin tklayn",finishCircle:"Daireyi bitirmek iin tklayn",placeCircleMarker:"Daire iaretisi yerletirmek iin tklayn"},actions:{finish:"Bitir",cancel:"ptal",removeLastVertex:"Son keyi kaldr"},buttonTitles:{drawMarkerButton:"izim aretisi",drawPolyButton:"okgenler iz",drawLineButton:"oklu izgi iz",drawCircleButton:"ember iz",drawRectButton:"Dikdrtgen iz",editButton:"Katmanlar dzenle",dragButton:"Katmanlar srkle",cutButton:"Katmanlar kes",deleteButton:"Katmanlar kaldr",drawCircleMarkerButton:"Daire iaretisi iz",snappingButton:"Srklenen iaretiyi dier katmanlara ve kelere yaptr",pinningButton:"Paylalan keleri birbirine sabitle",rotateButton:"Katman dndr"}},Cr={tooltips:{placeMarker:"Kliknutm vytvote znaku",firstVertex:"Kliknutm vytvote prvn objekt",continueLine:"Kliknutm pokraujte v kreslen",finishLine:"Kliknut na libovolnou existujc znaku pro dokonen",finishPoly:"Vyberte prvn bod pro dokonen",finishRect:"Kliknte pro dokonen",startCircle:"Kliknutm pidejte sted kruhu",finishCircle:",   ",placeCircleMarker:"Kliknutm nastavte polomr"},actions:{finish:"Dokonit",cancel:"Zruit",removeLastVertex:"Zruit posledn akci"},buttonTitles:{drawMarkerButton:"Pidat znaku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit kivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdlnk",editButton:"Upravit vrstvu",dragButton:"Peneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Pidat kruhovou znaku",snappingButton:"Navzat tanou znaku k dalm vrstvm a vrcholm",pinningButton:"Spojit spolen body dohromady",rotateButton:"Otote vrstvu"}},is={tooltips:{placeMarker:"",firstVertex:"",continueLine:"",finishLine:"",finishPoly:"",finishRect:"",startCircle:"",finishCircle:"",placeCircleMarker:"",placeText:""},actions:{finish:"",cancel:"",removeLastVertex:""},buttonTitles:{drawMarkerButton:"",drawPolyButton:"",drawLineButton:"",drawCircleButton:"",drawRectButton:"",editButton:"",dragButton:"",cutButton:"",deleteButton:"",drawCircleMarkerButton:"",snappingButton:"",pinningButton:"",rotateButton:"",drawTextButton:""}},Tr={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtmist",finishLine:"Klikkaa olemassa olevaa merkki lopettaaksesi",finishPoly:"Klikkaa ensimmist merkki lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrn keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrn",placeCircleMarker:"Klikkaa asettaaksesi ympyrmerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirr merkkej",drawPolyButton:"Piirr monikulmioita",drawLineButton:"Piirr viivoja",drawCircleButton:"Piirr ympyr",drawRectButton:"Piirr neliskulmioita",editButton:"Muokkaa",dragButton:"Siirr",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirr ympyrmerkki",snappingButton:"Kiinnit siirrettv merkki toisiin muotoihin",pinningButton:"Kiinnit jaetut muodot yhteen",rotateButton:"Knn",drawTextButton:"Piirr teksti"}},Zo={tooltips:{placeMarker:"  ",firstVertex:"   ",continueLine:"  ",finishLine:"   ",finishPoly:"   ",finishRect:" ",startCircle:"    ",finishCircle:"  ",placeCircleMarker:"   ",placeText:"  "},actions:{finish:"",cancel:"",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:" ",cutButton:" ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"       ",pinningButton:"   ",rotateButton:" ",drawTextButton:" "}},ka={tooltips:{placeMarker:"   ",firstVertex:"    ",continueLine:"    ",finishLine:"    ",finishPoly:"    ",finishRect:"  ",startCircle:"    ",finishCircle:"   ",placeCircleMarker:"    ",placeText:"   "},actions:{finish:"",cancel:" ",removeLastVertex:"  "},buttonTitles:{drawMarkerButton:" ",drawPolyButton:" ",drawLineButton:" ",drawCircleButton:" ",drawRectButton:" ",editButton:" ",dragButton:"  ",cutButton:"  ",deleteButton:" ",drawCircleMarkerButton:"  ",snappingButton:"     ",pinningButton:"   ",rotateButton:" ",drawTextButton:" ",scaleButton:"  ",autoTracingButton:"  "},measurements:{totalLength:"",segmentLength:" ",area:"",radius:"",perimeter:"",height:"",width:"",coordinates:"",coordinatesMarker:" "}},Aa=Mn,Xo={en:sn,de:yi,it:ti,id:bi,ro:Zs,ru:vo,es:js,nl:yr,fr:Xs,pt:Aa,pt_br:fi,pt_pt:Mn,zh:Vi,zh_tw:Gi,pl:vn,sv:Yr,el:xs,hu:Js,da:qa,no:ds,fa:Ma,ua:bl,tr:$n,cz:Cr,ja:is,fi:Tr,ko:Zo,ky:ka},sa={_globalEditModeEnabled:!1,enableGlobalEditMode(d){let m={...d};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(m)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(d=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(d)},handleLayerAdditionInGlobalEditMode(){let d=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let m in d){let _=d[m];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:d}){this._addedLayersEdit[L.stamp(d)]=d},_isRelevantForEdit(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowEditing}},_l=sa,Ta={_globalDragModeEnabled:!1,enableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},d.forEach(m=>{this._isRelevantForDrag(m)&&m.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let d=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,d.forEach(m=>{m.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let d=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let m in d){let _=d[m];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:d}){this._addedLayersDrag[L.stamp(d)]=d},_isRelevantForDrag(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.draggable}},Pr=Ta,Kn={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(d=>{this._isRelevantForRemoval(d)&&(d.pm.enabled()&&d.pm.disable(),d.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(d=>{d.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(d){let m=d.target;this._isRelevantForRemoval(m)&&!m.pm.dragging()&&(m.removeFrom(this.map.pm._getContainingLayer()),m.remove(),m instanceof L.LayerGroup?(this._fireRemoveLayerGroup(m),this._fireRemoveLayerGroup(this.map,m)):(m.pm._fireRemove(m),m.pm._fireRemove(this.map,m)))},_isRelevantForRemoval(d){return d.pm&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let d=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let m in d){let _=d[m];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:d}){this._addedLayersRemoval[L.stamp(d)]=d}},Qs=Kn,yo={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{this._isRelevantForRotate(d)&&d.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(d=>d instanceof L.Polyline).forEach(d=>{d.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(d){return d.pm&&d instanceof L.Polyline&&!(d instanceof L.LayerGroup)&&(!L.PM.optIn&&!d.options.pmIgnore||L.PM.optIn&&d.options.pmIgnore===!1)&&!d._pmTempLayer&&d.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let d=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let m in d){let _=d[m];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:d}){this._addedLayersRotate[L.stamp(d)]=d}},au=yo,ku=l(zr()),Il={_fireDrawStart(d="Draw",m={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},d,m)},_fireDrawEnd(d="Draw",m={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},d,m)},_fireCreate(d,m="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:d,layer:d},m,_)},_fireCenterPlaced(d="Draw",m={}){let _=d==="Draw"?this._layer:void 0,C=d!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:C,latlng:this._layer.getLatLng()},d,m)},_fireCut(d,m,_,C="Draw",M={}){this.__fire(d,"pm:cut",{shape:this._shape,layer:m,originalLayer:_},C,M)},_fireEdit(d=this._layer,m="Edit",_={}){this.__fire(d,"pm:edit",{layer:this._layer,shape:this.getShape()},m,_)},_fireEnable(d="Edit",m={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},d,m)},_fireDisable(d="Edit",m={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},d,m)},_fireUpdate(d="Edit",m={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},d,m)},_fireMarkerDragStart(d,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDrag(d,m=void 0,_="Edit",C={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m},_,C)},_fireMarkerDragEnd(d,m=void 0,_=void 0,C="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:d,shape:this.getShape(),indexPath:m,intersectionReset:_},C,M)},_fireDragStart(d="Edit",m={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},d,m)},_fireDrag(d,m="Edit",_={}){this.__fire(this._layer,"pm:drag",{...d,shape:this.getShape()},m,_)},_fireDragEnd(d="Edit",m={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},d,m)},_fireDragEnable(d="Edit",m={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},d,m)},_fireDragDisable(d="Edit",m={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},d,m)},_fireRemove(d,m=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:m,shape:this.getShape()},_,C)},_fireVertexAdded(d,m,_,C="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:d,indexPath:m,latlng:_,shape:this.getShape()},C,M)},_fireVertexRemoved(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:d,indexPath:m,shape:this.getShape()},_,C)},_fireVertexClick(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:d,indexPath:m,shape:this.getShape()},_,C)},_fireIntersect(d,m=this._layer,_="Edit",C={}){this.__fire(m,"pm:intersect",{layer:this._layer,intersection:d,shape:this.getShape()},_,C)},_fireLayerReset(d,m,_="Edit",C={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:d,indexPath:m,shape:this.getShape()},_,C)},_fireChange(d,m="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:d,shape:this.getShape()},m,_)},_fireTextChange(d,m="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:d,shape:this.getShape()},m,_)},_fireTextFocus(d="Edit",m={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},d,m)},_fireTextBlur(d="Edit",m={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},d,m)},_fireSnapDrag(d,m,_="Snapping",C={}){this.__fire(d,"pm:snapdrag",m,_,C)},_fireSnap(d,m,_="Snapping",C={}){this.__fire(d,"pm:snap",m,_,C)},_fireUnsnap(d,m,_="Snapping",C={}){this.__fire(d,"pm:unsnap",m,_,C)},_fireRotationEnable(d,m,_="Rotation",C={}){this.__fire(d,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,C)},_fireRotationDisable(d,m="Rotation",_={}){this.__fire(d,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},m,_)},_fireRotationStart(d,m,_="Rotation",C={}){this.__fire(d,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:m},_,C)},_fireRotation(d,m,_,C=this._rotationLayer,M="Rotation",W={}){this.__fire(d,"pm:rotate",{layer:C,helpLayer:this._layer,startAngle:this._startAngle,angle:C.pm.getAngle(),angleDiff:m,oldLatLngs:_,newLatLngs:C.getLatLngs()},M,W)},_fireRotationEnd(d,m,_,C="Rotation",M={}){this.__fire(d,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:m,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},C,M)},_fireActionClick(d,m,_,C="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:d.text,action:d,btnName:m,button:_},C,M)},_fireButtonClick(d,m,_="Toolbar",C={}){this.__fire(this._map,"pm:buttonclick",{btnName:d,button:m},_,C)},_fireLangChange(d,m,_,C,M="Global",W={}){this.__fire(this.map,"pm:langchange",{oldLang:d,activeLang:m,fallback:_,translations:C},M,W)},_fireGlobalDragModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalEditModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalRemovalModeToggled(d,m="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:d,map:this.map},m,_)},_fireGlobalCutModeToggled(d="Global",m={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},d,m)},_fireGlobalDrawModeToggled(d="Global",m={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},d,m)},_fireGlobalRotateModeToggled(d="Global",m={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},d,m)},_fireRemoveLayerGroup(d,m=d,_="Edit",C={}){this.__fire(d,"pm:remove",{layer:m,shape:void 0},_,C)},_fireKeyeventEvent(d,m,_,C="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:d,eventType:m,focusOn:_},C,M)},__fire(d,m,_,C,M={}){_=(0,ku.default)(_,M,{source:C}),L.PM.Utils._fireEvent(d,m,_)}},lu=Il,Au=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(d){this.map=d,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),d.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(d){let m="document";this.map.getContainer().contains(d.target)&&(m="map");let _={event:d,eventType:d.type,focusOn:m};this._lastEvents[d.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(d,d.type,m)},_onBlur(d){d.altKey=!1;let m={event:d,eventType:d.type,focusOn:"document"};this._lastEvents[d.type]=m,this._lastEvents.current=m},getLastKeyEvent(d="current"){return this._lastEvents[d]},isShiftKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.shiftKey},isAltKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.altKey},isCtrlKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.ctrlKey},isMetaKeyPressed(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.metaKey},getPressedKey(){var d;return(d=this._lastEvents.current)==null?void 0:d.event.key}}),ni=Au,fs=l(ei());function gr(d){let m=L.PM.activeLang;return(0,fs.default)(Xo[m],d)||(0,fs.default)(Xo.en,d)||d}function ps(d){for(let m=0;m<d.length;m+=1){let _=d[m];if(Array.isArray(_)){if(ps(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Bl(d){return d.reduce((m,_)=>{if(_.length!==0){let C=Array.isArray(_)?Bl(_):_;Array.isArray(C)?C.length!==0&&m.push(C):m.push(C)}return m},[])}function Ya(d,m,_){let C={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:W,f:ee}=C,oe=d.lng,be=d.lat,Ee=_,rt=Math.PI,qe=m*rt/180,wt=Math.sin(qe),It=Math.cos(qe),en=(1-ee)*Math.tan(be*rt/180),_n=1/Math.sqrt(1+en*en),Pn=en*_n,br=Math.atan2(en,It),nt=_n*wt,st=1-nt*nt,gt=st*(M*M-W*W)/(W*W),zt=1+gt/16384*(4096+gt*(-768+gt*(320-175*gt))),Et=gt/1024*(256+gt*(-128+gt*(74-47*gt))),Bt=Ee/(W*zt),_e=2*Math.PI,ke,$e,je;for(;Math.abs(Bt-_e)>1e-12;){ke=Math.cos(2*br+Bt),$e=Math.sin(Bt),je=Math.cos(Bt);let ln=Et*$e*(ke+Et/4*(je*(-1+2*ke*ke)-Et/6*ke*(-3+4*$e*$e)*(-3+4*ke*ke)));_e=Bt,Bt=Ee/(W*zt)+ln}let He=Pn*$e-_n*je*It,We=Math.atan2(Pn*je+_n*$e*It,(1-ee)*Math.sqrt(nt*nt+He*He)),ct=Math.atan2($e*wt,_n*je-Pn*$e*It),ht=ee/16*st*(4+ee*(4-3*st)),yt=ct-(1-ht)*ee*nt*(Bt+ht*$e*(ke+ht*je*(-1+2*ke*ke))),At=oe+yt*180/rt,Tt=We*180/rt;return L.latLng(At,Tt)}function Zi(d,m,_,C,M=!0){let W,ee,oe,be=[];for(let Ee=0;Ee<_;Ee+=1){if(M)W=Ee*360/_+C,ee=Ya(d,W,m),oe=L.latLng(ee.lng,ee.lat);else{let rt=d.lat+Math.cos(2*Ee*Math.PI/_)*m,qe=d.lng+Math.sin(2*Ee*Math.PI/_)*m;oe=L.latLng(rt,qe)}be.push(oe)}return be}function Tu(d,m,_){m=(m+360)%360;let C=Math.PI/180,M=180/Math.PI,{R:W}=L.CRS.Earth,ee=d.lng*C,oe=d.lat*C,be=m*C,Ee=Math.sin(oe),rt=Math.cos(oe),qe=Math.cos(_/W),wt=Math.sin(_/W),It=Math.asin(Ee*qe+rt*wt*Math.cos(be)),en=ee+Math.atan2(Math.sin(be)*wt*rt,qe-Ee*Math.sin(It));en*=M;let _n=en-360,Pn=en<-180?en+360:en;return en=en>180?_n:Pn,L.latLng([It*M,en])}function Da(d,m,_){let C=d.latLngToContainerPoint(m),M=d.latLngToContainerPoint(_),W=Math.atan2(M.y-C.y,M.x-C.x)*180/Math.PI+90;return W+=W<0?360:0,W}function uu(d,m,_,C){let M=Da(d,m,_);return Tu(m,M,C)}function cu(d,m,_="asc"){if(!m||Object.keys(m).length===0)return(be,Ee)=>be-Ee;let C=Object.keys(m),M,W=C.length-1,ee={};for(;W>=0;)M=C[W],ee[M.toLowerCase()]=m[M],W-=1;function oe(be){if(be instanceof L.Marker)return"Marker";if(be instanceof L.Circle)return"Circle";if(be instanceof L.CircleMarker)return"CircleMarker";if(be instanceof L.Rectangle)return"Rectangle";if(be instanceof L.Polygon)return"Polygon";if(be instanceof L.Polyline)return"Line"}return(be,Ee)=>{let rt,qe;if(rt=oe(be.layer).toLowerCase(),qe=oe(Ee.layer).toLowerCase(),!rt||!qe)return 0;let wt=rt in ee?ee[rt]:Number.MAX_SAFE_INTEGER,It=qe in ee?ee[qe]:Number.MAX_SAFE_INTEGER,en=0;return wt<It?en=-1:wt>It&&(en=1),_==="desc"?en*-1:en}}function oa(d,m=d.getLatLngs()){return d instanceof L.Polygon?L.polygon(m).getLatLngs():L.polyline(m).getLatLngs()}function du(d,m){var _,C,M,W;if((C=(_=m.options.crs)==null?void 0:_.projection)!=null&&C.MAX_LATITUDE){let ee=(W=(M=m.options.crs)==null?void 0:M.projection)==null?void 0:W.MAX_LATITUDE;d.lat=Math.max(Math.min(ee,d.lat),-ee)}return d}function Li(d){return d.options.renderer||d._map&&(d._map._getPaneRenderer(d.options.pane)||d._map.options.renderer||d._map._renderer)||d._renderer}var kc=L.Class.extend({includes:[_l,Pr,Qs,au,lu],initialize(d){this.map=d,this.Draw=new L.PM.Draw(d),this.Toolbar=new L.PM.Toolbar(d),this.Keyboard=ni(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(d)},setLang(d="en",m,_="en"){if(d=d.trim().toLowerCase(),!/^[a-z]{2}$/.test(d)){let M=d.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let W=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ee of W)if(Xo[ee]){d=ee;break}}}let C=L.PM.activeLang;m&&(Xo[d]=(0,Sn.default)(Xo[_],m)),L.PM.activeLang=d,this.map.pm.Toolbar.reinit(),this._fireLangChange(C,d,_,Xo[d])},addControls(d){this.Toolbar.addControls(d)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(d="Polygon",m){d==="Poly"&&(d="Polygon"),this.Draw.enable(d,m)},disableDraw(d="Polygon"){d==="Poly"&&(d="Polygon"),this.Draw.disable(d)},setPathOptions(d,m={}){let _=m.ignoreShapes||[],C=m.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(d,C)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(d){let m=(0,Sn.default)(this.globalOptions,d);m.editable&&(m.resizeableCircleMarker=m.editable,delete m.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!m.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let C=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!m.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),C=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(m)}),_&&this.map.pm.Draw.CircleMarker.enable(),C&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(m)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=m,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(d=>{d.pm.enabled()&&d.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(d){return this.Draw.Cut.enable(d)},toggleGlobalCutMode(d){return this.Draw.Cut.toggle(d)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(d=!1){let m=L.PM.Utils.findLayers(this.map);if(!d)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},getGeomanDrawLayers(d=!1){let m=L.PM.Utils.findLayers(this.map).filter(C=>C._drawnByGeoman===!0);if(!d)return m;let _=L.featureGroup();return _._pmTempLayer=!0,m.forEach(C=>{_.addLayer(C)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(d){this._touchEventCounter===0&&(L.DomEvent.on(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(d){this._touchEventCounter===1&&(L.DomEvent.off(d,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(d,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(d){Li(this.map)._onMouseMove(this._createMouseEvent("mousemove",d))},_canvasTouchClick(d){let m="";d.type==="touchstart"||d.type==="pointerdown"?m="mousedown":(d.type==="touchend"||d.type==="pointerup"||d.type==="touchcancel"||d.type==="pointercancel")&&(m="mouseup"),m&&Li(this.map)._onClick(this._createMouseEvent(m,d))},_createMouseEvent(d,m){let _,C=m.touches[0]||m.changedTouches[0];try{_=new MouseEvent(d,{bubbles:m.bubbles,cancelable:m.cancelable,view:m.view,detail:C.detail,screenX:C.screenX,screenY:C.screenY,clientX:C.clientX,clientY:C.clientY,ctrlKey:m.ctrlKey,altKey:m.altKey,shiftKey:m.shiftKey,metaKey:m.metaKey,button:m.button,relatedTarget:m.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(d,m.bubbles,m.cancelable,m.view,C.detail,C.screenX,C.screenY,C.clientX,C.clientY,m.ctrlKey,m.altKey,m.shiftKey,m.metaKey,m.button,m.relatedTarget)}return _}}),zs=kc,ma=L.Control.extend({includes:[lu],options:{position:"topleft",disableByOtherButtons:!0},initialize(d){this._button=L.Util.extend({},this.options,d)},onAdd(d){return this._map=d,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let d=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),d?d.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(d){return typeof d=="boolean"?this._button.toggleStatus=d:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(d){d&&d.preventDefault(),!this._button.disabled&&(this._button.onClick(d,{button:this,event:d}),this._clicked(d),this._button.afterClick(d,{button:this,event:d}))},_makeButton(d){let m=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${m}`,this._container);d.title&&_.setAttribute("title",d.title);let C=L.DomUtil.create("a","leaflet-buttons-control-button",_);C.setAttribute("role","button"),C.setAttribute("tabindex","0"),C.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${m}`,_),W=d.actions,ee={cancel:{text:gr("actions.cancel"),title:gr("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:gr("actions.removeLastVertex"),title:gr("actions.removeLastVertex"),onClick(){this._map.pm.Draw[d.jsClass]._removeLastVertex()}},finish:{text:gr("actions.finish"),title:gr("actions.finish"),onClick(be){this._map.pm.Draw[d.jsClass]._finishShape(be)}}};d._preparedActions=W.map(be=>{let Ee=typeof be=="string"?be:be.name,rt;if(ee[Ee])rt=ee[Ee];else if(be.text)rt=be;else return rt;let qe=L.DomUtil.create("a",`leaflet-pm-action ${m} action-${Ee}`,M);if(qe.setAttribute("role","button"),qe.setAttribute("tabindex","0"),qe.href="#",rt.title&&(qe.title=rt.title),qe.innerHTML=rt.text,L.DomEvent.disableClickPropagation(qe),L.DomEvent.on(qe,"click",L.DomEvent.stop),rt._node=qe,!d.disabled&&rt.onClick){let wt=It=>{It.preventDefault();let en="",{buttons:_n}=this._map.pm.Toolbar;for(let Pn in _n)if(_n[Pn]._button===d){en=Pn;break}this._fireActionClick(rt,en,d)};L.DomEvent.addListener(qe,"click",wt,this),L.DomEvent.addListener(qe,"click",rt.onClick,this),L.DomEvent.addListener(qe,"click",()=>this._updateActiveAction(d))}return rt}),this._updateActiveAction(d),d.toggleStatus&&L.DomUtil.addClass(_,"active");let oe=L.DomUtil.create("div","control-icon",C);return d.iconUrl&&oe.setAttribute("src",d.iconUrl),d.className&&L.DomUtil.addClass(oe,d.className),L.DomEvent.disableClickPropagation(C),L.DomEvent.on(C,"click",L.DomEvent.stop),d.disabled||(L.DomEvent.addListener(C,"click",this._onBtnClick,this),L.DomEvent.addListener(C,"click",this._triggerClick,this)),d.disabled&&(L.DomUtil.addClass(C,"pm-disabled"),C.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let d="",{buttons:m}=this._map.pm.Toolbar;for(let _ in m)if(m[_]._button===this._button){d=_;break}this._fireButtonClick(d,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let d="pm-disabled",m=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(m,d),m.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(m,d),m.setAttribute("aria-disabled","false"))},_updateActiveAction(d){var m;(m=d._preparedActions)==null||m.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),hu=ma;L.Control.PMButton=hu;var va=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(d){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(d)},reinit(){let d=this.isVisible;this.removeControls(),this._defineButtons(),d&&this.addControls()},init(d){this.map=d,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(d){let m=`${d}Container`;return this[m]||(this[m]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${d} leaflet-bar leaflet-control`)),this[m]},getButtons(){return this.buttons},addControls(d=this.options){typeof d.editPolygon<"u"&&(d.editMode=d.editPolygon),typeof d.deleteLayer<"u"&&(d.removalMode=d.deleteLayer),L.Util.setOptions(this,d),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let d=this.getButtons(),m={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in d){let C=d[_];L.Util.setOptions(C,{className:m.geomanIcons[_]})}},removeControls(){let d=this.getButtons();for(let m in d)d[m].remove();this.isVisible=!1},toggleControls(d=this.options){this.isVisible?this.removeControls():this.addControls(d)},_addButton(d,m){return this.buttons[d]=m,this.options[d]=!!this.options[d]||!1,this.buttons[d]},triggerClickOnToggledButtons(d){for(let m in this.buttons){let _=this.buttons[m];_._button.disableByOtherButtons&&_!==d&&_.toggled()&&_._triggerClick()}},toggleButton(d,m,_=!0){d==="editPolygon"&&(d="editMode"),d==="deleteLayer"&&(d="removalMode");let C=d;return _&&this.triggerClickOnToggledButtons(this.buttons[C]),this.buttons[C]?this.buttons[C].toggle(m):!1},_defineButtons(){let d={className:"control-icon leaflet-pm-icon-marker",title:gr("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},m={title:gr("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:gr("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},C={title:gr("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:gr("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},W={title:gr("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ee={title:gr("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},oe={title:gr("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},be={title:gr("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:gr("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},rt={title:gr("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},qe={className:"control-icon leaflet-pm-icon-text",title:gr("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(wt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(d)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(W)),this._addButton("drawPolygon",new L.Control.PMButton(m)),this._addButton("drawCircle",new L.Control.PMButton(C)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(qe)),this._addButton("editMode",new L.Control.PMButton(ee)),this._addButton("dragMode",new L.Control.PMButton(oe)),this._addButton("cutPolygon",new L.Control.PMButton(be)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(rt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let d=this.getButtons(),m=[];this.options.drawControls===!1&&(m=m.concat(Object.keys(d).filter(_=>!d[_]._button.tool))),this.options.editControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="options"))),this.options.customControls===!1&&(m=m.concat(Object.keys(d).filter(_=>d[_]._button.tool==="custom")));for(let _ in d)if(this.options[_]&&m.indexOf(_)===-1){let C=d[_]._button.tool;C||(C="draw"),d[_].setPosition(this._getBtnPosition(C)),d[_].addTo(this.map)}},_getBtnPosition(d){return this.options.positions&&this.options.positions[d]?this.options.positions[d]:this.options.position},setBlockPosition(d,m){this.options.positions[d]=m,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(d,m){if(m)typeof m!="object"&&(m={name:m});else throw new TypeError("Button has no name");let _=this._btnNameMapping(d);if(!m.name)throw new TypeError("Button has no name");if(this.buttons[m.name])throw new TypeError("Button with this name already exists");let C=this.map.pm.Draw.createNewDrawInstance(m.name,_);m={...this.buttons[_]._button,...m};let M=this.createCustomControl(m);return{drawInstance:C,control:M}},createCustomControl(d){if(!d.name)throw new TypeError("Button has no name");if(this.buttons[d.name])throw new TypeError("Button with this name already exists");d.onClick||(d.onClick=()=>{}),d.afterClick||(d.afterClick=()=>{}),d.toggle!==!1&&(d.toggle=!0),d.block&&(d.block=d.block.toLowerCase()),(!d.block||d.block==="draw")&&(d.block=""),d.className?d.className.indexOf("control-icon")===-1&&(d.className=`control-icon ${d.className}`):d.className="control-icon";let m={tool:d.block,className:d.className,title:d.title||"",jsClass:d.name,onClick:d.onClick,afterClick:d.afterClick,doToggle:d.toggle,toggleStatus:!1,disableOtherButtons:d.disableOtherButtons??!0,disableByOtherButtons:d.disableByOtherButtons??!0,cssToggle:d.toggle,position:this.options.position,actions:d.actions||[],disabled:!!d.disabled};this.options[d.name]!==!1&&(this.options[d.name]=!0);let _=this._addButton(d.name,new L.Control.PMButton(m));return this.changeControlOrder(),_},controlExists(d){return!!this.getButton(d)},getButton(d){return this.getButtons()[d]},getButtonsInBlock(d){let m={};if(d)for(let _ in this.getButtons()){let C=this.getButtons()[_];(C._button.tool===d||d==="draw"&&!C._button.tool)&&(m[_]=C)}return m},changeControlOrder(d=[]){let m=this._shapeMapping(),_=[];d.forEach(W=>{m[W]?_.push(m[W]):_.push(W)});let C=this.getButtons(),M={};_.forEach(W=>{C[W]&&(M[W]=C[W])}),Object.keys(C).filter(W=>!C[W]._button.tool||C[W]._button.tool==="draw").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="edit").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="options").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).filter(W=>C[W]._button.tool==="custom").forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),Object.keys(C).forEach(W=>{_.indexOf(W)===-1&&(M[W]=C[W])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let d=this.getButtons(),m=[];for(let _ in d)m.push(_);return m},changeActionsOfControl(d,m){let _=this._btnNameMapping(d);if(!_)throw new TypeError("No name passed");if(!m)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=m,this.changeControlOrder()},setButtonDisabled(d,m){let _=this._btnNameMapping(d);m?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(d){let m=this._shapeMapping();return m[d]?m[d]:d}}),Rl=va,Fl=l(zr()),Si={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(d){d.forEach(m=>{if(Array.isArray(m)){this._assignEvents(m);return}m.off("drag",this._handleSnapping,this),m.on("drag",this._handleSnapping,this),m.off("dragend",this._cleanupSnapping,this),m.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(d){if(d){let m=d.target;m._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(m=>{m.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(d){var oe,be,Ee;let m=d.target;if(m._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((oe=d==null?void 0:d.originalEvent)==null?void 0:oe.altKey)||((Ee=(be=this._map)==null?void 0:be.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(m.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let C=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;C?M=_.latlng:M=this._checkPrioritiySnapping(_);let W=this.options.snapDistance,ee={marker:m,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(ee.marker,ee),this._fireSnapDrag(this._layer,ee),_.distance<W){m._orgLatLng=m.getLatLng(),m.setLatLng(M),m._snapped=!0,m._snapInfo=ee;let rt=()=>{this._snapLatLng=M,this._fireSnap(m,ee),this._fireSnap(this._layer,ee)},qe=this._snapLatLng||{},wt=M||{};(qe.lat!==wt.lat||qe.lng!==wt.lng)&&rt()}else this._snapLatLng&&(this._unsnap(ee),m._snapped=!1,m._snapInfo=void 0,this._fireUnsnap(ee.marker,ee),this._fireUnsnap(this._layer,ee));return!0},_createSnapList(){let d=[],m=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(C=>{if((C instanceof L.Polyline||C instanceof L.Marker||C instanceof L.CircleMarker||C instanceof L.ImageOverlay)&&C.options.snapIgnore!==!0){if(C.options.snapIgnore===void 0&&(!L.PM.optIn&&C.options.pmIgnore===!0||L.PM.optIn&&C.options.pmIgnore!==!1))return;(C instanceof L.Circle||C instanceof L.CircleMarker)&&C.pm&&C.pm._hiddenPolyCircle?d.push(C.pm._hiddenPolyCircle):C instanceof L.ImageOverlay&&(C=L.rectangle(C.getBounds())),d.push(C);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,m.push(M),(C instanceof L.Circle||C instanceof L.CircleMarker)&&m.push(M)}}),d=d.filter(C=>this._layer!==C),d=d.filter(C=>C._latlng||C._latlngs&&ps(C._latlngs)),d=d.filter(C=>!C._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let C=L.polyline([],{color:"red",pmIgnore:!0});C._pmTempLayer=!0,m.push(C)}),this._snapList=d.concat(this._otherSnapLayers)):this._snapList=d,this.debugIndicatorLines=m},_handleSnapLayerRemoval({layer:d}){if(!d._leaflet_id)return;let m=this._snapList.findIndex(_=>_._leaflet_id===d._leaflet_id);m>-1&&this._snapList.splice(m,1)},_calcClosestLayer(d,m){return this._calcClosestLayers(d,m,1)[0]},_calcClosestLayers(d,m,_=1){let C=[],M={};m.forEach((ee,oe)=>{var Ee;if(ee._parentCopy&&ee._parentCopy===this._layer||((Ee=ee.getLatLngs)==null?void 0:Ee.call(ee).flat(5).length)<2)return;let be=this._calcLayerDistances(d,ee);if(be.distance=Math.floor(be.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[oe]){let rt=L.polyline([],{color:"red",pmIgnore:!0});rt._pmTempLayer=!0,this.debugIndicatorLines[oe]=rt}this.debugIndicatorLines[oe].setLatLngs([d,be.latlng])}_===1&&(M.distance===void 0||be.distance-5<=M.distance)?(be.distance+5<M.distance&&(C=[]),M=be,M.layer=ee,C.push(M)):_!==1&&(M={},M=be,M.layer=ee,C.push(M))}),_!==1&&(C=C.sort((ee,oe)=>ee.distance-oe.distance)),_===-1&&(_=C.length);let W=this._getClosestLayerByPriority(C,_);return L.Util.isArray(W)?W:[W]},_calcLayerDistances(d,m){let _=this._map,C=m instanceof L.Marker||m instanceof L.CircleMarker,M=m instanceof L.Polygon,W=d;if(C){let ee=m.getLatLng();return{latlng:{...ee},distance:this._getDistance(_,ee,W)}}return this._calcLatLngDistances(W,m.getLatLngs(),_,M)},_calcLatLngDistances(d,m,_,C=!1){let M,W,ee,oe=be=>{be.forEach((Ee,rt)=>{if(Array.isArray(Ee)){oe(Ee);return}if(this.options.snapSegment){let qe=Ee,wt;C?wt=rt+1===be.length?0:rt+1:wt=rt+1===be.length?void 0:rt+1;let It=be[wt];if(It){let en=this._getDistanceToSegment(_,d,qe,It);(W===void 0||en<W)&&(W=en,ee=[qe,It])}}else{let qe=this._getDistance(_,d,Ee);(W===void 0||qe<W)&&(W=qe,M=Ee)}})};return oe(m),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,d,ee[0],ee[1])},segment:ee,distance:W}:{latlng:M,distance:W}},_getClosestLayerByPriority(d,m=1){d=d.sort((ee,oe)=>ee._leaflet_id-oe._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],C=this._map.pm.globalOptions.snappingOrder||[],M=0,W={};return C.concat(_).forEach(ee=>{W[ee]||(M+=1,W[ee]=M)}),d.sort(cu("instanceofShape",W)),m===1?d[0]||{}:d.slice(0,m)},_checkPrioritiySnapping(d){let m=this._map,_=d.segment[0],C=d.segment[1],M=d.latlng,W=M;if(this.options.snapVertex){let ee=this._getDistance(m,_,M),oe=this._getDistance(m,C,M),be=ee<oe?_:C,Ee=ee<oe?ee:oe;if(this.options.snapMiddle){let qe=L.PM.Utils.calcMiddleLatLng(m,_,C),wt=this._getDistance(m,qe,M);wt<ee&&wt<oe&&(be=qe,Ee=wt)}let rt=this.options.snapDistance;Ee<rt&&(W=be)}return{...W}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(d,m,_,C){let M=d.getMaxZoom();M===1/0&&(M=d.getZoom());let W=d.project(m,M),ee=d.project(_,M),oe=d.project(C,M),be=L.LineUtil.closestPointOnSegment(W,ee,oe);return d.unproject(be,M)},_getDistanceToSegment(d,m,_,C){let M=d.latLngToContainerPoint(m),W=d.latLngToContainerPoint(_),ee=d.latLngToContainerPoint(C);return L.LineUtil.pointToSegmentDistance(M,W,ee)},_getDistance(d,m,_){return d.latLngToContainerPoint(m).distanceTo(d.latLngToContainerPoint(_))}},Jo=Si,Ka=L.Class.extend({includes:[Jo,lu],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(d){L.Util.setOptions(this,d),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(d){let m=new L.Icon.Default;m.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=m,this._map=d,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(d,m=!1){m?this.options.pathOptions=(0,Fl.default)(this.options.pathOptions,d):this.options.pathOptions=d},getShapes(){return this.shapes},getShape(){return this._shape},enable(d,m){if(!d)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[d].enable(m)},disable(){this.shapes.forEach(d=>{this[d].disable()})},addControls(){this.shapes.forEach(d=>{this[d].addButton()})},getActiveShape(){let d;return this.shapes.forEach(m=>{this[m]._enabled&&(d=m)}),d},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let d=[];this._map.eachLayer(m=>{(m instanceof L.Polyline||m instanceof L.Marker||m instanceof L.Circle||m instanceof L.CircleMarker||m instanceof L.ImageOverlay)&&(m._pmTempLayer||d.push(m))}),this._enabled?d.forEach(m=>{L.PM.Utils.disablePopup(m)}):d.forEach(m=>{L.PM.Utils.enablePopup(m)})},createNewDrawInstance(d,m){let _=this._getShapeFromBtnName(m);if(this[d])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[d]=new L.PM.Draw[_](this._map),this[d].toolbarButtonName=d,this[d]._shape=d,this.shapes.push(d),this[m]&&this[d].setOptions(this[m].options),this[d].setOptions(this[d].options),this[d]},_getShapeFromBtnName(d){let m={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return m[d]?m[d]:this[d]?this[d]._shape:d},_finishLayer(d){d.pm&&(d.pm.setOptions(this.options),d.pm._shape=this._shape,d.pm._map=this._map),this._addDrawnLayerProp(d)},_addDrawnLayerProp(d){d._drawnByGeoman=!0},_setPane(d,m){m==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),gs=Ka;gs.Marker=gs.extend({initialize(d){this._map=d,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(m=>{this.isRelevantMarker(m)&&m.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},isRelevantMarker(d){return d instanceof L.Marker&&d.pm&&!d._pmTempLayer&&!d.pm._initTextMarker},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let m=d;m.target=this._hintMarker,this._handleSnapping(m)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(d){if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=new L.Marker(m,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var d,m;(d=this.options.markerStyle)!=null&&d.icon&&((m=this._hintMarker)==null||m.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,xe={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function tt(d,m,_){_===void 0&&(_={});var C={type:"Feature"};return(_.id===0||_.id)&&(C.id=_.id),_.bbox&&(C.bbox=_.bbox),C.properties=m||{},C.geometry=d,C}function pt(d,m,_){if(_===void 0&&(_={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Er(d[0])||!Er(d[1]))throw new Error("coordinates must contain numbers");var C={type:"Point",coordinates:d};return tt(C,m,_)}function Mt(d,m,_){if(_===void 0&&(_={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");var C={type:"LineString",coordinates:d};return tt(C,m,_)}function Ht(d,m){m===void 0&&(m={});var _={type:"FeatureCollection"};return m.id&&(_.id=m.id),m.bbox&&(_.bbox=m.bbox),_.features=d,_}function hn(d,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return d*_}function Fn(d,m){m===void 0&&(m="kilometers");var _=xe[m];if(!_)throw new Error(m+" units is invalid");return d/_}function Wn(d){var m=d%(2*Math.PI);return m*180/Math.PI}function fr(d){var m=d%360;return m*Math.PI/180}function Er(d){return!isNaN(d)&&d!==null&&!Array.isArray(d)}function Ur(d){var m,_,C={type:"FeatureCollection",features:[]};if(d.type==="Feature"?_=d.geometry:_=d,_.type==="LineString")m=[_.coordinates];else if(_.type==="MultiLineString")m=_.coordinates;else if(_.type==="MultiPolygon")m=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")m=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return m.forEach(function(M){m.forEach(function(W){for(var ee=0;ee<M.length-1;ee++)for(var oe=ee;oe<W.length-1;oe++)if(!(M===W&&(Math.abs(ee-oe)===1||ee===0&&oe===M.length-2&&M[ee][0]===M[M.length-1][0]&&M[ee][1]===M[M.length-1][1]))){var be=qi(M[ee][0],M[ee][1],M[ee+1][0],M[ee+1][1],W[oe][0],W[oe][1],W[oe+1][0],W[oe+1][1]);be&&C.features.push(pt([be[0],be[1]]))}})}),C}function qi(d,m,_,C,M,W,ee,oe){var be,Ee,rt,qe,wt,It={x:null,y:null,onLine1:!1,onLine2:!1};return be=(oe-W)*(_-d)-(ee-M)*(C-m),be===0?It.x!==null&&It.y!==null?It:!1:(Ee=m-W,rt=d-M,qe=(ee-M)*Ee-(oe-W)*rt,wt=(_-d)*Ee-(C-m)*rt,Ee=qe/be,rt=wt/be,It.x=d+Ee*(_-d),It.y=m+Ee*(C-m),Ee>=0&&Ee<=1&&(It.onLine1=!0),rt>=0&&rt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}gs.Line=gs.extend({initialize(d){this._map=d,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintLine(){let d=this._layer.getLatLngs();if(d.length>0){let m=d[d.length-1];this._hintline.setLatLngs([m,this._hintMarker.getLatLng()])}},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let m=this._layer._defaultShape().slice();m.push(this._hintMarker.getLatLng()),this._change(m)},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(d,m){let _=L.polyline(this._layer.getLatLngs());d&&(m||(m=this._hintMarker.getLatLng()),_.addLatLng(m));let C=Ur(_.toGeoJSON(15));this._doesSelfIntersect=C.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(C,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(d){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,d.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),C=_[_.length-1];if(m.equals(_[0])||_.length>0&&m.equals(C)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:m,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(m);let M=this._createMarker(m);this._setTooltipText(),this._setHintLineAfterNewVertex(m),this._fireVertexAdded(M,void 0,m,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(d)},_setHintLineAfterNewVertex(d){this._hintline.setLatLngs([d,d])},_removeLastVertex(){let d=this._markers;if(d.length<=1){this.disable();return}let m=this._layer.getLatLngs(),_=d[d.length-1],{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(d,_);d.pop(),this._layerGroup.removeLayer(_);let M=d[d.length-1],W=m.indexOf(M.getLatLng());m=m.slice(0,W+1),this._layer.setLatLngs(m),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,C,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=1)return;let m=L.polyline(d,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(d){let m=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),m.on("click",this._finishShape,this),m},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),m="";d<=1?m=gr("tooltips.continueLine"):m=gr("tooltips.finishLine"),this._hintMarker.setTooltipContent(m)},_change(d){this._fireChange(d,"Draw")},setStyle(){var d,m;(d=this._layer)==null||d.setStyle(this.options.templineStyle),(m=this._hintline)==null||m.setStyle(this.options.hintlineStyle)}}),gs.Polygon=gs.Line.extend({initialize(d){this._map=d,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(d){L.PM.Draw.Line.prototype.enable.call(this,d),this._layer.pm._shape="Polygon"},_createMarker(d){let m=new L.Marker(d,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this._layerGroup.addLayer(m),this._markers.push(m),this._layer.getLatLngs().flat().length===1?(m.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(m)-1,this.options.snappable&&this._cleanupSnapping()):m.on("click",()=>1),m},_setTooltipText(){let{length:d}=this._layer.getLatLngs().flat(),m="";d<=2?m=gr("tooltips.continueLine"):m=gr("tooltips.finishPoly"),this._hintMarker.setTooltipContent(m)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let m=L.polygon(d,this.options.pathOptions);this._setPane(m,"layerPane"),this._finishLayer(m),m.addTo(this._map.pm._getContainingLayer()),this._fireCreate(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),gs.Rectangle=gs.extend({initialize(d){this._map=d,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(d){if(L.Util.setOptions(this,d),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let m=0;m<2;m+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeStartingMarkers(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(m),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(m)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(gr("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let d=this._startMarker.getLatLng();d&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([d,d]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}let m=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(m,"Draw")},_syncRectangleSize(){let d=du(this._startMarker.getLatLng(),this._map),m=du(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(d,m,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let C=[];_.forEach(M=>{!M.equals(d,1e-8)&&!M.equals(m,1e-8)&&C.push(M)}),C.forEach((M,W)=>{try{this._styleMarkers[W].setLatLng(M)}catch{}})}},_findCorners(){let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.options.rectangleAngle||0,this._map)},_finishShape(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(m))return;let C=L.rectangle([_,m],this.options.pathOptions);if(this.options.rectangleAngle){let W=L.PM.Utils._getRotatedRectangle(_,m,this.options.rectangleAngle||0,this._map);C.setLatLngs(W),C.pm&&C.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(C,"layerPane"),this._finishLayer(C),C.addTo(this._map.pm._getContainingLayer()),this._fireCreate(C);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var d;(d=this._layer)==null||d.setStyle(this.options.pathOptions)}}),gs.CircleMarker=gs.extend({initialize(d){this._map=d,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(d){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let m={};L.extend(m,this.options.templineStyle),m.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),m),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(d=>{this.isRelevantMarker(d)&&d.pm.disable()})},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_placeCenterMarker(d){this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let m=this._hintMarker.getLatLng();this._centerMarker.setLatLng(m),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let d=this._centerMarker.getLatLng();d&&(this._layer.setLatLng(d),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(gr("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let d=this._centerMarker.getLatLng(),m=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([d,m])},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=d;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let m=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(m,"Draw")},isRelevantMarker(d){return d instanceof L.CircleMarker&&!(d instanceof L.Circle)&&d.pm&&!d._pmTempLayer},_createMarker(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!d.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(m,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(d){d.pm&&this.options.markerEditable&&d.pm.enable()},_finishShape(d){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let ee=this._hintMarker.getLatLng();_=this._distanceCalculation(m,ee),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let C={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(m,C);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let W=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(W))},_getNewDestinationOfHintMarker(){let d=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return d;let m=this._centerMarker.getLatLng(),_=this._distanceCalculation(m,d);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?d=uu(this._map,m,d,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(d=uu(this._map,m,d,this._getMaxDistanceInMeter()))}return d},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let d=this._centerMarker.getLatLng(),m=this._hintMarker.getLatLng(),_=this._distanceCalculation(d,m);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var m,_;let d={};L.extend(d,this.options.templineStyle),this.options[this._editableOption]&&(d.radius=0),(m=this._layer)==null||m.setStyle(d),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(d,m){return this._map.project(d).distanceTo(this._map.project(m))}}),gs.Circle=gs.CircleMarker.extend({initialize(d){this._map=d,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(d,m){return this._map.distance(d,m)}});function gi(d){if(!d)throw new Error("coord is required");if(!Array.isArray(d)){if(d.type==="Feature"&&d.geometry!==null&&d.geometry.type==="Point")return d.geometry.coordinates;if(d.type==="Point")return d.coordinates}if(Array.isArray(d)&&d.length>=2&&!Array.isArray(d[0])&&!Array.isArray(d[1]))return d;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ci(d){if(Array.isArray(d))return d;if(d.type==="Feature"){if(d.geometry!==null)return d.geometry.coordinates}else if(d.coordinates)return d.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ms(d){return d.type==="Feature"?d.geometry:d}function Ls(d,m){return d.type==="FeatureCollection"?"FeatureCollection":d.type==="GeometryCollection"?"GeometryCollection":d.type==="Feature"&&d.geometry!==null?d.geometry.type:d.type}function Qo(d,m,_){if(d!==null)for(var C,M,W,ee,oe,be,Ee,rt=0,qe=0,wt,It=d.type,en=It==="FeatureCollection",_n=It==="Feature",Pn=en?d.features.length:1,br=0;br<Pn;br++){Ee=en?d.features[br].geometry:_n?d.geometry:d,wt=Ee?Ee.type==="GeometryCollection":!1,oe=wt?Ee.geometries.length:1;for(var nt=0;nt<oe;nt++){var st=0,gt=0;if(ee=wt?Ee.geometries[nt]:Ee,ee!==null){be=ee.coordinates;var zt=ee.type;switch(rt=0,zt){case null:break;case"Point":if(m(be,qe,br,st,gt)===!1)return!1;qe++,st++;break;case"LineString":case"MultiPoint":for(C=0;C<be.length;C++){if(m(be[C],qe,br,st,gt)===!1)return!1;qe++,zt==="MultiPoint"&&st++}zt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(C=0;C<be.length;C++){for(M=0;M<be[C].length-rt;M++){if(m(be[C][M],qe,br,st,gt)===!1)return!1;qe++}zt==="MultiLineString"&&st++,zt==="Polygon"&&gt++}zt==="Polygon"&&st++;break;case"MultiPolygon":for(C=0;C<be.length;C++){for(gt=0,M=0;M<be[C].length;M++){for(W=0;W<be[C][M].length-rt;W++){if(m(be[C][M][W],qe,br,st,gt)===!1)return!1;qe++}gt++}st++}break;case"GeometryCollection":for(C=0;C<ee.geometries.length;C++)if(Qo(ee.geometries[C],m)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Hr(d,m){if(d.type==="Feature")m(d,0);else if(d.type==="FeatureCollection")for(var _=0;_<d.features.length&&m(d.features[_],_)!==!1;_++);}function eo(d,m,_){var C=_;return Hr(d,function(M,W){W===0&&_===void 0?C=M:C=m(C,M,W)}),C}function jl(d,m){var _,C,M,W,ee,oe,be,Ee,rt,qe,wt=0,It=d.type==="FeatureCollection",en=d.type==="Feature",_n=It?d.features.length:1;for(_=0;_<_n;_++){for(oe=It?d.features[_].geometry:en?d.geometry:d,Ee=It?d.features[_].properties:en?d.properties:{},rt=It?d.features[_].bbox:en?d.bbox:void 0,qe=It?d.features[_].id:en?d.id:void 0,be=oe?oe.type==="GeometryCollection":!1,ee=be?oe.geometries.length:1,M=0;M<ee;M++){if(W=be?oe.geometries[M]:oe,W===null){if(m(null,wt,Ee,rt,qe)===!1)return!1;continue}switch(W.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(m(W,wt,Ee,rt,qe)===!1)return!1;break}case"GeometryCollection":{for(C=0;C<W.geometries.length;C++)if(m(W.geometries[C],wt,Ee,rt,qe)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}wt++}}function bo(d,m){jl(d,function(_,C,M,W,ee){var oe=_===null?null:_.type;switch(oe){case null:case"Point":case"LineString":case"Polygon":return m(tt(_,M,{bbox:W,id:ee}),C,0)===!1?!1:void 0}var be;switch(oe){case"MultiPoint":be="Point";break;case"MultiLineString":be="LineString";break;case"MultiPolygon":be="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var rt=_.coordinates[Ee],qe={type:be,coordinates:rt};if(m(tt(qe,M),C,Ee)===!1)return!1}})}function Du(d){if(!d)throw new Error("geojson is required");var m=[];return bo(d,function(_){Oa(_,m)}),Ht(m)}function Oa(d,m){var _=[],C=d.geometry;if(C!==null){switch(C.type){case"Polygon":_=Ci(C);break;case"LineString":_=[Ci(C)]}_.forEach(function(M){var W=Qu(M,d.properties);W.forEach(function(ee){ee.id=m.length,m.push(ee)})})}}function Qu(d,m){var _=[];return d.reduce(function(C,M){var W=Mt([C,M],m);return W.bbox=wl(C,M),_.push(W),M}),_}function wl(d,m){var _=d[0],C=d[1],M=m[0],W=m[1],ee=_<M?_:M,oe=C<W?C:W,be=_>M?_:M,Ee=C>W?C:W;return[ee,oe,be,Ee]}var xl=Du,Ss=l(mo(),1);function Na(d,m){var _={},C=[];if(d.type==="LineString"&&(d=tt(d)),m.type==="LineString"&&(m=tt(m)),d.type==="Feature"&&m.type==="Feature"&&d.geometry!==null&&m.geometry!==null&&d.geometry.type==="LineString"&&m.geometry.type==="LineString"&&d.geometry.coordinates.length===2&&m.geometry.coordinates.length===2){var M=ea(d,m);return M&&C.push(M),Ht(C)}var W=(0,Ss.default)();return W.load(xl(m)),Hr(xl(d),function(ee){Hr(W.search(ee),function(oe){var be=ea(ee,oe);if(be){var Ee=Ci(be).join(",");_[Ee]||(_[Ee]=!0,C.push(be))}})}),Ht(C)}function ea(d,m){var _=Ci(d),C=Ci(m);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(C.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],W=_[0][1],ee=_[1][0],oe=_[1][1],be=C[0][0],Ee=C[0][1],rt=C[1][0],qe=C[1][1],wt=(qe-Ee)*(ee-M)-(rt-be)*(oe-W),It=(rt-be)*(W-Ee)-(qe-Ee)*(M-be),en=(ee-M)*(W-Ee)-(oe-W)*(M-be);if(wt===0)return null;var _n=It/wt,Pn=en/wt;if(_n>=0&&_n<=1&&Pn>=0&&Pn<=1){var br=M+_n*(ee-M),nt=W+_n*(oe-W);return pt([br,nt])}return null}var Io=Na,zl=l(mo(),1);function to(d,m,_){_===void 0&&(_={});var C=gi(d),M=gi(m),W=fr(M[1]-C[1]),ee=fr(M[0]-C[0]),oe=fr(C[1]),be=fr(M[1]),Ee=Math.pow(Math.sin(W/2),2)+Math.pow(Math.sin(ee/2),2)*Math.cos(oe)*Math.cos(be);return hn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var _o=to;function wo(d){var m=d[0],_=d[1],C=d[2],M=d[3],W=_o(d.slice(0,2),[C,_]),ee=_o(d.slice(0,2),[m,M]);if(W>=ee){var oe=(_+M)/2;return[m,oe-(C-m)/2,C,oe+(C-m)/2]}else{var be=(m+C)/2;return[be-(M-_)/2,_,be+(M-_)/2,M]}}var Ac=wo;function Os(d){var m=[1/0,1/0,-1/0,-1/0];return Qo(d,function(_){m[0]>_[0]&&(m[0]=_[0]),m[1]>_[1]&&(m[1]=_[1]),m[2]<_[0]&&(m[2]=_[0]),m[3]<_[1]&&(m[3]=_[1])}),m}Os.default=Os;var Za=Os;function no(d,m){m===void 0&&(m={});var _=m.precision,C=m.coordinates,M=m.mutate;if(_=_==null||isNaN(_)?6:_,C=C==null||isNaN(C)?3:C,!d)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof C!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(d=JSON.parse(JSON.stringify(d)));var W=Math.pow(10,_);return Qo(d,function(ee){ro(ee,W,C)}),d}function ro(d,m,_){d.length>_&&d.splice(_,d.length);for(var C=0;C<d.length;C++)d[C]=Math.round(d[C]*m)/m;return d}var Xa=no;function Ja(d,m,_){if(_===void 0&&(_={}),_.final===!0)return io(d,m);var C=gi(d),M=gi(m),W=fr(C[0]),ee=fr(M[0]),oe=fr(C[1]),be=fr(M[1]),Ee=Math.sin(ee-W)*Math.cos(be),rt=Math.cos(oe)*Math.sin(be)-Math.sin(oe)*Math.cos(be)*Math.cos(ee-W);return Wn(Math.atan2(Ee,rt))}function io(d,m){var _=Ja(m,d);return _=(_+180)%360,_}function $s(d,m,_,C){C===void 0&&(C={});var M=gi(d),W=fr(M[0]),ee=fr(M[1]),oe=fr(_),be=Fn(m,C.units),Ee=Math.asin(Math.sin(ee)*Math.cos(be)+Math.cos(ee)*Math.sin(be)*Math.cos(oe)),rt=W+Math.atan2(Math.sin(oe)*Math.sin(be)*Math.cos(ee),Math.cos(be)-Math.sin(ee)*Math.sin(Ee)),qe=Wn(rt),wt=Wn(Ee);return pt([qe,wt],C.properties)}function Ia(d,m,_){_===void 0&&(_={});var C=pt([1/0,1/0],{dist:1/0}),M=0;return bo(d,function(W){for(var ee=Ci(W),oe=0;oe<ee.length-1;oe++){var be=pt(ee[oe]);be.properties.dist=_o(m,be,_);var Ee=pt(ee[oe+1]);Ee.properties.dist=_o(m,Ee,_);var rt=_o(be,Ee,_),qe=Math.max(be.properties.dist,Ee.properties.dist),wt=Ja(be,Ee),It=$s(m,qe,wt+90,_),en=$s(m,qe,wt-90,_),_n=Io(Mt([It.geometry.coordinates,en.geometry.coordinates]),Mt([be.geometry.coordinates,Ee.geometry.coordinates])),Pn=null;_n.features.length>0&&(Pn=_n.features[0],Pn.properties.dist=_o(m,Pn,_),Pn.properties.location=M+_o(be,Pn,_)),be.properties.dist<C.properties.dist&&(C=be,C.properties.index=oe,C.properties.location=M),Ee.properties.dist<C.properties.dist&&(C=Ee,C.properties.index=oe+1,C.properties.location=M+rt),Pn&&Pn.properties.dist<C.properties.dist&&(C=Pn,C.properties.index=oe),M+=rt}}),C}var ta=Ia;function so(d,m){if(!d)throw new Error("line is required");if(!m)throw new Error("splitter is required");var _=Ls(d),C=Ls(m);if(_!=="LineString")throw new Error("line must be LineString");if(C==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(C==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Xa(m,{precision:7});switch(C){case"Point":return Yt(d,M);case"MultiPoint":return Lt(d,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Lt(d,Io(d,M))}}function Lt(d,m){var _=[],C=(0,zl.default)();return bo(m,function(M){if(_.forEach(function(oe,be){oe.id=be}),!_.length)_=Yt(d,M).features,_.forEach(function(oe){oe.bbox||(oe.bbox=Ac(Za(oe)))}),C.load(Ht(_));else{var W=C.search(M);if(W.features.length){var ee=Nt(M,W);_=_.filter(function(oe){return oe.id!==ee.id}),C.remove(ee),Hr(Yt(ee,M),function(oe){_.push(oe),C.insert(oe)})}}}),Ht(_)}function Yt(d,m){var _=[],C=Ci(d)[0],M=Ci(d)[d.geometry.coordinates.length-1];if(Bn(C,gi(m))||Bn(M,gi(m)))return Ht([d]);var W=(0,zl.default)(),ee=xl(d);W.load(ee);var oe=W.search(m);if(!oe.features.length)return Ht([d]);var be=Nt(m,oe),Ee=[C],rt=eo(ee,function(qe,wt,It){var en=Ci(wt)[1],_n=gi(m);return It===be.id?(qe.push(_n),_.push(Mt(qe)),Bn(_n,en)?[_n]:[_n,en]):(qe.push(en),qe)},Ee);return rt.length>1&&_.push(Mt(rt)),Ht(_)}function Nt(d,m){if(!m.features.length)throw new Error("lines must contain features");if(m.features.length===1)return m.features[0];var _,C=1/0;return Hr(m,function(M){var W=ta(M,d),ee=W.properties.dist;ee<C&&(_=M,C=ee)}),_}function Bn(d,m){return d[0]===m[0]&&d[1]===m[1]}var nr=so;function Mr(d,m,_){if(_===void 0&&(_={}),!d)throw new Error("point is required");if(!m)throw new Error("polygon is required");var C=gi(d),M=ms(m),W=M.type,ee=m.bbox,oe=M.coordinates;if(ee&&Ei(C,ee)===!1)return!1;W==="Polygon"&&(oe=[oe]);for(var be=!1,Ee=0;Ee<oe.length&&!be;Ee++)if(Xi(C,oe[Ee][0],_.ignoreBoundary)){for(var rt=!1,qe=1;qe<oe[Ee].length&&!rt;)Xi(C,oe[Ee][qe],!_.ignoreBoundary)&&(rt=!0),qe++;rt||(be=!0)}return be}function Xi(d,m,_){var C=!1;m[0][0]===m[m.length-1][0]&&m[0][1]===m[m.length-1][1]&&(m=m.slice(0,m.length-1));for(var M=0,W=m.length-1;M<m.length;W=M++){var ee=m[M][0],oe=m[M][1],be=m[W][0],Ee=m[W][1],rt=d[1]*(ee-be)+oe*(be-d[0])+Ee*(d[0]-ee)===0&&(ee-d[0])*(be-d[0])<=0&&(oe-d[1])*(Ee-d[1])<=0;if(rt)return!_;var qe=oe>d[1]!=Ee>d[1]&&d[0]<(be-ee)*(d[1]-oe)/(Ee-oe)+ee;qe&&(C=!C)}return C}function Ei(d,m){return m[0]<=d[0]&&m[1]<=d[1]&&m[2]>=d[0]&&m[3]>=d[1]}function fu(d,m,_){_===void 0&&(_={});for(var C=gi(d),M=Ci(m),W=0;W<M.length-1;W++){var ee=!1;if(_.ignoreEndVertices&&(W===0&&(ee="start"),W===M.length-2&&(ee="end"),W===0&&W+1===M.length-1&&(ee="both")),xo(M[W],M[W+1],C,ee,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function xo(d,m,_,C,M){var W=_[0],ee=_[1],oe=d[0],be=d[1],Ee=m[0],rt=m[1],qe=_[0]-oe,wt=_[1]-be,It=Ee-oe,en=rt-be,_n=qe*en-wt*It;if(M!==null){if(Math.abs(_n)>M)return!1}else if(_n!==0)return!1;if(C){if(C==="start")return Math.abs(It)>=Math.abs(en)?It>0?oe<W&&W<=Ee:Ee<=W&&W<oe:en>0?be<ee&&ee<=rt:rt<=ee&&ee<be;if(C==="end")return Math.abs(It)>=Math.abs(en)?It>0?oe<=W&&W<Ee:Ee<W&&W<=oe:en>0?be<=ee&&ee<rt:rt<ee&&ee<=be;if(C==="both")return Math.abs(It)>=Math.abs(en)?It>0?oe<W&&W<Ee:Ee<W&&W<oe:en>0?be<ee&&ee<rt:rt<ee&&ee<be}else return Math.abs(It)>=Math.abs(en)?It>0?oe<=W&&W<=Ee:Ee<=W&&W<=oe:en>0?be<=ee&&ee<=rt:rt<=ee&&ee<=be;return!1}var Ji=fu;function Ba(d,m){var _=ms(d),C=ms(m),M=_.type,W=C.type,ee=_.coordinates,oe=C.coordinates;switch(M){case"Point":switch(W){case"Point":return Ii(ee,oe);default:throw new Error("feature2 "+W+" geometry not supported")}case"MultiPoint":switch(W){case"Point":return Qa(_,C);case"MultiPoint":return Ra(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}case"LineString":switch(W){case"Point":return Ji(C,_,{ignoreEndVertices:!0});case"LineString":return ri(_,C);case"MultiPoint":return Fa(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}case"Polygon":switch(W){case"Point":return Mr(C,_,{ignoreBoundary:!0});case"LineString":return ya(_,C);case"Polygon":return Vs(_,C);case"MultiPoint":return ja(_,C);default:throw new Error("feature2 "+W+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Qa(d,m){var _,C=!1;for(_=0;_<d.coordinates.length;_++)if(Ii(d.coordinates[_],m.coordinates)){C=!0;break}return C}function Ra(d,m){for(var _=0,C=m.coordinates;_<C.length;_++){for(var M=C[_],W=!1,ee=0,oe=d.coordinates;ee<oe.length;ee++){var be=oe[ee];if(Ii(M,be)){W=!0;break}}if(!W)return!1}return!0}function Fa(d,m){for(var _=!1,C=0,M=m.coordinates;C<M.length;C++){var W=M[C];if(Ji(W,d,{ignoreEndVertices:!0})&&(_=!0),!Ji(W,d))return!1}return!!_}function ja(d,m){for(var _=0,C=m.coordinates;_<C.length;_++){var M=C[_];if(!Mr(M,d,{ignoreBoundary:!0}))return!1}return!0}function ri(d,m){for(var _=!1,C=0,M=m.coordinates;C<M.length;C++){var W=M[C];if(Ji({type:"Point",coordinates:W},d,{ignoreEndVertices:!0})&&(_=!0),!Ji({type:"Point",coordinates:W},d,{ignoreEndVertices:!1}))return!1}return _}function ya(d,m){var _=!1,C=0,M=Za(d),W=Za(m);if(!Pi(M,W))return!1;for(C;C<m.coordinates.length-1;C++){var ee=vs(m.coordinates[C],m.coordinates[C+1]);if(Mr({type:"Point",coordinates:ee},d,{ignoreBoundary:!0})){_=!0;break}}return _}function Vs(d,m){if(d.type==="Feature"&&d.geometry===null||m.type==="Feature"&&m.geometry===null)return!1;var _=Za(d),C=Za(m);if(!Pi(_,C))return!1;for(var M=ms(m).coordinates,W=0,ee=M;W<ee.length;W++)for(var oe=ee[W],be=0,Ee=oe;be<Ee.length;be++){var rt=Ee[be];if(!Mr(rt,d))return!1}return!0}function Pi(d,m){return!(d[0]>m[0]||d[2]<m[2]||d[1]>m[1]||d[3]<m[3])}function Ii(d,m){return d[0]===m[0]&&d[1]===m[1]}function vs(d,m){return[(d[0]+m[0])/2,(d[1]+m[1])/2]}var Ui=l(ei()),na=d=>()=>d,Bo=d=>{let m=d?(_,C)=>C.minus(_).abs().isLessThanOrEqualTo(d):na(!1);return(_,C)=>m(_,C)?0:_.comparedTo(C)};function aa(d){let m=d?(_,C,M,W,ee)=>_.exponentiatedBy(2).isLessThanOrEqualTo(W.minus(C).exponentiatedBy(2).plus(ee.minus(M).exponentiatedBy(2)).times(d)):na(!1);return(_,C,M)=>{let W=_.x,ee=_.y,oe=M.x,be=M.y,Ee=ee.minus(be).times(C.x.minus(oe)).minus(W.minus(oe).times(C.y.minus(be)));return m(Ee,W,ee,oe,be)?0:Ee.comparedTo(0)}}var ec=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,za=Math.ceil,Cs=Math.floor,$i="[BigNumber Error] ",oo=$i+"Number primitive has more than 15 significant digits: ",Ro=1e14,wr=14,el=9007199254740991,tl=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ba=1e7,Lo=1e9;function sd(d){var m,_,C,M=nt.prototype={constructor:nt,toString:null,valueOf:null},W=new nt(1),ee=20,oe=4,be=-7,Ee=21,rt=-1e7,qe=1e7,wt=!1,It=1,en=0,_n={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Pn="0123456789abcdefghijklmnopqrstuvwxyz",br=!0;function nt(_e,ke){var $e,je,He,We,ct,ht,yt,At,Tt=this;if(!(Tt instanceof nt))return new nt(_e,ke);if(ke==null){if(_e&&_e._isBigNumber===!0){Tt.s=_e.s,!_e.c||_e.e>qe?Tt.c=Tt.e=null:_e.e<rt?Tt.c=[Tt.e=0]:(Tt.e=_e.e,Tt.c=_e.c.slice());return}if((ht=typeof _e=="number")&&_e*0==0){if(Tt.s=1/_e<0?(_e=-_e,-1):1,_e===~~_e){for(We=0,ct=_e;ct>=10;ct/=10,We++);We>qe?Tt.c=Tt.e=null:(Tt.e=We,Tt.c=[_e]);return}At=String(_e)}else{if(!ec.test(At=String(_e)))return C(Tt,At,ht);Tt.s=At.charCodeAt(0)==45?(At=At.slice(1),-1):1}(We=At.indexOf("."))>-1&&(At=At.replace(".","")),(ct=At.search(/e/i))>0?(We<0&&(We=ct),We+=+At.slice(ct+1),At=At.substring(0,ct)):We<0&&(We=At.length)}else{if(u(ke,2,Pn.length,"Base"),ke==10&&br)return Tt=new nt(_e),Et(Tt,ee+Tt.e+1,oe);if(At=String(_e),ht=typeof _e=="number"){if(_e*0!=0)return C(Tt,At,ht,ke);if(Tt.s=1/_e<0?(At=At.slice(1),-1):1,nt.DEBUG&&At.replace(/^0\.0*|\./,"").length>15)throw Error(oo+_e)}else Tt.s=At.charCodeAt(0)===45?(At=At.slice(1),-1):1;for($e=Pn.slice(0,ke),We=ct=0,yt=At.length;ct<yt;ct++)if($e.indexOf(je=At.charAt(ct))<0){if(je=="."){if(ct>We){We=yt;continue}}else if(!He&&(At==At.toUpperCase()&&(At=At.toLowerCase())||At==At.toLowerCase()&&(At=At.toUpperCase()))){He=!0,ct=-1,We=0;continue}return C(Tt,String(_e),ht,ke)}ht=!1,At=_(At,ke,10,Tt.s),(We=At.indexOf("."))>-1?At=At.replace(".",""):We=At.length}for(ct=0;At.charCodeAt(ct)===48;ct++);for(yt=At.length;At.charCodeAt(--yt)===48;);if(At=At.slice(ct,++yt)){if(yt-=ct,ht&&nt.DEBUG&&yt>15&&(_e>el||_e!==Cs(_e)))throw Error(oo+Tt.s*_e);if((We=We-ct-1)>qe)Tt.c=Tt.e=null;else if(We<rt)Tt.c=[Tt.e=0];else{if(Tt.e=We,Tt.c=[],ct=(We+1)%wr,We<0&&(ct+=wr),ct<yt){for(ct&&Tt.c.push(+At.slice(0,ct)),yt-=wr;ct<yt;)Tt.c.push(+At.slice(ct,ct+=wr));ct=wr-(At=At.slice(ct)).length}else ct-=yt;for(;ct--;At+="0");Tt.c.push(+At)}}else Tt.c=[Tt.e=0]}nt.clone=sd,nt.ROUND_UP=0,nt.ROUND_DOWN=1,nt.ROUND_CEIL=2,nt.ROUND_FLOOR=3,nt.ROUND_HALF_UP=4,nt.ROUND_HALF_DOWN=5,nt.ROUND_HALF_EVEN=6,nt.ROUND_HALF_CEIL=7,nt.ROUND_HALF_FLOOR=8,nt.EUCLID=9,nt.config=nt.set=function(_e){var ke,$e;if(_e!=null)if(typeof _e=="object"){if(_e.hasOwnProperty(ke="DECIMAL_PLACES")&&($e=_e[ke],u($e,0,Lo,ke),ee=$e),_e.hasOwnProperty(ke="ROUNDING_MODE")&&($e=_e[ke],u($e,0,8,ke),oe=$e),_e.hasOwnProperty(ke="EXPONENTIAL_AT")&&($e=_e[ke],$e&&$e.pop?(u($e[0],-1e9,0,ke),u($e[1],0,Lo,ke),be=$e[0],Ee=$e[1]):(u($e,-1e9,Lo,ke),be=-(Ee=$e<0?-$e:$e))),_e.hasOwnProperty(ke="RANGE"))if($e=_e[ke],$e&&$e.pop)u($e[0],-1e9,-1,ke),u($e[1],1,Lo,ke),rt=$e[0],qe=$e[1];else if(u($e,-1e9,Lo,ke),$e)rt=-(qe=$e<0?-$e:$e);else throw Error($i+ke+" cannot be zero: "+$e);if(_e.hasOwnProperty(ke="CRYPTO"))if($e=_e[ke],$e===!!$e)if($e)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))wt=$e;else throw wt=!$e,Error($i+"crypto unavailable");else wt=$e;else throw Error($i+ke+" not true or false: "+$e);if(_e.hasOwnProperty(ke="MODULO_MODE")&&($e=_e[ke],u($e,0,9,ke),It=$e),_e.hasOwnProperty(ke="POW_PRECISION")&&($e=_e[ke],u($e,0,Lo,ke),en=$e),_e.hasOwnProperty(ke="FORMAT"))if($e=_e[ke],typeof $e=="object")_n=$e;else throw Error($i+ke+" not an object: "+$e);if(_e.hasOwnProperty(ke="ALPHABET"))if($e=_e[ke],typeof $e=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test($e))br=$e.slice(0,10)=="0123456789",Pn=$e;else throw Error($i+ke+" invalid: "+$e)}else throw Error($i+"Object expected: "+_e);return{DECIMAL_PLACES:ee,ROUNDING_MODE:oe,EXPONENTIAL_AT:[be,Ee],RANGE:[rt,qe],CRYPTO:wt,MODULO_MODE:It,POW_PRECISION:en,FORMAT:_n,ALPHABET:Pn}},nt.isBigNumber=function(_e){if(!_e||_e._isBigNumber!==!0)return!1;if(!nt.DEBUG)return!0;var ke,$e,je=_e.c,He=_e.e,We=_e.s;e:if({}.toString.call(je)=="[object Array]"){if((We===1||We===-1)&&He>=-1e9&&He<=Lo&&He===Cs(He)){if(je[0]===0){if(He===0&&je.length===1)return!0;break e}if(ke=(He+1)%wr,ke<1&&(ke+=wr),String(je[0]).length==ke){for(ke=0;ke<je.length;ke++)if($e=je[ke],$e<0||$e>=Ro||$e!==Cs($e))break e;if($e!==0)return!0}}}else if(je===null&&He===null&&(We===null||We===1||We===-1))return!0;throw Error($i+"Invalid BigNumber: "+_e)},nt.maximum=nt.max=function(){return gt(arguments,-1)},nt.minimum=nt.min=function(){return gt(arguments,1)},nt.random=function(){var _e=9007199254740992,ke=Math.random()*_e&2097151?function(){return Cs(Math.random()*_e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function($e){var je,He,We,ct,ht,yt=0,At=[],Tt=new nt(W);if($e==null?$e=ee:u($e,0,Lo),ct=za($e/wr),wt)if(crypto.getRandomValues){for(je=crypto.getRandomValues(new Uint32Array(ct*=2));yt<ct;)ht=je[yt]*131072+(je[yt+1]>>>11),ht>=9e15?(He=crypto.getRandomValues(new Uint32Array(2)),je[yt]=He[0],je[yt+1]=He[1]):(At.push(ht%1e14),yt+=2);yt=ct/2}else if(crypto.randomBytes){for(je=crypto.randomBytes(ct*=7);yt<ct;)ht=(je[yt]&31)*281474976710656+je[yt+1]*1099511627776+je[yt+2]*4294967296+je[yt+3]*16777216+(je[yt+4]<<16)+(je[yt+5]<<8)+je[yt+6],ht>=9e15?crypto.randomBytes(7).copy(je,yt):(At.push(ht%1e14),yt+=7);yt=ct/7}else throw wt=!1,Error($i+"crypto unavailable");if(!wt)for(;yt<ct;)ht=ke(),ht<9e15&&(At[yt++]=ht%1e14);for(ct=At[--yt],$e%=wr,ct&&$e&&(ht=tl[wr-$e],At[yt]=Cs(ct/ht)*ht);At[yt]===0;At.pop(),yt--);if(yt<0)At=[We=0];else{for(We=-1;At[0]===0;At.splice(0,1),We-=wr);for(yt=1,ht=At[0];ht>=10;ht/=10,yt++);yt<wr&&(We-=wr-yt)}return Tt.e=We,Tt.c=At,Tt}}(),nt.sum=function(){for(var _e=1,ke=arguments,$e=new nt(ke[0]);_e<ke.length;)$e=$e.plus(ke[_e++]);return $e},_=function(){var _e="0123456789";function ke($e,je,He,We){for(var ct,ht=[0],yt,At=0,Tt=$e.length;At<Tt;){for(yt=ht.length;yt--;ht[yt]*=je);for(ht[0]+=We.indexOf($e.charAt(At++)),ct=0;ct<ht.length;ct++)ht[ct]>He-1&&(ht[ct+1]==null&&(ht[ct+1]=0),ht[ct+1]+=ht[ct]/He|0,ht[ct]%=He)}return ht.reverse()}return function($e,je,He,We,ct){var ht,yt,At,Tt,ln,Gn,Zn,ar,wi=$e.indexOf("."),Bi=ee,ii=oe;for(wi>=0&&(Tt=en,en=0,$e=$e.replace(".",""),ar=new nt(je),Gn=ar.pow($e.length-wi),en=Tt,ar.c=ke(G(Hs(Gn.c),Gn.e,"0"),10,He,_e),ar.e=ar.c.length),Zn=ke($e,je,He,ct?(ht=Pn,_e):(ht=_e,Pn)),At=Tt=Zn.length;Zn[--Tt]==0;Zn.pop());if(!Zn[0])return ht.charAt(0);if(wi<0?--At:(Gn.c=Zn,Gn.e=At,Gn.s=We,Gn=m(Gn,ar,Bi,ii,He),Zn=Gn.c,ln=Gn.r,At=Gn.e),yt=At+Bi+1,wi=Zn[yt],Tt=He/2,ln=ln||yt<0||Zn[yt+1]!=null,ln=ii<4?(wi!=null||ln)&&(ii==0||ii==(Gn.s<0?3:2)):wi>Tt||wi==Tt&&(ii==4||ln||ii==6&&Zn[yt-1]&1||ii==(Gn.s<0?8:7)),yt<1||!Zn[0])$e=ln?G(ht.charAt(1),-Bi,ht.charAt(0)):ht.charAt(0);else{if(Zn.length=yt,ln)for(--He;++Zn[--yt]>He;)Zn[yt]=0,yt||(++At,Zn=[1].concat(Zn));for(Tt=Zn.length;!Zn[--Tt];);for(wi=0,$e="";wi<=Tt;$e+=ht.charAt(Zn[wi++]));$e=G($e,At,ht.charAt(0))}return $e}}(),m=function(){function _e(je,He,We){var ct,ht,yt,At,Tt=0,ln=je.length,Gn=He%ba,Zn=He/ba|0;for(je=je.slice();ln--;)yt=je[ln]%ba,At=je[ln]/ba|0,ct=Zn*yt+At*Gn,ht=Gn*yt+ct%ba*ba+Tt,Tt=(ht/We|0)+(ct/ba|0)+Zn*At,je[ln]=ht%We;return Tt&&(je=[Tt].concat(je)),je}function ke(je,He,We,ct){var ht,yt;if(We!=ct)yt=We>ct?1:-1;else for(ht=yt=0;ht<We;ht++)if(je[ht]!=He[ht]){yt=je[ht]>He[ht]?1:-1;break}return yt}function $e(je,He,We,ct){for(var ht=0;We--;)je[We]-=ht,ht=je[We]<He[We]?1:0,je[We]=ht*ct+je[We]-He[We];for(;!je[0]&&je.length>1;je.splice(0,1));}return function(je,He,We,ct,ht){var yt,At,Tt,ln,Gn,Zn,ar,wi,Bi,ii,Hi,zo,nc,Va,Oh,Sl,Dc,Ua=je.s==He.s?1:-1,lo=je.c,ys=He.c;if(!lo||!lo[0]||!ys||!ys[0])return new nt(!je.s||!He.s||(lo?ys&&lo[0]==ys[0]:!ys)?NaN:lo&&lo[0]==0||!ys?Ua*0:Ua/0);for(wi=new nt(Ua),Bi=wi.c=[],At=je.e-He.e,Ua=We+At+1,ht||(ht=Ro,At=Us(je.e/wr)-Us(He.e/wr),Ua=Ua/wr|0),Tt=0;ys[Tt]==(lo[Tt]||0);Tt++);if(ys[Tt]>(lo[Tt]||0)&&At--,Ua<0)Bi.push(1),ln=!0;else{for(Va=lo.length,Sl=ys.length,Tt=0,Ua+=2,Gn=Cs(ht/(ys[0]+1)),Gn>1&&(ys=_e(ys,Gn,ht),lo=_e(lo,Gn,ht),Sl=ys.length,Va=lo.length),nc=Sl,ii=lo.slice(0,Sl),Hi=ii.length;Hi<Sl;ii[Hi++]=0);Dc=ys.slice(),Dc=[0].concat(Dc),Oh=ys[0],ys[1]>=ht/2&&Oh++;do{if(Gn=0,yt=ke(ys,ii,Sl,Hi),yt<0){if(zo=ii[0],Sl!=Hi&&(zo=zo*ht+(ii[1]||0)),Gn=Cs(zo/Oh),Gn>1)for(Gn>=ht&&(Gn=ht-1),Zn=_e(ys,Gn,ht),ar=Zn.length,Hi=ii.length;ke(Zn,ii,ar,Hi)==1;)Gn--,$e(Zn,Sl<ar?Dc:ys,ar,ht),ar=Zn.length,yt=1;else Gn==0&&(yt=Gn=1),Zn=ys.slice(),ar=Zn.length;if(ar<Hi&&(Zn=[0].concat(Zn)),$e(ii,Zn,Hi,ht),Hi=ii.length,yt==-1)for(;ke(ys,ii,Sl,Hi)<1;)Gn++,$e(ii,Sl<Hi?Dc:ys,Hi,ht),Hi=ii.length}else yt===0&&(Gn++,ii=[0]);Bi[Tt++]=Gn,ii[0]?ii[Hi++]=lo[nc]||0:(ii=[lo[nc]],Hi=1)}while((nc++<Va||ii[0]!=null)&&Ua--);ln=ii[0]!=null,Bi[0]||Bi.splice(0,1)}if(ht==Ro){for(Tt=1,Ua=Bi[0];Ua>=10;Ua/=10,Tt++);Et(wi,We+(wi.e=Tt+At*wr-1)+1,ct,ln)}else wi.e=At,wi.r=+ln;return wi}}();function st(_e,ke,$e,je){var He,We,ct,ht,yt;if($e==null?$e=oe:u($e,0,8),!_e.c)return _e.toString();if(He=_e.c[0],ct=_e.e,ke==null)yt=Hs(_e.c),yt=je==1||je==2&&(ct<=be||ct>=Ee)?P(yt,ct):G(yt,ct,"0");else if(_e=Et(new nt(_e),ke,$e),We=_e.e,yt=Hs(_e.c),ht=yt.length,je==1||je==2&&(ke<=We||We<=be)){for(;ht<ke;yt+="0",ht++);yt=P(yt,We)}else if(ke-=ct,yt=G(yt,We,"0"),We+1>ht){if(--ke>0)for(yt+=".";ke--;yt+="0");}else if(ke+=We-ht,ke>0)for(We+1==ht&&(yt+=".");ke--;yt+="0");return _e.s<0&&He?"-"+yt:yt}function gt(_e,ke){for(var $e,je,He=1,We=new nt(_e[0]);He<_e.length;He++)je=new nt(_e[He]),(!je.s||($e=_a(We,je))===ke||$e===0&&We.s===ke)&&(We=je);return We}function zt(_e,ke,$e){for(var je=1,He=ke.length;!ke[--He];ke.pop());for(He=ke[0];He>=10;He/=10,je++);return($e=je+$e*wr-1)>qe?_e.c=_e.e=null:$e<rt?_e.c=[_e.e=0]:(_e.e=$e,_e.c=ke),_e}C=function(){var _e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,$e=/^\.([^.]+)$/,je=/^-?(Infinity|NaN)$/,He=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(We,ct,ht,yt){var At,Tt=ht?ct:ct.replace(He,"");if(je.test(Tt))We.s=isNaN(Tt)?null:Tt<0?-1:1;else{if(!ht&&(Tt=Tt.replace(_e,function(ln,Gn,Zn){return At=(Zn=Zn.toLowerCase())=="x"?16:Zn=="b"?2:8,!yt||yt==At?Gn:ln}),yt&&(At=yt,Tt=Tt.replace(ke,"$1").replace($e,"0.$1")),ct!=Tt))return new nt(Tt,At);if(nt.DEBUG)throw Error($i+"Not a"+(yt?" base "+yt:"")+" number: "+ct);We.s=null}We.c=We.e=null}}();function Et(_e,ke,$e,je){var He,We,ct,ht,yt,At,Tt,ln=_e.c,Gn=tl;if(ln){e:{for(He=1,ht=ln[0];ht>=10;ht/=10,He++);if(We=ke-He,We<0)We+=wr,ct=ke,yt=ln[At=0],Tt=Cs(yt/Gn[He-ct-1]%10);else if(At=za((We+1)/wr),At>=ln.length)if(je){for(;ln.length<=At;ln.push(0));yt=Tt=0,He=1,We%=wr,ct=We-wr+1}else break e;else{for(yt=ht=ln[At],He=1;ht>=10;ht/=10,He++);We%=wr,ct=We-wr+He,Tt=ct<0?0:Cs(yt/Gn[He-ct-1]%10)}if(je=je||ke<0||ln[At+1]!=null||(ct<0?yt:yt%Gn[He-ct-1]),je=$e<4?(Tt||je)&&($e==0||$e==(_e.s<0?3:2)):Tt>5||Tt==5&&($e==4||je||$e==6&&(We>0?ct>0?yt/Gn[He-ct]:0:ln[At-1])%10&1||$e==(_e.s<0?8:7)),ke<1||!ln[0])return ln.length=0,je?(ke-=_e.e+1,ln[0]=Gn[(wr-ke%wr)%wr],_e.e=-ke||0):ln[0]=_e.e=0,_e;if(We==0?(ln.length=At,ht=1,At--):(ln.length=At+1,ht=Gn[wr-We],ln[At]=ct>0?Cs(yt/Gn[He-ct]%Gn[ct])*ht:0),je)for(;;)if(At==0){for(We=1,ct=ln[0];ct>=10;ct/=10,We++);for(ct=ln[0]+=ht,ht=1;ct>=10;ct/=10,ht++);We!=ht&&(_e.e++,ln[0]==Ro&&(ln[0]=1));break}else{if(ln[At]+=ht,ln[At]!=Ro)break;ln[At--]=0,ht=1}for(We=ln.length;ln[--We]===0;ln.pop());}_e.e>qe?_e.c=_e.e=null:_e.e<rt&&(_e.c=[_e.e=0])}return _e}function Bt(_e){var ke,$e=_e.e;return $e===null?_e.toString():(ke=Hs(_e.c),ke=$e<=be||$e>=Ee?P(ke,$e):G(ke,$e,"0"),_e.s<0?"-"+ke:ke)}return M.absoluteValue=M.abs=function(){var _e=new nt(this);return _e.s<0&&(_e.s=1),_e},M.comparedTo=function(_e,ke){return _a(this,new nt(_e,ke))},M.decimalPlaces=M.dp=function(_e,ke){var $e,je,He,We=this;if(_e!=null)return u(_e,0,Lo),ke==null?ke=oe:u(ke,0,8),Et(new nt(We),_e+We.e+1,ke);if(!($e=We.c))return null;if(je=((He=$e.length-1)-Us(this.e/wr))*wr,He=$e[He])for(;He%10==0;He/=10,je--);return je<0&&(je=0),je},M.dividedBy=M.div=function(_e,ke){return m(this,new nt(_e,ke),ee,oe)},M.dividedToIntegerBy=M.idiv=function(_e,ke){return m(this,new nt(_e,ke),0,1)},M.exponentiatedBy=M.pow=function(_e,ke){var $e,je,He,We,ct,ht,yt,At,Tt,ln=this;if(_e=new nt(_e),_e.c&&!_e.isInteger())throw Error($i+"Exponent not an integer: "+Bt(_e));if(ke!=null&&(ke=new nt(ke)),ht=_e.e>14,!ln.c||!ln.c[0]||ln.c[0]==1&&!ln.e&&ln.c.length==1||!_e.c||!_e.c[0])return Tt=new nt(Math.pow(+Bt(ln),ht?_e.s*(2-y(_e)):+Bt(_e))),ke?Tt.mod(ke):Tt;if(yt=_e.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new nt(NaN);je=!yt&&ln.isInteger()&&ke.isInteger(),je&&(ln=ln.mod(ke))}else{if(_e.e>9&&(ln.e>0||ln.e<-1||(ln.e==0?ln.c[0]>1||ht&&ln.c[1]>=24e7:ln.c[0]<8e13||ht&&ln.c[0]<=9999975e7)))return We=ln.s<0&&y(_e)?-0:0,ln.e>-1&&(We=1/We),new nt(yt?1/We:We);en&&(We=za(en/wr+2))}for(ht?($e=new nt(.5),yt&&(_e.s=1),At=y(_e)):(He=Math.abs(+Bt(_e)),At=He%2),Tt=new nt(W);;){if(At){if(Tt=Tt.times(ln),!Tt.c)break;We?Tt.c.length>We&&(Tt.c.length=We):je&&(Tt=Tt.mod(ke))}if(He){if(He=Cs(He/2),He===0)break;At=He%2}else if(_e=_e.times($e),Et(_e,_e.e+1,1),_e.e>14)At=y(_e);else{if(He=+Bt(_e),He===0)break;At=He%2}ln=ln.times(ln),We?ln.c&&ln.c.length>We&&(ln.c.length=We):je&&(ln=ln.mod(ke))}return je?Tt:(yt&&(Tt=W.div(Tt)),ke?Tt.mod(ke):We?Et(Tt,en,oe,ct):Tt)},M.integerValue=function(_e){var ke=new nt(this);return _e==null?_e=oe:u(_e,0,8),Et(ke,ke.e+1,_e)},M.isEqualTo=M.eq=function(_e,ke){return _a(this,new nt(_e,ke))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(_e,ke){return _a(this,new nt(_e,ke))>0},M.isGreaterThanOrEqualTo=M.gte=function(_e,ke){return(ke=_a(this,new nt(_e,ke)))===1||ke===0},M.isInteger=function(){return!!this.c&&Us(this.e/wr)>this.c.length-2},M.isLessThan=M.lt=function(_e,ke){return _a(this,new nt(_e,ke))<0},M.isLessThanOrEqualTo=M.lte=function(_e,ke){return(ke=_a(this,new nt(_e,ke)))===-1||ke===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(_e,ke){var $e,je,He,We,ct=this,ht=ct.s;if(_e=new nt(_e,ke),ke=_e.s,!ht||!ke)return new nt(NaN);if(ht!=ke)return _e.s=-ke,ct.plus(_e);var yt=ct.e/wr,At=_e.e/wr,Tt=ct.c,ln=_e.c;if(!yt||!At){if(!Tt||!ln)return Tt?(_e.s=-ke,_e):new nt(ln?ct:NaN);if(!Tt[0]||!ln[0])return ln[0]?(_e.s=-ke,_e):new nt(Tt[0]?ct:oe==3?-0:0)}if(yt=Us(yt),At=Us(At),Tt=Tt.slice(),ht=yt-At){for((We=ht<0)?(ht=-ht,He=Tt):(At=yt,He=ln),He.reverse(),ke=ht;ke--;He.push(0));He.reverse()}else for(je=(We=(ht=Tt.length)<(ke=ln.length))?ht:ke,ht=ke=0;ke<je;ke++)if(Tt[ke]!=ln[ke]){We=Tt[ke]<ln[ke];break}if(We&&(He=Tt,Tt=ln,ln=He,_e.s=-_e.s),ke=(je=ln.length)-($e=Tt.length),ke>0)for(;ke--;Tt[$e++]=0);for(ke=Ro-1;je>ht;){if(Tt[--je]<ln[je]){for($e=je;$e&&!Tt[--$e];Tt[$e]=ke);--Tt[$e],Tt[je]+=Ro}Tt[je]-=ln[je]}for(;Tt[0]==0;Tt.splice(0,1),--At);return Tt[0]?zt(_e,Tt,At):(_e.s=oe==3?-1:1,_e.c=[_e.e=0],_e)},M.modulo=M.mod=function(_e,ke){var $e,je,He=this;return _e=new nt(_e,ke),!He.c||!_e.s||_e.c&&!_e.c[0]?new nt(NaN):!_e.c||He.c&&!He.c[0]?new nt(He):(It==9?(je=_e.s,_e.s=1,$e=m(He,_e,0,3),_e.s=je,$e.s*=je):$e=m(He,_e,0,It),_e=He.minus($e.times(_e)),!_e.c[0]&&It==1&&(_e.s=He.s),_e)},M.multipliedBy=M.times=function(_e,ke){var $e,je,He,We,ct,ht,yt,At,Tt,ln,Gn,Zn,ar,wi,Bi,ii=this,Hi=ii.c,zo=(_e=new nt(_e,ke)).c;if(!Hi||!zo||!Hi[0]||!zo[0])return!ii.s||!_e.s||Hi&&!Hi[0]&&!zo||zo&&!zo[0]&&!Hi?_e.c=_e.e=_e.s=null:(_e.s*=ii.s,!Hi||!zo?_e.c=_e.e=null:(_e.c=[0],_e.e=0)),_e;for(je=Us(ii.e/wr)+Us(_e.e/wr),_e.s*=ii.s,yt=Hi.length,ln=zo.length,yt<ln&&(ar=Hi,Hi=zo,zo=ar,He=yt,yt=ln,ln=He),He=yt+ln,ar=[];He--;ar.push(0));for(wi=Ro,Bi=ba,He=ln;--He>=0;){for($e=0,Gn=zo[He]%Bi,Zn=zo[He]/Bi|0,ct=yt,We=He+ct;We>He;)At=Hi[--ct]%Bi,Tt=Hi[ct]/Bi|0,ht=Zn*At+Tt*Gn,At=Gn*At+ht%Bi*Bi+ar[We]+$e,$e=(At/wi|0)+(ht/Bi|0)+Zn*Tt,ar[We--]=At%wi;ar[We]=$e}return $e?++je:ar.splice(0,1),zt(_e,ar,je)},M.negated=function(){var _e=new nt(this);return _e.s=-_e.s||null,_e},M.plus=function(_e,ke){var $e,je=this,He=je.s;if(_e=new nt(_e,ke),ke=_e.s,!He||!ke)return new nt(NaN);if(He!=ke)return _e.s=-ke,je.minus(_e);var We=je.e/wr,ct=_e.e/wr,ht=je.c,yt=_e.c;if(!We||!ct){if(!ht||!yt)return new nt(He/0);if(!ht[0]||!yt[0])return yt[0]?_e:new nt(ht[0]?je:He*0)}if(We=Us(We),ct=Us(ct),ht=ht.slice(),He=We-ct){for(He>0?(ct=We,$e=yt):(He=-He,$e=ht),$e.reverse();He--;$e.push(0));$e.reverse()}for(He=ht.length,ke=yt.length,He-ke<0&&($e=yt,yt=ht,ht=$e,ke=He),He=0;ke;)He=(ht[--ke]=ht[ke]+yt[ke]+He)/Ro|0,ht[ke]=Ro===ht[ke]?0:ht[ke]%Ro;return He&&(ht=[He].concat(ht),++ct),zt(_e,ht,ct)},M.precision=M.sd=function(_e,ke){var $e,je,He,We=this;if(_e!=null&&_e!==!!_e)return u(_e,1,Lo),ke==null?ke=oe:u(ke,0,8),Et(new nt(We),_e,ke);if(!($e=We.c))return null;if(He=$e.length-1,je=He*wr+1,He=$e[He]){for(;He%10==0;He/=10,je--);for(He=$e[0];He>=10;He/=10,je++);}return _e&&We.e+1>je&&(je=We.e+1),je},M.shiftedBy=function(_e){return u(_e,-9007199254740991,el),this.times("1e"+_e)},M.squareRoot=M.sqrt=function(){var _e,ke,$e,je,He,We=this,ct=We.c,ht=We.s,yt=We.e,At=ee+4,Tt=new nt("0.5");if(ht!==1||!ct||!ct[0])return new nt(!ht||ht<0&&(!ct||ct[0])?NaN:ct?We:1/0);if(ht=Math.sqrt(+Bt(We)),ht==0||ht==1/0?(ke=Hs(ct),(ke.length+yt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),yt=Us((yt+1)/2)-(yt<0||yt%2),ht==1/0?ke="5e"+yt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+yt),$e=new nt(ke)):$e=new nt(ht+""),$e.c[0]){for(yt=$e.e,ht=yt+At,ht<3&&(ht=0);;)if(He=$e,$e=Tt.times(He.plus(m(We,He,At,1))),Hs(He.c).slice(0,ht)===(ke=Hs($e.c)).slice(0,ht))if($e.e<yt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!je&&ke=="4999"){if(!je&&(Et(He,He.e+ee+2,0),He.times(He).eq(We))){$e=He;break}At+=4,ht+=4,je=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(Et($e,$e.e+ee+2,1),_e=!$e.times($e).eq(We));break}}return Et($e,$e.e+ee+1,oe,_e)},M.toExponential=function(_e,ke){return _e!=null&&(u(_e,0,Lo),_e++),st(this,_e,ke,1)},M.toFixed=function(_e,ke){return _e!=null&&(u(_e,0,Lo),_e=_e+this.e+1),st(this,_e,ke)},M.toFormat=function(_e,ke,$e){var je,He=this;if($e==null)_e!=null&&ke&&typeof ke=="object"?($e=ke,ke=null):_e&&typeof _e=="object"?($e=_e,_e=ke=null):$e=_n;else if(typeof $e!="object")throw Error($i+"Argument not an object: "+$e);if(je=He.toFixed(_e,ke),He.c){var We,ct=je.split("."),ht=+$e.groupSize,yt=+$e.secondaryGroupSize,At=$e.groupSeparator||"",Tt=ct[0],ln=ct[1],Gn=He.s<0,Zn=Gn?Tt.slice(1):Tt,ar=Zn.length;if(yt&&(We=ht,ht=yt,yt=We,ar-=We),ht>0&&ar>0){for(We=ar%ht||ht,Tt=Zn.substr(0,We);We<ar;We+=ht)Tt+=At+Zn.substr(We,ht);yt>0&&(Tt+=At+Zn.slice(We)),Gn&&(Tt="-"+Tt)}je=ln?Tt+($e.decimalSeparator||"")+((yt=+$e.fractionGroupSize)?ln.replace(new RegExp("\\d{"+yt+"}\\B","g"),"$&"+($e.fractionGroupSeparator||"")):ln):Tt}return($e.prefix||"")+je+($e.suffix||"")},M.toFraction=function(_e){var ke,$e,je,He,We,ct,ht,yt,At,Tt,ln,Gn,Zn=this,ar=Zn.c;if(_e!=null&&(ht=new nt(_e),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(W)))throw Error($i+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Bt(ht));if(!ar)return new nt(Zn);for(ke=new nt(W),At=$e=new nt(W),je=yt=new nt(W),Gn=Hs(ar),We=ke.e=Gn.length-Zn.e-1,ke.c[0]=tl[(ct=We%wr)<0?wr+ct:ct],_e=!_e||ht.comparedTo(ke)>0?We>0?ke:At:ht,ct=qe,qe=1/0,ht=new nt(Gn),yt.c[0]=0;Tt=m(ht,ke,0,1),He=$e.plus(Tt.times(je)),He.comparedTo(_e)!=1;)$e=je,je=He,At=yt.plus(Tt.times(He=At)),yt=He,ke=ht.minus(Tt.times(He=ke)),ht=He;return He=m(_e.minus($e),je,0,1),yt=yt.plus(He.times(At)),$e=$e.plus(He.times(je)),yt.s=At.s=Zn.s,We=We*2,ln=m(At,je,We,oe).minus(Zn).abs().comparedTo(m(yt,$e,We,oe).minus(Zn).abs())<1?[At,je]:[yt,$e],qe=ct,ln},M.toNumber=function(){return+Bt(this)},M.toPrecision=function(_e,ke){return _e!=null&&u(_e,1,Lo),st(this,_e,ke,2)},M.toString=function(_e){var ke,$e=this,je=$e.s,He=$e.e;return He===null?je?(ke="Infinity",je<0&&(ke="-"+ke)):ke="NaN":(_e==null?ke=He<=be||He>=Ee?P(Hs($e.c),He):G(Hs($e.c),He,"0"):_e===10&&br?($e=Et(new nt($e),ee+He+1,oe),ke=G(Hs($e.c),$e.e,"0")):(u(_e,2,Pn.length,"Base"),ke=_(G(Hs($e.c),He,"0"),10,_e,je,!0)),je<0&&$e.c[0]&&(ke="-"+ke)),ke},M.valueOf=M.toJSON=function(){return Bt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,d!=null&&nt.set(d),nt}function Us(d){var m=d|0;return d>0||d===m?m:m-1}function Hs(d){for(var m,_,C=1,M=d.length,W=d[0]+"";C<M;){for(m=d[C++]+"",_=wr-m.length;_--;m="0"+m);W+=m}for(M=W.length;W.charCodeAt(--M)===48;);return W.slice(0,M+1||1)}function _a(d,m){var _,C,M=d.c,W=m.c,ee=d.s,oe=m.s,be=d.e,Ee=m.e;if(!ee||!oe)return null;if(_=M&&!M[0],C=W&&!W[0],_||C)return _?C?0:-oe:ee;if(ee!=oe)return ee;if(_=ee<0,C=be==Ee,!M||!W)return C?0:!M^_?1:-1;if(!C)return be>Ee^_?1:-1;for(oe=(be=M.length)<(Ee=W.length)?be:Ee,ee=0;ee<oe;ee++)if(M[ee]!=W[ee])return M[ee]>W[ee]^_?1:-1;return be==Ee?0:be>Ee^_?1:-1}function u(d,m,_,C){if(d<m||d>_||d!==Cs(d))throw Error($i+(C||"Argument")+(typeof d=="number"?d<m||d>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function y(d){var m=d.c.length-1;return Us(d.e/wr)==m&&d.c[m]%2!=0}function P(d,m){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(m<0?"e":"e+")+m}function G(d,m,_){var C,M;if(m<0){for(M=_+".";++m;M+=_);d=M+d}else if(C=d.length,++m>C){for(M=_,m-=C;--m;M+=_);d+=M}else m<C&&(d=d.slice(0,m)+"."+d.slice(m));return d}var ae=sd(),Pe=ae,ut=class{constructor(d){Je(this,"key");Je(this,"left",null);Je(this,"right",null);this.key=d}},Ot=class extends ut{constructor(d){super(d)}},Wt=class{constructor(){Je(this,"size",0);Je(this,"modificationCount",0);Je(this,"splayCount",0)}splay(d){let m=this.root;if(m==null)return this.compare(d,d),-1;let _=null,C=null,M=null,W=null,ee=m,oe=this.compare,be;for(;;)if(be=oe(ee.key,d),be>0){let Ee=ee.left;if(Ee==null||(be=oe(Ee.key,d),be>0&&(ee.left=Ee.right,Ee.right=ee,ee=Ee,Ee=ee.left,Ee==null)))break;_==null?C=ee:_.left=ee,_=ee,ee=Ee}else if(be<0){let Ee=ee.right;if(Ee==null||(be=oe(Ee.key,d),be<0&&(ee.right=Ee.left,Ee.left=ee,ee=Ee,Ee=ee.right,Ee==null)))break;M==null?W=ee:M.right=ee,M=ee,ee=Ee}else break;return M!=null&&(M.right=ee.left,ee.left=W),_!=null&&(_.left=ee.right,ee.right=C),this.root!==ee&&(this.root=ee,this.splayCount++),be}splayMin(d){let m=d,_=m.left;for(;_!=null;){let C=_;m.left=C.right,C.right=m,m=C,_=m.left}return m}splayMax(d){let m=d,_=m.right;for(;_!=null;){let C=_;m.right=C.left,C.left=m,m=C,_=m.right}return m}_delete(d){if(this.root==null||this.splay(d)!=0)return null;let m=this.root,_=m,C=m.left;if(this.size--,C==null)this.root=m.right;else{let M=m.right;m=this.splayMax(C),m.right=M,this.root=m}return this.modificationCount++,_}addNewRoot(d,m){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=d;return}m<0?(d.left=_,d.right=_.right,_.right=null):(d.right=_,d.left=_.left,_.left=null),this.root=d}_first(){let d=this.root;return d==null?null:(this.root=this.splayMin(d),this.root)}_last(){let d=this.root;return d==null?null:(this.root=this.splayMax(d),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(d){return this.validKey(d)&&this.splay(d)==0}defaultCompare(){return(d,m)=>d<m?-1:d>m?1:0}wrap(){return{getRoot:()=>this.root,setRoot:d=>{this.root=d},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:d=>{this.splayCount=d},splay:d=>this.splay(d),has:d=>this.has(d)}}},un=class wg extends Wt{constructor(_,C){super();Je(this,"root",null);Je(this,"compare");Je(this,"validKey");Je(this,Nn,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=C??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let C of _)this.delete(C)}forEach(_){let C=this[Symbol.iterator](),M;for(;M=C.next(),!M.done;)_(M.value,M.value,this)}add(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Ot(_),C),this}addAndReturn(_){let C=this.splay(_);return C!=0&&this.addNewRoot(new Ot(_),C),this.root.key}addAll(_){for(let C of _)this.add(C)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let C=this.root.left;if(C==null)return null;let M=C.right;for(;M!=null;)C=M,M=C.right;return C.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let C=this.root.right;if(C==null)return null;let M=C.left;for(;M!=null;)C=M,M=C.left;return C.key}retainAll(_){let C=new wg(this.compare,this.validKey),M=this.modificationCount;for(let W of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(W)&&this.splay(W)==0&&C.add(this.root.key)}C.size!=this.size&&(this.root=C.root,this.size=C.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let C=new wg(this.compare,this.validKey);for(let M of this)_.has(M)&&C.add(M);return C}difference(_){let C=new wg(this.compare,this.validKey);for(let M of this)_.has(M)||C.add(M);return C}union(_){let C=this.clone();return C.addAll(_),C}clone(){let _=new wg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function C(W,ee){let oe,be;do{if(oe=W.left,be=W.right,oe!=null){let Ee=new Ot(oe.key);ee.left=Ee,C(oe,Ee)}if(be!=null){let Ee=new Ot(be.key);ee.right=Ee,W=be,ee=Ee}}while(be!=null)}let M=new Ot(_.key);return C(_,M),M}toSet(){return this.clone()}entries(){return new Vr(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(or=Symbol.iterator,Nn=Symbol.toStringTag,or)](){return new sr(this.wrap())}},jn=class{constructor(d){Je(this,"tree");Je(this,"path",new Array);Je(this,"modificationCount",null);Je(this,"splayCount");this.tree=d,this.splayCount=d.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let d=this.path[this.path.length-1];return this.getValue(d)}rebuildPath(d){this.path.splice(0,this.path.length),this.tree.splay(d),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(d){for(;d!=null;)this.path.push(d),d=d.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let d=this.path[this.path.length-1],m=d.right;if(m!=null){for(;m!=null;)this.path.push(m),m=m.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===d;)d=this.path.pop();return this.path.length>0}},sr=class extends jn{getValue(d){return d.key}},Vr=class extends jn{getValue(d){return[d.key,d.key]}},Es=d=>d,as=d=>{if(d){let m=new un(Bo(d)),_=new un(Bo(d)),C=(W,ee)=>ee.addAndReturn(W),M=W=>({x:C(W.x,m),y:C(W.y,_)});return M({x:new Pe(0),y:new Pe(0)}),M}return Es},Ws=d=>({set:m=>{Qi=Ws(m)},reset:()=>Ws(d),compare:Bo(d),snap:as(d),orient:aa(d)}),Qi=Ws(),Fo=(d,m)=>d.ll.x.isLessThanOrEqualTo(m.x)&&m.x.isLessThanOrEqualTo(d.ur.x)&&d.ll.y.isLessThanOrEqualTo(m.y)&&m.y.isLessThanOrEqualTo(d.ur.y),od=(d,m)=>{if(m.ur.x.isLessThan(d.ll.x)||d.ur.x.isLessThan(m.ll.x)||m.ur.y.isLessThan(d.ll.y)||d.ur.y.isLessThan(m.ll.y))return null;let _=d.ll.x.isLessThan(m.ll.x)?m.ll.x:d.ll.x,C=d.ur.x.isLessThan(m.ur.x)?d.ur.x:m.ur.x,M=d.ll.y.isLessThan(m.ll.y)?m.ll.y:d.ll.y,W=d.ur.y.isLessThan(m.ur.y)?d.ur.y:m.ur.y;return{ll:{x:_,y:M},ur:{x:C,y:W}}},$a=(d,m)=>d.x.times(m.y).minus(d.y.times(m.x)),wa=(d,m)=>d.x.times(m.x).plus(d.y.times(m.y)),la=d=>wa(d,d).sqrt(),Th=(d,m,_)=>{let C={x:m.x.minus(d.x),y:m.y.minus(d.y)},M={x:_.x.minus(d.x),y:_.y.minus(d.y)};return $a(M,C).div(la(M)).div(la(C))},Ou=(d,m,_)=>{let C={x:m.x.minus(d.x),y:m.y.minus(d.y)},M={x:_.x.minus(d.x),y:_.y.minus(d.y)};return wa(M,C).div(la(M)).div(la(C))},_i=(d,m,_)=>m.y.isZero()?null:{x:d.x.plus(m.x.div(m.y).times(_.minus(d.y))),y:_},ao=(d,m,_)=>m.x.isZero()?null:{x:_,y:d.y.plus(m.y.div(m.x).times(_.minus(d.x)))},Ne=(d,m,_,C)=>{if(m.x.isZero())return ao(_,C,d.x);if(C.x.isZero())return ao(d,m,_.x);if(m.y.isZero())return _i(_,C,d.y);if(C.y.isZero())return _i(d,m,_.y);let M=$a(m,C);if(M.isZero())return null;let W={x:_.x.minus(d.x),y:_.y.minus(d.y)},ee=$a(W,m).div(M),oe=$a(W,C).div(M),be=d.x.plus(oe.times(m.x)),Ee=_.x.plus(ee.times(C.x)),rt=d.y.plus(oe.times(m.y)),qe=_.y.plus(ee.times(C.y)),wt=be.plus(Ee).div(2),It=rt.plus(qe).div(2);return{x:wt,y:It}},jo=class BE{constructor(m,_){Je(this,"point");Je(this,"isLeft");Je(this,"segment");Je(this,"otherSE");Je(this,"consumedBy");m.events===void 0?m.events=[this]:m.events.push(this),this.point=m,this.isLeft=_}static compare(m,_){let C=BE.comparePoints(m.point,_.point);return C!==0?C:(m.point!==_.point&&m.link(_),m.isLeft!==_.isLeft?m.isLeft?1:-1:Gs.compare(m.segment,_.segment))}static comparePoints(m,_){return m.x.isLessThan(_.x)?-1:m.x.isGreaterThan(_.x)?1:m.y.isLessThan(_.y)?-1:m.y.isGreaterThan(_.y)?1:0}link(m){if(m.point===this.point)throw new Error("Tried to link already linked events");let _=m.point.events;for(let C=0,M=_.length;C<M;C++){let W=_[C];this.point.events.push(W),W.point=this.point}this.checkForConsuming()}checkForConsuming(){let m=this.point.events.length;for(let _=0;_<m;_++){let C=this.point.events[_];if(C.segment.consumedBy===void 0)for(let M=_+1;M<m;M++){let W=this.point.events[M];W.consumedBy===void 0&&C.otherSE.point.events===W.otherSE.point.events&&C.segment.consume(W.segment)}}}getAvailableLinkedEvents(){let m=[];for(let _=0,C=this.point.events.length;_<C;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&m.push(M)}return m}getLeftmostComparator(m){let _=new Map,C=M=>{let W=M.otherSE;_.set(M,{sine:Th(this.point,m.point,W.point),cosine:Ou(this.point,m.point,W.point)})};return(M,W)=>{_.has(M)||C(M),_.has(W)||C(W);let{sine:ee,cosine:oe}=_.get(M),{sine:be,cosine:Ee}=_.get(W);return ee.isGreaterThanOrEqualTo(0)&&be.isGreaterThanOrEqualTo(0)?oe.isLessThan(Ee)?1:oe.isGreaterThan(Ee)?-1:0:ee.isLessThan(0)&&be.isLessThan(0)?oe.isLessThan(Ee)?-1:oe.isGreaterThan(Ee)?1:0:be.isLessThan(ee)?-1:be.isGreaterThan(ee)?1:0}}},tc=0,Gs=class iv{constructor(m,_,C,M){Je(this,"id");Je(this,"leftSE");Je(this,"rightSE");Je(this,"rings");Je(this,"windings");Je(this,"ringOut");Je(this,"consumedBy");Je(this,"prev");Je(this,"_prevInResult");Je(this,"_beforeState");Je(this,"_afterState");Je(this,"_isInResult");this.id=++tc,this.leftSE=m,m.segment=this,m.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=m,this.rings=C,this.windings=M}static compare(m,_){let C=m.leftSE.point.x,M=_.leftSE.point.x,W=m.rightSE.point.x,ee=_.rightSE.point.x;if(ee.isLessThan(C))return 1;if(W.isLessThan(M))return-1;let oe=m.leftSE.point.y,be=_.leftSE.point.y,Ee=m.rightSE.point.y,rt=_.rightSE.point.y;if(C.isLessThan(M)){if(be.isLessThan(oe)&&be.isLessThan(Ee))return 1;if(be.isGreaterThan(oe)&&be.isGreaterThan(Ee))return-1;let qe=m.comparePoint(_.leftSE.point);if(qe<0)return 1;if(qe>0)return-1;let wt=_.comparePoint(m.rightSE.point);return wt!==0?wt:-1}if(C.isGreaterThan(M)){if(oe.isLessThan(be)&&oe.isLessThan(rt))return-1;if(oe.isGreaterThan(be)&&oe.isGreaterThan(rt))return 1;let qe=_.comparePoint(m.leftSE.point);if(qe!==0)return qe;let wt=m.comparePoint(_.rightSE.point);return wt<0?1:wt>0?-1:1}if(oe.isLessThan(be))return-1;if(oe.isGreaterThan(be))return 1;if(W.isLessThan(ee)){let qe=_.comparePoint(m.rightSE.point);if(qe!==0)return qe}if(W.isGreaterThan(ee)){let qe=m.comparePoint(_.rightSE.point);if(qe<0)return 1;if(qe>0)return-1}if(!W.eq(ee)){let qe=Ee.minus(oe),wt=W.minus(C),It=rt.minus(be),en=ee.minus(M);if(qe.isGreaterThan(wt)&&It.isLessThan(en))return 1;if(qe.isLessThan(wt)&&It.isGreaterThan(en))return-1}return W.isGreaterThan(ee)?1:W.isLessThan(ee)||Ee.isLessThan(rt)?-1:Ee.isGreaterThan(rt)?1:m.id<_.id?-1:m.id>_.id?1:0}static fromRing(m,_,C){let M,W,ee,oe=jo.comparePoints(m,_);if(oe<0)M=m,W=_,ee=1;else if(oe>0)M=_,W=m,ee=-1;else throw new Error(`Tried to create degenerate segment at [${m.x}, ${m.y}]`);let be=new jo(M,!0),Ee=new jo(W,!1);return new iv(be,Ee,[C],[ee])}replaceRightSE(m){this.rightSE=m,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let m=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:m.isLessThan(_)?m:_},ur:{x:this.rightSE.point.x,y:m.isGreaterThan(_)?m:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(m){return m.x.eq(this.leftSE.point.x)&&m.y.eq(this.leftSE.point.y)||m.x.eq(this.rightSE.point.x)&&m.y.eq(this.rightSE.point.y)}comparePoint(m){return Qi.orient(this.leftSE.point,m,this.rightSE.point)}getIntersection(m){let _=this.bbox(),C=m.bbox(),M=od(_,C);if(M===null)return null;let W=this.leftSE.point,ee=this.rightSE.point,oe=m.leftSE.point,be=m.rightSE.point,Ee=Fo(_,oe)&&this.comparePoint(oe)===0,rt=Fo(C,W)&&m.comparePoint(W)===0,qe=Fo(_,be)&&this.comparePoint(be)===0,wt=Fo(C,ee)&&m.comparePoint(ee)===0;if(rt&&Ee)return wt&&!qe?ee:!wt&&qe?be:null;if(rt)return qe&&W.x.eq(be.x)&&W.y.eq(be.y)?null:W;if(Ee)return wt&&ee.x.eq(oe.x)&&ee.y.eq(oe.y)?null:oe;if(wt&&qe)return null;if(wt)return ee;if(qe)return be;let It=Ne(W,this.vector(),oe,m.vector());return It===null||!Fo(M,It)?null:Qi.snap(It)}split(m){let _=[],C=m.events!==void 0,M=new jo(m,!0),W=new jo(m,!1),ee=this.rightSE;this.replaceRightSE(W),_.push(W),_.push(M);let oe=new iv(M,ee,this.rings.slice(),this.windings.slice());return jo.comparePoints(oe.leftSE.point,oe.rightSE.point)>0&&oe.swapEvents(),jo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),C&&(M.checkForConsuming(),W.checkForConsuming()),_}swapEvents(){let m=this.rightSE;this.rightSE=this.leftSE,this.leftSE=m,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,C=this.windings.length;_<C;_++)this.windings[_]*=-1}consume(m){let _=this,C=m;for(;_.consumedBy;)_=_.consumedBy;for(;C.consumedBy;)C=C.consumedBy;let M=iv.compare(_,C);if(M!==0){if(M>0){let W=_;_=C,C=W}if(_.prev===C){let W=_;_=C,C=W}for(let W=0,ee=C.rings.length;W<ee;W++){let oe=C.rings[W],be=C.windings[W],Ee=_.rings.indexOf(oe);Ee===-1?(_.rings.push(oe),_.windings.push(be)):_.windings[Ee]+=be}C.rings=null,C.windings=null,C.consumedBy=_,C.leftSE.consumedBy=_.leftSE,C.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let m=this.prev.consumedBy||this.prev;this._beforeState=m.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let m=this.beforeState();this._afterState={rings:m.rings.slice(0),windings:m.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,C=this._afterState.windings,M=this._afterState.multiPolys;for(let oe=0,be=this.rings.length;oe<be;oe++){let Ee=this.rings[oe],rt=this.windings[oe],qe=_.indexOf(Ee);qe===-1?(_.push(Ee),C.push(rt)):C[qe]+=rt}let W=[],ee=[];for(let oe=0,be=_.length;oe<be;oe++){if(C[oe]===0)continue;let Ee=_[oe],rt=Ee.poly;if(ee.indexOf(rt)===-1)if(Ee.isExterior)W.push(rt);else{ee.indexOf(rt)===-1&&ee.push(rt);let qe=W.indexOf(Ee.poly);qe!==-1&&W.splice(qe,1)}}for(let oe=0,be=W.length;oe<be;oe++){let Ee=W[oe].multiPoly;M.indexOf(Ee)===-1&&M.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let m=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Ud.type){case"union":{let C=m.length===0,M=_.length===0;this._isInResult=C!==M;break}case"intersection":{let C,M;m.length<_.length?(C=m.length,M=_.length):(C=_.length,M=m.length),this._isInResult=M===Ud.numMultiPolys&&C<M;break}case"xor":{let C=Math.abs(m.length-_.length);this._isInResult=C%2===1;break}case"difference":{let C=M=>M.length===1&&M[0].isSubject;this._isInResult=C(m)!==C(_);break}}return this._isInResult}},Wr=class{constructor(d,m,_){Je(this,"poly");Je(this,"isExterior");Je(this,"segments");Je(this,"bbox");if(!Array.isArray(d)||d.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=m,this.isExterior=_,this.segments=[],typeof d[0][0]!="number"||typeof d[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let C=Qi.snap({x:new Pe(d[0][0]),y:new Pe(d[0][1])});this.bbox={ll:{x:C.x,y:C.y},ur:{x:C.x,y:C.y}};let M=C;for(let W=1,ee=d.length;W<ee;W++){if(typeof d[W][0]!="number"||typeof d[W][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let oe=Qi.snap({x:new Pe(d[W][0]),y:new Pe(d[W][1])});oe.x.eq(M.x)&&oe.y.eq(M.y)||(this.segments.push(Gs.fromRing(M,oe,this)),oe.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=oe.x),oe.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=oe.y),oe.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=oe.x),oe.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=oe.y),M=oe)}(!C.x.eq(M.x)||!C.y.eq(M.y))&&this.segments.push(Gs.fromRing(M,C,this))}getSweepEvents(){let d=[];for(let m=0,_=this.segments.length;m<_;m++){let C=this.segments[m];d.push(C.leftSE),d.push(C.rightSE)}return d}},$d=class{constructor(d,m){Je(this,"multiPoly");Je(this,"exteriorRing");Je(this,"interiorRings");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Wr(d[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,C=d.length;_<C;_++){let M=new Wr(d[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=m}getSweepEvents(){let d=this.exteriorRing.getSweepEvents();for(let m=0,_=this.interiorRings.length;m<_;m++){let C=this.interiorRings[m].getSweepEvents();for(let M=0,W=C.length;M<W;M++)d.push(C[M])}return d}},Mf=class{constructor(d,m){Je(this,"isSubject");Je(this,"polys");Je(this,"bbox");if(!Array.isArray(d))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof d[0][0][0]=="number"&&(d=[d])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,C=d.length;_<C;_++){let M=new $d(d[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=m}getSweepEvents(){let d=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getSweepEvents();for(let M=0,W=C.length;M<W;M++)d.push(C[M])}return d}},Vd=class wb{constructor(m){Je(this,"events");Je(this,"poly");Je(this,"_isExteriorRing");Je(this,"_enclosingRing");this.events=m;for(let _=0,C=m.length;_<C;_++)m[_].segment.ringOut=this;this.poly=null}static factory(m){let _=[];for(let C=0,M=m.length;C<M;C++){let W=m[C];if(!W.isInResult()||W.ringOut)continue;let ee=null,oe=W.leftSE,be=W.rightSE,Ee=[oe],rt=oe.point,qe=[];for(;ee=oe,oe=be,Ee.push(oe),oe.point!==rt;)for(;;){let wt=oe.getAvailableLinkedEvents();if(wt.length===0){let _n=Ee[0].point,Pn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${_n.x}, ${_n.y}]. Last matching segment found ends at [${Pn.x}, ${Pn.y}].`)}if(wt.length===1){be=wt[0].otherSE;break}let It=null;for(let _n=0,Pn=qe.length;_n<Pn;_n++)if(qe[_n].point===oe.point){It=_n;break}if(It!==null){let _n=qe.splice(It)[0],Pn=Ee.splice(_n.index);Pn.unshift(Pn[0].otherSE),_.push(new wb(Pn.reverse()));continue}qe.push({index:Ee.length,point:oe.point});let en=oe.getLeftmostComparator(ee);be=wt.sort(en)[0].otherSE;break}_.push(new wb(Ee))}return _}getGeom(){let m=this.events[0].point,_=[m];for(let Ee=1,rt=this.events.length-1;Ee<rt;Ee++){let qe=this.events[Ee].point,wt=this.events[Ee+1].point;Qi.orient(qe,m,wt)!==0&&(_.push(qe),m=qe)}if(_.length===1)return null;let C=_[0],M=_[1];Qi.orient(C,m,M)===0&&_.shift(),_.push(_[0]);let W=this.isExteriorRing()?1:-1,ee=this.isExteriorRing()?0:_.length-1,oe=this.isExteriorRing()?_.length:-1,be=[];for(let Ee=ee;Ee!=oe;Ee+=W)be.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return be}isExteriorRing(){if(this._isExteriorRing===void 0){let m=this.enclosingRing();this._isExteriorRing=m?!m.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,W;let m=this.events[0];for(let ee=1,oe=this.events.length;ee<oe;ee++){let be=this.events[ee];jo.compare(m,be)>0&&(m=be)}let _=m.segment.prevInResult(),C=_?_.prevInResult():null;for(;;){if(!_)return null;if(!C)return _.ringOut;if(C.ringOut!==_.ringOut)return((M=C.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(W=_.ringOut)==null?void 0:W.enclosingRing();_=C.prevInResult(),C=_?_.prevInResult():null}}},Ll=class{constructor(d){Je(this,"exteriorRing");Je(this,"interiorRings");this.exteriorRing=d,d.poly=this,this.interiorRings=[]}addInterior(d){this.interiorRings.push(d),d.poly=this}getGeom(){let d=this.exteriorRing.getGeom();if(d===null)return null;let m=[d];for(let _=0,C=this.interiorRings.length;_<C;_++){let M=this.interiorRings[_].getGeom();M!==null&&m.push(M)}return m}},ad=class{constructor(d){Je(this,"rings");Je(this,"polys");this.rings=d,this.polys=this._composePolys(d)}getGeom(){let d=[];for(let m=0,_=this.polys.length;m<_;m++){let C=this.polys[m].getGeom();C!==null&&d.push(C)}return d}_composePolys(d){var _;let m=[];for(let C=0,M=d.length;C<M;C++){let W=d[C];if(!W.poly)if(W.isExteriorRing())m.push(new Ll(W));else{let ee=W.enclosingRing();ee!=null&&ee.poly||m.push(new Ll(ee)),(_=ee==null?void 0:ee.poly)==null||_.addInterior(W)}}return m}},Dh=class{constructor(d,m=Gs.compare){Je(this,"queue");Je(this,"tree");Je(this,"segments");this.queue=d,this.tree=new un(m),this.segments=[]}process(d){let m=d.segment,_=[];if(d.consumedBy)return d.isLeft?this.queue.delete(d.otherSE):this.tree.delete(m),_;d.isLeft&&this.tree.add(m);let C=m,M=m;do C=this.tree.lastBefore(C);while(C!=null&&C.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(d.isLeft){let W=null;if(C){let oe=C.getIntersection(m);if(oe!==null&&(m.isAnEndpoint(oe)||(W=oe),!C.isAnEndpoint(oe))){let be=this._splitSafely(C,oe);for(let Ee=0,rt=be.length;Ee<rt;Ee++)_.push(be[Ee])}}let ee=null;if(M){let oe=M.getIntersection(m);if(oe!==null&&(m.isAnEndpoint(oe)||(ee=oe),!M.isAnEndpoint(oe))){let be=this._splitSafely(M,oe);for(let Ee=0,rt=be.length;Ee<rt;Ee++)_.push(be[Ee])}}if(W!==null||ee!==null){let oe=null;W===null?oe=ee:ee===null?oe=W:oe=jo.comparePoints(W,ee)<=0?W:ee,this.queue.delete(m.rightSE),_.push(m.rightSE);let be=m.split(oe);for(let Ee=0,rt=be.length;Ee<rt;Ee++)_.push(be[Ee])}_.length>0?(this.tree.delete(m),_.push(d)):(this.segments.push(m),m.prev=C)}else{if(C&&M){let W=C.getIntersection(M);if(W!==null){if(!C.isAnEndpoint(W)){let ee=this._splitSafely(C,W);for(let oe=0,be=ee.length;oe<be;oe++)_.push(ee[oe])}if(!M.isAnEndpoint(W)){let ee=this._splitSafely(M,W);for(let oe=0,be=ee.length;oe<be;oe++)_.push(ee[oe])}}}this.tree.delete(m)}return _}_splitSafely(d,m){this.tree.delete(d);let _=d.rightSE;this.queue.delete(_);let C=d.split(m);return C.push(_),d.consumedBy===void 0&&this.tree.add(d),C}},$p=class{constructor(){Je(this,"type");Je(this,"numMultiPolys")}run(d,m,_){Tc.type=d;let C=[new Mf(m,!0)];for(let be=0,Ee=_.length;be<Ee;be++)C.push(new Mf(_[be],!1));if(Tc.numMultiPolys=C.length,Tc.type==="difference"){let be=C[0],Ee=1;for(;Ee<C.length;)od(C[Ee].bbox,be.bbox)!==null?Ee++:C.splice(Ee,1)}if(Tc.type==="intersection")for(let be=0,Ee=C.length;be<Ee;be++){let rt=C[be];for(let qe=be+1,wt=C.length;qe<wt;qe++)if(od(rt.bbox,C[qe].bbox)===null)return[]}let M=new un(jo.compare);for(let be=0,Ee=C.length;be<Ee;be++){let rt=C[be].getSweepEvents();for(let qe=0,wt=rt.length;qe<wt;qe++)M.add(rt[qe])}let W=new Dh(M),ee=null;for(M.size!=0&&(ee=M.first(),M.delete(ee));ee;){let be=W.process(ee);for(let Ee=0,rt=be.length;Ee<rt;Ee++){let qe=be[Ee];qe.consumedBy===void 0&&M.add(qe)}M.size!=0?(ee=M.first(),M.delete(ee)):ee=null}Qi.reset();let oe=Vd.factory(W.segments);return new ad(oe).getGeom()}},Tc=new $p,Ud=Tc,pu=(d,...m)=>Ud.run("intersection",d,m),Vp=(d,...m)=>Ud.run("difference",d,m);Qi.set;function Hd(d){let m={type:"Feature"};return m.geometry=d,m}function Wd(d){return d.type==="Feature"?d.geometry:d}function kf(d){return d&&d.geometry&&d.geometry.coordinates?d.geometry.coordinates:d}function Af(d){return Hd({type:"LineString",coordinates:d})}function nl(d){return Hd({type:"MultiLineString",coordinates:d})}function Tf(d){return Hd({type:"Polygon",coordinates:d})}function Df(d){return Hd({type:"MultiPolygon",coordinates:d})}function Of(d,m){let _=Wd(d),C=Wd(m),M=pu(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Tf(M[0]):Df(M)}function w(d,m){let _=Wd(d),C=Wd(m),M=Vp(_.coordinates,C.coordinates);return M.length===0?null:M.length===1?Tf(M[0]):Df(M)}function T(d){return Array.isArray(d)?1+T(d[0]):-1}function q(d){d instanceof L.Polyline&&(d=d.toGeoJSON(15));let m=kf(d),_=T(m),C=[];return _>1?m.forEach(M=>{C.push(Af(M))}):C.push(d),C}function le(d){let m=[];return d.eachLayer(_=>{m.push(kf(_.toGeoJSON(15)))}),nl(m)}gs.Cut=gs.Polygon.extend({initialize(d){this._map=d,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let d=this._layer.getLatLngs();if(d.length<=2)return;let m=L.polygon(d,this.options.pathOptions);m._latlngInfos=this._layer._latlngInfo,this.cut(m),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:C,originalLayer:M})=>{this._fireCut(M,C,M),this._fireCut(this._map,C,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(d){let m=this._map._layers,_=d._latlngInfos||[];Object.keys(m).map(C=>m[C]).filter(C=>C.pm).filter(C=>!C._pmTempLayer).filter(C=>!L.PM.optIn&&!C.options.pmIgnore||L.PM.optIn&&C.options.pmIgnore===!1).filter(C=>C instanceof L.Polyline).filter(C=>C!==d).filter(C=>C.pm.options.allowCutting).filter(C=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(C)>-1:!0).filter(C=>!this._layerGroup.hasLayer(C)).filter(C=>{try{let M=!!Io(d.toGeoJSON(15),C.toGeoJSON(15)).features.length>0;return M||C instanceof L.Polyline&&!(C instanceof L.Polygon)?M:!!Of(d.toGeoJSON(15),C.toGeoJSON(15))}catch{return C instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(C=>{let M;if(C instanceof L.Polygon){M=L.polygon(C.getLatLngs());let be=M.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:rt}=Ee,qe=this._calcClosestLayer(rt,[M]);if(qe&&qe.segment&&qe.distance<this.options.snapDistance){let{segment:wt}=qe;if(wt&&wt.length===2){let{indexPath:It,parentPath:en,newIndex:_n}=L.PM.Utils._getIndexFromSegment(be,wt);(It.length>1?(0,Ui.default)(be,en):be).splice(_n,0,rt)}}}})}else M=C;let W=this._cutLayer(d,M),ee=L.geoJSON(W,C.options);ee.getLayers().length===1&&([ee]=ee.getLayers()),this._setPane(ee,"layerPane");let oe=ee.addTo(this._map.pm._getContainingLayer());if(oe.pm.enable(C.pm.options),oe.pm.disable(),C._pmTempLayer=!0,d._pmTempLayer=!0,C.remove(),C.removeFrom(this._map.pm._getContainingLayer()),d.remove(),d.removeFrom(this._map.pm._getContainingLayer()),oe.getLayers&&oe.getLayers().length===0&&this._map.pm.removeLayer({target:oe}),oe instanceof L.LayerGroup?(oe.eachLayer(be=>{this._addDrawnLayerProp(be)}),this._addDrawnLayerProp(oe)):this._addDrawnLayerProp(oe),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let be=this.options.layersToCut.indexOf(C);be>-1&&this.options.layersToCut.splice(be,1)}this._editedLayers.push({layer:oe,originalLayer:C})})},_cutLayer(d,m){let _=L.geoJSON(),C;if(m instanceof L.Polygon)C=w(m.toGeoJSON(15),d.toGeoJSON(15));else{let M=q(m);M.forEach(W=>{let ee=nr(W,d.toGeoJSON(15)),oe;ee&&ee.features.length>0?oe=L.geoJSON(ee):oe=L.geoJSON(W),oe.getLayers().forEach(be=>{Ba(d.toGeoJSON(15),be.toGeoJSON(15))||be.addTo(_)})}),M.length>1?C=le(_):C=_.toGeoJSON(15)}return C},_change:L.Util.falseFn}),gs.Text=gs.extend({initialize(d){this._map=d,this._shape="Text",this.toolbarButtonName="drawText"},enable(d){L.Util.setOptions(this,d),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(gr("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var d;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(d=this._hintMarker)==null||d.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(d){this.enabled()?this.disable():this.enable(d)},_syncHintMarker(d){if(this._hintMarker.setLatLng(d.latlng),this.options.snappable){let m=d;m.target=this._hintMarker,this._handleSnapping(m)}},_createMarker(d){var M,W,ee,oe;if(!d.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(d.latlng);let m=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let be=this.options.textOptions.className.split(" ");this.textArea.classList.add(...be)}let _=this._createTextIcon(this.textArea),C=new L.Marker(m,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(C,"markerPane"),this._finishLayer(C),C.pm||(C.options.draggable=!1),C.addTo(this._map.pm._getContainingLayer()),C.pm){C.pm.textArea=this.textArea,L.setOptions(C.pm,{removeIfEmpty:((W=this.options.textOptions)==null?void 0:W.removeIfEmpty)??!0});let be=((ee=this.options.textOptions)==null?void 0:ee.focusAfterDraw)??!0;C.pm._createTextMarker(be),(oe=this.options.textOptions)!=null&&oe.text&&C.pm.setText(this.options.textOptions.text)}this._fireCreate(C),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(d){this.enable(),this._hintMarker.setLatLng(d.latlng)},_createTextArea(){let d=document.createElement("textarea");return d.readOnly=!0,d.classList.add("pm-textarea","pm-disabled"),d},_createTextIcon(d){return L.divIcon({className:"pm-text-marker",html:d})}});var Le={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Li(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let d=this._getDOMElem();d&&(Li(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(d)):L.DomEvent.on(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Li(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let d=this._getDOMElem();d&&(Li(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(d)):L.DomEvent.off(d,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(d){let m=d.touches?d.touches[0]:d,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(d){let m=d.touches?d.touches[0]:d,_={originalEvent:m,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(m),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(d){let m={originalEvent:d.touches?d.touches[0]:d,target:this._layer};return d.type.indexOf("touch")===-1&&(m.containerPoint=this._map.mouseEventToContainerPoint(d),m.latlng=this._map.containerPointToLatLng(m.containerPoint)),this._dragMixinOnMouseUp(m),!1},_dragMixinOnMouseDown(d){if(d.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(d);let m=d._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",d);if(this._layer instanceof L.Marker&&(this.options.snappable&&!m&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let C="resizeableCircleMarker";this._layer instanceof L.Circle&&(C="resizeableCircle"),this.options.snappable&&!m&&!_?this._layer.pm.options[C]||this._initSnappableMarkersDrag():this._layer.pm.options[C]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=d.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(d){this._overwriteEventIfItComesFromMarker(d);let m=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",d),this._dragging||(this._dragging=!0,L.DomUtil.addClass(m,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=d.latlng),this._onLayerDrag(d),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(d){let m=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",d),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,m&&L.DomUtil.removeClass(m,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(d){let{latlng:m}=d,_={lat:m.lat-this._tempDragCoord.lat,lng:m.lng-this._tempDragCoord.lng},C=M=>M.map(W=>{if(Array.isArray(W))return C(W);let ee={lat:W.lat+_.lat,lng:W.lng+_.lng};return(W.alt||W.alt===0)&&(ee.alt=W.alt),ee});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=C([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let W=C([M]);this._layer.setLatLng(W[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=C([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=C(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=m,d.layer=this._layer,this._fireDrag(d)},addDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.addClass(d,"leaflet-pm-draggable")},removeDraggingClass(){let d=this._getDOMElem();d&&L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_getDOMElem(){let d=null;return this._layer._path?d=this._layer._path:this._layer._renderer&&this._layer._renderer._container?d=this._layer._renderer._container:this._layer._image?d=this._layer._image:this._layer._icon&&(d=this._layer._icon),d},_overwriteEventIfItComesFromMarker(d){d.target.getLatLng&&(!d.target._radius||d.target._radius<=10)&&(d.containerPoint=this._map.mouseEventToContainerPoint(d.originalEvent),d.latlng=this._map.containerPointToLatLng(d.containerPoint))},_syncLayers(d,m){if(this.enabled())return!1;if(!m._fromLayerSync&&this._layer===m.target&&this.options.syncLayersOnDrag){m._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(C=>{C instanceof L.LayerGroup&&(_=_.concat(C.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let C in this._parentLayerGroup){let M=this._parentLayerGroup[C];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(C=>!!C.pm).filter(C=>!!C.pm.options.draggable),_.forEach(C=>{C!==this._layer&&C.pm[d]&&(C._snapped=!1,C.pm[d](m))})),_.length>0}return!1},_stopDOMImageDrag(d){return d.preventDefault(),!1}},Me=Le,Ae=l(ei());function Oe(d,m,_,C){return _.unproject(m.transform(_.project(d,C)),C)}function Fe(d,m,_){let C=_.getMaxZoom();if(C===1/0&&(C=_.getZoom()),L.Util.isArray(d)){let M=[];return d.forEach(W=>{M.push(Fe(W,m,_))}),M}return d instanceof L.LatLng?Oe(d,m,_,C):null}function Xe(d,m){m instanceof L.Layer&&(m=m.getLatLng());let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.project(m,_)}function mt(d,m){let _=d.getMaxZoom();return _===1/0&&(_=d.getZoom()),d.unproject(m,_)}var Rt={_onRotateStart(d){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Xe(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Xe(this._map,d.target.getLatLng()),this._initialRotateLatLng=oa(this._layer),this._startAngle=this.getAngle();let m=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,m),this._fireRotationStart(this._map,m)},_onRotate(d){let m=Xe(this._map,d.target.getLatLng()),_=this._rotationStartPoint,C=this._rotationOriginPoint,M=Math.atan2(m.y-C.y,m.x-C.x)-Math.atan2(_.y-C.y,_.x-C.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let W=this;function ee(rt,qe=[],wt=-1){if(wt>-1&&qe.push(wt),L.Util.isArray(rt[0]))rt.forEach((It,en)=>ee(It,qe.slice(),en));else{let It=qe.length>0?(0,Ae.default)(W._markers,qe):W._markers[0];rt.forEach((en,_n)=>{It[_n].setLatLng(en)})}}ee(this._layer.getLatLngs());let oe=oa(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let be=M*180/Math.PI;be=be<0?be+360:be;let Ee=be+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,be,oe),this._fireRotation(this._map,be,oe),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let d=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let m=oa(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=oa(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,d,m),this._fireRotationEnd(this._map,d,m),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(d,m,_,C,M){let W=Xe(M,_);return this._matrix=C.clone().rotate(d,W).flip(),Fe(m,this._matrix,M)},_setAngle(d){d=d<0?d+360:d,this._angle=d%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let d=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),m=d.getCenter();return d.removeFrom(this._layer._map),m},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Da(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),d),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=oa(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(d){let m=this.getAngle(),_=this._layer.getLatLngs(),C=d*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(C,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+d),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(C,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-m;M=M<0?M+360:M,this._startAngle=m,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(d){let m=d-this.getAngle();this.rotateLayer(m)},getAngle(){return this._angle||0},setInitAngle(d){this._setAngle(d)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(d){this._rotationCenter=d,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(d)}},Ft=Rt,Pt=L.Class.extend({includes:[Me,Jo,Ft,lu],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(d){L.Util.setOptions(this,d)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(d,m){m==="layerPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":m==="vertexPane"?d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":m==="markerPane"&&(d.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(d,m){let _=m.target,C={layer:this._layer,marker:_,event:m},M="";return d==="move"?M="moveVertexValidation":d==="add"?M="addVertexValidation":d==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](C)?(d==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(d){return d._cancelDragEventChain?(d._latlng=d._cancelDragEventChain,d.update(),!1):!0},_vertexValidationDragEnd(d){return d._cancelDragEventChain?(d._cancelDragEventChain=null,!1):!0}}),Kt=Pt;Kt.LayerGroup=L.Class.extend({initialize(d){this._layerGroup=d,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(C=>this._initLayer(C));let m=C=>{if(C.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(W=>!W.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in W.pm._parentLayerGroup));M.forEach(W=>{this._initLayer(W)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(m,100,this),this),this._layerGroup.on("layerremove",C=>{this._removeLayerFromGroup(C.target)},this);let _=C=>{C.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.enable(d,m)):_.pm.enable(d)})},disable(d=[]){d.length===0&&(this._layers=this.getLayers()),this._layers.forEach(m=>{m instanceof L.LayerGroup?d.indexOf(m._leaflet_id)===-1&&(d.push(m._leaflet_id),m.pm.disable(d)):m.pm.disable()})},enabled(d=[]){return d.length===0&&(this._layers=this.getLayers()),!!this._layers.find(m=>m instanceof L.LayerGroup?d.indexOf(m._leaflet_id)===-1?(d.push(m._leaflet_id),m.pm.enabled(d)):!1:m.pm.enabled())},toggleEdit(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this._options=d,this._layers.forEach(_=>{_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.toggleEdit(d,m)):_.pm.toggleEdit(d)})},_initLayer(d){let m=L.Util.stamp(this._layerGroup);d.pm._parentLayerGroup||(d.pm._parentLayerGroup={}),d.pm._parentLayerGroup[m]=this._layerGroup},_removeLayerFromGroup(d){if(d.pm&&d.pm._layerGroup){let m=L.Util.stamp(this._layerGroup);delete d.pm._layerGroup[m]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(d=>d.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var d;return this._map||((d=this._layers.find(m=>!!m._map))==null?void 0:d._map)||null},getLayers(d=!1,m=!0,_=!0,C=[]){let M=[];return d?this._layerGroup.getLayers().forEach(W=>{M.push(W),W instanceof L.LayerGroup&&C.indexOf(W._leaflet_id)===-1&&(C.push(W._leaflet_id),M=M.concat(W.pm.getLayers(!0,!0,!0,C)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(W=>!(W instanceof L.LayerGroup))),m&&(M=M.filter(W=>!!W.pm),M=M.filter(W=>!W._pmTempLayer),M=M.filter(W=>!L.PM.optIn&&!W.options.pmIgnore||L.PM.optIn&&W.options.pmIgnore===!1)),M},setOptions(d,m=[]){m.length===0&&(this._layers=this.getLayers()),this.options=d,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?m.indexOf(_._leaflet_id)===-1&&(m.push(_._leaflet_id),_.pm.setOptions(d,m)):_.pm.setOptions(d))})}}),Kt.Marker=Kt.extend({_shape:"Marker",initialize(d){this._layer=d,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(d={draggable:!0}){if(L.Util.setOptions(this,d),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(d){let m=d.target;m.remove(),this._fireRemove(m),this._fireRemove(this._map,m)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)}});var Gt=l(ei()),vt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let d=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=d.filter((m,_,C)=>C.indexOf(m)===_)},_removeFromCache(d){let m=this.markerCache.indexOf(d);m>-1&&this.markerCache.splice(m,1)},renderLimits(d){this.markerCache.forEach(m=>{d.includes(m)?this._markerGroup.addLayer(m):this._markerGroup.removeLayer(m)})},applyLimitFilters({latlng:d={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let m=[...this._filterClosestMarkers(d)];this.renderLimits(m)},_filterClosestMarkers(d){let m=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?m:(m.sort((C,M)=>{let W=C._latlng.distanceTo(d),ee=M._latlng.distanceTo(d);return W-ee}),m.filter((C,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(d){this._preventRenderMarkers=!!d}},xt=vt;Kt.Line=Kt.extend({includes:[xt],_shape:"Line",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(d){return this.enabled()?this.disable():this.enable(d),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let d=this._map,m=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(d),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=C=>{if(Array.isArray(C[0]))return C.map(_,this);let M=C.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&C.map((W,ee)=>{let oe=this.isPolygon()?(ee+1)%C.length:ee+1;return this._createMiddleMarker(M[ee],M[oe])}),M};this._markers=_(m),this.filterMarkerGroup(),d.addLayer(this._markerGroup)},_createMarker(d){let m=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._pmTempLayer=!0,this.options.rotate?(m.on("dragstart",this._onRotateStart,this),m.on("drag",this._onRotate,this),m.on("dragend",this._onRotateEnd,this)):(m.on("click",this._onVertexClick,this),m.on("dragstart",this._onMarkerDragStart,this),m.on("move",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||m.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(m),m},_createMiddleMarker(d,m){if(!d||!m)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,d.getLatLng(),m.getLatLng()),C=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return C.setIcon(M),C.leftM=d,C.rightM=m,d._middleMarkerNext=C,m._middleMarkerPrev=C,C.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),C.on("movestart",this._onMiddleMarkerMoveStart,this),C},_onMiddleMarkerClick(d){let m=d.target;if(!this._vertexValidation("add",d))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMoveStart(d){let m=d.target;if(m.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",d)){m.on("move",this._onMiddleMarkerMovePrevent,this);return}m._dragging=!0,this._addMarker(m,m.leftM,m.rightM)},_onMiddleMarkerMovePrevent(d){let m=d.target;this._vertexValidationDrag(m)},_onMiddleMarkerMoveEnd(d){let m=d.target;if(m.off("move",this._onMiddleMarkerMovePrevent,this),m.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(m))return;let _=L.divIcon({className:"marker-icon"});m.setIcon(_),setTimeout(()=>{delete m._dragging},100)},_addMarker(d,m,_){d.off("movestart",this._onMiddleMarkerMoveStart,this),d.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let C=d.getLatLng(),M=this._layer._latlngs;delete d.leftM,delete d.rightM;let{indexPath:W,index:ee,parentPath:oe}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),be=W.length>1?(0,Gt.default)(M,oe):M,Ee=W.length>1?(0,Gt.default)(this._markers,oe):this._markers;be.splice(ee+1,0,C),Ee.splice(ee+1,0,d),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(m,d),this._createMiddleMarker(d,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(d,L.PM.Utils.findDeepMarkerIndex(this._markers,d).indexPath,C),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Ur(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(d){let m=this._layer,_,C;if(this.options.allowSelfIntersection?_=!1:(C=Ur(this._layer.toGeoJSON(15)),_=C.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;d?this._flashLayer():(m.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(C)}else m.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(d,m){d.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,m):_._icon&&(m&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(d){let m=d.target;if(!this._vertexValidation("remove",d))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:C,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!C)return;let ee=C.length>1?(0,Gt.default)(_,W):_,oe=C.length>1?(0,Gt.default)(this._markers,W):this._markers,be=W[W.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!be&&(ee.length<=2||this.isPolygon()&&ee.length<=3)){this._flashLayer();return}ee.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&ee.length<=2&&ee.splice(0,ee.length);let Ee=!1;if(ee.length<=1&&(ee.splice(0,ee.length),W.length>1&&C.length>1&&(_=Bl(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),ps(_)||this._layer.remove(),_=Bl(_),this._layer.setLatLngs(_),this._markers=Bl(this._markers),!Ee&&(oe=C.length>1?(0,Gt.default)(this._markers,W):this._markers,m._middleMarkerPrev&&(this._markerGroup.removeLayer(m._middleMarkerPrev),this._removeFromCache(m._middleMarkerPrev)),m._middleMarkerNext&&(this._markerGroup.removeLayer(m._middleMarkerNext),this._removeFromCache(m._middleMarkerNext)),this._markerGroup.removeLayer(m),this._removeFromCache(m),oe)){let rt,qe;if(this.isPolygon()?(rt=(M+1)%oe.length,qe=(M+(oe.length-1))%oe.length):(qe=M-1<0?void 0:M-1,rt=M+1>=oe.length?void 0:M+1),rt!==qe){let wt=oe[qe],It=oe[rt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(wt,It)}oe.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(m,C),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(d){let m=this._layer.getLatLngs(),_=d.getLatLng(),{indexPath:C,index:M,parentPath:W}=L.PM.Utils.findDeepMarkerIndex(this._markers,d);(C.length>1?(0,Gt.default)(m,W):m).splice(M,1,_),this._layer.setLatLngs(m)},_getNeighborMarkers(d){let{indexPath:m,index:_,parentPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,d),M=m.length>1?(0,Gt.default)(this._markers,C):this._markers,W=(_+1)%M.length,ee=(_+(M.length-1))%M.length,oe=M[ee],be=M[W];return{prevMarker:oe,nextMarker:be}},_checkMarkerAllowedToDrag(d){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([m.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),_.getLatLng()]),W=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ee=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return d.getLatLng()===this._markers[0][0].getLatLng()?ee+=1:d.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(W+=1),!(W<=2&&ee<=2)},_onMarkerDragStart(d){let m=d.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",d))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(d,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=oa(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(m):this._markerAllowedToDrag=null},_onMarkerDrag(d){let m=d.target;if(!this._vertexValidationDrag(m))return;let{indexPath:_,index:C,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(m);let W=_.length>1?(0,Gt.default)(this._markers,M):this._markers,ee=(C+1)%W.length,oe=(C+(W.length-1))%W.length,be=m.getLatLng(),Ee=W[oe].getLatLng(),rt=W[ee].getLatLng();if(m._middleMarkerNext){let qe=L.PM.Utils.calcMiddleLatLng(this._map,be,rt);m._middleMarkerNext.setLatLng(qe)}if(m._middleMarkerPrev){let qe=L.PM.Utils.calcMiddleLatLng(this._map,be,Ee);m._middleMarkerPrev.setLatLng(qe)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let m=d.target;if(!this._vertexValidationDragEnd(m))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m),C=!this.options.allowSelfIntersection&&this.hasSelfIntersection();C&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(C=!1);let M=!this.options.allowSelfIntersection&&C;if(this._fireMarkerDragEnd(d,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(d,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(d){let m=d.target;if(m._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireVertexClick(d,_)}}),Kt.Polygon=Kt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(d){let{prevMarker:m,nextMarker:_}=this._getNeighborMarkers(d),C=L.polyline([m.getLatLng(),d.getLatLng()]),M=L.polyline([d.getLatLng(),_.getLatLng()]),W=Io(this._layer.toGeoJSON(15),C.toGeoJSON(15)).features.length,ee=Io(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(W<=2&&ee<=2)}}),Kt.Rectangle=Kt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let d=this._map,m=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,d.addLayer(this._markerGroup),this._markers=[],this._markers[0]=m.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,C)=>{let M=this._cornerMarkers.find(W=>W._index===C);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(d,m){let _=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=d,_._index=m,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(d=>{d.on("dragstart",this._onMarkerDragStart,this),d.on("drag",this._onMarkerDrag,this),d.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||d.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(d){if(!this._vertexValidation("move",d))return;let m=d.target,_=this._cornerMarkers;m._oppositeCornerLatLng=_.find(M=>M._index===(m._index+2)%4).getLatLng(),m._snapped=!1;let{indexPath:C}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragStart(d,C)},_onMarkerDrag(d){let m=d.target;if(!this._vertexValidationDrag(m)||m._index===void 0)return;this._adjustRectangleForMarkerMove(m);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDrag(d,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(d){let m=d.target;if(!this._vertexValidationDragEnd(m))return;this._cornerMarkers.forEach(C=>{delete C._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,m);this._fireMarkerDragEnd(d,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(d){L.extend(d._origLatLng,d._latlng);let m=L.PM.Utils._getRotatedRectangle(d.getLatLng(),d._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(m),this._adjustAllMarkers(d),this._layer.redraw()},_adjustAllMarkers(d){let m=this._layer.getLatLngs()[0];if(m&&m.length!==4&&m.length>0)m.forEach((_,C)=>{this._cornerMarkers[C].setLatLng(_)}),this._cornerMarkers.slice(m.length).forEach(_=>{_.setLatLng(m[0])});else if(!m||!m.length)console.error("The layer has no LatLngs");else{let _=m.findIndex(C=>d.getLatLng().equals(C));_>-1?(this._cornerMarkers[(d._index+1)%4].setLatLng(m[(_+1)%4]),this._cornerMarkers[(d._index+2)%4].setLatLng(m[(_+2)%4]),this._cornerMarkers[(d._index+3)%4].setLatLng(m[(_+3)%4])):this._cornerMarkers.forEach(C=>{C.setLatLng(m[C._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Da(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let d=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(d[0],d[2],this.getAngle(),this._map||this)}}),Kt.CircleMarker=Kt.extend({_shape:"CircleMarker",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let d=this._map;this._helperLayers&&(this._helperLayers.removeFrom(d),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(d);let m=this._layer.getLatLng(),_=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._centerMarker=this._createCenterMarker(m),this._outerMarker=this._createOuterMarker(C),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(d,m){let _=this._map.project(d),C=L.point(_.x+m,_.y);return this._map.unproject(C)},_createHintLine(d,m){let _=d.getLatLng(),C=m.getLatLng();this._hintline=L.polyline([_,C],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(d){let m=this._createMarker(d);return this.options.draggable?(L.DomUtil.addClass(m._icon,"leaflet-pm-draggable"),m.on("move",this._moveCircle,this)):m.dragging.disable(),m},_createOuterMarker(d){let m=this._createMarker(d);return m.on("drag",this._resizeCircle,this),m},_createMarker(d){let m=new L.Marker(d,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(m,"vertexPane"),m._origLatLng=d,m._pmTempLayer=!0,m.on("dragstart",this._onMarkerDragStart,this),m.on("drag",this._onMarkerDrag,this),m.on("dragend",this._onMarkerDragEnd,this),m.on("click",this._onVertexClick,this),this._helperLayers.addLayer(m),m},_moveCircle(d){if(d.target._cancelDragEventChain)return;let m=this._centerMarker.getLatLng();this._layer.setLatLng(m);let _=this._layer._radius,C=this._getLatLngOnCircle(m,_);this._outerMarker._latlng=C,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let d=this._layer.getLatLng(),m=this._layer._radius,_=this._getLatLngOnCircle(d,m);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(d),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng();this._hintline.setLatLngs([d,m])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(d){this._vertexValidation("move",d)&&this._fireMarkerDragStart(d)},_onMarkerDrag(d){let m=d.target;m instanceof L.Marker&&!this._vertexValidationDrag(m)||this._fireMarkerDrag(d)},_onMarkerDragEnd(d){this._extedingMarkerDragEnd();let m=d.target;this._vertexValidationDragEnd(m)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(d))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let d=this._layer._map||this._map;if(d){let m=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),d,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(m);let C=d&&d.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!C).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!C),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?m=uu(this._map,d,m,this._getMinDistanceInMeter(d)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(m=uu(this._map,d,m,this._getMaxDistanceInMeter(d))),m},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let d=this._centerMarker.getLatLng(),m=this._outerMarker.getLatLng(),_=this._distanceCalculation(d,m);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(d,m){return this._map.project(d).distanceTo(this._map.project(m))},_getMinDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,d)},_getMaxDistanceInMeter(d){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,d)},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Kt.Circle=Kt.CircleMarker.extend({_shape:"Circle",initialize(d){this._layer=d,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(d){L.PM.Edit.CircleMarker.prototype.enable.call(this,d||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let d=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(d,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let d=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!d).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!d),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(d,m){return this._map.distance(d,m)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(d){d.target._dragging||this._fireVertexClick(d,void 0)}}),Kt.ImageOverlay=Kt.extend({_shape:"ImageOverlay",initialize(d){this._layer=d,this._enabled=!1},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},enabled(){return this._enabled},enable(d={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,d),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let d=this._layer.getBounds(),m=d.getNorthWest(),_=d.getNorthEast(),C=d.getSouthEast(),M=d.getSouthWest();return[m,_,C,M]}}),Kt.Text=Kt.extend({_shape:"Text",initialize(d){this._layer=d,this._enabled=!1},enable(d){if(L.Util.setOptions(this,d),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let d=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),d.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(d){this.enabled()?this.disable():this.enable(d)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let d=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,d.off("pm:drag",this._handleSnapping,this),d.on("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.on("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this),d.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let d=this._layer;d.off("pm:drag",this._handleSnapping,this),d.off("pm:dragend",this._cleanupSnapping,this),d.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let d=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,m=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${d}px`,this.textArea.style.width=`${m}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(d){d.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(d={}){let m=this._hasFocus;this._hasFocus=d.type==="focus",!m!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(d){d&&(this.textArea.value=d),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let m=this.options.className.split(" ");this.textArea.classList.add(...m)}let d=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(d),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(d=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),d===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(d){d.preventDefault()}});var nn=function(d,m,_,C,M,W){this._matrix=[d,m,_,C,M,W]};nn.init=()=>new L.PM.Matrix(1,0,0,1,0,0),nn.prototype={transform(d){return this._transform(d.clone())},_transform(d){let m=this._matrix,{x:_,y:C}=d;return d.x=m[0]*_+m[1]*C+m[4],d.y=m[2]*_+m[3]*C+m[5],d},untransform(d){let m=this._matrix;return new L.Point((d.x/m[0]-m[4])/m[0],(d.y/m[2]-m[5])/m[2])},clone(){let d=this._matrix;return new L.PM.Matrix(d[0],d[1],d[2],d[3],d[4],d[5])},translate(d){if(d===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let m,_;return typeof d=="number"?(m=d,_=d):(m=d.x,_=d.y),this._add(1,0,0,1,m,_)},scale(d,m){if(d===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,C;return m=m||L.point(0,0),typeof d=="number"?(_=d,C=d):(_=d.x,C=d.y),this._add(_,0,0,C,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},rotate(d,m){let _=Math.cos(d),C=Math.sin(d);return m=m||new L.Point(0,0),this._add(_,C,-C,_,m.x,m.y)._add(1,0,0,1,-m.x,-m.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(d,m,_,C,M,W){let ee=[[],[],[]],oe=this._matrix,be=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]],Ee=[[d,_,M],[m,C,W],[0,0,1]],rt;d&&d instanceof L.PM.Matrix&&(oe=d._matrix,Ee=[[oe[0],oe[2],oe[4]],[oe[1],oe[3],oe[5]],[0,0,1]]);for(let qe=0;qe<3;qe+=1)for(let wt=0;wt<3;wt+=1){rt=0;for(let It=0;It<3;It+=1)rt+=be[qe][It]*Ee[It][wt];ee[qe][wt]=rt}return this._matrix=[ee[0][0],ee[1][0],ee[0][1],ee[1][1],ee[0][2],ee[1][2]],this}};var fn=nn,on={calcMiddleLatLng(d,m,_){let C=d.project(m),M=d.project(_);return d.unproject(C._add(M)._divideBy(2))},findLayers(d){let m=[];return d.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&m.push(_)}),m=m.filter(_=>!!_.pm),m=m.filter(_=>!_._pmTempLayer),m=m.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),m},circleToPolygon(d,m=60,_=!0){let C=d.getLatLng(),M=d.getRadius(),W=Zi(C,M,m,0,_),ee=[];for(let oe=0;oe<W.length;oe+=1){let be=[W[oe].lat,W[oe].lng];ee.push(be)}return L.polygon(ee,d.options)},disablePopup(d){d.getPopup()&&(d._tempPopupCopy=d.getPopup(),d.unbindPopup())},enablePopup(d){d._tempPopupCopy&&(d.bindPopup(d._tempPopupCopy),delete d._tempPopupCopy)},_fireEvent(d,m,_,C=!1){d.fire(m,_,C);let{groups:M}=this.getAllParentGroups(d);M.forEach(W=>{W.fire(m,_,C)})},getAllParentGroups(d){let m=[],_=[],C=M=>{for(let W in M._eventParents)if(m.indexOf(W)===-1){m.push(W);let ee=M._eventParents[W];_.push(ee),C(ee)}};return!d._pmLastGroupFetch||!d._pmLastGroupFetch.time||new Date().getTime()-d._pmLastGroupFetch.time>1e3?(C(d),d._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:m},{groupIds:m,groups:_}):{groups:d._pmLastGroupFetch.groups,groupIds:d._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Zi,getTranslation:gr,findDeepCoordIndex(d,m,_=!0){let C,M=ee=>(oe,be)=>{let Ee=ee.concat(be);if(_){if(oe.lat&&oe.lat===m.lat&&oe.lng===m.lng)return C=Ee,!0}else if(oe.lat&&L.latLng(oe).equals(m))return C=Ee,!0;return Array.isArray(oe)&&oe.some(M(Ee))};d.some(M([]));let W={};return C&&(W={indexPath:C,index:C[C.length-1],parentPath:C.slice(0,C.length-1)}),W},findDeepMarkerIndex(d,m){let _,C=W=>(ee,oe)=>{let be=W.concat(oe);return ee._leaflet_id===m._leaflet_id?(_=be,!0):Array.isArray(ee)&&ee.some(C(be))};d.some(C([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(d,m){if(m&&m.length===2){let _=this.findDeepCoordIndex(d,m[0]),C=this.findDeepCoordIndex(d,m[1]),M=Math.max(_.index,C.index);return(_.index===0||C.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:C,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(d,m,_,C){let M=Xe(C,d),W=Xe(C,m),ee=_*Math.PI/180,oe=Math.cos(ee),be=Math.sin(ee),Ee=(W.x-M.x)*oe+(W.y-M.y)*be,rt=(W.y-M.y)*oe-(W.x-M.x)*be,qe=Ee*oe+M.x,wt=Ee*be+M.y,It=-rt*be+M.x,en=rt*oe+M.y,_n=mt(C,M),Pn=mt(C,{x:qe,y:wt}),br=mt(C,W),nt=mt(C,{x:It,y:en});return[_n,Pn,br,nt]},pxRadiusToMeterRadius(d,m,_){let C=m.project(_),M=L.point(C.x+d,C.y);return m.distance(m.unproject(M),_)}},Rn=on;L.PM=L.PM||{version:cr.version,Map:zs,Toolbar:Rl,Draw:gs,Edit:Kt,Utils:Rn,Matrix:fn,activeLang:"en",optIn:!1,initialize(d){this.addInitHooks(d)},setOptIn(d){this.optIn=!!d},addInitHooks(){function d(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(d);function m(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(m);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function C(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(C);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function W(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(W);function ee(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ee);function oe(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(oe);function be(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(be)},reInitLayer(d){d instanceof L.LayerGroup&&d.eachLayer(m=>{this.reInitLayer(m)}),d.pm||L.PM.optIn&&d.options.pmIgnore!==!1||d.options.pmIgnore||(d instanceof L.Map?d.pm=new L.PM.Map(d):d instanceof L.Marker?d.options.textMarker?(d.pm=new L.PM.Edit.Text(d),d.pm._initTextMarker(),d.pm._createTextMarker(!1)):d.pm=new L.PM.Edit.Marker(d):d instanceof L.Circle?d.pm=new L.PM.Edit.Circle(d):d instanceof L.CircleMarker?d.pm=new L.PM.Edit.CircleMarker(d):d instanceof L.Rectangle?d.pm=new L.PM.Edit.Rectangle(d):d instanceof L.Polygon?d.pm=new L.PM.Edit.Polygon(d):d instanceof L.Polyline?d.pm=new L.PM.Edit.Line(d):d instanceof L.LayerGroup?d.pm=new L.PM.Edit.LayerGroup(d):d instanceof L.ImageOverlay&&(d.pm=new L.PM.Edit.ImageOverlay(d)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(d){let m=this._map.mouseEventToLayerPoint(d),_,C;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(m)&&(!(d.type==="click"||d.type==="preclick")||!this._map._draggableMoved(_))&&(C=_);C&&(L.DomEvent.fakeStop(d),this._fireEvent([C],d))}}),L.PM.initialize()})();class ip extends Xn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Je(this,"properties");Je(this,"angleCache",new Map);Je(this,"lastCenter");Je(this,"lastCenterCosLat");Je(this,"_pendingNameUpdate",!1);Je(this,"_nameUpdateTimeout",null);An.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){An.measure("Circle.updateProperties",()=>{var a,l,c,h;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((h=this.options)==null?void 0:h.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){An.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return An.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return An.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return An.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return An.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Xn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return An.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return An.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){An.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const qv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},p5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=qv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${qv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Gl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Vt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function g5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const es=(t,e="m",n="")=>{let r,i;return e==="m"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},BU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),RU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},Wh=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function FU(){const t=Ct(null),e=Ct(null),n=Ct(null),r=Ct(null),i=Ct(""),s=Ct(null),o=Ct(!1),a=Ct(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(H=>H.remove()),document.querySelectorAll(".drawing-help-message").forEach(H=>H.remove())}),Zu(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(H,Z="Double-cliquez pour diter")=>{const me={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},fe=(ze,Ce)=>{var Ke;const ye=((Ke=t.value)==null?void 0:Ke.getZoom())||14,Ve=H.lat,Ye=g5(Ce.physicalSize,Ve,ye);return`<div class="text-container" style="width:${Ye}px;height:${Ye}px;transform:rotate(${Ce.rotation}deg)">
        <div class="text-annotation" style="font-size:${Ye*.2}px;color:${Ce.color};background-color:${qv(Ce.backgroundColor,Ce.backgroundOpacity)};border:${Ce.hasBorder?Ce.borderWidth+" solid "+qv(Ce.borderColor,Ce.borderOpacity):"none"};padding:${Ce.padding};border-radius:${Ce.borderRadius}">${ze}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},de=()=>{if(!t.value)return;const ze=J.getIcon(),Ce={html:fe(J.properties.text,J.properties.style),className:ze.options.className};J.setIcon(Vt.divIcon(Ce))},ce=Vt.divIcon({html:fe(Z,me),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),J=Vt.marker(H,{icon:ce,draggable:!1,pmIgnore:!0});J.properties={type:"text",text:Z,style:{...me}},t.value&&(t.value.on("zoomend",de),J.on("remove",()=>{var ze;(ze=t.value)==null||ze.off("zoomend",de)})),de();let Re=!1,De=!1,et=0,he=0;const Q=ze=>{if(!t.value)return;const Ce=ze.target;if(Ce.classList.contains("rotate")){Re=!0;const ye=J.getLatLng(),Ve=t.value.mouseEventToLatLng(ze);et=Math.atan2(Ve.lat-ye.lat,Ve.lng-ye.lng)*180/Math.PI,he=J.properties.style.rotation||0}else Ce.classList.contains("move")&&(De=!0);document.addEventListener("mousemove",se),document.addEventListener("mouseup",ue)},se=ze=>{if(!(!De||!t.value)){if(Re){const Ce=J.getLatLng(),ye=t.value.mouseEventToLatLng(ze),Ve=Math.atan2(ye.lat-Ce.lat,ye.lng-Ce.lng)*180/Math.PI,Ye=(he+(Ve-et))%360;J.properties.style.rotation=Ye;const Ke=J.getIcon(),_t={html:fe(J.properties.text,J.properties.style),className:Ke.options.className};J.setIcon(Vt.divIcon(_t))}else if(De){const Ce=BU(ze),ye=t.value.mouseEventToLatLng(Ce);J.setLatLng(ye)}}},ue=()=>{Re=!1,De=!1,document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",ue)};return J.on("add",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ye=>{ye.addEventListener("mousedown",Q)})}),J.on("remove",()=>{const ze=J.getElement();ze&&ze.querySelectorAll(".control-button").forEach(ye=>{ye.removeEventListener("mousedown",Q)})}),J.on("dblclick",ze=>{var _t;Vt.DomEvent.stopPropagation(ze);const Ce=(_t=J.getElement())==null?void 0:_t.querySelector(".text-annotation");if(!Ce)return;Ce.contentEditable="true",Ce.focus(),Ce.classList.add("editing");const ye=window.getSelection(),Ve=document.createRange();Ve.selectNodeContents(Ce),ye==null||ye.removeAllRanges(),ye==null||ye.addRange(Ve);const Ye=()=>{Ce.contentEditable="false",Ce.classList.remove("editing");const Ge=Ce.innerText.trim();if(Ge){J.properties.text=Ge;const ft=J.getIcon(),Ut={html:fe(Ge,J.properties.style),className:ft.options.className};J.setIcon(Vt.divIcon(Ut))}Ce.removeEventListener("blur",Ye),Ce.removeEventListener("keydown",Ke)},Ke=Ge=>{Ge.key==="Enter"&&!Ge.shiftKey&&(Ge.preventDefault(),Ye())};Ce.addEventListener("blur",Ye),Ce.addEventListener("keydown",Ke)}),J},c=(H,Z)=>{const me=Vt.DomUtil.create("div","measure-tooltip");if(me.innerHTML=Z,me.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(me),t.value){const fe=t.value.latLngToContainerPoint(H);me.style.left=`${fe.x+10}px`,me.style.top=`${fe.y-25}px`}return me},h=Wh((H,Z,me)=>{if(H&&(H.innerHTML=me,t.value)){const fe=t.value.latLngToContainerPoint(Z);H.style.left=`${fe.x+10}px`,H.style.top=`${fe.y-25}px`}},100),p=(H,Z,me)=>{H.on("mouseover",()=>{const fe=c(H.getLatLng(),me());H.measureDiv=fe}),H.on("mousemove",fe=>{H.measureDiv&&t.value&&h(H.measureDiv,fe.latlng,me())}),H.on("mouseout",()=>{H.measureDiv&&(H.measureDiv.remove(),H.measureDiv=void 0)})};let v=[];const g=()=>{var H;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(H=r.value)==null||H.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(Z=>Z.remove()),e.value&&e.value.getLayers().forEach(Z=>{Z instanceof Wa&&Z.clearHelperPoints()})},x=(H,Z="#2563EB")=>{const me=Vt.circleMarker(H,{radius:6,color:Z,fillColor:Z,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(me),me},E=(H,Z)=>{var fe,de,ce,J,Re,De;console.log("Input layer:",{type:Z,instanceof:{Circle:H instanceof Vt.Circle,Rectangle:H instanceof Vt.Rectangle,Polygon:H instanceof Vt.Polygon,Polyline:H instanceof Vt.Polyline,Line:H instanceof ua},options:H.options});const me={type:Z,style:H.options||{}};try{if(H instanceof Vt.Circle){const et=H.getRadius();me.radius=et,me.diameter=et*2,me.surface=Math.PI*Math.pow(et,2),me.perimeter=2*Math.PI*et,me.center=H.getLatLng()}else if(H instanceof Vt.Rectangle){const et=H.getBounds(),he=et.getNorthEast(),Q=et.getSouthWest(),se=mc([[Q.lng,Q.lat],[he.lng,Q.lat]]),ue=mc([[Q.lng,Q.lat],[Q.lng,he.lat]]),ze=Hh(se,{units:"meters"}),Ce=Hh(ue,{units:"meters"});me.width=ze,me.height=Ce,me.surface=ze*Ce,me.perimeter=2*(ze+Ce),me.dimensions={width:ze,height:Ce}}else if(H instanceof Vt.Polygon)try{const he=H.getLatLngs()[0].map(se=>[se.lng,se.lat]);he.push(he[0]);const Q=Wu([he]);me.surface=Rc(Q),me.perimeter=Hh(mc(he),{units:"meters"})}catch(et){console.error("Erreur lors du calcul des proprits du polygone",et)}else if(H instanceof Vt.Polyline&&!(H instanceof Vt.Polygon))try{const et=H.getLatLngs();let he=0;for(let Q=1;Q<et.length;Q++)he+=et[Q].distanceTo(et[Q-1]);me.length=he}catch(et){console.error("Erreur lors du calcul de la longueur de la ligne",et)}me.style={...me.style,color:((fe=H.options)==null?void 0:fe.color)||"#3388ff",weight:((de=H.options)==null?void 0:de.weight)||3,opacity:((ce=H.options)==null?void 0:ce.opacity)||1,fillColor:((J=H.options)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((Re=H.options)==null?void 0:Re.fillOpacity)||.2,dashArray:((De=H.options)==null?void 0:De.dashArray)||""}}catch(et){console.error("Error calculating shape properties:",et)}return me},k=(H,Z=2)=>{var J;if(!t.value){console.warn("Map is not available for text size update");return}const me=t.value.getZoom(),fe=H.getLatLng().lat,de=g5(Z,fe,me),ce=(J=H.getElement())==null?void 0:J.querySelector(".text-annotation");ce&&(H.properties.style.fontSize=`${de}px`,H.properties.physicalWidth=Z,H.properties.physicalHeight=Z,p5(ce,H.properties.style))},A=(H,Z,me)=>{const fe=Vt.map(H).setView(Z,me);t.value=fe,Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(fe);const de=new Vt.FeatureGroup;return de.addTo(fe),e.value=de,n.value=Vt.featureGroup().addTo(fe),r.value=Vt.featureGroup().addTo(fe),fe.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:de,snapLayers:[de,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),fe.on("pm:drawstart",ce=>{o.value=!0,ce.shape==="Circle"&&i.value==="Semicircle"&&(fe.getContainer().style.cursor="crosshair")}),fe.on("pm:drawend",()=>{o.value=!1,fe.getContainer().style.cursor="",s.value&&Gl("Cliquez sur la forme pour afficher les points de contrle")}),fe.on("pm:create",Ze),de.on("click",ce=>{var Re,De,et,he,Q,se,ue,ze,Ce,ye,Ve,Ye,Ke,_t,Ge;Vt.DomEvent.stopPropagation(ce);const J=ce.layer;if(J.name&&!((Re=J.properties)!=null&&Re.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(De=J.properties)!=null&&De.name&&!J.name&&(J.name=J.properties.name),console.log("[featureGroup click] tat du nom:",{directName:J.name,propertiesName:(et=J.properties)==null?void 0:et.name,fullProperties:J.properties}),(he=r.value)==null||he.clearLayers(),g(),s.value=J,J instanceof ip)j(J);else if(J instanceof Vt.Circle){console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(J,"name"),directName:J.name,propertiesName:(Q=J.properties)==null?void 0:Q.name,styleNameBeforeTransfer:(ue=(se=J.properties)==null?void 0:se.style)==null?void 0:ue.name,nameIsEnumerable:Object.keys(J).includes("name"),allProperties:Object.keys(J.properties||{}),_dbId:J._dbId});const ft=J.name,Ut=(ze=J.properties)==null?void 0:ze.name,tn=(ye=(Ce=J.properties)==null?void 0:Ce.style)==null?void 0:ye.name,yn=J._dbId,Qe=new ip(J.getLatLng(),{...J.options,radius:J.getRadius()});J.properties?Qe.properties={...J.properties||{}}:Qe.updateProperties();const at=ft||Ut||tn;at&&(Qe.properties.name=at,Qe.properties.style||(Qe.properties.style={}),Qe.properties.style.name=at,Qe.name=at),yn&&(Qe._dbId=yn),console.log("[useMapDrawing] Cercle aprs conversion:",{name:Qe.name,propertiesName:Qe.properties.name,stylePropertyName:(Ve=Qe.properties.style)==null?void 0:Ve.name,allProperties:Object.keys(Qe.properties||{})}),(Ye=e.value)==null||Ye.removeLayer(J),(Ke=e.value)==null||Ke.addLayer(Qe),s.value=Qe,j(Qe)}else if(J instanceof Wa)K(J);else if(J instanceof Vt.Rectangle){const ft=new Wa(J.getBounds(),{...J.options});ft.updateProperties(),(_t=e.value)==null||_t.removeLayer(J),(Ge=e.value)==null||Ge.addLayer(ft),s.value=ft,K(ft)}else J instanceof Vt.Polygon?R(J):J instanceof ua||J instanceof Vt.Polyline?I(J):J instanceof Ad&&B(J)}),fe.on("pm:edit",ce=>{var Re,De,et;console.log("[pm:edit] Dbut",{layer:ce.layer,currentProperties:ce.layer.properties});const J=ce.layer;if(J){const he=((Re=J.properties)==null?void 0:Re.type)||"unknown";if(pe(J,he),console.log("[pm:edit] Aprs updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value}),J instanceof ip)j(J);else if(J instanceof Wa)K(J);else if(J instanceof Vt.Rectangle){const Q=new Wa(J.getBounds(),{...J.options});Q.updateProperties(),(De=e.value)==null||De.removeLayer(J),(et=e.value)==null||et.addLayer(Q),s.value=Q,K(Q)}else J instanceof Vt.Polygon?R(J):J instanceof ua?(J.updateProperties(),pe(J,"Line"),I(J)):J instanceof Vt.Polyline?I(J):J instanceof Ad&&(J.updateProperties(),B(J))}}),fe.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove()),Gl("Dplacez la forme  l'endroit souhait")}),fe.on("pm:dragend",ce=>{var Re,De,et;console.log("[pm:dragend] Dbut",{layer:ce.layer,currentProperties:ce.layer.properties});const J=ce.layer;if(J){const he=((Re=J.properties)==null?void 0:Re.type)||"unknown";if(J instanceof Vt.Rectangle&&!(J instanceof Wa)){const Q=new Wa(J.getBounds(),{...J.options});Q.updateProperties(),(De=e.value)==null||De.removeLayer(J),(et=e.value)==null||et.addLayer(Q),s.value=Q,K(Q)}else J instanceof ua?(J.updateProperties(),pe(J,"Line"),I(J)):pe(J,he);console.log("[pm:dragend] Aprs updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value})}setTimeout(()=>{Gl("Cliquez sur la forme pour afficher les points de contrle")},100)}),fe.on("pm:remove",()=>{var ce;(ce=document.querySelector(".drawing-help-message"))==null||ce.remove()}),fe.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove()),Gl("Utilisez les points de contrle pour modifier la forme")}),fe.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove())}),fe.on("zoomstart",()=>{s.value&&(g(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove()))}),fe},D=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const H=e.value.getBounds();if(H.isValid()){const Z={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(H,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=Z.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=Z.zoomAnimation,t.value.options.markerZoomAnimation=Z.markerZoomAnimation}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}catch(me){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",me)}},500)}}catch(H){if(console.warn("[useMapDrawing] Error adjusting view:",H),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(Z){console.error("[useMapDrawing] Erreur lors de la restauration aprs chec:",Z)}}},z=H=>{var me;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(fe=>fe.remove());try{const fe=t.value.pm;fe.globalEditModeEnabled()&&fe.disableGlobalEditMode(),fe.globalRemovalModeEnabled()&&fe.disableGlobalRemovalMode(),fe.disableDraw(),g(),(me=r.value)==null||me.clearLayers()}catch(fe){console.error("Error disabling modes:",fe)}if(window.dispatchEvent(new CustomEvent("tool:changed",{detail:{previousTool:i.value,newTool:H}})),i.value=H,!H){g();return}let Z=H;switch(H){case"Note":Z="GeoNote";break;case"Polygon":Z="Polygon";break;case"Line":Z="Line";break;case"ElevationLine":Z="ElevationLine";break;default:Z=H}H=Z,ie(),setTimeout(()=>{var fe,de,ce,J,Re,De,et,he,Q,se,ue,ze,Ce;try{switch(H){case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(fe=t.value)==null||fe.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(de=t.value)==null||de.off("pm:create"),(ce=t.value)==null||ce.on("pm:create",Ve=>{var Ye,Ke,_t;if(Ve.shape==="Polygon"&&Ve.layer){const Ge=Ve.layer.getLatLngs()[0];(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer);const ft=new uh(Ge,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(ft),s.value=ft,ft.updateProperties()),(_t=t.value)==null||_t.pm.disableDraw(),ie()}});break;case"Circle":e.value&&e.value.getLayers().filter(Ye=>Ye instanceof Wa).forEach(Ye=>{Ye.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Gl("Positionnez le centre du cercle. Points bleus : milieu des cts, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Gl("Cliquez et maintenez pour dessiner un rectangle, relchez pour terminer"),(J=t.value)==null||J.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Re=t.value)==null||Re.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Gl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(De=t.value)==null||De.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(et=t.value)==null||et.off("pm:create"),(he=t.value)==null||he.on("pm:create",Ve=>{var Ye,Ke,_t;if(Ve.shape==="Line"&&Ve.layer){const Ge=Ve.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer);const ft=new ua(Ge,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(ft),s.value=ft,ft.updateProperties()),(_t=t.value)==null||_t.pm.disableDraw(),ie()}});break;case"Text":if(Gl("Cliquez pour ajouter du texte, double-cliquez pour diter"),t.value){const Ve=Ye=>{if(!t.value||!e.value)return;const Ke=l(Ye.latlng);e.value.addLayer(Ke),s.value=Ke,t.value.off("click",Ve),z("")};t.value.on("click",Ve)}break;case"GeoNote":if(Gl("Cliquez pour ajouter une note golocalise, double-cliquez pour diter"),t.value){const Ve=async Ke=>{if(!t.value||!e.value)return null;try{const _t=kp(),Ge=new Ad(Ke,{color:"#3B82F6",name:"Note golocalise",description:"",columnId:"1"});e.value.addLayer(Ge),s.value=Ge,Ge.updateProperties();try{const ft=_t.currentMapId||void 0,Ut=await Ge.saveNote(ft);console.log(`[useMapDrawing] Note sauvegarde avec succs, ID backend: ${Ut}`);const tn=Ge._leaflet_id;return console.log(`[useMapDrawing] ID Leaflet: ${tn}, ID backend: ${Ut}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ge,leafletId:tn,backendId:Ut}})),Ge.openPopup(),Ge}catch(ft){return console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",ft),kd(async()=>{const{useNotificationStore:Ut}=await Promise.resolve().then(()=>JB);return{useNotificationStore:Ut}},void 0).then(({useNotificationStore:Ut})=>{Ut().error("Erreur lors de la cration de la note")}),null}}catch(_t){return console.error("[useMapDrawing] Erreur lors de la cration de la note:",_t),null}},Ye=async Ke=>{Vt.DomEvent.stopPropagation(Ke),Vt.DomEvent.preventDefault(Ke);const _t=await Ve(Ke.latlng);_t&&(t.value.off("click",Ye),e.value&&e.value.getLayers().forEach(Ge=>{if(Ge.off&&typeof Ge.off=="function")try{Ge.off("click")}catch(ft){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",ft)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:_t,leafletId:_t._leaflet_id}})))};if(t.value.on("click",Ye),e.value){const Ke=async Ge=>{Vt.DomEvent.stopPropagation(Ge),Vt.DomEvent.preventDefault(Ge),console.log("[useMapDrawing] Clic sur une forme existante en mode GeoNote");const ft=await Ve(Ge.latlng);return ft&&(t.value.off("click",Ye),e.value&&e.value.getLayers().forEach(Ut=>{if(Ut.off&&typeof Ut.off=="function")try{Ut.off("click")}catch(tn){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",tn)}}),z(""),window.dispatchEvent(new CustomEvent("geonote:select",{detail:{geoNote:ft,leafletId:ft._leaflet_id}}))),!1};e.value.getLayers().forEach(Ge=>{Ge.on("click",Ke)});const _t=()=>{e.value&&e.value.getLayers().forEach(Ge=>{if(Ge.off&&typeof Ge.off=="function")try{Ge.off("click")}catch(ft){console.warn("[useMapDrawing] Erreur lors du nettoyage des gestionnaires:",ft)}}),window.removeEventListener("tool:changed",_t),console.log("[useMapDrawing] Nettoyage des gestionnaires d'vnements pour les formes existantes")};window.addEventListener("tool:changed",_t)}}break;case"delete":Gl("Cliquez sur une forme pour la supprimer"),(Q=t.value)==null||Q.pm.enableGlobalRemovalMode();break;case"ElevationLine":Gl("Cliquez et maintenez pour tracer le profil altimtrique"),(se=t.value)==null||se.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(ue=t.value)==null||ue.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(ze=t.value)==null||ze.off("pm:create"),(Ce=t.value)==null||Ce.on("pm:create",async Ve=>{var Ye,Ke,_t;if(Ve.shape==="Line"&&Ve.layer){const Ge=Ve.layer.getLatLngs();(Ye=t.value)==null||Ye.removeLayer(Ve.layer),(Ke=e.value)!=null&&Ke.hasLayer(Ve.layer)&&e.value.removeLayer(Ve.layer),(_t=t.value)==null||_t.pm.disableDraw(),i.value="",ie()}});break}}catch(ye){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",ye)}},100)},Y=H=>{var me;if(!s.value)return;const Z=s.value;if(Z.properties=Z.properties||{},Z.properties.style=Z.properties.style||{},Z.properties.style={...Z.properties.style,...H},Z.properties.type==="text"){const fe=Z.properties._textLayer,de=(me=fe==null?void 0:fe.getElement())==null?void 0:me.querySelector(".text-annotation");de&&p5(de,Z.properties.style);const ce={color:H.borderColor||Z.properties.style.borderColor,weight:parseInt(H.borderWidth||Z.properties.style.borderWidth),opacity:H.borderOpacity??Z.properties.style.borderOpacity};"setStyle"in Z&&Z.setStyle(ce)}else if(Z.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprim selon les exigences");else{const fe={};H.fillColor&&(fe.fillColor=H.fillColor),H.fillOpacity!==void 0&&(fe.fillOpacity=H.fillOpacity),H.strokeColor&&(fe.color=H.strokeColor),H.strokeOpacity!==void 0&&(fe.opacity=H.strokeOpacity),H.strokeWidth!==void 0&&(fe.weight=H.strokeWidth),H.dashArray&&(fe.dashArray=H.dashArray),"setStyle"in Z&&Z.setStyle(fe)}},te=H=>{var J,Re,De,et,he;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:H,layerType:(J=s.value.properties)==null?void 0:J.type,beforeName:s.value.name,beforePropertiesName:(Re=s.value.properties)==null?void 0:Re.name,beforeCategory:(De=s.value.properties)==null?void 0:De.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const Z=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${Z}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const me=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise  jour: ${me}`);const fe=s.value.properties.category;console.log(`[useMapDrawing] Catgorie existante: ${fe}`);const de="category"in H&&H.category!==fe;if(Object.keys(H).forEach(Q=>{Q==="type"&&me?console.log(`[useMapDrawing] Prservation du type original: ${me}`):s.value.properties[Q]=H[Q],Q==="name"&&(console.log(`[useMapDrawing] Setting name "${H[Q]}" directly on layer`),s.value.name=H[Q]),Q==="category"&&console.log(`[useMapDrawing] Mise  jour de la catgorie: ${fe} -> ${H[Q]}`)}),me&&(s.value.properties.type=me),fe&&!de&&(console.log(`[useMapDrawing] Restauration de la catgorie originale: ${fe}`),s.value.properties.category=fe),s.value._dbId&&de){const Q=kp(),se=Q.elements.find(ue=>ue.id===s.value._dbId);if(se){console.log(`[useMapDrawing] Mise  jour de la catgorie dans le store: ${s.value.properties.category} pour l'lment ${s.value._dbId}`);const ue=se;ue.data||(ue.data={}),ue.data.category=s.value.properties.category,Q.$patch({unsavedChanges:!0})}}const ce=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:de}});if(window.dispatchEvent(ce),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(et=s.value.properties)==null?void 0:et.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((he=s.value.properties)==null?void 0:he.type)==="Circle"){const Q=s.value,se=Q.getRadius();Q.properties.radius=se,Q.properties.diameter=se*2,Q.properties.surface=Math.PI*se*se,Q.properties.perimeter=2*Math.PI*se,H.name&&(console.log(`[useMapDrawing] Ensuring circle name "${H.name}" is set in multiple places`),Q.properties.name=H.name,Q.properties.style.name=H.name,Q.name=H.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Q.name,circlePropertiesName:Q.properties.name,nameIsEnumerable:Object.keys(Q).includes("name"),propertiesNameIsEnumerable:Object.keys(Q.properties).includes("name")}))}},ge=H=>{console.log("[forceShapeUpdate] Dbut",{currentProperties:H.properties,selectedShapeRef:s.value}),s.value=null,da(()=>{s.value=H,console.log("[forceShapeUpdate] Aprs mise  jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(H,Z)=>{console.log("[updateLayerProperties] Dbut",{layer:H,shapeType:Z,currentProperties:H.properties}),RU((fe,de)=>{const ce=E(fe,de);console.log("[updateLayerProperties] Nouvelles proprits calcules",{newProperties:ce}),fe.properties={...ce},ge(fe),fe.fire("properties:updated",{shape:fe,properties:fe.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:fe.properties,selectedShape:s.value})},100)(H,Z)},N=(H,Z)=>Vt.latLng((H.lat+Z.lat)/2,(H.lng+Z.lng)/2),j=H=>{if(!t.value||!e.value)return;g();const Z=H.getLatLng(),me=H.getRadius(),fe=x(Z,"#059669");v.push(fe),p(fe,H,()=>[es(me,"m","Rayon"),es(me*2,"m","Diamtre"),es(Math.PI*Math.pow(me,2),"m","Surface")].join("<br>"));const de=[],ce=[0,45,90,135,180,225,270,315];ce.forEach(J=>{const Re=H.calculatePointOnCircle(J),De=x(Re,"#2563EB");de.push(De),v.push(De),p(De,H,()=>es(me,"m","Rayon")),De.on("mousedown",et=>{if(!t.value)return;Vt.DomEvent.stopPropagation(et),t.value.dragging.disable();let he=!0;const Q=ue=>{he&&(H.resizeFromControlPoint(ue.latlng),de.forEach((ze,Ce)=>{const ye=H.calculatePointOnCircle(ce[Ce]);ze.setLatLng(ye)}),fe.setLatLng(H.getLatLng()),De.measureDiv&&(De.measureDiv.innerHTML=es(H.getRadius(),"m","Rayon")))},se=()=>{he=!1,t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",se),t.value.dragging.enable(),H.updateProperties(),s.value=null,da(()=>{s.value=H}),pe(H,"Circle"))};t.value.on("mousemove",Q),document.addEventListener("mouseup",se)})}),fe.on("mousedown",J=>{if(!t.value)return;Vt.DomEvent.stopPropagation(J),t.value.dragging.disable();let Re=!0;const De=H.getLatLng(),et=J.latlng,he=se=>{if(!Re)return;const ue=se.latlng.lng-et.lng,ze=se.latlng.lat-et.lat,Ce=Vt.latLng(De.lat+ze,De.lng+ue);Vt.Circle.prototype.setLatLng.call(H,Ce),fe.setLatLng(Ce),de.forEach((ye,Ve)=>{const Ye=H.calculatePointOnCircle(ce[Ve]);ye.setLatLng(Ye)}),fe.measureDiv&&(fe.measureDiv.innerHTML=[es(H.getRadius(),"m","Rayon"),es(H.getRadius()*2,"m","Diamtre"),es(Math.PI*Math.pow(H.getRadius(),2),"m","Surface")].join("<br>"))},Q=()=>{Re=!1,t.value&&(t.value.off("mousemove",he),document.removeEventListener("mouseup",Q),t.value.dragging.enable(),H.updateProperties(),s.value=null,da(()=>{s.value=H}),pe(H,"Circle"))};t.value.on("mousemove",he),document.addEventListener("mouseup",Q)}),H.on("circle:resized",()=>{pe(H,"Circle")}),s.value=H},K=H=>{var he;if(!t.value||!e.value)return;if(!(H instanceof Wa)){console.warn("La couche n'est pas une instance de Rectangle");return}const Z=H;g();const me=Z.getCenter(),fe=Z.getRotatedCorners(),de=Z.getMidPoints(),ce=x(me,"#059669");v.push(ce),p(ce,Z,()=>{const{width:Q,height:se}=Z.getDimensions(),ue=Q*se,ze=Z.getRotation();return[es(Q,"m","Largeur"),es(se,"m","Hauteur"),es(ue,"m","Surface"),`Rotation: ${ze.toFixed(1)}`].join("<br>")});const J=x(Vt.latLng(me.lat+(fe[0].lat-me.lat)*1.2,me.lng+(fe[0].lng-me.lng)*1.2),"#F97316");v.push(J);const Re=Vt.polyline([me,J.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(he=n.value)==null||he.addLayer(Re);const De=fe.map(Q=>{const se=x(Q,"#DC2626");return v.push(se),p(se,Z,()=>{const{width:ue,height:ze}=Z.getDimensions();return[es(ue,"m","Largeur"),es(ze,"m","Hauteur")].join("<br>")}),se}),et=de.map((Q,se)=>{const ue=x(Q,"#2b6451");return v.push(ue),p(ue,Z,()=>{const{width:ze,height:Ce}=Z.getDimensions(),ye=se%2===0?ze:Ce;return[es(ye,"m","Longueur du ct"),es(ye/2,"m","Distance au coin")].join("<br>")}),ue});ce.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let se=!0;const ue=Ce=>{if(!se)return;Z.moveFromCenter(Ce.latlng);const ye=Z.getRotatedCorners(),Ve=Z.getMidPoints();De.forEach((Ke,_t)=>Ke.setLatLng(ye[_t])),et.forEach((Ke,_t)=>Ke.setLatLng(Ve[_t])),ce.setLatLng(Ce.latlng);const Ye=Vt.latLng(Ce.latlng.lat+(ye[0].lat-Ce.latlng.lat)*1.2,Ce.latlng.lng+(ye[0].lng-Ce.latlng.lng)*1.2);J.setLatLng(Ye),Re.setLatLngs([Ce.latlng,Ye])},ze=()=>{se=!1,t.value&&(t.value.off("mousemove",ue),document.removeEventListener("mouseup",ze),t.value.dragging.enable(),Z.updateProperties(),s.value=null,da(()=>{s.value=Z}))};t.value.on("mousemove",ue),document.addEventListener("mouseup",ze)}),J.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let se=!1;const ue=Q.latlng,ze=Z.getRotation(),Ce=Z.getCenter(),ye=ue.lng-Ce.lng,Ve=ue.lat-Ce.lat,Ye=Math.atan2(Ve,ye)*180/Math.PI;v.forEach(Ge=>{Ge!==J&&(Ge.setStyle({opacity:0,fillOpacity:0}),Ge.measureDiv&&(Ge.measureDiv.style.display="none"))});const Ke=Wh(Ge=>{se||(se=!0);const ft=Ge.latlng.lng-Ce.lng,Ut=Ge.latlng.lat-Ce.lat;let yn=Math.atan2(Ut,ft)*180/Math.PI-Ye,Qe=(ze+yn)%360;Qe<0&&(Qe+=360),Z.setRotation(Qe,!1),J.setLatLng(Ge.latlng),Re.setLatLngs([Ce,Ge.latlng])},16),_t=()=>{t.value&&(t.value.off("mousemove",Ke),document.removeEventListener("mouseup",_t),t.value.dragging.enable(),se&&Z.finalizeRotation(),s.value=null,da(()=>{s.value=Z,g(),K(Z)}))};t.value.on("mousemove",Ke),document.addEventListener("mouseup",_t)}),Z.on("coordinates:updated",Q=>{const{corners:se,center:ue}=Q,ze=Z.getMidPoints();De.forEach((ye,Ve)=>ye.setLatLng(se[Ve])),et.forEach((ye,Ve)=>ye.setLatLng(ze[Ve])),ce.setLatLng(ue);const Ce=Vt.latLng(ue.lat+(se[0].lat-ue.lat)*1.2,ue.lng+(se[0].lng-ue.lng)*1.2);J.setLatLng(Ce),Re.setLatLngs([ue,Ce])})},I=H=>{if(!t.value||!e.value)return;g();const Z=H.getLatLngs();if(!Z||Z.length===0){console.warn("Pas de points pour la ligne");return}let me=null;if(H instanceof ua){const fe=H.getCenter();me=x(fe,"#059669"),v.push(me),p(me,H,()=>{const de=H.getLength()||0;return es(de,"m","Longueur totale")}),me.on("mousedown",de=>{if(!t.value)return;Vt.DomEvent.stopPropagation(de),t.value.dragging.disable();let ce=!0;const J=H.getLatLngs().map(Q=>Vt.latLng(Q.lat,Q.lng)),Re=de.latlng;H instanceof ua&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((Q,se)=>{se>0&&(Q.setStyle({opacity:0,fillOpacity:0}),Q.measureDiv&&(Q.measureDiv.style.display="none"))});const et=Wh(Q=>{if(!ce)return;const se=Q.latlng.lng-Re.lng,ue=Q.latlng.lat-Re.lat,ze=J.map(Ce=>Vt.latLng(Ce.lat+ue,Ce.lng+se));Vt.Polyline.prototype.setLatLngs.call(H,ze),me==null||me.setLatLng(Q.latlng)},16),he=()=>{if(ce=!1,!!t.value){if(t.value.off("mousemove",et),document.removeEventListener("mouseup",he),t.value.dragging.enable(),H instanceof ua){const Q=()=>{g(),I(H)};H.on("move:end",Q),H.on("vertex:moved",Q),H.on("latlngs:updated",Q),H.on("properties:updated",Q),H.updateProperties(),pe(H,"Line")}g(),I(H)}};t.value.on("mousemove",et),document.addEventListener("mouseup",he)})}if(Z.forEach((fe,de)=>{const ce=x(fe,"#DC2626");v.push(ce),p(ce,H,()=>{if(H instanceof ua){const J=H.getLength()||0,Re=H.getLengthToVertex(de);return[es(Re,"m","Distance depuis le dbut"),es(J,"m","Longueur totale")].join("<br>")}return""}),ce.on("mousedown",J=>{if(!t.value)return;Vt.DomEvent.stopPropagation(J),t.value.dragging.disable();let Re=!0;H instanceof ua&&(H.off("move:end"),H.off("vertex:moved"),H.off("latlngs:updated"),H.off("properties:updated")),v.forEach((he,Q)=>{Q!==de+1&&(he.setStyle({opacity:0,fillOpacity:0}),he.measureDiv&&(he.measureDiv.style.display="none"))});const De=Wh(he=>{if(!Re)return;const Q=H.getLatLngs();Q[de]=he.latlng,Vt.Polyline.prototype.setLatLngs.call(H,Q),ce.setLatLng(he.latlng)},16),et=()=>{if(Re=!1,!!t.value){if(t.value.off("mousemove",De),document.removeEventListener("mouseup",et),t.value.dragging.enable(),H instanceof ua){const he=()=>{g(),I(H)};H.on("move:end",he),H.on("vertex:moved",he),H.on("latlngs:updated",he),H.on("properties:updated",he),H.updateProperties(),pe(H,"Line")}g(),I(H)}};t.value.on("mousemove",De),document.addEventListener("mouseup",et)})}),Z.length>=2)for(let fe=0;fe<Z.length-1;fe++){const de=Z[fe],ce=Z[fe+1],J=Vt.latLng((de.lat+ce.lat)/2,(de.lng+ce.lng)/2),Re=x(J,"#2b6451");v.push(Re),p(Re,H,()=>{if(H instanceof ua){const De=H.getSegmentLengthAt(fe),et=H.getLength()||0,he=H.getLengthToVertex(fe)+De/2;return[es(De,"m","Longueur du segment"),es(De/2,"m","Demi-segment"),es(he,"m","Distance depuis le dbut"),es(et,"m","Longueur totale")].join("<br>")}return""})}if(H instanceof ua){const fe=()=>{g(),I(H)};H.on("move:start",()=>{v.forEach((de,ce)=>{ce>0&&(de.setStyle({opacity:0,fillOpacity:0}),de.measureDiv&&(de.measureDiv.style.display="none"))})}),H.on("move:end",fe),H.on("vertex:moved",fe),H.on("latlngs:updated",fe),H.on("properties:updated",fe),v.cleanup=()=>{H.off("move:start",()=>{}),H.off("move:end",fe),H.off("vertex:moved",fe),H.off("latlngs:updated",fe),H.off("properties:updated",fe)}}},R=H=>{if(!t.value||!e.value)return;g();const Z=H.getLatLngs()[0],me=Z.map(et=>[et.lng,et.lat]);me.push(me[0]);const fe=Wu([me]),de=Rc(fe),ce=Z.reduce((et,he,Q)=>{const se=Z[(Q+1)%Z.length];return et+he.distanceTo(se)},0);let J;if(typeof H.getCenter=="function")try{J=H.getCenter()}catch(et){console.warn("Erreur lors de la rcupration du centre du polygone via getCenter(), utilisation de la mthode alternative",et);const he=Ug(fe);J=Vt.latLng(he.geometry.coordinates[1],he.geometry.coordinates[0])}else{const et=Ug(fe);J=Vt.latLng(et.geometry.coordinates[1],et.geometry.coordinates[0])}const Re=x(J,"#059669");v.push(Re),p(Re,H,()=>[es(ce,"m","Primtre"),es(de,"m","Surface")].join("<br>")),Re.on("mousedown",et=>{if(!t.value)return;Vt.DomEvent.stopPropagation(et),t.value.dragging.disable();let he=!0;const Q=et.latlng,se=[...Z];v.forEach((ye,Ve)=>{Ve>0&&ye.setStyle({opacity:0,fillOpacity:0})});const ue=Wh(ye=>{if(!he)return;const Ve=ye.latlng.lng-Q.lng,Ye=ye.latlng.lat-Q.lat,Ke=se.map(_t=>Vt.latLng(_t.lat+Ye,_t.lng+Ve));Vt.Polygon.prototype.setLatLngs.call(H,[Ke]),Re.setLatLng(ye.latlng)},16),ze=ye=>{he&&ue(ye)},Ce=()=>{if(he=!1,!!t.value){if(t.value.off("mousemove",ze),document.removeEventListener("mouseup",Ce),t.value.dragging.enable(),H.properties){const ye=H.getLatLngs()[0],Ve=ye.map(Ke=>[Ke.lng,Ke.lat]);Ve.push(Ve[0]);const Ye=Wu([Ve]);H.properties.area=Rc(Ye),H.properties.perimeter=ye.reduce((Ke,_t,Ge)=>{const ft=ye[(Ge+1)%ye.length];return Ke+_t.distanceTo(ft)},0),H.properties.surface=H.properties.area}g(),R(H),s.value=null,da(()=>{s.value=H})}};t.value.on("mousemove",ze),document.addEventListener("mouseup",Ce)}),Z.forEach((et,he)=>{const Q=x(et,"#DC2626");v.push(Q),p(Q,H,()=>{const se=Z[(he-1+Z.length)%Z.length],ue=Z[(he+1)%Z.length],ze=et.distanceTo(se),Ce=et.distanceTo(ue);return[es(ze,"m","Distance au point prcdent"),es(Ce,"m","Distance au point suivant"),es(ce,"m","Primtre total"),es(de,"m","Surface")].join("<br>")}),Q.on("mousedown",se=>{if(Vt.DomEvent.stopPropagation(se),!t.value)return;t.value.dragging.disable();let ue=!0;Re&&(Re.setStyle({opacity:0,fillOpacity:0}),Re.measureDiv&&(Re.measureDiv.style.display="none"));const ze=Wh(Ve=>{if(!ue)return;Z[he]=Ve.latlng,Vt.Polygon.prototype.setLatLngs.call(H,[Z]),Q.setLatLng(Ve.latlng);const Ye=v.slice(Z.length+1),Ke=(he-1+Z.length)%Z.length,_t=Ye[Ke];if(_t){const ft=Z[Ke],Ut=Z[he],tn=Vt.latLng((ft.lat+Ut.lat)/2,(ft.lng+Ut.lng)/2);_t.setLatLng(tn)}const Ge=Ye[he];if(Ge){const ft=Z[he],Ut=Z[(he+1)%Z.length],tn=Vt.latLng((ft.lat+Ut.lat)/2,(ft.lng+Ut.lng)/2);Ge.setLatLng(tn)}},16),Ce=Ve=>{ue&&ze(Ve)},ye=()=>{if(ue=!1,!!t.value){if(t.value.off("mousemove",Ce),document.removeEventListener("mouseup",ye),t.value.dragging.enable(),H.properties){const Ve=H.getLatLngs()[0].map(Ke=>[Ke.lng,Ke.lat]);Ve.push(Ve[0]);const Ye=Wu([Ve]);H.properties.area=Rc(Ye),H.properties.perimeter=Z.reduce((Ke,_t,Ge)=>{const ft=Z[(Ge+1)%Z.length];return Ke+_t.distanceTo(ft)},0),H.properties.surface=H.properties.area}g(),R(H),s.value=null,da(()=>{s.value=H})}};t.value.on("mousemove",Ce),document.addEventListener("mouseup",ye)})}),(()=>{const et=H.getLatLngs()[0];v.slice(et.length+1).forEach(Q=>{n.value&&n.value.removeLayer(Q)}),v=v.slice(0,et.length+1);const he=new Array(et.length);for(let Q=0;Q<et.length;Q++){const se=et[Q],ue=et[(Q+1)%et.length];he[Q]=N(se,ue)}he.forEach((Q,se)=>{const ue=x(Q,"#2b6451");v.push(ue),p(ue,H,()=>{const ze=et[se],Ce=et[(se+1)%et.length],ye=ze.distanceTo(Ce);return[es(ye,"m","Longueur du segment"),es(ce,"m","Primtre total"),es(de,"m","Surface")].join("<br>")}),ue.on("mousedown",ze=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ze),t.value.dragging.disable();let Ce=!0;const ye=se;Re&&(Re.setStyle({opacity:0,fillOpacity:0}),Re.measureDiv&&(Re.measureDiv.style.display="none"));const Ve=[...H.getLatLngs()[0]];Ve.splice((ye+1)%Ve.length,0,Q),H.setLatLngs([Ve]),g(),R(H);const Ye=ye+1,Ke=1+Ye,_t=Ye<v.length-1?v[Ke]:null;if(_t){const Ge=Ut=>{if(!Ce)return;const tn=H.getLatLngs()[0];tn[Ye]=Ut.latlng,H.setLatLngs([tn]),_t.setLatLng(Ut.latlng);const yn=v.slice(1+tn.length),Qe=(Ye-1+tn.length)%tn.length,at=Ye;if(yn[Qe]){const it=tn[Qe],$t=tn[Ye],Zt=Vt.latLng((it.lat+$t.lat)/2,(it.lng+$t.lng)/2);yn[Qe].setLatLng(Zt)}if(yn[at]){const it=tn[Ye],$t=tn[(Ye+1)%tn.length],Zt=Vt.latLng((it.lat+$t.lat)/2,(it.lng+$t.lng)/2);yn[at].setLatLng(Zt)}},ft=()=>{if(Ce=!1,!!t.value){if(t.value.off("mousemove",Ge),document.removeEventListener("mouseup",ft),t.value.dragging.enable(),H.properties){const Ut=H.getLatLngs()[0].map(yn=>[yn.lng,yn.lat]);Ut.push(Ut[0]);const tn=Wu([Ut]);H.properties.area=Rc(tn),H.properties.perimeter=H.getLatLngs()[0].reduce((yn,Qe,at,it)=>{const $t=it[(at+1)%it.length];return yn+Qe.distanceTo($t)},0)}g(),R(H),s.value=null,da(()=>{s.value=H})}};t.value.on("mousemove",Ge),document.addEventListener("mouseup",ft)}else t.value.dragging.enable(),g(),R(H)})})})()},B=H=>{if(!t.value||!e.value)return;g();const Z=H.getLatLng(),me=x(Z,"#059669");v.push(me),p(me,H,()=>`Position: ${Z.lat.toFixed(6)}, ${Z.lng.toFixed(6)}`),me.on("mousedown",fe=>{if(!t.value)return;Vt.DomEvent.stopPropagation(fe),t.value.dragging.disable(),H.startMoving();let de=!0;const J=Wh(De=>{de&&(me.setLatLng(De.latlng),H.setLatLng(De.latlng))},16),Re=()=>{t.value&&(t.value.off("mousemove",J),document.removeEventListener("mouseup",Re),t.value.dragging.enable(),de=!1,H.finishMoving(),H.updateProperties(),s.value=null,da(()=>{s.value=H,g(),B(H)}))};t.value.on("mousemove",J),document.addEventListener("mouseup",Re)}),s.value=H},$=H=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Gnration des points temporaires pour",{layerType:H.constructor.name,properties:H.properties}),r.value.clearLayers();try{if(H instanceof Wa)H.generateHelperPoints(t.value);else if(H instanceof ip){if("getLatLng"in H&&typeof H.getLatLng=="function"){const Z=H.getLatLng();if(Z){const me=Vt.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}}else if(H instanceof Ad){const Z=H.getLatLng();if(Z){const me=Vt.circleMarker(Z,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(me)}}else if(H instanceof uh||H instanceof Vt.Polygon){let Z=[];if("getLatLngs"in H){const fe=H.getLatLngs();if(Array.isArray(fe)&&fe.length>0){const de=fe[0];Array.isArray(de)?Z=de:de instanceof Vt.LatLng&&(Z=fe)}}let me=null;if(H instanceof uh&&typeof H.getCenter=="function")me=H.getCenter();else if(Z.length>0){const fe=Z.map(J=>[J.lng,J.lat]);fe.push(fe[0]);const de=Wu([fe]),ce=Ug(de);me=Vt.latLng(ce.geometry.coordinates[1],ce.geometry.coordinates[0])}if(me){const fe=Vt.circleMarker(me,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(fe)}Z.forEach(fe=>{if(fe){const de=Vt.circleMarker(fe,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(de)}});for(let fe=0;fe<Z.length;fe++){const de=Z[fe],ce=Z[(fe+1)%Z.length];if(de&&ce){const J=Vt.latLng((de.lat+ce.lat)/2,(de.lng+ce.lng)/2),Re=Vt.circleMarker(J,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Re)}}}console.log("[generateTempControlPoints] Points temporaires gnrs",{count:r.value.getLayers().length})}catch(Z){console.error("[generateTempControlPoints] Erreur lors de la gnration des points temporaires:",Z)}}},U=H=>{console.log("Nombre total de couches:",H.length);const Z=H.filter(J=>{var et;if(!J)return!1;let Re=0,De={width:0,height:0};if(J instanceof Vt.Circle){Re=Math.PI*Math.pow(J.getRadius(),2);const he=J.getRadius();console.log(`
Forme dtecte: Circle`),console.log(`- Surface propre: ${Re.toFixed(2)} m`),console.log(`- Rayon: ${he.toFixed(2)} m`),console.log("- Angle: Cercle complet (360)")}else if(J instanceof Wa||J instanceof Vt.Rectangle){const he=J.getBounds(),Q=he.getSouthWest(),se=he.getNorthEast(),ue=mc([[Q.lng,Q.lat],[se.lng,Q.lat]]),ze=mc([[Q.lng,Q.lat],[Q.lng,se.lat]]);De.width=Hh(ue,{units:"meters"}),De.height=Hh(ze,{units:"meters"}),Re=De.width*De.height,console.log(`
Forme dtecte: Rectangle`),console.log(`- Surface propre: ${Re.toFixed(2)} m`),console.log(`- Largeur: ${De.width.toFixed(2)} m`),console.log(`- Hauteur: ${De.height.toFixed(2)} m`)}else if(((et=J.properties)==null?void 0:et.type)==="Semicircle"){const he=J.getStartAngle(),Q=J.getStopAngle(),se=(Q-he+360)%360,ue=J.getRadius();Re=Math.PI*Math.pow(ue,2)*se/360,console.log(`
Forme dtecte: Semicircle`),console.log(`- Surface propre: ${Re.toFixed(2)} m`),console.log(`- Rayon: ${ue.toFixed(2)} m`),console.log(`- Angle de dbut: ${he.toFixed(2)}`),console.log(`- Angle de fin: ${Q.toFixed(2)}`),console.log(`- Angle d'ouverture: ${se.toFixed(2)}`)}return Re>0});if(Z.length===0)return 0;const me=new Set,fe=[];for(const J of Z)if(!me.has(J)){const Re=X(Z,J);Re.length>0&&(fe.push(Re),Re.forEach(De=>me.add(De)))}console.log(`
Nombre de groupes de formes connectes: ${fe.length}`);const de=fe.map((J,Re)=>{console.log(`
Calcul pour le groupe ${Re+1} (${J.length} formes):`);const De=J.map(ue=>{var ze,Ce,ye;try{let Ve;if(ue instanceof Vt.Circle){const Ye=ue.getLatLng(),Ke=ue.getRadius();Ve=Yj([Ye.lng,Ye.lat],Ke/1e3,{units:"kilometers",steps:256});const _t=Rc(Ve),Ge=((ze=ue.properties)==null?void 0:ze.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${Ke.toFixed(2)}m`),console.log(`- Surface proprit: ${Ge.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${_t.toFixed(2)}m`),Ve}else if(ue instanceof Wa||ue instanceof Vt.Rectangle){const Ye=ue.getBounds(),Ke=Ye.getSouthWest(),_t=Ye.getNorthEast(),Ge=Vt.latLng(_t.lat,Ke.lng),ft=Vt.latLng(Ke.lat,_t.lng),Ut=[[Ke.lng,Ke.lat],[ft.lng,ft.lat],[_t.lng,_t.lat],[Ge.lng,Ge.lat],[Ke.lng,Ke.lat]];Ve=Wu([Ut]);const tn=Rc(Ve),yn=mc([[Ke.lng,Ke.lat],[_t.lng,Ke.lat]]),Qe=mc([[Ke.lng,Ke.lat],[Ke.lng,_t.lat]]),at=Hh(yn,{units:"meters"}),it=Hh(Qe,{units:"meters"}),$t=at*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${at.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface thorique: ${$t.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs($t-tn).toFixed(2)}m (${(Math.abs($t-tn)/$t*100).toFixed(2)}%)`),Ve}else if(((Ce=ue.properties)==null?void 0:Ce.type)==="Semicircle"){const Ye=ue.getCenter(),Ke=ue.getRadius(),_t=ue.getStartAngle(),Ge=ue.getStopAngle(),ft=[],Ut=64;ft.push([Ye.lng,Ye.lat]);for(let Qe=0;Qe<=Ut;Qe++){const it=(_t+(Ge-_t+360)%360*Qe/Ut)*Math.PI/180,$t=Ke*Math.cos(it),On=Ke*Math.sin(it)/111319.9,mn=$t/(111319.9*Math.cos(Ye.lat*Math.PI/180));ft.push([Ye.lng+mn,Ye.lat+On])}ft.push([Ye.lng,Ye.lat]),Ve=Wu([ft]);const tn=Rc(Ve),yn=((ye=ue.properties)==null?void 0:ye.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${Ke.toFixed(2)}m`),console.log(`- Surface proprit: ${yn.toFixed(2)}m`),console.log(`- Surface GeoJSON: ${tn.toFixed(2)}m`),console.log(`- Diffrence: ${Math.abs(yn-tn).toFixed(2)}m (${(Math.abs(yn-tn)/yn*100).toFixed(2)}%)`),Ve}return null}catch(Ve){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",Ve),null}}).filter(ue=>ue!==null);if(De.length===0)return 0;const et=De.map(ue=>{const ze=Rc(ue);return console.log(`Surface individuelle: ${ze.toFixed(2)}m`),ze});let he=0;for(let ue=0;ue<De.length;ue++)for(let ze=ue+1;ze<De.length;ze++)try{const Ce=Nj([De[ue],De[ze]]),ye=gz(Ce);if(ye){const Ve=Rc(ye);he+=Ve,console.log(`Intersection entre formes ${ue+1} et ${ze+1}: ${Ve.toFixed(2)}m`)}}catch(Ce){console.error(`Erreur lors du calcul d'intersection entre les formes ${ue+1} et ${ze+1}:`,Ce)}const Q=et.reduce((ue,ze)=>ue+ze,0),se=Q-he;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Re+1}:`),console.log(`- Surface totale (somme): ${Q.toFixed(2)}m`),console.log(`- Surface d'intersection: ${he.toFixed(2)}m`),console.log(`- Surface d'irrigation finale: ${se.toFixed(2)}m`),se}),ce=Math.max(...de);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${ce.toFixed(2)}m`),ce},V=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},ne=(H,Z)=>{if(!t.value)return;V();const me=Z?X(H,Z):H;if(a.value||(a.value=Vt.layerGroup().addTo(t.value)),me.forEach(fe=>{var ce;const de=(ce=fe.properties)==null?void 0:ce.type;if(de==="Circle"||de==="Semicircle"){const J=fe.getLatLng(),Re=fe.getRadius(),De=Vt.circle(J,{radius:Re,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),et=Vt.circle(J,{radius:Re,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(et),a.value.addLayer(De))}else if(de==="Rectangle"||de==="Polygon"){const J=fe.getLatLngs(),Re=Vt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),De=Vt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(De),a.value.addLayer(Re))}}),Z&&me.length>1&&t.value){const fe=Vt.latLngBounds([]);me.forEach(J=>{J.getBounds?fe.extend(J.getBounds()):J.getLatLng&&fe.extend(J.getLatLng())});const de=fe.getCenter(),ce=Vt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connect</div>").setLatLng(de);a.value&&a.value.addLayer(Vt.marker(de,{opacity:0,interactive:!1}).bindTooltip(ce).openTooltip())}},X=(H,Z)=>{if(!Z)return[];const me=new Set,fe=[Z],de=[Z];for(Z._leaflet_id!==void 0&&me.add(Z._leaflet_id);fe.length>0;){const ce=fe.shift();for(const J of H){if(J===ce||me.has(J._leaflet_id))continue;we(ce,J)&&(de.push(J),fe.push(J),me.add(J._leaflet_id))}}return de},we=(H,Z)=>{let me=null,fe=null;if(H.getBounds&&typeof H.getBounds=="function")me=H.getBounds();else if(H.getLatLng&&H.getRadius){const de=H.getLatLng(),ce=H.getRadius();me=Vt.latLngBounds([de.lat-ce/111e3,de.lng-ce/(111e3*Math.cos(de.lat*Math.PI/180))],[de.lat+ce/111e3,de.lng+ce/(111e3*Math.cos(de.lat*Math.PI/180))])}if(Z.getBounds&&typeof Z.getBounds=="function")fe=Z.getBounds();else if(Z.getLatLng&&Z.getRadius){const de=Z.getLatLng(),ce=Z.getRadius();fe=Vt.latLngBounds([de.lat-ce/111e3,de.lng-ce/(111e3*Math.cos(de.lat*Math.PI/180))],[de.lat+ce/111e3,de.lng+ce/(111e3*Math.cos(de.lat*Math.PI/180))])}return!(!me||!fe||!me.intersects(fe))},ve=(H,Z)=>{var fe;const me=X(H,Z);return me.length===1&&(fe=Z.properties)!=null&&fe.surface?Z.properties.surface:U(me)},Ze=H=>{var fe,de,ce,J,Re,De,et,he,Q;const Z=H.layer;(fe=e.value)==null||fe.addLayer(Z);let me="unknown";if(Z instanceof Vt.Circle?me=i.value==="Semicircle"?"Semicircle":"Circle":Z instanceof Vt.Rectangle?me="Rectangle":Z instanceof Vt.Polygon?me="Polygon":Z instanceof Vt.Polyline&&!(Z instanceof Vt.Polygon)&&(me="Line"),Z.properties=E(Z,me),Z.properties||(Z.properties={}),Z.properties.category||(Z.properties.category="forages"),Z.properties.accessLevel||(Z.properties.accessLevel="visitor"),Z._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=Z,console.log("[useMapDrawing] Input layer:",{type:me,instanceof:{Circle:Z instanceof Vt.Circle,Rectangle:Z instanceof Vt.Rectangle,Polygon:Z instanceof Vt.Polygon,Polyline:Z instanceof Vt.Polyline},options:Z.options,properties:Z.properties,_dbId:Z._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:Z,type:me,properties:Z.properties}})),Z.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:me,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&$(Z)}),Z.on("mouseout",()=>{var se;console.log("[mouseout] Sortie de la forme",{type:me,isSelected:s.value===Z}),(!s.value||s.value!==Z)&&((se=r.value)==null||se.clearLayers())}),me==="Semicircle")console.log("Conversion en demi-cercle dsactive selon les exigences");else if(me==="Circle"){(de=e.value)==null||de.removeLayer(Z);const se=new ip(Z.getLatLng(),{radius:Z.getRadius(),...Z.options});se.properties={...E(se,"Circle"),type:"Circle"},Object.defineProperty(se,"name",{value:se.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Cration du cercle personnalis:",{propertyDescriptor:Object.getOwnPropertyDescriptor(se,"name"),directName:se.name,propertiesName:se.properties.name,nameIsEnumerable:Object.keys(se).includes("name"),allProperties:Object.keys(se.properties),allKeys:Object.keys(se)}),(ce=e.value)==null||ce.addLayer(se),s.value=se,j(se)}else if(me==="Rectangle"){(J=e.value)==null||J.removeLayer(Z);const se=new Wa(Z.getBounds(),{...Z.options});se.updateProperties(),(Re=e.value)==null||Re.addLayer(se),s.value=se,K(se)}else if(Z instanceof Vt.Polygon){const se=Z.getLatLngs()[0],ue=new uh([se],{...Z.options});ue.updateProperties(),(De=e.value)==null||De.removeLayer(Z),(et=e.value)==null||et.addLayer(ue),s.value=ue,R(ue)}else if(Z instanceof ua)I(Z);else if(Z instanceof Vt.Polyline&&!(Z instanceof Vt.Polygon)){const se=Z.getLatLngs(),ue=new ua(se,{...Z.options});ue.updateProperties(),(he=e.value)==null||he.removeLayer(Z),(Q=e.value)==null||Q.addLayer(ue),s.value=ue,I(ue)}Gl("Cliquez sur la forme pour afficher les points de contrle")},ie=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",Ze))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:A,setDrawingTool:z,updateShapeStyle:Y,updateShapeProperties:te,updateTextFixedSize:k,adjustView:D,clearActiveControlPoints:g,calculateTotalCoverageArea:U,showCoverageOverlay:ne,hideCoverageOverlay:V,calculateConnectedCoverageArea:ve,getConnectedShapes:X}}function jU(){const{isEnabled:t,startMeasure:e}=zp(),n=Ct(null),r=Ct(""),i=Ct("Hybride"),s=Ct(null),o={maxZoom:19,updateWhenZooming:!0,updateWhenIdle:!0,noWrap:!0,keepBuffer:2,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,useCache:!0,priorityLevels:3},a=e("createBaseMaps","useMapState"),l={Hybride:Vt.layerGroup([Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{...o,attribution:" OpenStreetMap contributors",opacity:.6,subdomains:["a","b","c"],crossOrigin:!0}),Vt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{...o,attribution:" Esri",maxNativeZoom:20,opacity:.6})]),Cadastre:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Cadastre - Carte  IGN/Geoportail",maxNativeZoom:18}),IGN:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{...o,attribution:"Carte IGN  IGN/Geoportail",maxNativeZoom:18})};a();const c=An.createPerformanceTracker(g=>{An.measure("initMap:setOptions",()=>{n.value=g,g.options.zoomSnap=.5,g.options.zoomDelta=.5,g.options.wheelPxPerZoomLevel=120,g.options.zoomAnimation=!0,g.options.fadeAnimation=!0,g.options.markerZoomAnimation=!0,g.options.preferCanvas=!0,g.options.renderer=Vt.canvas(),g.options.minZoom=2,g.options.maxZoom=19,g.options.scrollWheelZoom=!0,g.options.doubleClickZoom=!0;const x=Vt.latLngBounds(Vt.latLng(-90,-180),Vt.latLng(90,180));g.setMaxBounds(x),g.options.maxBoundsViscosity=1,g.options.trackResize=!0;let E=null;g.getZoom(),g.on("zoomstart",()=>{g.getZoom(),g.options.zoomAnimation=!1,g.options.markerZoomAnimation=!1}),g.on("zoomend",()=>{E&&clearTimeout(E),E=setTimeout(()=>{setTimeout(()=>{g.options.zoomAnimation=!0,g.options.markerZoomAnimation=!0,g.invalidateSize({animate:!1,pan:!1});const A=g.getBounds(),D=g.options.maxBounds;D&&!A.intersects(D)&&g.panInsideBounds(D,{animate:!1}),g.eachLayer(z=>{z.properties&&z.properties.type==="Note"&&typeof z.updatePosition=="function"&&z.updatePosition()})},250)},250)});const k=g._zoomAnimation;k&&(g._zoomAnimation=function(A){try{this._animatingZoom||k.call(this,A)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}}),g.on("zoomanim",A=>{g.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePositionDuringZoom=="function"&&D.updatePositionDuringZoom(A)})})},"useMapState"),An.measure("initMap:addInitialLayer",()=>{g&&g.whenReady(()=>{const x=i.value;if(l[x]){if(console.log(`Initialisation de la couche de base: ${x}`),s.value&&g.hasLayer(s.value))try{g.removeLayer(s.value),console.log("Couche active prcdente supprime")}catch(E){console.warn("Erreur lors de la suppression de la couche active prcdente:",E)}s.value=l[x];try{s.value.addTo(g),console.log(`Couche ${x} ajoute  la carte`)}catch(E){console.error(`Erreur lors de l'ajout de la couche ${x}:`,E)}}else console.warn(`Couche de base non disponible: ${x}`)})},"useMapState"),g.on("baselayerchange",x=>{const E=e("baselayerchange","useMapState",{layer:x.name});i.value=x.name,s.value=x.layer,E()}),t.value&&(g.on("movestart",()=>{e("mapMove","useMapState",{startCenter:g.getCenter()})}),g.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:g.getCenter()})(),g.eachLayer(E=>{E.properties&&E.properties.type==="Note"&&typeof E.updatePosition=="function"&&E.updatePosition()})}),g.on("tileloadstart",()=>{e("tileLoad","useMapState")}),g.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),h=An.createAsyncPerformanceTracker(async g=>{if(!n.value||!l[g]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialise"}`);return}try{if(i.value===g)return;console.log(`Changement de carte: ${i.value} -> ${g}`);const x=n.value,E=x.getCenter(),k=x.getZoom();x.options.zoomAnimation=!1,x.options.fadeAnimation=!1,x.options.markerZoomAnimation=!1;const A=l[g];if(s.value&&x.hasLayer(s.value))try{x.removeLayer(s.value),console.log(`Couche prcdente ${i.value} supprime`)}catch(D){console.warn("Erreur lors de la suppression de la couche active:",D)}try{A instanceof Vt.LayerGroup,A.addTo(x),console.log(`Nouvelle couche ${g} ajoute`)}catch(D){console.error("Erreur lors de l'ajout de la nouvelle couche:",D);try{x.hasLayer(A)&&x.removeLayer(A),A.addTo(x),console.log(`Rcupration: couche ${g} rajoute`)}catch(z){throw console.error("chec de la rcupration:",z),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=A,i.value=g;try{x.setView(E,k,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue rinitialise: centre=${E}, zoom=${k}`)}catch(D){console.warn("Erreur lors de la rinitialisation de la vue:",D)}try{x.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{x.eachLayer(D=>{D.properties&&D.properties.type==="Note"&&typeof D.updatePosition=="function"&&D.updatePosition()})},100)}catch(D){console.warn("Erreur lors du rafrachissement de la carte:",D)}setTimeout(()=>{x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,console.log("Animations restaures")},500)}catch(x){if(console.error("Erreur lors du changement de carte de base:",x),n.value)try{const E=n.value;E.eachLayer(A=>{(A instanceof Vt.TileLayer||A instanceof Vt.LayerGroup)&&E.removeLayer(A)});const k=l[g];k.addTo(E),s.value=k,i.value=g,E.options.zoomAnimation=!0,E.options.fadeAnimation=!0,E.options.markerZoomAnimation=!0,E.invalidateSize({animate:!1,pan:!1}),console.log("Rcupration effectue aprs erreur")}catch(E){console.error("Erreur lors de la rcupration aprs chec:",E)}}},"changeBaseMap","useMapState"),p=An.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const g=await An.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),x=await An.measureAsync("searchLocation:parseResponse",async()=>await g.json(),"useMapState");x&&x.length>0&&An.measure("searchLocation:updateView",()=>{const{lat:E,lon:k}=x[0];n.value.setView([E,k],13,{animate:!0})},"useMapState")}catch(g){console.error("Erreur lors de la recherche de localisation:",g)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:l,initMap:c,searchLocation:p,changeBaseMap:h,cleanup:()=>{const g=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),g()},isPerformanceEnabled:t}}const zU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},$U={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},VU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},UU={key:0,class:"mb-4"},HU={key:0,class:"animate-pulse"},WU=["value"],GU={key:1,class:"mb-4"},qU={key:0,class:"animate-pulse"},YU=["disabled"],KU={value:null},ZU=["value"],XU={key:2,class:"mb-4"},JU={key:0,class:"animate-pulse"},QU=["disabled"],eH={value:null},tH=["value"],nH={class:"mb-4"},rH={class:"mb-6"},iH={class:"flex justify-end space-x-3"},sH=["disabled"],oH={key:0},aH={key:1},RE=Rs({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(B){return B?typeof B=="object"?B.id:B:null}function i(B){if(B===null)throw new Error("Invalid ID");return B}const s=t,o=n,a=ga(),l=$y(),c=kp(),h=Ct(!1),p=Ct(null),v=Ct([]),g=Ct([]),x=Ct([]),E=Ct(null),k=Ct(null),A=Ct(!1),D=Ct(!1),z=Ct(!1),Y=Ct({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),te=Jn(()=>{var B,$,U;return((B=a.user)==null?void 0:B.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:(($=a.user)==null?void 0:$.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((U=a.user)==null?void 0:U.user_type)==="salarie",Y.value.nom.trim())});ki(()=>Y.value.entreprise,async B=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,g.value=[];const $=r(B);console.log("[NewPlanModal] Entreprise slectionne:",$),$?await ge($):v.value=[]}),ki(()=>Y.value.salarie,async B=>{if(!s.modelValue)return;Y.value.visiteur=null;const $=r(B);$?await pe($):g.value=[]}),ki(()=>s.modelValue,B=>{var $,U,V;B?(($=a.user)==null?void 0:$.user_type)==="admin"?I():((U=a.user)==null?void 0:U.user_type)==="entreprise"?ge(a.user.id):((V=a.user)==null?void 0:V.user_type)==="salarie"&&pe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],v.value=[],x.value=[],p.value=null)});async function ge(B){A.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",B);const $=await Tl.getUsers({role:"SALARIE",entreprise:B});console.log("[NewPlanModal] Rponse salaries:",$.data),v.value=$.data}catch($){console.error("[NewPlanModal] Error loading salaries:",$),v.value=[]}finally{A.value=!1}}async function pe(B){D.value=!0;try{const $=await Tl.getUsers({role:"VISITEUR",salarie:B});g.value=$.data}catch($){console.error("[NewPlanModal] Error loading visiteurs:",$),g.value=[]}finally{D.value=!1}}async function N(B){s.modelValue&&(E.value=B,Y.value.salarie=B.id,await pe(B.id),o("salarieSelected",B))}function j(B){s.modelValue&&(k.value=B,Y.value.visiteur=B.id,o("visiteurSelected",B))}function K(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,k.value=null,g.value=[],p.value=null}async function I(){z.value=!0;try{const B=await a.fetchEnterprises();x.value=B}catch(B){console.error("[NewPlanModal] Error loading entreprises:",B),x.value=[]}finally{z.value=!1}}async function R(){var B,$;p.value=null,h.value=!0;try{const U={nom:Y.value.nom.trim(),description:Y.value.description.trim()},V=a.user;if(!V)throw new Error("User not found");if(V.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=i(r(Y.value.entreprise)),U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");U.entreprise=V.id,U.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="salarie"){if(!V.entreprise)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.id,Y.value.visiteur&&(U.visiteur=Y.value.visiteur)}else if(V.user_type==="visiteur"){if(!V.entreprise||!V.salarie)throw new Error("Missing required fields");U.entreprise=V.entreprise.id,U.salarie=V.salarie.id,U.visiteur=V.id}console.log("Donnes du plan  crer:",U),l.clearCurrentPlan(),c.setCurrentPlan(null);const ne=await l.createPlan(U);o("created",ne.id),K()}catch(U){console.error("[NewPlanModal] Error creating plan:",U),console.error("Response data:",(B=U.response)==null?void 0:B.data);let V="Une erreur est survenue lors de la cration du plan";($=U.response)!=null&&$.data&&(typeof U.response.data=="object"?V=Object.entries(U.response.data).map(([ne,X])=>Array.isArray(X)?`${ne}: ${X.join(", ")}`:`${ne}: ${X}`).join(`
`):typeof U.response.data=="string"&&(V=U.response.data)),p.value=V}finally{h.value=!1}}return e({salaries:v,visiteurs:g,selectedSalarie:E,selectedVisiteur:k,loadSalaries:ge,loadVisiteurs:pe,selectSalarie:N,selectVisiteur:j}),(B,$)=>{var U,V,ne,X;return B.modelValue?(Te(),Ie("div",zU,[S("div",$U,[S("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[$[6]||($[6]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Crer un nouveau plan",-1)),S("button",{onClick:K,class:"text-gray-400 hover:text-gray-500"},$[5]||($[5]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",VU,[Yn(a).isAdmin?(Te(),Ie("div",UU,[$[9]||($[9]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),z.value?(Te(),Ie("div",HU,$[7]||($[7]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Te(),Ie("select",{key:1,"onUpdate:modelValue":$[0]||($[0]=we=>Y.value.entreprise=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[$[8]||($[8]=S("option",{value:null},"Slectionnez une entreprise",-1)),(Te(!0),Ie(wn,null,ir(x.value,we=>(Te(),Ie("option",{key:we.id,value:we.id},kt(Yn(Lu)(we)),9,WU))),128))],512)),[[ns,Y.value.entreprise]])])):Jt("",!0),((U=Yn(a).user)==null?void 0:U.user_type)==="admin"||((V=Yn(a).user)==null?void 0:V.user_type)==="entreprise"?(Te(),Ie("div",GU,[$[11]||($[11]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),A.value?(Te(),Ie("div",qU,$[10]||($[10]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Te(),Ie("select",{key:1,id:"edit-salarie","onUpdate:modelValue":$[1]||($[1]=we=>Y.value.salarie=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Yn(a).isAdmin&&!Y.value.entreprise},[S("option",KU,kt(v.value.length?"Slectionnez un salarie":"Aucun salarie disponible"),1),(Te(!0),Ie(wn,null,ir(v.value,we=>(Te(),Ie("option",{key:we.id,value:we.id},kt(Yn(Lu)(we)),9,ZU))),128))],8,YU)),[[ns,Y.value.salarie]])])):Jt("",!0),((ne=Yn(a).user)==null?void 0:ne.user_type)!=="visiteur"?(Te(),Ie("div",XU,[$[13]||($[13]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Te(),Ie("div",JU,$[12]||($[12]=[S("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Te(),Ie("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":$[2]||($[2]=we=>Y.value.visiteur=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!g.value.length||((X=Yn(a).user)==null?void 0:X.user_type)!=="salarie"&&!Y.value.salarie},[S("option",eH,kt(g.value.length?"Slectionnez un visiteur":"Aucun visiteur disponible"),1),(Te(!0),Ie(wn,null,ir(g.value,we=>(Te(),Ie("option",{key:we.id,value:we.id},kt(Yn(Lu)(we)),9,tH))),128))],8,QU)),[[ns,Y.value.visiteur]])])):Jt("",!0),S("div",nH,[$[14]||($[14]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),kn(S("input",{id:"edit-nom","onUpdate:modelValue":$[3]||($[3]=we=>Y.value.nom=we),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[$r,Y.value.nom]])]),S("div",rH,[$[15]||($[15]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),kn(S("textarea",{id:"edit-description","onUpdate:modelValue":$[4]||($[4]=we=>Y.value.description=we),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[$r,Y.value.description]])]),S("div",iH,[S("button",{onClick:K,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),S("button",{onClick:R,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!te.value||h.value},[h.value?(Te(),Ie("span",oH,"Cration en cours...")):(Te(),Ie("span",aH,"Crer"))],8,sH)])])])])):Jt("",!0)}}});function cs(t){"@babel/helpers - typeof";return cs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cs(t)}var pl=Uint8Array,Cu=Uint16Array,j_=Int32Array,Vy=new pl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Uy=new pl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),xb=new pl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),FE=function(t,e){for(var n=new Cu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new j_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},jE=FE(Vy,2),zE=jE.b,Lb=jE.r;zE[28]=258,Lb[258]=28;var $E=FE(Uy,0),lH=$E.b,m5=$E.r,Sb=new Cu(32768);for(var Ns=0;Ns<32768;++Ns){var Xd=(Ns&43690)>>1|(Ns&21845)<<1;Xd=(Xd&52428)>>2|(Xd&13107)<<2,Xd=(Xd&61680)>>4|(Xd&3855)<<4,Sb[Ns]=((Xd&65280)>>8|(Xd&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new Cu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Cu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Cu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],h=e-t[i],p=o[t[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)a[Sb[p]>>l]=c}else for(a=new Cu(r),i=0;i<r;++i)t[i]&&(a[i]=Sb[o[t[i]-1]++]>>15-t[i]);return a},Lh=new pl(288);for(var Ns=0;Ns<144;++Ns)Lh[Ns]=8;for(var Ns=144;Ns<256;++Ns)Lh[Ns]=9;for(var Ns=256;Ns<280;++Ns)Lh[Ns]=7;for(var Ns=280;Ns<288;++Ns)Lh[Ns]=8;var mm=new pl(32);for(var Ns=0;Ns<32;++Ns)mm[Ns]=5;var uH=Xc(Lh,9,0),cH=Xc(Lh,9,1),dH=Xc(mm,5,0),hH=Xc(mm,5,1),e2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},t2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},z_=function(t){return(t+7)/8|0},VE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new pl(t.subarray(e,n))},fH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gc=function(t,e,n){var r=new Error(e||fH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gc),!n)throw r;return r},pH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new pl(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new pl(i*3));var c=function(De){var et=n.length;if(De>et){var he=new pl(Math.max(et*2,De));he.set(n),n=he}},h=e.f||0,p=e.p||0,v=e.b||0,g=e.l,x=e.d,E=e.m,k=e.n,A=i*8;do{if(!g){h=cc(t,p,1);var D=cc(t,p+1,3);if(p+=3,D)if(D==1)g=cH,x=hH,E=9,k=5;else if(D==2){var ge=cc(t,p,31)+257,pe=cc(t,p+10,15)+4,N=ge+cc(t,p+5,31)+1;p+=14;for(var j=new pl(N),K=new pl(19),I=0;I<pe;++I)K[xb[I]]=cc(t,p+I*3,7);p+=pe*3;for(var R=e2(K),B=(1<<R)-1,$=Xc(K,R,1),I=0;I<N;){var U=$[cc(t,p,B)];p+=U&15;var z=U>>4;if(z<16)j[I++]=z;else{var V=0,ne=0;for(z==16?(ne=3+cc(t,p,3),p+=2,V=j[I-1]):z==17?(ne=3+cc(t,p,7),p+=3):z==18&&(ne=11+cc(t,p,127),p+=7);ne--;)j[I++]=V}}var X=j.subarray(0,ge),we=j.subarray(ge);E=e2(X),k=e2(we),g=Xc(X,E,1),x=Xc(we,k,1)}else gc(1);else{var z=z_(p)+4,Y=t[z-4]|t[z-3]<<8,te=z+Y;if(te>i){l&&gc(0);break}a&&c(v+Y),n.set(t.subarray(z,te),v),e.b=v+=Y,e.p=p=te*8,e.f=h;continue}if(p>A){l&&gc(0);break}}a&&c(v+131072);for(var ve=(1<<E)-1,Ze=(1<<k)-1,ie=p;;ie=p){var V=g[t2(t,p)&ve],H=V>>4;if(p+=V&15,p>A){l&&gc(0);break}if(V||gc(2),H<256)n[v++]=H;else if(H==256){ie=p,g=null;break}else{var Z=H-254;if(H>264){var I=H-257,me=Vy[I];Z=cc(t,p,(1<<me)-1)+zE[I],p+=me}var fe=x[t2(t,p)&Ze],de=fe>>4;fe||gc(3),p+=fe&15;var we=lH[de];if(de>3){var me=Uy[de];we+=t2(t,p)&(1<<me)-1,p+=me}if(p>A){l&&gc(0);break}a&&c(v+131072);var ce=v+Z;if(v<we){var J=s-we,Re=Math.min(we,ce);for(J+v<0&&gc(3);v<Re;++v)n[v]=r[J+v]}for(;v<ce;++v)n[v]=n[v-we]}}e.l=g,e.p=ie,e.b=v,e.f=h,g&&(h=1,e.m=E,e.d=x,e.n=k)}while(!h);return v!=n.length&&o?VE(n,0,v):n.subarray(0,v)},_d=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},rg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},n2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:HE,l:0};if(i==1){var o=new pl(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(te,ge){return te.f-ge.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,h=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};h!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=h&&n[c].f<n[p].f?c++:p++],n[h++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var g=new Cu(v+1),x=Cb(n[h-1],g,0);if(x>e){var r=0,E=0,k=x-e,A=1<<k;for(s.sort(function(ge,pe){return g[pe.s]-g[ge.s]||ge.f-pe.f});r<i;++r){var D=s[r].s;if(g[D]>e)E+=A-(1<<x-g[D]),g[D]=e;else break}for(E>>=k;E>0;){var z=s[r].s;g[z]<e?E-=1<<e-g[z]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;g[Y]==e&&(--g[Y],++E)}x=e}return{t:new pl(g),l:x}},Cb=function(t,e,n){return t.s==-1?Math.max(Cb(t.l,e,n+1),Cb(t.r,e,n+1)):e[t.s]=n},v5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Cu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},ig=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},UE=function(t,e,n){var r=n.length,i=z_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},y5=function(t,e,n,r,i,s,o,a,l,c,h){_d(e,h++,n),++i[256];for(var p=n2(i,15),v=p.t,g=p.l,x=n2(s,15),E=x.t,k=x.l,A=v5(v),D=A.c,z=A.n,Y=v5(E),te=Y.c,ge=Y.n,pe=new Cu(19),N=0;N<D.length;++N)++pe[D[N]&31];for(var N=0;N<te.length;++N)++pe[te[N]&31];for(var j=n2(pe,7),K=j.t,I=j.l,R=19;R>4&&!K[xb[R-1]];--R);var B=c+5<<3,$=ig(i,Lh)+ig(s,mm)+o,U=ig(i,v)+ig(s,E)+o+14+3*R+ig(pe,K)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&B<=$&&B<=U)return UE(e,h,t.subarray(l,l+c));var V,ne,X,we;if(_d(e,h,1+(U<$)),h+=2,U<$){V=Xc(v,g,0),ne=v,X=Xc(E,k,0),we=E;var ve=Xc(K,I,0);_d(e,h,z-257),_d(e,h+5,ge-1),_d(e,h+10,R-4),h+=14;for(var N=0;N<R;++N)_d(e,h+3*N,K[xb[N]]);h+=3*R;for(var Ze=[D,te],ie=0;ie<2;++ie)for(var H=Ze[ie],N=0;N<H.length;++N){var Z=H[N]&31;_d(e,h,ve[Z]),h+=K[Z],Z>15&&(_d(e,h,H[N]>>5&127),h+=H[N]>>12)}}else V=uH,ne=Lh,X=dH,we=mm;for(var N=0;N<a;++N){var me=r[N];if(me>255){var Z=me>>18&31;rg(e,h,V[Z+257]),h+=ne[Z+257],Z>7&&(_d(e,h,me>>23&31),h+=Vy[Z]);var fe=me&31;rg(e,h,X[fe]),h+=we[fe],fe>3&&(rg(e,h,me>>5&8191),h+=Uy[fe])}else rg(e,h,V[me]),h+=ne[me]}return rg(e,h,V[256]),h+ne[256]},gH=new j_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),HE=new pl(0),mH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new pl(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,h=(s.r||0)&7;if(e){h&&(l[0]=s.r>>3);for(var p=gH[e-1],v=p>>13,g=p&8191,x=(1<<n)-1,E=s.p||new Cu(32768),k=s.h||new Cu(x+1),A=Math.ceil(n/3),D=2*A,z=function(Q){return(t[Q]^t[Q+1]<<A^t[Q+2]<<D)&x},Y=new j_(25e3),te=new Cu(288),ge=new Cu(32),pe=0,N=0,j=s.i||0,K=0,I=s.w||0,R=0;j+2<o;++j){var B=z(j),$=j&32767,U=k[B];if(E[$]=U,k[B]=$,I<=j){var V=o-j;if((pe>7e3||K>24576)&&(V>423||!c)){h=y5(t,l,0,Y,te,ge,N,K,R,j-R,h),K=pe=N=0,R=j;for(var ne=0;ne<286;++ne)te[ne]=0;for(var ne=0;ne<30;++ne)ge[ne]=0}var X=2,we=0,ve=g,Ze=$-U&32767;if(V>2&&B==z(j-Ze))for(var ie=Math.min(v,V)-1,H=Math.min(32767,j),Z=Math.min(258,V);Ze<=H&&--ve&&$!=U;){if(t[j+X]==t[j+X-Ze]){for(var me=0;me<Z&&t[j+me]==t[j+me-Ze];++me);if(me>X){if(X=me,we=Ze,me>ie)break;for(var fe=Math.min(Ze,me-2),de=0,ne=0;ne<fe;++ne){var ce=j-Ze+ne&32767,J=E[ce],Re=ce-J&32767;Re>de&&(de=Re,U=ce)}}}$=U,U=E[$],Ze+=$-U&32767}if(we){Y[K++]=268435456|Lb[X]<<18|m5[we];var De=Lb[X]&31,et=m5[we]&31;N+=Vy[De]+Uy[et],++te[257+De],++ge[et],I=j+X,++pe}else Y[K++]=t[j],++te[t[j]]}}for(j=Math.max(j,I);j<o;++j)Y[K++]=t[j],++te[t[j]];h=y5(t,l,c,Y,te,ge,N,K,R,j-R,h),c||(s.r=h&7|l[h/8|0]<<3,h-=7,s.h=k,s.p=E,s.i=j,s.w=I)}else{for(var j=s.w||0;j<o+c;j+=65535){var he=j+65535;he>=o&&(l[h/8|0]=c,he=o),h=UE(l,h+1,t.subarray(j,he))}s.i=o}return VE(a,0,r+z_(h)+i)},WE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},vH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new pl(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return mH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},GE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=WE();i.p(e.dictionary),GE(t,2,i.d())}},bH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gc(6,"invalid zlib data"),(t[1]>>5&1)==1&&gc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Eb(t,e){e||(e={});var n=WE();n.p(t);var r=vH(t,e,e.dictionary?6:2,4);return yH(r,e),GE(r,r.length-4,n.d()),r}function _H(t,e){return pH(t.subarray(bH(t),-4),{i:2},e,e)}var wH=typeof TextDecoder<"u"&&new TextDecoder,xH=0;try{wH.decode(HE,{stream:!0}),xH=1}catch{}var jr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function r2(){jr.console&&typeof jr.console.log=="function"&&jr.console.log.apply(jr.console,arguments)}var bs={log:r2,warn:function(t){jr.console&&(typeof jr.console.warn=="function"?jr.console.warn.apply(jr.console,arguments):r2.call(null,arguments))},error:function(t){jr.console&&(typeof jr.console.error=="function"?jr.console.error.apply(jr.console,arguments):r2(t))}};function i2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Jh(r.response,e,n)},r.onerror=function(){bs.error("could not download file")},r.send()}function b5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function w0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Hg,Pb,Jh=jr.saveAs||((typeof window>"u"?"undefined":cs(window))!=="object"||window!==jr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=jr.URL||jr.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?b5(i.href)?i2(t,e,n):w0(i,i.target="_blank"):w0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){w0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(b5(t))i2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){w0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:cs(s)!=="object"&&(bs.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return i2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(jr.HTMLElement)||jr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":cs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var h=a.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=h:location=h,r=null},a.readAsDataURL(t)}else{var l=jr.URL||jr.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function s2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=sl(n,r,i,s,e[0],7,-680876936),s=sl(s,n,r,i,e[1],12,-389564586),i=sl(i,s,n,r,e[2],17,606105819),r=sl(r,i,s,n,e[3],22,-1044525330),n=sl(n,r,i,s,e[4],7,-176418897),s=sl(s,n,r,i,e[5],12,1200080426),i=sl(i,s,n,r,e[6],17,-1473231341),r=sl(r,i,s,n,e[7],22,-45705983),n=sl(n,r,i,s,e[8],7,1770035416),s=sl(s,n,r,i,e[9],12,-1958414417),i=sl(i,s,n,r,e[10],17,-42063),r=sl(r,i,s,n,e[11],22,-1990404162),n=sl(n,r,i,s,e[12],7,1804603682),s=sl(s,n,r,i,e[13],12,-40341101),i=sl(i,s,n,r,e[14],17,-1502002290),n=ol(n,r=sl(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ol(s,n,r,i,e[6],9,-1069501632),i=ol(i,s,n,r,e[11],14,643717713),r=ol(r,i,s,n,e[0],20,-373897302),n=ol(n,r,i,s,e[5],5,-701558691),s=ol(s,n,r,i,e[10],9,38016083),i=ol(i,s,n,r,e[15],14,-660478335),r=ol(r,i,s,n,e[4],20,-405537848),n=ol(n,r,i,s,e[9],5,568446438),s=ol(s,n,r,i,e[14],9,-1019803690),i=ol(i,s,n,r,e[3],14,-187363961),r=ol(r,i,s,n,e[8],20,1163531501),n=ol(n,r,i,s,e[13],5,-1444681467),s=ol(s,n,r,i,e[2],9,-51403784),i=ol(i,s,n,r,e[7],14,1735328473),n=al(n,r=ol(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=al(s,n,r,i,e[8],11,-2022574463),i=al(i,s,n,r,e[11],16,1839030562),r=al(r,i,s,n,e[14],23,-35309556),n=al(n,r,i,s,e[1],4,-1530992060),s=al(s,n,r,i,e[4],11,1272893353),i=al(i,s,n,r,e[7],16,-155497632),r=al(r,i,s,n,e[10],23,-1094730640),n=al(n,r,i,s,e[13],4,681279174),s=al(s,n,r,i,e[0],11,-358537222),i=al(i,s,n,r,e[3],16,-722521979),r=al(r,i,s,n,e[6],23,76029189),n=al(n,r,i,s,e[9],4,-640364487),s=al(s,n,r,i,e[12],11,-421815835),i=al(i,s,n,r,e[15],16,530742520),n=ll(n,r=al(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=ll(s,n,r,i,e[7],10,1126891415),i=ll(i,s,n,r,e[14],15,-1416354905),r=ll(r,i,s,n,e[5],21,-57434055),n=ll(n,r,i,s,e[12],6,1700485571),s=ll(s,n,r,i,e[3],10,-1894986606),i=ll(i,s,n,r,e[10],15,-1051523),r=ll(r,i,s,n,e[1],21,-2054922799),n=ll(n,r,i,s,e[8],6,1873313359),s=ll(s,n,r,i,e[15],10,-30611744),i=ll(i,s,n,r,e[6],15,-1560198380),r=ll(r,i,s,n,e[13],21,1309151649),n=ll(n,r,i,s,e[4],6,-145523070),s=ll(s,n,r,i,e[11],10,-1120210379),i=ll(i,s,n,r,e[2],15,718787259),r=ll(r,i,s,n,e[9],21,-343485551),t[0]=ch(n,t[0]),t[1]=ch(r,t[1]),t[2]=ch(i,t[2]),t[3]=ch(s,t[3])}function Hy(t,e,n,r,i,s){return e=ch(ch(e,t),ch(r,s)),ch(e<<i|e>>>32-i,n)}function sl(t,e,n,r,i,s,o){return Hy(e&n|~e&r,t,e,i,s,o)}function ol(t,e,n,r,i,s,o){return Hy(e&r|n&~r,t,e,i,s,o)}function al(t,e,n,r,i,s,o){return Hy(e^n^r,t,e,i,s,o)}function ll(t,e,n,r,i,s,o){return Hy(n^(e|~r),t,e,i,s,o)}function YE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)s2(r,LH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(s2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,s2(r,i),r}function LH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Hg=jr.atob.bind(jr),Pb=jr.btoa.bind(jr);var _5="0123456789abcdef".split("");function SH(t){for(var e="",n=0;n<4;n++)e+=_5[t>>8*n+4&15]+_5[t>>8*n&15];return e}function CH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Mb(t){return YE(t).map(CH).join("")}var EH=function(t){for(var e=0;e<t.length;e++)t[e]=SH(t[e]);return t.join("")}(YE("hello"))!="5d41402abc4b2a76b9719d911017c592";function ch(t,e){if(EH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function kb(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var h=a[l];c=(c+h+o.charCodeAt(l))%256,a[l]=a[c],a[c]=h}n=t,r=a}else a=r;var p=e.length,v=0,g=0,x="";for(l=0;l<p;l++)g=(g+(h=a[v=(v+1)%256]))%256,a[v]=a[g],a[g]=h,o=a[(a[v]+a[g])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var w5={print:4,modify:8,copy:16,"annot-forms":32};function sp(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(w5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=w5[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Mb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=kb(this.encryptionKey,this.padding)}function op(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function x5(t){if(cs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){jr.console&&bs.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yv(t){if(!(this instanceof Yv))return new Yv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function KE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function rf(t,e,n,r,i){if(!(this instanceof rf))return new rf(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,KE.call(this,r,i)}function up(t,e,n,r,i){if(!(this instanceof up))return new up(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,KE.call(this,r,i)}function Nr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",h=null;cs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(h=t.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},g={internal:{},__private__:{}};g.__private__.PubSub=x5;var x="1.3",E=g.__private__.getPdfVersion=function(){return x};g.__private__.setPdfVersion=function(F){x=F};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};g.__private__.getPageFormats=function(){return k};var A=g.__private__.getPageFormat=function(F){return k[F]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},z=D.COMPAT;function Y(){this.saveGraphicsState(),ue(new tr(it,0,0,-it,0,Ka()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",z=D.ADVANCED}function te(){this.restoreGraphicsState(),c="S",z=D.COMPAT}var ge=g.__private__.combineFontStyleAndFontWeight=function(F,xe){if(F=="bold"&&xe=="normal"||F=="bold"&&xe==400||F=="normal"&&xe=="italic"||F=="bold"&&xe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return xe&&(F=xe==400||xe==="normal"?F==="italic"?"italic":"normal":xe!=700&&xe!=="bold"||F!=="normal"?(xe==700?"bold":xe)+""+F:"bold"),F};g.advancedAPI=function(F){var xe=z===D.COMPAT;return xe&&Y.call(this),typeof F!="function"||(F(this),xe&&te.call(this)),this},g.compatAPI=function(F){var xe=z===D.ADVANCED;return xe&&te.call(this),typeof F!="function"||(F(this),xe&&Y.call(this)),this},g.isAdvancedAPI=function(){return z===D.ADVANCED};var pe,N=function(F){if(z!==D.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},j=g.roundToPrecision=g.__private__.roundToPrecision=function(F,xe){var tt=e||xe;if(isNaN(F)||isNaN(tt))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(tt).replace(/0+$/,"")};pe=g.hpf=g.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return j(F,16)};var K=g.f2=g.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return j(F,2)},I=g.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return j(F,3)},R=g.scale=g.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return z===D.COMPAT?F*it:z===D.ADVANCED?F:void 0},B=function(F){return z===D.COMPAT?Ka()-F:z===D.ADVANCED?F:void 0},$=function(F){return R(B(F))};g.__private__.setPrecision=g.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var U,V="00000000000000000000000000000000",ne=g.__private__.getFileId=function(){return V},X=g.__private__.setFileId=function(F){return V=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():V.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ds=new sp(h.userPermissions,h.userPassword,h.ownerPassword,V)),V};g.setFileId=function(F){return X(F),this},g.getFileId=function(){return ne()};var we=g.__private__.convertDateToPDFDate=function(F){var xe=F.getTimezoneOffset(),tt=xe<0?"+":"-",pt=Math.floor(Math.abs(xe/60)),Mt=Math.abs(xe%60),Ht=[tt,Z(pt),"'",Z(Mt),"'"].join("");return["D:",F.getFullYear(),Z(F.getMonth()+1),Z(F.getDate()),Z(F.getHours()),Z(F.getMinutes()),Z(F.getSeconds()),Ht].join("")},ve=g.__private__.convertPDFDateToDate=function(F){var xe=parseInt(F.substr(2,4),10),tt=parseInt(F.substr(6,2),10)-1,pt=parseInt(F.substr(8,2),10),Mt=parseInt(F.substr(10,2),10),Ht=parseInt(F.substr(12,2),10),hn=parseInt(F.substr(14,2),10);return new Date(xe,tt,pt,Mt,Ht,hn,0)},Ze=g.__private__.setCreationDate=function(F){var xe;if(F===void 0&&(F=new Date),F instanceof Date)xe=we(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");xe=F}return U=xe},ie=g.__private__.getCreationDate=function(F){var xe=U;return F==="jsDate"&&(xe=ve(U)),xe};g.setCreationDate=function(F){return Ze(F),this},g.getCreationDate=function(F){return ie(F)};var H,Z=g.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},me=g.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},fe=0,de=[],ce=[],J=0,Re=[],De=[],et=!1,he=ce,Q=function(){fe=0,J=0,ce=[],de=[],Re=[],En=dt(),jt=dt()};g.__private__.setCustomOutputDestination=function(F){et=!0,he=F};var se=function(F){et||(he=F)};g.__private__.resetCustomOutputDestination=function(){et=!1,he=ce};var ue=g.__private__.out=function(F){return F=F.toString(),J+=F.length+1,he.push(F),he},ze=g.__private__.write=function(F){return ue(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},Ce=g.__private__.getArrayBuffer=function(F){for(var xe=F.length,tt=new ArrayBuffer(xe),pt=new Uint8Array(tt);xe--;)pt[xe]=F.charCodeAt(xe);return tt},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];g.__private__.getStandardFonts=function(){return ye};var Ve=t.fontSize||16;g.__private__.setFontSize=g.setFontSize=function(F){return Ve=z===D.ADVANCED?F/it:F,this};var Ye,Ke=g.__private__.getFontSize=g.getFontSize=function(){return z===D.COMPAT?Ve:Ve*it},_t=t.R2L||!1;g.__private__.setR2L=g.setR2L=function(F){return _t=F,this},g.__private__.getR2L=g.getR2L=function(){return _t};var Ge,ft=g.__private__.setZoomMode=function(F){var xe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Ye=F;else if(isNaN(F)){if(xe.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Ye=F}else Ye=parseInt(F,10)};g.__private__.getZoomMode=function(){return Ye};var Ut,tn=g.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');Ge=F};g.__private__.getPageMode=function(){return Ge};var yn=g.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');Ut=F};g.__private__.getLayoutMode=function(){return Ut},g.__private__.setDisplayMode=g.setDisplayMode=function(F,xe,tt){return ft(F),yn(xe),tn(tt),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};g.__private__.getDocumentProperty=function(F){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[F]},g.__private__.getDocumentProperties=function(){return Qe},g.__private__.setDocumentProperties=g.setProperties=g.setDocumentProperties=function(F){for(var xe in Qe)Qe.hasOwnProperty(xe)&&F[xe]&&(Qe[xe]=F[xe]);return this},g.__private__.setDocumentProperty=function(F,xe){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[F]=xe};var at,it,$t,Zt,On,mn={},Tn={},Qn=[],Qt={},xn={},Cn={},er={},vr=null,xr=0,ur=[],qr=new x5(g),Fs=t.hotfixes||[],Ai={},Oo={},Ts=[],tr=function F(xe,tt,pt,Mt,Ht,hn){if(!(this instanceof F))return new F(xe,tt,pt,Mt,Ht,hn);isNaN(xe)&&(xe=1),isNaN(tt)&&(tt=0),isNaN(pt)&&(pt=0),isNaN(Mt)&&(Mt=1),isNaN(Ht)&&(Ht=0),isNaN(hn)&&(hn=0),this._matrix=[xe,tt,pt,Mt,Ht,hn]};Object.defineProperty(tr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(tr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(tr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(tr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(tr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(tr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(tr.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(tr.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(tr.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(tr.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(tr.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(tr.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(tr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tr.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},tr.prototype.multiply=function(F){var xe=F.sx*this.sx+F.shy*this.shx,tt=F.sx*this.shy+F.shy*this.sy,pt=F.shx*this.sx+F.sy*this.shx,Mt=F.shx*this.shy+F.sy*this.sy,Ht=F.tx*this.sx+F.ty*this.shx+this.tx,hn=F.tx*this.shy+F.ty*this.sy+this.ty;return new tr(xe,tt,pt,Mt,Ht,hn)},tr.prototype.decompose=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Ht=this.ty,hn=Math.sqrt(F*F+xe*xe),Fn=(F/=hn)*tt+(xe/=hn)*pt;tt-=F*Fn,pt-=xe*Fn;var Wn=Math.sqrt(tt*tt+pt*pt);return Fn/=Wn,F*(pt/=Wn)<xe*(tt/=Wn)&&(F=-F,xe=-xe,Fn=-Fn,hn=-hn),{scale:new tr(hn,0,0,Wn,0,0),translate:new tr(1,0,0,1,Mt,Ht),rotate:new tr(F,xe,-xe,F,0,0),skew:new tr(1,0,Fn,1,0,0)}},tr.prototype.toString=function(F){return this.join(" ")},tr.prototype.inversed=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Ht=this.ty,hn=1/(F*pt-xe*tt),Fn=pt*hn,Wn=-xe*hn,fr=-tt*hn,Er=F*hn;return new tr(Fn,Wn,fr,Er,-Fn*Mt-fr*Ht,-Wn*Mt-Er*Ht)},tr.prototype.applyToPoint=function(F){var xe=F.x*this.sx+F.y*this.shx+this.tx,tt=F.x*this.shy+F.y*this.sy+this.ty;return new zs(xe,tt)},tr.prototype.applyToRectangle=function(F){var xe=this.applyToPoint(F),tt=this.applyToPoint(new zs(F.x+F.w,F.y+F.h));return new ma(xe.x,xe.y,tt.x-xe.x,tt.y-xe.y)},tr.prototype.clone=function(){var F=this.sx,xe=this.shy,tt=this.shx,pt=this.sy,Mt=this.tx,Ht=this.ty;return new tr(F,xe,tt,pt,Mt,Ht)},g.Matrix=tr;var Ds=g.matrixMult=function(F,xe){return xe.multiply(F)},No=new tr(1,0,0,1,0,0);g.unitMatrix=g.identityMatrix=No;var lt=function(F,xe){if(!xn[F]){var tt=(xe instanceof rf?"Sh":"P")+(Object.keys(Qt).length+1).toString(10);xe.id=tt,xn[F]=tt,Qt[tt]=xe,qr.publish("addPattern",xe)}};g.ShadingPattern=rf,g.TilingPattern=up,g.addShadingPattern=function(F,xe){return N("addShadingPattern()"),lt(F,xe),this},g.beginTilingPattern=function(F){N("beginTilingPattern()"),va(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},g.endTilingPattern=function(F,xe){N("endTilingPattern()"),xe.stream=De[H].join(`
`),lt(F,xe),qr.publish("endTilingPattern",xe),Ts.pop().restore()};var Be=g.__private__.newObject=function(){var F=dt();return Ln(F,!0),F},dt=g.__private__.newObjectDeferred=function(){return fe++,de[fe]=function(){return J},fe},Ln=function(F,xe){return xe=typeof xe=="boolean"&&xe,de[F]=J,xe&&ue(F+" 0 obj"),F},Vn=g.__private__.newAdditionalObject=function(){var F={objId:dt(),content:""};return Re.push(F),F},En=dt(),jt=dt(),Hn=g.__private__.decodeColorString=function(F){var xe=F.split(" ");if(xe.length!==2||xe[1]!=="g"&&xe[1]!=="G")xe.length===5&&(xe[4]==="k"||xe[4]==="K")&&(xe=[(1-xe[0])*(1-xe[3]),(1-xe[1])*(1-xe[3]),(1-xe[2])*(1-xe[3]),"r"]);else{var tt=parseFloat(xe[0]);xe=[tt,tt,tt,"r"]}for(var pt="#",Mt=0;Mt<3;Mt++)pt+=("0"+Math.floor(255*parseFloat(xe[Mt])).toString(16)).slice(-2);return pt},St=g.__private__.encodeColorString=function(F){var xe;typeof F=="string"&&(F={ch1:F});var tt=F.ch1,pt=F.ch2,Mt=F.ch3,Ht=F.ch4,hn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof tt=="string"&&tt.charAt(0)!=="#"){var Fn=new qE(tt);if(Fn.ok)tt=Fn.toHex();else if(!/^\d*\.?\d*$/.test(tt))throw new Error('Invalid color "'+tt+'" passed to jsPDF.encodeColorString.')}if(typeof tt=="string"&&/^#[0-9A-Fa-f]{3}$/.test(tt)&&(tt="#"+tt[1]+tt[1]+tt[2]+tt[2]+tt[3]+tt[3]),typeof tt=="string"&&/^#[0-9A-Fa-f]{6}$/.test(tt)){var Wn=parseInt(tt.substr(1),16);tt=Wn>>16&255,pt=Wn>>8&255,Mt=255&Wn}if(pt===void 0||Ht===void 0&&tt===pt&&pt===Mt)if(typeof tt=="string")xe=tt+" "+hn[0];else switch(F.precision){case 2:xe=K(tt/255)+" "+hn[0];break;case 3:default:xe=I(tt/255)+" "+hn[0]}else if(Ht===void 0||cs(Ht)==="object"){if(Ht&&!isNaN(Ht.a)&&Ht.a===0)return xe=["1.","1.","1.",hn[1]].join(" ");if(typeof tt=="string")xe=[tt,pt,Mt,hn[1]].join(" ");else switch(F.precision){case 2:xe=[K(tt/255),K(pt/255),K(Mt/255),hn[1]].join(" ");break;default:case 3:xe=[I(tt/255),I(pt/255),I(Mt/255),hn[1]].join(" ")}}else if(typeof tt=="string")xe=[tt,pt,Mt,Ht,hn[2]].join(" ");else switch(F.precision){case 2:xe=[K(tt),K(pt),K(Mt),K(Ht),hn[2]].join(" ");break;case 3:default:xe=[I(tt),I(pt),I(Mt),I(Ht),hn[2]].join(" ")}return xe},qt=g.__private__.getFilters=function(){return o},Un=g.__private__.putStream=function(F){var xe=(F=F||{}).data||"",tt=F.filters||qt(),pt=F.alreadyAppliedFilters||[],Mt=F.addLength1||!1,Ht=xe.length,hn=F.objectId,Fn=function(ms){return ms};if(h!==null&&hn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Fn=ds.encryptor(hn,0));var Wn={};tt===!0&&(tt=["FlateEncode"]);var fr=F.additionalKeyValues||[],Er=(Wn=Nr.API.processDataByFilters!==void 0?Nr.API.processDataByFilters(xe,tt):{data:xe,reverseChain:[]}).reverseChain+(Array.isArray(pt)?pt.join(" "):pt.toString());if(Wn.data.length!==0&&(fr.push({key:"Length",value:Wn.data.length}),Mt===!0&&fr.push({key:"Length1",value:Ht})),Er.length!=0)if(Er.split("/").length-1==1)fr.push({key:"Filter",value:Er});else{fr.push({key:"Filter",value:"["+Er+"]"});for(var Ur=0;Ur<fr.length;Ur+=1)if(fr[Ur].key==="DecodeParms"){for(var qi=[],gi=0;gi<Wn.reverseChain.split("/").length-1;gi+=1)qi.push("null");qi.push(fr[Ur].value),fr[Ur].value="["+qi.join(" ")+"]"}}ue("<<");for(var Ci=0;Ci<fr.length;Ci++)ue("/"+fr[Ci].key+" "+fr[Ci].value);ue(">>"),Wn.data.length!==0&&(ue("stream"),ue(Fn(Wn.data)),ue("endstream"))},dr=g.__private__.putPage=function(F){var xe=F.number,tt=F.data,pt=F.objId,Mt=F.contentsObjId;Ln(pt,!0),ue("<</Type /Page"),ue("/Parent "+F.rootDictionaryObjId+" 0 R"),ue("/Resources "+F.resourceDictionaryObjId+" 0 R"),ue("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&ue("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&ue("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&ue("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&ue("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&ue("/UserUnit "+F.userUnit),qr.publish("putPage",{objId:pt,pageContext:ur[xe],pageNumber:xe,page:tt}),ue("/Contents "+Mt+" 0 R"),ue(">>"),ue("endobj");var Ht=tt.join(`
`);return z===D.ADVANCED&&(Ht+=`
Q`),Ln(Mt,!0),Un({data:Ht,filters:qt(),objectId:Mt}),ue("endobj"),pt},Lr=g.__private__.putPages=function(){var F,xe,tt=[];for(F=1;F<=xr;F++)ur[F].objId=dt(),ur[F].contentsObjId=dt();for(F=1;F<=xr;F++)tt.push(dr({number:F,data:De[F],objId:ur[F].objId,contentsObjId:ur[F].contentsObjId,mediaBox:ur[F].mediaBox,cropBox:ur[F].cropBox,bleedBox:ur[F].bleedBox,trimBox:ur[F].trimBox,artBox:ur[F].artBox,userUnit:ur[F].userUnit,rootDictionaryObjId:En,resourceDictionaryObjId:jt}));Ln(En,!0),ue("<</Type /Pages");var pt="/Kids [";for(xe=0;xe<xr;xe++)pt+=tt[xe]+" 0 R ";ue(pt+"]"),ue("/Count "+xr),ue(">>"),ue("endobj"),qr.publish("postPutPages")},pn=function(F){qr.publish("putFont",{font:F,out:ue,newObject:Be,putStream:Un}),F.isAlreadyPutted!==!0&&(F.objectNumber=Be(),ue("<<"),ue("/Type /Font"),ue("/BaseFont /"+op(F.postScriptName)),ue("/Subtype /Type1"),typeof F.encoding=="string"&&ue("/Encoding /"+F.encoding),ue("/FirstChar 32"),ue("/LastChar 255"),ue(">>"),ue("endobj"))},rn=function(){for(var F in mn)mn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&pn(mn[F])},zr=function(F){F.objectNumber=Be();var xe=[];xe.push({key:"Type",value:"/XObject"}),xe.push({key:"Subtype",value:"/Form"}),xe.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),xe.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var tt=F.pages[1].join(`
`);Un({data:tt,additionalKeyValues:xe,objectId:F.objectNumber}),ue("endobj")},Br=function(){for(var F in Ai)Ai.hasOwnProperty(F)&&zr(Ai[F])},zi=function(F,xe){var tt,pt=[],Mt=1/(xe-1);for(tt=0;tt<1;tt+=Mt)pt.push(tt);if(pt.push(1),F[0].offset!=0){var Ht={offset:0,color:F[0].color};F.unshift(Ht)}if(F[F.length-1].offset!=1){var hn={offset:1,color:F[F.length-1].color};F.push(hn)}for(var Fn="",Wn=0,fr=0;fr<pt.length;fr++){for(tt=pt[fr];tt>F[Wn+1].offset;)Wn++;var Er=F[Wn].offset,Ur=(tt-Er)/(F[Wn+1].offset-Er),qi=F[Wn].color,gi=F[Wn+1].color;Fn+=me(Math.round((1-Ur)*qi[0]+Ur*gi[0]).toString(16))+me(Math.round((1-Ur)*qi[1]+Ur*gi[1]).toString(16))+me(Math.round((1-Ur)*qi[2]+Ur*gi[2]).toString(16))}return Fn.trim()},Qr=function(F,xe){xe||(xe=21);var tt=Be(),pt=zi(F.colors,xe),Mt=[];Mt.push({key:"FunctionType",value:"0"}),Mt.push({key:"Domain",value:"[0.0 1.0]"}),Mt.push({key:"Size",value:"["+xe+"]"}),Mt.push({key:"BitsPerSample",value:"8"}),Mt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Mt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Un({data:pt,additionalKeyValues:Mt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:tt}),ue("endobj"),F.objectNumber=Be(),ue("<< /ShadingType "+F.type),ue("/ColorSpace /DeviceRGB");var Ht="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),ue(Ht+="]"),F.matrix&&ue("/Matrix ["+F.matrix.toString()+"]"),ue("/Function "+tt+" 0 R"),ue("/Extend [true true]"),ue(">>"),ue("endobj")},_r=function(F,xe){var tt=dt(),pt=Be();xe.push({resourcesOid:tt,objectOid:pt}),F.objectNumber=pt;var Mt=[];Mt.push({key:"Type",value:"/Pattern"}),Mt.push({key:"PatternType",value:"1"}),Mt.push({key:"PaintType",value:"1"}),Mt.push({key:"TilingType",value:"1"}),Mt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Mt.push({key:"XStep",value:pe(F.xStep)}),Mt.push({key:"YStep",value:pe(F.yStep)}),Mt.push({key:"Resources",value:tt+" 0 R"}),F.matrix&&Mt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Un({data:F.stream,additionalKeyValues:Mt,objectId:F.objectNumber}),ue("endobj")},Ar=function(F){var xe;for(xe in Qt)Qt.hasOwnProperty(xe)&&(Qt[xe]instanceof rf?Qr(Qt[xe]):Qt[xe]instanceof up&&_r(Qt[xe],F))},hi=function(F){for(var xe in F.objectNumber=Be(),ue("<<"),F)switch(xe){case"opacity":ue("/ca "+K(F[xe]));break;case"stroke-opacity":ue("/CA "+K(F[xe]))}ue(">>"),ue("endobj")},Rr=function(){var F;for(F in Cn)Cn.hasOwnProperty(F)&&hi(Cn[F])},an=function(){for(var F in ue("/XObject <<"),Ai)Ai.hasOwnProperty(F)&&Ai[F].objectNumber>=0&&ue("/"+F+" "+Ai[F].objectNumber+" 0 R");qr.publish("putXobjectDict"),ue(">>")},Ni=function(){ds.oid=Be(),ue("<<"),ue("/Filter /Standard"),ue("/V "+ds.v),ue("/R "+ds.r),ue("/U <"+ds.toHexString(ds.U)+">"),ue("/O <"+ds.toHexString(ds.O)+">"),ue("/P "+ds.P),ue(">>"),ue("endobj")},vi=function(){for(var F in ue("/Font <<"),mn)mn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&ue("/"+F+" "+mn[F].objectNumber+" 0 R");ue(">>")},Ki=function(){if(Object.keys(Qt).length>0){for(var F in ue("/Shading <<"),Qt)Qt.hasOwnProperty(F)&&Qt[F]instanceof rf&&Qt[F].objectNumber>=0&&ue("/"+F+" "+Qt[F].objectNumber+" 0 R");qr.publish("putShadingPatternDict"),ue(">>")}},ei=function(F){if(Object.keys(Qt).length>0){for(var xe in ue("/Pattern <<"),Qt)Qt.hasOwnProperty(xe)&&Qt[xe]instanceof g.TilingPattern&&Qt[xe].objectNumber>=0&&Qt[xe].objectNumber<F&&ue("/"+xe+" "+Qt[xe].objectNumber+" 0 R");qr.publish("putTilingPatternDict"),ue(">>")}},hr=function(){if(Object.keys(Cn).length>0){var F;for(F in ue("/ExtGState <<"),Cn)Cn.hasOwnProperty(F)&&Cn[F].objectNumber>=0&&ue("/"+F+" "+Cn[F].objectNumber+" 0 R");qr.publish("putGStateDict"),ue(">>")}},Dn=function(F){Ln(F.resourcesOid,!0),ue("<<"),ue("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),vi(),Ki(),ei(F.objectOid),hr(),an(),ue(">>"),ue("endobj")},Sr=function(){var F=[];rn(),Rr(),Br(),Ar(F),qr.publish("putResources"),F.forEach(Dn),Dn({resourcesOid:jt,objectOid:Number.MAX_SAFE_INTEGER}),qr.publish("postPutResources")},ws=function(){qr.publish("putAdditionalObjects");for(var F=0;F<Re.length;F++){var xe=Re[F];Ln(xe.objId,!0),ue(xe.content),ue("endobj")}qr.publish("postPutAdditionalObjects")},mo=function(F){Tn[F.fontName]=Tn[F.fontName]||{},Tn[F.fontName][F.fontStyle]=F.id},cr=function(F,xe,tt,pt,Mt){var Ht={id:"F"+(Object.keys(mn).length+1).toString(10),postScriptName:F,fontName:xe,fontStyle:tt,encoding:pt,isStandardFont:Mt||!1,metadata:{}};return qr.publish("addFont",{font:Ht,instance:this}),mn[Ht.id]=Ht,mo(Ht),Ht.id},Sn=function(F){for(var xe=0,tt=ye.length;xe<tt;xe++){var pt=cr.call(this,F[xe][0],F[xe][1],F[xe][2],ye[xe][3],!0);p===!1&&(v[pt]=!0);var Mt=F[xe][0].split("-");mo({id:pt,fontName:Mt[0],fontStyle:Mt[1]||""})}qr.publish("addFonts",{fonts:mn,dictionary:Tn})},sn=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(pt){var xe=pt.stack||"";~xe.indexOf(" at ")&&(xe=xe.split(" at ")[1]);var tt="Error in function "+xe.split(`
`)[0].split("<")[0]+": "+pt.message;if(!jr.console)throw new Error(tt);jr.console.error(tt,pt),jr.alert&&alert(tt)}},F.foo.bar=F,F.foo},yi=function(F,xe){var tt,pt,Mt,Ht,hn,Fn,Wn,fr,Er;if(Mt=(xe=xe||{}).sourceEncoding||"Unicode",hn=xe.outputEncoding,(xe.autoencode||hn)&&mn[at].metadata&&mn[at].metadata[Mt]&&mn[at].metadata[Mt].encoding&&(Ht=mn[at].metadata[Mt].encoding,!hn&&mn[at].encoding&&(hn=mn[at].encoding),!hn&&Ht.codePages&&(hn=Ht.codePages[0]),typeof hn=="string"&&(hn=Ht[hn]),hn)){for(Wn=!1,Fn=[],tt=0,pt=F.length;tt<pt;tt++)(fr=hn[F.charCodeAt(tt)])?Fn.push(String.fromCharCode(fr)):Fn.push(F[tt]),Fn[tt].charCodeAt(0)>>8&&(Wn=!0);F=Fn.join("")}for(tt=F.length;Wn===void 0&&tt!==0;)F.charCodeAt(tt-1)>>8&&(Wn=!0),tt--;if(!Wn)return F;for(Fn=xe.noBOM?[]:[254,255],tt=0,pt=F.length;tt<pt;tt++){if((Er=(fr=F.charCodeAt(tt))>>8)>>8)throw new Error("Character at position "+tt+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Fn.push(Er),Fn.push(fr-(Er<<8))}return String.fromCharCode.apply(void 0,Fn)},ti=g.__private__.pdfEscape=g.pdfEscape=function(F,xe){return yi(F,xe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},bi=g.__private__.beginPage=function(F){De[++xr]=[],ur[xr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},js(xr),se(De[H])},Zs=function(F,xe){var tt,pt,Mt;switch(n=xe||n,typeof F=="string"&&(tt=A(F.toLowerCase()),Array.isArray(tt)&&(pt=tt[0],Mt=tt[1])),Array.isArray(F)&&(pt=F[0]*it,Mt=F[1]*it),isNaN(pt)&&(pt=i[0],Mt=i[1]),(pt>14400||Mt>14400)&&(bs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),pt=Math.min(14400,pt),Mt=Math.min(14400,Mt)),i=[pt,Mt],n.substr(0,1)){case"l":Mt>pt&&(i=[Mt,pt]);break;case"p":pt>Mt&&(i=[Mt,pt])}bi(i),lu(ku),ue(Zi),du!==0&&ue(du+" J"),Li!==0&&ue(Li+" j"),qr.publish("addPage",{pageNumber:xr})},vo=function(F){F>0&&F<=xr&&(De.splice(F,1),ur.splice(F,1),xr--,H>xr&&(H=xr),this.setPage(H))},js=function(F){F>0&&F<=xr&&(H=F)},yr=g.__private__.getNumberOfPages=g.getNumberOfPages=function(){return De.length-1},Xs=function(F,xe,tt){var pt,Mt=void 0;return tt=tt||{},F=F!==void 0?F:mn[at].fontName,xe=xe!==void 0?xe:mn[at].fontStyle,pt=F.toLowerCase(),Tn[pt]!==void 0&&Tn[pt][xe]!==void 0?Mt=Tn[pt][xe]:Tn[F]!==void 0&&Tn[F][xe]!==void 0?Mt=Tn[F][xe]:tt.disableWarning===!1&&bs.warn("Unable to look up font label for font '"+F+"', '"+xe+"'. Refer to getFontList() for available fonts."),Mt||tt.noFallback||(Mt=Tn.times[xe])==null&&(Mt=Tn.times.normal),Mt},Vi=g.__private__.putInfo=function(){var F=Be(),xe=function(pt){return pt};for(var tt in h!==null&&(xe=ds.encryptor(F,0)),ue("<<"),ue("/Producer ("+ti(xe("jsPDF "+Nr.version))+")"),Qe)Qe.hasOwnProperty(tt)&&Qe[tt]&&ue("/"+tt.substr(0,1).toUpperCase()+tt.substr(1)+" ("+ti(xe(Qe[tt]))+")");ue("/CreationDate ("+ti(xe(U))+")"),ue(">>"),ue("endobj")},Gi=g.__private__.putCatalog=function(F){var xe=(F=F||{}).rootDictionaryObjId||En;switch(Be(),ue("<<"),ue("/Type /Catalog"),ue("/Pages "+xe+" 0 R"),Ye||(Ye="fullwidth"),Ye){case"fullwidth":ue("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ue("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ue("/OpenAction [3 0 R /Fit]");break;case"original":ue("/OpenAction [3 0 R /XYZ null null 1]");break;default:var tt=""+Ye;tt.substr(tt.length-1)==="%"&&(Ye=parseInt(Ye)/100),typeof Ye=="number"&&ue("/OpenAction [3 0 R /XYZ null null "+K(Ye)+"]")}switch(Ut||(Ut="continuous"),Ut){case"continuous":ue("/PageLayout /OneColumn");break;case"single":ue("/PageLayout /SinglePage");break;case"two":case"twoleft":ue("/PageLayout /TwoColumnLeft");break;case"tworight":ue("/PageLayout /TwoColumnRight")}Ge&&ue("/PageMode /"+Ge),qr.publish("putCatalog"),ue(">>"),ue("endobj")},fi=g.__private__.putTrailer=function(){ue("trailer"),ue("<<"),ue("/Size "+(fe+1)),ue("/Root "+fe+" 0 R"),ue("/Info "+(fe-1)+" 0 R"),h!==null&&ue("/Encrypt "+ds.oid+" 0 R"),ue("/ID [ <"+V+"> <"+V+"> ]"),ue(">>")},Mn=g.__private__.putHeader=function(){ue("%PDF-"+x),ue("%")},vn=g.__private__.putXRef=function(){var F="0000000000";ue("xref"),ue("0 "+(fe+1)),ue("0000000000 65535 f ");for(var xe=1;xe<=fe;xe++)typeof de[xe]=="function"?ue((F+de[xe]()).slice(-10)+" 00000 n "):de[xe]!==void 0?ue((F+de[xe]).slice(-10)+" 00000 n "):ue("0000000000 00000 n ")},Yr=g.__private__.buildDocument=function(){Q(),se(ce),qr.publish("buildDocument"),Mn(),Lr(),ws(),Sr(),h!==null&&Ni(),Vi(),Gi();var F=J;return vn(),fi(),ue("startxref"),ue(""+F),ue("%%EOF"),se(De[H]),ce.join(`
`)},xs=g.__private__.getBlob=function(F){return new Blob([Ce(F)],{type:"application/pdf"})},Js=g.output=g.__private__.output=sn(function(F,xe){switch(typeof(xe=xe||{})=="string"?xe={filename:xe}:xe.filename=xe.filename||"generated.pdf",F){case void 0:return Yr();case"save":g.save(xe.filename);break;case"arraybuffer":return Ce(Yr());case"blob":return xs(Yr());case"bloburi":case"bloburl":if(jr.URL!==void 0&&typeof jr.URL.createObjectURL=="function")return jr.URL&&jr.URL.createObjectURL(xs(Yr()))||void 0;bs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var tt="",pt=Yr();try{tt=Pb(pt)}catch{tt=Pb(unescape(encodeURIComponent(pt)))}return"data:application/pdf;filename="+xe.filename+";base64,"+tt;case"pdfobjectnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Mt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';xe.pdfObjectUrl&&(Mt=xe.pdfObjectUrl,Ht="");var hn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Mt+'"'+Ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(xe)+");<\/script></body></html>",Fn=jr.open();return Fn!==null&&Fn.document.write(hn),Fn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(jr)==="[object Window]"){var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(xe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+xe.filename+'" width="500px" height="400px" /></body></html>',fr=jr.open();if(fr!==null){fr.document.write(Wn);var Er=this;fr.document.documentElement.querySelector("#pdfViewer").onload=function(){fr.document.title=xe.filename,fr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Er.output("bloburl"))}}return fr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(jr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ur='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",xe)+'"></iframe></body></html>',qi=jr.open();if(qi!==null&&(qi.document.write(Ur),qi.document.title=xe.filename),qi||typeof safari>"u")return qi;break;case"datauri":case"dataurl":return jr.document.location.href=this.output("datauristring",xe);default:return null}}),qa=function(F){return Array.isArray(Fs)===!0&&Fs.indexOf(F)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=qa("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var ds=null;Ze(),X();var Ma=function(F){return h!==null?ds.encryptor(F,0):function(xe){return xe}},bl=g.__private__.getPageInfo=g.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ur[F].objId,pageNumber:F,pageContext:ur[F]}},$n=g.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var xe in ur)if(ur[xe].objId===F)break;return bl(xe)},Cr=g.__private__.getCurrentPageInfo=g.getCurrentPageInfo=function(){return{objId:ur[H].objId,pageNumber:H,pageContext:ur[H]}};g.addPage=function(){return Zs.apply(this,arguments),this},g.setPage=function(){return js.apply(this,arguments),se.call(this,De[H]),this},g.insertPage=function(F){return this.addPage(),this.movePage(H,F),this},g.movePage=function(F,xe){var tt,pt;if(F>xe){tt=De[F],pt=ur[F];for(var Mt=F;Mt>xe;Mt--)De[Mt]=De[Mt-1],ur[Mt]=ur[Mt-1];De[xe]=tt,ur[xe]=pt,this.setPage(xe)}else if(F<xe){tt=De[F],pt=ur[F];for(var Ht=F;Ht<xe;Ht++)De[Ht]=De[Ht+1],ur[Ht]=ur[Ht+1];De[xe]=tt,ur[xe]=pt,this.setPage(xe)}return this},g.deletePage=function(){return vo.apply(this,arguments),this},g.__private__.text=g.text=function(F,xe,tt,pt,Mt){var Ht,hn,Fn,Wn,fr,Er,Ur,qi,gi,Ci=(pt=pt||{}).scope||this;if(typeof F=="number"&&typeof xe=="number"&&(typeof tt=="string"||Array.isArray(tt))){var ms=tt;tt=xe,xe=F,F=ms}if(arguments[3]instanceof tr?(N("The transform parameter of text() with a Matrix value"),gi=Mt):(Fn=arguments[4],Wn=arguments[5],cs(Ur=arguments[3])==="object"&&Ur!==null||(typeof Fn=="string"&&(Wn=Fn,Fn=null),typeof Ur=="string"&&(Wn=Ur,Ur=null),typeof Ur=="number"&&(Fn=Ur,Ur=null),pt={flags:Ur,angle:Fn,align:Wn})),isNaN(xe)||isNaN(tt)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Ci;var Ls="",Qo=!1,Hr=typeof pt.lineHeightFactor=="number"?pt.lineHeightFactor:au,eo=Ci.internal.scaleFactor;function jl(Pi){return Pi=Pi.split("	").join(Array(pt.TabLen||9).join(" ")),ti(Pi,Ur)}function bo(Pi){for(var Ii,vs=Pi.concat(),Ui=[],na=vs.length;na--;)typeof(Ii=vs.shift())=="string"?Ui.push(Ii):Array.isArray(Pi)&&(Ii.length===1||Ii[1]===void 0&&Ii[2]===void 0)?Ui.push(Ii[0]):Ui.push([Ii[0],Ii[1],Ii[2]]);return Ui}function Du(Pi,Ii){var vs;if(typeof Pi=="string")vs=Ii(Pi)[0];else if(Array.isArray(Pi)){for(var Ui,na,Bo=Pi.concat(),aa=[],ec=Bo.length;ec--;)typeof(Ui=Bo.shift())=="string"?aa.push(Ii(Ui)[0]):Array.isArray(Ui)&&typeof Ui[0]=="string"&&(na=Ii(Ui[0],Ui[1],Ui[2]),aa.push([na[0],na[1],na[2]]));vs=aa}return vs}var Oa=!1,Qu=!0;if(typeof F=="string")Oa=!0;else if(Array.isArray(F)){var wl=F.concat();hn=[];for(var xl,Ss=wl.length;Ss--;)(typeof(xl=wl.shift())!="string"||Array.isArray(xl)&&typeof xl[0]!="string")&&(Qu=!1);Oa=Qu}if(Oa===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var Na=Ve/Ci.internal.scaleFactor,ea=Na*(Hr-1);switch(pt.baseline){case"bottom":tt-=ea;break;case"top":tt+=Na-ea;break;case"hanging":tt+=Na-2*ea;break;case"middle":tt+=Na/2-ea}if((Er=pt.maxWidth||0)>0&&(typeof F=="string"?F=Ci.splitTextToSize(F,Er):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Pi,Ii){return Pi.concat(Ci.splitTextToSize(Ii,Er))},[]))),Ht={text:F,x:xe,y:tt,options:pt,mutex:{pdfEscape:ti,activeFontKey:at,fonts:mn,activeFontSize:Ve}},qr.publish("preProcessText",Ht),F=Ht.text,Fn=(pt=Ht.options).angle,!(gi instanceof tr)&&Fn&&typeof Fn=="number"){Fn*=Math.PI/180,pt.rotationDirection===0&&(Fn=-Fn),z===D.ADVANCED&&(Fn=-Fn);var Io=Math.cos(Fn),zl=Math.sin(Fn);gi=new tr(Io,zl,-zl,Io,0,0)}else Fn&&Fn instanceof tr&&(gi=Fn);z!==D.ADVANCED||gi||(gi=No),(fr=pt.charSpace||cu)!==void 0&&(Ls+=pe(R(fr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(qi=pt.horizontalScale)!==void 0&&(Ls+=pe(100*qi)+` Tz
`),pt.lang;var to=-1,_o=pt.renderingMode!==void 0?pt.renderingMode:pt.stroke,wo=Ci.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Ac=wo.usedRenderingMode!==void 0?wo.usedRenderingMode:-1;to!==-1?Ls+=to+` Tr
`:Ac!==-1&&(Ls+=`0 Tr
`),to!==-1&&(wo.usedRenderingMode=to),Wn=pt.align||"left";var Os,Za=Ve*Hr,no=Ci.internal.pageSize.getWidth(),ro=mn[at];fr=pt.charSpace||cu,Er=pt.maxWidth||0,Ur=Object.assign({autoencode:!0,noBOM:!0},pt.flags);var Xa=[],Ja=function(Pi){return Ci.getStringUnitWidth(Pi,{font:ro,charSpace:fr,fontSize:Ve,doKerning:!1})*Ve/eo};if(Object.prototype.toString.call(F)==="[object Array]"){var io;hn=bo(F),Wn!=="left"&&(Os=hn.map(Ja));var $s,Ia=0;if(Wn==="right"){xe-=Os[0],F=[],Ss=hn.length;for(var ta=0;ta<Ss;ta++)ta===0?($s=gr(xe),io=ps(tt)):($s=R(Ia-Os[ta]),io=-Za),F.push([hn[ta],$s,io]),Ia=Os[ta]}else if(Wn==="center"){xe-=Os[0]/2,F=[],Ss=hn.length;for(var so=0;so<Ss;so++)so===0?($s=gr(xe),io=ps(tt)):($s=R((Ia-Os[so])/2),io=-Za),F.push([hn[so],$s,io]),Ia=Os[so]}else if(Wn==="left"){F=[],Ss=hn.length;for(var Lt=0;Lt<Ss;Lt++)F.push(hn[Lt])}else if(Wn==="justify"&&ro.encoding==="Identity-H"){F=[],Ss=hn.length,Er=Er!==0?Er:no;for(var Yt=0,Nt=0;Nt<Ss;Nt++)if(io=Nt===0?ps(tt):-Za,$s=Nt===0?gr(xe):Yt,Nt<Ss-1){var Bn=R((Er-Os[Nt])/(hn[Nt].split(" ").length-1)),nr=hn[Nt].split(" ");F.push([nr[0]+" ",$s,io]),Yt=0;for(var Mr=1;Mr<nr.length;Mr++){var Xi=(Ja(nr[Mr-1]+" "+nr[Mr])-Ja(nr[Mr]))*eo+Bn;Mr==nr.length-1?F.push([nr[Mr],Xi,0]):F.push([nr[Mr]+" ",Xi,0]),Yt-=Xi}}else F.push([hn[Nt],$s,io]);F.push(["",Yt,0])}else{if(Wn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],Ss=hn.length,Er=Er!==0?Er:no,Nt=0;Nt<Ss;Nt++)io=Nt===0?ps(tt):-Za,$s=Nt===0?gr(xe):0,Nt<Ss-1?Xa.push(pe(R((Er-Os[Nt])/(hn[Nt].split(" ").length-1)))):Xa.push(0),F.push([hn[Nt],$s,io])}}var Ei=typeof pt.R2L=="boolean"?pt.R2L:_t;Ei===!0&&(F=Du(F,function(Pi,Ii,vs){return[Pi.split("").reverse().join(""),Ii,vs]})),Ht={text:F,x:xe,y:tt,options:pt,mutex:{pdfEscape:ti,activeFontKey:at,fonts:mn,activeFontSize:Ve}},qr.publish("postProcessText",Ht),F=Ht.text,Qo=Ht.mutex.isHex||!1;var fu=mn[at].encoding;fu!=="WinAnsiEncoding"&&fu!=="StandardEncoding"||(F=Du(F,function(Pi,Ii,vs){return[jl(Pi),Ii,vs]})),hn=bo(F),F=[];for(var xo,Ji,Ba,Qa=0,Ra=1,Fa=Array.isArray(hn[0])?Ra:Qa,ja="",ri=function(Pi,Ii,vs){var Ui="";return vs instanceof tr?(vs=typeof pt.angle=="number"?Ds(vs,new tr(1,0,0,1,Pi,Ii)):Ds(new tr(1,0,0,1,Pi,Ii),vs),z===D.ADVANCED&&(vs=Ds(new tr(1,0,0,-1,0,0),vs)),Ui=vs.join(" ")+` Tm
`):Ui=pe(Pi)+" "+pe(Ii)+` Td
`,Ui},ya=0;ya<hn.length;ya++){switch(ja="",Fa){case Ra:Ba=(Qo?"<":"(")+hn[ya][0]+(Qo?">":")"),xo=parseFloat(hn[ya][1]),Ji=parseFloat(hn[ya][2]);break;case Qa:Ba=(Qo?"<":"(")+hn[ya]+(Qo?">":")"),xo=gr(xe),Ji=ps(tt)}Xa!==void 0&&Xa[ya]!==void 0&&(ja=Xa[ya]+` Tw
`),ya===0?F.push(ja+ri(xo,Ji,gi)+Ba):Fa===Qa?F.push(ja+Ba):Fa===Ra&&F.push(ja+ri(xo,Ji,gi)+Ba)}F=Fa===Qa?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Vs=`BT
/`;return Vs+=at+" "+Ve+` Tf
`,Vs+=pe(Ve*Hr)+` TL
`,Vs+=Da+`
`,Vs+=Ls,Vs+=F,ue(Vs+="ET"),v[at]=!0,Ci};var is=g.__private__.clip=g.clip=function(F){return ue(F==="evenodd"?"W*":"W"),this};g.clipEvenOdd=function(){return is("evenodd")},g.__private__.discardPath=g.discardPath=function(){return ue("n"),this};var Tr=g.__private__.isValidStyle=function(F){var xe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(xe=!0),xe};g.__private__.setDefaultPathOperation=g.setDefaultPathOperation=function(F){return Tr(F)&&(c=F),this};var Zo=g.__private__.getStyle=g.getStyle=function(F){var xe=c;switch(F){case"D":case"S":xe="S";break;case"F":xe="f";break;case"FD":case"DF":xe="B";break;case"f":case"f*":case"B":case"B*":xe=F}return xe},ka=g.close=function(){return ue("h"),this};g.stroke=function(){return ue("S"),this},g.fill=function(F){return Aa("f",F),this},g.fillEvenOdd=function(F){return Aa("f*",F),this},g.fillStroke=function(F){return Aa("B",F),this},g.fillStrokeEvenOdd=function(F){return Aa("B*",F),this};var Aa=function(F,xe){cs(xe)==="object"?_l(xe,F):ue(F)},Xo=function(F){F===null||z===D.ADVANCED&&F===void 0||(F=Zo(F),ue(F))};function sa(F,xe,tt,pt,Mt){var Ht=new up(xe||this.boundingBox,tt||this.xStep,pt||this.yStep,this.gState,Mt||this.matrix);Ht.stream=this.stream;var hn=F+"$$"+this.cloneIndex+++"$$";return lt(hn,Ht),Ht}var _l=function(F,xe){var tt=xn[F.key],pt=Qt[tt];if(pt instanceof rf)ue("q"),ue(Ta(xe)),pt.gState&&g.setGState(pt.gState),ue(F.matrix.toString()+" cm"),ue("/"+tt+" sh"),ue("Q");else if(pt instanceof up){var Mt=new tr(1,0,0,-1,0,Ka());F.matrix&&(Mt=Mt.multiply(F.matrix||No),tt=sa.call(pt,F.key,F.boundingBox,F.xStep,F.yStep,Mt).id),ue("q"),ue("/Pattern cs"),ue("/"+tt+" scn"),pt.gState&&g.setGState(pt.gState),ue(xe),ue("Q")}},Ta=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Pr=g.moveTo=function(F,xe){return ue(pe(R(F))+" "+pe($(xe))+" m"),this},Kn=g.lineTo=function(F,xe){return ue(pe(R(F))+" "+pe($(xe))+" l"),this},Qs=g.curveTo=function(F,xe,tt,pt,Mt,Ht){return ue([pe(R(F)),pe($(xe)),pe(R(tt)),pe($(pt)),pe(R(Mt)),pe($(Ht)),"c"].join(" ")),this};g.__private__.line=g.line=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Tr(Mt))throw new Error("Invalid arguments passed to jsPDF.line");return z===D.COMPAT?this.lines([[tt-F,pt-xe]],F,xe,[1,1],Mt||"S"):this.lines([[tt-F,pt-xe]],F,xe,[1,1]).stroke()},g.__private__.lines=g.lines=function(F,xe,tt,pt,Mt,Ht){var hn,Fn,Wn,fr,Er,Ur,qi,gi,Ci,ms,Ls,Qo;if(typeof F=="number"&&(Qo=tt,tt=xe,xe=F,F=Qo),pt=pt||[1,1],Ht=Ht||!1,isNaN(xe)||isNaN(tt)||!Array.isArray(F)||!Array.isArray(pt)||!Tr(Mt)||typeof Ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Pr(xe,tt),hn=pt[0],Fn=pt[1],fr=F.length,ms=xe,Ls=tt,Wn=0;Wn<fr;Wn++)(Er=F[Wn]).length===2?(ms=Er[0]*hn+ms,Ls=Er[1]*Fn+Ls,Kn(ms,Ls)):(Ur=Er[0]*hn+ms,qi=Er[1]*Fn+Ls,gi=Er[2]*hn+ms,Ci=Er[3]*Fn+Ls,ms=Er[4]*hn+ms,Ls=Er[5]*Fn+Ls,Qs(Ur,qi,gi,Ci,ms,Ls));return Ht&&ka(),Xo(Mt),this},g.path=function(F){for(var xe=0;xe<F.length;xe++){var tt=F[xe],pt=tt.c;switch(tt.op){case"m":Pr(pt[0],pt[1]);break;case"l":Kn(pt[0],pt[1]);break;case"c":Qs.apply(this,pt);break;case"h":ka()}}return this},g.__private__.rect=g.rect=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Tr(Mt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===D.COMPAT&&(pt=-pt),ue([pe(R(F)),pe($(xe)),pe(R(tt)),pe(R(pt)),"re"].join(" ")),Xo(Mt),this},g.__private__.triangle=g.triangle=function(F,xe,tt,pt,Mt,Ht,hn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||isNaN(Mt)||isNaN(Ht)||!Tr(hn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[tt-F,pt-xe],[Mt-tt,Ht-pt],[F-Mt,xe-Ht]],F,xe,[1,1],hn,!0),this},g.__private__.roundedRect=g.roundedRect=function(F,xe,tt,pt,Mt,Ht,hn){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||isNaN(Mt)||isNaN(Ht)||!Tr(hn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Fn=4/3*(Math.SQRT2-1);return Mt=Math.min(Mt,.5*tt),Ht=Math.min(Ht,.5*pt),this.lines([[tt-2*Mt,0],[Mt*Fn,0,Mt,Ht-Ht*Fn,Mt,Ht],[0,pt-2*Ht],[0,Ht*Fn,-Mt*Fn,Ht,-Mt,Ht],[2*Mt-tt,0],[-Mt*Fn,0,-Mt,-Ht*Fn,-Mt,-Ht],[0,2*Ht-pt],[0,-Ht*Fn,Mt*Fn,-Ht,Mt,-Ht]],F+Mt,xe,[1,1],hn,!0),this},g.__private__.ellipse=g.ellipse=function(F,xe,tt,pt,Mt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||isNaN(pt)||!Tr(Mt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ht=4/3*(Math.SQRT2-1)*tt,hn=4/3*(Math.SQRT2-1)*pt;return Pr(F+tt,xe),Qs(F+tt,xe-hn,F+Ht,xe-pt,F,xe-pt),Qs(F-Ht,xe-pt,F-tt,xe-hn,F-tt,xe),Qs(F-tt,xe+hn,F-Ht,xe+pt,F,xe+pt),Qs(F+Ht,xe+pt,F+tt,xe+hn,F+tt,xe),Xo(Mt),this},g.__private__.circle=g.circle=function(F,xe,tt,pt){if(isNaN(F)||isNaN(xe)||isNaN(tt)||!Tr(pt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,xe,tt,tt,pt)},g.setFont=function(F,xe,tt){return tt&&(xe=ge(xe,tt)),at=Xs(F,xe,{disableWarning:!1}),this};var yo=g.__private__.getFont=g.getFont=function(){return mn[Xs.apply(g,arguments)]};g.__private__.getFontList=g.getFontList=function(){var F,xe,tt={};for(F in Tn)if(Tn.hasOwnProperty(F))for(xe in tt[F]=[],Tn[F])Tn[F].hasOwnProperty(xe)&&tt[F].push(xe);return tt},g.addFont=function(F,xe,tt,pt,Mt){var Ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ht.indexOf(arguments[3])!==-1?Mt=arguments[3]:arguments[3]&&Ht.indexOf(arguments[3])==-1&&(tt=ge(tt,pt)),Mt=Mt||"Identity-H",cr.call(this,F,xe,tt,Mt)};var au,ku=t.lineWidth||.200025,Il=g.__private__.getLineWidth=g.getLineWidth=function(){return ku},lu=g.__private__.setLineWidth=g.setLineWidth=function(F){return ku=F,ue(pe(R(F))+" w"),this};g.__private__.setLineDash=Nr.API.setLineDash=Nr.API.setLineDashPattern=function(F,xe){if(F=F||[],xe=xe||0,isNaN(xe)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(tt){return pe(R(tt))}).join(" "),xe=pe(R(xe)),ue("["+F+"] "+xe+" d"),this};var Au=g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*au};g.__private__.getLineHeight=g.getLineHeight=function(){return Ve*au};var ni=g.__private__.setLineHeightFactor=g.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(au=F),this},fs=g.__private__.getLineHeightFactor=g.getLineHeightFactor=function(){return au};ni(t.lineHeight);var gr=g.__private__.getHorizontalCoordinate=function(F){return R(F)},ps=g.__private__.getVerticalCoordinate=function(F){return z===D.ADVANCED?F:ur[H].mediaBox.topRightY-ur[H].mediaBox.bottomLeftY-R(F)},Bl=g.__private__.getHorizontalCoordinateString=g.getHorizontalCoordinateString=function(F){return pe(gr(F))},Ya=g.__private__.getVerticalCoordinateString=g.getVerticalCoordinateString=function(F){return pe(ps(F))},Zi=t.strokeColor||"0 G";g.__private__.getStrokeColor=g.getDrawColor=function(){return Hn(Zi)},g.__private__.setStrokeColor=g.setDrawColor=function(F,xe,tt,pt){return Zi=St({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"draw",precision:2}),ue(Zi),this};var Tu=t.fillColor||"0 g";g.__private__.getFillColor=g.getFillColor=function(){return Hn(Tu)},g.__private__.setFillColor=g.setFillColor=function(F,xe,tt,pt){return Tu=St({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"fill",precision:2}),ue(Tu),this};var Da=t.textColor||"0 g",uu=g.__private__.getTextColor=g.getTextColor=function(){return Hn(Da)};g.__private__.setTextColor=g.setTextColor=function(F,xe,tt,pt){return Da=St({ch1:F,ch2:xe,ch3:tt,ch4:pt,pdfColorType:"text",precision:3}),this};var cu=t.charSpace,oa=g.__private__.getCharSpace=g.getCharSpace=function(){return parseFloat(cu||0)};g.__private__.setCharSpace=g.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cu=F,this};var du=0;g.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},g.__private__.setLineCap=g.setLineCap=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return du=xe,ue(xe+" J"),this};var Li=0;g.__private__.setLineJoin=g.setLineJoin=function(F){var xe=g.CapJoinStyles[F];if(xe===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=xe,ue(xe+" j"),this},g.__private__.setLineMiterLimit=g.__private__.setMiterLimit=g.setLineMiterLimit=g.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ue(pe(R(F))+" M"),this},g.GState=Yv,g.setGState=function(F){(F=typeof F=="string"?Cn[er[F]]:kc(null,F)).equals(vr)||(ue("/"+F.id+" gs"),vr=F)};var kc=function(F,xe){if(!F||!er[F]){var tt=!1;for(var pt in Cn)if(Cn.hasOwnProperty(pt)&&Cn[pt].equals(xe)){tt=!0;break}if(tt)xe=Cn[pt];else{var Mt="GS"+(Object.keys(Cn).length+1).toString(10);Cn[Mt]=xe,xe.id=Mt}return F&&(er[F]=xe.id),qr.publish("addGState",xe),xe}};g.addGState=function(F,xe){return kc(F,xe),this},g.saveGraphicsState=function(){return ue("q"),Qn.push({key:at,size:Ve,color:Da}),this},g.restoreGraphicsState=function(){ue("Q");var F=Qn.pop();return at=F.key,Ve=F.size,Da=F.color,vr=null,this},g.setCurrentTransformationMatrix=function(F){return ue(F.toString()+" cm"),this},g.comment=function(F){return ue("#"+F),this};var zs=function(F,xe){var tt=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return tt},set:function(Ht){isNaN(Ht)||(tt=parseFloat(Ht))}});var pt=xe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return pt},set:function(Ht){isNaN(Ht)||(pt=parseFloat(Ht))}});var Mt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Mt},set:function(Ht){Mt=Ht.toString()}}),this},ma=function(F,xe,tt,pt){zs.call(this,F,xe),this.type="rect";var Mt=tt||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Mt},set:function(hn){isNaN(hn)||(Mt=parseFloat(hn))}});var Ht=pt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ht},set:function(hn){isNaN(hn)||(Ht=parseFloat(hn))}}),this},hu=function(){this.page=xr,this.currentPage=H,this.pages=De.slice(0),this.pagesContext=ur.slice(0),this.x=$t,this.y=Zt,this.matrix=On,this.width=Si(H),this.height=Ka(H),this.outputDestination=he,this.id="",this.objectNumber=-1};hu.prototype.restore=function(){xr=this.page,H=this.currentPage,ur=this.pagesContext,De=this.pages,$t=this.x,Zt=this.y,On=this.matrix,Jo(H,this.width),gs(H,this.height),he=this.outputDestination};var va=function(F,xe,tt,pt,Mt){Ts.push(new hu),xr=H=0,De=[],$t=F,Zt=xe,On=Mt,bi([tt,pt])},Rl=function(F){if(Oo[F])Ts.pop().restore();else{var xe=new hu,tt="Xo"+(Object.keys(Ai).length+1).toString(10);xe.id=tt,Oo[F]=tt,Ai[tt]=xe,qr.publish("addFormObject",xe),Ts.pop().restore()}};for(var Fl in g.beginFormObject=function(F,xe,tt,pt,Mt){return va(F,xe,tt,pt,Mt),this},g.endFormObject=function(F){return Rl(F),this},g.doFormObject=function(F,xe){var tt=Ai[Oo[F]];return ue("q"),ue(xe.toString()+" cm"),ue("/"+tt.id+" Do"),ue("Q"),this},g.getFormObject=function(F){var xe=Ai[Oo[F]];return{x:xe.x,y:xe.y,width:xe.width,height:xe.height,matrix:xe.matrix}},g.save=function(F,xe){return F=F||"generated.pdf",(xe=xe||{}).returnPromise=xe.returnPromise||!1,xe.returnPromise===!1?(Jh(xs(Yr()),F),typeof Jh.unload=="function"&&jr.setTimeout&&setTimeout(Jh.unload,911),this):new Promise(function(tt,pt){try{var Mt=Jh(xs(Yr()),F);typeof Jh.unload=="function"&&jr.setTimeout&&setTimeout(Jh.unload,911),tt(Mt)}catch(Ht){pt(Ht.message)}})},Nr.API)Nr.API.hasOwnProperty(Fl)&&(Fl==="events"&&Nr.API.events.length?function(F,xe){var tt,pt,Mt;for(Mt=xe.length-1;Mt!==-1;Mt--)tt=xe[Mt][0],pt=xe[Mt][1],F.subscribe.apply(F,[tt].concat(typeof pt=="function"?[pt]:pt))}(qr,Nr.API.events):g[Fl]=Nr.API[Fl]);var Si=g.getPageWidth=function(F){return(ur[F=F||H].mediaBox.topRightX-ur[F].mediaBox.bottomLeftX)/it},Jo=g.setPageWidth=function(F,xe){ur[F].mediaBox.topRightX=xe*it+ur[F].mediaBox.bottomLeftX},Ka=g.getPageHeight=function(F){return(ur[F=F||H].mediaBox.topRightY-ur[F].mediaBox.bottomLeftY)/it},gs=g.setPageHeight=function(F,xe){ur[F].mediaBox.topRightY=xe*it+ur[F].mediaBox.bottomLeftY};return g.internal={pdfEscape:ti,getStyle:Zo,getFont:yo,getFontSize:Ke,getCharSpace:oa,getTextColor:uu,getLineHeight:Au,getLineHeightFactor:fs,getLineWidth:Il,write:ze,getHorizontalCoordinate:gr,getVerticalCoordinate:ps,getCoordinateString:Bl,getVerticalCoordinateString:Ya,collections:{},newObject:Be,newAdditionalObject:Vn,newObjectDeferred:dt,newObjectDeferredBegin:Ln,getFilters:qt,putStream:Un,events:qr,scaleFactor:it,pageSize:{getWidth:function(){return Si(H)},setWidth:function(F){Jo(H,F)},getHeight:function(){return Ka(H)},setHeight:function(F){gs(H,F)}},encryptionOptions:h,encryption:ds,getEncryptor:Ma,output:Js,getNumberOfPages:yr,pages:De,out:ue,f2:K,f3:I,getPageInfo:bl,getPageInfoByObjId:$n,getCurrentPageInfo:Cr,getPDFVersion:E,Point:zs,Rectangle:ma,Matrix:tr,hasHotfix:qa},Object.defineProperty(g.internal.pageSize,"width",{get:function(){return Si(H)},set:function(F){Jo(H,F)},enumerable:!0,configurable:!0}),Object.defineProperty(g.internal.pageSize,"height",{get:function(){return Ka(H)},set:function(F){gs(H,F)},enumerable:!0,configurable:!0}),Sn.call(g,ye),at="F1",Zs(i,n),qr.publish("initialized"),g}sp.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},sp.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},sp.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},sp.prototype.processOwnerPassword=function(t,e){return kb(Mb(e).substr(0,5),t)},sp.prototype.encryptor=function(t,e){var n=Mb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return kb(n,r)}},Yv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||cs(t)!==cs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Nr.API={events:[]},Nr.version="2.5.2";var Po=Nr.API,$_=1,Sf=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},qf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(t){return t.toFixed(2)},Jd=function(t){return t.toFixed(5)};Po.__acroform__={};var ou=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},L5=function(t){return t*$_},jc=function(t){var e=new XE,n=rr.internal.getHeight(t)||0,r=rr.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Zr(r)),Number(Zr(n))],e},PH=Po.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},MH=Po.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},kH=Po.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Uo=Po.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kH(t,e-1)},Ho=Po.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PH(t,e-1)},Wo=Po.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return MH(t,e-1)},AH=Po.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Zr(l.lowerLeft_X)),Number(Zr(l.lowerLeft_Y)),Number(Zr(l.upperRight_X)),Number(Zr(l.upperRight_Y))]},TH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ab(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Zr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ab=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(I){return I.split(`
`)}):i.map(function(I){return[I]});var s=n,o=rr.internal.getHeight(t)||0;o=o<0?-o:o;var a=rr.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(I,R,B){if(I+1<i.length){var $=R+" "+i[I+1][0];return x0($,t,B).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,h,p=x0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,g=v+=2,x=0,E=0,k=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+x0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var A="",D=0,z=0;z<i.length;z++)if(i.hasOwnProperty(z)){var Y=!1;if(i[z].length!==1&&k!==i[z].length-1){if((p+2)*(D+2)+2>o)continue e;A+=i[z][k],Y=!0,E=z,z--}else{A=(A+=i[z][k]+" ").substr(A.length-1)==" "?A.substr(0,A.length-1):A;var te=parseInt(z),ge=l(te,A,s),pe=z>=i.length-1;if(ge&&!pe){A+=" ",k=0;continue}if(ge||pe){if(pe)E=te;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;E=te}}for(var N="",j=x;j<=E;j++){var K=i[j];if(t.multiline){if(j===E){N+=K[k]+" ",k=(k+1)%K.length;continue}if(j===x){N+=K[K.length-1]+" ";continue}}N+=K[0]+" "}switch(N=N.substr(N.length-1)==" "?N.substr(0,N.length-1):N,h=x0(N,t,s).width,t.textAlign){case"right":c=a-h-2;break;case"center":c=(a-h)/2;break;case"left":default:c=2}e+=Zr(c)+" "+Zr(g)+` Td
`,e+="("+Sf(N)+`) Tj
`,e+=-Zr(c)+` 0 Td
`,g=-(s+2),h=0,x=Y?E:E+1,D++,A=""}break}return r.text=e,r.fontSize=s,r},x0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},DH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},NH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),cs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},IH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Pc.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");$_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new JE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&OH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=AH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=rr.createDefaultAppearanceStream(a),cs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var h=TH(a);l.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var g=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(g).length>=1||Array.isArray(g)){for(var o in g)if(g.hasOwnProperty(o)){var x=g[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=g)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&NH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},ZE=Po.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),cs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Sf(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},o2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Sf(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:ZE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var XE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};ou(XE,Kc);var JE=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Sf(n(t))+")"}},set:function(n){t=n}})};ou(JE,Kc);var Pc=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute F supplied.');e=A}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Uo(e,3)},set:function(A){A?this.F=Ho(e,3):this.F=Wo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(A){if(isNaN(A))throw new Error('Invalid value "'+A+'" for attribute Ff supplied.');n=A}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(A){r=A!==void 0?A:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(A){r[0]=A}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(A){r[1]=A}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(A){r[2]=A}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(A){r[3]=A}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(A){switch(A){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=A;break;default:throw new Error('Invalid value "'+A+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Kv)return;s="FieldObject"+t.FieldNum++}var A=function(D){return D};return this.scope&&(A=this.scope.internal.getEncryptor(this.objId)),"("+Sf(A(s))+")"},set:function(A){s=A.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(A){s=A}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(A){o=A}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(A){a=A}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(A){l=A}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/$_:c},set:function(A){c=A}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(A){h=A}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Kv||this instanceof hf))return o2(p,this.objId,this.scope)},set:function(A){A=A.toString(),p=A}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof La?v:o2(v,this.objId,this.scope)},set:function(A){A=A.toString(),v=this instanceof La?A:A.substr(0,1)==="("?qf(A.substr(1,A.length-2)):qf(A)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?qf(v.substr(1,v.length-1)):v},set:function(A){A=A.toString(),v=this instanceof La?"/"+A:A}});var g=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(g)return g},set:function(A){this.V=A}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof La?g:o2(g,this.objId,this.scope)},set:function(A){A=A.toString(),g=this instanceof La?A:A.substr(0,1)==="("?qf(A.substr(1,A.length-2)):qf(A)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?qf(g.substr(1,g.length-1)):g},set:function(A){A=A.toString(),g=this instanceof La?"/"+A:A}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(A){A=!!A,E=A}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(A){x=A}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,1)},set:function(A){A?this.Ff=Ho(this.Ff,1):this.Ff=Wo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,2)},set:function(A){A?this.Ff=Ho(this.Ff,2):this.Ff=Wo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,3)},set:function(A){A?this.Ff=Ho(this.Ff,3):this.Ff=Wo(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(A){if([0,1,2].indexOf(A)===-1)throw new Error('Invalid value "'+A+'" for attribute Q supplied.');k=A}}),Object.defineProperty(this,"textAlign",{get:function(){var A;switch(k){case 0:default:A="left";break;case 1:A="center";break;case 2:A="right"}return A},configurable:!0,enumerable:!0,set:function(A){switch(A){case"right":case 2:k=2;break;case"center":case 1:k=1;break;case"left":case 0:default:k=0}}})};ou(Pc,Kc);var vp=function(){Pc.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ZE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,18)},set:function(n){n?this.Ff=Ho(this.Ff,18):this.Ff=Wo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Ho(this.Ff,19):this.Ff=Wo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,20)},set:function(n){n?(this.Ff=Ho(this.Ff,20),e.sort()):this.Ff=Wo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,22)},set:function(n){n?this.Ff=Ho(this.Ff,22):this.Ff=Wo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(n){n?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,27)},set:function(n){n?this.Ff=Ho(this.Ff,27):this.Ff=Wo(this.Ff,27)}}),this.hasAppearanceStream=!1};ou(vp,Pc);var yp=function(){vp.call(this),this.fontName="helvetica",this.combo=!1};ou(yp,vp);var bp=function(){yp.call(this),this.combo=!0};ou(bp,yp);var sv=function(){bp.call(this),this.edit=!0};ou(sv,bp);var La=function(){Pc.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,15)},set:function(n){n?this.Ff=Ho(this.Ff,15):this.Ff=Wo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,16)},set:function(n){n?this.Ff=Ho(this.Ff,16):this.Ff=Wo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,17)},set:function(n){n?this.Ff=Ho(this.Ff,17):this.Ff=Wo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(n){n?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Sf(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){cs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};ou(La,Pc);var ov=function(){La.call(this),this.pushButton=!0};ou(ov,La);var _p=function(){La.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};ou(_p,La);var Kv=function(){var t,e;Pc.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Sf(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){cs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ou(Kv,Pc),_p.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},_p.prototype.createOption=function(t){var e=new Kv;return e.Parent=this,e.optionName=t,this.Kids.push(e),BH.call(this.scope,e),e};var av=function(){La.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rr.CheckBox.createAppearanceStream()};ou(av,La);var hf=function(){Pc.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,13)},set:function(e){e?this.Ff=Ho(this.Ff,13):this.Ff=Wo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,21)},set:function(e){e?this.Ff=Ho(this.Ff,21):this.Ff=Wo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(e){e?this.Ff=Ho(this.Ff,23):this.Ff=Wo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,24)},set:function(e){e?this.Ff=Ho(this.Ff,24):this.Ff=Wo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,25)},set:function(e){e?this.Ff=Ho(this.Ff,25):this.Ff=Wo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(e){e?this.Ff=Ho(this.Ff,26):this.Ff=Wo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ou(hf,Pc);var lv=function(){hf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,14)},set:function(t){t?this.Ff=Ho(this.Ff,14):this.Ff=Wo(this.Ff,14)}}),this.password=!0};ou(lv,hf);var rr={CheckBox:{createAppearanceStream:function(){return{N:{On:rr.CheckBox.YesNormal},D:{On:rr.CheckBox.YesPushDown,Off:rr.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ab(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Zr(rr.internal.getWidth(t))+" "+Zr(rr.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Zr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=rr.internal.getHeight(t),o=rr.internal.getWidth(t),a=Ab(t,t.caption);return i.push("1 g"),i.push("0 0 "+Zr(o)+" "+Zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zr(o-1)+" "+Zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Zr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(rr.internal.getWidth(t))+" "+Zr(rr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Circle.YesNormal,e.D[t]=rr.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=rr.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rr.internal.Bezier_C).toFixed(5)),o=Number((r*rr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.getWidth(t)<=rr.internal.getHeight(t)?rr.internal.getWidth(t)/4:rr.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*rr.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Jd(rr.internal.getWidth(t)/2)+" "+Jd(rr.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:rr.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=rr.RadioButton.Cross.YesNormal,e.D[t]=rr.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=rr.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Zr(rr.internal.getWidth(t)-2)+" "+Zr(rr.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),n.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),n.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),n.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=rr.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(rr.internal.getWidth(t))+" "+Zr(rr.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zr(rr.internal.getWidth(t)-2)+" "+Zr(rr.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(n.x1.x)+" "+Zr(n.x1.y)+" m"),r.push(Zr(n.x2.x)+" "+Zr(n.x2.y)+" l"),r.push(Zr(n.x4.x)+" "+Zr(n.x4.y)+" m"),r.push(Zr(n.x3.x)+" "+Zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(rr.internal.getWidth(t))+" "+Zr(rr.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};rr.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=rr.internal.getWidth(t),n=rr.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},rr.internal.getWidth=function(t){var e=0;return cs(t)==="object"&&(e=L5(t.Rect[2])),e},rr.internal.getHeight=function(t){var e=0;return cs(t)==="object"&&(e=L5(t.Rect[3])),e};var BH=Po.addField=function(t){if(IH(this,t),!(t instanceof Pc))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=vp,Po.AcroFormListBox=yp,Po.AcroFormComboBox=bp,Po.AcroFormEditBox=sv,Po.AcroFormButton=La,Po.AcroFormPushButton=ov,Po.AcroFormRadioButton=_p,Po.AcroFormCheckBox=av,Po.AcroFormTextField=hf,Po.AcroFormPasswordField=lv,Po.AcroFormAppearance=rr,Po.AcroForm={ChoiceField:vp,ListBox:yp,ComboBox:bp,EditBox:sv,Button:La,PushButton:ov,RadioButton:_p,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:rr},Nr.AcroForm={ChoiceField:vp,ListBox:yp,ComboBox:bp,EditBox:sv,Button:La,PushButton:ov,RadioButton:_p,CheckBox:av,TextField:hf,PasswordField:lv,Appearance:rr};Nr.AcroForm;function QE(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(I,R){var B,$,U,V,ne,X=e;if((R=R||e)==="RGBA"||I.data!==void 0&&I.data instanceof Uint8ClampedArray&&"height"in I&&"width"in I)return"RGBA";if(ge(I))for(ne in n)for(U=n[ne],B=0;B<U.length;B+=1){for(V=!0,$=0;$<U[B].length;$+=1)if(U[B][$]!==void 0&&U[B][$]!==I[$]){V=!1;break}if(V===!0){X=ne;break}}else for(ne in n)for(U=n[ne],B=0;B<U.length;B+=1){for(V=!0,$=0;$<U[B].length;$+=1)if(U[B][$]!==void 0&&U[B][$]!==I.charCodeAt($)){V=!1;break}if(V===!0){X=ne;break}}return X===e&&R!==e&&(X=R),X},i=function I(R){for(var B=this.internal.write,$=this.internal.putStream,U=(0,this.internal.getFilters)();U.indexOf("FlateEncode")!==-1;)U.splice(U.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var V=[];if(V.push({key:"Type",value:"/XObject"}),V.push({key:"Subtype",value:"/Image"}),V.push({key:"Width",value:R.width}),V.push({key:"Height",value:R.height}),R.colorSpace===k.INDEXED?V.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(V.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===k.DEVICE_CMYK&&V.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),V.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&V.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)){for(var ne="",X=0,we=R.transparency.length;X<we;X++)ne+=R.transparency[X]+" "+R.transparency[X]+" ";V.push({key:"Mask",value:"["+ne+"]"})}R.sMask!==void 0&&V.push({key:"SMask",value:R.objectId+1+" 0 R"});var ve=R.filter!==void 0?["/"+R.filter]:void 0;if($({data:R.data,additionalKeyValues:V,alreadyAppliedFilters:ve,objectId:R.objectId}),B("endobj"),"sMask"in R&&R.sMask!==void 0){var Ze="/Predictor "+R.predictor+" /Colors 1 /BitsPerComponent "+R.bitsPerComponent+" /Columns "+R.width,ie={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:R.bitsPerComponent,decodeParameters:Ze,data:R.sMask};"filter"in R&&(ie.filter=R.filter),I.call(this,ie)}if(R.colorSpace===k.INDEXED){var H=this.internal.newObject();$({data:N(new Uint8Array(R.palette)),objectId:H}),B("endobj")}},s=function(){var I=this.internal.collections.addImage_images;for(var R in I)i.call(this,I[R])},o=function(){var I,R=this.internal.collections.addImage_images,B=this.internal.write;for(var $ in R)B("/I"+(I=R[$]).index,I.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var I=this.internal.collections.addImage_images;return a.call(this),I},c=function(){return Object.keys(this.internal.collections.addImage_images).length},h=function(I){return typeof t["process"+I.toUpperCase()]=="function"},p=function(I){return cs(I)==="object"&&I.nodeType===1},v=function(I,R){if(I.nodeName==="IMG"&&I.hasAttribute("src")){var B=""+I.getAttribute("src");if(B.indexOf("data:image/")===0)return Hg(unescape(B).split("base64,").pop());var $=t.loadFile(B,!0);if($!==void 0)return $}if(I.nodeName==="CANVAS"){if(I.width===0||I.height===0)throw new Error("Given canvas must have data. Canvas width: "+I.width+", height: "+I.height);var U;switch(R){case"PNG":U="image/png";break;case"WEBP":U="image/webp";break;case"JPEG":case"JPG":default:U="image/jpeg"}return Hg(I.toDataURL(U,1).split("base64,").pop())}},g=function(I){var R=this.internal.collections.addImage_images;if(R){for(var B in R)if(I===R[B].alias)return R[B]}},x=function(I,R,B){return I||R||(I=-96,R=-96),I<0&&(I=-1*B.width*72/I/this.internal.scaleFactor),R<0&&(R=-1*B.height*72/R/this.internal.scaleFactor),I===0&&(I=R*B.width/B.height),R===0&&(R=I*B.height/B.width),[I,R]},E=function(I,R,B,$,U,V){var ne=x.call(this,B,$,U),X=this.internal.getCoordinateString,we=this.internal.getVerticalCoordinateString,ve=l.call(this);if(B=ne[0],$=ne[1],ve[U.index]=U,V){V*=Math.PI/180;var Ze=Math.cos(V),ie=Math.sin(V),H=function(me){return me.toFixed(4)},Z=[H(Ze),H(ie),H(-1*ie),H(Ze),0,0,"cm"]}this.internal.write("q"),V?(this.internal.write([1,"0","0",1,X(I),we(R+$),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([X(B),"0","0",X($),"0","0","cm"].join(" "))):this.internal.write([X(B),"0","0",X($),X(I),we(R+$),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+U.index+" Do"),this.internal.write("Q")},k=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var A=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(I){var R,B,$=0;if(typeof I=="string")for(B=I.length,R=0;R<B;R++)$=($<<5)-$+I.charCodeAt(R),$|=0;else if(ge(I))for(B=I.byteLength/2,R=0;R<B;R++)$=($<<5)-$+I[R],$|=0;return $},z=t.__addimage__.validateStringAsBase64=function(I){(I=I||"").toString().trim();var R=!0;return I.length===0&&(R=!1),I.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(I.substr(0,I.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(I.substr(-2))===!1&&(R=!1),R},Y=t.__addimage__.extractImageFromDataUrl=function(I){var R=(I=I||"").split("base64,"),B=null;if(R.length===2){var $=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(R[0]);Array.isArray($)&&(B={mimeType:$[1],charset:$[2],data:R[1]})}return B},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(I){return te()&&I instanceof ArrayBuffer};var ge=t.__addimage__.isArrayBufferView=function(I){return te()&&typeof Uint32Array<"u"&&(I instanceof Int8Array||I instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&I instanceof Uint8ClampedArray||I instanceof Int16Array||I instanceof Uint16Array||I instanceof Int32Array||I instanceof Uint32Array||I instanceof Float32Array||I instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(I){for(var R=I.length,B=new Uint8Array(R),$=0;$<R;$++)B[$]=I.charCodeAt($);return B},N=t.__addimage__.arrayBufferToBinaryString=function(I){for(var R="",B=ge(I)?I:new Uint8Array(I),$=0;$<B.length;$+=8192)R+=String.fromCharCode.apply(null,B.subarray($,$+8192));return R};t.addImage=function(){var I,R,B,$,U,V,ne,X,we;if(typeof arguments[1]=="number"?(R=e,B=arguments[1],$=arguments[2],U=arguments[3],V=arguments[4],ne=arguments[5],X=arguments[6],we=arguments[7]):(R=arguments[1],B=arguments[2],$=arguments[3],U=arguments[4],V=arguments[5],ne=arguments[6],X=arguments[7],we=arguments[8]),cs(I=arguments[0])==="object"&&!p(I)&&"imageData"in I){var ve=I;I=ve.imageData,R=ve.format||R||e,B=ve.x||B||0,$=ve.y||$||0,U=ve.w||ve.width||U,V=ve.h||ve.height||V,ne=ve.alias||ne,X=ve.compression||X,we=ve.rotation||ve.angle||we}var Ze=this.internal.getFilters();if(X===void 0&&Ze.indexOf("FlateEncode")!==-1&&(X="SLOW"),isNaN(B)||isNaN($))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ie=j.call(this,I,R,ne,X);return E.call(this,B,$,U,V,ie,we),this};var j=function(I,R,B,$){var U,V,ne;if(typeof I=="string"&&r(I)===e){I=unescape(I);var X=K(I,!1);(X!==""||(X=t.loadFile(I,!0))!==void 0)&&(I=X)}if(p(I)&&(I=v(I,R)),R=r(I,R),!h(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ne=B)==null||ne.length===0)&&(B=function(we){return typeof we=="string"||ge(we)?D(we):ge(we.data)?D(we.data):null}(I)),(U=g.call(this,B))||(te()&&(I instanceof Uint8Array||R==="RGBA"||(V=I,I=pe(I))),U=this["process"+R.toUpperCase()](I,c.call(this),B,function(we){return we&&typeof we=="string"&&(we=we.toUpperCase()),we in t.image_compression?we:A.NONE}($),V)),!U)throw new Error("An unknown error occurred whilst processing the image.");return U},K=t.__addimage__.convertBase64ToBinaryString=function(I,R){var B;R=typeof R!="boolean"||R;var $,U="";if(typeof I=="string"){$=(B=Y(I))!==null?B.data:I;try{U=Hg($)}catch(V){if(R)throw z($)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+V.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return U};t.getImageProperties=function(I){var R,B,$="";if(p(I)&&(I=v(I)),typeof I=="string"&&r(I)===e&&(($=K(I,!1))===""&&($=t.loadFile(I)||""),I=$),B=r(I),!h(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(!te()||I instanceof Uint8Array||(I=pe(I)),!(R=this["process"+B.toUpperCase()](I)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=B,R}})(Nr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Nr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,h=!1,p=0;p<c.length&&!h;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var g=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),A=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+g(A(r.contents))+")",s+=" /Popup "+k.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+g(A(D))+") >>",E.content=s;var z=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+z,r.open&&(s+=" /Open true"),s+=" >>",k.content=s,this.internal.write(E.objId,"0 R",k.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+g(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+g(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ge=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ge+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var h=this.splitTextToSize(n,a).length;o=Math.ceil(c*h)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Nr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var h=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var k=0,A=n,D="",z=0;for(k=0;k<E.length;k+=1)A[E.charCodeAt(k)]!==void 0?(z++,typeof(A=A[E.charCodeAt(k)])=="number"&&(D+=String.fromCharCode(A),A=n,z=0),k===E.length-1&&(A=n,D+=E.charAt(k-(z-1)),k-=z-1,z=0)):(A=n,D+=E.charAt(k-z),k-=z,z=0);return D};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,k,A){return o(E)?s(E)===!1?-1:!c(E)||!o(k)&&!o(A)||!o(A)&&a(k)||a(E)&&!o(k)||a(E)&&l(k)||a(E)&&a(k)?0:h(E)&&o(k)&&!a(k)&&o(A)&&c(A)?3:a(E)||!o(A)?1:2:-1},g=function(E){var k=0,A=0,D=0,z="",Y="",te="",ge=(E=E||"").split("\\s+"),pe=[];for(k=0;k<ge.length;k+=1){for(pe.push(""),A=0;A<ge[k].length;A+=1)z=ge[k][A],Y=ge[k][A-1],te=ge[k][A+1],o(z)?(D=v(z,Y,te),pe[k]+=D!==-1?String.fromCharCode(e[z.charCodeAt(0)][D]):z):pe[k]+=z;pe[k]=p(pe[k])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,A=[];if(Array.isArray(k)){var D=0;for(A=[],D=0;D<k.length;D+=1)Array.isArray(k[D])?A.push([g(k[D][0]),k[D][1],k[D][2]]):A.push([g(k[D])]);E=A}else E=g(k);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Nr.API),Nr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Nr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(E){h=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var g=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return g},set:function(E){g=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var h=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,g=0,x=0,E=0,k=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var A=c.maxWidth;A>0?typeof l=="string"?l=this.splitTextToSize(l,A):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(z,Y){return z.concat(k.splitTextToSize(Y,A))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)g<(E=this.getStringUnitWidth(l[D],{font:p})*h)&&(g=E);return g!==0&&(x=l.length),{w:g/=v,h:Math.max((x*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,g=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,g&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-h,l.y+h,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+h,{align:"center",baseline:"top",maxWidth:l.width-h-h}):this.text(l.text,l.x+h,l.y+h,{align:"left",baseline:"top",maxWidth:l.width-h-h})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,h,p,v){if(r.call(this),!h)throw new Error("No data for PDF table.");var g,x,E,k,A=[],D=[],z=[],Y={},te={},ge=[],pe=[],N=(v=v||{}).autoSize||!1,j=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,I=v.margins||Object.assign({width:this.getPageWidth()},e),R=typeof v.padding=="number"?v.padding:3,B=v.headerBackgroundColor||"#c8c8c8",$=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=j,this.internal.__cell__.margins=I,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=$,this.setFontSize(K),p==null)D=A=Object.keys(h[0]),z=A.map(function(){return"left"});else if(Array.isArray(p)&&cs(p[0])==="object")for(A=p.map(function(ve){return ve.name}),D=p.map(function(ve){return ve.prompt||ve.name||""}),z=p.map(function(ve){return ve.align||"left"}),g=0;g<p.length;g+=1)te[p[g].name]=p[g].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=A=p,z=A.map(function(){return"left"}));if(N||Array.isArray(p)&&typeof p[0]=="string")for(g=0;g<A.length;g+=1){for(Y[k=A[g]]=h.map(function(ve){return ve[k]}),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(D[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[k],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)ge.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[k]=Math.max.apply(null,ge)+R+R,ge=[]}if(j){var U={};for(g=0;g<A.length;g+=1)U[A[g]]={},U[A[g]].text=D[g],U[A[g]].align=z[g];var V=a.call(this,U,te);pe=A.map(function(ve){return new s(l,c,te[ve],V,U[ve].text,void 0,U[ve].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var ne=p.reduce(function(ve,Ze){return ve[Ze.name]=Ze.align,ve},{});for(g=0;g<h.length;g+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:g,data:h[g]},this);var X=a.call(this,h[g],te);for(E=0;E<A.length;E+=1){var we=h[g][A[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:g,col:E,data:we},this),o.call(this,new s(l,c,te[A[E]],X,we,g+2,ne[A[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(g){var x=l[g];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[g]-h-h)},this).map(function(g){return this.getLineHeightFactor()*g.length*p/v+h+h},this).reduce(function(g,x){return Math.max(g,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],g=0;g<this.internal.__cell__.tableHeaderRow.length;g+=1){h=this.internal.__cell__.tableHeaderRow[g].clone(),c&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Nr.API);var eP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Tb=QE(tP),nP=[100,200,300,400,500,600,700,800,900],RH=QE(nP);function Db(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return eP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Tb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function S5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var FH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},C5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function E5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},FH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Db(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+E5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var h=Tb[l],p=h<=Tb.normal?-1:1,v=S5(c,tP,h,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var h=eP[l],p=0;p<h.length;++p)if(c[h[p]])return c[h[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var h=RH[l],p=S5(c,nP,h,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+E5(s)+"'.");return o}function P5(t){return t.trimLeft()}function zH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function $H(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var L0,M5,k5,a2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,h=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new l,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new o,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new o,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new h}]);var p=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var H=ie;Object.defineProperty(this,"pdf",{get:function(){return H}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(se){Z=!!se}});var me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return me},set:function(se){me=!!se}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(se){isNaN(se)||(fe=se)}});var de=0;Object.defineProperty(this,"posY",{get:function(){return de},set:function(se){isNaN(se)||(de=se)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(se){var ue;typeof se=="number"?ue=[se,se,se,se]:((ue=new Array(4))[0]=se[0],ue[1]=se.length>=2?se[1]:ue[0],ue[2]=se.length>=3?se[2]:ue[0],ue[3]=se.length>=4?se[3]:ue[1]),c.margin=ue}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(se){ce=se}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(se){J=se}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(se){Re=se}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(se){se instanceof h&&(c=se)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(se){c.path=se}});var De=[];Object.defineProperty(this,"ctxStack",{get:function(){return De},set:function(se){De=se}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(se){var ue;ue=v(se),this.ctx.fillStyle=ue.style,this.ctx.isFillTransparent=ue.a===0,this.ctx.fillOpacity=ue.a,this.pdf.setFillColor(ue.r,ue.g,ue.b,{a:ue.a}),this.pdf.setTextColor(ue.r,ue.g,ue.b,{a:ue.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(se){var ue=v(se);this.ctx.strokeStyle=ue.style,this.ctx.isStrokeTransparent=ue.a===0,this.ctx.strokeOpacity=ue.a,ue.a===0?this.pdf.setDrawColor(255,255,255):(ue.a,this.pdf.setDrawColor(ue.r,ue.g,ue.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(se){["butt","round","square"].indexOf(se)!==-1&&(this.ctx.lineCap=se,this.pdf.setLineCap(se))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(se){isNaN(se)||(this.ctx.lineWidth=se,this.pdf.setLineWidth(se))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(se){["bevel","round","miter"].indexOf(se)!==-1&&(this.ctx.lineJoin=se,this.pdf.setLineJoin(se))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(se){isNaN(se)||(this.ctx.miterLimit=se,this.pdf.setMiterLimit(se))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(se){this.ctx.textBaseline=se}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(se){["right","end","center","left","start"].indexOf(se)!==-1&&(this.ctx.textAlign=se)}});var et=null;function he(se,ue){if(et===null){var ze=function(Ce){var ye=[];return Object.keys(Ce).forEach(function(Ve){Ce[Ve].forEach(function(Ye){var Ke=null;switch(Ye){case"bold":Ke={family:Ve,weight:"bold"};break;case"italic":Ke={family:Ve,style:"italic"};break;case"bolditalic":Ke={family:Ve,weight:"bold",style:"italic"};break;case"":case"normal":Ke={family:Ve}}Ke!==null&&(Ke.ref={name:Ve,style:Ye},ye.push(Ke))})}),ye}(se.getFontList());et=function(Ce){for(var ye={},Ve=0;Ve<Ce.length;++Ve){var Ye=Db(Ce[Ve]),Ke=Ye.family,_t=Ye.stretch,Ge=Ye.style,ft=Ye.weight;ye[Ke]=ye[Ke]||{},ye[Ke][_t]=ye[Ke][_t]||{},ye[Ke][_t][Ge]=ye[Ke][_t][Ge]||{},ye[Ke][_t][Ge][ft]=Ye}return ye}(ze.concat(ue))}return et}var Q=null;Object.defineProperty(this,"fontFaces",{get:function(){return Q},set:function(se){et=null,Q=se}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(se){var ue;if(this.ctx.font=se,(ue=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(se))!==null){var ze=ue[1],Ce=(ue[2],ue[3]),ye=ue[4],Ve=(ue[5],ue[6]),Ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(Ye==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:Ye==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var Ke=function(Qe){var at,it,$t=[],Zt=Qe.trim();if(Zt==="")return a2;if(Zt in C5)return[C5[Zt]];for(;Zt!=="";){switch(it=null,at=(Zt=P5(Zt)).charAt(0)){case'"':case"'":it=zH(Zt.substring(1),at);break;default:it=$H(Zt)}if(it===null||($t.push(it[0]),(Zt=P5(it[1]))!==""&&Zt.charAt(0)!==","))return a2;Zt=Zt.replace(/^,/,"")}return $t}(Ve);if(this.fontFaces){var _t=jH(he(this.pdf,this.fontFaces),Ke.map(function(Qe){return{family:Qe,stretch:"normal",weight:Ce,style:ze}}));this.pdf.setFont(_t.ref.name,_t.ref.style)}else{var Ge="";(Ce==="bold"||parseInt(Ce,10)>=700||ze==="bold")&&(Ge="bold"),ze==="italic"&&(Ge+="italic"),Ge.length===0&&(Ge="normal");for(var ft="",Ut={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},tn=0;tn<Ke.length;tn++){if(this.pdf.internal.getFont(Ke[tn],Ge,{noFallback:!0,disableWarning:!0})!==void 0){ft=Ke[tn];break}if(Ge==="bolditalic"&&this.pdf.internal.getFont(Ke[tn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ft=Ke[tn],Ge="bold";else if(this.pdf.internal.getFont(Ke[tn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ft=Ke[tn],Ge="normal";break}}if(ft===""){for(var yn=0;yn<Ke.length;yn++)if(Ut[Ke[yn]]){ft=Ut[Ke[yn]];break}}ft=ft===""?"Times":ft,this.pdf.setFont(ft,Ge)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(se){this.ctx.globalCompositeOperation=se}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(se){this.ctx.globalAlpha=se}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(se){this.ctx.lineDashOffset=se,Ze.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(se){this.ctx.lineDash=se,Ze.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(se){this.ctx.ignoreClearRect=!!se}})};p.prototype.setLineDash=function(ie){this.lineDash=ie},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(ie,H){if(isNaN(ie)||isNaN(H))throw bs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new o(ie,H));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(ie,H)},p.prototype.closePath=function(){var ie=new o(0,0),H=0;for(H=this.path.length-1;H!==-1;H--)if(this.path[H].type==="begin"&&cs(this.path[H+1])==="object"&&typeof this.path[H+1].x=="number"){ie=new o(this.path[H+1].x,this.path[H+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(ie.x,ie.y)},p.prototype.lineTo=function(ie,H){if(isNaN(ie)||isNaN(H))throw bs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new o(ie,H));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(ie,H,Z,me){if(isNaN(Z)||isNaN(me)||isNaN(ie)||isNaN(H))throw bs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new o(Z,me)),de=this.ctx.transform.applyToPoint(new o(ie,H));this.path.push({type:"qct",x1:de.x,y1:de.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},p.prototype.bezierCurveTo=function(ie,H,Z,me,fe,de){if(isNaN(fe)||isNaN(de)||isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me))throw bs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(fe,de)),J=this.ctx.transform.applyToPoint(new o(ie,H)),Re=this.ctx.transform.applyToPoint(new o(Z,me));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:Re.x,y2:Re.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},p.prototype.arc=function(ie,H,Z,me,fe,de){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me)||isNaN(fe))throw bs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(de=!!de,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(ie,H));ie=ce.x,H=ce.y;var J=this.ctx.transform.applyToPoint(new o(0,Z)),Re=this.ctx.transform.applyToPoint(new o(0,0));Z=Math.sqrt(Math.pow(J.x-Re.x,2)+Math.pow(J.y-Re.y,2))}Math.abs(fe-me)>=2*Math.PI&&(me=0,fe=2*Math.PI),this.path.push({type:"arc",x:ie,y:H,radius:Z,startAngle:me,endAngle:fe,counterclockwise:de})},p.prototype.arcTo=function(ie,H,Z,me,fe){throw new Error("arcTo not implemented.")},p.prototype.rect=function(ie,H,Z,me){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me))throw bs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,H),this.lineTo(ie+Z,H),this.lineTo(ie+Z,H+me),this.lineTo(ie,H+me),this.lineTo(ie,H),this.lineTo(ie+Z,H),this.lineTo(ie,H)},p.prototype.fillRect=function(ie,H,Z,me){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me))throw bs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!g.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,H,Z,me),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},p.prototype.strokeRect=function(ie,H,Z,me){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me))throw bs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(ie,H,Z,me),this.stroke())},p.prototype.clearRect=function(ie,H,Z,me){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me))throw bs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,H,Z,me))},p.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(H),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var me=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=me}},p.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var H=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(H),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(ie){var H,Z,me,fe;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))H=0,Z=0,me=0,fe=0;else{var de=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(de!==null)H=parseInt(de[1]),Z=parseInt(de[2]),me=parseInt(de[3]),fe=1;else if((de=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)H=parseInt(de[1]),Z=parseInt(de[2]),me=parseInt(de[3]),fe=parseFloat(de[4]);else{if(fe=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var ce=new qE(ie);ie=ce.ok?ce.toHex():"#000000"}ie.length===4?(H=ie.substring(1,2),H+=H,Z=ie.substring(2,3),Z+=Z,me=ie.substring(3,4),me+=me):(H=ie.substring(1,3),Z=ie.substring(3,5),me=ie.substring(5,7)),H=parseInt(H,16),Z=parseInt(Z,16),me=parseInt(me,16)}}return{r:H,g:Z,b:me,a:fe,style:ie}},g=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(ie,H,Z,me){if(isNaN(H)||isNaN(Z)||typeof ie!="string")throw bs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(me=isNaN(me)?void 0:me,!g.call(this)){var fe=X(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;R.call(this,{text:ie,x:H,y:Z,scale:de,angle:fe,align:this.textAlign,maxWidth:me})}},p.prototype.strokeText=function(ie,H,Z,me){if(isNaN(H)||isNaN(Z)||typeof ie!="string")throw bs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){me=isNaN(me)?void 0:me;var fe=X(this.ctx.transform.rotation),de=this.ctx.transform.scaleX;R.call(this,{text:ie,x:H,y:Z,scale:de,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:me})}},p.prototype.measureText=function(ie){if(typeof ie!="string")throw bs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var H=this.pdf,Z=this.pdf.internal.scaleFactor,me=H.internal.getFontSize(),fe=H.getStringUnitWidth(ie)*me/H.internal.scaleFactor,de=function(ce){var J=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new de({width:fe*=Math.round(96*Z/72*1e4)/1e4})},p.prototype.scale=function(ie,H){if(isNaN(ie)||isNaN(H))throw bs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(ie,0,0,H,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.rotate=function(ie){if(isNaN(ie))throw bs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var H=new l(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(H)},p.prototype.translate=function(ie,H){if(isNaN(ie)||isNaN(H))throw bs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,ie,H);this.ctx.transform=this.ctx.transform.multiply(Z)},p.prototype.transform=function(ie,H,Z,me,fe,de){if(isNaN(ie)||isNaN(H)||isNaN(Z)||isNaN(me)||isNaN(fe)||isNaN(de))throw bs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new l(ie,H,Z,me,fe,de);this.ctx.transform=this.ctx.transform.multiply(ce)},p.prototype.setTransform=function(ie,H,Z,me,fe,de){ie=isNaN(ie)?1:ie,H=isNaN(H)?0:H,Z=isNaN(Z)?0:Z,me=isNaN(me)?1:me,fe=isNaN(fe)?0:fe,de=isNaN(de)?0:de,this.ctx.transform=new l(ie,H,Z,me,fe,de)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(ie,H,Z,me,fe,de,ce,J,Re){var De=this.pdf.getImageProperties(ie),et=1,he=1,Q=1,se=1;me!==void 0&&J!==void 0&&(Q=J/me,se=Re/fe,et=De.width/me*J/me,he=De.height/fe*Re/fe),de===void 0&&(de=H,ce=Z,H=0,Z=0),me!==void 0&&J===void 0&&(J=me,Re=fe),me===void 0&&J===void 0&&(J=De.width,Re=De.height);for(var ue,ze=this.ctx.transform.decompose(),Ce=X(ze.rotate.shx),ye=new l,Ve=(ye=(ye=(ye=ye.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new a(de-H*Q,ce-Z*se,me*et,fe*he)),Ye=k.call(this,Ve),Ke=[],_t=0;_t<Ye.length;_t+=1)Ke.indexOf(Ye[_t])===-1&&Ke.push(Ye[_t]);if(z(Ke),this.autoPaging)for(var Ge=Ke[0],ft=Ke[Ke.length-1],Ut=Ge;Ut<ft+1;Ut++){this.pdf.setPage(Ut);var tn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],yn=Ut===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Ut===1?0:Qe+(Ut-2)*at;if(this.ctx.clip_path.length!==0){var $t=this.path;ue=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(ue,this.posX+this.margin[3],-it+yn+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=$t}var Zt=JSON.parse(JSON.stringify(Ve));Zt=D([Zt],this.posX+this.margin[3],-it+yn+this.ctx.prevPageLastElemOffset)[0];var On=(Ut>Ge||Ut<ft)&&E.call(this);On&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tn,at,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",Zt.x,Zt.y,Zt.w,Zt.h,null,null,Ce),On&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",Ve.x,Ve.y,Ve.w,Ve.h,null,null,Ce)};var k=function(ie,H,Z){var me=[];H=H||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":me.push(Math.floor((ie.y+fe)/Z)+1);break;case"arc":me.push(Math.floor((ie.y+fe-ie.radius)/Z)+1),me.push(Math.floor((ie.y+fe+ie.radius)/Z)+1);break;case"qct":var de=we(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);me.push(Math.floor((de.y+fe)/Z)+1),me.push(Math.floor((de.y+de.h+fe)/Z)+1);break;case"bct":var ce=ve(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);me.push(Math.floor((ce.y+fe)/Z)+1),me.push(Math.floor((ce.y+ce.h+fe)/Z)+1);break;case"rect":me.push(Math.floor((ie.y+fe)/Z)+1),me.push(Math.floor((ie.y+ie.h+fe)/Z)+1)}for(var J=0;J<me.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<me[J];)A.call(this);return me},A=function(){var ie=this.fillStyle,H=this.strokeStyle,Z=this.font,me=this.lineCap,fe=this.lineWidth,de=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=H,this.font=Z,this.lineCap=me,this.lineWidth=fe,this.lineJoin=de},D=function(ie,H,Z){for(var me=0;me<ie.length;me++)switch(ie[me].type){case"bct":ie[me].x2+=H,ie[me].y2+=Z;case"qct":ie[me].x1+=H,ie[me].y1+=Z;case"mt":case"lt":case"arc":default:ie[me].x+=H,ie[me].y+=Z}return ie},z=function(ie){return ie.sort(function(H,Z){return H-Z})},Y=function(ie,H){for(var Z,me,fe=this.fillStyle,de=this.strokeStyle,ce=this.lineCap,J=this.lineWidth,Re=Math.abs(J*this.ctx.transform.scaleX),De=this.lineJoin,et=JSON.parse(JSON.stringify(this.path)),he=JSON.parse(JSON.stringify(this.path)),Q=[],se=0;se<he.length;se++)if(he[se].x!==void 0)for(var ue=k.call(this,he[se]),ze=0;ze<ue.length;ze+=1)Q.indexOf(ue[ze])===-1&&Q.push(ue[ze]);for(var Ce=0;Ce<Q.length;Ce++)for(;this.pdf.internal.getNumberOfPages()<Q[Ce];)A.call(this);if(z(Q),this.autoPaging)for(var ye=Q[0],Ve=Q[Q.length-1],Ye=ye;Ye<Ve+1;Ye++){this.pdf.setPage(Ye),this.fillStyle=fe,this.strokeStyle=de,this.lineCap=ce,this.lineWidth=Re,this.lineJoin=De;var Ke=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=Ye===1?this.posY+this.margin[0]:this.margin[0],Ge=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ut=Ye===1?0:Ge+(Ye-2)*ft;if(this.ctx.clip_path.length!==0){var tn=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Z,this.posX+this.margin[3],-Ut+_t+this.ctx.prevPageLastElemOffset),te.call(this,ie,!0),this.path=tn}if(me=JSON.parse(JSON.stringify(et)),this.path=D(me,this.posX+this.margin[3],-Ut+_t+this.ctx.prevPageLastElemOffset),H===!1||Ye===0){var yn=(Ye>ye||Ye<Ve)&&E.call(this);yn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ke,ft,null).clip().discardPath()),te.call(this,ie,H),yn&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=Re,te.call(this,ie,H),this.lineWidth=J;this.path=et},te=function(ie,H){if((ie!=="stroke"||H||!x.call(this))&&(ie==="stroke"||H||!g.call(this))){for(var Z,me,fe=[],de=this.path,ce=0;ce<de.length;ce++){var J=de[ce];switch(J.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:J,deltas:[],abs:[]});break;case"lt":var Re=fe.length;if(de[ce-1]&&!isNaN(de[ce-1].x)&&(Z=[J.x-de[ce-1].x,J.y-de[ce-1].y],Re>0)){for(;Re>=0;Re--)if(fe[Re-1].close!==!0&&fe[Re-1].begin!==!0){fe[Re-1].deltas.push(Z),fe[Re-1].abs.push(J);break}}break;case"bct":Z=[J.x1-de[ce-1].x,J.y1-de[ce-1].y,J.x2-de[ce-1].x,J.y2-de[ce-1].y,J.x-de[ce-1].x,J.y-de[ce-1].y],fe[fe.length-1].deltas.push(Z);break;case"qct":var De=de[ce-1].x+2/3*(J.x1-de[ce-1].x),et=de[ce-1].y+2/3*(J.y1-de[ce-1].y),he=J.x+2/3*(J.x1-J.x),Q=J.y+2/3*(J.y1-J.y),se=J.x,ue=J.y;Z=[De-de[ce-1].x,et-de[ce-1].y,he-de[ce-1].x,Q-de[ce-1].y,se-de[ce-1].x,ue-de[ce-1].y],fe[fe.length-1].deltas.push(Z);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(J)}}me=H?null:ie==="stroke"?"stroke":"fill";for(var ze=!1,Ce=0;Ce<fe.length;Ce++)if(fe[Ce].arc)for(var ye=fe[Ce].abs,Ve=0;Ve<ye.length;Ve++){var Ye=ye[Ve];Ye.type==="arc"?N.call(this,Ye.x,Ye.y,Ye.radius,Ye.startAngle,Ye.endAngle,Ye.counterclockwise,void 0,H,!ze):B.call(this,Ye.x,Ye.y),ze=!0}else if(fe[Ce].close===!0)this.pdf.internal.out("h"),ze=!1;else if(fe[Ce].begin!==!0){var Ke=fe[Ce].start.x,_t=fe[Ce].start.y;$.call(this,fe[Ce].deltas,Ke,_t),ze=!0}me&&j.call(this,me),H&&K.call(this)}},ge=function(ie){var H=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=H*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Z;case"top":return ie+H-Z;case"hanging":return ie+H-2*Z;case"middle":return ie+H/2-Z;case"ideographic":return ie;case"alphabetic":default:return ie}},pe=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(H,Z){this.colorStops.push([H,Z])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var N=function(ie,H,Z,me,fe,de,ce,J,Re){for(var De=V.call(this,Z,me,fe,de),et=0;et<De.length;et++){var he=De[et];et===0&&(Re?I.call(this,he.x1+ie,he.y1+H):B.call(this,he.x1+ie,he.y1+H)),U.call(this,ie,H,he.x2,he.y2,he.x3,he.y3,he.x4,he.y4)}J?K.call(this):j.call(this,ce)},j=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},I=function(ie,H){this.pdf.internal.out(n(ie)+" "+r(H)+" m")},R=function(ie){var H;switch(ie.align){case"right":case"end":H="right";break;case"center":H="center";break;case"left":case"start":default:H="left"}var Z=this.pdf.getTextDimensions(ie.text),me=ge.call(this,ie.y),fe=pe.call(this,me)-Z.h,de=this.ctx.transform.applyToPoint(new o(ie.x,me)),ce=this.ctx.transform.decompose(),J=new l;J=(J=(J=J.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Re,De,et,he=this.ctx.transform.applyToRectangle(new a(ie.x,me,Z.w,Z.h)),Q=J.applyToRectangle(new a(ie.x,fe,Z.w,Z.h)),se=k.call(this,Q),ue=[],ze=0;ze<se.length;ze+=1)ue.indexOf(se[ze])===-1&&ue.push(se[ze]);if(z(ue),this.autoPaging)for(var Ce=ue[0],ye=ue[ue.length-1],Ve=Ce;Ve<ye+1;Ve++){this.pdf.setPage(Ve);var Ye=Ve===1?this.posY+this.margin[0]:this.margin[0],Ke=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[2],Ge=_t-this.margin[0],ft=this.pdf.internal.pageSize.width-this.margin[1],Ut=ft-this.margin[3],tn=Ve===1?0:Ke+(Ve-2)*Ge;if(this.ctx.clip_path.length!==0){var yn=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Re,this.posX+this.margin[3],-1*tn+Ye),te.call(this,"fill",!0),this.path=yn}var Qe=D([JSON.parse(JSON.stringify(Q))],this.posX+this.margin[3],-tn+Ye+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),et=this.lineWidth,this.lineWidth=et*ie.scale);var at=this.autoPaging!=="text";if(at||Qe.y+Qe.h<=_t){if(at||Qe.y>=Ye&&Qe.x<=ft){var it=at?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||ft-Qe.x)[0],$t=D([JSON.parse(JSON.stringify(he))],this.posX+this.margin[3],-tn+Ye+this.ctx.prevPageLastElemOffset)[0],Zt=at&&(Ve>Ce||Ve<ye)&&E.call(this);Zt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ut,Ge,null).clip().discardPath()),this.pdf.text(it,$t.x,$t.y,{angle:ie.angle,align:H,renderingMode:ie.renderingMode}),Zt&&this.pdf.restoreGraphicsState()}}else Qe.y<_t&&(this.ctx.prevPageLastElemOffset+=_t-Qe.y);ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=et)}else ie.scale>=.01&&(De=this.pdf.internal.getFontSize(),this.pdf.setFontSize(De*ie.scale),et=this.lineWidth,this.lineWidth=et*ie.scale),this.pdf.text(ie.text,de.x+this.posX,de.y+this.posY,{angle:ie.angle,align:H,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(De),this.lineWidth=et)},B=function(ie,H,Z,me){Z=Z||0,me=me||0,this.pdf.internal.out(n(ie+Z)+" "+r(H+me)+" l")},$=function(ie,H,Z){return this.pdf.lines(ie,H,Z,null,null)},U=function(ie,H,Z,me,fe,de,ce,J){this.pdf.internal.out([e(i(Z+ie)),e(s(me+H)),e(i(fe+ie)),e(s(de+H)),e(i(ce+ie)),e(s(J+H)),"c"].join(" "))},V=function(ie,H,Z,me){for(var fe=2*Math.PI,de=Math.PI/2;H>Z;)H-=fe;var ce=Math.abs(Z-H);ce<fe&&me&&(ce=fe-ce);for(var J=[],Re=me?-1:1,De=H;ce>1e-5;){var et=De+Re*Math.min(ce,de);J.push(ne.call(this,ie,De,et)),ce-=Math.abs(et-De),De=et}return J},ne=function(ie,H,Z){var me=(Z-H)/2,fe=ie*Math.cos(me),de=ie*Math.sin(me),ce=fe,J=-de,Re=ce*ce+J*J,De=Re+ce*fe+J*de,et=4/3*(Math.sqrt(2*Re*De)-De)/(ce*de-J*fe),he=ce-et*J,Q=J+et*ce,se=he,ue=-Q,ze=me+H,Ce=Math.cos(ze),ye=Math.sin(ze);return{x1:ie*Math.cos(H),y1:ie*Math.sin(H),x2:he*Ce-Q*ye,y2:he*ye+Q*Ce,x3:se*Ce-ue*ye,y3:se*ye+ue*Ce,x4:ie*Math.cos(Z),y4:ie*Math.sin(Z)}},X=function(ie){return 180*ie/Math.PI},we=function(ie,H,Z,me,fe,de){var ce=ie+.5*(Z-ie),J=H+.5*(me-H),Re=fe+.5*(Z-fe),De=de+.5*(me-de),et=Math.min(ie,fe,ce,Re),he=Math.max(ie,fe,ce,Re),Q=Math.min(H,de,J,De),se=Math.max(H,de,J,De);return new a(et,Q,he-et,se-Q)},ve=function(ie,H,Z,me,fe,de,ce,J){var Re,De,et,he,Q,se,ue,ze,Ce,ye,Ve,Ye,Ke,_t,Ge=Z-ie,ft=me-H,Ut=fe-Z,tn=de-me,yn=ce-fe,Qe=J-de;for(De=0;De<41;De++)Ce=(ue=(et=ie+(Re=De/40)*Ge)+Re*((Q=Z+Re*Ut)-et))+Re*(Q+Re*(fe+Re*yn-Q)-ue),ye=(ze=(he=H+Re*ft)+Re*((se=me+Re*tn)-he))+Re*(se+Re*(de+Re*Qe-se)-ze),De==0?(Ve=Ce,Ye=ye,Ke=Ce,_t=ye):(Ve=Math.min(Ve,Ce),Ye=Math.min(Ye,ye),Ke=Math.max(Ke,Ce),_t=Math.max(_t,ye));return new a(Math.round(Ve),Math.round(Ye),Math.round(Ke-Ve),Math.round(_t-Ye))},Ze=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,H,Z=(ie=this.ctx.lineDash,H=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:H}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(Nr.API),function(t){var e=function(s){var o,a,l,c,h,p,v,g,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(h=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(h=((h=((h=((h=(h-(E=h%85))/85)-(x=h%85))/85)-(g=h%85))/85)-(v=h%85))/85)%85,a.push(p+33,v+33,g+33,x+33,E+33)):a.push(122);return function(k,A){for(var D=A;D>0;D--)k.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,h,p=String,v="length",g=255,x="charCodeAt",E="slice",k="replace";for(s[E](-2),s=s[E](0,-2)[k](/\s/g,"")[k]("z","!!!!!"),l=[],c=0,h=(s+=o="uuuuu"[E](s[v]%5||5))[v];h>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(g&a>>24,g&a>>16,g&a>>8,g&a);return function(A,D){for(var z=D;z>0;z--)A.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Eb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(h){return("0"+h.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Nr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,h){var p=new XMLHttpRequest,v=0,g=function(x){var E=x.length,k=[],A=String.fromCharCode;for(v=0;v<E;v+=1)k.push(A(255&x.charCodeAt(v)));return k.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?h(g(this.responseText)):h(void 0)}),p.send(null),c&&p.status===200)return g(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Nr.API),function(t){function e(){return(jr.html2canvas?Promise.resolve(jr.html2canvas):kd(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(jr.DOMPurify?Promise.resolve(jr.DOMPurify):kd(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=cs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,h){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)h!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,h));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,h=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:h,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var g=c[v],x=g.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,g.ref.name,g.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Nr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,h){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,h).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),h=l.call(c,o,a);return s.convert(h,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Nr.getPageSize=function(o,a,l){if(cs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var h,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":h=1;break;case"mm":h=72/25.4;break;case"cm":h=72/2.54;break;case"in":h=72;break;case"px":h=.75;break;case"pc":case"em":h=12;break;case"ex":h=6;break;default:throw"Invalid unit: "+a}var g,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/h,E=v[p][0]/h;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(g=E,E=x,x=g);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(g=E,E=x,x=g)}return{width:E,height:x,unit:a,k:h,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Db):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Nr.API),Nr.API.addJS=function(t){return k5=t,this.internal.events.subscribe("postPutResources",function(){L0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(L0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),M5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){L0!==void 0&&M5!==void 0&&this.internal.out("/Names <</JavaScript "+L0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,h=[];for(s=0;s<c;s++){var p=n.internal.newObject();h.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var g=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<h.length;s++)n.internal.write("(page_"+(s+1)+")"+h[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+g+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Nr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,h=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,g=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},k=4;k<x;k+=2){if(k+=g,e.indexOf(p.charCodeAt(k+1))!==-1){v=256*p.charCodeAt(k+5)+p.charCodeAt(k+6),E={width:256*p.charCodeAt(k+7)+p.charCodeAt(k+8),height:v,numcomponents:p.charCodeAt(k+9)};break}g=256*p.charCodeAt(k+2)+p.charCodeAt(k+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}h={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return h}}(Nr.API);var Yf,S0,A5,T5,D5,VH=function(){var t,e,n;function r(s){var o,a,l,c,h,p,v,g,x,E,k,A,D,z;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},h=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*h/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,A=0;0<=o?A<o:A>o;0<=o?++A:--A)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(k=this.read(o)).indexOf(0),g=String.fromCharCode.apply(String,k.slice(0,v)),this.text[g]=String.fromCharCode.apply(String,k.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function h(p,v,g,x){var E,k,A,D,z,Y,te,ge,pe,N,j,K,I,R,B,$,U,V,ne,X,we,ve=Math.ceil((c.width-p)/g),Ze=Math.ceil((c.height-v)/x),ie=c.width==ve&&c.height==Ze;for(R=o*ve,K=ie?a:new Uint8Array(R*Ze),Y=s.length,I=0,k=0;I<Ze&&l<Y;){switch(s[l++]){case 0:for(D=U=0;U<R;D=U+=1)K[k++]=s[l++];break;case 1:for(D=V=0;V<R;D=V+=1)E=s[l++],z=D<o?0:K[k-o],K[k++]=(E+z)%256;break;case 2:for(D=ne=0;ne<R;D=ne+=1)E=s[l++],A=(D-D%o)/o,B=I&&K[(I-1)*R+A*o+D%o],K[k++]=(B+E)%256;break;case 3:for(D=X=0;X<R;D=X+=1)E=s[l++],A=(D-D%o)/o,z=D<o?0:K[k-o],B=I&&K[(I-1)*R+A*o+D%o],K[k++]=(E+Math.floor((z+B)/2))%256;break;case 4:for(D=we=0;we<R;D=we+=1)E=s[l++],A=(D-D%o)/o,z=D<o?0:K[k-o],I===0?B=$=0:(B=K[(I-1)*R+A*o+D%o],$=A&&K[(I-1)*R+(A-1)*o+D%o]),te=z+B-$,ge=Math.abs(te-z),N=Math.abs(te-B),j=Math.abs(te-$),pe=ge<=N&&ge<=j?z:N<=j?B:$,K[k++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!ie){var H=((v+I*x)*c.width+p)*o,Z=I*R;for(D=0;D<ve;D+=1){for(var me=0;me<o;me+=1)a[H++]=K[Z++];H+=(g-1)*o}}I++}}return s=_H(s),c.interlaceMethod==1?(h(0,0,8,8),h(4,0,8,8),h(0,4,4,8),h(2,0,4,4),h(0,2,2,4),h(1,0,2,2),h(0,1,1,2)):h(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,h,p,v,g;for(a=this.palette,h=this.transparency.indexed||[],c=new Uint8Array((h.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(g=h[s++])!=null?g:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,h,p,v,g,x,E,k,A;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(A=this._decodedPalette)!=null?A:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,h=v=0,l===1)for(;h<x;)g=E?4*o[h/4]:v,k=p[g++],c[h++]=k,c[h++]=k,c[h++]=k,c[h++]=a?p[g++]:255,v=g;else for(;h<x;)g=E?4*o[h/4]:v,c[h++]=p[g++],c[h++]=p[g++],c[h++]=p[g++],c[h++]=a?p[g++]:255,v=g},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(jr)==="[object Window]"){try{e=jr.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,h,p,v,g;if(this.animation){for(g=[],a=h=0,p=(v=this.animation.frames).length;h<p;a=++h)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,g.push(o.image=t(l));return g}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,h,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,h=p.numPlays,(o=function(){var g,x;if(g=a++%c,x=l[g],v.renderFrame(s,g),c>1&&a/c<h)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function UH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,h=[],p=0,v=null,g=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),g=E>>2&7,e++;break;case 254:for(;;){if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,A=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,z=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,ge=1<<(7&Y)+1,pe=a,N=l,j=!1;Y>>7&&(j=!0,pe=e,N=ge,e+=3*ge);var K=e;for(e++;;){var I;if(!((I=t[e++])>=0))throw Error("Invalid block size");if(I===0)break;e+=I}h.push({x:k,y:A,width:D,height:z,has_local_palette:j,palette_offset:pe,palette_size:N,data_offset:K,data_length:e-K,transparent_index:v,interlaced:!!te,delay:p,disposal:g});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return x},this.frameInfo=function(R){if(R<0||R>=h.length)throw new Error("Frame index out of range.");return h[R]},this.decodeAndBlitFrameBGRA=function(R,B){var $=this.frameInfo(R),U=$.width*$.height,V=new Uint8Array(U);O5(t,$.data_offset,V,U);var ne=$.palette_offset,X=$.transparent_index;X===null&&(X=256);var we=$.width,ve=n-we,Ze=we,ie=4*($.y*n+$.x),H=4*(($.y+$.height)*n+$.x),Z=ie,me=4*ve;$.interlaced===!0&&(me+=4*n*7);for(var fe=8,de=0,ce=V.length;de<ce;++de){var J=V[de];if(Ze===0&&(Ze=we,(Z+=me)>=H&&(me=4*ve+4*n*(fe-1),Z=ie+(we+ve)*(fe<<1),fe>>=1)),J===X)Z+=4;else{var Re=t[ne+3*J],De=t[ne+3*J+1],et=t[ne+3*J+2];B[Z++]=et,B[Z++]=De,B[Z++]=Re,B[Z++]=255}--Ze}},this.decodeAndBlitFrameRGBA=function(R,B){var $=this.frameInfo(R),U=$.width*$.height,V=new Uint8Array(U);O5(t,$.data_offset,V,U);var ne=$.palette_offset,X=$.transparent_index;X===null&&(X=256);var we=$.width,ve=n-we,Ze=we,ie=4*($.y*n+$.x),H=4*(($.y+$.height)*n+$.x),Z=ie,me=4*ve;$.interlaced===!0&&(me+=4*n*7);for(var fe=8,de=0,ce=V.length;de<ce;++de){var J=V[de];if(Ze===0&&(Ze=we,(Z+=me)>=H&&(me=4*ve+4*n*(fe-1),Z=ie+(we+ve)*(fe<<1),fe>>=1)),J===X)Z+=4;else{var Re=t[ne+3*J],De=t[ne+3*J+1],et=t[ne+3*J+2];B[Z++]=Re,B[Z++]=De,B[Z++]=et,B[Z++]=255}--Ze}}}function O5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,h=0,p=0,v=0,g=t[e++],x=new Int32Array(4096),E=null;;){for(;h<16&&g!==0;)p|=t[e++]<<h,h+=8,g===1?g=t[e++]:--g;if(h<l)break;var k=p&c;if(p>>=l,h-=l,k!==s){if(k===o)break;for(var A=k<a?k:E,D=0,z=A;z>s;)z=x[z]>>8,++D;var Y=z;if(v+D+(A!==k?1:0)>r)return void bs.log("Warning, gif stream longer than expected.");n[v++]=Y;var te=v+=D;for(A!==k&&(n[v++]=Y),z=A;D--;)z=x[z],n[--te]=255&z,z>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=k}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&bs.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function l2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),g=new Array(64),x=new Array(64),E=[],k=0,A=7,D=new Array(64),z=new Array(64),Y=new Array(64),te=new Array(256),ge=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],j=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],B=[0,1,2,3,4,5,6,7,8,9,10,11],$=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],U=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function V(ie,H){for(var Z=0,me=0,fe=new Array,de=1;de<=16;de++){for(var ce=1;ce<=ie[de];ce++)fe[H[me]]=[],fe[H[me]][0]=Z,fe[H[me]][1]=de,me++,Z++;Z*=2}return fe}function ne(ie){for(var H=ie[0],Z=ie[1]-1;Z>=0;)H&1<<Z&&(k|=1<<A),Z--,--A<0&&(k==255?(X(255),X(0)):X(k),A=7,k=0)}function X(ie){E.push(ie)}function we(ie){X(ie>>8&255),X(255&ie)}function ve(ie,H,Z,me,fe){for(var de,ce=fe[0],J=fe[240],Re=function(ye,Ve){var Ye,Ke,_t,Ge,ft,Ut,tn,yn,Qe,at,it=0;for(Qe=0;Qe<8;++Qe){Ye=ye[it],Ke=ye[it+1],_t=ye[it+2],Ge=ye[it+3],ft=ye[it+4],Ut=ye[it+5],tn=ye[it+6];var $t=Ye+(yn=ye[it+7]),Zt=Ye-yn,On=Ke+tn,mn=Ke-tn,Tn=_t+Ut,Qn=_t-Ut,Qt=Ge+ft,xn=Ge-ft,Cn=$t+Qt,er=$t-Qt,vr=On+Tn,xr=On-Tn;ye[it]=Cn+vr,ye[it+4]=Cn-vr;var ur=.707106781*(xr+er);ye[it+2]=er+ur,ye[it+6]=er-ur;var qr=.382683433*((Cn=xn+Qn)-(xr=mn+Zt)),Fs=.5411961*Cn+qr,Ai=1.306562965*xr+qr,Oo=.707106781*(vr=Qn+mn),Ts=Zt+Oo,tr=Zt-Oo;ye[it+5]=tr+Fs,ye[it+3]=tr-Fs,ye[it+1]=Ts+Ai,ye[it+7]=Ts-Ai,it+=8}for(it=0,Qe=0;Qe<8;++Qe){Ye=ye[it],Ke=ye[it+8],_t=ye[it+16],Ge=ye[it+24],ft=ye[it+32],Ut=ye[it+40],tn=ye[it+48];var Ds=Ye+(yn=ye[it+56]),No=Ye-yn,lt=Ke+tn,Be=Ke-tn,dt=_t+Ut,Ln=_t-Ut,Vn=Ge+ft,En=Ge-ft,jt=Ds+Vn,Hn=Ds-Vn,St=lt+dt,qt=lt-dt;ye[it]=jt+St,ye[it+32]=jt-St;var Un=.707106781*(qt+Hn);ye[it+16]=Hn+Un,ye[it+48]=Hn-Un;var dr=.382683433*((jt=En+Ln)-(qt=Be+No)),Lr=.5411961*jt+dr,pn=1.306562965*qt+dr,rn=.707106781*(St=Ln+Be),zr=No+rn,Br=No-rn;ye[it+40]=Br+Lr,ye[it+24]=Br-Lr,ye[it+8]=zr+pn,ye[it+56]=zr-pn,it++}for(Qe=0;Qe<64;++Qe)at=ye[Qe]*Ve[Qe],g[Qe]=at>0?at+.5|0:at-.5|0;return g}(ie,H),De=0;De<64;++De)x[pe[De]]=Re[De];var et=x[0]-Z;Z=x[0],et==0?ne(me[0]):(ne(me[v[de=32767+et]]),ne(p[de]));for(var he=63;he>0&&x[he]==0;)he--;if(he==0)return ne(ce),Z;for(var Q,se=1;se<=he;){for(var ue=se;x[se]==0&&se<=he;)++se;var ze=se-ue;if(ze>=16){Q=ze>>4;for(var Ce=1;Ce<=Q;++Ce)ne(J);ze&=15}de=32767+x[se],ne(fe[(ze<<4)+v[de]]),ne(p[de]),se++}return he!=63&&ne(ce),Z}function Ze(ie){ie=Math.min(Math.max(ie,1),100),s!=ie&&(function(H){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],me=0;me<64;me++){var fe=o((Z[me]*H+50)/100);fe=Math.min(Math.max(fe,1),255),a[pe[me]]=fe}for(var de=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var J=o((de[ce]*H+50)/100);J=Math.min(Math.max(J,1),255),l[pe[ce]]=J}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],De=0,et=0;et<8;et++)for(var he=0;he<8;he++)c[De]=1/(a[pe[De]]*Re[et]*Re[he]*8),h[De]=1/(l[pe[De]]*Re[et]*Re[he]*8),De++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),s=ie)}this.encode=function(ie,H){H&&Ze(H),E=new Array,k=0,A=7,we(65496),we(65504),we(16),X(74),X(70),X(73),X(70),X(0),X(1),X(1),X(0),we(1),we(1),X(0),X(0),function(){we(65499),we(132),X(0);for(var Ke=0;Ke<64;Ke++)X(a[Ke]);X(1);for(var _t=0;_t<64;_t++)X(l[_t])}(),function(Ke,_t){we(65472),we(17),X(8),we(_t),we(Ke),X(3),X(1),X(17),X(0),X(2),X(17),X(1),X(3),X(17),X(1)}(ie.width,ie.height),function(){we(65476),we(418),X(0);for(var Ke=0;Ke<16;Ke++)X(N[Ke+1]);for(var _t=0;_t<=11;_t++)X(j[_t]);X(16);for(var Ge=0;Ge<16;Ge++)X(K[Ge+1]);for(var ft=0;ft<=161;ft++)X(I[ft]);X(1);for(var Ut=0;Ut<16;Ut++)X(R[Ut+1]);for(var tn=0;tn<=11;tn++)X(B[tn]);X(17);for(var yn=0;yn<16;yn++)X($[yn+1]);for(var Qe=0;Qe<=161;Qe++)X(U[Qe])}(),we(65498),we(12),X(3),X(1),X(0),X(2),X(17),X(3),X(17),X(0),X(63),X(0);var Z=0,me=0,fe=0;k=0,A=7,this.encode.displayName="_encode_";for(var de,ce,J,Re,De,et,he,Q,se,ue=ie.data,ze=ie.width,Ce=ie.height,ye=4*ze,Ve=0;Ve<Ce;){for(de=0;de<ye;){for(De=ye*Ve+de,he=-1,Q=0,se=0;se<64;se++)et=De+(Q=se>>3)*ye+(he=4*(7&se)),Ve+Q>=Ce&&(et-=ye*(Ve+1+Q-Ce)),de+he>=ye&&(et-=de+he-ye+4),ce=ue[et++],J=ue[et++],Re=ue[et++],D[se]=(ge[ce]+ge[J+256>>0]+ge[Re+512>>0]>>16)-128,z[se]=(ge[ce+768>>0]+ge[J+1024>>0]+ge[Re+1280>>0]>>16)-128,Y[se]=(ge[ce+1280>>0]+ge[J+1536>>0]+ge[Re+1792>>0]>>16)-128;Z=ve(D,c,Z,e,r),me=ve(z,h,me,n,i),fe=ve(Y,h,fe,n,i),de+=32}Ve+=8}if(A>=0){var Ye=[];Ye[1]=A+1,Ye[0]=(1<<A+1)-1,ne(Ye)}return we(65497),new Uint8Array(E)},t=t||50,function(){for(var ie=String.fromCharCode,H=0;H<256;H++)te[H]=ie(H)}(),e=V(N,j),n=V(R,B),r=V(K,I),i=V($,U),function(){for(var ie=1,H=2,Z=1;Z<=15;Z++){for(var me=ie;me<H;me++)v[32767+me]=Z,p[32767+me]=[],p[32767+me][1]=Z,p[32767+me][0]=me;for(var fe=-(H-1);fe<=-ie;fe++)v[32767+fe]=Z,p[32767+fe]=[],p[32767+fe][1]=Z,p[32767+fe][0]=H-1+fe;ie<<=1,H<<=1}}(),function(){for(var ie=0;ie<256;ie++)ge[ie]=19595*ie,ge[ie+256>>0]=38470*ie,ge[ie+512>>0]=7471*ie+32768,ge[ie+768>>0]=-11059*ie,ge[ie+1024>>0]=-21709*ie,ge[ie+1280>>0]=32768*ie+8421375,ge[ie+1536>>0]=-27439*ie,ge[ie+1792>>0]=-5329*ie}(),Ze(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function dc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function N5(t){function e(N){if(!N)throw Error("assert :P")}function n(N,j,K){for(var I=0;4>I;I++)if(N[j+I]!=K.charCodeAt(I))return!0;return!1}function r(N,j,K,I,R){for(var B=0;B<R;B++)N[j+B]=K[I+B]}function i(N,j,K,I){for(var R=0;R<I;R++)N[j+R]=K}function s(N){return new Int32Array(N)}function o(N,j){for(var K=[],I=0;I<N;I++)K.push(new j);return K}function a(N,j){var K=[];return function I(R,B,$){for(var U=$[B],V=0;V<U&&(R.push($.length>B+1?[]:new j),!($.length<B+1));V++)I(R[V],B+1,$)}(K,0,N),K}var l=function(){var N=this;function j(w,T){for(var q=1<<T-1>>>0;w&q;)q>>>=1;return q?(w&q-1)+q:w}function K(w,T,q,le,Le){e(!(le%q));do w[T+(le-=q)]=Le;while(0<le)}function I(w,T,q,le,Le){if(e(2328>=Le),512>=Le)var Me=s(512);else if((Me=s(Le))==null)return 0;return function(Ae,Oe,Fe,Xe,mt,Rt){var Ft,Pt,Kt=Oe,Gt=1<<Fe,vt=s(16),xt=s(16);for(e(mt!=0),e(Xe!=null),e(Ae!=null),e(0<Fe),Pt=0;Pt<mt;++Pt){if(15<Xe[Pt])return 0;++vt[Xe[Pt]]}if(vt[0]==mt)return 0;for(xt[1]=0,Ft=1;15>Ft;++Ft){if(vt[Ft]>1<<Ft)return 0;xt[Ft+1]=xt[Ft]+vt[Ft]}for(Pt=0;Pt<mt;++Pt)Ft=Xe[Pt],0<Xe[Pt]&&(Rt[xt[Ft]++]=Pt);if(xt[15]==1)return(Xe=new R).g=0,Xe.value=Rt[0],K(Ae,Kt,1,Gt,Xe),Gt;var nn,fn=-1,on=Gt-1,Rn=0,Nn=1,or=1,d=1<<Fe;for(Pt=0,Ft=1,mt=2;Ft<=Fe;++Ft,mt<<=1){if(Nn+=or<<=1,0>(or-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft])(Xe=new R).g=Ft,Xe.value=Rt[Pt++],K(Ae,Kt+Rn,mt,d,Xe),Rn=j(Rn,Ft)}for(Ft=Fe+1,mt=2;15>=Ft;++Ft,mt<<=1){if(Nn+=or<<=1,0>(or-=vt[Ft]))return 0;for(;0<vt[Ft];--vt[Ft]){if(Xe=new R,(Rn&on)!=fn){for(Kt+=d,nn=1<<(fn=Ft)-Fe;15>fn&&!(0>=(nn-=vt[fn]));)++fn,nn<<=1;Gt+=d=1<<(nn=fn-Fe),Ae[Oe+(fn=Rn&on)].g=nn+Fe,Ae[Oe+fn].value=Kt-Oe-fn}Xe.g=Ft-Fe,Xe.value=Rt[Pt++],K(Ae,Kt+(Rn>>Fe),mt,d,Xe),Rn=j(Rn,Ft)}}return Nn!=2*xt[15]-1?0:Gt}(w,T,q,le,Le,Me)}function R(){this.value=this.g=0}function B(){this.value=this.g=0}function $(){this.G=o(5,R),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ss,B)}function U(w,T,q,le){e(w!=null),e(T!=null),e(2147483648>le),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=q,w.Jd=T,w.Yc=q+le,w.Zc=4<=le?q+le-4+1:q,de(w)}function V(w,T){for(var q=0;0<T--;)q|=J(w,128)<<T;return q}function ne(w,T){var q=V(w,T);return ce(w)?-q:q}function X(w,T,q,le){var Le,Me=0;for(e(w!=null),e(T!=null),e(4294967288>le),w.Sb=le,w.Ra=0,w.u=0,w.h=0,4<le&&(le=4),Le=0;Le<le;++Le)Me+=T[q+Le]<<8*Le;w.Ra=Me,w.bb=le,w.oa=T,w.pa=q}function we(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Io-8>>>0,++w.bb,w.u-=8;Z(w)&&(w.h=1,w.u=0)}function ve(w,T){if(e(0<=T),!w.h&&T<=ea){var q=H(w)&Na[T];return w.u+=T,we(w),q}return w.h=1,w.u=0}function Ze(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function H(w){return w.Ra>>>(w.u&Io-1)>>>0}function Z(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Io}function me(w,T){w.u=T,w.h=Z(w)}function fe(w){w.u>=zl&&(e(w.u>=zl),we(w))}function de(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ce(w){return V(w,1)}function J(w,T){var q=w.Ca;0>w.b&&de(w);var le=w.b,Le=q*T>>>8,Me=(w.I>>>le>Le)+0;for(Me?(q-=Le,w.I-=Le+1<<le>>>0):q=Le+1,le=q,Le=0;256<=le;)Le+=8,le>>=8;return le=7^Le+to[le],w.b-=le,w.Ca=(q<<le)-1,Me}function Re(w,T,q){w[T+0]=q>>24&255,w[T+1]=q>>16&255,w[T+2]=q>>8&255,w[T+3]=q>>0&255}function De(w,T){return w[T+0]<<0|w[T+1]<<8}function et(w,T){return De(w,T)|w[T+2]<<16}function he(w,T){return De(w,T)|De(w,T+2)<<16}function Q(w,T){var q=1<<T;return e(w!=null),e(0<T),w.X=s(q),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function se(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function ue(){this.X=[],this.Xa=this.Mb=0}function ze(w,T,q,le){e(q!=null),e(le!=null);var Le=q[0],Me=le[0];return Le==0&&(Le=(w*Me+T/2)/T),Me==0&&(Me=(T*Le+w/2)/w),0>=Le||0>=Me?0:(q[0]=Le,le[0]=Me,1)}function Ce(w,T){return w+(1<<T)-1>>>T}function ye(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function Ve(w,T){N[T]=function(q,le,Le,Me,Ae,Oe,Fe){var Xe;for(Xe=0;Xe<Ae;++Xe){var mt=N[w](Oe[Fe+Xe-1],Le,Me+Xe);Oe[Fe+Xe]=ye(q[le+Xe],mt)}}}function Ye(){this.ud=this.hd=this.jd=0}function Ke(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function _t(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function Ge(w,T){return _t(w+(w-T+.5>>1))}function ft(w,T,q){return Math.abs(T-q)-Math.abs(w-q)}function Ut(w,T,q,le,Le,Me,Ae){for(le=Me[Ae-1],q=0;q<Le;++q)Me[Ae+q]=le=ye(w[T+q],le)}function tn(w,T,q,le,Le){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+Me],Oe=Ae>>8&255,Fe=16711935&(Fe=(Fe=16711935&Ae)+((Oe<<16)+Oe));le[Le+Me]=(4278255360&Ae)+Fe>>>0}}function yn(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Qe(w,T,q,le,Le,Me){var Ae;for(Ae=0;Ae<le;++Ae){var Oe=T[q+Ae],Fe=Oe>>>8,Xe=Oe,mt=255&(mt=(mt=Oe>>>16)+((w.jd<<24>>24)*(Fe<<24>>24)>>>5));Xe=255&(Xe=(Xe=Xe+((w.hd<<24>>24)*(Fe<<24>>24)>>>5))+((w.ud<<24>>24)*(mt<<24>>24)>>>5)),Le[Me+Ae]=(4278255360&Oe)+(mt<<16)+Xe}}function at(w,T,q,le,Le){N[T]=function(Me,Ae,Oe,Fe,Xe,mt,Rt,Ft,Pt){for(Fe=Rt;Fe<Ft;++Fe)for(Rt=0;Rt<Pt;++Rt)Xe[mt++]=Le(Oe[le(Me[Ae++])])},N[w]=function(Me,Ae,Oe,Fe,Xe,mt,Rt){var Ft=8>>Me.b,Pt=Me.Ea,Kt=Me.K[0],Gt=Me.w;if(8>Ft)for(Me=(1<<Me.b)-1,Gt=(1<<Ft)-1;Ae<Oe;++Ae){var vt,xt=0;for(vt=0;vt<Pt;++vt)vt&Me||(xt=le(Fe[Xe++])),mt[Rt++]=Le(Kt[xt&Gt]),xt>>=Ft}else N["VP8LMapColor"+q](Fe,Xe,Kt,Gt,mt,Rt,Ae,Oe,Pt)}}function it(w,T,q,le,Le){for(q=T+q;T<q;){var Me=w[T++];le[Le++]=Me>>16&255,le[Le++]=Me>>8&255,le[Le++]=Me>>0&255}}function $t(w,T,q,le,Le){for(q=T+q;T<q;){var Me=w[T++];le[Le++]=Me>>16&255,le[Le++]=Me>>8&255,le[Le++]=Me>>0&255,le[Le++]=Me>>24&255}}function Zt(w,T,q,le,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;le[Le++]=Me,le[Le++]=Ae}}function On(w,T,q,le,Le){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;le[Le++]=Me,le[Le++]=Ae}}function mn(w,T,q,le,Le){for(q=T+q;T<q;){var Me=w[T++];le[Le++]=Me>>0&255,le[Le++]=Me>>8&255,le[Le++]=Me>>16&255}}function Tn(w,T,q,le,Le,Me){if(Me==0)for(q=T+q;T<q;)Re(le,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),Le+=32;else r(le,Le,w,T,q)}function Qn(w,T){N[T][0]=N[w+"0"],N[T][1]=N[w+"1"],N[T][2]=N[w+"2"],N[T][3]=N[w+"3"],N[T][4]=N[w+"4"],N[T][5]=N[w+"5"],N[T][6]=N[w+"6"],N[T][7]=N[w+"7"],N[T][8]=N[w+"8"],N[T][9]=N[w+"9"],N[T][10]=N[w+"10"],N[T][11]=N[w+"11"],N[T][12]=N[w+"12"],N[T][13]=N[w+"13"],N[T][14]=N[w+"0"],N[T][15]=N[w+"0"]}function Qt(w){return w==Us||w==Hs||w==_a||w==u}function xn(){this.eb=[],this.size=this.A=this.fb=0}function Cn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new xn,this.f.kb=new Cn,this.sd=null}function vr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function xr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ur(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function qr(w,T){var q=w.T,le=T.ba.f.RGBA,Le=le.eb,Me=le.fb+w.ka*le.A,Ae=ao[T.ba.S],Oe=w.y,Fe=w.O,Xe=w.f,mt=w.N,Rt=w.ea,Ft=w.W,Pt=T.cc,Kt=T.dc,Gt=T.Mc,vt=T.Nc,xt=w.ka,nn=w.ka+w.T,fn=w.U,on=fn+1>>1;for(xt==0?Ae(Oe,Fe,null,null,Xe,mt,Rt,Ft,Xe,mt,Rt,Ft,Le,Me,null,null,fn):(Ae(T.ec,T.fc,Oe,Fe,Pt,Kt,Gt,vt,Xe,mt,Rt,Ft,Le,Me-le.A,Le,Me,fn),++q);xt+2<nn;xt+=2)Pt=Xe,Kt=mt,Gt=Rt,vt=Ft,mt+=w.Rc,Ft+=w.Rc,Me+=2*le.A,Ae(Oe,(Fe+=2*w.fa)-w.fa,Oe,Fe,Pt,Kt,Gt,vt,Xe,mt,Rt,Ft,Le,Me-le.A,Le,Me,fn);return Fe+=w.fa,w.j+nn<w.o?(r(T.ec,T.fc,Oe,Fe,fn),r(T.cc,T.dc,Xe,mt,on),r(T.Mc,T.Nc,Rt,Ft,on),q--):1&nn||Ae(Oe,Fe,null,null,Xe,mt,Rt,Ft,Xe,mt,Rt,Ft,Le,Me+le.A,null,null,fn),q}function Fs(w,T,q){var le=w.F,Le=[w.J];if(le!=null){var Me=w.U,Ae=T.ba.S,Oe=Ae==ba||Ae==_a;T=T.ba.f.RGBA;var Fe=[0],Xe=w.ka;Fe[0]=w.T,w.Kb&&(Xe==0?--Fe[0]:(--Xe,Le[0]-=w.width),w.j+w.ka+w.T==w.o&&(Fe[0]=w.o-w.j-Xe));var mt=T.eb;Xe=T.fb+Xe*T.A,w=Ii(le,Le[0],w.width,Me,Fe,mt,Xe+(Oe?0:3),T.A),e(q==Fe),w&&Qt(Ae)&&Vs(mt,Xe,Oe,Me,Fe,T.A)}return 0}function Ai(w){var T=w.ma,q=T.ba.S,le=11>q,Le=q==wr||q==tl||q==ba||q==Lo||q==12||Qt(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Qu(T.Oa,w,Le?11:12))return 0;if(Le&&Qt(q)&&hn(),w.da)alert("todo:use_scaling");else{if(le){if(T.Ib=ur,w.Kb){if(q=w.U+1>>1,T.memory=s(w.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=qr,hn()}}else alert("todo:EmitYUV");Le&&(T.Jb=Fs,le&&Mt())}if(le&&!Tc){for(w=0;256>w;++w)Ud[w]=89858*(w-128)+Ll>>Vd,Hd[w]=-22014*(w-128)+Ll,Vp[w]=-45773*(w-128),pu[w]=113618*(w-128)+Ll>>Vd;for(w=ad;w<Dh;++w)T=76283*(w-16)+Ll>>Vd,Wd[w-ad]=Hr(T,255),kf[w-ad]=Hr(T+8>>4,15);Tc=1}return 1}function Oo(w){var T=w.ma,q=w.U,le=w.T;return e(!(1&w.ka)),0>=q||0>=le?0:(q=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,q),T.Dc+=q,1)}function Ts(w){w.ma.memory=null}function tr(w,T,q,le){return ve(w,8)!=47?0:(T[0]=ve(w,14)+1,q[0]=ve(w,14)+1,le[0]=ve(w,1),ve(w,3)!=0?0:!w.h)}function Ds(w,T){if(4>w)return w+1;var q=w-2>>1;return(2+(1&w)<<q)+ve(T,q)+1}function No(w,T){return 120<T?T-120:1<=(q=((q=ut[T-1])>>4)*w+(8-(15&q)))?q:1;var q}function lt(w,T,q){var le=H(q),Le=w[T+=255&le].g-8;return 0<Le&&(me(q,q.u+8),le=H(q),T+=w[T].value,T+=le&(1<<Le)-1),me(q,q.u+w[T].g),w[T].value}function Be(w,T,q){return q.g+=w.g,q.value+=w.value<<T>>>0,e(8>=q.g),w.g}function dt(w,T,q){var le=w.xc;return e((T=le==0?0:w.vc[w.md*(q>>le)+(T>>le)])<w.Wb),w.Ya[T]}function Ln(w,T,q,le){var Le=w.ab,Me=w.c*T,Ae=w.C;T=Ae+T;var Oe=q,Fe=le;for(le=w.Ta,q=w.Ua;0<Le--;){var Xe=w.gc[Le],mt=Ae,Rt=T,Ft=Oe,Pt=Fe,Kt=(Fe=le,Oe=q,Xe.Ea);switch(e(mt<Rt),e(Rt<=Xe.nc),Xe.hc){case 2:Ac(Ft,Pt,(Rt-mt)*Kt,Fe,Oe);break;case 0:var Gt=mt,vt=Rt,xt=Fe,nn=Oe,fn=(d=Xe).Ea;Gt==0&&(_o(Ft,Pt,null,null,1,xt,nn),Ut(Ft,Pt+1,0,0,fn-1,xt,nn+1),Pt+=fn,nn+=fn,++Gt);for(var on=1<<d.b,Rn=on-1,Nn=Ce(fn,d.b),or=d.K,d=d.w+(Gt>>d.b)*Nn;Gt<vt;){var m=or,_=d,C=1;for(wo(Ft,Pt,xt,nn-fn,1,xt,nn);C<fn;){var M=(C&~Rn)+on;M>fn&&(M=fn),(0,Xa[m[_++]>>8&15])(Ft,Pt+ +C,xt,nn+C-fn,M-C,xt,nn+C),C=M}Pt+=fn,nn+=fn,++Gt&Rn||(d+=Nn)}Rt!=Xe.nc&&r(Fe,Oe-Kt,Fe,Oe+(Rt-mt-1)*Kt,Kt);break;case 1:for(Kt=Ft,vt=Pt,fn=(Ft=Xe.Ea)-(nn=Ft&~(xt=(Pt=1<<Xe.b)-1)),Gt=Ce(Ft,Xe.b),on=Xe.K,Xe=Xe.w+(mt>>Xe.b)*Gt;mt<Rt;){for(Rn=on,Nn=Xe,or=new Ye,d=vt+nn,m=vt+Ft;vt<d;)yn(Rn[Nn++],or),Ja(or,Kt,vt,Pt,Fe,Oe),vt+=Pt,Oe+=Pt;vt<m&&(yn(Rn[Nn++],or),Ja(or,Kt,vt,fn,Fe,Oe),vt+=fn,Oe+=fn),++mt&xt||(Xe+=Gt)}break;case 3:if(Ft==Fe&&Pt==Oe&&0<Xe.b){for(vt=Fe,Ft=Kt=Oe+(Rt-mt)*Kt-(nn=(Rt-mt)*Ce(Xe.Ea,Xe.b)),Pt=Fe,xt=Oe,Gt=[],nn=(fn=nn)-1;0<=nn;--nn)Gt[nn]=Pt[xt+nn];for(nn=fn-1;0<=nn;--nn)vt[Ft+nn]=Gt[nn];Os(Xe,mt,Rt,Fe,Kt,Fe,Oe)}else Os(Xe,mt,Rt,Ft,Pt,Fe,Oe)}Oe=le,Fe=q}Fe!=q&&r(le,q,Oe,Fe,Me)}function Vn(w,T){var q=w.V,le=w.Ba+w.c*w.C,Le=T-w.C;if(e(T<=w.l.o),e(16>=Le),0<Le){var Me=w.l,Ae=w.Ta,Oe=w.Ua,Fe=Me.width;if(Ln(w,Le,q,le),Le=Oe=[Oe],e((q=w.C)<(le=T)),e(Me.v<Me.va),le>Me.o&&(le=Me.o),q<Me.j){var Xe=Me.j-q;q=Me.j,Le[0]+=Xe*Fe}if(q>=le?q=0:(Le[0]+=4*Me.v,Me.ka=q-Me.j,Me.U=Me.va-Me.v,Me.T=le-q,q=1),q){if(Oe=Oe[0],11>(q=w.ca).S){var mt=q.f.RGBA,Rt=(le=q.S,Le=Me.U,Me=Me.T,Xe=mt.eb,mt.A),Ft=Me;for(mt=mt.fb+w.Ma*mt.A;0<Ft--;){var Pt=Ae,Kt=Oe,Gt=Le,vt=Xe,xt=mt;switch(le){case Ro:io(Pt,Kt,Gt,vt,xt);break;case wr:$s(Pt,Kt,Gt,vt,xt);break;case Us:$s(Pt,Kt,Gt,vt,xt),Vs(vt,xt,0,Gt,1,0);break;case el:so(Pt,Kt,Gt,vt,xt);break;case tl:Tn(Pt,Kt,Gt,vt,xt,1);break;case Hs:Tn(Pt,Kt,Gt,vt,xt,1),Vs(vt,xt,0,Gt,1,0);break;case ba:Tn(Pt,Kt,Gt,vt,xt,0);break;case _a:Tn(Pt,Kt,Gt,vt,xt,0),Vs(vt,xt,1,Gt,1,0);break;case Lo:Ia(Pt,Kt,Gt,vt,xt);break;case u:Ia(Pt,Kt,Gt,vt,xt),Pi(vt,xt,Gt,1,0);break;case sd:ta(Pt,Kt,Gt,vt,xt);break;default:e(0)}Oe+=Fe,mt+=Rt}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=q.height)}}w.C=T,e(w.C<=w.i)}function En(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var q=w.Ya[T].G,le=w.Ya[T].H;if(0<q[1][le[1]+0].g||0<q[2][le[2]+0].g||0<q[3][le[3]+0].g)return 0}return 1}function jt(w,T,q,le,Le,Me){if(w.Z!=0){var Ae=w.qd,Oe=w.rd;for(e(_i[w.Z]!=null);T<q;++T)_i[w.Z](Ae,Oe,le,Le,le,Le,Me),Ae=le,Oe=Le,Le+=Me;w.qd=Ae,w.rd=Oe}}function Hn(w,T){var q=w.l.ma,le=q.Z==0||q.Z==1?w.l.j:w.C;if(le=w.C<le?le:w.C,e(T<=w.l.o),T>le){var Le=w.l.width,Me=q.ca,Ae=q.tb+Le*le,Oe=w.V,Fe=w.Ba+w.c*le,Xe=w.gc;e(w.ab==1),e(Xe[0].hc==3),no(Xe[0],le,T,Oe,Fe,Me,Ae),jt(q,le,T,Me,Ae,Le)}w.C=w.Ma=T}function St(w,T,q,le,Le,Me,Ae){var Oe=w.$/le,Fe=w.$%le,Xe=w.m,mt=w.s,Rt=q+w.$,Ft=Rt;Le=q+le*Le;var Pt=q+le*Me,Kt=280+mt.ua,Gt=w.Pb?Oe:16777216,vt=0<mt.ua?mt.Wa:null,xt=mt.wc,nn=Rt<Pt?dt(mt,Fe,Oe):null;e(w.C<Me),e(Pt<=Le);var fn=!1;e:for(;;){for(;fn||Rt<Pt;){var on=0;if(Oe>=Gt){var Rn=Rt-q;e((Gt=w).Pb),Gt.wd=Gt.m,Gt.xd=Rn,0<Gt.s.ua&&se(Gt.s.Wa,Gt.s.vb),Gt=Oe+Wt}if(Fe&xt||(nn=dt(mt,Fe,Oe)),e(nn!=null),nn.Qb&&(T[Rt]=nn.qb,fn=!0),!fn)if(fe(Xe),nn.jc){on=Xe,Rn=T;var Nn=Rt,or=nn.pd[H(on)&Ss-1];e(nn.jc),256>or.g?(me(on,on.u+or.g),Rn[Nn]=or.value,on=0):(me(on,on.u+or.g-256),e(256<=or.value),on=or.value),on==0&&(fn=!0)}else on=lt(nn.G[0],nn.H[0],Xe);if(Xe.h)break;if(fn||256>on){if(!fn)if(nn.nd)T[Rt]=(nn.qb|on<<8)>>>0;else{if(fe(Xe),fn=lt(nn.G[1],nn.H[1],Xe),fe(Xe),Rn=lt(nn.G[2],nn.H[2],Xe),Nn=lt(nn.G[3],nn.H[3],Xe),Xe.h)break;T[Rt]=(Nn<<24|fn<<16|on<<8|Rn)>>>0}if(fn=!1,++Rt,++Fe>=le&&(Fe=0,++Oe,Ae!=null&&Oe<=Me&&!(Oe%16)&&Ae(w,Oe),vt!=null))for(;Ft<Rt;)on=T[Ft++],vt.X[(506832829*on&4294967295)>>>vt.Mb]=on}else if(280>on){if(on=Ds(on-256,Xe),Rn=lt(nn.G[4],nn.H[4],Xe),fe(Xe),Rn=No(le,Rn=Ds(Rn,Xe)),Xe.h)break;if(Rt-q<Rn||Le-Rt<on)break e;for(Nn=0;Nn<on;++Nn)T[Rt+Nn]=T[Rt+Nn-Rn];for(Rt+=on,Fe+=on;Fe>=le;)Fe-=le,++Oe,Ae!=null&&Oe<=Me&&!(Oe%16)&&Ae(w,Oe);if(e(Rt<=Le),Fe&xt&&(nn=dt(mt,Fe,Oe)),vt!=null)for(;Ft<Rt;)on=T[Ft++],vt.X[(506832829*on&4294967295)>>>vt.Mb]=on}else{if(!(on<Kt))break e;for(fn=on-280,e(vt!=null);Ft<Rt;)on=T[Ft++],vt.X[(506832829*on&4294967295)>>>vt.Mb]=on;on=Rt,e(!(fn>>>(Rn=vt).Xa)),T[on]=Rn.X[fn],fn=!0}fn||e(Xe.h==Z(Xe))}if(w.Pb&&Xe.h&&Rt<Le)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&se(w.s.vb,w.s.Wa);else{if(Xe.h)break e;Ae!=null&&Ae(w,Oe>Me?Me:Oe),w.a=0,w.$=Rt-q}return 1}return w.a=3,0}function qt(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function Un(){var w=new Rl;return w==null?null:(w.a=0,w.xb=Ou,Qn("Predictor","VP8LPredictors"),Qn("Predictor","VP8LPredictors_C"),Qn("PredictorAdd","VP8LPredictorsAdd"),Qn("PredictorAdd","VP8LPredictorsAdd_C"),Ac=tn,Ja=Qe,io=it,$s=$t,Ia=Zt,ta=On,so=mn,N.VP8LMapColor32b=Za,N.VP8LMapColor8b=ro,w)}function dr(w,T,q,le,Le){var Me=1,Ae=[w],Oe=[T],Fe=le.m,Xe=le.s,mt=null,Rt=0;e:for(;;){if(q)for(;Me&&ve(Fe,1);){var Ft=Ae,Pt=Oe,Kt=le,Gt=1,vt=Kt.m,xt=Kt.gc[Kt.ab],nn=ve(vt,2);if(Kt.Oc&1<<nn)Me=0;else{switch(Kt.Oc|=1<<nn,xt.hc=nn,xt.Ea=Ft[0],xt.nc=Pt[0],xt.K=[null],++Kt.ab,e(4>=Kt.ab),nn){case 0:case 1:xt.b=ve(vt,3)+2,Gt=dr(Ce(xt.Ea,xt.b),Ce(xt.nc,xt.b),0,Kt,xt.K),xt.K=xt.K[0];break;case 3:var fn,on=ve(vt,8)+1,Rn=16<on?0:4<on?1:2<on?2:3;if(Ft[0]=Ce(xt.Ea,Rn),xt.b=Rn,fn=Gt=dr(on,1,0,Kt,xt.K)){var Nn,or=on,d=xt,m=1<<(8>>d.b),_=s(m);if(_==null)fn=0;else{var C=d.K[0],M=d.w;for(_[0]=d.K[0][0],Nn=1;Nn<1*or;++Nn)_[Nn]=ye(C[M+Nn],_[Nn-1]);for(;Nn<4*m;++Nn)_[Nn]=0;d.K[0]=null,d.K[0]=_,fn=1}}Gt=fn;break;case 2:break;default:e(0)}Me=Gt}}if(Ae=Ae[0],Oe=Oe[0],Me&&ve(Fe,1)&&!(Me=1<=(Rt=ve(Fe,4))&&11>=Rt)){le.a=3;break e}var W;if(W=Me)t:{var ee,oe,be,Ee=le,rt=Ae,qe=Oe,wt=Rt,It=q,en=Ee.m,_n=Ee.s,Pn=[null],br=1,nt=0,st=Ot[wt];n:for(;;){if(It&&ve(en,1)){var gt=ve(en,3)+2,zt=Ce(rt,gt),Et=Ce(qe,gt),Bt=zt*Et;if(!dr(zt,Et,0,Ee,Pn))break n;for(Pn=Pn[0],_n.xc=gt,ee=0;ee<Bt;++ee){var _e=Pn[ee]>>8&65535;Pn[ee]=_e,_e>=br&&(br=_e+1)}}if(en.h)break n;for(oe=0;5>oe;++oe){var ke=G[oe];!oe&&0<wt&&(ke+=1<<wt),nt<ke&&(nt=ke)}var $e=o(br*st,R),je=br,He=o(je,$);if(He==null)var We=null;else e(65536>=je),We=He;var ct=s(nt);if(We==null||ct==null||$e==null){Ee.a=1;break n}var ht=$e;for(ee=be=0;ee<br;++ee){var yt=We[ee],At=yt.G,Tt=yt.H,ln=0,Gn=1,Zn=0;for(oe=0;5>oe;++oe){ke=G[oe],At[oe]=ht,Tt[oe]=be,!oe&&0<wt&&(ke+=1<<wt);i:{var ar,wi=ke,Bi=Ee,ii=ct,Hi=ht,zo=be,nc=0,Va=Bi.m,Oh=ve(Va,1);if(i(ii,0,0,wi),Oh){var Sl=ve(Va,1)+1,Dc=ve(Va,1),Ua=ve(Va,Dc==0?1:8);ii[Ua]=1,Sl==2&&(ii[Ua=ve(Va,8)]=1);var lo=1}else{var ys=s(19),Nf=ve(Va,4)+4;if(19<Nf){Bi.a=3;var Nh=0;break i}for(ar=0;ar<Nf;++ar)ys[Pe[ar]]=ve(Va,3);var Ih=void 0,Bh=void 0,If=Bi,ci=ys,Bf=wi,zm=ii,ld=0,rc=If.m,$m=8,Vm=o(128,R);r:for(;I(Vm,0,7,ci,19);){if(ve(rc,1)){var $l=2+2*ve(rc,3);if((Ih=2+ve(rc,$l))>Bf)break r}else Ih=Bf;for(Bh=0;Bh<Bf&&Ih--;){fe(rc);var Um=Vm[0+(127&H(rc))];me(rc,rc.u+Um.g);var ic=Um.value;if(16>ic)zm[Bh++]=ic,ic!=0&&($m=ic);else{var Up=ic==16,Hp=ic-16,Hm=P[Hp],rl=ve(rc,y[Hp])+Hm;if(Bh+rl>Bf)break r;for(var Oc=Up?$m:0;0<rl--;)zm[Bh++]=Oc}}ld=1;break r}ld||(If.a=3),lo=ld}(lo=lo&&!Va.h)&&(nc=I(Hi,zo,8,ii,wi)),lo&&nc!=0?Nh=nc:(Bi.a=3,Nh=0)}if(Nh==0)break n;if(Gn&&ae[oe]==1&&(Gn=ht[be].g==0),ln+=ht[be].g,be+=Nh,3>=oe){var ud,Rf=ct[0];for(ud=1;ud<ke;++ud)ct[ud]>Rf&&(Rf=ct[ud]);Zn+=Rf}}if(yt.nd=Gn,yt.Qb=0,Gn&&(yt.qb=(At[3][Tt[3]+0].value<<24|At[1][Tt[1]+0].value<<16|At[2][Tt[2]+0].value)>>>0,ln==0&&256>At[0][Tt[0]+0].value&&(yt.Qb=1,yt.qb+=At[0][Tt[0]+0].value<<8)),yt.jc=!yt.Qb&&6>Zn,yt.jc){var cd,Nu=yt;for(cd=0;cd<Ss;++cd){var Iu=cd,sc=Nu.pd[Iu],Gd=Nu.G[0][Nu.H[0]+Iu];256<=Gd.value?(sc.g=Gd.g+256,sc.value=Gd.value):(sc.g=0,sc.value=0,Iu>>=Be(Gd,8,sc),Iu>>=Be(Nu.G[1][Nu.H[1]+Iu],16,sc),Iu>>=Be(Nu.G[2][Nu.H[2]+Iu],0,sc),Be(Nu.G[3][Nu.H[3]+Iu],24,sc))}}}_n.vc=Pn,_n.Wb=br,_n.Ya=We,_n.yc=$e,W=1;break t}W=0}if(!(Me=W)){le.a=3;break e}if(0<Rt){if(Xe.ua=1<<Rt,!Q(Xe.Wa,Rt)){le.a=1,Me=0;break e}}else Xe.ua=0;var Rh=le,oc=Ae,Qy=Oe,Bu=Rh.s,Ff=Bu.xc;if(Rh.c=oc,Rh.i=Qy,Bu.md=Ce(oc,Ff),Bu.wc=Ff==0?-1:(1<<Ff)-1,q){le.xb=Th;break e}if((mt=s(Ae*Oe))==null){le.a=1,Me=0;break e}Me=(Me=St(le,mt,0,Ae,Oe,Oe,null))&&!Fe.h;break e}return Me?(Le!=null?Le[0]=mt:(e(mt==null),e(q)),le.$=0,q||qt(Xe)):qt(Xe),Me}function Lr(w,T){var q=w.c*w.i,le=q+T+16*T;return e(w.c<=T),w.V=s(le),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+q+T,1)}function pn(w,T){var q=w.C,le=T-q,Le=w.V,Me=w.Ba+w.c*q;for(e(T<=w.l.o);0<le;){var Ae=16<le?16:le,Oe=w.l.ma,Fe=w.l.width,Xe=Fe*Ae,mt=Oe.ca,Rt=Oe.tb+Fe*q,Ft=w.Ta,Pt=w.Ua;Ln(w,Ae,Le,Me),vs(Ft,Pt,mt,Rt,Xe),jt(Oe,q,q+Ae,mt,Rt,Fe),le-=Ae,Le+=Ae*w.c,q+=Ae}e(q==T),w.C=w.Ma=T}function rn(){this.ub=this.yd=this.td=this.Rb=0}function zr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Br(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function zi(){this.Yb=function(){var w=[];return function T(q,le,Le){for(var Me=Le[le],Ae=0;Ae<Me&&(q.push(Le.length>le+1?[]:0),!(Le.length<le+1));Ae++)T(q[Ae],le+1,Le)}(w,0,[3,11]),w}()}function Qr(){this.jb=s(3),this.Wc=a([4,8],zi),this.Xc=a([4,17],zi)}function _r(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Ar(){this.ld=this.La=this.dd=this.tc=0}function hi(){this.Na=this.la=0}function Rr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function an(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ni(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ar),this.Y=0,this.ya=Array(new an),this.aa=0,this.l=new ei}function vi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Ki(){this.cb=this.a=0,this.sc="",this.m=new Ze,this.Od=new rn,this.Kc=new zr,this.ed=new _r,this.Qa=new Br,this.Ic=this.$c=this.Aa=0,this.D=new Ni,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,Ze),this.ia=0,this.pb=o(4,Rr),this.Pa=new Qr,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new vi),this.Hd=0,this.rb=Array(new hi),this.sb=0,this.wa=Array(new Ar),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new an),this.L=this.aa=0,this.gd=a([4,2],Ar),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ei(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function hr(){var w=new Ki;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,sr||(sr=mo)),w}function Dn(w,T,q){return w.a==0&&(w.a=T,w.sc=q,w.cb=0),0}function Sr(w,T,q){return 3<=q&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function ws(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return Dn(w,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,le=T.w,Le=T.ha;if(4>Le)return Dn(w,7,"Truncated header.");var Me=q[le+0]|q[le+1]<<8|q[le+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Me),Ae.td=Me>>1&7,Ae.yd=Me>>4&1,Ae.ub=Me>>5,3<Ae.td)return Dn(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return Dn(w,4,"Frame not displayable.");le+=3,Le-=3;var Oe=w.Kc;if(Ae.Rb){if(7>Le)return Dn(w,7,"cannot parse picture header");if(!Sr(q,le,Le))return Dn(w,3,"Bad code word");Oe.c=16383&(q[le+4]<<8|q[le+3]),Oe.Td=q[le+4]>>6,Oe.i=16383&(q[le+6]<<8|q[le+5]),Oe.Ud=q[le+6]>>6,le+=7,Le-=7,w.za=Oe.c+15>>4,w.Ub=Oe.i+15>>4,T.width=Oe.c,T.height=Oe.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Ae.ub>Le)return Dn(w,7,"bad partition length");U(Me=w.m,q,le,Ae.ub),le+=Ae.ub,Le-=Ae.ub,Ae.Rb&&(Oe.Ld=ce(Me),Oe.Kd=ce(Me)),Oe=w.Qa;var Fe,Xe=w.Pa;if(e(Me!=null),e(Oe!=null),Oe.Cb=ce(Me),Oe.Cb){if(Oe.Bb=ce(Me),ce(Me)){for(Oe.Fb=ce(Me),Fe=0;4>Fe;++Fe)Oe.Zb[Fe]=ce(Me)?ne(Me,7):0;for(Fe=0;4>Fe;++Fe)Oe.Lb[Fe]=ce(Me)?ne(Me,6):0}if(Oe.Bb)for(Fe=0;3>Fe;++Fe)Xe.jb[Fe]=ce(Me)?V(Me,8):255}else Oe.Bb=0;if(Me.Ka)return Dn(w,3,"cannot parse segment header");if((Oe=w.ed).zd=ce(Me),Oe.Tb=V(Me,6),Oe.wb=V(Me,3),Oe.Pc=ce(Me),Oe.Pc&&ce(Me)){for(Xe=0;4>Xe;++Xe)ce(Me)&&(Oe.vd[Xe]=ne(Me,6));for(Xe=0;4>Xe;++Xe)ce(Me)&&(Oe.od[Xe]=ne(Me,6))}if(w.L=Oe.Tb==0?0:Oe.zd?1:2,Me.Ka)return Dn(w,3,"cannot parse filter header");var mt=Le;if(Le=Fe=le,le=Fe+mt,Oe=mt,w.Xb=(1<<V(w.m,2))-1,mt<3*(Xe=w.Xb))q=7;else{for(Fe+=3*Xe,Oe-=3*Xe,mt=0;mt<Xe;++mt){var Rt=q[Le+0]|q[Le+1]<<8|q[Le+2]<<16;Rt>Oe&&(Rt=Oe),U(w.Jc[+mt],q,Fe,Rt),Fe+=Rt,Oe-=Rt,Le+=3}U(w.Jc[+Xe],q,Fe,Oe),q=Fe<le?0:5}if(q!=0)return Dn(w,q,"cannot parse partitions");for(q=V(Fe=w.m,7),Le=ce(Fe)?ne(Fe,4):0,le=ce(Fe)?ne(Fe,4):0,Oe=ce(Fe)?ne(Fe,4):0,Xe=ce(Fe)?ne(Fe,4):0,Fe=ce(Fe)?ne(Fe,4):0,mt=w.Qa,Rt=0;4>Rt;++Rt){if(mt.Cb){var Ft=mt.Zb[Rt];mt.Fb||(Ft+=q)}else{if(0<Rt){w.pb[Rt]=w.pb[0];continue}Ft=q}var Pt=w.pb[Rt];Pt.Sc[0]=un[Hr(Ft+Le,127)],Pt.Sc[1]=jn[Hr(Ft+0,127)],Pt.Eb[0]=2*un[Hr(Ft+le,127)],Pt.Eb[1]=101581*jn[Hr(Ft+Oe,127)]>>16,8>Pt.Eb[1]&&(Pt.Eb[1]=8),Pt.Qc[0]=un[Hr(Ft+Xe,117)],Pt.Qc[1]=jn[Hr(Ft+Fe,127)],Pt.lc=Ft+Fe}if(!Ae.Rb)return Dn(w,4,"Not a key frame.");for(ce(Me),Ae=w.Pa,q=0;4>q;++q){for(Le=0;8>Le;++Le)for(le=0;3>le;++le)for(Oe=0;11>Oe;++Oe)Xe=J(Me,Fo[q][Le][le][Oe])?V(Me,8):Ws[q][Le][le][Oe],Ae.Wc[q][Le].Yb[le][Oe]=Xe;for(Le=0;17>Le;++Le)Ae.Xc[q][Le]=Ae.Wc[q][od[Le]]}return w.kc=ce(Me),w.kc&&(w.Bd=V(Me,8)),w.cb=1}function mo(w,T,q,le,Le,Me,Ae){var Oe=T[Le].Yb[q];for(q=0;16>Le;++Le){if(!J(w,Oe[q+0]))return Le;for(;!J(w,Oe[q+1]);)if(Oe=T[++Le].Yb[0],q=0,Le==16)return 16;var Fe=T[Le+1].Yb;if(J(w,Oe[q+2])){var Xe=w,mt=0;if(J(Xe,(Ft=Oe)[(Rt=q)+3]))if(J(Xe,Ft[Rt+6])){for(Oe=0,Rt=2*(mt=J(Xe,Ft[Rt+8]))+(Ft=J(Xe,Ft[Rt+9+mt])),mt=0,Ft=Vr[Rt];Ft[Oe];++Oe)mt+=mt+J(Xe,Ft[Oe]);mt+=3+(8<<Rt)}else J(Xe,Ft[Rt+7])?(mt=7+2*J(Xe,165),mt+=J(Xe,145)):mt=5+J(Xe,159);else mt=J(Xe,Ft[Rt+4])?3+J(Xe,Ft[Rt+5]):2;Oe=Fe[2]}else mt=1,Oe=Fe[1];Fe=Ae+Es[Le],0>(Xe=w).b&&de(Xe);var Rt,Ft=Xe.b,Pt=(Rt=Xe.Ca>>1)-(Xe.I>>Ft)>>31;--Xe.b,Xe.Ca+=Pt,Xe.Ca|=1,Xe.I-=(Rt+1&Pt)<<Ft,Me[Fe]=((mt^Pt)-Pt)*le[(0<Le)+0]}return 16}function cr(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Sn(w,T){if(w==null)return 0;if(T==null)return Dn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!ws(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var q=nl[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-q>>4,w.zb=T.j-q>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+q>>4,w.Hb=T.va+15+q>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var le=w.ed;for(q=0;4>q;++q){var Le;if(w.Qa.Cb){var Me=w.Qa.Lb[q];w.Qa.Fb||(Me+=le.Tb)}else Me=le.Tb;for(Le=0;1>=Le;++Le){var Ae=w.gd[q][Le],Oe=Me;if(le.Pc&&(Oe+=le.vd[0],Le&&(Oe+=le.od[0])),0<(Oe=0>Oe?0:63<Oe?63:Oe)){var Fe=Oe;0<le.wb&&(Fe=4<le.wb?Fe>>2:Fe>>1)>9-le.wb&&(Fe=9-le.wb),1>Fe&&(Fe=1),Ae.dd=Fe,Ae.tc=2*Oe+Fe,Ae.ld=40<=Oe?2:15<=Oe?1:0}else Ae.tc=0;Ae.La=Le}}}q=0}else Dn(w,6,"Frame setup failed"),q=w.a;if(q=q==0){if(q){w.$c=0,0<w.Aa||(w.Ic=Df);e:{q=w.Ic,le=4*(Fe=w.za);var Xe=32*Fe,mt=Fe+1,Rt=0<w.L?Fe*(0<w.Aa?2:1):0,Ft=(w.Aa==2?2:1)*Fe;if((Ae=le+832+(Le=3*(16*q+nl[w.L])/2*Xe)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)q=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){q=Dn(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Oe=w.Fc,w.Ac=Ae,w.Bc=Oe,Oe+=le,w.Gd=o(Xe,vi),w.Hd=0,w.rb=o(mt+1,hi),w.sb=1,w.wa=Rt?o(Rt,Ar):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Fe),e(!0),w.oc=Ae,w.pc=Oe,Oe+=832,w.ya=o(Ft,an),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Fe),w.R=16*Fe,w.B=8*Fe,Fe=(Xe=nl[w.L])*w.R,Xe=Xe/2*w.B,w.sa=Ae,w.ta=Oe+Fe,w.qa=w.sa,w.ra=w.ta+16*q*w.R+Xe,w.Ha=w.qa,w.Ia=w.ra+8*q*w.B+Xe,w.$c=0,Oe+=Le,w.mb=Me?Ae:null,w.nb=Me?Oe:null,e(Oe+Me<=w.Fc+w.Vb),cr(w),i(w.Ac,w.Bc,0,le),q=1}}if(q){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!ec){for(q=-255;255>=q;++q)Ui[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)na[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)Bo[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)aa[255+q]=0>q?0:255<q?255:q;ec=1}Lt=Vi,Yt=vo,Bn=js,nr=yr,Mr=Xs,Nt=Zs,Xi=Tu,Ei=Da,fu=oa,xo=du,Ji=uu,Ba=cu,Qa=Li,Ra=kc,Fa=fs,ja=gr,ri=ps,ya=Bl,wa[0]=Tr,wa[1]=fi,wa[2]=Cr,wa[3]=is,wa[4]=Zo,wa[5]=Aa,wa[6]=ka,wa[7]=Xo,wa[8]=_l,wa[9]=sa,$a[0]=qa,$a[1]=vn,$a[2]=Yr,$a[3]=xs,$a[4]=ds,$a[5]=Ma,$a[6]=bl,la[0]=Qs,la[1]=Mn,la[2]=Ta,la[3]=Pr,la[4]=au,la[5]=yo,la[6]=ku,q=1}else q=0}q&&(q=function(Pt,Kt){for(Pt.M=0;Pt.M<Pt.Va;++Pt.M){var Gt,vt=Pt.Jc[Pt.M&Pt.Xb],xt=Pt.m,nn=Pt;for(Gt=0;Gt<nn.za;++Gt){var fn=xt,on=nn,Rn=on.Ac,Nn=on.Bc+4*Gt,or=on.zc,d=on.ya[on.aa+Gt];if(on.Qa.Bb?d.$b=J(fn,on.Pa.jb[0])?2+J(fn,on.Pa.jb[2]):J(fn,on.Pa.jb[1]):d.$b=0,on.kc&&(d.Ad=J(fn,on.Bd)),d.Za=!J(fn,145)+0,d.Za){var m=d.Ob,_=0;for(on=0;4>on;++on){var C,M=or[0+on];for(C=0;4>C;++C){M=Qi[Rn[Nn+C]][M];for(var W=as[J(fn,M[0])];0<W;)W=as[2*W+J(fn,M[W])];M=-W,Rn[Nn+C]=M}r(m,_,Rn,Nn,4),_+=4,or[0+on]=M}}else M=J(fn,156)?J(fn,128)?1:3:J(fn,163)?2:0,d.Ob[0]=M,i(Rn,Nn,M,4),i(or,0,M,4);d.Dd=J(fn,142)?J(fn,114)?J(fn,183)?1:3:2:0}if(nn.m.Ka)return Dn(Pt,7,"Premature end-of-partition0 encountered.");for(;Pt.ja<Pt.za;++Pt.ja){if(nn=vt,fn=(xt=Pt).rb[xt.sb-1],Rn=xt.rb[xt.sb+xt.ja],Gt=xt.ya[xt.aa+xt.ja],Nn=xt.kc?Gt.Ad:0)fn.la=Rn.la=0,Gt.Za||(fn.Na=Rn.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var ee,oe;if(fn=Rn,Rn=nn,Nn=xt.Pa.Xc,or=xt.ya[xt.aa+xt.ja],d=xt.pb[or.$b],on=or.ad,m=0,_=xt.rb[xt.sb-1],M=C=0,i(on,m,0,384),or.Za)var be=0,Ee=Nn[3];else{W=s(16);var rt=fn.Na+_.Na;if(rt=sr(Rn,Nn[1],rt,d.Eb,0,W,0),fn.Na=_.Na=(0<rt)+0,1<rt)Lt(W,0,on,m);else{var qe=W[0]+3>>3;for(W=0;256>W;W+=16)on[m+W]=qe}be=1,Ee=Nn[0]}var wt=15&fn.la,It=15&_.la;for(W=0;4>W;++W){var en=1&It;for(qe=oe=0;4>qe;++qe)wt=wt>>1|(en=(rt=sr(Rn,Ee,rt=en+(1&wt),d.Sc,be,on,m))>be)<<7,oe=oe<<2|(3<rt?3:1<rt?2:on[m+0]!=0),m+=16;wt>>=4,It=It>>1|en<<7,C=(C<<8|oe)>>>0}for(Ee=wt,be=It>>4,ee=0;4>ee;ee+=2){for(oe=0,wt=fn.la>>4+ee,It=_.la>>4+ee,W=0;2>W;++W){for(en=1&It,qe=0;2>qe;++qe)rt=en+(1&wt),wt=wt>>1|(en=0<(rt=sr(Rn,Nn[2],rt,d.Qc,0,on,m)))<<3,oe=oe<<2|(3<rt?3:1<rt?2:on[m+0]!=0),m+=16;wt>>=2,It=It>>1|en<<5}M|=oe<<4*ee,Ee|=wt<<4<<ee,be|=(240&It)<<ee}fn.la=Ee,_.la=be,or.Hc=C,or.Gc=M,or.ia=43690&M?0:d.ia,Nn=!(C|M)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[Gt.$b][Gt.Za],xt.wa[xt.Y+xt.ja].La|=!Nn),nn.Ka)return Dn(Pt,7,"Premature end-of-file encountered.")}if(cr(Pt),xt=Kt,nn=1,Gt=(vt=Pt).D,fn=0<vt.L&&vt.M>=vt.zb&&vt.M<=vt.Va,vt.Aa==0)e:{if(Gt.M=vt.M,Gt.uc=fn,Du(vt,Gt),nn=1,Gt=(oe=vt.D).Nb,fn=(M=nl[vt.L])*vt.R,Rn=M/2*vt.B,W=16*Gt*vt.R,qe=8*Gt*vt.B,Nn=vt.sa,or=vt.ta-fn+W,d=vt.qa,on=vt.ra-Rn+qe,m=vt.Ha,_=vt.Ia-Rn+qe,It=(wt=oe.M)==0,C=wt>=vt.Va-1,vt.Aa==2&&Du(vt,oe),oe.uc)for(en=(rt=vt).D.M,e(rt.D.uc),oe=rt.yb;oe<rt.Hb;++oe){be=oe,Ee=en;var _n=(Pn=(ke=rt).D).Nb;ee=ke.R;var Pn=Pn.wa[Pn.Y+be],br=ke.sa,nt=ke.ta+16*_n*ee+16*be,st=Pn.dd,gt=Pn.tc;if(gt!=0)if(e(3<=gt),ke.L==1)0<be&&ja(br,nt,ee,gt+4),Pn.La&&ya(br,nt,ee,gt),0<Ee&&Fa(br,nt,ee,gt+4),Pn.La&&ri(br,nt,ee,gt);else{var zt=ke.B,Et=ke.qa,Bt=ke.ra+8*_n*zt+8*be,_e=ke.Ha,ke=ke.Ia+8*_n*zt+8*be;_n=Pn.ld,0<be&&(Ei(br,nt,ee,gt+4,st,_n),xo(Et,Bt,_e,ke,zt,gt+4,st,_n)),Pn.La&&(Ba(br,nt,ee,gt,st,_n),Ra(Et,Bt,_e,ke,zt,gt,st,_n)),0<Ee&&(Xi(br,nt,ee,gt+4,st,_n),fu(Et,Bt,_e,ke,zt,gt+4,st,_n)),Pn.La&&(Ji(br,nt,ee,gt,st,_n),Qa(Et,Bt,_e,ke,zt,gt,st,_n))}}if(vt.ia&&alert("todo:DitherRow"),xt.put!=null){if(oe=16*wt,wt=16*(wt+1),It?(xt.y=vt.sa,xt.O=vt.ta+W,xt.f=vt.qa,xt.N=vt.ra+qe,xt.ea=vt.Ha,xt.W=vt.Ia+qe):(oe-=M,xt.y=Nn,xt.O=or,xt.f=d,xt.N=on,xt.ea=m,xt.W=_),C||(wt-=M),wt>xt.o&&(wt=xt.o),xt.F=null,xt.J=null,vt.Fa!=null&&0<vt.Fa.length&&oe<wt&&(xt.J=gs(vt,xt,oe,wt-oe),xt.F=vt.mb,xt.F==null&&xt.F.length==0)){nn=Dn(vt,3,"Could not decode alpha data.");break e}oe<xt.j&&(M=xt.j-oe,oe=xt.j,e(!(1&M)),xt.O+=vt.R*M,xt.N+=vt.B*(M>>1),xt.W+=vt.B*(M>>1),xt.F!=null&&(xt.J+=xt.width*M)),oe<wt&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=oe-xt.j,xt.U=xt.va-xt.v,xt.T=wt-oe,nn=xt.put(xt))}Gt+1!=vt.Ic||C||(r(vt.sa,vt.ta-fn,Nn,or+16*vt.R,fn),r(vt.qa,vt.ra-Rn,d,on+8*vt.B,Rn),r(vt.Ha,vt.Ia-Rn,m,_+8*vt.B,Rn))}if(!nn)return Dn(Pt,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),q&=1}return q?(w.cb=0,q):0}function sn(w,T,q,le,Le){Le=w[T+q+32*le]+(Le>>3),w[T+q+32*le]=-256&Le?0>Le?0:255:Le}function yi(w,T,q,le,Le,Me){sn(w,T,0,q,le+Le),sn(w,T,1,q,le+Me),sn(w,T,2,q,le-Me),sn(w,T,3,q,le-Le)}function ti(w){return(20091*w>>16)+w}function bi(w,T,q,le){var Le,Me=0,Ae=s(16);for(Le=0;4>Le;++Le){var Oe=w[T+0]+w[T+8],Fe=w[T+0]-w[T+8],Xe=(35468*w[T+4]>>16)-ti(w[T+12]),mt=ti(w[T+4])+(35468*w[T+12]>>16);Ae[Me+0]=Oe+mt,Ae[Me+1]=Fe+Xe,Ae[Me+2]=Fe-Xe,Ae[Me+3]=Oe-mt,Me+=4,T++}for(Le=Me=0;4>Le;++Le)Oe=(w=Ae[Me+0]+4)+Ae[Me+8],Fe=w-Ae[Me+8],Xe=(35468*Ae[Me+4]>>16)-ti(Ae[Me+12]),sn(q,le,0,0,Oe+(mt=ti(Ae[Me+4])+(35468*Ae[Me+12]>>16))),sn(q,le,1,0,Fe+Xe),sn(q,le,2,0,Fe-Xe),sn(q,le,3,0,Oe-mt),Me++,le+=32}function Zs(w,T,q,le){var Le=w[T+0]+4,Me=35468*w[T+4]>>16,Ae=ti(w[T+4]),Oe=35468*w[T+1]>>16;yi(q,le,0,Le+Ae,w=ti(w[T+1]),Oe),yi(q,le,1,Le+Me,w,Oe),yi(q,le,2,Le-Me,w,Oe),yi(q,le,3,Le-Ae,w,Oe)}function vo(w,T,q,le,Le){bi(w,T,q,le),Le&&bi(w,T+16,q,le+4)}function js(w,T,q,le){Yt(w,T+0,q,le,1),Yt(w,T+32,q,le+128,1)}function yr(w,T,q,le){var Le;for(w=w[T+0]+4,Le=0;4>Le;++Le)for(T=0;4>T;++T)sn(q,le,T,Le,w)}function Xs(w,T,q,le){w[T+0]&&nr(w,T+0,q,le),w[T+16]&&nr(w,T+16,q,le+4),w[T+32]&&nr(w,T+32,q,le+128),w[T+48]&&nr(w,T+48,q,le+128+4)}function Vi(w,T,q,le){var Le,Me=s(16);for(Le=0;4>Le;++Le){var Ae=w[T+0+Le]+w[T+12+Le],Oe=w[T+4+Le]+w[T+8+Le],Fe=w[T+4+Le]-w[T+8+Le],Xe=w[T+0+Le]-w[T+12+Le];Me[0+Le]=Ae+Oe,Me[8+Le]=Ae-Oe,Me[4+Le]=Xe+Fe,Me[12+Le]=Xe-Fe}for(Le=0;4>Le;++Le)Ae=(w=Me[0+4*Le]+3)+Me[3+4*Le],Oe=Me[1+4*Le]+Me[2+4*Le],Fe=Me[1+4*Le]-Me[2+4*Le],Xe=w-Me[3+4*Le],q[le+0]=Ae+Oe>>3,q[le+16]=Xe+Fe>>3,q[le+32]=Ae-Oe>>3,q[le+48]=Xe-Fe>>3,le+=64}function Gi(w,T,q){var le,Le=T-32,Me=$i,Ae=255-w[Le-1];for(le=0;le<q;++le){var Oe,Fe=Me,Xe=Ae+w[T-1];for(Oe=0;Oe<q;++Oe)w[T+Oe]=Fe[Xe+w[Le+Oe]];T+=32}}function fi(w,T){Gi(w,T,4)}function Mn(w,T){Gi(w,T,8)}function vn(w,T){Gi(w,T,16)}function Yr(w,T){var q;for(q=0;16>q;++q)r(w,T+32*q,w,T-32,16)}function xs(w,T){var q;for(q=16;0<q;--q)i(w,T,w[T-1],16),T+=32}function Js(w,T,q){var le;for(le=0;16>le;++le)i(T,q+32*le,w,16)}function qa(w,T){var q,le=16;for(q=0;16>q;++q)le+=w[T-1+32*q]+w[T+q-32];Js(le>>5,w,T)}function ds(w,T){var q,le=8;for(q=0;16>q;++q)le+=w[T-1+32*q];Js(le>>4,w,T)}function Ma(w,T){var q,le=8;for(q=0;16>q;++q)le+=w[T+q-32];Js(le>>4,w,T)}function bl(w,T){Js(128,w,T)}function $n(w,T,q){return w+2*T+q+2>>2}function Cr(w,T){var q,le=T-32;for(le=new Uint8Array([$n(w[le-1],w[le+0],w[le+1]),$n(w[le+0],w[le+1],w[le+2]),$n(w[le+1],w[le+2],w[le+3]),$n(w[le+2],w[le+3],w[le+4])]),q=0;4>q;++q)r(w,T+32*q,le,0,le.length)}function is(w,T){var q=w[T-1],le=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];Re(w,T+0,16843009*$n(w[T-1-32],q,le)),Re(w,T+32,16843009*$n(q,le,Le)),Re(w,T+64,16843009*$n(le,Le,Me)),Re(w,T+96,16843009*$n(Le,Me,Me))}function Tr(w,T){var q,le=4;for(q=0;4>q;++q)le+=w[T+q-32]+w[T-1+32*q];for(le>>=3,q=0;4>q;++q)i(w,T+32*q,le,4)}function Zo(w,T){var q=w[T-1+0],le=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Oe=w[T+1-32],Fe=w[T+2-32],Xe=w[T+3-32];w[T+0+96]=$n(le,Le,w[T-1+96]),w[T+1+96]=w[T+0+64]=$n(q,le,Le),w[T+2+96]=w[T+1+64]=w[T+0+32]=$n(Me,q,le),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=$n(Ae,Me,q),w[T+3+64]=w[T+2+32]=w[T+1+0]=$n(Oe,Ae,Me),w[T+3+32]=w[T+2+0]=$n(Fe,Oe,Ae),w[T+3+0]=$n(Xe,Fe,Oe)}function ka(w,T){var q=w[T+1-32],le=w[T+2-32],Le=w[T+3-32],Me=w[T+4-32],Ae=w[T+5-32],Oe=w[T+6-32],Fe=w[T+7-32];w[T+0+0]=$n(w[T+0-32],q,le),w[T+1+0]=w[T+0+32]=$n(q,le,Le),w[T+2+0]=w[T+1+32]=w[T+0+64]=$n(le,Le,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=$n(Le,Me,Ae),w[T+3+32]=w[T+2+64]=w[T+1+96]=$n(Me,Ae,Oe),w[T+3+64]=w[T+2+96]=$n(Ae,Oe,Fe),w[T+3+96]=$n(Oe,Fe,Fe)}function Aa(w,T){var q=w[T-1+0],le=w[T-1+32],Le=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Oe=w[T+1-32],Fe=w[T+2-32],Xe=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Ae+1>>1,w[T+1+0]=w[T+2+64]=Ae+Oe+1>>1,w[T+2+0]=w[T+3+64]=Oe+Fe+1>>1,w[T+3+0]=Fe+Xe+1>>1,w[T+0+96]=$n(Le,le,q),w[T+0+64]=$n(le,q,Me),w[T+0+32]=w[T+1+96]=$n(q,Me,Ae),w[T+1+32]=w[T+2+96]=$n(Me,Ae,Oe),w[T+2+32]=w[T+3+96]=$n(Ae,Oe,Fe),w[T+3+32]=$n(Oe,Fe,Xe)}function Xo(w,T){var q=w[T+0-32],le=w[T+1-32],Le=w[T+2-32],Me=w[T+3-32],Ae=w[T+4-32],Oe=w[T+5-32],Fe=w[T+6-32],Xe=w[T+7-32];w[T+0+0]=q+le+1>>1,w[T+1+0]=w[T+0+64]=le+Le+1>>1,w[T+2+0]=w[T+1+64]=Le+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Ae+1>>1,w[T+0+32]=$n(q,le,Le),w[T+1+32]=w[T+0+96]=$n(le,Le,Me),w[T+2+32]=w[T+1+96]=$n(Le,Me,Ae),w[T+3+32]=w[T+2+96]=$n(Me,Ae,Oe),w[T+3+64]=$n(Ae,Oe,Fe),w[T+3+96]=$n(Oe,Fe,Xe)}function sa(w,T){var q=w[T-1+0],le=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96];w[T+0+0]=q+le+1>>1,w[T+2+0]=w[T+0+32]=le+Le+1>>1,w[T+2+32]=w[T+0+64]=Le+Me+1>>1,w[T+1+0]=$n(q,le,Le),w[T+3+0]=w[T+1+32]=$n(le,Le,Me),w[T+3+32]=w[T+1+64]=$n(Le,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function _l(w,T){var q=w[T-1+0],le=w[T-1+32],Le=w[T-1+64],Me=w[T-1+96],Ae=w[T-1-32],Oe=w[T+0-32],Fe=w[T+1-32],Xe=w[T+2-32];w[T+0+0]=w[T+2+32]=q+Ae+1>>1,w[T+0+32]=w[T+2+64]=le+q+1>>1,w[T+0+64]=w[T+2+96]=Le+le+1>>1,w[T+0+96]=Me+Le+1>>1,w[T+3+0]=$n(Oe,Fe,Xe),w[T+2+0]=$n(Ae,Oe,Fe),w[T+1+0]=w[T+3+32]=$n(q,Ae,Oe),w[T+1+32]=w[T+3+64]=$n(le,q,Ae),w[T+1+64]=w[T+3+96]=$n(Le,le,q),w[T+1+96]=$n(Me,Le,le)}function Ta(w,T){var q;for(q=0;8>q;++q)r(w,T+32*q,w,T-32,8)}function Pr(w,T){var q;for(q=0;8>q;++q)i(w,T,w[T-1],8),T+=32}function Kn(w,T,q){var le;for(le=0;8>le;++le)i(T,q+32*le,w,8)}function Qs(w,T){var q,le=8;for(q=0;8>q;++q)le+=w[T+q-32]+w[T-1+32*q];Kn(le>>4,w,T)}function yo(w,T){var q,le=4;for(q=0;8>q;++q)le+=w[T+q-32];Kn(le>>3,w,T)}function au(w,T){var q,le=4;for(q=0;8>q;++q)le+=w[T-1+32*q];Kn(le>>3,w,T)}function ku(w,T){Kn(128,w,T)}function Il(w,T,q){var le=w[T-q],Le=w[T+0],Me=3*(Le-le)+za[1020+w[T-2*q]-w[T+q]],Ae=Cs[112+(Me+4>>3)];w[T-q]=$i[255+le+Cs[112+(Me+3>>3)]],w[T+0]=$i[255+Le-Ae]}function lu(w,T,q,le){var Le=w[T+0],Me=w[T+q];return oo[255+w[T-2*q]-w[T-q]]>le||oo[255+Me-Le]>le}function Au(w,T,q,le){return 4*oo[255+w[T-q]-w[T+0]]+oo[255+w[T-2*q]-w[T+q]]<=le}function ni(w,T,q,le,Le){var Me=w[T-3*q],Ae=w[T-2*q],Oe=w[T-q],Fe=w[T+0],Xe=w[T+q],mt=w[T+2*q],Rt=w[T+3*q];return 4*oo[255+Oe-Fe]+oo[255+Ae-Xe]>le?0:oo[255+w[T-4*q]-Me]<=Le&&oo[255+Me-Ae]<=Le&&oo[255+Ae-Oe]<=Le&&oo[255+Rt-mt]<=Le&&oo[255+mt-Xe]<=Le&&oo[255+Xe-Fe]<=Le}function fs(w,T,q,le){var Le=2*le+1;for(le=0;16>le;++le)Au(w,T+le,q,Le)&&Il(w,T+le,q)}function gr(w,T,q,le){var Le=2*le+1;for(le=0;16>le;++le)Au(w,T+le*q,1,Le)&&Il(w,T+le*q,1)}function ps(w,T,q,le){var Le;for(Le=3;0<Le;--Le)fs(w,T+=4*q,q,le)}function Bl(w,T,q,le){var Le;for(Le=3;0<Le;--Le)gr(w,T+=4,q,le)}function Ya(w,T,q,le,Le,Me,Ae,Oe){for(Me=2*Me+1;0<Le--;){if(ni(w,T,q,Me,Ae))if(lu(w,T,q,Oe))Il(w,T,q);else{var Fe=w,Xe=T,mt=q,Rt=Fe[Xe-2*mt],Ft=Fe[Xe-mt],Pt=Fe[Xe+0],Kt=Fe[Xe+mt],Gt=Fe[Xe+2*mt],vt=27*(nn=za[1020+3*(Pt-Ft)+za[1020+Rt-Kt]])+63>>7,xt=18*nn+63>>7,nn=9*nn+63>>7;Fe[Xe-3*mt]=$i[255+Fe[Xe-3*mt]+nn],Fe[Xe-2*mt]=$i[255+Rt+xt],Fe[Xe-mt]=$i[255+Ft+vt],Fe[Xe+0]=$i[255+Pt-vt],Fe[Xe+mt]=$i[255+Kt-xt],Fe[Xe+2*mt]=$i[255+Gt-nn]}T+=le}}function Zi(w,T,q,le,Le,Me,Ae,Oe){for(Me=2*Me+1;0<Le--;){if(ni(w,T,q,Me,Ae))if(lu(w,T,q,Oe))Il(w,T,q);else{var Fe=w,Xe=T,mt=q,Rt=Fe[Xe-mt],Ft=Fe[Xe+0],Pt=Fe[Xe+mt],Kt=Cs[112+((Gt=3*(Ft-Rt))+4>>3)],Gt=Cs[112+(Gt+3>>3)],vt=Kt+1>>1;Fe[Xe-2*mt]=$i[255+Fe[Xe-2*mt]+vt],Fe[Xe-mt]=$i[255+Rt+Gt],Fe[Xe+0]=$i[255+Ft-Kt],Fe[Xe+mt]=$i[255+Pt-vt]}T+=le}}function Tu(w,T,q,le,Le,Me){Ya(w,T,q,1,16,le,Le,Me)}function Da(w,T,q,le,Le,Me){Ya(w,T,1,q,16,le,Le,Me)}function uu(w,T,q,le,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Zi(w,T+=4*q,q,1,16,le,Le,Me)}function cu(w,T,q,le,Le,Me){var Ae;for(Ae=3;0<Ae;--Ae)Zi(w,T+=4,1,q,16,le,Le,Me)}function oa(w,T,q,le,Le,Me,Ae,Oe){Ya(w,T,Le,1,8,Me,Ae,Oe),Ya(q,le,Le,1,8,Me,Ae,Oe)}function du(w,T,q,le,Le,Me,Ae,Oe){Ya(w,T,1,Le,8,Me,Ae,Oe),Ya(q,le,1,Le,8,Me,Ae,Oe)}function Li(w,T,q,le,Le,Me,Ae,Oe){Zi(w,T+4*Le,Le,1,8,Me,Ae,Oe),Zi(q,le+4*Le,Le,1,8,Me,Ae,Oe)}function kc(w,T,q,le,Le,Me,Ae,Oe){Zi(w,T+4,1,Le,8,Me,Ae,Oe),Zi(q,le+4,1,Le,8,Me,Ae,Oe)}function zs(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new xr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ma(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function va(){this.ua=0,this.Wa=new ue,this.vb=new ue,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new $,this.yc=new R}function Rl(){this.xb=this.a=0,this.l=new ei,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new va,this.ab=0,this.gc=o(4,hu),this.Oc=0}function Fl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ei,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Si(w,T,q,le,Le,Me,Ae){for(w=w==null?0:w[T+0],T=0;T<Ae;++T)Le[Me+T]=w+q[le+T]&255,w=Le[Me+T]}function Jo(w,T,q,le,Le,Me,Ae){var Oe;if(w==null)Si(null,null,q,le,Le,Me,Ae);else for(Oe=0;Oe<Ae;++Oe)Le[Me+Oe]=w[T+Oe]+q[le+Oe]&255}function Ka(w,T,q,le,Le,Me,Ae){if(w==null)Si(null,null,q,le,Le,Me,Ae);else{var Oe,Fe=w[T+0],Xe=Fe,mt=Fe;for(Oe=0;Oe<Ae;++Oe)Xe=mt+(Fe=w[T+Oe])-Xe,mt=q[le+Oe]+(-256&Xe?0>Xe?0:255:Xe)&255,Xe=Fe,Le[Me+Oe]=mt}}function gs(w,T,q,le){var Le=T.width,Me=T.o;if(e(w!=null&&T!=null),0>q||0>=le||q+le>Me)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new Fl,(Ae=w.ga==null)||(Ae=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Oe=w.Fa,Fe=w.P,Xe=w.qc,mt=w.mb,Rt=w.nb,Ft=Fe+1,Pt=Xe-1,Kt=Ae.l;if(e(Oe!=null&&mt!=null&&T!=null),_i[0]=null,_i[1]=Si,_i[2]=Jo,_i[3]=Ka,Ae.ca=mt,Ae.tb=Rt,Ae.c=T.width,Ae.i=T.height,e(0<Ae.c&&0<Ae.i),1>=Xe)T=0;else if(Ae.$a=Oe[Fe+0]>>0&3,Ae.Z=Oe[Fe+0]>>2&3,Ae.Lc=Oe[Fe+0]>>4&3,Fe=Oe[Fe+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Fe)T=0;else if(Kt.put=Oo,Kt.ac=Ai,Kt.bc=Ts,Kt.ma=Ae,Kt.width=T.width,Kt.height=T.height,Kt.Da=T.Da,Kt.v=T.v,Kt.va=T.va,Kt.j=T.j,Kt.o=T.o,Ae.$a)e:{e(Ae.$a==1),T=Un();t:for(;;){if(T==null){T=0;break e}if(e(Ae!=null),Ae.mc=T,T.c=Ae.c,T.i=Ae.i,T.l=Ae.l,T.l.ma=Ae,T.l.width=Ae.c,T.l.height=Ae.i,T.a=0,X(T.m,Oe,Ft,Pt),!dr(Ae.c,Ae.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&En(T.s)?(Ae.ic=1,Oe=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Oe),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ae.ic=0,T=Lr(T,Ae.c)),!T))break t;T=1;break e}Ae.mc=null,T=0}else T=Pt>=Ae.c*Ae.i;Ae=!T}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:le=Me-q}e(w.ga!=null),e(q+le<=Me);e:{if(T=(Oe=w.ga).c,Me=Oe.l.o,Oe.$a==0){if(Ft=w.rc,Pt=w.Vc,Kt=w.Fa,Fe=w.P+1+q*T,Xe=w.mb,mt=w.nb+q*T,e(Fe<=w.P+w.qc),Oe.Z!=0)for(e(_i[Oe.Z]!=null),Ae=0;Ae<le;++Ae)_i[Oe.Z](Ft,Pt,Kt,Fe,Xe,mt,T),Ft=Xe,Pt=mt,mt+=T,Fe+=T;else for(Ae=0;Ae<le;++Ae)r(Xe,mt,Kt,Fe,T),Ft=Xe,Pt=mt,mt+=T,Fe+=T;w.rc=Ft,w.Vc=Pt}else{if(e(Oe.mc!=null),T=q+le,e((Ae=Oe.mc)!=null),e(T<=Ae.i),Ae.C>=T)T=1;else if(Oe.ic||Mt(),Oe.ic){Oe=Ae.V,Ft=Ae.Ba,Pt=Ae.c;var Gt=Ae.i,vt=(Kt=1,Fe=Ae.$/Pt,Xe=Ae.$%Pt,mt=Ae.m,Rt=Ae.s,Ae.$),xt=Pt*Gt,nn=Pt*T,fn=Rt.wc,on=vt<nn?dt(Rt,Xe,Fe):null;e(vt<=xt),e(T<=Gt),e(En(Rt));t:for(;;){for(;!mt.h&&vt<nn;){if(Xe&fn||(on=dt(Rt,Xe,Fe)),e(on!=null),fe(mt),256>(Gt=lt(on.G[0],on.H[0],mt)))Oe[Ft+vt]=Gt,++vt,++Xe>=Pt&&(Xe=0,++Fe<=T&&!(Fe%16)&&Hn(Ae,Fe));else{if(!(280>Gt)){Kt=0;break t}Gt=Ds(Gt-256,mt);var Rn,Nn=lt(on.G[4],on.H[4],mt);if(fe(mt),!(vt>=(Nn=No(Pt,Nn=Ds(Nn,mt)))&&xt-vt>=Gt)){Kt=0;break t}for(Rn=0;Rn<Gt;++Rn)Oe[Ft+vt+Rn]=Oe[Ft+vt+Rn-Nn];for(vt+=Gt,Xe+=Gt;Xe>=Pt;)Xe-=Pt,++Fe<=T&&!(Fe%16)&&Hn(Ae,Fe);vt<nn&&Xe&fn&&(on=dt(Rt,Xe,Fe))}e(mt.h==Z(mt))}Hn(Ae,Fe>T?T:Fe);break t}!Kt||mt.h&&vt<xt?(Kt=0,Ae.a=mt.h?5:3):Ae.$=vt,T=Kt}else T=St(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,T,pn);if(!T){le=0;break e}}q+le>=Me&&(w.Cc=1),le=1}if(!le)return null;if(w.Cc&&((le=w.ga)!=null&&(le.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+q*Le}function F(w,T,q,le,Le,Me){for(;0<Le--;){var Ae,Oe=w,Fe=T+(q?1:0),Xe=w,mt=T+(q?0:3);for(Ae=0;Ae<le;++Ae){var Rt=Xe[mt+4*Ae];Rt!=255&&(Rt*=32897,Oe[Fe+4*Ae+0]=Oe[Fe+4*Ae+0]*Rt>>23,Oe[Fe+4*Ae+1]=Oe[Fe+4*Ae+1]*Rt>>23,Oe[Fe+4*Ae+2]=Oe[Fe+4*Ae+2]*Rt>>23)}T+=Me}}function xe(w,T,q,le,Le){for(;0<le--;){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+2*Me+0],Oe=15&(Xe=w[T+2*Me+1]),Fe=4369*Oe,Xe=(240&Xe|Xe>>4)*Fe>>16;w[T+2*Me+0]=(240&Ae|Ae>>4)*Fe>>16&240|(15&Ae|Ae<<4)*Fe>>16>>4&15,w[T+2*Me+1]=240&Xe|Oe}T+=Le}}function tt(w,T,q,le,Le,Me,Ae,Oe){var Fe,Xe,mt=255;for(Xe=0;Xe<Le;++Xe){for(Fe=0;Fe<le;++Fe){var Rt=w[T+Fe];Me[Ae+4*Fe]=Rt,mt&=Rt}T+=q,Ae+=Oe}return mt!=255}function pt(w,T,q,le,Le){var Me;for(Me=0;Me<Le;++Me)q[le+Me]=w[T+Me]>>8}function Mt(){Vs=F,Pi=xe,Ii=tt,vs=pt}function Ht(w,T,q){N[w]=function(le,Le,Me,Ae,Oe,Fe,Xe,mt,Rt,Ft,Pt,Kt,Gt,vt,xt,nn,fn){var on,Rn=fn-1>>1,Nn=Oe[Fe+0]|Xe[mt+0]<<16,or=Rt[Ft+0]|Pt[Kt+0]<<16;e(le!=null);var d=3*Nn+or+131074>>2;for(T(le[Le+0],255&d,d>>16,Gt,vt),Me!=null&&(d=3*or+Nn+131074>>2,T(Me[Ae+0],255&d,d>>16,xt,nn)),on=1;on<=Rn;++on){var m=Oe[Fe+on]|Xe[mt+on]<<16,_=Rt[Ft+on]|Pt[Kt+on]<<16,C=Nn+m+or+_+524296,M=C+2*(m+or)>>3;d=M+Nn>>1,Nn=(C=C+2*(Nn+_)>>3)+m>>1,T(le[Le+2*on-1],255&d,d>>16,Gt,vt+(2*on-1)*q),T(le[Le+2*on-0],255&Nn,Nn>>16,Gt,vt+(2*on-0)*q),Me!=null&&(d=C+or>>1,Nn=M+_>>1,T(Me[Ae+2*on-1],255&d,d>>16,xt,nn+(2*on-1)*q),T(Me[Ae+2*on+0],255&Nn,Nn>>16,xt,nn+(2*on+0)*q)),Nn=m,or=_}1&fn||(d=3*Nn+or+131074>>2,T(le[Le+fn-1],255&d,d>>16,Gt,vt+(fn-1)*q),Me!=null&&(d=3*or+Nn+131074>>2,T(Me[Ae+fn-1],255&d,d>>16,xt,nn+(fn-1)*q)))}}function hn(){ao[Ro]=Ne,ao[wr]=tc,ao[el]=jo,ao[tl]=Gs,ao[ba]=Wr,ao[Lo]=$d,ao[sd]=Mf,ao[Us]=tc,ao[Hs]=Gs,ao[_a]=Wr,ao[u]=$d}function Fn(w){return w&-16384?0>w?0:255:w>>$p}function Wn(w,T){return Fn((19077*w>>8)+(26149*T>>8)-14234)}function fr(w,T,q){return Fn((19077*w>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function Er(w,T){return Fn((19077*w>>8)+(33050*T>>8)-17685)}function Ur(w,T,q,le,Le){le[Le+0]=Wn(w,q),le[Le+1]=fr(w,T,q),le[Le+2]=Er(w,T)}function qi(w,T,q,le,Le){le[Le+0]=Er(w,T),le[Le+1]=fr(w,T,q),le[Le+2]=Wn(w,q)}function gi(w,T,q,le,Le){var Me=fr(w,T,q);T=Me<<3&224|Er(w,T)>>3,le[Le+0]=248&Wn(w,q)|Me>>5,le[Le+1]=T}function Ci(w,T,q,le,Le){var Me=240&Er(w,T)|15;le[Le+0]=240&Wn(w,q)|fr(w,T,q)>>4,le[Le+1]=Me}function ms(w,T,q,le,Le){le[Le+0]=255,Ur(w,T,q,le,Le+1)}function Ls(w,T,q,le,Le){qi(w,T,q,le,Le),le[Le+3]=255}function Qo(w,T,q,le,Le){Ur(w,T,q,le,Le),le[Le+3]=255}function Hr(w,T){return 0>w?0:w>T?T:w}function eo(w,T,q){N[w]=function(le,Le,Me,Ae,Oe,Fe,Xe,mt,Rt){for(var Ft=mt+(-2&Rt)*q;mt!=Ft;)T(le[Le+0],Me[Ae+0],Oe[Fe+0],Xe,mt),T(le[Le+1],Me[Ae+0],Oe[Fe+0],Xe,mt+q),Le+=2,++Ae,++Fe,mt+=2*q;1&Rt&&T(le[Le+0],Me[Ae+0],Oe[Fe+0],Xe,mt)}}function jl(w,T,q){return q==0?w==0?T==0?6:5:T==0?4:0:q}function bo(w,T,q,le,Le){switch(w>>>30){case 3:Yt(T,q,le,Le,0);break;case 2:Nt(T,q,le,Le);break;case 1:nr(T,q,le,Le)}}function Du(w,T){var q,le,Le=T.M,Me=T.Nb,Ae=w.oc,Oe=w.pc+40,Fe=w.oc,Xe=w.pc+584,mt=w.oc,Rt=w.pc+600;for(q=0;16>q;++q)Ae[Oe+32*q-1]=129;for(q=0;8>q;++q)Fe[Xe+32*q-1]=129,mt[Rt+32*q-1]=129;for(0<Le?Ae[Oe-1-32]=Fe[Xe-1-32]=mt[Rt-1-32]=129:(i(Ae,Oe-32-1,127,21),i(Fe,Xe-32-1,127,9),i(mt,Rt-32-1,127,9)),le=0;le<w.za;++le){var Ft=T.ya[T.aa+le];if(0<le){for(q=-1;16>q;++q)r(Ae,Oe+32*q-4,Ae,Oe+32*q+12,4);for(q=-1;8>q;++q)r(Fe,Xe+32*q-4,Fe,Xe+32*q+4,4),r(mt,Rt+32*q-4,mt,Rt+32*q+4,4)}var Pt=w.Gd,Kt=w.Hd+le,Gt=Ft.ad,vt=Ft.Hc;if(0<Le&&(r(Ae,Oe-32,Pt[Kt].y,0,16),r(Fe,Xe-32,Pt[Kt].f,0,8),r(mt,Rt-32,Pt[Kt].ea,0,8)),Ft.Za){var xt=Ae,nn=Oe-32+16;for(0<Le&&(le>=w.za-1?i(xt,nn,Pt[Kt].y[15],4):r(xt,nn,Pt[Kt+1].y,0,4)),q=0;4>q;q++)xt[nn+128+q]=xt[nn+256+q]=xt[nn+384+q]=xt[nn+0+q];for(q=0;16>q;++q,vt<<=2)xt=Ae,nn=Oe+Af[q],wa[Ft.Ob[q]](xt,nn),bo(vt,Gt,16*+q,xt,nn)}else if(xt=jl(le,Le,Ft.Ob[0]),$a[xt](Ae,Oe),vt!=0)for(q=0;16>q;++q,vt<<=2)bo(vt,Gt,16*+q,Ae,Oe+Af[q]);for(q=Ft.Gc,xt=jl(le,Le,Ft.Dd),la[xt](Fe,Xe),la[xt](mt,Rt),vt=Gt,xt=Fe,nn=Xe,255&(Ft=q>>0)&&(170&Ft?Bn(vt,256,xt,nn):Mr(vt,256,xt,nn)),Ft=mt,vt=Rt,255&(q>>=8)&&(170&q?Bn(Gt,320,Ft,vt):Mr(Gt,320,Ft,vt)),Le<w.Ub-1&&(r(Pt[Kt].y,0,Ae,Oe+480,16),r(Pt[Kt].f,0,Fe,Xe+224,8),r(Pt[Kt].ea,0,mt,Rt+224,8)),q=8*Me*w.B,Pt=w.sa,Kt=w.ta+16*le+16*Me*w.R,Gt=w.qa,Ft=w.ra+8*le+q,vt=w.Ha,xt=w.Ia+8*le+q,q=0;16>q;++q)r(Pt,Kt+q*w.R,Ae,Oe+32*q,16);for(q=0;8>q;++q)r(Gt,Ft+q*w.B,Fe,Xe+32*q,8),r(vt,xt+q*w.B,mt,Rt+32*q,8)}}function Oa(w,T,q,le,Le,Me,Ae,Oe,Fe){var Xe=[0],mt=[0],Rt=0,Ft=Fe!=null?Fe.kd:0,Pt=Fe??new ma;if(w==null||12>q)return 7;Pt.data=w,Pt.w=T,Pt.ha=q,T=[T],q=[q],Pt.gb=[Pt.gb];e:{var Kt=T,Gt=q,vt=Pt.gb;if(e(w!=null),e(Gt!=null),e(vt!=null),vt[0]=0,12<=Gt[0]&&!n(w,Kt[0],"RIFF")){if(n(w,Kt[0]+8,"WEBP")){vt=3;break e}var xt=he(w,Kt[0]+4);if(12>xt||4294967286<xt){vt=3;break e}if(Ft&&xt>Gt[0]-8){vt=7;break e}vt[0]=xt,Kt[0]+=12,Gt[0]-=12}vt=0}if(vt!=0)return vt;for(xt=0<Pt.gb[0],q=q[0];;){e:{var nn=w;Gt=T,vt=q;var fn=Xe,on=mt,Rn=Kt=[0];if((d=Rt=[Rt])[0]=0,8>vt[0])vt=7;else{if(!n(nn,Gt[0],"VP8X")){if(he(nn,Gt[0]+4)!=10){vt=3;break e}if(18>vt[0]){vt=7;break e}var Nn=he(nn,Gt[0]+8),or=1+et(nn,Gt[0]+12);if(2147483648<=or*(nn=1+et(nn,Gt[0]+15))){vt=3;break e}Rn!=null&&(Rn[0]=Nn),fn!=null&&(fn[0]=or),on!=null&&(on[0]=nn),Gt[0]+=18,vt[0]-=18,d[0]=1}vt=0}}if(Rt=Rt[0],Kt=Kt[0],vt!=0)return vt;if(Gt=!!(2&Kt),!xt&&Rt)return 3;if(Me!=null&&(Me[0]=!!(16&Kt)),Ae!=null&&(Ae[0]=Gt),Oe!=null&&(Oe[0]=0),Ae=Xe[0],Kt=mt[0],Rt&&Gt&&Fe==null){vt=0;break}if(4>q){vt=7;break}if(xt&&Rt||!xt&&!Rt&&!n(w,T[0],"ALPH")){q=[q],Pt.na=[Pt.na],Pt.P=[Pt.P],Pt.Sa=[Pt.Sa];e:{Nn=w,vt=T,xt=q;var d=Pt.gb;fn=Pt.na,on=Pt.P,Rn=Pt.Sa,or=22,e(Nn!=null),e(xt!=null),nn=vt[0];var m=xt[0];for(e(fn!=null),e(Rn!=null),fn[0]=null,on[0]=null,Rn[0]=0;;){if(vt[0]=nn,xt[0]=m,8>m){vt=7;break e}var _=he(Nn,nn+4);if(4294967286<_){vt=3;break e}var C=8+_+1&-2;if(or+=C,0<d&&or>d){vt=3;break e}if(!n(Nn,nn,"VP8 ")||!n(Nn,nn,"VP8L")){vt=0;break e}if(m[0]<C){vt=7;break e}n(Nn,nn,"ALPH")||(fn[0]=Nn,on[0]=nn+8,Rn[0]=_),nn+=C,m-=C}}if(q=q[0],Pt.na=Pt.na[0],Pt.P=Pt.P[0],Pt.Sa=Pt.Sa[0],vt!=0)break}q=[q],Pt.Ja=[Pt.Ja],Pt.xa=[Pt.xa];e:if(d=w,vt=T,xt=q,fn=Pt.gb[0],on=Pt.Ja,Rn=Pt.xa,Nn=vt[0],nn=!n(d,Nn,"VP8 "),or=!n(d,Nn,"VP8L"),e(d!=null),e(xt!=null),e(on!=null),e(Rn!=null),8>xt[0])vt=7;else{if(nn||or){if(d=he(d,Nn+4),12<=fn&&d>fn-12){vt=3;break e}if(Ft&&d>xt[0]-8){vt=7;break e}on[0]=d,vt[0]+=8,xt[0]-=8,Rn[0]=or}else Rn[0]=5<=xt[0]&&d[Nn+0]==47&&!(d[Nn+4]>>5),on[0]=xt[0];vt=0}if(q=q[0],Pt.Ja=Pt.Ja[0],Pt.xa=Pt.xa[0],T=T[0],vt!=0)break;if(4294967286<Pt.Ja)return 3;if(Oe==null||Gt||(Oe[0]=Pt.xa?2:1),Ae=[Ae],Kt=[Kt],Pt.xa){if(5>q){vt=7;break}Oe=Ae,Ft=Kt,Gt=Me,w==null||5>q?w=0:5<=q&&w[T+0]==47&&!(w[T+4]>>5)?(xt=[0],d=[0],fn=[0],X(on=new ie,w,T,q),tr(on,xt,d,fn)?(Oe!=null&&(Oe[0]=xt[0]),Ft!=null&&(Ft[0]=d[0]),Gt!=null&&(Gt[0]=fn[0]),w=1):w=0):w=0}else{if(10>q){vt=7;break}Oe=Kt,w==null||10>q||!Sr(w,T+3,q-3)?w=0:(Ft=w[T+0]|w[T+1]<<8|w[T+2]<<16,Gt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=Pt.Ja||!Gt||!w?w=0:(Ae&&(Ae[0]=Gt),Oe&&(Oe[0]=w),w=1))}if(!w||(Ae=Ae[0],Kt=Kt[0],Rt&&(Xe[0]!=Ae||mt[0]!=Kt)))return 3;Fe!=null&&(Fe[0]=Pt,Fe.offset=T-Fe.w,e(4294967286>T-Fe.w),e(Fe.offset==Fe.ha-q));break}return vt==0||vt==7&&Rt&&Fe==null?(Me!=null&&(Me[0]|=Pt.na!=null&&0<Pt.na.length),le!=null&&(le[0]=Ae),Le!=null&&(Le[0]=Kt),0):vt}function Qu(w,T,q){var le=T.width,Le=T.height,Me=0,Ae=0,Oe=le,Fe=Le;if(T.Da=w!=null&&0<w.Da,T.Da&&(Oe=w.cd,Fe=w.bd,Me=w.v,Ae=w.j,11>q||(Me&=-2,Ae&=-2),0>Me||0>Ae||0>=Oe||0>=Fe||Me+Oe>le||Ae+Fe>Le))return 0;if(T.v=Me,T.j=Ae,T.va=Me+Oe,T.o=Ae+Fe,T.U=Oe,T.T=Fe,T.da=w!=null&&0<w.da,T.da){if(!ze(Oe,Fe,q=[w.ib],Me=[w.hb]))return 0;T.ib=q[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*le/4&&T.hb<3*Le/4,T.Kb=0),1}function wl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function xl(w,T,q,le){if(le==null||0>=w||0>=T)return 2;if(q!=null){if(q.Da){var Le=q.cd,Me=q.bd,Ae=-2&q.v,Oe=-2&q.j;if(0>Ae||0>Oe||0>=Le||0>=Me||Ae+Le>w||Oe+Me>T)return 2;w=Le,T=Me}if(q.da){if(!ze(w,T,Le=[q.ib],Me=[q.hb]))return 2;w=Le[0],T=Me[0]}}le.width=w,le.height=T;e:{var Fe=le.width,Xe=le.height;if(w=le.S,0>=Fe||0>=Xe||!(w>=Ro&&13>w))w=2;else{if(0>=le.Rd&&le.sd==null){Ae=Me=Le=T=0;var mt=(Oe=Fe*Of[w])*Xe;if(11>w||(Me=(Xe+1)/2*(T=(Fe+1)/2),w==12&&(Ae=(Le=Fe)*Xe)),(Xe=s(mt+2*Me+Ae))==null){w=1;break e}le.sd=Xe,11>w?((Fe=le.f.RGBA).eb=Xe,Fe.fb=0,Fe.A=Oe,Fe.size=mt):((Fe=le.f.kb).y=Xe,Fe.O=0,Fe.fa=Oe,Fe.Fd=mt,Fe.f=Xe,Fe.N=0+mt,Fe.Ab=T,Fe.Cd=Me,Fe.ea=Xe,Fe.W=0+mt+Me,Fe.Db=T,Fe.Ed=Me,w==12&&(Fe.F=Xe,Fe.J=0+mt+2*Me),Fe.Tc=Ae,Fe.lb=Le)}if(T=1,Le=le.S,Me=le.width,Ae=le.height,Le>=Ro&&13>Le)if(11>Le)w=le.f.RGBA,T&=(Oe=Math.abs(w.A))*(Ae-1)+Me<=w.size,T&=Oe>=Me*Of[Le],T&=w.eb!=null;else{w=le.f.kb,Oe=(Me+1)/2,mt=(Ae+1)/2,Fe=Math.abs(w.fa),Xe=Math.abs(w.Ab);var Rt=Math.abs(w.Db),Ft=Math.abs(w.lb),Pt=Ft*(Ae-1)+Me;T&=Fe*(Ae-1)+Me<=w.Fd,T&=Xe*(mt-1)+Oe<=w.Cd,T=(T&=Rt*(mt-1)+Oe<=w.Ed)&Fe>=Me&Xe>=Oe&Rt>=Oe,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,Le==12&&(T&=Ft>=Me,T&=Pt<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||q!=null&&q.fd&&(w=wl(le)),w}var Ss=64,Na=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ea=24,Io=32,zl=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ve("Predictor0","PredictorAdd0"),N.Predictor0=function(){return 4278190080},N.Predictor1=function(w){return w},N.Predictor2=function(w,T,q){return T[q+0]},N.Predictor3=function(w,T,q){return T[q+1]},N.Predictor4=function(w,T,q){return T[q-1]},N.Predictor5=function(w,T,q){return Ke(Ke(w,T[q+1]),T[q+0])},N.Predictor6=function(w,T,q){return Ke(w,T[q-1])},N.Predictor7=function(w,T,q){return Ke(w,T[q+0])},N.Predictor8=function(w,T,q){return Ke(T[q-1],T[q+0])},N.Predictor9=function(w,T,q){return Ke(T[q+0],T[q+1])},N.Predictor10=function(w,T,q){return Ke(Ke(w,T[q-1]),Ke(T[q+0],T[q+1]))},N.Predictor11=function(w,T,q){var le=T[q+0];return 0>=ft(le>>24&255,w>>24&255,(T=T[q-1])>>24&255)+ft(le>>16&255,w>>16&255,T>>16&255)+ft(le>>8&255,w>>8&255,T>>8&255)+ft(255&le,255&w,255&T)?le:w},N.Predictor12=function(w,T,q){var le=T[q+0];return(_t((w>>24&255)+(le>>24&255)-((T=T[q-1])>>24&255))<<24|_t((w>>16&255)+(le>>16&255)-(T>>16&255))<<16|_t((w>>8&255)+(le>>8&255)-(T>>8&255))<<8|_t((255&w)+(255&le)-(255&T)))>>>0},N.Predictor13=function(w,T,q){var le=T[q-1];return(Ge((w=Ke(w,T[q+0]))>>24&255,le>>24&255)<<24|Ge(w>>16&255,le>>16&255)<<16|Ge(w>>8&255,le>>8&255)<<8|Ge(w>>0&255,le>>0&255))>>>0};var _o=N.PredictorAdd0;N.PredictorAdd1=Ut,Ve("Predictor2","PredictorAdd2"),Ve("Predictor3","PredictorAdd3"),Ve("Predictor4","PredictorAdd4"),Ve("Predictor5","PredictorAdd5"),Ve("Predictor6","PredictorAdd6"),Ve("Predictor7","PredictorAdd7"),Ve("Predictor8","PredictorAdd8"),Ve("Predictor9","PredictorAdd9"),Ve("Predictor10","PredictorAdd10"),Ve("Predictor11","PredictorAdd11"),Ve("Predictor12","PredictorAdd12"),Ve("Predictor13","PredictorAdd13");var wo=N.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,Os=N.ColorIndexInverseTransform,Za=N.MapARGB,no=N.VP8LColorIndexInverseTransformAlpha,ro=N.MapAlpha,Xa=N.VP8LPredictorsAdd=[];Xa.length=16,(N.VP8LPredictors=[]).length=16,(N.VP8LPredictorsAdd_C=[]).length=16,(N.VP8LPredictors_C=[]).length=16;var Ja,io,$s,Ia,ta,so,Lt,Yt,Nt,Bn,nr,Mr,Xi,Ei,fu,xo,Ji,Ba,Qa,Ra,Fa,ja,ri,ya,Vs,Pi,Ii,vs,Ui=s(511),na=s(2041),Bo=s(225),aa=s(767),ec=0,za=na,Cs=Bo,$i=aa,oo=Ui,Ro=0,wr=1,el=2,tl=3,ba=4,Lo=5,sd=6,Us=7,Hs=8,_a=9,u=10,y=[2,3,7],P=[3,3,11],G=[280,256,256,256,40],ae=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ut=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ot=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wt=8,un=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],jn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],sr=null,Vr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Es=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],as=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ws=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Qi=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Fo=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],od=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],$a=[],wa=[],la=[],Th=1,Ou=2,_i=[],ao=[];Ht("UpsampleRgbLinePair",Ur,3),Ht("UpsampleBgrLinePair",qi,3),Ht("UpsampleRgbaLinePair",Qo,4),Ht("UpsampleBgraLinePair",Ls,4),Ht("UpsampleArgbLinePair",ms,4),Ht("UpsampleRgba4444LinePair",Ci,2),Ht("UpsampleRgb565LinePair",gi,2);var Ne=N.UpsampleRgbLinePair,jo=N.UpsampleBgrLinePair,tc=N.UpsampleRgbaLinePair,Gs=N.UpsampleBgraLinePair,Wr=N.UpsampleArgbLinePair,$d=N.UpsampleRgba4444LinePair,Mf=N.UpsampleRgb565LinePair,Vd=16,Ll=1<<Vd-1,ad=-227,Dh=482,$p=6,Tc=0,Ud=s(256),pu=s(256),Vp=s(256),Hd=s(256),Wd=s(Dh-ad),kf=s(Dh-ad);eo("YuvToRgbRow",Ur,3),eo("YuvToBgrRow",qi,3),eo("YuvToRgbaRow",Qo,4),eo("YuvToBgraRow",Ls,4),eo("YuvToArgbRow",ms,4),eo("YuvToRgba4444Row",Ci,2),eo("YuvToRgb565Row",gi,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nl=[0,2,8],Tf=[8,7,6,4,4,2,2,2,1,1,1,1],Df=1;this.WebPDecodeRGBA=function(w,T,q,le,Le){var Me=wr,Ae=new zs,Oe=new er;Ae.ba=Oe,Oe.S=Me,Oe.width=[Oe.width],Oe.height=[Oe.height];var Fe=Oe.width,Xe=Oe.height,mt=new vr;if(mt==null||w==null)var Rt=2;else e(mt!=null),Rt=Oa(w,T,q,mt.width,mt.height,mt.Pd,mt.Qd,mt.format,null);if(Rt!=0?Fe=0:(Fe!=null&&(Fe[0]=mt.width[0]),Xe!=null&&(Xe[0]=mt.height[0]),Fe=1),Fe){Oe.width=Oe.width[0],Oe.height=Oe.height[0],le!=null&&(le[0]=Oe.width),Le!=null&&(Le[0]=Oe.height);e:{if(le=new ei,(Le=new ma).data=w,Le.w=T,Le.ha=q,Le.kd=1,T=[0],e(Le!=null),((w=Oa(Le.data,Le.w,Le.ha,null,null,null,T,null,Le))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Ae!=null),le.data=Le.data,le.w=Le.w+Le.offset,le.ha=Le.ha-Le.offset,le.put=Oo,le.ac=Ai,le.bc=Ts,le.ma=Ae,Le.xa){if((w=Un())==null){Ae=1;break e}if(function(Ft,Pt){var Kt=[0],Gt=[0],vt=[0];t:for(;;){if(Ft==null)return 0;if(Pt==null)return Ft.a=2,0;if(Ft.l=Pt,Ft.a=0,X(Ft.m,Pt.data,Pt.w,Pt.ha),!tr(Ft.m,Kt,Gt,vt)){Ft.a=3;break t}if(Ft.xb=Ou,Pt.width=Kt[0],Pt.height=Gt[0],!dr(Kt[0],Gt[0],1,Ft,null))break t;return 1}return e(Ft.a!=0),0}(w,le)){if(le=(T=xl(le.width,le.height,Ae.Oa,Ae.ba))==0){t:{le=w;n:for(;;){if(le==null){le=0;break t}if(e(le.s.yc!=null),e(le.s.Ya!=null),e(0<le.s.Wb),e((q=le.l)!=null),e((Le=q.ma)!=null),le.xb!=0){if(le.ca=Le.ba,le.tb=Le.tb,e(le.ca!=null),!Qu(Le.Oa,q,tl)){le.a=2;break n}if(!Lr(le,q.width)||q.da)break n;if((q.da||Qt(le.ca.S))&&Mt(),11>le.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),le.ca.f.kb.F!=null&&Mt()),le.Pb&&0<le.s.ua&&le.s.vb.X==null&&!Q(le.s.vb,le.s.Wa.Xa)){le.a=1;break n}le.xb=0}if(!St(le,le.V,le.Ba,le.c,le.i,q.o,Vn))break n;Le.Dc=le.Ma,le=1;break t}e(le.a!=0),le=0}le=!le}le&&(T=w.a)}else T=w.a}else{if((w=new hr)==null){Ae=1;break e}if(w.Fa=Le.na,w.P=Le.P,w.qc=Le.Sa,ws(w,le)){if((T=xl(le.width,le.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,q=Ae.Oa,e((Le=w)!=null),q!=null){if(0<(Fe=0>(Fe=q.Md)?0:100<Fe?255:255*Fe/100)){for(Xe=mt=0;4>Xe;++Xe)12>(Rt=Le.pb[Xe]).lc&&(Rt.ia=Fe*Tf[0>Rt.lc?0:Rt.lc]>>3),mt|=Rt.ia;mt&&(alert("todo:VP8InitRandom"),Le.ia=1)}Le.Ga=q.Id,100<Le.Ga?Le.Ga=100:0>Le.Ga&&(Le.Ga=0)}Sn(w,le)||(T=w.a)}}else T=w.a}T==0&&Ae.Oa!=null&&Ae.Oa.fd&&(T=wl(Ae.ba))}Ae=T}Me=Ae!=0?null:11>Me?Oe.f.RGBA.eb:Oe.f.kb.y}else Me=null;return Me};var Of=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(N,j){for(var K="",I=0;I<4;I++)K+=String.fromCharCode(N[j++]);return K}function h(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16)>>>0}function p(N,j){return(N[j+0]<<0|N[j+1]<<8|N[j+2]<<16|N[j+3]<<24)>>>0}new l;var v=[0],g=[0],x=[],E=new l,k=t,A=function(N,j){var K={},I=0,R=!1,B=0,$=0;if(K.frames=[],!function(H,Z,me,fe){for(var de=0;de<fe;de++)if(H[Z+de]!=me.charCodeAt(de))return!0;return!1}(N,j,"RIFF",4)){var U,V;for(p(N,j+=4),j+=8;j<N.length;){var ne=c(N,j),X=p(N,j+=4);j+=4;var we=X+(1&X);switch(ne){case"VP8 ":case"VP8L":K.frames[I]===void 0&&(K.frames[I]={}),(ie=K.frames[I]).src_off=R?$:j-8,ie.src_size=B+X+8,I++,R&&(R=!1,B=0,$=0);break;case"VP8X":(ie=K.header={}).feature_flags=N[j];var ve=j+4;ie.canvas_width=1+h(N,ve),ve+=3,ie.canvas_height=1+h(N,ve),ve+=3;break;case"ALPH":R=!0,B=we+8,$=j-8;break;case"ANIM":(ie=K.header).bgcolor=p(N,j),ve=j+4,ie.loop_count=(U=N)[(V=ve)+0]<<0|U[V+1]<<8,ve+=2;break;case"ANMF":var Ze,ie;(ie=K.frames[I]={}).offset_x=2*h(N,j),j+=3,ie.offset_y=2*h(N,j),j+=3,ie.width=1+h(N,j),j+=3,ie.height=1+h(N,j),j+=3,ie.duration=h(N,j),j+=3,Ze=N[j++],ie.dispose=1&Ze,ie.blend=Ze>>1&1}ne!="ANMF"&&(j+=we)}return K}}(k,0);A.response=k,A.rgbaoutput=!0,A.dataurl=!1;var D=A.header?A.header:null,z=A.frames?A.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],g=[D.canvas_width];for(var Y=0;Y<z.length&&z[Y].blend!=0;Y++);}var te=z[0],ge=E.WebPDecodeRGBA(k,te.src_off,te.src_size,g,v);te.rgba=ge,te.imgwidth=g[0],te.imgheight=v[0];for(var pe=0;pe<g[0]*v[0]*4;pe++)x[pe]=ge[pe];return this.width=g,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof Eb=="function"},n=function(v,g,x,E){var k=4,A=o;switch(E){case t.image_compression.FAST:k=1,A=s;break;case t.image_compression.MEDIUM:k=6,A=a;break;case t.image_compression.SLOW:k=9,A=l}v=r(v,g,x,A);var D=Eb(v,{level:k});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(v,g,x,E){for(var k,A,D,z=v.length/g,Y=new Uint8Array(v.length+z),te=h(),ge=0;ge<z;ge+=1){if(D=ge*g,k=v.subarray(D,D+g),E)Y.set(E(k,x,A),D+ge);else{for(var pe,N=te.length,j=[];pe<N;pe+=1)j[pe]=te[pe](k,x,A);var K=p(j.concat());Y.set(j[K],D+ge)}A=k}return Y},i=function(v){var g=Array.apply([],v);return g.unshift(0),g},s=function(v,g){var x,E=[],k=v.length;E[0]=1;for(var A=0;A<k;A+=1)x=v[A-g]||0,E[A+1]=v[A]-x+256&255;return E},o=function(v,g,x){var E,k=[],A=v.length;k[0]=2;for(var D=0;D<A;D+=1)E=x&&x[D]||0,k[D+1]=v[D]-E+256&255;return k},a=function(v,g,x){var E,k,A=[],D=v.length;A[0]=3;for(var z=0;z<D;z+=1)E=v[z-g]||0,k=x&&x[z]||0,A[z+1]=v[z]+256-(E+k>>>1)&255;return A},l=function(v,g,x){var E,k,A,D,z=[],Y=v.length;z[0]=4;for(var te=0;te<Y;te+=1)E=v[te-g]||0,k=x&&x[te]||0,A=x&&x[te-g]||0,D=c(E,k,A),z[te+1]=v[te]-D+256&255;return z},c=function(v,g,x){if(v===g&&g===x)return v;var E=Math.abs(g-x),k=Math.abs(v-x),A=Math.abs(v+g-x-x);return E<=k&&E<=A?v:k<=A?g:x},h=function(){return[i,s,o,a,l]},p=function(v){var g=v.map(function(x){return x.reduce(function(E,k){return E+Math.abs(k)},0)});return g.indexOf(Math.min.apply(null,g))};t.processPNG=function(v,g,x,E){var k,A,D,z,Y,te,ge,pe,N,j,K,I,R,B,$,U=this.decode.FLATE_DECODE,V="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new VH(v)).imgData,A=D.bits,k=D.colorSpace,Y=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){N=(pe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,K=new Uint8Array(N*D.colors),j=new Uint8Array(N);var ne,X=D.pixelBitlength-D.bits;for(B=0,$=0;B<N;B++){for(R=pe[B],ne=0;ne<X;)K[$++]=R>>>ne&255,ne+=D.bits;j[B]=R>>>ne&255}}if(D.bits===16){N=(pe=new Uint32Array(D.decodePixels().buffer)).length,K=new Uint8Array(N*(32/D.pixelBitlength)*D.colors),j=new Uint8Array(N*(32/D.pixelBitlength)),I=D.colors>1,B=0,$=0;for(var we=0;B<N;)R=pe[B++],K[$++]=R>>>0&255,I&&(K[$++]=R>>>16&255,R=pe[B++],K[$++]=R>>>0&255),j[we++]=R>>>16&255;A=8}E!==t.image_compression.NONE&&e()?(v=n(K,D.width*D.colors,D.colors,E),ge=n(j,D.width,1,E)):(v=K,ge=j,U=void 0)}if(D.colorType===3&&(k=this.color_spaces.INDEXED,te=D.palette,D.transparency.indexed)){var ve=D.transparency.indexed,Ze=0;for(B=0,N=ve.length;B<N;++B)Ze+=ve[B];if((Ze/=255)===N-1&&ve.indexOf(0)!==-1)z=[ve.indexOf(0)];else if(Ze!==N){for(pe=D.decodePixels(),j=new Uint8Array(pe.length),B=0,N=pe.length;B<N;B++)j[B]=ve[pe[B]];ge=n(j,D.width,1)}}var ie=function(H){var Z;switch(H){case t.image_compression.FAST:Z=11;break;case t.image_compression.MEDIUM:Z=13;break;case t.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(E);return U===this.decode.FLATE_DECODE&&(V="/Predictor "+ie+" "),V+="/Colors "+Y+" /BitsPerComponent "+A+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:x,data:v,index:g,filter:U,decodeParameters:V,transparency:z,palette:te,sMask:ge,predictor:ie,width:D.width,height:D.height,bitsPerComponent:A,colorSpace:k}}}})(Nr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new UH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},h=new l2(100).encode(c,100);return t.processJPEG.call(this,h,n,r,i)},t.processGIF87A=t.processGIF89A}(Nr.API),dc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},dc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){bs.log("bit decode error:"+n)}},dc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},dc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},dc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},dc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,h=r*this.width*4+4*i;this.data[h]=l,this.data[h+1]=a,this.data[h+2]=o,this.data[h+3]=c}this.pos+=t}},dc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,h=i*this.width*4+4*s;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=a,this.data[h+3]=255}this.pos+=t}},dc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},dc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},dc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new dc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Nr.API),N5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new N5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new l2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Nr.API),Nr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var h=r[c],p=r[c+1],v=r[c+2],g=r[c+3];s[a++]=h,s[a++]=p,s[a++]=v,o[l++]=g}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Nr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Yf=Nr.API,S0=Yf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,h=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,g=t.length,x=0,E=a[0]||l,k=[];for(n=0;n<g;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?k.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&cs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/h:0,k.push((a[r]||E)/l+v)),x=r;return k},A5=Yf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Yf.processArabic&&(t=Yf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:S0.apply(this,arguments).reduce(function(s,o){return s+o},0)},T5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},D5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,h=[],p=[h],v=n.textIndent||0,g=0,x=0,E=t.split(" "),k=S0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var A=Array(l).join(" "),D=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?D=D.concat(Y.map(function(te,ge){return(ge&&te.length?`
`:"")+te})):D.push(Y[0])}),E=D,l=A5.apply(this,[A,n])}for(s=0,o=E.length;s<o;s++){var z=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),z=1),v+g+(x=(i=S0.apply(this,[r,n])).reduce(function(Y,te){return Y+te},0))>e||z){if(x>e){for(a=T5.apply(this,[r,i,e-(v+g),e]),h.push(a.shift()),h=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(h[0]?h[0].length:0)).reduce(function(Y,te){return Y+te},0)}else h=[r];p.push(h),v=x+l,g=k}else h.push(r),v+=g+x,g=k}return c=l?function(Y,te){return(te?A:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Yf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(D5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,g,x,E,k=["{"];for(var A in p){if(v=p[A],isNaN(parseInt(A,10))?g="'"+A+"'":(A=parseInt(A,10),g=(g=s(A).slice(2)).slice(0,-1)+r[g.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(cs(v)!=="object")throw new Error("Don't know what to do with value type "+cs(v)+".");x=o(v)}k.push(g+x)}return k.push("}"),k.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,g,x,E,k={},A=1,D=k,z=[],Y="",te="",ge=p.length-1,pe=1;pe<ge;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?(z.push([D,x]),D={},x=void 0):E=="}"?((g=z.pop())[0][g[1]]=D,x=void 0,D=g[0]):E=="-"?A=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*A,A=1,Y=""):Y+=E:n.hasOwnProperty(E)?(te+=n[E],D[x]=parseInt(te,16)*A,A=1,x=void 0,te=""):te+=E;return k},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},h={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,g=h.Unicode[v.postScriptName];g&&(v.metadata.Unicode={},v.metadata.Unicode.widths=g.widths,v.metadata.Unicode.kerning=g.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Nr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Hg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Nr),function(t){function e(){return(jr.canvg?Promise.resolve(jr.canvg):kd(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Nr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw bs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw bs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var h=document.createElement("canvas");h.width=s,h.height=o;var p=h.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,h.width,h.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){g.addImage(h.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Nr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Nr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,h=0,p=0;function v(x,E){var k,A=!1;for(k=0;k<x.length;k+=1)x[k]===E&&(A=!0);return A}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var g=a.length;for(p=0;p<g;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(cs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(h=0;h<s[c].length;h+=1)typeof s[c][h]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Nr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],h=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return h.join("");a=a.toString(16),h.push(c[4-a.length],a)}return h.join("")},r=function(s){var o,a,l,c,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(g,x){return g-x})).length;p<v;p++)o=a[p],l.length>=100&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(h+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),h+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),g="",x=0;x<v.length;x++)g+=String.fromCharCode(v[x]);var E=c();h({data:g,addLength1:!0,objectId:E}),l("endobj");var k=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:k}),l("endobj");var A=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+op(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+op(a.fontName)),l("/FontDescriptor "+A+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+k+" 0 R"),l("/BaseFont /"+op(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,h=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",g=0;g<p.length;g++)v+=String.fromCharCode(p[g]);var x=c();h({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();h({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var k=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+op(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var A=0;A<a.metadata.hmtx.widths.length;A++)a.metadata.hmtx.widths[A]=parseInt(a.metadata.hmtx.widths[A]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+op(a.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,h=s.options||{},p=s.mutex||{},v=p.pdfEscape,g=p.activeFontKey,x=p.fonts,E=g,k="",A=0,D="",z=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:h,mutex:p};for(D=a,E=g,Array.isArray(a)&&(D=a[0]),A=0;A<D.length;A+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[D[A].charCodeAt(0)]),o||D[A].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?k+=D[A]:k+="";var Y="";return parseInt(E.slice(1))<14||z==="WinAnsiEncoding"?Y=v(k,E).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):z==="Identity-H"&&(Y=n(k,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:h,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Nr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Nr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,h,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],g=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],A=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,z=0;this.__bidiEngine__={};var Y=function(I){var R=I.charCodeAt(),B=R>>8,$=E[B];return $!==void 0?p[256*$+(255&R)]:B===252||B===253?"AL":A.test(B)?"L":B===8?"R":"N"},te=function(I){for(var R,B=0;B<I.length;B++){if((R=Y(I.charAt(B)))==="L")return!1;if(R==="R")return!0}return!1},ge=function(I,R,B,$){var U,V,ne,X,we=R[$];switch(we){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(we="AN");break;case"AL":D=!0,we="R";break;case"WS":we="N";break;case"CS":$<1||$+1>=R.length||(U=B[$-1])!=="EN"&&U!=="AN"||(V=R[$+1])!=="EN"&&V!=="AN"?we="N":D&&(V="AN"),we=V===U?V:"N";break;case"ES":we=(U=$>0?B[$-1]:"B")==="EN"&&$+1<R.length&&R[$+1]==="EN"?"EN":"N";break;case"ET":if($>0&&B[$-1]==="EN"){we="EN";break}if(D){we="N";break}for(ne=$+1,X=R.length;ne<X&&R[ne]==="ET";)ne++;we=ne<X&&R[ne]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(X=R.length,ne=$+1;ne<X&&R[ne]==="NSM";)ne++;if(ne<X){var ve=I[$],Ze=ve>=1425&&ve<=2303||ve===64286;if(U=R[ne],Ze&&(U==="R"||U==="AL")){we="R";break}}}we=$<1||(U=R[$-1])==="B"?"N":B[$-1];break;case"B":D=!1,i=!0,we=z;break;case"S":s=!0,we="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":we="N"}return we},pe=function(I,R,B){var $=I.split("");return B&&N($,B,{hiLevel:z}),$.reverse(),R&&R.reverse(),$.join("")},N=function(I,R,B){var $,U,V,ne,X,we=-1,ve=I.length,Ze=0,ie=[],H=z?g:v,Z=[];for(D=!1,i=!1,s=!1,U=0;U<ve;U++)Z[U]=Y(I[U]);for(V=0;V<ve;V++){if(X=Ze,ie[V]=ge(I,Z,ie,V),$=240&(Ze=H[X][x[ie[V]]]),Ze&=15,R[V]=ne=H[Ze][5],$>0)if($===16){for(U=we;U<V;U++)R[U]=1;we=-1}else we=-1;if(H[Ze][6])we===-1&&(we=V);else if(we>-1){for(U=we;U<V;U++)R[U]=ne;we=-1}Z[V]==="B"&&(R[V]=0),B.hiLevel|=ne}s&&function(me,fe,de){for(var ce=0;ce<de;ce++)if(me[ce]==="S"){fe[ce]=z;for(var J=ce-1;J>=0&&me[J]==="WS";J--)fe[J]=z}}(Z,R,ve)},j=function(I,R,B,$,U){if(!(U.hiLevel<I)){if(I===1&&z===1&&!i)return R.reverse(),void(B&&B.reverse());for(var V,ne,X,we,ve=R.length,Ze=0;Ze<ve;){if($[Ze]>=I){for(X=Ze+1;X<ve&&$[X]>=I;)X++;for(we=Ze,ne=X-1;we<ne;we++,ne--)V=R[we],R[we]=R[ne],R[ne]=V,B&&(V=B[we],B[we]=B[ne],B[ne]=V);Ze=X}Ze++}}},K=function(I,R,B){var $=I.split(""),U={hiLevel:z};return B||(B=[]),N($,B,U),function(V,ne,X){if(X.hiLevel!==0&&h)for(var we,ve=0;ve<V.length;ve++)ne[ve]===1&&(we=k.indexOf(V[ve]))>=0&&(V[ve]=k[we+1])}($,B,U),j(2,$,R,B,U),j(1,$,R,B,U),$.join("")};return this.__bidiEngine__.doBidiReorder=function(I,R,B){if(function(U,V){if(V)for(var ne=0;ne<U.length;ne++)V[ne]=ne;a===void 0&&(a=te(U)),c===void 0&&(c=te(U))}(I,R),o||!l||c)if(o&&l&&a^c)z=a?1:0,I=pe(I,R,B);else if(!o&&l&&c)z=a?1:0,I=K(I,R,B),I=pe(I,R);else if(!o||a||l||c){if(o&&!l&&a^c)I=pe(I,R),a?(z=0,I=K(I,R,B)):(z=1,I=K(I,R,B),I=pe(I,R));else if(o&&a&&!l&&c)z=1,I=K(I,R,B),I=pe(I,R);else if(!o&&!l&&a^c){var $=h;a?(z=1,I=K(I,R,B),z=0,h=!1,I=K(I,R,B),h=$):(z=0,I=K(I,R,B),I=pe(I,R),z=1,h=!1,I=K(I,R,B),h=$,I=pe(I,R))}}else z=0,I=K(I,R,B);else z=a?1:0,I=K(I,R,B);return I},this.__bidiEngine__.setOptions=function(I){I&&(o=I.isInputVisual,l=I.isOutputVisual,a=I.isInputRtl,c=I.isOutputRtl,h=I.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Nr),Nr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Sh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new iW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new HH(this.contents),this.head=new GH(this),this.name=new XH(this),this.cmap=new rP(this),this.toUnicode={},this.hhea=new qH(this),this.maxp=new JH(this),this.hmtx=new QH(this),this.post=new KH(this),this.os2=new YH(this),this.loca=new rW(this),this.glyf=new eW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Mc,Sh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),HH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,h,p,v,g,x,E;for(E in g=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(g)/l),o=Math.floor(p/l),h=16*g-p,(i=new Sh).writeInt(this.scalarType),i.writeShort(g),i.writeShort(p),i.writeShort(o),i.writeShort(h),s=16*g,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=iP.call(n);n.length%4;)n.push(0);for(s=new Sh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),WH={}.hasOwnProperty,id=function(t,e){for(var n in e)WH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Mc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var GH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Sh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),I5=function(){function t(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,k,A,D,z;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(g=e.readUInt16(),v=g/2,e.pos+=6,s=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,E=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),c=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),h=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,te;for(te=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)te.push(e.readUInt16());return te}(),l=A=0,z=s.length;A<z;l=++A)for(k=s[l],r=D=x=E[l];x<=k?D<=k:D>=k;r=x<=k?++D:--D)h[l]===0?o=r+c[l]:(o=a[h[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,k,A,D,z,Y,te,ge,pe,N,j,K,I,R,B,$,U,V,ne,X,we,ve,Ze,ie,H,Z,me,fe,de,ce,J,Re,De,et;switch($=new Sh,o=Object.keys(e).sort(function(he,Q){return he-Q}),n){case"macroman":for(E=0,k=function(){var he=[];for(x=0;x<256;++x)he.push(0);return he}(),D={0:0},s={},U=0,we=o.length;U<we;U++)D[J=e[i=o[U]]]==null&&(D[J]=++E),s[i]={old:e[i],new:D[e[i]]},k[i]=D[e[i]];return $.writeUInt16(1),$.writeUInt16(0),$.writeUInt32(12),$.writeUInt16(0),$.writeUInt16(262),$.writeUInt16(0),$.write(k),{charMap:s,subtable:$.data,maxGlyphID:E+1};case"unicode":for(R=[],p=[],z=0,D={},r={},A=c=null,V=0,ve=o.length;V<ve;V++)D[te=e[i=o[V]]]==null&&(D[te]=++z),r[i]={old:te,new:D[te]},a=D[te]-i,A!=null&&a===c||(A&&p.push(A),R.push(i),c=a),A=i;for(A&&p.push(A),p.push(65535),R.push(65535),K=2*(j=R.length),N=2*Math.pow(Math.log(j)/Math.LN2,2),v=Math.log(N/2)/Math.LN2,pe=2*j-N,l=[],ge=[],g=[],x=ne=0,Ze=R.length;ne<Ze;x=++ne){if(I=R[x],h=p[x],I===65535){l.push(0),ge.push(0);break}if(I-(B=r[I].new)>=32768)for(l.push(0),ge.push(2*(g.length+j-x)),i=X=I;I<=h?X<=h:X>=h;i=I<=h?++X:--X)g.push(r[i].new);else l.push(B-I),ge.push(0)}for($.writeUInt16(3),$.writeUInt16(1),$.writeUInt32(12),$.writeUInt16(4),$.writeUInt16(16+8*j+2*g.length),$.writeUInt16(0),$.writeUInt16(K),$.writeUInt16(N),$.writeUInt16(v),$.writeUInt16(pe),de=0,ie=p.length;de<ie;de++)i=p[de],$.writeUInt16(i);for($.writeUInt16(0),ce=0,H=R.length;ce<H;ce++)i=R[ce],$.writeUInt16(i);for(Re=0,Z=l.length;Re<Z;Re++)a=l[Re],$.writeUInt16(a);for(De=0,me=ge.length;De<me;De++)Y=ge[De],$.writeUInt16(Y);for(et=0,fe=g.length;et<fe;et++)E=g[et],$.writeUInt16(E);return{charMap:r,subtable:$.data,maxGlyphID:z+1}}},t}(),rP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new I5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=I5.encode(n,r),(s=new Sh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),YH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),ZH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,h,p,v,g;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,h=n.readString(s.length),a=new ZH(h,s),c[g=s.nameID]==null&&(c[g]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),QH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var h,p;for(p=[],r=h=0;0<=s?h<s:h>s;r=0<=s?++h:--h)p.push(n.readInt16());return p}(),this.widths=(function(){var h,p,v,g;for(g=[],h=0,p=(v=this.metrics).length;h<p;h++)o=v[h],g.push(o.advance);return g}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),iP=[].slice,eW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,h,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Sh(r.read(s))).readShort(),h=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new nW(l,h,v,c,p):new tW(l,a,h,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),tW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),nW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Sh(iP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),rW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return id(e,Mc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var h=new Array(4*i.length),p=0;p<i.length;++p)h[4*p+3]=255&i[p],h[4*p+2]=(65280&i[p])>>8,h[4*p+1]=(16711680&i[p])>>16,h[4*p]=(4278190080&i[p])>>24;return h},e}(),iW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,h,p,v,g,x,E,k,A;for(i in r=rP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),g={0:0},A=r.charMap)g[(l=A[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in g||(g[x]=v++);return h=function(D){var z,Y;for(z in Y={},D)Y[D[z]]=z;return Y}(g),p=Object.keys(h).sort(function(D,z){return D-z}),E=function(){var D,z,Y;for(Y=[],D=0,z=p.length;D<z;D++)a=p[D],Y.push(h[a]);return Y}(),s=this.font.glyf.encode(o,E,g),c=this.font.loca.encode(s.offsets,E),k={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t}();Nr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const sW={class:"h-full flex"},oW={class:"flex-1 relative"},aW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},lW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},uW={class:"text-center max-w-lg mx-auto p-8"},cW={class:"space-y-4"},dW={class:"map-parent"},hW={class:"map-content flex flex-col h-full"},fW={class:"flex-1 flex flex-col md:flex-row relative"},pW={class:"flex-1 relative"},gW={key:0,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},mW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},vW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},yW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},bW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},_W={key:0,class:"space-y-4"},wW={key:0,class:"space-y-2"},xW={class:"grid grid-cols-1 gap-2"},LW=["onClick"],SW={class:"font-medium text-gray-900"},CW={key:1,class:"space-y-2"},EW={class:"flex items-center mb-4"},PW={class:"text-sm text-gray-600"},MW={class:"grid grid-cols-1 gap-2"},kW=["onClick"],AW={class:"font-medium text-gray-900"},TW={key:2,class:"space-y-2"},DW={class:"flex items-center mb-4"},OW={class:"text-sm text-gray-600"},NW={class:"grid grid-cols-1 gap-2"},IW={key:0,class:"text-center py-4"},BW=["onClick"],RW={class:"font-medium text-gray-900"},FW={key:3,class:"space-y-2"},jW={class:"flex items-center mb-4"},zW={class:"text-sm text-gray-600"},$W={class:"grid grid-cols-1 gap-2"},VW=["onClick"],UW={class:"font-medium text-gray-900"},HW={class:"text-sm text-gray-500"},WW={class:"text-xs text-gray-400 mt-1"},GW=["onClick"],qW={key:1,class:"space-y-4"},YW={key:0,class:"space-y-2"},KW={class:"grid grid-cols-1 gap-2"},ZW={key:0,class:"text-center py-8"},XW=["onClick"],JW={class:"font-medium text-gray-900"},QW={key:1,class:"space-y-2"},eG={class:"flex items-center mb-4"},tG={class:"text-sm text-gray-600"},nG={class:"grid grid-cols-1 gap-2"},rG=["onClick"],iG={class:"font-medium text-gray-900"},sG={class:"text-sm text-gray-500"},oG={class:"text-xs text-gray-400 mt-1"},aG=["onClick"],lG={key:2,class:"space-y-4"},uG={key:0,class:"space-y-2"},cG={class:"grid grid-cols-1 gap-2"},dG=["onClick"],hG={class:"font-medium text-gray-900"},fG={key:1,class:"space-y-2"},pG={class:"flex items-center mb-4"},gG={class:"text-sm text-gray-600"},mG={class:"grid grid-cols-1 gap-2"},vG={key:0,class:"text-center py-4"},yG=["onClick"],bG={class:"font-medium text-gray-900"},_G={key:2,class:"space-y-2"},wG={class:"flex items-center mb-4"},xG={class:"text-sm text-gray-600"},LG={class:"grid grid-cols-1 gap-2"},SG=["onClick"],CG={class:"font-medium text-gray-900"},EG={class:"text-sm text-gray-500"},PG={class:"text-xs text-gray-400 mt-1"},MG=["onClick"],kG={key:3,class:"space-y-4"},AG={key:0,class:"text-center py-8"},TG={key:1,class:"space-y-2"},DG=["onClick"],OG={class:"font-medium text-gray-900"},NG={class:"text-sm text-gray-500"},IG={class:"text-xs text-gray-400 mt-1"},BG=["onClick"],RG={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4"},FG={class:"bg-white rounded-lg p-6 max-w-md w-full shadow-xl"},jG={class:"text-center mb-4"},zG={class:"mt-2 text-gray-600"},B5=Rs({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=XB(),r=Ct(null),i=Ct(!1),s=$y(),o=kp(),a=bf(),l=iu(),c=Ct([]),h=Ct({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:g,initMap:x,setDrawingTool:E,updateShapeStyle:k,updateShapeProperties:A,featureGroup:D,adjustView:z,clearActiveControlPoints:Y,calculateConnectedCoverageArea:te,isDrawing:ge}=FU(),{initMap:pe,changeBaseMap:N}=jU(),j=Ct(!1),K=Ct(!1),I=Ct(!1),R=Ct(!1),B=Ct(null),$=Ct(null),U=Ct(null),V=Ct(!1),ne=Ct(null),X=ga(),we=Ct([]),ve=Ct([]),Ze=Ct([]),ie=Ct(null),H=Ct(null),Z=Ct(null),me=Ct(!1),fe=Ct(!1),de=Ct(!1),ce=Ct(null),J=Jn(()=>{var lt,Be;return console.log("[MapView][filteredClients] Computing with:",{userType:(lt=X.user)==null?void 0:lt.user_type,selectedSalarie:ie.value,salarieVisiteurs:ve.value,visiteurCount:((Be=ve.value)==null?void 0:Be.length)||0}),X.isSalarie||ie.value?ve.value:[]}),Re=Jn(()=>{var En,jt,Hn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(En=v.value.properties)==null?void 0:En.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const lt=v.value.properties||{};let Be="unknown";lt.type?Be=lt.type:v.value instanceof Vt.Circle?Be="Circle":v.value instanceof Wa||v.value instanceof Vt.Rectangle?Be="Rectangle":v.value instanceof uh||v.value instanceof Vt.Polygon?Be="Polygon":(v.value instanceof ua||v.value instanceof Vt.Polyline&&!(v.value instanceof Vt.Polygon))&&(Be="Line"),console.log(`[MapView][selectedShape] Type de forme dtect: ${Be}`),lt.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=Be);let dt;if(lt.style&&lt.style.name)dt=lt.style.name,console.log("[MapView][selectedShape] Using name from style:",dt);else if(lt.name)dt=lt.name,console.log("[MapView][selectedShape] Using name from properties:",dt);else if(v.value.name)dt=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",dt);else{const St=Object.getOwnPropertyDescriptor(v.value,"name");St&&St.value&&(dt=St.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",dt));const qt=["_name","displayName","title"];for(const Un of qt)if(v.value[Un]){dt=v.value[Un],console.log(`[MapView][selectedShape] Found name in ${Un}:`,dt);break}}dt&&(console.log(`[MapView][selectedShape] Ensuring name "${dt}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=dt,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=dt,v.value.name=dt,typeof v.value.setName=="function"&&(v.value.setName(dt),console.log(`[MapView][selectedShape] Used setName method to set name "${dt}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:Be,name:lt.name,foundName:dt,hasNameProperty:"name"in lt,allPropertiesKeys:Object.keys(lt),layerId:v.value._leaflet_id,rawProperties:lt,layerName:v.value.name,layerPropertiesName:(jt=v.value.properties)==null?void 0:jt.name});const Ln={...lt,type:Be,name:dt||v.value.name||lt.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Vn={type:Be,properties:Ln,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Vn.type,hasName:"name"in Vn.properties,name:Vn.properties.name,layerName:Vn.layer.name,layerPropertiesName:(Hn=Vn.layer.properties)==null?void 0:Hn.name}),Vn});function De(lt){const Be=lt.getCenter(),dt=lt.getZoom(),Ln={lat:Be.lat,lng:Be.lng,zoom:dt};document.cookie=`mapState=${JSON.stringify(Ln)};max-age=2592000;path=/`}function et(){const Be=document.cookie.split(";").find(dt=>dt.trim().startsWith("mapState="));if(Be)try{return JSON.parse(Be.split("=")[1])}catch(dt){return console.error("Erreur lors de la lecture du cookie de position:",dt),null}return null}go(async()=>{var lt,Be;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] tat initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(X.isAdmin||X.isEntreprise)&&await Tn(),X.isEntreprise){me.value=!0;try{const St=await In.get("/users/",{params:{role:"SALARIE",entreprise:(lt=X.user)==null?void 0:lt.id}});we.value=St.data}catch(St){console.error("Error loading salaries:",St),we.value=[]}finally{me.value=!1}}if(X.isSalarie){fe.value=!0;try{const St=await X.fetchSalarieVisiteurs(((Be=X.user)==null?void 0:Be.id)||0);ve.value=Array.isArray(St)?St:[St]}catch(St){console.error("Error loading clients:",St)}finally{fe.value=!1}}const dt=et(),Ln=dt?[dt.lat,dt.lng]:[46.603354,1.888334],Vn=(dt==null?void 0:dt.zoom)??6;if(r.value&&!g.value){const St=x(r.value,Ln,Vn);St.pm.setLang("fr"),St.pm.addControls({rotateMode:!1}),pe(St),St.on("moveend",()=>{De(St)}),window.addEventListener("map-set-location",qt=>{if(St&&qt.detail){const{lat:Un,lng:dr,zoom:Lr}=qt.detail;St.flyTo([Un,dr],Lr,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",qt=>{const Un=qt.layer;Un&&Un._leaflet_id&&c.value.findIndex(Lr=>Lr.layer&&Lr.layer._leaflet_id===Un._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Un._leaflet_id}  shapes.value`),c.value.push({layer:Un,id:Un._dbId||Un._leaflet_id}))}),D.value.on("layerremove",qt=>{const Un=qt.layer;if(Un&&Un._leaflet_id)if(!Un._dbId&&(!Un.properties||Un.properties&&!Un.properties.type)){console.log(`[MapView][featureGroup.layerremove] Couche temporaire ${Un._leaflet_id} supprime dfinitivement`);const Lr=c.value.findIndex(pn=>pn.layer&&pn.layer._leaflet_id===Un._leaflet_id);Lr!==-1&&c.value.splice(Lr,1)}else console.log(`[MapView][featureGroup.layerremove] Couche ${Un._leaflet_id} supprime du featureGroup mais conserve dans shapes.value pour restauration ultrieure`)}))}if(h.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramtres d'URL:",h.value.planId),await ze(h.value.planId);const St=document.querySelector(".map-parent");St instanceof HTMLElement&&(St.style.display="block"),h.value.lat&&h.value.lng&&g.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnes:",h.value.lat,h.value.lng),g.value.flyTo([h.value.lat,h.value.lng],16)),h.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",h.value.noteId),setTimeout(()=>{var Un;const qt=((Un=D.value)==null?void 0:Un.getLayers())||[];for(const dr of qt)if(dr._dbId===h.value.noteId||dr.id===h.value.noteId){console.log("[MapView][onMounted] Note trouve:",dr),typeof dr.fire=="function"&&dr.fire("click");break}},1e3)),h.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",h.value.tool),E(h.value.tool))}catch(St){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",St),En()}else En();async function En(){const St=localStorage.getItem("lastPlanId");if(St)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",St),await ze(parseInt(St));const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="block")}catch(qt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",qt),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan  charger"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()}window.addEventListener("shape:created",St=>{const{shape:qt,type:Un,properties:dr}=St.detail;console.log("[MapView] Nouvelle forme cre",{shape:qt,type:Un,properties:dr}),o.addElement(qt),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] vnement geonote:savePlan reu - Sauvegarde automatique du plan"),Ce()}),window.addEventListener("geonote:select",St=>{if(console.log("[MapView] vnement geonote:select reu",St.detail),St.detail&&St.detail.geoNote){const qt=St.detail.geoNote;v.value=qt,da(()=>{console.log("[MapView] Note golocalise slectionne:",qt)})}}),window.addEventListener("categoriesReactivated",St=>{console.log("[MapView][categoriesReactivated] vnement reu:",St.detail),Ai()}),window.addEventListener("shapeTypesReactivated",St=>{console.log("[MapView][shapeTypesReactivated] vnement reu:",St.detail),Ai()});const jt=St=>{if(console.log("[MapView] dition de note via Leaflet",St),console.log("[MapView] Type de e:",typeof St,"Contenu de e:",JSON.stringify(St)),!St||!St.note){console.error("[MapView] Erreur: e.note est undefined ou null",St);return}const qt=St.note;console.log("[MapView] Note  diter:",qt),$.value={id:qt.id,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},console.log("[MapView] editingMapNote.value aprs conversion:",$.value),I.value=!0,console.log("[MapView] showNoteEditModal.value:",I.value)},Hn=St=>{if(console.log("[MapView] dition de note via vnement global",St),!St.detail||!St.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",St);return}const qt=St.detail.note;console.log("[MapView] Note  diter (global):",qt);const Un=c.value.find(Lr=>Lr.layer===St.detail.source),dr=Un?Un.id:qt.id;console.log("[MapView] ID de la note pour l'API:",dr,"Source:",St.detail.source?"Couche Leaflet":"Autre"),$.value={id:dr,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},I.value=!0};window.addEventListener("geonote:edit",Hn),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",jt))}catch(dt){console.error("Error during component mount:",dt),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")}}),ki(()=>o.hasUnsavedChanges,lt=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",lt),lt&&B.value&&s.markUnsavedChanges()}),ki(()=>s.plans,lt=>{console.log("[MapView][watch irrigationStore.plans] Mise  jour de la liste des plans:",lt.length),K.value&&(Z.value||console.log("[MapView][watch irrigationStore.plans] Mise  jour de l'interface client"))},{deep:!0}),ki(()=>o.filters,(lt,Be)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres dtect:",JSON.stringify(lt,null,2)),Be){const dt=JSON.stringify(Be.accessLevels)!==JSON.stringify(lt.accessLevels),Ln=JSON.stringify(Be.categories)!==JSON.stringify(lt.categories),Vn=JSON.stringify(Be.shapeTypes)!==JSON.stringify(lt.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements dtects:",{accessLevelsChanged:dt,categoriesChanged:Ln,shapeTypesChanged:Vn}),dt||Ln||Vn?(console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Ai()):console.log("[MapView][watch drawingStore.filters] Aucun changement rel, pas de mise  jour")}else console.log("[MapView][watch drawingStore.filters] Mise  jour de l'affichage suite au changement de filtres"),Ai()},{deep:!0});const he=lt=>{console.log("[MapView][filtersChanged] vnement reu:",lt.detail),Ai()};go(()=>{window.addEventListener("filtersChanged",he)}),Zu(()=>{window.removeEventListener("filtersChanged",he),console.log("[MapView][filtersChanged] vnement dsactiv")}),ki(()=>o.getFilteredElements,(lt,Be)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage, lments filtrs:",{nouveaux:lt.length,anciens:Be?Be.length:"aucun",ids:lt.map(dt=>dt.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise  jour de l'affichage suite au changement d'elements filtrs"),Ai()},{deep:!0}),ki(g,async lt=>{var Be;console.log(`
[MapView][watch map] Nouvelle carte:`,!!lt),lt&&s.currentPlan&&!((Be=D.value)!=null&&Be.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des lments du plan:",s.currentPlan.id),se(),await o.loadPlanElements(s.currentPlan.id))}),ki(()=>s.currentPlan,async(lt,Be)=>{var dt,Ln,Vn;if((lt==null?void 0:lt.id)===(Be==null?void 0:Be.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement ncessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",lt==null?void 0:lt.id);try{if(lt){console.log("[MapView][watch currentPlan] Mise  jour du plan courant..."),B.value=lt;const En=document.querySelector(".map-parent");En instanceof HTMLElement&&(En.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis  jour avec succs")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),B.value=null,se();const En=document.querySelector(".map-parent");En instanceof HTMLElement&&(En.style.display="none")}}catch(En){console.error("[MapView][watch currentPlan] ERREUR:",En),B.value=null,se()}console.log("[MapView][watch currentPlan] tat final:",{currentPlanId:(dt=B.value)==null?void 0:dt.id,storePlanId:(Ln=s.currentPlan)==null?void 0:Ln.id,mapVisible:g.value!==null,mapParentDisplay:(Vn=document.querySelector(".map-parent"))==null?void 0:Vn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),kh(()=>{g.value&&g.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function Q(){i.value=!i.value}function se(){D.value&&(D.value.eachLayer(lt=>{var Be;((Be=lt.properties)==null?void 0:Be.type)==="Note"&&typeof lt.resetPlanSaveState=="function"&&lt.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function ue(lt){return await An.measureAsync("refreshMapWithPlan",async()=>{try{An.measure("refreshMapWithPlan:clearMap",()=>{se()},"MapView"),await An.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(lt)},"MapView");const Be=An.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(lt),"MapView");Be?(An.measure("refreshMapWithPlan:updateCurrentPlan",()=>{B.value=Be,s.setCurrentPlan(Be),o.setCurrentPlan(Be.id),localStorage.setItem("lastPlanId",Be.id.toString())},"MapView"),await An.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes golocalises associes au plan:",lt);const Ln=(await Ca.getNotesByPlan(lt)).data;console.log(`[MapView][refreshMapWithPlan] ${Ln.length} notes golocalises rcupres`);const Vn=bf();g.value&&D.value&&Ln.forEach(En=>{try{if(Vn.addNote({...En,id:En.id,columnId:En.column,accessLevel:En.access_level}),En.location&&En.location.type==="Point"&&Array.isArray(En.location.coordinates)&&En.location.coordinates.length===2){const jt=Ad.fromBackendData({name:En.title,description:En.description,location:En.location,columnId:En.column,accessLevel:En.access_level,style:En.style||{color:En.color||"#3B82F6",weight:2,opacity:1,fillColor:En.color||"#3B82F6",fillOpacity:.6,radius:8},category:En.category||"forages",comments:En.comments||[],photos:En.photos||[]});jt._dbId=En.id,D.value.addLayer(jt),c.value.push({id:En.id,type:"Note",layer:jt,properties:jt.properties}),console.log("[MapView][refreshMapWithPlan] Note golocalise ajoute  la carte:",{id:En.id,title:En.title,location:En.location})}}catch(jt){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note golocalise:",jt)}})}catch(dt){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes golocalises:",dt)}},"MapView"),g.value&&D.value&&await An.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] lments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(jt=>{var Hn;return{id:jt.id,type:jt.type_forme,hasName:jt.data&&"name"in jt.data,name:(Hn=jt.data)==null?void 0:Hn.name}})});const dt=o.getCurrentElements.reduce((jt,Hn)=>(jt[Hn.type_forme]||(jt[Hn.type_forme]=[]),jt[Hn.type_forme].push(Hn),jt),{}),Ln=["Note","Polygon","Line","Circle","Rectangle"],Vn=Object.keys(dt).sort((jt,Hn)=>{const St=Ln.indexOf(jt),qt=Ln.indexOf(Hn);return(St===-1?999:St)-(qt===-1?999:qt)}),En=jt=>{switch(jt){case"Note":return 20;case"Circle":return 15;case"Rectangle":return 15;case"Line":return 10;case"Polygon":return 5;default:return 10}};for(const jt of Vn){const Hn=dt[jt],St=En(jt);for(let qt=0;qt<Hn.length;qt+=St){const Un=Hn.slice(qt,qt+St);await Promise.all(Un.map(async dr=>{await An.measureAsync(`refreshMapWithPlan:createElement:${dr.type_forme}`,async()=>{var pn;if(!D.value||!dr.data)return;let Lr=null;switch(dr.type_forme){case"Circle":{const rn=dr.data;rn.center&&rn.radius&&(Lr=new ip(Vt.latLng(rn.center[1],rn.center[0]),{...rn.style,radius:rn.radius}),rn.name&&(Lr.properties={type:"Circle",name:rn.name,style:rn.style,radius:rn.radius,diameter:rn.radius*2,surface:Math.PI*rn.radius*rn.radius,perimeter:2*Math.PI*rn.radius},Lr.name=rn.name));break}case"Rectangle":{const rn=dr.data;if(rn.bounds){const zr=Vt.latLngBounds(Vt.latLng(rn.bounds.southWest[1],rn.bounds.southWest[0]),Vt.latLng(rn.bounds.northEast[1],rn.bounds.northEast[0]));Lr=new Wa(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Polygon":{const rn=dr.data;if(rn.points&&rn.points.length>0){const zr=rn.points.map(Br=>Vt.latLng(Br[1],Br[0]));Lr=new uh(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Line":{const rn=dr.data;if(rn.points&&rn.points.length>0){const zr=rn.points.map(Br=>Vt.latLng(Br[1],Br[0]));Lr=new ua(zr,rn.style),rn.name&&(Lr.properties={name:rn.name},Lr.name=rn.name)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Cration d'une note:",dr.data);const rn=dr.data;if(rn.location&&Array.isArray(rn.location)&&rn.location.length===2||rn.location&&typeof rn.location=="object"&&rn.location.type==="Point"&&Array.isArray(rn.location.coordinates)&&rn.location.coordinates.length===2)try{rn.category||(rn.category="forages",console.log("[MapView][refreshMapWithPlan] Catgorie par dfaut ajoute:",rn.category)),rn.accessLevel||(rn.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accs par dfaut ajout:",rn.accessLevel));const Br=Ad.fromBackendData(rn);Br._dbId=dr.id,Lr=Br,console.log("[MapView][refreshMapWithPlan] Note cre:",{id:dr.id,location:rn.location,name:rn.name,category:rn.category,accessLevel:rn.accessLevel,type:Br.properties.type})}catch(Br){console.error("[MapView][refreshMapWithPlan] Erreur lors de la cration de la Note:",Br)}else console.error("[MapView][refreshMapWithPlan] Donnes invalides pour Note:",rn),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Lr&&(Lr._dbId=dr.id,(pn=D.value)==null||pn.addLayer(Lr),c.value.push({id:dr.id,type:dr.type_forme,layer:Lr,properties:Lr.properties}))},"MapView")})),await new Promise(dr=>requestAnimationFrame(()=>setTimeout(dr,0)))}}An.measure("refreshMapWithPlan:adjustView",()=>{setTimeout(()=>{z(),g.value&&g.value.invalidateSize({animate:!1,pan:!1})},100)},"MapView")},"MapView"),console.log(`Plan ${lt} charg avec succs avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${lt} introuvable aprs chargement`),K.value=!1}catch(Be){throw console.error("Erreur lors du rafrachissement de la carte:",Be),Be}},"MapView")}async function ze(lt){return await An.measureAsync("loadPlan",async()=>{var Be;console.log(`
[MapView][loadPlan] ====== DBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",lt);try{const dt=await An.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(lt),"MapView");if(console.log("[MapView][loadPlan] Plan trouv dans le store:",!!dt),!dt){console.log("[MapView][loadPlan] Plan non trouv dans le store, vrification API...");try{await An.measureAsync("loadPlan:apiCheck",async()=>{await In.get(`/plans/${lt}/`)},"MapView")}catch(Ln){throw((Be=Ln.response)==null?void 0:Be.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouv - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se()),Ln}}console.log("[MapView][loadPlan] Rafrachissement de la carte..."),await An.measureAsync("loadPlan:refreshMap",async()=>{await ue(lt)},"MapView"),K.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),at(),console.log("[MapView][loadPlan] Plan charg avec succs:",{planId:lt,elementsCount:o.getCurrentElements.length})}catch(dt){throw console.error("Erreur lors du chargement du plan:",dt),An.measure("loadPlan:errorRecovery",()=>{B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId")},"MapView"),dt}},"MapView")}async function Ce(){var lt;if(!B.value||!D.value){console.warn("Aucun plan actif ou groupe de formes  sauvegarder");return}V.value=!0,ne.value="saving";try{const Be=[],dt=new Set(o.getCurrentElements.filter(jt=>jt.id!==void 0).map(jt=>jt.id)),Ln=new Set;console.log("[savePlan] Dbut de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from(dt),currentElements:o.getCurrentElements}),D.value.eachLayer(jt=>{var Un,dr,Lr,pn,rn,zr,Br,zi,Qr,_r,Ar,hi,Rr,an,Ni,vi,Ki,ei,hr,Dn,Sr,ws,mo;console.log("[savePlan] Traitement de la couche",{type:(Un=jt.properties)==null?void 0:Un.type,name:(dr=jt.properties)==null?void 0:dr.name,isPolygon:jt instanceof Vt.Polygon,properties:jt.properties});let Hn,St;const qt={color:jt.options.color||"#2b6451",weight:jt.options.weight||3,opacity:jt.options.opacity||1,fillColor:jt.options.fillColor||"#2b6451",fillOpacity:jt.options.fillOpacity||.2,dashArray:jt.options.dashArray||""};if(jt instanceof Wa){Hn="Rectangle";const cr=jt.getBounds();St={bounds:{southWest:[cr.getSouthWest().lng,cr.getSouthWest().lat],northEast:[cr.getNorthEast().lng,cr.getNorthEast().lat]},style:qt,name:((Lr=jt.properties)==null?void 0:Lr.name)||"",rotation:jt.getRotation(),width:jt.getDimensions().width,height:jt.getDimensions().height,center:[jt.getCenter().lng,jt.getCenter().lat]}}else if(jt instanceof Vt.Circle)Hn="Circle",St={center:[jt.getLatLng().lng,jt.getLatLng().lat],radius:jt.getRadius(),name:((pn=jt.properties)==null?void 0:pn.name)||"",style:qt};else if(jt instanceof Vt.Rectangle){Hn="Rectangle";const cr=jt.getBounds();St={bounds:{southWest:[cr.getSouthWest().lng,cr.getSouthWest().lat],northEast:[cr.getNorthEast().lng,cr.getNorthEast().lat]},name:((rn=jt.properties)==null?void 0:rn.name)||"",style:qt}}else if(jt instanceof Vt.Polyline&&!(jt instanceof Vt.Polygon))if(((zr=jt.properties)==null?void 0:zr.type)==="ElevationLine"){Hn="ElevationLine";const cr=jt.getLatLngs(),Sn=((Br=jt.properties)==null?void 0:Br.category)||"forages",sn=((zi=jt.properties)==null?void 0:zi.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catgorie:",Sn,"Niveau d'accs:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),style:{...qt,color:((Qr=jt.properties.style)==null?void 0:Qr.color)||"#FF4500",weight:((_r=jt.properties.style)==null?void 0:_r.weight)||4,opacity:((Ar=jt.properties.style)==null?void 0:Ar.opacity)||.8,_accessLevel:sn,accessLevel:sn},name:((hi=jt.properties)==null?void 0:hi.name)||"",category:Sn,accessLevel:sn,elevationData:jt.properties.elevationData,samplePointStyle:jt.properties.samplePointStyle,minMaxPointStyle:jt.properties.minMaxPointStyle,minElevation:jt.properties.minElevation,maxElevation:jt.properties.maxElevation,elevationGain:jt.properties.elevationGain,elevationLoss:jt.properties.elevationLoss,averageSlope:jt.properties.averageSlope,maxSlope:jt.properties.maxSlope}}else{Hn="Line";const cr=jt.getLatLngs(),Sn=((Rr=jt.properties)==null?void 0:Rr.category)||"forages",sn=((an=jt.properties)==null?void 0:an.accessLevel)||"visitor";console.log("[savePlan] Line - Catgorie:",Sn,"Niveau d'accs:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),name:((Ni=jt.properties)==null?void 0:Ni.name)||"",category:Sn,accessLevel:sn,style:{...qt,_accessLevel:sn,accessLevel:sn}}}else if(jt instanceof Vt.Polygon&&!(jt instanceof Vt.Rectangle)){Hn="Polygon";const cr=jt.getLatLngs()[0],Sn=((vi=jt.properties)==null?void 0:vi.category)||"forages",sn=((Ki=jt.properties)==null?void 0:Ki.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catgorie:",Sn,"Niveau d'accs:",sn),St={points:cr.map(yi=>[yi.lng,yi.lat]),name:((ei=jt.properties)==null?void 0:ei.name)||"",category:Sn,accessLevel:sn,style:{...qt,_accessLevel:sn,accessLevel:sn}}}else if(((hr=jt.properties)==null?void 0:hr.type)==="Note"){console.log("[savePlan] Note golocalise dtecte - sauvegarde via API ddie");const cr=jt;if(cr._dbId&&typeof cr._dbId=="number"&&Ln.add(cr._dbId),typeof cr.saveNote=="function")try{if(cr.properties&&(cr.properties.style||(cr.properties.style={}),cr.properties.accessLevel&&(cr.properties.style._accessLevel=cr.properties.accessLevel,cr.properties.style.accessLevel=cr.properties.accessLevel),cr.properties.style.color)){const Sn=cr.properties.style.color;console.log("[savePlan] Prservation de la couleur existante:",Sn),cr.properties.style.color=Sn,cr.properties.style.fillColor=Sn}console.log("[savePlan] Sauvegarde de la note golocalise via API ddie",{category:(Dn=cr.properties)==null?void 0:Dn.category,accessLevel:(Sr=cr.properties)==null?void 0:Sr.accessLevel,styleAccessLevel:(mo=(ws=cr.properties)==null?void 0:ws.style)==null?void 0:mo.accessLevel}),B.value&&B.value.id?cr.saveNote(B.value.id):cr.saveNote()}catch(Sn){console.error("[savePlan] Erreur lors de la sauvegarde de la note:",Sn)}else console.warn("[savePlan] La note ne possde pas de mthode saveNote");Hn=void 0,St=void 0}if(Hn&&St){let cr=jt._elementId;jt._dbId&&(cr=jt._dbId,typeof cr=="number"&&Ln.add(cr)),Be.push({id:cr,type_forme:Hn,data:St})}}),console.log("[savePlan] lments  sauvegarder",{totalElements:Be.length,elements:Be.map(jt=>({type:jt.type_forme,hasPoints:"points"in jt.data,hasStyle:"style"in jt.data}))});const Vn=Array.from(dt).filter(jt=>!Ln.has(jt));console.log("[savePlan] lments supprims:",{existingIds:Array.from(dt),currentLayerIds:Array.from(Ln),elementsToDelete:Vn}),o.elements=Be.filter(jt=>!jt.id||!Vn.includes(jt.id));const En=await o.saveToPlan(B.value.id,{elementsToDelete:Vn});if(En&&((lt=B.value)!=null&&lt.id)){const jt=B.value.id;B.value={...B.value,...En},s.updatePlanDetails(jt,En)}ne.value="success",D.value&&D.value.eachLayer(jt=>{var Hn;((Hn=jt.properties)==null?void 0:Hn.type)==="Note"&&typeof jt.resetPlanSaveState=="function"&&jt.resetPlanSaveState()}),setTimeout(()=>{ne.value=null},3e3)}catch(Be){console.error("Erreur lors de la sauvegarde du plan:",Be),ne.value=null}finally{V.value=!1}}Zu(()=>{X.user||Ge(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function ye(lt){var Be,dt,Ln;if(console.log("[MapView][updateShapeProperties] Mise  jour des proprits:",lt),A(lt),v.value&&((Be=v.value.properties)==null?void 0:Be.type)==="Note")if(console.log("[MapView][updateShapeProperties] Note golocalise dtecte, sauvegarde via API ddie"),typeof v.value.saveNote=="function")try{if(lt.category&&(v.value.properties.category=lt.category),lt.accessLevel&&(v.value.properties.accessLevel=lt.accessLevel,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style._accessLevel=lt.accessLevel,v.value.properties.style.accessLevel=lt.accessLevel),v.value.properties.style&&v.value.properties.style.color){const Vn=v.value.properties.style.color;console.log("[MapView][updateShapeProperties] Prservation de la couleur existante:",Vn),v.value.properties.style.color=Vn,v.value.properties.style.fillColor=Vn}console.log("[MapView][updateShapeProperties] Sauvegarde de la note golocalise via API ddie",{category:(dt=v.value.properties)==null?void 0:dt.category,accessLevel:(Ln=v.value.properties)==null?void 0:Ln.accessLevel,updatedProperties:lt}),B.value&&B.value.id?v.value.saveNote(B.value.id):v.value.saveNote(),v.value.bindPopup&&v.value.createPopupContent&&(console.log("[MapView][updateShapeProperties] Forage de la mise  jour du popup aprs la sauvegarde"),v.value.bindPopup(v.value.createPopupContent()))}catch(Vn){console.error("[MapView][updateShapeProperties] Erreur lors de la sauvegarde de la note:",Vn)}else console.warn("[MapView][updateShapeProperties] La note ne possde pas de mthode saveNote");else if(lt.category&&v.value&&v.value._dbId){const Vn=v.value._dbId,En=o.elements.find(jt=>jt.id===Vn);if(En){console.log(`[MapView][updateShapeProperties] Mise  jour de la catgorie dans le store: ${lt.category} pour l'lment ${Vn}`);const jt=En;jt.data||(jt.data={}),jt.data.category=lt.category,o.$patch({unsavedChanges:!0})}}}function Ve(lt){try{const Be=new Date(lt);return isNaN(Be.getTime())?(console.error("Date invalide reue:",lt),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(Be)}catch(Be){return console.error("Erreur lors du formatage de la date:",Be),"Date invalide"}}const Ye=()=>{D.value&&z()},Ke=async()=>{var lt;if(v.value&&D.value){const Be=v.value._leaflet_id,dt=v.value._dbId;if(((lt=v.value.properties)==null?void 0:lt.type)==="Note"&&dt)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${dt} du backend...`),await Ca.deleteNote(dt),a.removeNote(dt),console.log(`[MapView][deleteSelectedShape] Note ${dt} supprime avec succs du backend et du store`),l.success("Note supprime avec succs")}catch(Vn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${dt} du backend:`,Vn),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),c.value=c.value.filter(Vn=>Vn.layer&&Vn.layer._leaflet_id!==Be),console.log(`[MapView][deleteSelectedShape] Forme ${Be} (dbId: ${dt}) supprime du featureGroup et de shapes.value`),v.value=null}};async function _t(lt){console.log(`onPlanCreated - Tentative de chargement du plan ${lt}`),await s.fetchPlans();const Be=s.getPlanById(lt);Be?(console.log(`Plan ${lt} trouv, chargement en cours...`),localStorage.setItem("lastPlanId",lt.toString()),B.value=Be,s.setCurrentPlan(Be),o.setCurrentPlan(Be.id),j.value=!1,at(),console.log(`Plan ${lt} charg avec succs`)):console.error(`Plan ${lt} introuvable aprs cration! Vrifiez les permissions.`)}ki(ie,async lt=>{var Be;if(lt&&((Be=X.user)==null?void 0:Be.user_type)==="admin"){fe.value=!0;try{const dt=await X.fetchSalarieVisiteurs(lt.id);ve.value=Array.isArray(dt)?dt:[dt]}catch(dt){console.error("[MapView][watch selectedSalarie] Error:",dt),ve.value=[]}finally{fe.value=!1}}});function Ge(){localStorage.removeItem("lastPlanId")}function ft(lt,Be="m"){return Be==="m"?`${(lt/1e4).toFixed(2)} ha`:Be==="m"?lt>=1e3?`${(lt/1e3).toFixed(2)} km`:`${lt.toFixed(2)} m`:`${lt.toFixed(2)} ${Be}`}const Ut=Ct(!1);function tn(lt){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimtrique"}[lt]||lt}async function yn(){var Be,dt,Ln,Vn,En,jt,Hn,St,qt,Un;if(!B.value||!g.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const lt=B.value;try{console.log("[generateSynthesis] Dbut de la gnration"),console.log("[generateSynthesis] Plan courant complet:",lt),await Ce();let _r=lt;if(!lt.salarie_details&&!lt.entreprise_details&&!lt.client_details){console.log("[generateSynthesis] Dtails manquants, tentative de rcupration...");try{const Sr=await In.get(`/plans/${lt.id}/`);Sr.status===200&&(console.log("[generateSynthesis] Plan mis  jour:",Sr.data),B.value={...lt,...Sr.data},_r=Sr.data,s.updatePlanDetails(lt.id,Sr.data))}catch(Sr){console.error("[generateSynthesis] Erreur lors de la rcupration des dtails:",Sr)}}await new Promise(Sr=>setTimeout(Sr,1e3)),Ut.value=!0;const Ar=_r.salarie_details,hi=_r.client_details,Rr=(Ar==null?void 0:Ar.entreprise_details)||_r.entreprise_details;console.log("[generateSynthesis] Dtails du plan utilis:",_r),console.log("[generateSynthesis] Dtails des utilisateurs:",{salarie:Ar?{id:Ar.id,nom:`${Ar.first_name} ${Ar.last_name}`,company:Ar.company_name,logo:Ar.logo}:null,entreprise:Rr?{id:Rr.id,nom:`${Rr.first_name} ${Rr.last_name}`,company:Rr.company_name,logo:Rr.logo}:null,client:hi?{id:hi.id,nom:`${hi.first_name} ${hi.last_name}`,company:hi.company_name}:null}),v.value&&(Y(),v.value=null);const an=new Nr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const Ni=new Image;Ni.src=X4,await new Promise(Sr=>{Ni.onload=()=>{console.log("[generateSynthesis] Logo application charg"),Sr()},Ni.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo application:",ws),Sr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Rr==null?void 0:Rr.logo);let vi=null;Rr!=null&&Rr.logo&&(vi=new Image,vi.src=Rr.logo,await new Promise(Sr=>{vi?(vi.onload=()=>{console.log("[generateSynthesis] Logo entreprise charg avec succs"),Sr()},vi.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",ws),Sr()}):Sr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",Ar==null?void 0:Ar.logo);let Ki=null;Ar!=null&&Ar.logo&&(Ki=new Image,Ki.src=Ar.logo,await new Promise(Sr=>{Ki?(Ki.onload=()=>{console.log("[generateSynthesis] Logo salarie charg avec succs"),Sr()},Ki.onerror=ws=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",ws),Sr()}):Sr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:vi!==null,logoSalarie:Ki!==null}),vi!==null&&an.addImage(vi,"JPEG",148.5-40-30,20,40,40),an.addImage(Ni,"JPEG",148.5-40/2,20,40,40),Ki!==null&&an.addImage(Ki,"JPEG",148.5+30,20,40,40),an.setFontSize(24),an.setTextColor(0),an.text(lt.nom||"Sans titre",297/2,100,{align:"center"});let ei=120;if(Rr&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Entreprise:",20,ei),an.setFont("helvetica","normal"),an.text(`${Rr.first_name} ${Rr.last_name}${Rr.company_name?` (${Rr.company_name})`:""}`,20,ei+6),ei+=15),Ar&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Salarie:",20,ei),an.setFont("helvetica","normal"),an.text(`${Ar.first_name} ${Ar.last_name}${Ar.company_name?` (${Ar.company_name})`:""}`,20,ei+6),ei+=15),hi&&(an.setFontSize(14),an.setFont("helvetica","bold"),an.text("Client:",20,ei),an.setFont("helvetica","normal"),an.text(`${hi.first_name} ${hi.last_name}${hi.company_name?` (${hi.company_name})`:""}`,20,ei+6),ei+=15),lt.description){an.setFont("helvetica","bold"),an.text("Description:",20,ei),an.setFont("helvetica","normal");const Sr=an.splitTextToSize(lt.description,150);an.text(Sr,20,ei+6),ei+=8*Sr.length+10}ei=Math.min(ei,180),an.setFontSize(10),an.setTextColor(100),an.text(`Date de cration: ${Ve(lt.date_creation)}`,20,190),an.text(`Dernire modification: ${Ve(lt.date_modification)}`,277,190,{align:"right"});const hr=[];D.value.eachLayer(Sr=>hr.push(Sr));const Dn=Vt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(g.value);await new Promise(Sr=>setTimeout(Sr,3e3));for(let Sr=0;Sr<hr.length;Sr++){an.addPage(),an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.rect(0,0,297,25,"F"),an.setFontSize(10),an.setTextColor(50,50,50),an.setFont("helvetica","bold"),an.text(lt.nom||"Sans titre",20,12);let cr=297-20-(15*(1+(vi!==null?1:0)+(Ki!==null?1:0))+5*(1+(vi!==null?1:0)));vi!==null&&(an.addImage(vi,"JPEG",cr,5,15,15),cr+=20),an.addImage(Ni,"JPEG",cr,5,15,15),cr+=20,Ki!==null&&an.addImage(Ki,"JPEG",cr,5,15,15),an.setDrawColor(200,200,200),an.setLineWidth(.5),an.line(0,25,297,25);const Sn=hr[Sr],sn=Sn.properties;if(sn){an.setTextColor(0),an.setFontSize(14),an.setFont("helvetica","bold");const yi=sn.name||tn(sn.type);let ti="";if(sn.type!=="TextRectangle"){const Zs=te(hr,Sn);ti=Zs>0?` (surface totale d'irrigation : ${ft(Zs,"m")})`:""}const bi=`${yi}${ti}`;an.text(bi,20,35)}if(sn&&sn.type==="ElevationLine")try{const yi=((Be=Sn.getBounds)==null?void 0:Be.call(Sn))||((dt=Sn.getLatLng)==null?void 0:dt.call(Sn));yi&&g.value.fitBounds(yi instanceof Vt.LatLng?Vt.latLngBounds([yi]):yi,{padding:[50,50]});try{const Mn=((Ln=Sn.getBounds)==null?void 0:Ln.call(Sn))||((Vn=Sn.getLatLng)==null?void 0:Vn.call(Sn));if(!Mn||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const vn=Mn instanceof Vt.LatLng?Vt.latLngBounds([Mn]):Mn;vn&&vn.isValid&&vn.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(vn,{padding:[50,50],animate:!1})}}catch(Mn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Mn)}await new Promise(Mn=>setTimeout(Mn,2e3)),g.value.invalidateSize();try{g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())?g.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Mn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Mn)}await new Promise(Mn=>setTimeout(Mn,500));const ti=await Dn.takeScreen("image"),bi=await new Promise((Mn,vn)=>{const Yr=new Image;Yr.onload=()=>Mn(Yr),Yr.onerror=xs=>vn(xs),Yr.src=ti}),Zs=40,vo=237/2,js=Math.min(70,bi.height*vo/bi.width);if(an.addImage(bi,"PNG",20,Zs,vo,js),sn.elevationData&&sn.elevationData.length>0){const Mn=document.createElement("canvas");Mn.width=800,Mn.height=400;const vn=Mn.getContext("2d");if(vn){const Yr=sn.elevationData,xs=sn.minElevation,Js=sn.maxElevation,ds=(Js-xs)*.05,Ma=xs-ds,bl=Js+ds,$n=40,Cr=Mn.width-2*$n,is=Mn.height-2*$n,Tr=Kn=>$n+Kn/Yr[Yr.length-1].distance*Cr,Zo=Kn=>$n+is-(Kn-Ma)/(bl-Ma)*is;vn.fillStyle="#f8fafc",vn.fillRect(0,0,Mn.width,Mn.height),vn.fillStyle="#334155",vn.font="bold 20px Arial",vn.textAlign="center",vn.fillText("Profil altimtrique",Mn.width/2,25),vn.strokeStyle="#e2e8f0",vn.lineWidth=1,vn.beginPath(),vn.moveTo($n,$n),vn.lineTo($n,is+$n),vn.lineTo(Cr+$n,is+$n),vn.strokeStyle="#94a3b8",vn.stroke();const ka=5;for(let Kn=0;Kn<=ka;Kn++){const Qs=Ma+Kn/ka*(bl-Ma),yo=Zo(Qs);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo($n,yo),vn.lineTo(Cr+$n,yo),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo($n-5,yo),vn.lineTo($n,yo),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="right",vn.fillText(`${Math.round(Qs)}m`,$n-8,yo+4)}const Aa=5,Xo=Yr[Yr.length-1].distance;for(let Kn=0;Kn<=Aa;Kn++){const Qs=Kn/Aa*Xo,yo=Tr(Qs);vn.beginPath(),vn.strokeStyle="#e2e8f0",vn.moveTo(yo,$n),vn.lineTo(yo,is+$n),vn.stroke(),vn.beginPath(),vn.strokeStyle="#94a3b8",vn.moveTo(yo,is+$n),vn.lineTo(yo,is+$n+5),vn.stroke(),vn.fillStyle="#64748b",vn.font="12px Arial",vn.textAlign="center",vn.fillText(`${Math.round(Qs)}m`,yo,is+$n+16)}const sa=vn.createLinearGradient(0,$n,0,is+$n);sa.addColorStop(0,"rgba(255, 69, 0, 0.8)"),sa.addColorStop(1,"rgba(255, 69, 0, 0.2)"),vn.beginPath(),vn.moveTo(Tr(Yr[0].distance),Zo(Yr[0].elevation)),Yr.forEach((Kn,Qs)=>{Qs>0&&vn.lineTo(Tr(Kn.distance),Zo(Kn.elevation))}),vn.strokeStyle="#FF4500",vn.lineWidth=2,vn.stroke(),vn.lineTo(Tr(Yr[Yr.length-1].distance),Zo(Ma)),vn.lineTo(Tr(Yr[0].distance),Zo(Ma)),vn.closePath(),vn.fillStyle=sa,vn.fill(),Yr.forEach(Kn=>{vn.beginPath(),vn.arc(Tr(Kn.distance),Zo(Kn.elevation),3,0,Math.PI*2),vn.fillStyle="#FF4500",vn.fill(),vn.strokeStyle="white",vn.lineWidth=1,vn.stroke()});let _l=0,Ta=0;for(let Kn=0;Kn<Yr.length;Kn++)Yr[Kn].elevation===xs&&(_l=Kn),Yr[Kn].elevation===Js&&(Ta=Kn);vn.beginPath(),vn.arc(Tr(Yr[Ta].distance),Zo(Yr[Ta].elevation),6,0,Math.PI*2),vn.fillStyle="#059669",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.beginPath(),vn.arc(Tr(Yr[_l].distance),Zo(Yr[_l].elevation),6,0,Math.PI*2),vn.fillStyle="#DC2626",vn.fill(),vn.strokeStyle="white",vn.lineWidth=2,vn.stroke(),vn.font="12px Arial",vn.fillStyle="#059669",vn.textAlign="left",vn.fillText(`Point haut: ${ft(Js,"m")}`,$n,is+$n+35),vn.fillStyle="#DC2626",vn.fillText(`Point bas: ${ft(xs,"m")}`,$n+200,is+$n+35);const Pr=Mn.toDataURL("image/png");an.addImage(Pr,"PNG",20+vo+20,Zs,vo,js)}}const yr=Zs+js+15;an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.roundedRect(20,yr,257,50,3,3,"FD"),an.setFont("helvetica","bold"),an.setFontSize(12),an.setTextColor(51,65,85),an.text("Caractristiques",30,yr+10);const Xs=[{label:"Distance totale",value:ft(sn.length||0)},{label:"Dnivel positif",value:ft(sn.elevationGain||0,"m")},{label:"Dnivel ngatif",value:ft(sn.elevationLoss||0,"m")}],Vi=[{label:"Pente moyenne",value:`${(sn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(sn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${ft(sn.minElevation||0,"m")} / ${ft(sn.maxElevation||0,"m")}`}];let Gi=yr+20;an.setFont("helvetica","normal"),an.setFontSize(10),Xs.forEach(Mn=>{an.setTextColor(100,116,139),an.text(Mn.label,30,Gi),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(Mn.value,110,Gi),an.setFont("helvetica","normal"),Gi+=9}),Gi=yr+20;const fi=297/2;Vi.forEach(Mn=>{an.setTextColor(100,116,139),an.text(Mn.label,fi,Gi),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(Mn.value,fi+80,Gi),an.setFont("helvetica","normal"),Gi+=9})}catch(yi){console.error("[generateSynthesis] Erreur traitement profil altimtrique:",yi)}else{const yi=((En=Sn.getBounds)==null?void 0:En.call(Sn))||((jt=Sn.getLatLng)==null?void 0:jt.call(Sn));yi&&g.value.fitBounds(yi instanceof Vt.LatLng?Vt.latLngBounds([yi]):yi,{padding:[50,50]});try{const ti=((Hn=Sn.getBounds)==null?void 0:Hn.call(Sn))||((St=Sn.getLatLng)==null?void 0:St.call(Sn));if(!ti||!g.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const bi=ti instanceof Vt.LatLng?Vt.latLngBounds([ti]):ti;bi&&bi.isValid&&bi.isValid()&&g.value.getContainer()&&document.body.contains(g.value.getContainer())&&g.value.fitBounds(bi,{padding:[50,50],animate:!1})}}catch(ti){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",ti)}await new Promise(ti=>setTimeout(ti,2e3)),g.value.invalidateSize(),await new Promise(ti=>setTimeout(ti,500));try{const ti=await Dn.takeScreen("image"),bi=await new Promise((yr,Xs)=>{const Vi=new Image;Vi.onload=()=>yr(Vi),Vi.onerror=Gi=>Xs(Gi),Vi.src=ti}),Zs=45,vo=297*.6-30;let js=bi.height*vo/bi.width;if(js>210*.9&&(js=210*.9),an.addImage(bi,"PNG",20,Zs,vo,js),sn){let yr=function(vn,Yr,xs,Js,qa){an.setTextColor(100,116,139),an.setFont("helvetica","normal"),an.text(vn,xs+10,Js),an.setTextColor(15,23,42),an.setFont("helvetica","bold"),an.text(Yr,xs+qa-10,Js,{align:"right"})},Vi=0;if(sn.type==="Circle")Vi=4;else if(sn.type==="Rectangle")Vi=4;else if(sn.type==="Line")Vi=1,(qt=sn.dimensions)!=null&&qt.width&&Vi++,sn.surfaceInfluence&&Vi++;else if(sn.type==="Semicircle")Vi=6;else if(sn.type==="Polygon")Vi=2;else if(sn.type==="CircleWithSections"&&(Vi=3,sn.sections&&sn.sections.length>0)){const vn=Math.ceil(sn.sections.length/3);Vi+=vn*3}const Gi=Math.max(15+Vi*12+30,60),fi=297-188.2-20;an.setFillColor(248,250,252),an.setDrawColor(226,232,240),an.roundedRect(188.2,Zs,fi,Gi,3,3,"FD"),an.setFont("helvetica","bold"),an.setFontSize(12),an.setTextColor(51,65,85),an.text("Caractristiques",188.2+10,Zs+15);let Mn=Zs+30;an.setFontSize(10),sn.type==="Circle"?(yr("Rayon",ft(sn.radius),188.2,Mn,fi),Mn+=12,yr("Diamtre",ft(sn.radius*2),188.2,Mn,fi),Mn+=12,yr("Surface",ft(sn.surface,"m"),188.2,Mn,fi),Mn+=12,yr("Primtre",ft(sn.perimeter),188.2,Mn,fi)):sn.type==="Rectangle"?(yr("Largeur",ft(sn.width),188.2,Mn,fi),Mn+=12,yr("Hauteur",ft(sn.height),188.2,Mn,fi),Mn+=12,yr("Surface",ft(sn.surface,"m"),188.2,Mn,fi),Mn+=12,yr("Primtre",ft(sn.perimeter),188.2,Mn,fi)):sn.type==="Line"?(yr("Longueur",ft(sn.length),188.2,Mn,fi),Mn+=12,(Un=sn.dimensions)!=null&&Un.width&&(yr("Largeur d'influence",ft(sn.dimensions.width),188.2,Mn,fi),Mn+=12),sn.surfaceInfluence&&yr("Surface d'influence",ft(sn.surfaceInfluence,"m"),188.2,Mn,fi)):sn.type==="Semicircle"?(yr("Rayon",ft(sn.radius),188.2,Mn,fi),Mn+=12,yr("Diamtre",ft(sn.radius*2),188.2,Mn,fi),Mn+=12,yr("Surface",ft(sn.surface,"m"),188.2,Mn,fi),Mn+=12,yr("Primtre",ft(sn.perimeter),188.2,Mn,fi),Mn+=12,yr("Longueur d'arc",ft(sn.arcLength),188.2,Mn,fi),Mn+=12,yr("Angle d'ouverture",`${sn.openingAngle.toFixed(1)}`,188.2,Mn,fi)):sn.type==="Polygon"?(yr("Surface",ft(sn.surface,"m"),188.2,Mn,fi),Mn+=12,yr("Primtre",ft(sn.perimeter),188.2,Mn,fi)):sn.type==="CircleWithSections"&&(yr("Rayon",ft(sn.radius),188.2,Mn,fi),Mn+=12,yr("Surface totale",ft(sn.surface,"m"),188.2,Mn,fi),Mn+=12,yr("Primtre",ft(sn.perimeter),188.2,Mn,fi),Mn+=20,sn.sections&&sn.sections.length>0&&(Mn=No(sn.sections,an,188.2,Mn,fi)))}}catch(ti){console.error(`[generateSynthesis] Erreur capture forme ${Sr+1}:`,ti)}}}g.value.removeControl(Dn),an.save(`synthese_${lt.nom}.pdf`)}catch(dr){console.error("[generateSynthesis] Erreur:",dr),alert("Une erreur est survenue lors de la gnration de la synthse. Veuillez ressayer.")}finally{Ut.value=!1}}const Qe=OE.debounce(()=>{const lt=An.startMeasure("invalidateMapSize","MapView");if(!g.value){lt();return}da(()=>{An.measure("invalidateMapSize:nextTick",()=>{var Be;try{if(g.value&&g.value.getContainer()&&document.body.contains(g.value.getContainer())){if(g.value.invalidateSize({animate:!1}),(Be=D.value)!=null&&Be.getLayers().length)try{z()}catch(dt){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",dt)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch(dt){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",dt)}lt()},"MapView")})},250);function at(){Qe()}ki(B,(lt,Be)=>{lt&&lt.id!==(Be==null?void 0:Be.id)&&da(()=>{at()})});const it=Ct(null),$t=Ct(!1),Zt=Ct([]),On=Jn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:it.value,salaries:we.value,salariesLength:we.value.length}),!it.value)return[];const lt=we.value.filter(Be=>{var Vn,En,jt;const dt=Be.entreprise,Ln=typeof dt=="object"&&dt!==null?dt.id:dt;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:Be,salarieEntreprise:dt,salarieEntrepriseId:Ln,selectedEntrepriseId:(Vn=it.value)==null?void 0:Vn.id,matches:Ln===((En=it.value)==null?void 0:En.id)}),Ln===((jt=it.value)==null?void 0:jt.id)});return console.log("[MapView][filteredSalaries] Filtered result:",lt),lt});function mn(lt){if(!lt)return"";const Be=lt.first_name||"",dt=lt.last_name?lt.last_name.toUpperCase():"",Ln=lt.company_name||lt.role||"";return`${Be} ${dt} (${Ln})`}async function Tn(){$t.value=!0;try{const lt=await In.get("/users/",{params:{role:"ENTREPRISE"}});Zt.value=lt.data}catch(lt){console.error("[MapView] Error loading entreprises:",lt),Zt.value=[]}finally{$t.value=!1}}async function Qn(lt){console.log("[MapView][selectEntreprise] Slection de l'entreprise:",lt),it.value=lt,me.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requte avec params:",{role:"SALARIE",entreprise:lt.id});const Be=await In.get("/users/",{params:{role:"SALARIE",entreprise:lt.id}});console.log("[MapView][selectEntreprise] Rponse reue:",Be.data),we.value=Be.data,console.log("[MapView][selectEntreprise] Salaries mis  jour:",we.value)}catch(Be){console.error("[MapView] Error loading salaries for entreprise:",Be),we.value=[]}finally{me.value=!1}}function Qt(){it.value=null,ie.value=null,Z.value=null,we.value=[],ve.value=[],Ze.value=[]}function xn(){ie.value=null,Z.value=null,ve.value=[],Ze.value=[]}function Cn(){Z.value=null,Ze.value=[]}async function er(lt){var Be,dt,Ln,Vn,En,jt;console.log(`
[MapView][selectSalarie] ====== DBUT SLECTION SALARIE ======`),console.log("Informations du salarie:",{id:lt.id,username:lt.username,company:lt.company_name,role:lt.role}),console.log("Contexte utilisateur:",{userType:(Be=X.user)==null?void 0:Be.user_type,userId:(dt=X.user)==null?void 0:dt.id,userRole:(Ln=X.user)==null?void 0:Ln.role,selectedEntrepriseId:(Vn=it.value)==null?void 0:Vn.id}),ie.value=lt,fe.value=!0;try{const Hn={role:"VISITEUR",salarie:lt.id};X.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connecte:",(En=X.user)==null?void 0:En.id),Hn.entreprise=(jt=X.user)==null?void 0:jt.id):it.value&&(console.log("Ajout de l'ID de l'entreprise slectionne:",it.value.id),Hn.entreprise=it.value.id),console.log("Paramtres de la requte:",Hn);const St=await In.get("/users/",{params:Hn});console.log("Rponse reue du serveur:",{status:St.status,dataLength:Array.isArray(St.data)?St.data.length:"non-array",data:St.data}),Array.isArray(St.data)?(ve.value=St.data,console.log(`${St.data.length} visiteurs chargs`),St.data.forEach((qt,Un)=>{console.log(`Visiteur ${Un+1}:`,{id:qt.id,username:qt.username,company:qt.company_name,salarie:qt.salarie})})):(console.warn("Format de rponse inattendu:",St.data),ve.value=[]),ve.value.length===0&&console.warn("Aucun visiteur trouv pour ce salarie")}catch(Hn){if(console.error("ERREUR lors du chargement des visiteurs:",Hn),Hn&&typeof Hn=="object"&&"response"in Hn){const St=Hn;console.error("Dtails de l'erreur:",{status:St.response.status,data:St.response.data})}ve.value=[]}finally{fe.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SLECTION SALARIE ======
`)}}function vr(){I.value=!1,$.value=null}function xr(lt){U.value=lt,R.value=!0}async function ur(){var lt,Be,dt;if((lt=U.value)!=null&&lt.id)try{const Ln=U.value.id,Vn={selectedClient:Z.value,selectedSalarie:ie.value,isNoVisiteurView:Z.value&&Z.value.id===-1};if(await s.deletePlan(Ln),R.value=!1,U.value=null,await new Promise(En=>setTimeout(En,50)),Vn.isNoVisiteurView)console.log("[MapView][confirmDeletePlan] Rechargement des plans sans visiteur"),await tr();else if(Vn.selectedClient){console.log("[MapView][confirmDeletePlan] Rechargement des plans du client:",Vn.selectedClient.id);const En={visiteur:Vn.selectedClient.id};Vn.selectedSalarie&&(En.salarie=Vn.selectedSalarie.id),X.isEntreprise?En.entreprise=(Be=X.user)==null?void 0:Be.id:it.value&&(En.entreprise=it.value.id);const jt=await In.get("/plans/",{params:En});Ze.value=jt.data}else console.log("[MapView][confirmDeletePlan] Rechargement de tous les plans"),await s.fetchPlans();((dt=B.value)==null?void 0:dt.id)===Ln&&(B.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),se(),localStorage.removeItem("lastPlanId"))}catch(Ln){console.error("Erreur lors de la suppression du plan:",Ln),alert("Une erreur est survenue lors de la suppression du plan"),R.value=!1,U.value=null}}function qr(){R.value=!1,U.value=null}function Fs(lt){console.log("[MapView][handleFilterChange] Nouveaux filtres reus:",JSON.stringify(lt,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise  jour des filtres dans le store"),o.updateFilters(lt),console.log("[MapView][handleFilterChange] lments dans le store:",{count:o.elements.length,ids:o.elements.map(Be=>Be.id)}),console.log("[MapView][handleFilterChange] Mise  jour de l'affichage de la carte"),Ai(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise  jour force de l'affichage"),Ai()},100),console.log("[MapView][handleFilterChange] Traitement des filtres termin")}function Ai(){if(!D.value)return;const lt=[];c.value.forEach((pn,rn)=>{pn.layer&&!pn.id&&(!pn.layer.properties||pn.layer.properties&&!pn.layer.properties.type)&&(console.log(`[MapView][updateMapDisplay] Nettoyage prventif de la couche temporaire ${pn.layer._leaflet_id}`),lt.push(rn))});for(let pn=lt.length-1;pn>=0;pn--)c.value.splice(lt[pn],1);const Be={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise  jour de l'affichage avec filtres:",JSON.stringify(Be,null,2));const dt={count:o.elements.length,elements:o.elements.map(pn=>({id:pn.id,type_forme:pn.type_forme}))};console.log("[MapView][updateMapDisplay] lments dans le store:",JSON.stringify(dt,null,2));const Ln=o.getFilteredElements;console.log("[MapView][updateMapDisplay] lments filtrs:",{total:o.elements.length,filtered:Ln.length,filteredIds:Ln.map(pn=>pn.id)});const Vn=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Vn.length);const En=Vn.map(pn=>({_leaflet_id:pn._leaflet_id,_dbId:pn._dbId,hasProperties:!!pn.properties,propertyType:pn.properties?pn.properties.type:null,category:pn.properties?pn.properties.category:null}));console.log("[MapView][updateMapDisplay] Dtails des couches:",JSON.stringify(En,null,2)),console.log("[MapView][updateMapDisplay] tat des filtres pour les catgories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const jt=new Map;c.value.forEach(pn=>{pn.layer&&pn.id&&jt.set(pn.id,pn.layer)});const Hn=new Map;Vn.forEach(pn=>{pn._dbId&&Hn.set(pn,pn._dbId)});const St=new Set(Ln.map(pn=>pn.id));console.log("[MapView][updateMapDisplay] Dbut du traitement des couches");const qt=Array.from(St);console.log("[MapView][updateMapDisplay] IDs des lments filtrs:",JSON.stringify(qt));let Un=0,dr=0,Lr=0;Vn.forEach(pn=>{var Ki,ei;const rn=pn._dbId,zr=pn._leaflet_id;if(!rn){if(!pn.properties){Lr++,console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId et sans proprits, ignore`);return}pn._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${zr} sans dbId, ID temporaire assign: ${pn._dbId}`)}const Br=pn.properties||{},zi=Br.type||pn.type_forme||"";let Qr=Br.category;if(pn._dbId){const hr=o.elements.find(Dn=>Dn.id===pn._dbId);if(hr){const Dn=hr.data;Dn&&Dn.category&&(Qr!==Dn.category&&(console.log(`[MapView][updateMapDisplay] Catgorie diffrente dtecte - Proprits: ${Qr}, Store: ${Dn.category} pour la couche ${pn._dbId}`),Qr=Dn.category),pn.properties||(pn.properties={}),pn.properties.category=Qr)}}Qr||(Qr="default");const _r=Br.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${zr} (dbId: ${pn._dbId}): type=${zi}, category=${Qr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let Ar=!1;zi?Ar=zi in o.filters.shapeTypes&&o.filters.shapeTypes[zi]===!0:Ar=o.filters.shapeTypes.Polygon===!0;let hi=!1;Qr?Qr in o.filters.categories?(hi=o.filters.categories[Qr]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${Qr}: ${hi}`)):(hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${Qr} non trouve dans les filtres, utilisation de 'forages': ${hi}`)):(hi=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie non spcifie, utilisation de 'forages': ${hi}`));let Rr=!1;const an={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let Ni="visitor";an.company?Ni="company":an.employee?Ni="employee":an.visitor&&(Ni="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur: ${Ni}`),Ni==="company"?Rr=!0:Ni==="employee"?Rr=_r==="employee"||_r==="visitor":Ni==="visitor"&&(Rr=_r==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche: ${_r}, visible: ${Rr}`);const vi=Ar&&hi&&Rr;console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${zr}: typeVisible=${Ar}, categoryVisible=${hi}, accessLevelVisible=${Rr}, isVisible=${vi}`),console.log(`[MapView][updateMapDisplay] Dtails de la couche ${zr}: type=${zi}, category=${Qr}, accessLevel=${_r}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),vi?D.value.hasLayer(pn)?(Un++,console.log(`[MapView][updateMapDisplay] Couche ${pn._dbId} (${zi}) dj visible avec catgorie ${((ei=pn.properties)==null?void 0:ei.category)||"non dfinie"}`)):(Qr&&Qr!=="default"&&(!pn.properties||!pn.properties.category)&&(pn.properties||(pn.properties={}),pn.properties.category=Qr,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant ajout: ${Qr} pour la couche ${pn._dbId}`)),D.value.addLayer(pn),Un++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${pn._dbId} (${zi}) avec catgorie ${((Ki=pn.properties)==null?void 0:Ki.category)||"non dfinie"}`)):D.value.hasLayer(pn)?(D.value.removeLayer(pn),dr++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${pn._dbId} (${zi}) - Filtres non respects`)):(dr++,console.log(`[MapView][updateMapDisplay] Couche ${pn._dbId} (${zi}) dj masque`))}),console.log("[MapView][updateMapDisplay] Dbut de la restauration des couches filtres"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(pn=>{var ei;if(!pn.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignore");return}const rn=pn.layer,zr=rn._leaflet_id,Br=rn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${zr} (dbId: ${Br})`),D.value.hasLayer(rn)){console.log(`[MapView][updateMapDisplay] La couche ${zr} est dj dans le featureGroup, ignore`);return}const zi=rn.properties||{},Qr=zi.type||rn.type_forme||"";let _r=null;if(rn._dbId){const hr=o.elements.find(Dn=>Dn.id===rn._dbId);if(hr){const Dn=hr.data;Dn&&Dn.category&&(_r=Dn.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis le store: ${_r} pour la couche ${rn._dbId}`))}}!_r&&zi.category&&(_r=zi.category,console.log(`[MapView][updateMapDisplay] Catgorie rcupre depuis les proprits: ${_r} pour la couche ${zr}`)),_r||(_r="default");const Ar=zi.accessLevel||"visitor";if(rn.properties||(rn.properties={}),_r&&_r!=="default"&&(rn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catgorie dfinie/restaure: ${_r} pour la couche ${rn._dbId}`),rn._dbId)){const hr=o.elements.find(Dn=>Dn.id===rn._dbId);if(hr){const Dn=hr;Dn.data||(Dn.data={}),Dn.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store: ${_r} pour l'lment ${rn._dbId}`),Dn.data.category=_r,o.$patch({unsavedChanges:!0}))}}rn.properties.accessLevel||(rn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Proprits de la couche ${zr}: type=${Qr}, category=${_r}, accessLevel=${Ar}`);let hi=!1;Qr?hi=Qr in o.filters.shapeTypes&&o.filters.shapeTypes[Qr]===!0:hi=o.filters.shapeTypes.Polygon===!0;let Rr=!1;if(_r)if(_r in o.filters.categories)Rr=o.filters.categories[_r]===!0,console.log(`[MapView][updateMapDisplay] Vrification de la catgorie ${_r}: ${Rr}`);else if(NE().getUniqueCategories.includes(_r)){console.log(`[MapView][updateMapDisplay] Catgorie personnalise ${_r} trouve dans mapFilterStore, ajout aux filtres`);const Sr={...o.filters.categories};Sr[_r]=!0,o.updateFilters({categories:Sr}),Rr=!0}else Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catgorie ${_r} non trouve, utilisation de 'forages': ${Rr}`);else Rr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catgorie, utilisation de 'forages': ${Rr}`);let an=!1;const Ni={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let vi="visitor";Ni.company?vi="company":Ni.employee?vi="employee":Ni.visitor&&(vi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs slectionn par l'utilisateur (2me tape): ${vi}`),vi==="company"?an=!0:vi==="employee"?an=Ar==="employee"||Ar==="visitor":vi==="visitor"&&(an=Ar==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accs de la couche (2me tape): ${Ar}, visible: ${an}`);const Ki=hi&&Rr&&an;if(console.log(`[MapView][updateMapDisplay] Visibilit de la couche ${zr}: typeVisible=${hi}, categoryVisible=${Rr}, accessLevelVisible=${an}, isVisible=${Ki}`),Ki){if(_r&&_r!=="default"&&(rn.properties||(rn.properties={}),rn.properties.category=_r,console.log(`[MapView][updateMapDisplay] Catgorie dfinie avant restauration: ${_r} pour la couche ${zr}`),rn._dbId)){const hr=o.elements.find(Dn=>Dn.id===rn._dbId);if(hr){const Dn=hr;Dn.data||(Dn.data={}),Dn.data.category!==_r&&(console.log(`[MapView][updateMapDisplay] Mise  jour de la catgorie dans le store avant restauration: ${_r} pour l'lment ${rn._dbId}`),Dn.data.category=_r,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(rn),Un++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${zr} (${Qr}) avec catgorie ${((ei=rn.properties)==null?void 0:ei.category)||"non dfinie"} - Filtres respects`)}else console.log(`[MapView][updateMapDisplay] La couche ${zr} (${Qr}) reste masque - Filtres non respects`)}),console.log(`[MapView][updateMapDisplay] Restauration termine: ${Un} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${Un} couches visibles, ${dr} couches masques, ${Lr} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise  jour termine")}function Oo(lt){if(D.value){const dt=D.value.getLayers().find(Ln=>Ln._leaflet_id===lt.id);dt&&(dt.properties.name=lt.title,dt.properties.description=lt.description,dt.properties.columnId=lt.columnId,dt.properties.accessLevel=lt.accessLevel,dt.properties.category||(dt.properties.category="forages"),dt.setNoteStyle({color:lt.style.color,fillColor:lt.style.fillColor,weight:lt.style.weight,fillOpacity:lt.style.fillOpacity,radius:lt.style.radius}),dt.closePopup(),dt.unbindPopup(),dt.bindPopup(dt.createPopupContent()),console.log("[handleNoteSave] Note mise  jour:",{name:dt.properties.name,category:dt.properties.category,accessLevel:dt.properties.accessLevel,columnId:dt.properties.columnId}),a.notes.find(Vn=>Vn.id===lt.id)?(a.updateNote(lt.id,{title:lt.title,description:lt.description,columnId:lt.columnId,accessLevel:lt.accessLevel,style:lt.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise  jour dans le store avec columnId:",lt.columnId)):(a.addNote({title:lt.title,description:lt.description,location:[lt.location[0],lt.location[1]],columnId:lt.columnId||"1",style:lt.style,accessLevel:lt.accessLevel}),console.log("[handleNoteSave] Note ajoute au store avec columnId:",lt.columnId||"1")))}l.success("Note enregistre avec succs")}async function Ts(lt){var Be;Z.value=lt,de.value=!0;try{const dt={visiteur:lt.id};X.isEntreprise?dt.entreprise=(Be=X.user)==null?void 0:Be.id:it.value&&(dt.entreprise=it.value.id),ie.value&&(dt.salarie=ie.value.id);const Ln=await In.get("/plans/",{params:dt});Ze.value=Ln.data}catch(dt){console.error("[MapView] Error loading client plans:",dt),Ze.value=[]}finally{de.value=!1}}async function tr(){var Be;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const lt={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};Z.value=lt,de.value=!0;try{const dt={visiteur_null:!0};X.isEntreprise?dt.entreprise=(Be=X.user)==null?void 0:Be.id:it.value&&(dt.entreprise=it.value.id),ie.value&&(dt.salarie=ie.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramtres de requte:",dt);const Ln=await In.get("/plans/",{params:dt});console.log("[MapView][loadPlansWithoutVisiteur] Plans reus:",Ln.data),Ze.value=Ln.data}catch(dt){console.error("[MapView] Error loading plans without visiteur:",dt),Ze.value=[]}finally{de.value=!1}}async function Ds(){var lt;if(ie.value=null,Z.value=null,Ze.value=[],X.isEntreprise){me.value=!0;try{const Be=await In.get("/users/",{params:{role:"SALARIE",entreprise:(lt=X.user)==null?void 0:lt.id}});we.value=Be.data,console.log("[MapView][openLoadPlanModal] Salaris chargs:",we.value.length)}catch(Be){console.error("[MapView][openLoadPlanModal] Erreur lors du chargement des salaris:",Be),we.value=[]}finally{me.value=!1}}K.value=!0}function No(lt,Be,dt,Ln,Vn){if(!lt||lt.length===0)return Ln;const En=[...lt].sort((pn,rn)=>(rn.surface||0)-(pn.surface||0)),jt=Vn,Hn=7,St=6,qt=2,Un=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],dr=Hn+St*En.length;Be.setFillColor(248,250,252),Be.setDrawColor(226,232,240),Be.roundedRect(dt,Ln,jt,dr+qt*2,2,2,"FD"),Be.setFillColor(241,245,249),Be.rect(dt+qt,Ln+qt,jt-qt*2,Hn,"F"),Be.setFont("helvetica","bold"),Be.setFontSize(7),Be.setTextColor(51,65,85);let Lr=dt+qt;return Un.forEach(pn=>{const rn=pn.width*(jt-qt*2);pn.align==="right"?Be.text(pn.header,Lr+rn-qt,Ln+qt+5,{align:"right"}):pn.align==="center"?Be.text(pn.header,Lr+rn/2,Ln+qt+5,{align:"center"}):Be.text(pn.header,Lr+qt/2,Ln+qt+5),Lr+=rn}),Be.setFont("helvetica","normal"),Be.setFontSize(6.5),Be.setTextColor(71,85,105),En.forEach((pn,rn)=>{const zr=Ln+Hn+qt+rn*St;rn%2===0&&(Be.setFillColor(250,252,254),Be.rect(dt+qt,zr,jt-qt*2,St,"F"));let Br=dt+qt;const zi=pn.name||`Section ${rn+1}`;Be.text(zi,Br+qt/2,zr+4),Br+=Un[0].width*(jt-qt*2);const Qr=ft(pn.surface||0,"m");Be.text(Qr,Br+Un[1].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Un[1].width*(jt-qt*2);const _r=pn.startAngle===0&&pn.endAngle===360?"Complet":`${pn.startAngle}-${pn.endAngle}`;Be.text(_r,Br+Un[2].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Un[2].width*(jt-qt*2);const Ar=ft(pn.radius||0);Be.text(Ar,Br+Un[3].width*(jt-qt*2)-qt,zr+4,{align:"right"}),Br+=Un[3].width*(jt-qt*2);const hi=pn.startAngle===0&&pn.endAngle===360?"C":"P";Be.text(hi,Br+Un[4].width*(jt-qt*2)/2,zr+4,{align:"center"})}),Be.setDrawColor(226,232,240),Be.setLineWidth(.05),Be.line(dt+qt,Ln+Hn+qt,dt+jt-qt,Ln+Hn+qt),Ln+dr+qt*2}return(lt,Be)=>{var dt,Ln,Vn,En,jt,Hn;return Te(),Ie(wn,null,[S("div",sW,[S("div",oW,[Ut.value?(Te(),Ie("div",aW,Be[7]||(Be[7]=[tu('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Gnration de la synthse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualit de vos captures pour un rendu parfait </p></div></div></div>',1)]))):Jt("",!0),B.value?Jt("",!0):(Te(),Ie("div",lW,[S("div",uW,[Be[10]||(Be[10]=tu('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+X4+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer  dessiner, vous devez d&#39;abord crer un nouveau plan ou charger un plan existant.</p>',3)),S("div",cW,[S("button",{onClick:Be[0]||(Be[0]=St=>j.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Be[8]||(Be[8]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Xr(" Crer un nouveau plan ")])),S("button",{onClick:Ds,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},Be[9]||(Be[9]=[S("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),Xr(" Charger un plan existant ")]))])])])),kn(S("div",dW,[S("div",hW,[B.value&&!Ut.value?(Te(),Sa(TV,{key:0,"last-save":(dt=B.value)!=null&&dt.date_modification?new Date(B.value.date_modification):void 0,"plan-name":(Ln=B.value)==null?void 0:Ln.nom,"plan-description":(Vn=B.value)==null?void 0:Vn.description,"save-status":ne.value,onChangeMapType:Yn(N),onCreateNewPlan:Be[1]||(Be[1]=St=>j.value=!0),onLoadPlan:Ds,onSavePlan:Ce,onAdjustView:Ye,onGenerateSummary:yn,class:"flex-shrink-0"},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])):Jt("",!0),S("div",fW,[i.value&&B.value&&!Ut.value?(Te(),Ie("div",{key:0,onClick:Q,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):Jt("",!0),S("div",pW,[S("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),B.value&&!Ut.value?(Te(),Sa(Z$,{key:1,show:i.value,"onUpdate:show":Be[2]||(Be[2]=St=>i.value=St),"selected-tool":Yn(p),"selected-shape":Re.value,"is-drawing":Yn(ge),onToolSelected:Yn(E),onFilterChange:Fs,onDeleteShape:Ke,onPropertiesUpdate:ye,onStyleUpdate:Yn(k),class:"md:w-80 md:flex-shrink-0"},null,8,["show","selected-tool","selected-shape","is-drawing","onToolSelected","onStyleUpdate"])):Jt("",!0),B.value&&!Ut.value?(Te(),Ie("div",{key:2,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:Q},Be[11]||(Be[11]=[tu('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):Jt("",!0)])]),Ut.value?(Te(),Ie("div",gW,Be[12]||(Be[12]=[tu('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Gnration de la synthse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):Jt("",!0)],512),[[ky,B.value]]),(Te(),Sa(q0,{to:"body"},[mi(RE,{ref_key:"newPlanModalRef",ref:ce,modelValue:j.value,"onUpdate:modelValue":Be[3]||(Be[3]=St=>j.value=St),onCreated:_t,onSalarieSelected:Be[4]||(Be[4]=St=>ie.value=St),onVisiteurSelected:Be[5]||(Be[5]=St=>H.value=St)},null,8,["modelValue"])])),(Te(),Sa(q0,{to:"body"},[K.value?(Te(),Ie("div",mW,[S("div",vW,[S("div",yW,[Be[14]||(Be[14]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),S("button",{onClick:Be[6]||(Be[6]=St=>K.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},Be[13]||(Be[13]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",bW,[Yn(X).isAdmin?(Te(),Ie("div",_W,[it.value?ie.value?Z.value?(Te(),Ie("div",FW,[S("div",jW,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[30]||(Be[30]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des clients ")])),Be[31]||(Be[31]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",zW,kt(mn(Z.value)),1)]),Be[33]||(Be[33]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",$W,[de.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[32]||(Be[32]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(Ze.value,St=>(Te(),Ie("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[S("div",UW,kt(St.nom),1),S("div",HW,kt(St.description),1),S("div",WW," Modifi le "+kt(Ve(St.date_modification)),1)],8,VW),Yn(X).isAdmin||Yn(X).isEntreprise?(Te(),Ie("button",{key:0,onClick:Su(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,GW)):Jt("",!0)]))),128))])])):(Te(),Ie("div",TW,[S("div",DW,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[23]||(Be[23]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des salaries ")])),Be[24]||(Be[24]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",OW,kt(mn(ie.value)),1)]),Be[29]||(Be[29]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",NW,[S("button",{onClick:tr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Be[25]||(Be[25]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),fe.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[26]||(Be[26]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(),Ie(wn,{key:1},[J.value.length===0?(Te(),Ie("div",IW,Be[27]||(Be[27]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Te(!0),Ie(wn,{key:1},ir(J.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",RW,kt(mn(St)),1)]),Be[28]||(Be[28]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,BW))),128))],64))])])):(Te(),Ie("div",CW,[S("div",EW,[S("button",{onClick:Qt,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[18]||(Be[18]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des entreprises ")])),Be[19]||(Be[19]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",PW,kt(mn(it.value)),1)]),Be[22]||(Be[22]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un salarie",-1)),S("div",MW,[me.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[20]||(Be[20]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(On.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>er(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",AW,kt(mn(St)),1)]),Be[21]||(Be[21]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,kW))),128))])])):(Te(),Ie("div",wW,[Be[17]||(Be[17]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez une entreprise",-1)),S("div",xW,[$t.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[15]||(Be[15]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(Zt.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>Qn(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",SW,kt(mn(St)),1)]),Be[16]||(Be[16]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,LW))),128))])]))])):Yn(X).isSalarie?(Te(),Ie("div",qW,[Z.value?(Te(),Ie("div",QW,[S("div",eG,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[38]||(Be[38]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des clients ")])),Be[39]||(Be[39]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",tG,kt(mn(Z.value)),1)]),Be[41]||(Be[41]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",nG,[de.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[40]||(Be[40]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(Ze.value,St=>(Te(),Ie("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[S("div",iG,kt(St.nom),1),S("div",sG,kt(St.description),1),S("div",oG," Modifi le "+kt(Ve(St.date_modification)),1)],8,rG),Yn(X).isAdmin||Yn(X).isEntreprise?(Te(),Ie("button",{key:0,onClick:Su(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,aG)):Jt("",!0)]))),128))])])):(Te(),Ie("div",YW,[Be[37]||(Be[37]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",KW,[fe.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[34]||(Be[34]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(),Ie(wn,{key:1},[J.value.length===0?(Te(),Ie("div",ZW,Be[35]||(Be[35]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salarie",-1),S("div",{class:"text-sm text-gray-400"}," Veuillez vrifier que des visiteurs ont t assigns  ce salarie ",-1)]))):(Te(!0),Ie(wn,{key:1},ir(J.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",JW,kt(mn(St)),1)]),Be[36]||(Be[36]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,XW))),128))],64))])]))])):Yn(X).isEntreprise?(Te(),Ie("div",lG,[ie.value?Z.value?(Te(),Ie("div",_G,[S("div",wG,[S("button",{onClick:Cn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[52]||(Be[52]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des visiteurs ")])),Be[53]||(Be[53]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",xG,kt(mn(Z.value)),1)]),Be[55]||(Be[55]=S("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),S("div",LG,[de.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[54]||(Be[54]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),S("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(Ze.value,St=>(Te(),Ie("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[S("div",CG,kt(St.nom),1),S("div",EG,kt(St.description),1),S("div",PG," Modifi le "+kt(Ve(St.date_modification)),1)],8,SG),Yn(X).isAdmin||Yn(X).isEntreprise?(Te(),Ie("button",{key:0,onClick:Su(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,MG)):Jt("",!0)]))),128))])])):(Te(),Ie("div",fG,[S("div",pG,[S("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},Be[45]||(Be[45]=[S("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Xr(" Retour  la liste des salaris ")])),Be[46]||(Be[46]=S("span",{class:"mx-2 text-gray-400"},"|",-1)),S("span",gG,kt(mn(ie.value)),1)]),Be[51]||(Be[51]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un visiteur",-1)),S("div",mG,[S("button",{onClick:tr,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},Be[47]||(Be[47]=[S("div",null,[S("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),S("div",{class:"text-xs text-primary-600"},"Afficher les plans crs sans visiteur associ")],-1),S("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),fe.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[48]||(Be[48]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(),Ie(wn,{key:1},[J.value.length===0?(Te(),Ie("div",vG,Be[49]||(Be[49]=[S("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouv pour ce salari",-1),S("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Te(!0),Ie(wn,{key:1},ir(J.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>Ts(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",bG,kt(mn(St)),1)]),Be[50]||(Be[50]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,yG))),128))],64))])])):(Te(),Ie("div",uG,[Be[44]||(Be[44]=S("h3",{class:"font-medium text-gray-700"},"Slectionnez un salari",-1)),S("div",cG,[me.value?(Te(),Ie(wn,{key:0},ir(3,St=>S("div",{key:St,class:"animate-pulse"},Be[42]||(Be[42]=[S("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[S("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),S("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Te(!0),Ie(wn,{key:1},ir(we.value,St=>(Te(),Ie("button",{key:St.id,onClick:qt=>er(St),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[S("div",null,[S("div",hG,kt(mn(St)),1)]),Be[43]||(Be[43]=S("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,dG))),128))])]))])):(Te(),Ie("div",kG,[Yn(s).plans.length===0?(Te(),Ie("div",AG,Be[56]||(Be[56]=[S("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Te(),Ie("div",TG,[(Te(!0),Ie(wn,null,ir(Yn(s).plans,St=>(Te(),Ie("div",{key:St.id,class:"relative w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200 group"},[S("button",{onClick:qt=>ze(St.id),class:"w-full text-left"},[S("div",OG,kt(St.nom),1),S("div",NG,kt(St.description),1),S("div",IG," Modifi le "+kt(Ve(St.date_modification)),1)],8,DG),Yn(X).isAdmin||Yn(X).isEntreprise?(Te(),Ie("button",{key:0,onClick:Su(qt=>xr(St),["stop"]),class:"absolute top-1/2 right-3 transform -translate-y-1/2 px-3 py-1 text-sm text-red-600 hover:text-white hover:bg-red-600 border border-red-600 rounded transition-colors duration-200 h-8 flex items-center justify-center"}," Supprimer ",8,BG)):Jt("",!0)]))),128))]))]))])])])):Jt("",!0)])),(Te(),Sa(q0,{to:"body"},[R.value?(Te(),Ie("div",RG,[S("div",FG,[S("div",jG,[Be[57]||(Be[57]=S("svg",{class:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),Be[58]||(Be[58]=S("h3",{class:"text-xl font-semibold text-gray-900"},"Supprimer le plan",-1)),S("p",zG,' tes-vous sr de vouloir supprimer le plan "'+kt((En=U.value)==null?void 0:En.nom)+'" ? Cette action est irrversible. ',1)]),S("div",{class:"flex justify-center space-x-4"},[S("button",{onClick:qr,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-300"}," Annuler "),S("button",{onClick:ur,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500"}," Supprimer ")])])])):Jt("",!0)]))])]),I.value?(Te(),Sa(IE,{key:0,note:$.value,"is-new-note":!((jt=$.value)!=null&&jt.id),location:(Hn=$.value)==null?void 0:Hn.location,onClose:vr,onSave:Oo},null,8,["note","is-new-note","location"])):Jt("",!0)],64)}}}),$G={class:"fixed inset-0 z-[3001] overflow-y-auto"},VG={class:"flex items-center justify-center min-h-screen w-full p-0"},UG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},HG={class:"p-4 md:p-6"},WG={class:"flex justify-between items-center mb-4 border-b pb-4"},GG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},qG={class:"mt-4"},YG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},KG={class:"flex"},ZG={class:"ml-3"},XG={class:"text-sm font-medium text-red-800"},JG={key:0},QG={key:1},eq=["value"],tq={key:2},nq={key:3},rq=["value"],iq={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},sq={key:0,class:"mt-2 text-sm text-red-600"},oq={key:0,class:"mt-2 text-sm text-red-600"},aq={key:4},lq={class:"flex items-center"},uq={key:5,class:"border-t pt-4 mt-4"},cq={class:"mb-4"},dq={class:"mb-4"},hq={key:6},fq={key:7},pq={key:0,class:"mt-2 text-sm text-red-600"},gq={class:"flex justify-end space-x-3"},mq=["disabled"],vq={key:0,class:"mr-2"},yq=Rs({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Ct(!1),s=Ct(""),o=Ct(""),a=Ct(""),l=Ct(""),c=Ct(""),h=su({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});go(()=>{var v;(v=n.user)!=null&&v.id?(h.id=n.user.id,h.first_name=n.user.first_name||"",h.last_name=n.user.last_name||"",h.username=n.user.username||"",h.email=n.user.email||"",h.company_name=n.user.company_name||"",h.role=n.user.role||"VISITEUR",h.is_active=n.user.is_active??!0,h.ecowitt_api_key=n.user.ecowitt_api_key||"",h.ecowitt_application_key=n.user.ecowitt_application_key||"",h.storage_quota=n.user.storage_quota||50,h.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?h.salarie=n.user.salarie.id:h.salarie=n.user.salarie:n.user.salarie_id?h.salarie=n.user.salarie_id:n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?h.entreprise=n.user.entreprise.id:h.entreprise=n.user.entreprise:n.user.entreprise_id?h.entreprise=n.user.entreprise_id:n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(h.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?h.role="SALARIE":n.isAdmin||(h.role="VISITEUR"))}),cm(()=>{h.role==="ADMIN"||h.role==="ENTREPRISE"?(h.salarie=null,h.entreprise=null):h.role==="SALARIE"&&(h.salarie=null,n.isEntreprise&&n.currentEntreprise&&(h.entreprise=parseInt(n.currentEntreprise)))}),cm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(h.id||(h.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):h.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractres",v=!1)),!!v){i.value=!0;try{const g={...h};h.id&&delete g.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(h.role)&&(g.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),g.salarie&&(g.salarie_id=g.salarie,delete g.salarie),n.currentSalarie&&h.role==="VISITEUR"&&(g.salarie_id=parseInt(n.currentSalarie)),await r("save",g),r("refresh")}catch(g){console.error("Erreur locale:",g)}finally{i.value=!1}}}return(v,g)=>(Te(),Ie("div",$G,[S("div",VG,[g[42]||(g[42]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",UG,[S("div",null,[S("div",HG,[S("div",WG,[S("h3",GG,kt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),S("button",{type:"button",onClick:g[0]||(g[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},g[16]||(g[16]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("div",qG,[l.value?(Te(),Ie("div",YG,[S("div",KG,[g[17]||(g[17]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",ZG,[S("h3",XG,kt(l.value),1)])])])):Jt("",!0),S("form",{onSubmit:Su(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Te(),Ie("div",JG,[g[19]||(g[19]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(S("select",{id:"role","onUpdate:modelValue":g[1]||(g[1]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[18]||(g[18]=[S("option",{value:"ADMIN"},"Administrateur",-1),S("option",{value:"ENTREPRISE"},"Entreprise",-1),S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ns,h.role]])])):Jt("",!0),t.isAdmin&&h.role==="SALARIE"?(Te(),Ie("div",QG,[g[21]||(g[21]=S("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("select",{id:"entreprise","onUpdate:modelValue":g[2]||(g[2]=x=>h.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[g[20]||(g[20]=S("option",{value:null},"-- Slectionner une entreprise --",-1)),(Te(!0),Ie(wn,null,ir(t.entreprises,x=>(Te(),Ie("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Entreprise")+") ",9,eq))),128))],512),[[ns,h.entreprise]])])):Jt("",!0),t.isEntreprise&&!h.id?(Te(),Ie("div",tq,[g[23]||(g[23]=S("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(S("select",{id:"role","onUpdate:modelValue":g[3]||(g[3]=x=>h.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},g[22]||(g[22]=[S("option",{value:"SALARIE"},"Salarie",-1),S("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[ns,h.role]])])):Jt("",!0),(t.isAdmin||t.isEntreprise)&&h.role==="VISITEUR"&&!t.currentSalarie?(Te(),Ie("div",nq,[g[25]||(g[25]=S("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(S("select",{id:"salarie","onUpdate:modelValue":g[4]||(g[4]=x=>h.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[g[24]||(g[24]=S("option",{value:null},"-- Slectionner un salarie --",-1)),(Te(!0),Ie(wn,null,ir(t.salaries,x=>(Te(),Ie("option",{key:x.id,value:x.id},kt(x.first_name)+" "+kt(x.last_name)+" ("+kt(x.company_name||"Salarie")+") ",9,rq))),128))],512),[[ns,h.salarie]])])):Jt("",!0),S("div",iq,[S("div",null,[g[26]||(g[26]=S("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prnom",-1)),kn(S("input",{type:"text",id:"first_name","onUpdate:modelValue":g[5]||(g[5]=x=>h.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.first_name]])]),S("div",null,[g[27]||(g[27]=S("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),kn(S("input",{type:"text",id:"last_name","onUpdate:modelValue":g[6]||(g[6]=x=>h.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.last_name]])])]),S("div",null,[g[28]||(g[28]=S("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),kn(S("input",{type:"email",id:"email","onUpdate:modelValue":g[7]||(g[7]=x=>h.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.email]]),s.value?(Te(),Ie("div",sq,kt(s.value),1)):Jt("",!0)]),S("div",null,[g[29]||(g[29]=S("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),kn(S("input",{type:"text",id:"username","onUpdate:modelValue":g[8]||(g[8]=x=>h.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.username]]),o.value?(Te(),Ie("div",oq,kt(o.value),1)):Jt("",!0)]),S("div",null,[g[30]||(g[30]=S("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("input",{type:"text",id:"company_name","onUpdate:modelValue":g[9]||(g[9]=x=>h.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.company_name]])]),h.role==="ENTREPRISE"||h.role==="SALARIE"?(Te(),Ie("div",aq,[g[32]||(g[32]=S("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),S("div",lq,[kn(S("input",{type:"number",id:"storage_quota","onUpdate:modelValue":g[10]||(g[10]=x=>h.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.storage_quota]]),g[31]||(g[31]=S("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),g[33]||(g[33]=S("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):Jt("",!0),h.role==="ENTREPRISE"?(Te(),Ie("div",uq,[g[38]||(g[38]=S("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),S("div",cq,[g[34]||(g[34]=S("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Cl API Ecowitt",-1)),kn(S("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":g[11]||(g[11]=x=>h.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl API Ecowitt"},null,512),[[$r,h.ecowitt_api_key]]),g[35]||(g[35]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl API pour accder aux services mto Ecowitt",-1))]),S("div",dq,[g[36]||(g[36]=S("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Cl d'application Ecowitt",-1)),kn(S("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":g[12]||(g[12]=x=>h.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la cl d'application Ecowitt"},null,512),[[$r,h.ecowitt_application_key]]),g[37]||(g[37]=S("p",{class:"mt-1 text-sm text-gray-500"},"Cl d'application pour accder aux services mto Ecowitt",-1))])])):Jt("",!0),h.id?Jt("",!0):(Te(),Ie("div",hq,[g[39]||(g[39]=S("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),kn(S("input",{type:"password",id:"password","onUpdate:modelValue":g[13]||(g[13]=x=>h.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,h.password]])])),h.id?Jt("",!0):(Te(),Ie("div",fq,[g[40]||(g[40]=S("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),kn(S("input",{type:"password",id:"password_confirm","onUpdate:modelValue":g[14]||(g[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[$r,c.value]]),a.value?(Te(),Ie("div",pq,kt(a.value),1)):Jt("",!0)])),S("div",gq,[S("button",{type:"button",onClick:g[15]||(g[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),S("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Te(),Ie("span",vq,g[41]||(g[41]=[S("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):Jt("",!0),Xr(" "+kt(h.id?"Enregistrer":"Crer"),1)],8,mq)])],32)])])])])])]))}}),bq={class:"fixed inset-0 z-[3001] overflow-y-auto"},_q={class:"flex items-center justify-center min-h-screen w-full"},wq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},xq={class:"p-4 md:p-6"},Lq={class:"flex items-start"},Sq={class:"ml-4 flex-1"},Cq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},Eq={class:"mt-2"},Pq={class:"text-sm text-gray-500"},Mq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},sP=Rs({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Te(),Ie("div",bq,[S("div",_q,[n[3]||(n[3]=S("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[S("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),S("div",wq,[S("div",xq,[S("div",Lq,[n[2]||(n[2]=S("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[S("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),S("div",Sq,[S("h3",Cq,kt(t.title),1),S("div",Eq,[S("p",Pq,kt(t.message),1)])])]),S("div",Mq,[S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),S("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),kq={class:"h-full bg-gray-50"},Aq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Tq={class:"flex justify-between items-center mb-8"},Dq={class:"text-3xl font-extrabold text-gray-900"},Oq={key:0},Nq={key:1},Iq={key:2},Bq={key:0},Rq={key:1},Fq={key:2},jq={class:"bg-white shadow rounded-lg mb-6 p-4"},zq={class:"space-y-4"},$q={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Vq={key:0},Uq={key:0,value:"ADMIN"},Hq={key:1,value:"ENTREPRISE"},Wq={key:1},Gq=["value"],qq={key:2},Yq=["value"],Kq={class:"w-full"},Zq={class:"bg-white shadow rounded-lg"},Xq={class:"overflow-x-auto"},Jq={class:"min-w-full divide-y divide-gray-200"},Qq={class:"bg-gray-50"},eY={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},tY={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},nY={class:"bg-white divide-y divide-gray-200"},rY={key:0,class:"animate-pulse"},iY={key:1},sY={class:"px-6 py-4 whitespace-nowrap"},oY={class:"flex items-center"},aY={class:"flex-shrink-0 h-10 w-10"},lY={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},uY={class:"text-primary-600 font-medium"},cY={class:"ml-4"},dY={class:"text-sm font-medium text-gray-900"},hY={class:"text-sm text-gray-500"},fY={class:"px-6 py-4 whitespace-nowrap"},pY={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},gY={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},mY={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},vY={class:"px-6 py-4 whitespace-nowrap"},yY={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},bY=["onClick"],_Y=["onClick"],wY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},xY=Rs({__name:"UserListView",setup(t){const e=ga(),n=iu(),r=Ct([]),i=Ct([]),s=Ct([]),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),h=Ct(!0),p=Ct([]),v=su({role:"",search:"",salarie:"",entreprise:""}),g=Jn(()=>e.isAdmin),x=Jn(()=>e.isEntreprise),E=Jn(()=>e.isSalarie),k=Jn(()=>g.value?r.value.filter($=>$.role==="SALARIE"):x.value?r.value.filter($=>{var U,V;return $.role==="SALARIE"&&((U=$.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id)}):[]),A=Jn(()=>{let $=r.value;if(x.value&&($=$.filter(U=>{var V,ne,X,we,ve;return U.role==="SALARIE"?((V=U.entreprise)==null?void 0:V.id)===((ne=e.user)==null?void 0:ne.id):U.role==="VISITEUR"?((we=(X=U.salarie)==null?void 0:X.entreprise)==null?void 0:we.id)===((ve=e.user)==null?void 0:ve.id):!1})),E.value&&($=$.filter(U=>{var V,ne;return U.role==="VISITEUR"&&(U.salarie_id===((V=e.user)==null?void 0:V.id)||U.salarie&&U.salarie.id===((ne=e.user)==null?void 0:ne.id))})),(g.value||x.value)&&(v.role&&($=$.filter(U=>U.role===v.role)),v.salarie&&($=$.filter(U=>{var ne;const V=((ne=U.salarie)==null?void 0:ne.id)||U.salarie_id;return(V==null?void 0:V.toString())===v.salarie.toString()})),v.entreprise&&g.value&&($=$.filter(U=>{var V,ne,X,we,ve;return U.role==="SALARIE"?((ne=(V=U.entreprise)==null?void 0:V.id)==null?void 0:ne.toString())===v.entreprise.toString():U.role==="VISITEUR"?((ve=(we=(X=U.salarie)==null?void 0:X.entreprise)==null?void 0:we.id)==null?void 0:ve.toString())===v.entreprise.toString():!1}))),v.search){const U=v.search.toLowerCase();$=$.filter(V=>{var ne,X,we,ve;return((ne=V.username)==null?void 0:ne.toLowerCase().includes(U))||((X=V.email)==null?void 0:X.toLowerCase().includes(U))||((we=V.first_name)==null?void 0:we.toLowerCase().includes(U))||((ve=V.last_name)==null?void 0:ve.toLowerCase().includes(U))||V.company_name&&V.company_name.toLowerCase().includes(U)})}return $});go(async()=>{await D(),await z()});async function D(){var $,U,V;h.value=!0;try{if(g.value)r.value=await e.fetchUsers();else if(x.value){const[ne,X]=await Promise.all([tv({role:"SALARIE",entrepriseId:($=e.user)==null?void 0:$.id}),tv({role:"VISITEUR",entrepriseId:(U=e.user)==null?void 0:U.id})]);r.value=[...ne,...X]}else E.value&&(r.value=await tv({role:"VISITEUR",salarieId:(V=e.user)==null?void 0:V.id,includeDetails:!0}),console.log("Visiteurs rcuprs:",r.value))}catch(ne){console.error("Erreur lors de la rcupration des utilisateurs:",ne),n.error("Erreur lors de la rcupration des utilisateurs")}finally{h.value=!1}}async function z(){try{g.value?await Promise.all([Y(),ge()]):x.value&&await te()}catch($){console.error("Erreur lors de la rcupration des dpendances:",$)}}async function Y(){var $;try{g.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries(($=e.user)==null?void 0:$.id))}catch(U){console.error("Erreur lors de la rcupration des salaries:",U)}}async function te(){var $,U;if(!(!x.value||!(($=e.user)!=null&&$.id)))try{i.value=await e.fetchEntrepriseSalaries((U=e.user)==null?void 0:U.id)}catch(V){console.error("Erreur lors de la rcupration des salaries de l'entreprise:",V)}}async function ge(){try{s.value=await e.fetchEnterprises()}catch($){console.error("Erreur lors de la rcupration des entreprises:",$)}}function pe(){l.value=null,o.value=!0}function N($){l.value={...$},o.value=!0}function j(){o.value=!1,l.value=null,p.value=[]}async function K($){var V,ne,X,we,ve,Ze;p.value=[];const U=!!$.id;try{const ie={...$};g.value?(ie.entreprise&&typeof ie.entreprise=="object"?ie.entreprise_id=ie.entreprise.id:typeof ie.entreprise=="number"&&(ie.entreprise_id=ie.entreprise),ie.salarie&&typeof ie.salarie=="object"?ie.salarie_id=ie.salarie.id:typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie)):x.value?(ie.entreprise_id=(V=e.user)==null?void 0:V.id,ie.role==="VISITEUR"&&(ie.salarie&&typeof ie.salarie=="object"?ie.salarie_id=ie.salarie.id:typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie))):E.value&&(ie.role="VISITEUR",ie.salarie_id=(ne=e.user)==null?void 0:ne.id),ie.role==="SALARIE"?((X=ie.entreprise)!=null&&X.id?(ie.entreprise_id=ie.entreprise.id,delete ie.entreprise):typeof ie.entreprise=="number"&&(ie.entreprise_id=ie.entreprise,delete ie.entreprise),delete ie.salarie):ie.role==="VISITEUR"&&((we=ie.salarie)!=null&&we.id?(ie.salarie_id=ie.salarie.id,delete ie.salarie):typeof ie.salarie=="number"&&(ie.salarie_id=ie.salarie,delete ie.salarie),delete ie.entreprise,delete ie.entreprise_id),U?(await e.updateUser($.id,ie),n.success("Utilisateur modifi avec succs")):(await e.createUser(ie),n.success("Utilisateur cr avec succs")),await Promise.all([D(),z()]),j()}catch(ie){console.error("Error saving user:",((ve=ie.response)==null?void 0:ve.data)||ie),p.value=V7(ie),n.error("Erreur lors de la sauvegarde de l'utilisateur");const H=((Ze=ie.response)==null?void 0:Ze.data)||{};let Z="";throw typeof H=="object"&&(Z=Object.entries(H).map(([me,fe])=>Array.isArray(fe)?`${me}: ${fe[0]}`:`${me}: ${fe}`).filter(me=>me).join(`
`)),Z||(Z="Une erreur est survenue lors de la sauvegarde"),new Error(Z)}}function I($){c.value=$,a.value=!0}async function R(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprim avec succs"),await Promise.all([D(),z()]),a.value=!1,c.value=null}catch($){throw console.error("Erreur lors de la suppression de l'utilisateur:",$),n.error("Erreur lors de la suppression de l'utilisateur"),$}}function B($){var U,V,ne,X,we,ve,Ze,ie;return g.value?!0:x.value?$.role==="SALARIE"?((U=$.entreprise)==null?void 0:U.id)===((V=e.user)==null?void 0:V.id):$.role==="VISITEUR"?((X=(ne=$.salarie)==null?void 0:ne.entreprise)==null?void 0:X.id)===((we=e.user)==null?void 0:we.id):!1:E.value?$.role==="VISITEUR"&&($.salarie_id===((ve=e.user)==null?void 0:ve.id)||((Ze=$.salarie)==null?void 0:Ze.id)===((ie=e.user)==null?void 0:ie.id)):!1}return($,U)=>{var V,ne,X,we;return Te(),Ie("div",kq,[S("div",Aq,[S("div",Tq,[S("h1",Dq,[g.value?(Te(),Ie("span",Oq,"Gestion des utilisateurs")):x.value?(Te(),Ie("span",Nq,"Gestion des salaries et visiteurs")):E.value?(Te(),Ie("span",Iq,"Gestion des visiteurs")):Jt("",!0)]),S("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[U[5]||(U[5]=S("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),g.value?(Te(),Ie("span",Bq,"Nouvel utilisateur")):x.value?(Te(),Ie("span",Rq,"Nouveau salarie/visiteur")):E.value?(Te(),Ie("span",Fq,"Nouvel visiteur")):Jt("",!0)])]),S("div",jq,[S("div",zq,[S("div",$q,[g.value||x.value?(Te(),Ie("div",Vq,[U[9]||(U[9]=S("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rle",-1)),kn(S("select",{id:"role-filter","onUpdate:modelValue":U[0]||(U[0]=ve=>v.role=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[6]||(U[6]=S("option",{value:""},"Tous les rles",-1)),g.value?(Te(),Ie("option",Uq,"Administrateur")):Jt("",!0),g.value?(Te(),Ie("option",Hq,"Entreprise")):Jt("",!0),U[7]||(U[7]=S("option",{value:"SALARIE"},"Salarie",-1)),U[8]||(U[8]=S("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[ns,v.role]])])):Jt("",!0),g.value?(Te(),Ie("div",Wq,[U[11]||(U[11]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(S("select",{id:"entreprise-filter","onUpdate:modelValue":U[1]||(U[1]=ve=>v.entreprise=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[10]||(U[10]=S("option",{value:""},"Toutes les entreprises",-1)),(Te(!0),Ie(wn,null,ir(s.value,ve=>(Te(),Ie("option",{key:ve.id,value:ve.id},kt(Yn(Lu)(ve)),9,Gq))),128))],512),[[ns,v.entreprise]])])):Jt("",!0),g.value||x.value?(Te(),Ie("div",qq,[U[13]||(U[13]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(S("select",{id:"salarie-filter","onUpdate:modelValue":U[2]||(U[2]=ve=>v.salarie=ve),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[U[12]||(U[12]=S("option",{value:""},"Tous les salaries",-1)),(Te(!0),Ie(wn,null,ir(k.value,ve=>(Te(),Ie("option",{key:ve.id,value:ve.id},kt(Yn(Lu)(ve)),9,Yq))),128))],512),[[ns,v.salarie]])])):Jt("",!0)]),S("div",Kq,[U[14]||(U[14]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(S("input",{type:"text",id:"search","onUpdate:modelValue":U[3]||(U[3]=ve=>v.search=ve),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[$r,v.search]])])])]),S("div",Zq,[S("div",Xq,[S("table",Jq,[S("thead",Qq,[S("tr",null,[U[15]||(U[15]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),U[16]||(U[16]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rle ",-1)),U[17]||(U[17]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),g.value||x.value?(Te(),Ie("th",eY," Entreprise ")):Jt("",!0),g.value||x.value?(Te(),Ie("th",tY," Salarie ")):Jt("",!0),U[18]||(U[18]=S("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),U[19]||(U[19]=S("th",{scope:"col",class:"relative px-6 py-3"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",nY,[h.value?(Te(),Ie("tr",rY,U[20]||(U[20]=[S("td",{colspan:"7",class:"py-4 px-6"},[S("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):A.value.length===0?(Te(),Ie("tr",iY,U[21]||(U[21]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouv ",-1)]))):Jt("",!0),(Te(!0),Ie(wn,null,ir(A.value,ve=>{var Ze;return Te(),Ie("tr",{key:ve.id},[S("td",sY,[S("div",oY,[S("div",aY,[S("div",lY,[S("span",uY,kt(Yn(H7)(ve.first_name,ve.last_name)),1)])]),S("div",cY,[S("div",dY,kt(Yn(Lu)(ve)),1),S("div",hY,kt(ve.username),1)])])]),S("td",fY,[S("span",{class:Di(Yn(q7)())},kt(Yn(G7)(ve.role)),3)]),S("td",pY,kt(ve.email),1),g.value||x.value?(Te(),Ie("td",gY,[ve.role==="ENTREPRISE"?(Te(),Ie(wn,{key:0},[Xr(" - ")],64)):ve.role==="SALARIE"?(Te(),Ie(wn,{key:1},[Xr(kt(ve.entreprise?Yn(Lu)(ve.entreprise):"Non assign"),1)],64)):ve.role==="VISITEUR"?(Te(),Ie(wn,{key:2},[Xr(kt((Ze=ve.salarie)!=null&&Ze.entreprise?Yn(Lu)(ve.salarie.entreprise):"Non assign"),1)],64)):(Te(),Ie(wn,{key:3},[Xr(" - ")],64))])):Jt("",!0),g.value||x.value?(Te(),Ie("td",mY,[ve.role==="ENTREPRISE"||ve.role==="ADMIN"?(Te(),Ie(wn,{key:0},[Xr(" - ")],64)):ve.role==="SALARIE"?(Te(),Ie(wn,{key:1},[Xr(" - ")],64)):(Te(),Ie(wn,{key:2},[Xr(kt(ve.salarie?Yn(Lu)(ve.salarie):"Non assign"),1)],64))])):Jt("",!0),S("td",vY,[S("span",{class:Di(Yn(Y7)(ve.is_active))},kt(ve.is_active?"Actif":"Inactif"),3)]),S("td",yY,[S("button",{onClick:ie=>N(ve),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,bY),B(ve)?(Te(),Ie("button",{key:0,onClick:ie=>I(ve),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,_Y)):Jt("",!0)])])}),128))])])])])]),o.value?(Te(),Ie("div",wY,[mi(yq,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":g.value,"is-entreprise":x.value,"current-salarie":E.value?(ne=(V=Yn(e).user)==null?void 0:V.id)==null?void 0:ne.toString():void 0,"current-entreprise":x.value?(we=(X=Yn(e).user)==null?void 0:X.id)==null?void 0:we.toString():void 0,"api-errors":p.value,onClose:j,onSave:K},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):Jt("",!0),a.value?(Te(),Sa(sP,{key:1,title:"Supprimer l'utilisateur",message:"tes-vous sr de vouloir supprimer cet utilisateur ? Cette action est irrversible.",onConfirm:R,onCancel:U[4]||(U[4]=ve=>a.value=!1)})):Jt("",!0)])}}}),LY={class:"h-full bg-gray-50"},SY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},CY={class:"sm:flex sm:items-center"},EY={class:"sm:flex-auto"},PY={class:"text-2xl font-semibold text-gray-900"},MY={class:"mt-2 text-sm text-gray-700"},kY={key:0,class:"mt-8"},AY={class:"mb-6"},TY=["value"],DY={class:"mb-6"},OY={value:null},NY=["value"],IY={key:0,class:"mb-6"},BY={value:null},RY=["value"],FY={key:1,class:"mt-8"},jY={class:"mb-6"},zY=["value"],$Y={class:"mt-8"},VY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},UY={class:"overflow-x-auto"},HY={class:"min-w-full divide-y divide-gray-300"},WY={class:"bg-gray-50"},GY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},qY={class:"ml-2 flex-none rounded"},YY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},KY={class:"ml-2 flex-none rounded"},ZY={class:"divide-y divide-gray-200 bg-white"},XY={key:0},JY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},QY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},eK={class:"px-3 py-4 text-sm text-gray-900"},tK={key:0,class:"flex items-center"},nK={class:"h-8 w-8 flex-shrink-0"},rK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},iK={class:"text-primary-700 font-medium text-sm"},sK={class:"ml-3"},oK={class:"font-medium"},aK={key:1,class:"text-gray-500"},lK={class:"px-3 py-4 text-sm text-gray-900"},uK={key:0,class:"flex items-center"},cK={class:"h-8 w-8 flex-shrink-0"},dK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},hK={class:"text-primary-700 font-medium text-sm"},fK={class:"ml-3"},pK={class:"font-medium"},gK={key:1,class:"text-gray-500"},mK={class:"px-3 py-4 text-sm text-gray-900"},vK={key:0,class:"flex items-center"},yK={class:"h-8 w-8 flex-shrink-0"},bK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},_K={class:"text-primary-700 font-medium text-sm"},wK={class:"ml-3"},xK={class:"font-medium"},LK={key:1,class:"text-gray-500"},SK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},CK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},EK=["onClick"],PK=["onClick"],MK=["onClick"],kK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},AK={class:"bg-white rounded-lg p-6 max-w-md w-full"},TK={class:"flex justify-between items-center mb-4"},DK=["disabled"],OK=["disabled"],NK={key:0,class:"space-y-4"},IK={key:0},BK=["disabled"],RK=["value"],FK=["disabled"],jK=["value"],zK={key:0,class:"mt-1 text-sm text-gray-500"},$K=["disabled"],VK=["value"],UK={key:0,class:"mt-1 text-sm text-gray-500"},HK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},WK={class:"flex"},GK={class:"ml-3"},qK={class:"text-sm font-medium text-red-800"},YK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},KK=["disabled"],ZK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},XK=Rs({__name:"PlansView",setup(t){const e=Dm(),n=$y(),r=ga(),i=Ct([]),s=Ct([]),o=Ct([]),a=Ct([]),l=Ct(!1),c=Ct(!1),h=Ct(!1),p=Ct(null),v=Ct({nom:"",description:"",client:null}),g=Ct({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Ct(!1),E=Ct(null),k=Ct(null),A=Ct(null),D=Ct("date_modification"),z=Ct("desc"),Y=Ct(null),te=Jn(()=>k.value?a.value.filter(ce=>typeof ce.salarie=="object"&&ce.salarie?ce.salarie.id===k.value:ce.salarie===k.value||ce.salarie_id===k.value):a.value),ge=Jn(()=>{let ce=i.value;console.log(`
[PlansView] Filtering plans:`,ce.map(Re=>({id:Re.id,entreprise:Re.entreprise,salarie:Re.salarie,visiteur:Re.visiteur}))),r.isAdmin?(Y.value&&(ce=ce.filter(Re=>{var De;return typeof Re.entreprise=="object"?((De=Re.entreprise)==null?void 0:De.id)===Y.value:Re.entreprise===Y.value})),k.value&&(ce=ce.filter(Re=>{var De;return typeof Re.salarie=="object"?((De=Re.salarie)==null?void 0:De.id)===k.value:Re.salarie===k.value}),A.value&&(ce=ce.filter(Re=>{var De;return typeof Re.visiteur=="object"?((De=Re.visiteur)==null?void 0:De.id)===A.value:Re.visiteur===A.value})))):r.isSalarie&&(ce=ce.filter(Re=>{var De,et,he;return typeof Re.salarie=="object"?((De=Re.salarie)==null?void 0:De.id)===((et=r.user)==null?void 0:et.id):Re.salarie===((he=r.user)==null?void 0:he.id)}),A.value&&(ce=ce.filter(Re=>{var De;return typeof Re.visiteur=="object"?((De=Re.visiteur)==null?void 0:De.id)===A.value:Re.visiteur===A.value})));const J=[...ce].sort((Re,De)=>{if(D.value==="nom")return z.value==="asc"?Re.nom.localeCompare(De.nom):De.nom.localeCompare(Re.nom);{const et=new Date(Re[D.value]).getTime(),he=new Date(De[D.value]).getTime();return z.value==="asc"?et-he:he-et}});return console.log("[PlansView] Final filtered and sorted plans:",J.map(Re=>({id:Re.id,entreprise:Re.entreprise,salarie:Re.salarie,visiteur:Re.visiteur}))),J}),pe=Jn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complte des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans o vous tes assign comme salarie",plans:i.value.filter(ce=>{var J,Re,De;return typeof ce.salarie=="object"?((J=ce.salarie)==null?void 0:J.id)===((Re=r.user)==null?void 0:Re.id):ce.salarie===((De=r.user)==null?void 0:De.id)})}:{title:"Mes plans",description:"Plans qui vous sont assigns ou que vous avez crs",plans:i.value.filter(ce=>{var De,et,he,Q;const J=ce.createur.id===((De=r.user)==null?void 0:De.id);let Re=!1;return typeof ce.visiteur=="object"?Re=((et=ce.visiteur)==null?void 0:et.id)===((he=r.user)==null?void 0:he.id):Re=ce.visiteur===((Q=r.user)==null?void 0:Q.id),Re||J})}),N=Jn(()=>Y.value?s.value.filter(ce=>{var J;return typeof ce.entreprise=="object"?((J=ce.entreprise)==null?void 0:J.id)===Y.value:ce.entreprise_id===Y.value}):s.value),j=Jn(()=>g.value.entreprise?s.value.filter(ce=>{var J;return typeof ce.entreprise=="object"?((J=ce.entreprise)==null?void 0:J.id)===g.value.entreprise:ce.entreprise_id===g.value.entreprise}):[]),K=Jn(()=>!g.value.entreprise||!g.value.salarie?[]:a.value.filter(ce=>typeof ce.salarie=="object"&&ce.salarie?ce.salarie.id===g.value.salarie:ce.salarie===g.value.salarie||ce.salarie_id===g.value.salarie));go(async()=>{var ce;await I(),r.isAdmin?await R():r.isSalarie&&await $(((ce=r.user)==null?void 0:ce.id)||0)});async function I(){try{const ce=await n.fetchPlansWithDetails();i.value=ce.data}catch(ce){console.error("Erreur lors du chargement des plans:",ce)}}async function R(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises charges:",o.value)}catch(ce){console.error("Erreur lors du chargement des entreprises:",ce)}}async function B(ce){try{if(console.log("Chargement des salaries pour l'entreprise:",ce),ce===void 0){const J=await r.fetchUsersByRole({role:"SALARIE"});s.value=J}else s.value=await r.fetchEntrepriseSalaries(ce);console.log("Salaries chargs:",s.value)}catch(J){console.error("Erreur lors du chargement des salaries:",J)}}async function $(ce){try{console.log("Chargement des visiteurs pour le salarie:",ce);const J=await tv({role:"VISITEUR",salarieId:ce});a.value=J.map(Re=>({...Re,salarie_id:ce})),console.log("Visiteurs chargs:",a.value)}catch(J){console.error("Erreur lors du chargement des visiteurs:",J)}}function U(){l.value=!0,v.value={nom:"",description:"",client:null}}async function V(ce){console.log(`
[PlansView][editPlan] ====== DBUT DITION PLAN ======`),console.log("[PlansView][editPlan] Plan reu:",{id:ce.id,nom:ce.nom,entreprise:ce.entreprise,salarie:ce.salarie,visiteur:ce.visiteur});try{console.log("[PlansView][editPlan] Dfinition du plan courant dans le store..."),n.setCurrentPlan(ce),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",ce.id),localStorage.setItem("lastPlanId",ce.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN DITION PLAN ======
`)}catch(J){console.error("[PlansView][editPlan] ERREUR:",J),J instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",J.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function ne(ce){ce!=null&&ce.id&&(p.value=ce,h.value=!0)}async function X(){var ce,J;if((ce=p.value)!=null&&ce.id)try{await n.deletePlan(p.value.id),await I(),((J=n.currentPlan)==null?void 0:J.id)===p.value.id&&n.clearCurrentPlan()}catch(Re){console.error("Erreur lors de la suppression du plan:",Re),alert("Une erreur est survenue lors de la suppression du plan")}finally{h.value=!1,p.value=null}}function we(){h.value=!1,p.value=null}function ve(ce){return new Date(ce).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function Ze(ce){if(!ce)return"";const J=ce.first_name||"",Re=ce.last_name||"";return(J.charAt(0)+Re.charAt(0)).toUpperCase()}async function ie(ce){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await R();const J=typeof ce.entreprise=="object"&&ce.entreprise?ce.entreprise.id:ce.entreprise,Re=typeof ce.salarie=="object"&&ce.salarie?ce.salarie.id:ce.salarie,De=typeof ce.visiteur=="object"&&ce.visiteur?ce.visiteur.id:ce.visiteur;g.value={id:ce.id,nom:ce.nom,description:ce.description,entreprise:J||null,salarie:Re||null,visiteur:De||null},J&&await B(J),Re&&await $(Re),c.value=!0}catch(J){console.error("Erreur lors de l'ouverture du modal:",J),E.value="Erreur lors du chargement des donnes"}finally{x.value=!1}}async function H(){var ce,J,Re,De,et;E.value=null,x.value=!0;try{if(!g.value.nom.trim())throw new Error("Le nom du plan est requis");if(g.value.visiteur&&!g.value.salarie)throw new Error("Un salarie doit tre slectionn pour assigner un visiteur");if(g.value.salarie&&!g.value.entreprise)throw new Error("Une entreprise doit tre slectionne pour assigner un salarie");console.log("Donnes envoyes pour la mise  jour:",{id:g.value.id,nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});const he=await n.updatePlanDetails(g.value.id,{nom:g.value.nom.trim(),description:g.value.description.trim(),entreprise_id:g.value.entreprise,salarie_id:g.value.salarie,visiteur_id:g.value.visiteur});console.log("Rponse de la mise  jour:",he),he&&(c.value=!1,await I())}catch(he){if(console.error("Erreur lors de la mise  jour du plan:",he),(J=(ce=he.response)==null?void 0:ce.data)!=null&&J.detail)E.value=he.response.data.detail;else if((De=(Re=he.response)==null?void 0:Re.data)!=null&&De.non_field_errors)E.value=he.response.data.non_field_errors[0];else if((et=he.response)!=null&&et.data){const Q=Object.entries(he.response.data).map(([se,ue])=>`${se}: ${Array.isArray(ue)?ue[0]:ue}`);E.value=Q.join(`
`)}else E.value=he.message||"Une erreur est survenue lors de la mise  jour du plan"}finally{x.value=!1}}ki(()=>Y.value,async ce=>{k.value=null,A.value=null,ce?await B(ce):await B()}),ki(()=>k.value,async ce=>{A.value=null,ce&&await $(ce)}),ki(()=>g.value.entreprise,async ce=>{ce===null?(g.value.salarie=null,g.value.visiteur=null):await B(ce)}),ki(()=>g.value.salarie,async ce=>{g.value.visiteur=null,ce&&await $(ce)});function Z(ce){var et,he,Q;const J=r.user;if(!J)return!1;if(J.user_type==="admin")return!0;if(J.user_type==="entreprise")return typeof ce.entreprise=="object"?((et=ce.entreprise)==null?void 0:et.id)===J.id:ce.entreprise===J.id;if(J.user_type==="salarie")return typeof ce.salarie=="object"?((he=ce.salarie)==null?void 0:he.id)===J.id:ce.salarie===J.id;const Re=ce.createur.id===J.id;let De=!1;return typeof ce.visiteur=="object"?De=((Q=ce.visiteur)==null?void 0:Q.id)===J.id:De=ce.visiteur===J.id,De||Re}async function me(ce){await I(),localStorage.setItem("lastPlanId",ce.toString()),console.log(`Plan ${ce} cr et dfini comme plan actif`),e.push("/")}function fe(ce){D.value===ce?z.value=z.value==="asc"?"desc":"asc":(D.value=ce,z.value="desc")}function de(ce){return ce?Lu(ce):""}return(ce,J)=>{var Re;return Te(),Ie("div",LY,[S("div",SY,[S("div",CY,[S("div",EY,[S("h1",PY,kt(pe.value.title),1),S("p",MY,kt(pe.value.description),1)]),S("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[S("button",{onClick:U,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Yn(r).isAdmin?(Te(),Ie("div",kY,[S("div",AY,[J[15]||(J[15]=S("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),kn(S("select",{id:"entreprise-filter","onUpdate:modelValue":J[0]||(J[0]=De=>Y.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[14]||(J[14]=S("option",{value:null},"Toutes les entreprises",-1)),(Te(!0),Ie(wn,null,ir(o.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,TY))),128))],512),[[ns,Y.value]])]),S("div",DY,[J[16]||(J[16]=S("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),kn(S("select",{id:"salarie-filter","onUpdate:modelValue":J[1]||(J[1]=De=>k.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",OY,kt(N.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Te(!0),Ie(wn,null,ir(N.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,NY))),128))],512),[[ns,k.value]])]),k.value?(Te(),Ie("div",IY,[J[17]||(J[17]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(S("select",{id:"visiteur-filter","onUpdate:modelValue":J[2]||(J[2]=De=>A.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[S("option",BY,kt(te.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Te(!0),Ie(wn,null,ir(te.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,RY))),128))],512),[[ns,A.value]])])):Jt("",!0)])):Yn(r).isSalarie?(Te(),Ie("div",FY,[S("div",jY,[J[19]||(J[19]=S("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(S("select",{id:"visiteur-filter","onUpdate:modelValue":J[3]||(J[3]=De=>A.value=De),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[18]||(J[18]=S("option",{value:null},"Tous les visiteurs",-1)),(Te(!0),Ie(wn,null,ir(a.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,zY))),128))],512),[[ns,A.value]])])])):Jt("",!0),S("div",$Y,[S("div",VY,[S("div",UY,[S("table",HY,[S("thead",WY,[S("tr",null,[S("th",GY,[S("button",{onClick:J[4]||(J[4]=De=>fe("nom")),class:"group inline-flex items-center"},[J[21]||(J[21]=Xr(" Nom ")),S("span",qY,[(Te(),Ie("svg",{class:Di(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[20]||(J[20]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[24]||(J[24]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),J[25]||(J[25]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),J[26]||(J[26]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),J[27]||(J[27]=S("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),S("th",YY,[S("button",{onClick:J[5]||(J[5]=De=>fe("date_modification")),class:"group inline-flex items-center"},[J[23]||(J[23]=Xr(" Dernire modification ")),S("span",KY,[(Te(),Ie("svg",{class:Di(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&z.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[22]||(J[22]=[S("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[28]||(J[28]=S("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[S("span",{class:"sr-only"},"Actions")],-1))])]),S("tbody",ZY,[ge.value.length===0?(Te(),Ie("tr",XY,J[29]||(J[29]=[S("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):Jt("",!0),(Te(!0),Ie(wn,null,ir(ge.value,De=>(Te(),Ie("tr",{key:De.id,class:"hover:bg-gray-50"},[S("td",JY,kt(De.nom),1),S("td",QY,kt(De.description||"-"),1),S("td",eK,[De.entreprise&&typeof De.entreprise=="object"?(Te(),Ie("div",tK,[S("div",nK,[S("div",rK,[S("span",iK,kt(Ze(De.entreprise)),1)])]),S("div",sK,[S("div",oK,kt(Yn(Lu)(De.entreprise)),1)])])):(Te(),Ie("div",aK," Non assign "))]),S("td",lK,[De.salarie&&typeof De.salarie=="object"?(Te(),Ie("div",uK,[S("div",cK,[S("div",dK,[S("span",hK,kt(Ze(De.salarie)),1)])]),S("div",fK,[S("div",pK,kt(Yn(Lu)(De.salarie)),1)])])):(Te(),Ie("div",gK," Non assign "))]),S("td",mK,[De.visiteur&&typeof De.visiteur=="object"?(Te(),Ie("div",vK,[S("div",yK,[S("div",bK,[S("span",_K,kt(Ze(De.visiteur)),1)])]),S("div",wK,[S("div",xK,kt(Yn(Lu)(De.visiteur)),1)])])):(Te(),Ie("div",LK," Non assign "))]),S("td",SK,kt(ve(De.date_modification)),1),S("td",CK,[S("button",{onClick:et=>V(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,EK),S("button",{onClick:et=>ie(De),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,PK),Z(De)?(Te(),Ie("button",{key:0,onClick:et=>ne(De),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,MK)):Jt("",!0)])]))),128))])])])])]),mi(RE,{modelValue:l.value,"onUpdate:modelValue":J[6]||(J[6]=De=>l.value=De),salaries:s.value,clients:a.value,onCreated:me},null,8,["modelValue","salaries","clients"]),c.value?(Te(),Ie("div",kK,[S("div",AK,[S("div",TK,[J[31]||(J[31]=S("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),S("button",{onClick:J[7]||(J[7]=De=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},J[30]||(J[30]=[S("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),S("form",{onSubmit:Su(H,["prevent"]),class:"space-y-4"},[S("div",null,[J[32]||(J[32]=S("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),kn(S("input",{type:"text",id:"edit-nom","onUpdate:modelValue":J[8]||(J[8]=De=>g.value.nom=De),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,DK),[[$r,g.value.nom]])]),S("div",null,[J[33]||(J[33]=S("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),kn(S("textarea",{id:"edit-description","onUpdate:modelValue":J[9]||(J[9]=De=>g.value.description=De),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,OK),[[$r,g.value.description]])]),Yn(r).isAdmin||((Re=Yn(r).user)==null?void 0:Re.user_type)==="entreprise"?(Te(),Ie("div",NK,[Yn(r).isAdmin?(Te(),Ie("div",IK,[J[35]||(J[35]=S("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),kn(S("select",{id:"edit-entreprise","onUpdate:modelValue":J[10]||(J[10]=De=>g.value.entreprise=De),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[34]||(J[34]=S("option",{value:null},"Slectionner une entreprise",-1)),(Te(!0),Ie(wn,null,ir(o.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,RK))),128))],8,BK),[[ns,g.value.entreprise]])])):Jt("",!0),S("div",null,[J[37]||(J[37]=S("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),kn(S("select",{id:"edit-salarie","onUpdate:modelValue":J[11]||(J[11]=De=>g.value.salarie=De),disabled:Yn(r).isAdmin&&!g.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[36]||(J[36]=S("option",{value:null},"Slectionner un salarie",-1)),(Te(!0),Ie(wn,null,ir(j.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,jK))),128))],8,FK),[[ns,g.value.salarie]]),Yn(r).isAdmin&&!g.value.entreprise?(Te(),Ie("p",zK," Veuillez d'abord slectionner une entreprise ")):Jt("",!0)]),S("div",null,[J[39]||(J[39]=S("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),kn(S("select",{id:"edit-visiteur","onUpdate:modelValue":J[12]||(J[12]=De=>g.value.visiteur=De),disabled:!g.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[38]||(J[38]=S("option",{value:null},"Slectionner un visiteur",-1)),(Te(!0),Ie(wn,null,ir(K.value,De=>(Te(),Ie("option",{key:De.id,value:De.id},kt(de(De)),9,VK))),128))],8,$K),[[ns,g.value.visiteur]]),g.value.salarie?Jt("",!0):(Te(),Ie("p",UK," Veuillez d'abord slectionner un salarie "))])])):Jt("",!0),E.value?(Te(),Ie("div",HK,[S("div",WK,[J[40]||(J[40]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",GK,[S("p",qK,kt(E.value),1)])])])):Jt("",!0),S("div",YK,[S("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:J[13]||(J[13]=De=>c.value=!1)}," Annuler "),S("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Te(),Ie("svg",ZK,J[41]||(J[41]=[S("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),S("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):Jt("",!0),Xr(" "+kt(x.value?"Enregistrement...":"Enregistrer"),1)],8,KK)])],32)])])):Jt("",!0),h.value?(Te(),Sa(sP,{key:3,title:"Supprimer le plan",message:"tes-vous sr de vouloir supprimer ce plan ? Cette action est irrversible.",onConfirm:X,onCancel:we})):Jt("",!0)])])}}});var oP={exports:{}};const JK=yE(nI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function R5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function td(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?R5(Object(n),!0).forEach(function(r){QK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):R5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?uv=function(e){return typeof e}:uv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uv(t)}function QK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xu(){return Xu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xu.apply(this,arguments)}function eZ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tZ(t,e){if(t==null)return{};var n=eZ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function nZ(t){return rZ(t)||iZ(t)||sZ(t)||oZ()}function rZ(t){if(Array.isArray(t))return Ob(t)}function iZ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sZ(t,e){if(t){if(typeof t=="string")return Ob(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ob(t,e)}}function Ob(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function oZ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var aZ="1.14.0";function Nd(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var jd=Nd(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Om=Nd(/Edge/i),F5=Nd(/firefox/i),Wg=Nd(/safari/i)&&!Nd(/chrome/i)&&!Nd(/android/i),aP=Nd(/iP(ad|od|hone)/i),lZ=Nd(/chrome/i)&&Nd(/android/i),lP={capture:!1,passive:!1};function Ti(t,e,n){t.addEventListener(e,n,!jd&&lP)}function xi(t,e,n){t.removeEventListener(e,n,!jd&&lP)}function Zv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function uZ(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function vc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Zv(t,e):Zv(t,e))||r&&t===n)return t;if(t===n)break}while(t=uZ(t))}return null}var j5=/\s+/g;function ho(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(j5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(j5," ")}}function pr(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function ff(t,e){var n="";if(typeof t=="string")n=t;else do{var r=pr(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function uP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function Ys(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,h,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,h=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,h=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!jd))do if(i&&i.getBoundingClientRect&&(pr(i,"transform")!=="none"||n&&pr(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(pr(i,"border-top-width")),a-=v.left+parseInt(pr(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var g=ff(i||t),x=g&&g.a,E=g&&g.d;g&&(o/=E,a/=x,p/=x,h/=E,l=o+h,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:h}}}function z5(t,e,n){for(var r=dh(t,!0),i=Ys(t)[e];r;){var s=Ys(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dh(r,!1)}return!1}function Ap(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Fr.ghost&&(r||o[s]!==Fr.dragged)&&vc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function V_(t,e){for(var n=t.lastElementChild;n&&(n===Fr.ghost||pr(n,"display")==="none"||e&&!Zv(n,e));)n=n.previousElementSibling;return n||null}function Mo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Fr.clone&&(!e||Zv(t,e))&&n++;return n}function $5(t){var e=0,n=0,r=Jc();if(t)do{var i=ff(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function cZ(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dh(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=pr(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function dZ(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function u2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Gg;function cP(t,e){return function(){if(!Gg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Gg=setTimeout(function(){Gg=void 0},e)}}}function hZ(){clearTimeout(Gg),Gg=void 0}function dP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function U_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function V5(t,e){pr(t,"position","absolute"),pr(t,"top",e.top),pr(t,"left",e.left),pr(t,"width",e.width),pr(t,"height",e.height)}function c2(t){pr(t,"position",""),pr(t,"top",""),pr(t,"left",""),pr(t,"width",""),pr(t,"height","")}var gl="Sortable"+new Date().getTime();function fZ(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(pr(i,"display")==="none"||i===Fr.ghost)){t.push({target:i,rect:Ys(i)});var s=td({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=ff(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(cZ(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,h=c.fromRect,p=Ys(c),v=c.prevFromRect,g=c.prevToRect,x=a.rect,E=ff(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&u2(v,p)&&!u2(h,p)&&(x.top-p.top)/(x.left-p.left)===(h.top-p.top)/(h.left-p.left)&&(l=gZ(x,v,g,i.options)),u2(p,h)||(c.prevFromRect=h,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){pr(r,"transition",""),pr(r,"transform","");var a=ff(this.el),l=a&&a.a,c=a&&a.d,h=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!h,r.animatingY=!!p,pr(r,"transform","translate3d("+h+"px,"+p+"px,0)"),this.forRepaintDummy=pZ(r),pr(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),pr(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){pr(r,"transition",""),pr(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function pZ(t){return t.offsetWidth}function gZ(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Kf=[],d2={initializeByDefault:!0},Nm={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Kf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Kf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Kf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](td({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](td({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Kf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Xu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Kf.forEach(function(i){typeof i.eventProperties=="function"&&Xu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Kf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function xg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,h=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,g=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[gl],!!e){var E,k=e.options,A="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!jd&&!Om?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=h,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=g?g.lastPutMode:void 0;var D=td(td({},x),Nm.getEventProperties(r,e));for(var z in D)E[z]=D[z];n&&n.dispatchEvent(E),k[A]&&k[A].call(e,E)}}var mZ=["evt"],ql=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=tZ(r,mZ);Nm.pluginEvent.bind(Fr)(e,n,td({dragEl:zn,parentEl:Co,ghostEl:ai,rootEl:qs,nextEl:Qh,lastDownEl:cv,cloneEl:Eo,cloneHidden:lh,dragStarted:Lg,putSortable:Ha,activeSortable:Fr.active,originalEvent:i,oldIndex:cp,oldDraggableIndex:qg,newIndex:_u,newDraggableIndex:ah,hideGhostForTarget:gP,unhideGhostForTarget:mP,cloneNowHidden:function(){lh=!0},cloneNowShown:function(){lh=!1},dispatchSortableEvent:function(a){Ml({sortable:n,name:a,originalEvent:i})}},s))};function Ml(t){xg(td({putSortable:Ha,cloneEl:Eo,targetEl:zn,rootEl:qs,oldIndex:cp,oldDraggableIndex:qg,newIndex:_u,newDraggableIndex:ah},t))}var zn,Co,ai,qs,Qh,cv,Eo,lh,cp,_u,qg,ah,C0,Ha,ap=!1,Xv=!1,Jv=[],Gh,hc,h2,f2,U5,H5,Lg,Zf,Yg,Kg=!1,E0=!1,dv,ul,p2=[],Nb=!1,Qv=[],Wy=typeof document<"u",P0=aP,W5=Om||jd?"cssFloat":"float",vZ=Wy&&!lZ&&!aP&&"draggable"in document.createElement("div"),hP=function(){if(Wy){if(jd)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),fP=function(e,n){var r=pr(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Ap(e,0,n),o=Ap(e,1,n),a=s&&pr(s),l=o&&pr(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ys(s).width,h=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ys(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[W5]==="none"||o&&r[W5]==="none"&&c+h>i)?"vertical":"horizontal"},yZ=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},bZ=function(e,n){var r;return Jv.some(function(i){var s=i[gl].options.emptyInsertThreshold;if(!(!s||V_(i))){var o=Ys(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},pP=function(e){function n(s,o){return function(a,l,c,h){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,h),o)(a,l,c,h);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||uv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},gP=function(){!hP&&ai&&pr(ai,"display","none")},mP=function(){!hP&&ai&&pr(ai,"display","")};Wy&&document.addEventListener("click",function(t){if(Xv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Xv=!1,!1},!0);var qh=function(e){if(zn){e=e.touches?e.touches[0]:e;var n=bZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[gl]._onDragOver(r)}}},_Z=function(e){zn&&zn.parentNode[gl]._isOutsideThisEl(e.target)};function Fr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Xu({},e),t[gl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return fP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Fr.supportPointer!==!1&&"PointerEvent"in window&&!Wg,emptyInsertThreshold:5};Nm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);pP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:vZ,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ti(t,"pointerdown",this._onTapStart):(Ti(t,"mousedown",this._onTapStart),Ti(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ti(t,"dragover",this),Ti(t,"dragenter",this)),Jv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Xu(this,fZ())}Fr.prototype={constructor:Fr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Zf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,zn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,h=i.filter;if(MZ(r),!zn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Wg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=vc(l,i.draggable,r,!1),!(l&&l.animated)&&cv!==l)){if(cp=Mo(l),qg=Mo(l,i.draggable),typeof h=="function"){if(h.call(this,e,l,this)){Ml({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),ql("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(h&&(h=h.split(",").some(function(p){if(p=vc(c,p.trim(),r,!1),p)return Ml({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),ql("filter",n,{evt:e}),!0}),h)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!vc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!zn&&r.parentNode===s){var c=Ys(r);if(qs=s,zn=r,Co=zn.parentNode,Qh=zn.nextSibling,cv=r,C0=o.group,Fr.dragged=zn,Gh={target:zn,clientX:(n||e).clientX,clientY:(n||e).clientY},U5=Gh.clientX-c.left,H5=Gh.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,zn.style["will-change"]="all",l=function(){if(ql("delayEnded",i,{evt:e}),Fr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!F5&&i.nativeDraggable&&(zn.draggable=!0),i._triggerDragStart(e,n),Ml({sortable:i,name:"choose",originalEvent:e}),ho(zn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(h){uP(zn,h.trim(),g2)}),Ti(a,"dragover",qh),Ti(a,"mousemove",qh),Ti(a,"touchmove",qh),Ti(a,"mouseup",i._onDrop),Ti(a,"touchend",i._onDrop),Ti(a,"touchcancel",i._onDrop),F5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,zn.draggable=!0),ql("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Om||jd))){if(Fr.eventCanceled){this._onDrop();return}Ti(a,"mouseup",i._disableDelayedDrag),Ti(a,"touchend",i._disableDelayedDrag),Ti(a,"touchcancel",i._disableDelayedDrag),Ti(a,"mousemove",i._delayedDragTouchMoveHandler),Ti(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ti(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){zn&&g2(zn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._disableDelayedDrag),xi(e,"touchend",this._disableDelayedDrag),xi(e,"touchcancel",this._disableDelayedDrag),xi(e,"mousemove",this._delayedDragTouchMoveHandler),xi(e,"touchmove",this._delayedDragTouchMoveHandler),xi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ti(document,"pointermove",this._onTouchMove):n?Ti(document,"touchmove",this._onTouchMove):Ti(document,"mousemove",this._onTouchMove):(Ti(zn,"dragend",this),Ti(qs,"dragstart",this._onDragStart));try{document.selection?hv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(ap=!1,qs&&zn){ql("dragStarted",this,{evt:n}),this.nativeDraggable&&Ti(document,"dragover",_Z);var r=this.options;!e&&ho(zn,r.dragClass,!1),ho(zn,r.ghostClass,!0),Fr.active=this,e&&this._appendGhost(),Ml({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(hc){this._lastX=hc.clientX,this._lastY=hc.clientY,gP();for(var e=document.elementFromPoint(hc.clientX,hc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(hc.clientX,hc.clientY),e!==n);)n=e;if(zn.parentNode[gl]._isOutsideThisEl(e),n)do{if(n[gl]){var r=void 0;if(r=n[gl]._onDragOver({clientX:hc.clientX,clientY:hc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);mP()}},_onTouchMove:function(e){if(Gh){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=ai&&ff(ai,!0),a=ai&&o&&o.a,l=ai&&o&&o.d,c=P0&&ul&&$5(ul),h=(s.clientX-Gh.clientX+i.x)/(a||1)+(c?c[0]-p2[0]:0)/(a||1),p=(s.clientY-Gh.clientY+i.y)/(l||1)+(c?c[1]-p2[1]:0)/(l||1);if(!Fr.active&&!ap){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(ai){o?(o.e+=h-(h2||0),o.f+=p-(f2||0)):o={a:1,b:0,c:0,d:1,e:h,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");pr(ai,"webkitTransform",v),pr(ai,"mozTransform",v),pr(ai,"msTransform",v),pr(ai,"transform",v),h2=h,f2=p,hc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ai){var e=this.options.fallbackOnBody?document.body:qs,n=Ys(zn,!0,P0,!0,e),r=this.options;if(P0){for(ul=e;pr(ul,"position")==="static"&&pr(ul,"transform")==="none"&&ul!==document;)ul=ul.parentNode;ul!==document.body&&ul!==document.documentElement?(ul===document&&(ul=Jc()),n.top+=ul.scrollTop,n.left+=ul.scrollLeft):ul=Jc(),p2=$5(ul)}ai=zn.cloneNode(!0),ho(ai,r.ghostClass,!1),ho(ai,r.fallbackClass,!0),ho(ai,r.dragClass,!0),pr(ai,"transition",""),pr(ai,"transform",""),pr(ai,"box-sizing","border-box"),pr(ai,"margin",0),pr(ai,"top",n.top),pr(ai,"left",n.left),pr(ai,"width",n.width),pr(ai,"height",n.height),pr(ai,"opacity","0.8"),pr(ai,"position",P0?"absolute":"fixed"),pr(ai,"zIndex","100000"),pr(ai,"pointerEvents","none"),Fr.ghost=ai,e.appendChild(ai),pr(ai,"transform-origin",U5/parseInt(ai.style.width)*100+"% "+H5/parseInt(ai.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(ql("dragStart",this,{evt:e}),Fr.eventCanceled){this._onDrop();return}ql("setupClone",this),Fr.eventCanceled||(Eo=U_(zn),Eo.draggable=!1,Eo.style["will-change"]="",this._hideClone(),ho(Eo,this.options.chosenClass,!1),Fr.clone=Eo),r.cloneId=hv(function(){ql("clone",r),!Fr.eventCanceled&&(r.options.removeCloneOnHide||qs.insertBefore(Eo,zn),r._hideClone(),Ml({sortable:r,name:"clone"}))}),!n&&ho(zn,s.dragClass,!0),n?(Xv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(xi(document,"mouseup",r._onDrop),xi(document,"touchend",r._onDrop),xi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,zn)),Ti(document,"drop",r),pr(zn,"transform","translateZ(0)")),ap=!0,r._dragStartId=hv(r._dragStarted.bind(r,n,e)),Ti(document,"selectstart",r),Lg=!0,Wg&&pr(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Fr.active,h=C0===l,p=a.sort,v=Ha||c,g,x=this,E=!1;if(Nb)return;function k(X,we){ql(X,x,td({evt:e,isOwner:h,axis:g?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(Ze,ie){return M0(qs,n,zn,i,Ze,Ys(Ze),e,ie)},changed:z},we))}function A(){k("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function D(X){return k("dragOverCompleted",{insertion:X}),X&&(h?c._hideClone():c._showClone(x),x!==v&&(ho(zn,Ha?Ha.options.ghostClass:c.options.ghostClass,!1),ho(zn,a.ghostClass,!0)),Ha!==x&&x!==Fr.active?Ha=x:x===Fr.active&&Ha&&(Ha=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){k("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===zn&&!zn.animated||r===n&&!r.animated)&&(Zf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(zn.parentNode[gl]._isOutsideThisEl(e.target),!X&&qh(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function z(){_u=Mo(zn),ah=Mo(zn,a.draggable),Ml({sortable:x,name:"change",toEl:n,newIndex:_u,newDraggableIndex:ah,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=vc(r,a.draggable,n,!0),k("dragOver"),Fr.eventCanceled)return E;if(zn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return D(!1);if(Xv=!1,c&&!a.disabled&&(h?p||(o=Co!==qs):Ha===this||(this.lastPutMode=C0.checkPull(this,c,zn,e))&&l.checkPut(this,c,zn,e))){if(g=this._getDirection(e,r)==="vertical",i=Ys(zn),k("dragOverValid"),Fr.eventCanceled)return E;if(o)return Co=qs,A(),this._hideClone(),k("revert"),Fr.eventCanceled||(Qh?qs.insertBefore(zn,Qh):qs.appendChild(zn)),D(!0);var Y=V_(n,a.draggable);if(!Y||SZ(e,g,this)&&!Y.animated){if(Y===zn)return D(!1);if(Y&&n===e.target&&(r=Y),r&&(s=Ys(r)),M0(qs,n,zn,i,r,s,e,!!r)!==!1)return A(),n.appendChild(zn),Co=n,z(),D(!0)}else if(Y&&LZ(e,g,this)){var te=Ap(n,0,a,!0);if(te===zn)return D(!1);if(r=te,s=Ys(r),M0(qs,n,zn,i,r,s,e,!1)!==!1)return A(),n.insertBefore(zn,te),Co=n,z(),D(!0)}else if(r.parentNode===n){s=Ys(r);var ge=0,pe,N=zn.parentNode!==n,j=!yZ(zn.animated&&zn.toRect||i,r.animated&&r.toRect||s,g),K=g?"top":"left",I=z5(r,"top","top")||z5(zn,"top","top"),R=I?I.scrollTop:void 0;Zf!==r&&(pe=s[K],Kg=!1,E0=!j&&a.invertSwap||N),ge=CZ(e,r,s,g,j?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,E0,Zf===r);var B;if(ge!==0){var $=Mo(zn);do $-=ge,B=Co.children[$];while(B&&(pr(B,"display")==="none"||B===ai))}if(ge===0||B===r)return D(!1);Zf=r,Yg=ge;var U=r.nextElementSibling,V=!1;V=ge===1;var ne=M0(qs,n,zn,i,r,s,e,V);if(ne!==!1)return(ne===1||ne===-1)&&(V=ne===1),Nb=!0,setTimeout(xZ,30),A(),V&&!U?n.appendChild(zn):r.parentNode.insertBefore(zn,V?U:r),I&&dP(I,0,R-I.scrollTop),Co=zn.parentNode,pe!==void 0&&!E0&&(dv=Math.abs(pe-Ys(r)[K])),z(),D(!0)}if(n.contains(zn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){xi(document,"mousemove",this._onTouchMove),xi(document,"touchmove",this._onTouchMove),xi(document,"pointermove",this._onTouchMove),xi(document,"dragover",qh),xi(document,"mousemove",qh),xi(document,"touchmove",qh)},_offUpEvents:function(){var e=this.el.ownerDocument;xi(e,"mouseup",this._onDrop),xi(e,"touchend",this._onDrop),xi(e,"pointerup",this._onDrop),xi(e,"touchcancel",this._onDrop),xi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(_u=Mo(zn),ah=Mo(zn,r.draggable),ql("drop",this,{evt:e}),Co=zn&&zn.parentNode,_u=Mo(zn),ah=Mo(zn,r.draggable),Fr.eventCanceled){this._nulling();return}ap=!1,E0=!1,Kg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ib(this.cloneId),Ib(this._dragStartId),this.nativeDraggable&&(xi(document,"drop",this),xi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wg&&pr(document.body,"user-select",""),pr(zn,"transform",""),e&&(Lg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),ai&&ai.parentNode&&ai.parentNode.removeChild(ai),(qs===Co||Ha&&Ha.lastPutMode!=="clone")&&Eo&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),zn&&(this.nativeDraggable&&xi(zn,"dragend",this),g2(zn),zn.style["will-change"]="",Lg&&!ap&&ho(zn,Ha?Ha.options.ghostClass:this.options.ghostClass,!1),ho(zn,this.options.chosenClass,!1),Ml({sortable:this,name:"unchoose",toEl:Co,newIndex:null,newDraggableIndex:null,originalEvent:e}),qs!==Co?(_u>=0&&(Ml({rootEl:Co,name:"add",toEl:Co,fromEl:qs,originalEvent:e}),Ml({sortable:this,name:"remove",toEl:Co,originalEvent:e}),Ml({rootEl:Co,name:"sort",toEl:Co,fromEl:qs,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Ha&&Ha.save()):_u!==cp&&_u>=0&&(Ml({sortable:this,name:"update",toEl:Co,originalEvent:e}),Ml({sortable:this,name:"sort",toEl:Co,originalEvent:e})),Fr.active&&((_u==null||_u===-1)&&(_u=cp,ah=qg),Ml({sortable:this,name:"end",toEl:Co,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){ql("nulling",this),qs=zn=Co=ai=Qh=Eo=cv=lh=Gh=hc=Lg=_u=ah=cp=qg=Zf=Yg=Ha=C0=Fr.dragged=Fr.ghost=Fr.clone=Fr.active=null,Qv.forEach(function(e){e.checked=!0}),Qv.length=h2=f2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":zn&&(this._onDragOver(e),wZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],vc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||PZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];vc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return vc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Nm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&pP(r)},destroy:function(){ql("destroy",this);var e=this.el;e[gl]=null,xi(e,"mousedown",this._onTapStart),xi(e,"touchstart",this._onTapStart),xi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(xi(e,"dragover",this),xi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Jv.splice(Jv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!lh){if(ql("hideClone",this),Fr.eventCanceled)return;pr(Eo,"display","none"),this.options.removeCloneOnHide&&Eo.parentNode&&Eo.parentNode.removeChild(Eo),lh=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(lh){if(ql("showClone",this),Fr.eventCanceled)return;zn.parentNode==qs&&!this.options.group.revertClone?qs.insertBefore(Eo,zn):Qh?qs.insertBefore(Eo,Qh):qs.appendChild(Eo),this.options.group.revertClone&&this.animate(zn,Eo),pr(Eo,"display",""),lh=!1}}};function wZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function M0(t,e,n,r,i,s,o,a){var l,c=t[gl],h=c.options.onMove,p;return window.CustomEvent&&!jd&&!Om?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Ys(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),h&&(p=h.call(c,l,o)),p}function g2(t){t.draggable=!1}function xZ(){Nb=!1}function LZ(t,e,n){var r=Ys(Ap(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function SZ(t,e,n){var r=Ys(V_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function CZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,h=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Kg&&(Yg===1?l>h+c*s/2:l<p-c*s/2)&&(Kg=!0),Kg)v=!0;else if(Yg===1?l<h+dv:l>p-dv)return-Yg}else if(l>h+c*(1-i)/2&&l<p-c*(1-i)/2)return EZ(e)}return v=v||o,v&&(l<h+c*s/2||l>p-c*s/2)?l>h+c/2?1:-1:0}function EZ(t){return Mo(zn)<Mo(t)?1:-1}function PZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function MZ(t){Qv.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Qv.push(r)}}function hv(t){return setTimeout(t,0)}function Ib(t){return clearTimeout(t)}Wy&&Ti(document,"touchmove",function(t){(Fr.active||ap)&&t.cancelable&&t.preventDefault()});Fr.utils={on:Ti,off:xi,css:pr,find:uP,is:function(e,n){return!!vc(e,n,e,!1)},extend:dZ,throttle:cP,closest:vc,toggleClass:ho,clone:U_,index:Mo,nextTick:hv,cancelNextTick:Ib,detectDirection:fP,getChild:Ap};Fr.get=function(t){return t[gl]};Fr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Fr.utils=td(td({},Fr.utils),r.utils)),Nm.mount(r)})};Fr.create=function(t,e){return new Fr(t,e)};Fr.version=aZ;var ra=[],Sg,Bb,Rb=!1,m2,v2,ey,Cg;function kZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ti(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ti(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ti(document,"touchmove",this._handleFallbackAutoScroll):Ti(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?xi(document,"dragover",this._handleAutoScroll):(xi(document,"pointermove",this._handleFallbackAutoScroll),xi(document,"touchmove",this._handleFallbackAutoScroll),xi(document,"mousemove",this._handleFallbackAutoScroll)),G5(),fv(),hZ()},nulling:function(){ey=Bb=Sg=Rb=Cg=m2=v2=null,ra.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ey=n,r||this.options.forceAutoScrollFallback||Om||jd||Wg){y2(n,this.options,a,r);var l=dh(a,!0);Rb&&(!Cg||s!==m2||o!==v2)&&(Cg&&G5(),Cg=setInterval(function(){var c=dh(document.elementFromPoint(s,o),!0);c!==l&&(l=c,fv()),y2(n,i.options,c,r)},10),m2=s,v2=o)}else{if(!this.options.bubbleScroll||dh(a,!0)===Jc()){fv();return}y2(n,this.options,dh(a,!1),!1)}}},Xu(t,{pluginName:"scroll",initializeByDefault:!0})}function fv(){ra.forEach(function(t){clearInterval(t.pid)}),ra=[]}function G5(){clearInterval(Cg)}var y2=cP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,h;Bb!==n&&(Bb=n,fv(),Sg=e.scroll,h=e.scrollFn,Sg===!0&&(Sg=dh(n,!0)));var p=0,v=Sg;do{var g=v,x=Ys(g),E=x.top,k=x.bottom,A=x.left,D=x.right,z=x.width,Y=x.height,te=void 0,ge=void 0,pe=g.scrollWidth,N=g.scrollHeight,j=pr(g),K=g.scrollLeft,I=g.scrollTop;g===l?(te=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"||j.overflowX==="visible"),ge=Y<N&&(j.overflowY==="auto"||j.overflowY==="scroll"||j.overflowY==="visible")):(te=z<pe&&(j.overflowX==="auto"||j.overflowX==="scroll"),ge=Y<N&&(j.overflowY==="auto"||j.overflowY==="scroll"));var R=te&&(Math.abs(D-i)<=o&&K+z<pe)-(Math.abs(A-i)<=o&&!!K),B=ge&&(Math.abs(k-s)<=o&&I+Y<N)-(Math.abs(E-s)<=o&&!!I);if(!ra[p])for(var $=0;$<=p;$++)ra[$]||(ra[$]={});(ra[p].vx!=R||ra[p].vy!=B||ra[p].el!==g)&&(ra[p].el=g,ra[p].vx=R,ra[p].vy=B,clearInterval(ra[p].pid),(R!=0||B!=0)&&(c=!0,ra[p].pid=setInterval((function(){r&&this.layer===0&&Fr.active._onTouchMove(ey);var U=ra[this.layer].vy?ra[this.layer].vy*a:0,V=ra[this.layer].vx?ra[this.layer].vx*a:0;typeof h=="function"&&h.call(Fr.dragged.parentNode[gl],V,U,t,ey,ra[this.layer].el)!=="continue"||dP(ra[this.layer].el,V,U)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dh(v,!1)));Rb=c}},30),vP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var h=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(h.clientX,h.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function H_(){}H_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Ap(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:vP};Xu(H_,{pluginName:"revertOnSpill"});function W_(){}W_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:vP};Xu(W_,{pluginName:"removeOnSpill"});var $u;function AZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;$u=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,h=this.options;if(i&&i!==c){var p=$u;s(i)!==!1?(ho(i,h.swapClass,!0),$u=i):$u=null,p&&p!==$u&&ho(p,h.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;$u&&ho($u,a.swapClass,!1),$u&&(a.swap||i&&i.options.swap)&&s!==$u&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),TZ(s,$u),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){$u=null}},Xu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:$u}}})}function TZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Mo(t),s=Mo(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Kr=[],bu=[],sg,fc,og=!1,Yl=!1,Xf=!1,Ps,ag,k0;function DZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Ti(document,"pointerup",this._deselectMultiDrag):(Ti(document,"mouseup",this._deselectMultiDrag),Ti(document,"touchend",this._deselectMultiDrag)),Ti(document,"keydown",this._checkKeyDown),Ti(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Kr.length&&fc===e?Kr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ps=r},delayEnded:function(){this.isMultiDrag=~Kr.indexOf(Ps)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Kr.length;s++)bu.push(U_(Kr[s])),bu[s].sortableIndex=Kr[s].sortableIndex,bu[s].draggable=!1,bu[s].style["will-change"]="",ho(bu[s],this.options.selectedClass,!1),Kr[s]===Ps&&ho(bu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Kr.length&&fc===r&&(q5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(q5(!1,i),bu.forEach(function(o){pr(o,"display","")}),r(),k0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(bu.forEach(function(o){pr(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),k0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&fc&&fc.multiDrag._deselectMultiDrag(),Kr.forEach(function(r){r.sortableIndex=Mo(r)}),Kr=Kr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Xf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Kr.forEach(function(o){o!==Ps&&pr(o,"position","absolute")});var s=Ys(Ps,!1,!0,!0);Kr.forEach(function(o){o!==Ps&&V5(o,s)}),Yl=!0,og=!0}i.animateAll(function(){Yl=!1,og=!1,r.options.animation&&Kr.forEach(function(o){c2(o)}),r.options.sort&&A0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;Yl&&~Kr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Kr.length>1&&(Kr.forEach(function(a){s.addAnimationState({target:a,rect:Yl?Ys(a):o}),c2(a),a.fromRect=o,r.removeAnimationState(a)}),Yl=!1,OZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),og=!1,c.animation&&Kr.length>1&&(Yl||!i&&!o.options.sort&&!l)){var h=Ys(Ps,!1,!0,!0);Kr.forEach(function(v){v!==Ps&&(V5(v,h),a.appendChild(v))}),Yl=!0}if(!i)if(Yl||A0(),Kr.length>1){var p=k0;o._showClone(r),o.options.animation&&!k0&&p&&bu.forEach(function(v){o.addAnimationState({target:v,rect:ag}),v.fromRect=ag,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Kr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){ag=Xu({},r);var o=ff(Ps,!0);ag.top-=o.f,ag.left-=o.e}},dragOverAnimationComplete:function(){Yl&&(Yl=!1,A0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,h=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Xf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),ho(Ps,p.selectedClass,!~Kr.indexOf(Ps)),~Kr.indexOf(Ps))Kr.splice(Kr.indexOf(Ps),1),sg=null,xg({sortable:o,rootEl:i,name:"deselect",targetEl:Ps});else{if(Kr.push(Ps),xg({sortable:o,rootEl:i,name:"select",targetEl:Ps}),r.shiftKey&&sg&&o.el.contains(sg)){var g=Mo(sg),x=Mo(Ps);if(~g&&~x&&g!==x){var E,k;for(x>g?(k=g,E=x):(k=x,E=g+1);k<E;k++)~Kr.indexOf(v[k])||(ho(v[k],p.selectedClass,!0),Kr.push(v[k]),xg({sortable:o,rootEl:i,name:"select",targetEl:v[k]}))}}else sg=Ps;fc=h}if(Xf&&this.isMultiDrag){if(Yl=!1,(s[gl].options.sort||s!==i)&&Kr.length>1){var A=Ys(Ps),D=Mo(Ps,":not(."+this.options.selectedClass+")");if(!og&&p.animation&&(Ps.thisAnimationDuration=null),h.captureAnimationState(),!og&&(p.animation&&(Ps.fromRect=A,Kr.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==Ps){var te=Yl?Ys(Y):A;Y.fromRect=te,h.addAnimationState({target:Y,rect:te})}})),A0(),Kr.forEach(function(Y){v[D]?s.insertBefore(Y,v[D]):s.appendChild(Y),D++}),l===Mo(Ps))){var z=!1;Kr.forEach(function(Y){if(Y.sortableIndex!==Mo(Y)){z=!0;return}}),z&&a("update")}Kr.forEach(function(Y){c2(Y)}),h.animateAll()}fc=h}(i===s||c&&c.lastPutMode!=="clone")&&bu.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Xf=!1,bu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),xi(document,"pointerup",this._deselectMultiDrag),xi(document,"mouseup",this._deselectMultiDrag),xi(document,"touchend",this._deselectMultiDrag),xi(document,"keydown",this._checkKeyDown),xi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Xf<"u"&&Xf)&&fc===this.sortable&&!(n&&vc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Kr.length;){var r=Kr[0];ho(r,this.options.selectedClass,!1),Kr.shift(),xg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Xu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[gl];!r||!r.options.multiDrag||~Kr.indexOf(n)||(fc&&fc!==r&&(fc.multiDrag._deselectMultiDrag(),fc=r),ho(n,r.options.selectedClass,!0),Kr.push(n))},deselect:function(n){var r=n.parentNode[gl],i=Kr.indexOf(n);!r||!r.options.multiDrag||!~i||(ho(n,r.options.selectedClass,!1),Kr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Kr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;Yl&&s!==Ps?o=-1:Yl?o=Mo(s,":not(."+n.options.selectedClass+")"):o=Mo(s),i.push({multiDragElement:s,index:o})}),{items:nZ(Kr),clones:[].concat(bu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function OZ(t,e){Kr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function q5(t,e){bu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function A0(){Kr.forEach(function(t){t!==Ps&&t.parentNode&&t.parentNode.removeChild(t)})}Fr.mount(new kZ);Fr.mount(W_,H_);const NZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:DZ,Sortable:Fr,Swap:AZ,default:Fr},Symbol.toStringTag,{value:"Module"})),IZ=yE(NZ);(function(t,e){(function(r,i){t.exports=i(JK,IZ)})(typeof self<"u"?self:Ea,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var h in a)o.d(c,h,(function(p){return a[p]}).bind(null,h));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,h){if(a(l),c===void 0)return l;switch(h){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,g){return l.call(c,p,v,g)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,h=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return h.slice()}};i.exports.f=function(g){return h&&c.call(g)=="[object Window]"?p(g):l(a(g))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),h=o("fc6a"),p=o("c04e"),v=o("5135"),g=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(k,A){if(k=h(k),A=p(A,!0),g)try{return x(k,A)}catch{}if(v(k,A))return c(!l.f.call(k,A),k[A])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),h=o("ae40"),p=c("reduce"),v=h("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,h){var p=c.exec;if(typeof p=="function"){var v=p.call(c,h);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,h)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),h=o("9112");for(var p in l){var v=a[p],g=v&&v.prototype;if(g&&g.forEach!==c)try{h(g,"forEach",c)}catch{g.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),h=l("forEach"),p=c("forEach");i.exports=!h||!p?function(g){return a(this,g,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var h=0,p={next:function(){return{done:!!h++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,g){if(!g&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),h=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],g=v.constructor={};return g[h]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(h,p){var v=a(h);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),h=o("6eeb"),p=o("ce4e"),v=o("e893"),g=o("94ca");i.exports=function(x,E){var k=x.target,A=x.global,D=x.stat,z,Y,te,ge,pe,N;if(A?Y=a:D?Y=a[k]||p(k,{}):Y=(a[k]||{}).prototype,Y)for(te in E){if(pe=E[te],x.noTargetGet?(N=l(Y,te),ge=N&&N.value):ge=Y[te],z=g(A?te:k+(D?".":"#")+te,x.forced),!z&&ge!==void 0){if(typeof pe==typeof ge)continue;v(pe,ge)}(x.sham||ge&&ge.sham)&&c(pe,"sham",!0),h(Y,te,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),h=o("ad6d"),p="toString",v=RegExp.prototype,g=v[p],x=c(function(){return g.call({source:"a",flags:"b"})!="/a/b"}),E=g.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var A=l(this),D=String(A.source),z=A.flags,Y=String(z===void 0&&A instanceof RegExp&&!("flags"in v)?h.call(A):z);return"/"+D+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),h=o("5a34"),p=o("1d80"),v=o("ab13"),g=o("c430"),x="".startsWith,E=Math.min,k=v("startsWith"),A=!g&&!k&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!A&&!k},{startsWith:function(z){var Y=String(p(this));h(z);var te=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),ge=String(z);return x?x.call(Y,ge,te):Y.slice(te,te+ge.length)===ge}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,h=c&&c.versions,p=h&&h.v8,v,g;p?(v=p.split("."),g=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(g=v[1]))),i.exports=g&&+g},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),h=c("iterator");i.exports=function(p){if(p!=null)return p[h]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),h=o("df75");i.exports=a?Object.defineProperties:function(v,g){c(v);for(var x=h(g),E=x.length,k=0,A;E>k;)l.f(v,A=x[k++],g[A]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),h="String Iterator",p=l.set,v=l.getterFor(h);c(String,"String",function(g){p(this,{type:h,string:String(g),index:0})},function(){var x=v(this),E=x.string,k=x.index,A;return k>=E.length?{value:void 0,done:!0}:(A=a(E,k),x.index+=A.length,{value:A,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(h){return l(h)=="String"?c.call(h,""):Object(h)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),h=a("unscopables"),p=Array.prototype;p[h]==null&&c.f(p,h,{configurable:!0,value:l(null)}),i.exports=function(v){p[h][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),h=c("match");i.exports=function(p){var v;return a(p)&&((v=p[h])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),h=function(p){return function(v,g,x){var E=a(v),k=l(E.length),A=c(x,k),D;if(p&&g!=g){for(;k>A;)if(D=E[A++],D!=D)return!0}else for(;k>A;A++)if((p||A in E)&&E[A]===g)return p||A||0;return!p&&-1}};i.exports={includes:h(!0),indexOf:h(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),h=o("ae40"),p=c("filter"),v=h("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),h=o("e95a"),p=o("50c4"),v=o("8418"),g=o("35a1");i.exports=function(E){var k=l(E),A=typeof this=="function"?this:Array,D=arguments.length,z=D>1?arguments[1]:void 0,Y=z!==void 0,te=g(k),ge=0,pe,N,j,K,I,R;if(Y&&(z=a(z,D>2?arguments[2]:void 0,2)),te!=null&&!(A==Array&&h(te)))for(K=te.call(k),I=K.next,N=new A;!(j=I.call(K)).done;ge++)R=Y?c(K,z,[j.value,ge],!0):j.value,v(N,ge,R);else for(pe=p(k.length),N=new A(pe);pe>ge;ge++)R=Y?z(k[ge],ge):k[ge],v(N,ge,R);return N.length=ge,N}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(h){return l(h)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),h=o("50c4"),p=o("a691"),v=o("1d80"),g=o("8aa5"),x=o("14c3"),E=Math.max,k=Math.min,A=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,z=/\$([$&'`]|\d\d?)/g,Y=function(te){return te===void 0?te:String(te)};a("replace",2,function(te,ge,pe,N){var j=N.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,K=N.REPLACE_KEEPS_$0,I=j?"$":"$0";return[function($,U){var V=v(this),ne=$==null?void 0:$[te];return ne!==void 0?ne.call($,V,U):ge.call(String(V),$,U)},function(B,$){if(!j&&K||typeof $=="string"&&$.indexOf(I)===-1){var U=pe(ge,B,this,$);if(U.done)return U.value}var V=l(B),ne=String(this),X=typeof $=="function";X||($=String($));var we=V.global;if(we){var ve=V.unicode;V.lastIndex=0}for(var Ze=[];;){var ie=x(V,ne);if(ie===null||(Ze.push(ie),!we))break;var H=String(ie[0]);H===""&&(V.lastIndex=g(ne,h(V.lastIndex),ve))}for(var Z="",me=0,fe=0;fe<Ze.length;fe++){ie=Ze[fe];for(var de=String(ie[0]),ce=E(k(p(ie.index),ne.length),0),J=[],Re=1;Re<ie.length;Re++)J.push(Y(ie[Re]));var De=ie.groups;if(X){var et=[de].concat(J,ce,ne);De!==void 0&&et.push(De);var he=String($.apply(void 0,et))}else he=R(de,ne,ce,J,De,$);ce>=me&&(Z+=ne.slice(me,ce)+he,me=ce+de.length)}return Z+ne.slice(me)}];function R(B,$,U,V,ne,X){var we=U+B.length,ve=V.length,Ze=z;return ne!==void 0&&(ne=c(ne),Ze=D),ge.call(X,Ze,function(ie,H){var Z;switch(H.charAt(0)){case"$":return"$";case"&":return B;case"`":return $.slice(0,U);case"'":return $.slice(we);case"<":Z=ne[H.slice(1,-1)];break;default:var me=+H;if(me===0)return ie;if(me>ve){var fe=A(me/10);return fe===0?ie:fe<=ve?V[fe-1]===void 0?H.charAt(1):V[fe-1]+H.charAt(1):ie}Z=V[me-1]}return Z===void 0?"":Z})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,h){return l[c]||(l[c]=h!==void 0?h:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:" 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),h=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var g=l.f(h(v)),x=c.f;return x?g.concat(x(v)):g}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),h=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),k=h(E.length),A;return p(x),A=v(E,0),A.length=l(A,E,E,k,0,1,x,arguments.length>1?arguments[1]:void 0),A}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(h){return function(p,v){var g=String(l(p)),x=a(v),E=g.length,k,A;return x<0||x>=E?h?"":void 0:(k=g.charCodeAt(x),k<55296||k>56319||x+1===E||(A=g.charCodeAt(x+1))<56320||A>57343?h?g.charAt(x):k:h?g.slice(x,x+2):(k-55296<<10)+(A-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),h=c("species");i.exports=function(p,v){var g;return l(p)&&(g=p.constructor,typeof g=="function"&&(g===Array||l(g.prototype))?g=void 0:a(g)&&(g=g[h],g===null&&(g=void 0))),new(g===void 0?Array:g)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),h=o("9112"),p=o("5135"),v=o("f772"),g=o("d012"),x=l.WeakMap,E,k,A,D=function(j){return A(j)?k(j):E(j,{})},z=function(j){return function(K){var I;if(!c(K)||(I=k(K)).type!==j)throw TypeError("Incompatible receiver, "+j+" required");return I}};if(a){var Y=new x,te=Y.get,ge=Y.has,pe=Y.set;E=function(j,K){return pe.call(Y,j,K),K},k=function(j){return te.call(Y,j)||{}},A=function(j){return ge.call(Y,j)}}else{var N=v("state");g[N]=!0,E=function(j,K){return h(j,N,K),K},k=function(j){return p(j,N)?j[N]:{}},A=function(j){return p(j,N)}}i.exports={set:E,get:k,has:A,enforce:D,getterFor:z}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),h=o("ce4e"),p=o("8925"),v=o("69f3"),g=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(k,A,D,z){var Y=z?!!z.unsafe:!1,te=z?!!z.enumerable:!1,ge=z?!!z.noTargetGet:!1;if(typeof D=="function"&&(typeof A=="string"&&!c(D,"name")&&l(D,"name",A),x(D).source=E.join(typeof A=="string"?A:"")),k===a){te?k[A]=D:h(A,D);return}else Y?!ge&&k[A]&&(te=!0):delete k[A];te?k[A]=D:l(k,A,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&g(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),h=o("d1e7").f,p=function(v){return function(g){for(var x=c(g),E=l(x),k=E.length,A=0,D=[],z;k>A;)z=E[A++],(!a||h.call(x,z))&&D.push(v?[z,x[z]]:x[z]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),h=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||h(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),h=o("d012"),p=o("1be4"),v=o("cc12"),g=o("f772"),x=">",E="<",k="prototype",A="script",D=g("IE_PROTO"),z=function(){},Y=function(j){return E+A+x+j+E+"/"+A+x},te=function(j){j.write(Y("")),j.close();var K=j.parentWindow.Object;return j=null,K},ge=function(){var j=v("iframe"),K="java"+A+":",I;return j.style.display="none",p.appendChild(j),j.src=String(K),I=j.contentWindow.document,I.open(),I.write(Y("document.F=Object")),I.close(),I.F},pe,N=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}N=pe?te(pe):ge();for(var j=c.length;j--;)delete N[k][c[j]];return N()};h[D]=!0,i.exports=Object.create||function(K,I){var R;return K!==null?(z[k]=a(K),R=new z,z[k]=null,R[D]=K):R=N(),I===void 0?R:l(R,I)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),h=o("d2bb"),p=o("d44e"),v=o("9112"),g=o("6eeb"),x=o("b622"),E=o("c430"),k=o("3f8c"),A=o("ae93"),D=A.IteratorPrototype,z=A.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),te="keys",ge="values",pe="entries",N=function(){return this};i.exports=function(j,K,I,R,B,$,U){l(I,K,R);var V=function(fe){if(fe===B&&Ze)return Ze;if(!z&&fe in we)return we[fe];switch(fe){case te:return function(){return new I(this,fe)};case ge:return function(){return new I(this,fe)};case pe:return function(){return new I(this,fe)}}return function(){return new I(this)}},ne=K+" Iterator",X=!1,we=j.prototype,ve=we[Y]||we["@@iterator"]||B&&we[B],Ze=!z&&ve||V(B),ie=K=="Array"&&we.entries||ve,H,Z,me;if(ie&&(H=c(ie.call(new j)),D!==Object.prototype&&H.next&&(!E&&c(H)!==D&&(h?h(H,D):typeof H[Y]!="function"&&v(H,Y,N)),p(H,ne,!0,!0),E&&(k[ne]=N))),B==ge&&ve&&ve.name!==ge&&(X=!0,Ze=function(){return ve.call(this)}),(!E||U)&&we[Y]!==Ze&&v(we,Y,Ze),k[K]=Ze,B)if(Z={values:V(ge),keys:$?Ze:V(te),entries:V(pe)},U)for(me in Z)(z||X||!(me in we))&&g(we,me,Z[me]);else a({target:K,proto:!0,forced:z||X},Z);return Z}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(h,p,v){var g=a(p);g in h?l.f(h,g,c(0,v)):h[g]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(h,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function h(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==h&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,g=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||g.exec(pe.stack),E=x&&x[1]||!1,k=x&&x[2]||!1,A=document.location.href.replace(document.location.hash,""),D,z,Y,te=document.getElementsByTagName("script");E===A&&(D=document.documentElement.outerHTML,z=new RegExp("(?:[^\\n]+?\\n){0,"+(k-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=D.replace(z,"$1").trim());for(var ge=0;ge<te.length;ge++)if(te[ge].readyState==="interactive"||te[ge].src===E||E===A&&te[ge].innerHTML&&te[ge].innerHTML.trim()===Y)return te[ge];return null}}return h})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,h){return c+(h?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(h,p,v){return l.f(h,p,c(1,v))}:function(h,p,v){return h[p]=v,h}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,h=String.prototype.replace,p=c,v=function(){var k=/a/,A=/b*/g;return c.call(k,"a"),c.call(A,"a"),k.lastIndex!==0||A.lastIndex!==0}(),g=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||g;E&&(p=function(A){var D=this,z,Y,te,ge,pe=g&&D.sticky,N=a.call(D),j=D.source,K=0,I=A;return pe&&(N=N.replace("y",""),N.indexOf("g")===-1&&(N+="g"),I=String(A).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&A[D.lastIndex-1]!==`
`)&&(j="(?: "+j+")",I=" "+I,K++),Y=new RegExp("^(?:"+j+")",N)),x&&(Y=new RegExp("^"+j+"$(?!\\s)",N)),v&&(z=D.lastIndex),te=c.call(pe?Y:D,I),pe?te?(te.input=te.input.slice(K),te[0]=te[0].slice(K),te.index=D.lastIndex,D.lastIndex+=te[0].length):D.lastIndex=0:v&&te&&(D.lastIndex=D.global?te.index+te[0].length:z),x&&te&&te.length>1&&h.call(te[0],Y,function(){for(ge=1;ge<arguments.length-2;ge++)arguments[ge]===void 0&&(te[ge]=void 0)}),te}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var k=p[h(x)];return k==g?!0:k==v?!1:typeof E=="function"?a(E):!!E},h=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",g=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),h=o("861d"),p=o("7b0b"),v=o("50c4"),g=o("8418"),x=o("65f0"),E=o("1dde"),k=o("b622"),A=o("2d00"),D=k("isConcatSpreadable"),z=9007199254740991,Y="Maximum allowed index exceeded",te=A>=51||!l(function(){var j=[];return j[D]=!1,j.concat()[0]!==j}),ge=E("concat"),pe=function(j){if(!h(j))return!1;var K=j[D];return K!==void 0?!!K:c(j)},N=!te||!ge;a({target:"Array",proto:!0,forced:N},{concat:function(K){var I=p(this),R=x(I,0),B=0,$,U,V,ne,X;for($=-1,V=arguments.length;$<V;$++)if(X=$===-1?I:arguments[$],pe(X)){if(ne=v(X.length),B+ne>z)throw TypeError(Y);for(U=0;U<ne;U++,B++)U in X&&g(R,B,X[U])}else{if(B>=z)throw TypeError(Y);g(R,B++,X)}return R.length=B,R}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,h,p){try{return p?c(a(h)[0],h[1]):c(h)}catch(g){var v=l.return;throw v!==void 0&&a(v.call(l)),g}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),h=o("c04e"),p=Object.defineProperty;s.f=a?p:function(g,x,E){if(c(g),x=h(x,!0),c(E),l)try{return p(g,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(g[x]=E.value),g}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),h=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(g,x,E){var k=x+" Iterator";return g.prototype=l(a,{next:c(1,E)}),h(g,k,!1,!0),p[k]=v,g}},"9f7f":function(i,s,o){var a=o("d039");function l(c,h){return RegExp(c,h)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),h=function(p,v,g,x,E,k,A,D){for(var z=E,Y=0,te=A?c(A,D,3):!1,ge;Y<x;){if(Y in g){if(ge=te?te(g[Y],Y,v):g[Y],k>0&&a(ge))z=h(p,v,ge,l(ge.length),z,k-1)-1;else{if(z>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[z]=ge}z++}Y++}return z};i.exports=h},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),h=o("50c4"),p=o("7b0b"),v=o("65f0"),g=o("8418"),x=o("1dde"),E=o("ae40"),k=x("splice"),A=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,z=Math.min,Y=9007199254740991,te="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!k||!A},{splice:function(pe,N){var j=p(this),K=h(j.length),I=l(pe,K),R=arguments.length,B,$,U,V,ne,X;if(R===0?B=$=0:R===1?(B=0,$=K-I):(B=R-2,$=z(D(c(N),0),K-I)),K+B-$>Y)throw TypeError(te);for(U=v(j,$),V=0;V<$;V++)ne=I+V,ne in j&&g(U,V,j[ne]);if(U.length=$,B<$){for(V=I;V<K-$;V++)ne=V+$,X=V+B,ne in j?j[X]=j[ne]:delete j[X];for(V=K;V>K-$+B;V--)delete j[V-1]}else if(B>$)for(V=K-$;V>I;V--)ne=V+$-1,X=V+B-1,ne in j?j[X]=j[ne]:delete j[X];for(V=0;V<B;V++)j[V+I]=arguments[V+2];return j.length=K-$+B,U}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),h=o("c430"),p=o("83ab"),v=o("4930"),g=o("fdbf"),x=o("d039"),E=o("5135"),k=o("e8b5"),A=o("861d"),D=o("825a"),z=o("7b0b"),Y=o("fc6a"),te=o("c04e"),ge=o("5c6c"),pe=o("7c73"),N=o("df75"),j=o("241c"),K=o("057f"),I=o("7418"),R=o("06cf"),B=o("9bf2"),$=o("d1e7"),U=o("9112"),V=o("6eeb"),ne=o("5692"),X=o("f772"),we=o("d012"),ve=o("90e3"),Ze=o("b622"),ie=o("e538"),H=o("746f"),Z=o("d44e"),me=o("69f3"),fe=o("b727").forEach,de=X("hidden"),ce="Symbol",J="prototype",Re=Ze("toPrimitive"),De=me.set,et=me.getterFor(ce),he=Object[J],Q=l.Symbol,se=c("JSON","stringify"),ue=R.f,ze=B.f,Ce=K.f,ye=$.f,Ve=ne("symbols"),Ye=ne("op-symbols"),Ke=ne("string-to-symbol-registry"),_t=ne("symbol-to-string-registry"),Ge=ne("wks"),ft=l.QObject,Ut=!ft||!ft[J]||!ft[J].findChild,tn=p&&x(function(){return pe(ze({},"a",{get:function(){return ze(this,"a",{value:7}).a}})).a!=7})?function(Qt,xn,Cn){var er=ue(he,xn);er&&delete he[xn],ze(Qt,xn,Cn),er&&Qt!==he&&ze(he,xn,er)}:ze,yn=function(Qt,xn){var Cn=Ve[Qt]=pe(Q[J]);return De(Cn,{type:ce,tag:Qt,description:xn}),p||(Cn.description=xn),Cn},Qe=g?function(Qt){return typeof Qt=="symbol"}:function(Qt){return Object(Qt)instanceof Q},at=function(xn,Cn,er){xn===he&&at(Ye,Cn,er),D(xn);var vr=te(Cn,!0);return D(er),E(Ve,vr)?(er.enumerable?(E(xn,de)&&xn[de][vr]&&(xn[de][vr]=!1),er=pe(er,{enumerable:ge(0,!1)})):(E(xn,de)||ze(xn,de,ge(1,{})),xn[de][vr]=!0),tn(xn,vr,er)):ze(xn,vr,er)},it=function(xn,Cn){D(xn);var er=Y(Cn),vr=N(er).concat(Tn(er));return fe(vr,function(xr){(!p||Zt.call(er,xr))&&at(xn,xr,er[xr])}),xn},$t=function(xn,Cn){return Cn===void 0?pe(xn):it(pe(xn),Cn)},Zt=function(xn){var Cn=te(xn,!0),er=ye.call(this,Cn);return this===he&&E(Ve,Cn)&&!E(Ye,Cn)?!1:er||!E(this,Cn)||!E(Ve,Cn)||E(this,de)&&this[de][Cn]?er:!0},On=function(xn,Cn){var er=Y(xn),vr=te(Cn,!0);if(!(er===he&&E(Ve,vr)&&!E(Ye,vr))){var xr=ue(er,vr);return xr&&E(Ve,vr)&&!(E(er,de)&&er[de][vr])&&(xr.enumerable=!0),xr}},mn=function(xn){var Cn=Ce(Y(xn)),er=[];return fe(Cn,function(vr){!E(Ve,vr)&&!E(we,vr)&&er.push(vr)}),er},Tn=function(xn){var Cn=xn===he,er=Ce(Cn?Ye:Y(xn)),vr=[];return fe(er,function(xr){E(Ve,xr)&&(!Cn||E(he,xr))&&vr.push(Ve[xr])}),vr};if(v||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var xn=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Cn=ve(xn),er=function(vr){this===he&&er.call(Ye,vr),E(this,de)&&E(this[de],Cn)&&(this[de][Cn]=!1),tn(this,Cn,ge(1,vr))};return p&&Ut&&tn(he,Cn,{configurable:!0,set:er}),yn(Cn,xn)},V(Q[J],"toString",function(){return et(this).tag}),V(Q,"withoutSetter",function(Qt){return yn(ve(Qt),Qt)}),$.f=Zt,B.f=at,R.f=On,j.f=K.f=mn,I.f=Tn,ie.f=function(Qt){return yn(Ze(Qt),Qt)},p&&(ze(Q[J],"description",{configurable:!0,get:function(){return et(this).description}}),h||V(he,"propertyIsEnumerable",Zt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Q}),fe(N(Ge),function(Qt){H(Qt)}),a({target:ce,stat:!0,forced:!v},{for:function(Qt){var xn=String(Qt);if(E(Ke,xn))return Ke[xn];var Cn=Q(xn);return Ke[xn]=Cn,_t[Cn]=xn,Cn},keyFor:function(xn){if(!Qe(xn))throw TypeError(xn+" is not a symbol");if(E(_t,xn))return _t[xn]},useSetter:function(){Ut=!0},useSimple:function(){Ut=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:$t,defineProperty:at,defineProperties:it,getOwnPropertyDescriptor:On}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:mn,getOwnPropertySymbols:Tn}),a({target:"Object",stat:!0,forced:x(function(){I.f(1)})},{getOwnPropertySymbols:function(xn){return I.f(z(xn))}}),se){var Qn=!v||x(function(){var Qt=Q();return se([Qt])!="[null]"||se({a:Qt})!="{}"||se(Object(Qt))!="{}"});a({target:"JSON",stat:!0,forced:Qn},{stringify:function(xn,Cn,er){for(var vr=[xn],xr=1,ur;arguments.length>xr;)vr.push(arguments[xr++]);if(ur=Cn,!(!A(Cn)&&xn===void 0||Qe(xn)))return k(Cn)||(Cn=function(qr,Fs){if(typeof ur=="function"&&(Fs=ur.call(this,qr,Fs)),!Qe(Fs))return Fs}),vr[1]=Cn,se.apply(null,vr)}})}Q[J][Re]||U(Q[J],Re,Q[J].valueOf),Z(Q,ce),we[de]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),h=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:h},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var h=[][l];return!!h&&a(function(){h.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var h=/./;try{"/./"[c](h)}catch{try{return h[l]=!1,"/./"[c](h)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),h=Object.defineProperty,p={},v=function(g){throw g};i.exports=function(g,x){if(c(p,g))return p[g];x||(x={});var E=[][g],k=c(x,"ACCESSORS")?x.ACCESSORS:!1,A=c(x,0)?x[0]:v,D=c(x,1)?x[1]:void 0;return p[g]=!!E&&!l(function(){if(k&&!a)return!0;var z={length:-1};k?h(z,1,{enumerable:!0,get:v}):z[1]=1,E.call(z,A,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),h=o("b622"),p=o("c430"),v=h("iterator"),g=!1,x=function(){return this},E,k,A;[].keys&&(A=[].keys(),"next"in A?(k=a(a(A)),k!==Object.prototype&&(E=k)):g=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:g}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,h=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return h.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),h=o("90e3"),p=o("4930"),v=o("fdbf"),g=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||h;i.exports=function(k){return c(g,k)||(p&&c(x,k)?g[k]=x[k]:g[k]=E("Symbol."+k)),g[k]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),h=o("d039"),p=h(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(g){return c(l(g))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),h=o("50c4"),p=o("65f0"),v=[].push,g=function(x){var E=x==1,k=x==2,A=x==3,D=x==4,z=x==6,Y=x==5||z;return function(te,ge,pe,N){for(var j=c(te),K=l(j),I=a(ge,pe,3),R=h(K.length),B=0,$=N||p,U=E?$(te,R):k?$(te,0):void 0,V,ne;R>B;B++)if((Y||B in K)&&(V=K[B],ne=I(V,B,j),x)){if(E)U[B]=ne;else if(ne)switch(x){case 3:return!0;case 5:return V;case 6:return B;case 2:v.call(U,V)}else if(D)return!1}return z?-1:A||D?D:U}};i.exports={forEach:g(0),map:g(1),filter:g(2),some:g(3),every:g(4),find:g(5),findIndex:g(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var h,p;if(c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l))||typeof(h=l.valueOf)=="function"&&!a(p=h.call(l))||!c&&typeof(h=l.toString)=="function"&&!a(p=h.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",h=a[c]||l(c,{});i.exports=h},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),h=o("ae40"),p="findIndex",v=!0,g=h(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!g},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),h=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,g=c("indexOf"),x=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!g||!x},{indexOf:function(k){return v?p.apply(this,arguments)||0:l(this,k,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,h=o("d012");i.exports=function(p,v){var g=l(p),x=0,E=[],k;for(k in g)!a(h,k)&&a(g,k)&&E.push(k);for(;v.length>x;)a(g,k=v[x++])&&(~c(E,k)||E.push(k));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),h=o("ae40"),p=h("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(g){return l(this,g,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,h=l(c)&&l(c.createElement);i.exports=function(p){return h?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,h){try{l(a,c,h)}catch{a[c]=h}return h}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(h){return typeof h=="function"?h:void 0};i.exports=function(h,p){return arguments.length<2?c(a[h])||c(l[h]):a[h]&&a[h][p]||l[h]&&l[h][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,h={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(h,[]),c=h instanceof Array}catch{}return function(g,x){return a(g),l(x),c?p.call(g,x):g.__proto__=x,g}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),h=c("toStringTag");i.exports=function(p,v,g){p&&!l(p=g?p:p.prototype,h)&&a(p,h,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),h=o("50c4"),p=function(v){return function(g,x,E,k){a(x);var A=l(g),D=c(A),z=h(A.length),Y=v?z-1:0,te=v?-1:1;if(E<2)for(;;){if(Y in D){k=D[Y],Y+=te;break}if(Y+=te,v?Y<0:z<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:z>Y;Y+=te)Y in D&&(k=x(k,D[Y],Y,A));return k}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),h=o("9263"),p=o("9112"),v=c("species"),g=!l(function(){var D=/./;return D.exec=function(){var z=[];return z.groups={a:"7"},z},"".replace(D,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),k=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),A=!l(function(){var D=/(?:)/,z=D.exec;D.exec=function(){return z.apply(this,arguments)};var Y="ab".split(D);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(D,z,Y,te){var ge=c(D),pe=!l(function(){var B={};return B[ge]=function(){return 7},""[D](B)!=7}),N=pe&&!l(function(){var B=!1,$=/a/;return D==="split"&&($={},$.constructor={},$.constructor[v]=function(){return $},$.flags="",$[ge]=/./[ge]),$.exec=function(){return B=!0,null},$[ge](""),!B});if(!pe||!N||D==="replace"&&!(g&&x&&!k)||D==="split"&&!A){var j=/./[ge],K=Y(ge,""[D],function(B,$,U,V,ne){return $.exec===h?pe&&!ne?{done:!0,value:j.call($,U,V)}:{done:!0,value:B.call(U,$,V)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:k}),I=K[0],R=K[1];a(String.prototype,D,I),a(RegExp.prototype,ge,z==2?function(B,$){return R.call(B,this,$)}:function(B){return R.call(B,this)})}te&&p(RegExp.prototype[ge],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),h=o("ae40"),p=c("map"),v=h("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),h=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=h(x),k=p.f,A=c(E),D={},z=0,Y,te;A.length>z;)te=k(E,Y=A[z++]),te!==void 0&&v(D,Y,te);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),h=o("9112"),p=o("b622"),v=p("iterator"),g=p("toStringTag"),x=c.values;for(var E in l){var k=a[E],A=k&&k.prototype;if(A){if(A[v]!==x)try{h(A,v,x)}catch{A[v]=x}if(A[g]||h(A,g,E),l[E]){for(var D in c)if(A[D]!==c[D])try{h(A,D,c[D])}catch{A[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(h){return a(h,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),h=o("5135"),p=o("861d"),v=o("9bf2").f,g=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},k=function(){var ge=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof k?new x(ge):ge===void 0?x():x(ge);return ge===""&&(E[pe]=!0),pe};g(k,x);var A=k.prototype=x.prototype;A.constructor=k;var D=A.toString,z=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(A,"description",{configurable:!0,get:function(){var ge=p(this)?this.valueOf():this,pe=D.call(ge);if(h(E,ge))return"";var N=z?pe.slice(7,-1):pe.replace(Y,"$1");return N===""?void 0:N}}),a({global:!0,forced:!0},{Symbol:k})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),h=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=h?Object.getPrototypeOf:function(g){return g=l(g),a(g,p)?g[p]:typeof g.constructor=="function"&&g instanceof g.constructor?g.constructor.prototype:g instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),h=o("69f3"),p=o("7dd0"),v="Array Iterator",g=h.set,x=h.getterFor(v);i.exports=p(Array,"Array",function(E,k){g(this,{type:v,target:a(E),index:0,kind:k})},function(){var E=x(this),k=E.target,A=E.kind,D=E.index++;return!k||D>=k.length?(E.target=void 0,{value:void 0,done:!0}):A=="keys"?{value:D,done:!1}:A=="values"?{value:k[D],done:!1}:{value:[D,k[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),h=o("06cf").f,p=o("83ab"),v=l(function(){h(1)}),g=!p||v;a({target:"Object",stat:!0,forced:g,sham:!p},{getOwnPropertyDescriptor:function(E,k){return h(c(E),k)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),h=o("9bf2");i.exports=function(p,v){for(var g=l(v),x=h.f,E=c.f,k=0;k<g.length;k++){var A=g[k];a(p,A)||x(p,A,E(v,A))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),h=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||h[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),h=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(g,x){try{return g[x]}catch{}};i.exports=a?l:function(g){var x,E,k;return g===void 0?"Undefined":g===null?"Null":typeof(E=v(x=Object(g),h))=="string"?E:p?l(x):(k=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":k}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(h){return c[h]||(c[h]=l(h))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function h(Qe,at,it){return at in Qe?Object.defineProperty(Qe,at,{value:it,enumerable:!0,configurable:!0,writable:!0}):Qe[at]=it,Qe}function p(Qe,at){var it=Object.keys(Qe);if(Object.getOwnPropertySymbols){var $t=Object.getOwnPropertySymbols(Qe);at&&($t=$t.filter(function(Zt){return Object.getOwnPropertyDescriptor(Qe,Zt).enumerable})),it.push.apply(it,$t)}return it}function v(Qe){for(var at=1;at<arguments.length;at++){var it=arguments[at]!=null?arguments[at]:{};at%2?p(Object(it),!0).forEach(function($t){h(Qe,$t,it[$t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function($t){Object.defineProperty(Qe,$t,Object.getOwnPropertyDescriptor(it,$t))})}return Qe}function g(Qe){if(Array.isArray(Qe))return Qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Qe,at){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Qe)))){var it=[],$t=!0,Zt=!1,On=void 0;try{for(var mn=Qe[Symbol.iterator](),Tn;!($t=(Tn=mn.next()).done)&&(it.push(Tn.value),!(at&&it.length===at));$t=!0);}catch(Qn){Zt=!0,On=Qn}finally{try{!$t&&mn.return!=null&&mn.return()}finally{if(Zt)throw On}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Qe,at){(at==null||at>Qe.length)&&(at=Qe.length);for(var it=0,$t=new Array(at);it<at;it++)$t[it]=Qe[it];return $t}function k(Qe,at){if(Qe){if(typeof Qe=="string")return E(Qe,at);var it=Object.prototype.toString.call(Qe).slice(8,-1);if(it==="Object"&&Qe.constructor&&(it=Qe.constructor.name),it==="Map"||it==="Set")return Array.from(Qe);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Qe,at)}}function A(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Qe,at){return g(Qe)||x(Qe,at)||k(Qe,at)||A()}function z(Qe){if(Array.isArray(Qe))return E(Qe)}function Y(Qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Qe))return Array.from(Qe)}function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(Qe){return z(Qe)||Y(Qe)||k(Qe)||te()}var pe=o("a352"),N=o.n(pe);function j(Qe){Qe.parentElement!==null&&Qe.parentElement.removeChild(Qe)}function K(Qe,at,it){var $t=it===0?Qe.children[0]:Qe.children[it-1].nextSibling;Qe.insertBefore(at,$t)}var I=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function R(Qe){var at=Object.create(null);return function($t){var Zt=at[$t];return Zt||(at[$t]=Qe($t))}}var B=/-(\w)/g,$=R(function(Qe){return Qe.replace(B,function(at,it){return it.toUpperCase()})});o("5db7"),o("73d9");var U=["Start","Add","Remove","Update","End"],V=["Choose","Unchoose","Sort","Filter","Clone"],ne=["Move"],X=[ne,U,V].flatMap(function(Qe){return Qe}).map(function(Qe){return"on".concat(Qe)}),we={manage:ne,manageAndEmit:U,emit:V};function ve(Qe){return X.indexOf(Qe)!==-1}o("caad"),o("2ca0");var Ze=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function ie(Qe){return Ze.includes(Qe)}function H(Qe){return["transition-group","TransitionGroup"].includes(Qe)}function Z(Qe){return["id","class","role","style"].includes(Qe)||Qe.startsWith("data-")||Qe.startsWith("aria-")||Qe.startsWith("on")}function me(Qe){return Qe.reduce(function(at,it){var $t=D(it,2),Zt=$t[0],On=$t[1];return at[Zt]=On,at},{})}function fe(Qe){var at=Qe.$attrs,it=Qe.componentData,$t=it===void 0?{}:it,Zt=me(Object.entries(at).filter(function(On){var mn=D(On,2),Tn=mn[0];return mn[1],Z(Tn)}));return v(v({},Zt),$t)}function de(Qe){var at=Qe.$attrs,it=Qe.callBackBuilder,$t=me(ce(at));Object.entries(it).forEach(function(On){var mn=D(On,2),Tn=mn[0],Qn=mn[1];we[Tn].forEach(function(Qt){$t["on".concat(Qt)]=Qn(Qt)})});var Zt="[data-draggable]".concat($t.draggable||"");return v(v({},$t),{},{draggable:Zt})}function ce(Qe){return Object.entries(Qe).filter(function(at){var it=D(at,2),$t=it[0];return it[1],!Z($t)}).map(function(at){var it=D(at,2),$t=it[0],Zt=it[1];return[$($t),Zt]}).filter(function(at){var it=D(at,2),$t=it[0];return it[1],!ve($t)})}o("c740");function J(Qe,at){if(!(Qe instanceof at))throw new TypeError("Cannot call a class as a function")}function Re(Qe,at){for(var it=0;it<at.length;it++){var $t=at[it];$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qe,$t.key,$t)}}function De(Qe,at,it){return at&&Re(Qe.prototype,at),Qe}var et=function(at){var it=at.el;return it},he=function(at,it){return at.__draggable_context=it},Q=function(at){return at.__draggable_context},se=function(){function Qe(at){var it=at.nodes,$t=it.header,Zt=it.default,On=it.footer,mn=at.root,Tn=at.realList;J(this,Qe),this.defaultNodes=Zt,this.children=[].concat(ge($t),ge(Zt),ge(On)),this.externalComponent=mn.externalComponent,this.rootTransition=mn.transition,this.tag=mn.tag,this.realList=Tn}return De(Qe,[{key:"render",value:function(it,$t){var Zt=this.tag,On=this.children,mn=this._isRootComponent,Tn=mn?{default:function(){return On}}:On;return it(Zt,$t,Tn)}},{key:"updated",value:function(){var it=this.defaultNodes,$t=this.realList;it.forEach(function(Zt,On){he(et(Zt),{element:$t[On],index:On})})}},{key:"getUnderlyingVm",value:function(it){return Q(it)}},{key:"getVmIndexFromDomIndex",value:function(it,$t){var Zt=this.defaultNodes,On=Zt.length,mn=$t.children,Tn=mn.item(it);if(Tn===null)return On;var Qn=Q(Tn);if(Qn)return Qn.index;if(On===0)return 0;var Qt=et(Zt[0]),xn=ge(mn).findIndex(function(Cn){return Cn===Qt});return it<xn?0:On}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Qe}(),ue=o("8bbf");function ze(Qe,at){var it=Qe[at];return it?it():[]}function Ce(Qe){var at=Qe.$slots,it=Qe.realList,$t=Qe.getKey,Zt=it||[],On=["header","footer"].map(function(Cn){return ze(at,Cn)}),mn=D(On,2),Tn=mn[0],Qn=mn[1],Qt=at.item;if(!Qt)throw new Error("draggable element must have an item slot");var xn=Zt.flatMap(function(Cn,er){return Qt({element:Cn,index:er}).map(function(vr){return vr.key=$t(Cn),vr.props=v(v({},vr.props||{}),{},{"data-draggable":!0}),vr})});if(xn.length!==Zt.length)throw new Error("Item slot must have only one child");return{header:Tn,footer:Qn,default:xn}}function ye(Qe){var at=H(Qe),it=!ie(Qe)&&!at;return{transition:at,externalComponent:it,tag:it?Object(ue.resolveComponent)(Qe):at?ue.TransitionGroup:Qe}}function Ve(Qe){var at=Qe.$slots,it=Qe.tag,$t=Qe.realList,Zt=Qe.getKey,On=Ce({$slots:at,realList:$t,getKey:Zt}),mn=ye(it);return new se({nodes:On,root:mn,realList:$t})}function Ye(Qe,at){var it=this;Object(ue.nextTick)(function(){return it.$emit(Qe.toLowerCase(),at)})}function Ke(Qe){var at=this;return function(it,$t){if(at.realList!==null)return at["onDrag".concat(Qe)](it,$t)}}function _t(Qe){var at=this,it=Ke.call(this,Qe);return function($t,Zt){it.call(at,$t,Zt),Ye.call(at,Qe,$t)}}var Ge=null,ft={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(at){return at}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Ut=["update:modelValue","change"].concat(ge([].concat(ge(we.manageAndEmit),ge(we.emit)).map(function(Qe){return Qe.toLowerCase()}))),tn=Object(ue.defineComponent)({name:"draggable",inheritAttrs:!1,props:ft,emits:Ut,data:function(){return{error:!1}},render:function(){try{this.error=!1;var at=this.$slots,it=this.$attrs,$t=this.tag,Zt=this.componentData,On=this.realList,mn=this.getKey,Tn=Ve({$slots:at,tag:$t,realList:On,getKey:mn});this.componentStructure=Tn;var Qn=fe({$attrs:it,componentData:Zt});return Tn.render(ue.h,Qn)}catch(Qt){return this.error=!0,Object(ue.h)("pre",{style:{color:"red"}},Qt.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&I.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var at=this;if(!this.error){var it=this.$attrs,$t=this.$el,Zt=this.componentStructure;Zt.updated();var On=de({$attrs:it,callBackBuilder:{manageAndEmit:function(Qn){return _t.call(at,Qn)},emit:function(Qn){return Ye.bind(at,Qn)},manage:function(Qn){return Ke.call(at,Qn)}}}),mn=$t.nodeType===1?$t:$t.parentElement;this._sortable=new N.a(mn,On),this.targetDomElement=mn,mn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var at=this.list;return at||this.modelValue},getKey:function(){var at=this.itemKey;return typeof at=="function"?at:function(it){return it[at]}}},watch:{$attrs:{handler:function(at){var it=this._sortable;it&&ce(at).forEach(function($t){var Zt=D($t,2),On=Zt[0],mn=Zt[1];it.option(On,mn)})},deep:!0}},methods:{getUnderlyingVm:function(at){return this.componentStructure.getUnderlyingVm(at)||null},getUnderlyingPotencialDraggableComponent:function(at){return at.__draggable_component__},emitChanges:function(at){var it=this;Object(ue.nextTick)(function(){return it.$emit("change",at)})},alterList:function(at){if(this.list){at(this.list);return}var it=ge(this.modelValue);at(it),this.$emit("update:modelValue",it)},spliceList:function(){var at=arguments,it=function(Zt){return Zt.splice.apply(Zt,ge(at))};this.alterList(it)},updatePosition:function(at,it){var $t=function(On){return On.splice(it,0,On.splice(at,1)[0])};this.alterList($t)},getRelatedContextFromMoveEvent:function(at){var it=at.to,$t=at.related,Zt=this.getUnderlyingPotencialDraggableComponent(it);if(!Zt)return{component:Zt};var On=Zt.realList,mn={list:On,component:Zt};if(it!==$t&&On){var Tn=Zt.getUnderlyingVm($t)||{};return v(v({},Tn),mn)}return mn},getVmIndexFromDomIndex:function(at){return this.componentStructure.getVmIndexFromDomIndex(at,this.targetDomElement)},onDragStart:function(at){this.context=this.getUnderlyingVm(at.item),at.item._underlying_vm_=this.clone(this.context.element),Ge=at.item},onDragAdd:function(at){var it=at.item._underlying_vm_;if(it!==void 0){j(at.item);var $t=this.getVmIndexFromDomIndex(at.newIndex);this.spliceList($t,0,it);var Zt={element:it,newIndex:$t};this.emitChanges({added:Zt})}},onDragRemove:function(at){if(K(this.$el,at.item,at.oldIndex),at.pullMode==="clone"){j(at.clone);return}var it=this.context,$t=it.index,Zt=it.element;this.spliceList($t,1);var On={element:Zt,oldIndex:$t};this.emitChanges({removed:On})},onDragUpdate:function(at){j(at.item),K(at.from,at.item,at.oldIndex);var it=this.context.index,$t=this.getVmIndexFromDomIndex(at.newIndex);this.updatePosition(it,$t);var Zt={element:this.context.element,oldIndex:it,newIndex:$t};this.emitChanges({moved:Zt})},computeFutureIndex:function(at,it){if(!at.element)return 0;var $t=ge(it.to.children).filter(function(Tn){return Tn.style.display!=="none"}),Zt=$t.indexOf(it.related),On=at.component.getVmIndexFromDomIndex(Zt),mn=$t.indexOf(Ge)!==-1;return mn||!it.willInsertAfter?On:On+1},onDragMove:function(at,it){var $t=this.move,Zt=this.realList;if(!$t||!Zt)return!0;var On=this.getRelatedContextFromMoveEvent(at),mn=this.computeFutureIndex(On,at),Tn=v(v({},this.context),{},{futureIndex:mn}),Qn=v(v({},at),{},{relatedContext:On,draggedContext:Tn});return $t(Qn,it)},onDragEnd:function(){Ge=null}}}),yn=tn;s.default=yn},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),h=o("23cb"),p=o("50c4"),v=o("fc6a"),g=o("8418"),x=o("b622"),E=o("1dde"),k=o("ae40"),A=E("slice"),D=k("slice",{ACCESSORS:!0,0:0,1:2}),z=x("species"),Y=[].slice,te=Math.max;a({target:"Array",proto:!0,forced:!A||!D},{slice:function(pe,N){var j=v(this),K=p(j.length),I=h(pe,K),R=h(N===void 0?K:N,K),B,$,U;if(c(j)&&(B=j.constructor,typeof B=="function"&&(B===Array||c(B.prototype))?B=void 0:l(B)&&(B=B[z],B===null&&(B=void 0)),B===Array||B===void 0))return Y.call(j,I,R);for($=new(B===void 0?Array:B)(te(R-I,0)),U=0;I<R;I++,U++)I in j&&g($,U,j[I]);return $.length=U,$}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(oP);var BZ=oP.exports;const RZ=B_(BZ),FZ={class:"h-full bg-gray-50"},jZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},zZ={class:"sm:flex sm:items-center"},$Z={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},VZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},UZ={class:"mt-6 bg-white shadow rounded-lg p-4"},HZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},WZ=["value"],GZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},qZ={key:1,class:"mt-6 overflow-x-auto pb-4"},YZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},KZ={class:"flex space-x-4 min-w-max"},ZZ={class:"bg-white rounded-lg shadow overflow-hidden"},XZ={class:"flex items-center"},JZ={class:"flex items-center"},QZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},eX={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},tX={class:"min-h-[100px] draggable-container"},nX={class:"note-container"},rX={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},iX={class:"flex items-center"},sX={key:0,class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},oX={class:"text-sm font-medium text-gray-900 truncate"},aX={class:"px-3 py-2"},lX={class:"text-sm text-gray-500 line-clamp-2"},uX={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},cX={class:"text-xs text-gray-500"},dX={class:"flex space-x-1"},hX={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note golocalise"},fX={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},pX=["onClick"],gX=["onClick"],mX=["onClick"],vX=["onClick"],yX={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},bX={class:"flex items-center justify-center min-h-screen w-full"},_X={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},wX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},xX=Rs({__name:"NotesView",setup(t){const e=Dm(),n=iu(),r=bf(),i=kp(),s=Ct(!0),o=Ct(!1),a=Ct(!1),l=Ct(null),c=Ct(null),h=Ct("info"),p=Ct(null),v=Ct(window.innerWidth<768),g=()=>{v.value=window.innerWidth<768},x=Jn(()=>{const H=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes tries:",H),H}),E=[{id:Yi.PRIVATE,title:"Priv",description:"Visible uniquement par vous"},{id:Yi.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Yi.EMPLOYEE,title:"Salaris",description:"Visible par l'entreprise et ses salaris"},{id:Yi.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salaris et visiteurs)"}],k=su({search:"",date:"",accessLevel:""});function A(H){if(!H)return"Date non dfinie";try{const Z=new Date(H);return isNaN(Z.getTime())?(console.warn("[safeFormatDate] Date invalide:",H),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)}catch(Z){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",Z),"Date invalide"}}function D(H){if(!H)return null;try{const Z=new Date(H);return isNaN(Z.getTime())?(console.warn("[safeDate] Date invalide:",H),null):Z}catch(Z){return console.error("[safeDate] Erreur lors de la cration de la date:",Z),null}}function z(H){return A(H)}const Y=Jn(()=>{let H=r.getAccessibleNotes;if(k.search){const Z=k.search.toLowerCase();H=H.filter(me=>me.title.toLowerCase().includes(Z)||me.description.toLowerCase().includes(Z))}if(k.accessLevel&&(H=H.filter(Z=>Z.accessLevel===k.accessLevel)),k.date){const Z=new Date;Z.setHours(0,0,0,0);const me=new Date(Z);me.setDate(Z.getDate()-Z.getDay());const fe=new Date(Z.getFullYear(),Z.getMonth(),1);H=H.filter(de=>{const ce=D(de.createdAt);return ce?k.date==="today"?ce>=Z:k.date==="week"?ce>=me:k.date==="month"?ce>=fe:!0:!1})}return H}),te=Jn(()=>H=>r.getNotesByColumn(H));function ge(H){if(H==null)return"Non dfini";switch(H){case Yi.PRIVATE:return"Priv";case Yi.COMPANY:return"Entreprise";case Yi.EMPLOYEE:return"Salaris";case Yi.VISITOR:return"Visiteurs";default:return"Non dfini"}}function pe(H){if(H==null)return"#9CA3AF";switch(H){case Yi.PRIVATE:return"#9CA3AF";case Yi.COMPANY:return"#EF4444";case Yi.EMPLOYEE:return"#F59E0B";case Yi.VISITOR:return"#10B981";default:return"#6B7280"}}go(()=>{console.log("[NotesView] Composant mont"),N().then(()=>{console.log("[NotesView] Donnes charges avec succs")}).catch(H=>{console.error("[NotesView] Erreur lors du chargement des donnes:",H),n.error("Erreur lors du chargement des donnes")}),document.addEventListener("click",ie),window.addEventListener("resize",g)});async function N(){console.log(`
[NotesView][loadInitialData] Dbut du chargement des donnes`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes charges:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const H=await Ca.getNotes();console.log("[NotesView][loadInitialData] Notes reues:",H.data),H.data.length>0?(console.log("[NotesView][loadInitialData] Dtails des notes:"),H.data.forEach((de,ce)=>{console.log(`Note ${ce+1}:`,{id:de.id,title:de.title,columnId:de.column||de.column_id,access_level:de.access_level,column:de.column})})):console.warn("[NotesView][loadInitialData] Aucune note reue du backend!");const Z=r.columns.map(de=>de.id),me=H.data.filter(de=>{const ce=(de.column||de.column_id||"").toString();return ce===""||!Z.includes(ce)});if(me.length>0){console.warn(`[NotesView][loadInitialData] ${me.length} notes avec des colonnes invalides:`,me),console.log("[NotesView][loadInitialData] Assignation des notes  la colonne  faire (2)");for(const de of me)try{await Ca.updateNote(de.id,{column:"2"})}catch(ce){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${de.id}  la colonne  faire:`,ce)}}const fe=H.data.map(de=>({id:de.id,title:de.title,description:de.description,location:de.location,columnId:(de.column||de.column_id||"2").toString(),access_level:de.access_level,style:de.style||{},comments:de.comments||[],photos:de.photos||[],order:de.order||0,createdAt:de.created_at,updatedAt:de.updated_at}));r.notes.length=0,fe.forEach(de=>{r.addNote(de)}),console.log("[NotesView][loadInitialData] Notes charges dans le store");for(const de of r.columns){const ce=r.getNotesByColumn(de.id);console.log(`[NotesView][loadInitialData] Colonne ${de.title} (${de.id}): ${ce.length} notes`),ce.length>0&&ce.forEach(J=>{console.log(`  - Note ID=${J.id}, Titre="${J.title}", Niveau d'accs=${J.accessLevel}, Colonne=${J.columnId}`)})}}catch(H){console.error("[NotesView][loadInitialData] Erreur:",H),n.error("Erreur lors du chargement des donnes")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement termin")}}function j(){e.push({path:"/",query:{tool:"Note"}})}async function K(H){if(!H.location){n.warning("Cette note n'est pas golocalise");return}try{const me=(await Ca.getNote(H.id)).data,fe=me.plan;console.log("[NotesView][viewOnMap] Dtails de la note rcuprs:",me),e.push({path:"/",query:{lat:Array.isArray(H.location)?H.location[0].toString():H.location.coordinates[1].toString(),lng:Array.isArray(H.location)?H.location[1].toString():H.location.coordinates[0].toString(),noteId:H.id.toString(),planId:fe?fe.toString():void 0}})}catch(Z){console.error("[NotesView][viewOnMap] Erreur lors de la rcupration des dtails de la note:",Z),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function I(H){if(!H.location){n.warning("Cette note n'est pas golocalise");return}let Z,me;Array.isArray(H.location)?(Z=H.location[0],me=H.location[1]):(Z=H.location.coordinates[1],me=H.location.coordinates[0]);const fe=`https://www.google.com/maps/dir/?api=1&destination=${Z},${me}`;window.open(fe,"_blank")}function R(H){c.value=JSON.parse(JSON.stringify(H)),h.value="info",a.value=!0}async function B(H){if(console.log("[NotesView][handleNoteSave] Note sauvegarde:",H),H&&H.id){const Z=r.notes.find(me=>me.id===H.id);Z&&(!H.comments&&Z.comments&&(H.comments=Z.comments),!H.photos&&Z.photos&&(H.photos=Z.photos))}if(a.value=!1,p.value&&c.value)try{const Z={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},me=i.elements.findIndex(fe=>{var de;return fe.type_forme==="Note"&&fe.id===((de=c.value)==null?void 0:de.id)});me!==-1?i.elements[me].data=Z:i.elements.push({id:c.value.id,type_forme:"Note",data:Z}),await i.saveToPlan(p.value),n.success("Note sauvegarde et plan mis  jour avec succs")}catch(Z){console.error("Erreur lors de la sauvegarde de la note:",Z),n.error("Erreur lors de la sauvegarde de la note")}}function $(H){l.value=H,o.value=!0}async function U(){if(l.value)try{try{await Ca.deleteNote(l.value.id)}catch(H){if(H.response&&H.response.status===404)console.log("[NotesView][deleteNote] Note non trouve dans le backend (404), suppression locale uniquement");else throw H}r.removeNote(l.value.id),n.success("Note supprime avec succs")}catch(H){console.error("Erreur lors de la suppression de la note:",H),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function V(H,Z){console.log("[NotesView][onDragChange] vnement:",H),console.log("[NotesView][onDragChange] Colonne cible:",Z);try{if(H.added){const{element:me}=H.added;console.log("[NotesView][onDragChange] Note  dplacer:",me);const fe=typeof me=="object"&&me.id?me.id:null;if(!fe)throw console.error("[NotesView][onDragChange] ID de note invalide:",me),new Error("ID de note invalide");r.moveNote(fe,Z);const ce=te.value(Z).map(Re=>Re.id);r.reorderNotes(Z,ce);const J=r.getColumnById(Z);n.success(`Note dplace vers ${(J==null?void 0:J.title)||"une autre colonne"}`),await ne(fe,{columnId:Z})}if(H.moved){const me=te.value(Z),fe=me.map(de=>de.id);r.reorderNotes(Z,fe),n.success("Ordre des notes mis  jour");for(const[de,ce]of me.entries())await ne(ce.id,{order:de})}}catch(me){console.error("[NotesView][onDragChange] Erreur:",me),n.error("Une erreur est survenue lors du dplacement de la note")}}async function ne(H,Z){console.log("[NotesView][updateNoteInBackend] Mise  jour de la note:",H,Z);try{const me=r.notes.find(ce=>ce.id===H);if(!me){console.error("[NotesView][updateNoteInBackend] Note non trouve:",H);return}const fe={...Z};if(Z.columnId){const ce=r.getColumnById(Z.columnId);ce?(console.log(`[NotesView][updateNoteInBackend] Mise  jour de la colonne: ${ce.id} (${ce.title})`),fe.column=ce.id,delete fe.columnId,delete fe.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouve: ${Z.columnId}`)}const de={...me,...fe,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Donnes envoyes au backend:",de),await Ca.updateNote(H,de),console.log("[NotesView][updateNoteInBackend] Note mise  jour avec succs")}catch(me){throw console.error("[NotesView][updateNoteInBackend] Erreur:",me),me}}function X(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Yi.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,h.value="info"}const we=Ct(null),ve=Ct(!1);function Ze(){ve.value=!ve.value}function ie(H){we.value&&!we.value.contains(H.target)&&(ve.value=!1)}return go(()=>{document.addEventListener("click",ie),window.addEventListener("resize",g)}),kh(()=>{document.removeEventListener("click",ie),window.removeEventListener("resize",g)}),(H,Z)=>{var me,fe;return Te(),Ie("div",FZ,[S("div",jZ,[S("div",zZ,[Z[6]||(Z[6]=S("div",{class:"sm:flex-auto"},[S("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),S("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),S("div",$Z,[S("div",{class:"relative",ref_key:"dropdownRef",ref:we},[S("button",{onClick:Ze,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},Z[5]||(Z[5]=[Xr(" Crer "),S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),ve.value?(Te(),Ie("div",VZ,[S("div",{class:"py-1"},[S("button",{onClick:X,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),S("button",{onClick:j,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note golocalise ")])])):Jt("",!0)],512)])]),S("div",UZ,[S("div",HZ,[S("div",null,[Z[7]||(Z[7]=S("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(S("input",{type:"text",id:"search","onUpdate:modelValue":Z[0]||(Z[0]=de=>k.search=de),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[$r,k.search]])]),S("div",null,[Z[9]||(Z[9]=S("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),kn(S("select",{id:"date","onUpdate:modelValue":Z[1]||(Z[1]=de=>k.date=de),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Z[8]||(Z[8]=[S("option",{value:""},"Toutes les dates",-1),S("option",{value:"today"},"Aujourd'hui",-1),S("option",{value:"week"},"Cette semaine",-1),S("option",{value:"month"},"Ce mois",-1)]),512),[[ns,k.date]])]),S("div",null,[Z[11]||(Z[11]=S("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accs",-1)),kn(S("select",{id:"accessLevel","onUpdate:modelValue":Z[2]||(Z[2]=de=>k.accessLevel=de),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Z[10]||(Z[10]=S("option",{value:""},"Tous les niveaux",-1)),(Te(),Ie(wn,null,ir(E,de=>S("option",{key:de.id,value:de.id},kt(de.title),9,WZ)),64))],512),[[ns,k.accessLevel]])])])]),s.value?(Te(),Ie("div",GZ,Z[12]||(Z[12]=[S("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),S("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Te(),Ie("div",qZ,[Y.value.length===0&&x.value.length===0?(Te(),Ie("div",YZ,Z[13]||(Z[13]=[S("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouve",-1)]))):Jt("",!0),S("div",KZ,[(Te(!0),Ie(wn,null,ir(x.value,de=>(Te(),Ie("div",{key:de.id,class:"column-wrapper w-80 flex-shrink-0"},[S("div",ZZ,[S("div",{class:"p-3 flex items-center justify-between no-select",style:nu({backgroundColor:de.color+"20",borderBottom:"2px solid "+de.color})},[S("div",XZ,[S("h3",{class:"text-sm font-semibold",style:nu({color:de.color})},kt(de.title),5)]),S("div",JZ,[S("span",QZ,kt(te.value(de.id).length),1)])],4),S("div",eX,[S("div",tX,[mi(Yn(RZ),{list:te.value(de.id),class:"space-y-2",group:"notes","item-key":"id",handle:v.value?null:".note-drag-handle",onChange:ce=>V(ce,de.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging",disabled:v.value},{item:Gu(({element:ce})=>[S("div",nX,[S("div",rX,[S("div",{class:Di(["p-3 flex items-center justify-between",{"note-drag-handle cursor-move":!v.value,"no-select":!0}])},[S("div",iX,[v.value?Jt("",!0):(Te(),Ie("svg",sX,Z[14]||(Z[14]=[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"},null,-1)]))),S("h4",oX,kt(ce.title),1)]),S("div",null,[S("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:nu({backgroundColor:pe(ce.accessLevel)+"20",color:pe(ce.accessLevel)})},kt(ge(ce.accessLevel)||"Non dfini"),5)])],2),S("div",aX,[S("p",lX,kt(ce.description||"Aucune description"),1)]),S("div",uX,[S("span",cX,kt(ce.updatedAt?z(ce.updatedAt):ce.createdAt?z(ce.createdAt):"Date non dfinie"),1),S("div",dX,[ce.location?(Te(),Ie("span",hX,Z[15]||(Z[15]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Te(),Ie("span",fX,Z[16]||(Z[16]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),ce.location?(Te(),Ie(wn,{key:2},[S("button",{onClick:J=>I(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},Z[17]||(Z[17]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,pX),S("button",{onClick:J=>K(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},Z[18]||(Z[18]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,gX)],64)):Jt("",!0),S("button",{onClick:J=>R(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"diter la note"},Z[19]||(Z[19]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,mX),S("button",{onClick:J=>$(ce),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},Z[20]||(Z[20]=[S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[S("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,vX)])])])])]),"empty-content":Gu(()=>Z[21]||(Z[21]=[S("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","handle","onChange","disabled"])])])])]))),128))])]))]),o.value?(Te(),Ie("div",yX,[S("div",bX,[Z[23]||(Z[23]=S("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),S("div",_X,[Z[22]||(Z[22]=tu('<div class="p-4 md:p-6" data-v-0158f3fe><div class="flex items-start" data-v-0158f3fe><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-0158f3fe><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-0158f3fe><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-0158f3fe></path></svg></div><div class="ml-4 flex-1" data-v-0158f3fe><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-0158f3fe> Supprimer la note </h3><div class="mt-2" data-v-0158f3fe><p class="text-sm text-gray-500" data-v-0158f3fe> tes-vous sr de vouloir supprimer cette note ? Cette action est irrversible. </p></div></div></div></div>',1)),S("div",wX,[S("button",{onClick:U,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),S("button",{onClick:Z[3]||(Z[3]=de=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):Jt("",!0),a.value?(Te(),Sa(IE,{key:1,note:c.value,"is-new-note":!((me=c.value)!=null&&me.id),location:(fe=c.value)==null?void 0:fe.location,onClose:Z[4]||(Z[4]=de=>a.value=!1),onSave:B},null,8,["note","is-new-note","location"])):Jt("",!0)])}}}),LX=rd(xX,[["__scopeId","data-v-0158f3fe"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Im(t){return t+.5|0}const hh=(t,e,n)=>Math.max(Math.min(t,n),e);function Eg(t){return hh(Im(t*2.55),0,255)}function bh(t){return hh(Im(t*255),0,255)}function Cd(t){return hh(Im(t/2.55)/100,0,1)}function Y5(t){return hh(Im(t*100),0,100)}const Vu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Fb=[..."0123456789ABCDEF"],SX=t=>Fb[t&15],CX=t=>Fb[(t&240)>>4]+Fb[t&15],T0=t=>(t&240)>>4===(t&15),EX=t=>T0(t.r)&&T0(t.g)&&T0(t.b)&&T0(t.a);function PX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Vu[t[1]]*17,g:255&Vu[t[2]]*17,b:255&Vu[t[3]]*17,a:e===5?Vu[t[4]]*17:255}:(e===7||e===9)&&(n={r:Vu[t[1]]<<4|Vu[t[2]],g:Vu[t[3]]<<4|Vu[t[4]],b:Vu[t[5]]<<4|Vu[t[6]],a:e===9?Vu[t[7]]<<4|Vu[t[8]]:255})),n}const MX=(t,e)=>t<255?e(t):"";function kX(t){var e=EX(t)?SX:CX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+MX(t.a,e):void 0}const AX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function yP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function TX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function DX(t,e,n){const r=yP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function OX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function G_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,h;return s!==o&&(h=s-o,c=a>.5?h/(2-s-o):h/(s+o),l=OX(n,r,i,h,s),l=l*60+.5),[l|0,c||0,a]}function q_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(bh)}function Y_(t,e,n){return q_(yP,t,e,n)}function NX(t,e,n){return q_(DX,t,e,n)}function IX(t,e,n){return q_(TX,t,e,n)}function bP(t){return(t%360+360)%360}function BX(t){const e=AX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Eg(+e[5]):bh(+e[5]));const i=bP(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=NX(i,s,o):e[1]==="hsv"?r=IX(i,s,o):r=Y_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function RX(t,e){var n=G_(t);n[0]=bP(n[0]+e),n=Y_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function FX(t){if(!t)return;const e=G_(t),n=e[0],r=Y5(e[1]),i=Y5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Cd(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const K5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Z5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function jX(){const t={},e=Object.keys(Z5),n=Object.keys(K5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,K5[s]);s=parseInt(Z5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let D0;function zX(t){D0||(D0=jX(),D0.transparent=[0,0,0,0]);const e=D0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const $X=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function VX(t){const e=$X.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Eg(o):hh(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Eg(r):hh(r,0,255)),i=255&(e[4]?Eg(i):hh(i,0,255)),s=255&(e[6]?Eg(s):hh(s,0,255)),{r,g:i,b:s,a:n}}}function UX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Cd(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const b2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Jf=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function HX(t,e,n){const r=Jf(Cd(t.r)),i=Jf(Cd(t.g)),s=Jf(Cd(t.b));return{r:bh(b2(r+n*(Jf(Cd(e.r))-r))),g:bh(b2(i+n*(Jf(Cd(e.g))-i))),b:bh(b2(s+n*(Jf(Cd(e.b))-s))),a:t.a+n*(e.a-t.a)}}function O0(t,e,n){if(t){let r=G_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=Y_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function _P(t,e){return t&&Object.assign(e||{},t)}function X5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=bh(t[3]))):(e=_P(t,{r:0,g:0,b:0,a:1}),e.a=bh(e.a)),e}function WX(t){return t.charAt(0)==="r"?VX(t):BX(t)}class vm{constructor(e){if(e instanceof vm)return e;const n=typeof e;let r;n==="object"?r=X5(e):n==="string"&&(r=PX(e)||zX(e)||WX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=_P(this._rgb);return e&&(e.a=Cd(e.a)),e}set rgb(e){this._rgb=X5(e)}rgbString(){return this._valid?UX(this._rgb):void 0}hexString(){return this._valid?kX(this._rgb):void 0}hslString(){return this._valid?FX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=HX(this._rgb,e._rgb,n)),this}clone(){return new vm(this.rgb)}alpha(e){return this._rgb.a=bh(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Im(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return O0(this._rgb,2,e),this}darken(e){return O0(this._rgb,2,-e),this}saturate(e){return O0(this._rgb,1,e),this}desaturate(e){return O0(this._rgb,1,-e),this}rotate(e){return RX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function wd(){}const GX=(()=>{let t=0;return()=>t++})();function Wi(t){return t===null||typeof t>"u"}function Ks(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Oi(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function ko(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function wu(t,e){return ko(t)?t:e}function ui(t,e){return typeof t>"u"?e:t}const qX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,wP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ks(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function us(t,e,n,r){let i,s,o;if(Ks(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Oi(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ty(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ny(t){if(Ks(t))return t.map(ny);if(Oi(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ny(t[n[i]]);return e}return t}function xP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function YX(t,e,n,r){if(!xP(t))return;const i=e[t],s=n[t];Oi(i)&&Oi(s)?ym(i,s,r):e[t]=ny(s)}function ym(t,e,n){const r=Ks(e)?e:[e],i=r.length;if(!Oi(t))return t;n=n||{};const s=n.merger||YX;let o;for(let a=0;a<i;++a){if(o=r[a],!Oi(o))continue;const l=Object.keys(o);for(let c=0,h=l.length;c<h;++c)s(l[c],t,o,n)}return t}function Zg(t,e){return ym(t,e,{merger:KX})}function KX(t,e,n){if(!xP(t))return;const r=e[t],i=n[t];Oi(r)&&Oi(i)?Zg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ny(i))}const J5={"":t=>t,x:t=>t.x,y:t=>t.y};function ZX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function XX(t){const e=ZX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Ch(t,e){return(J5[e]||(J5[e]=XX(e)))(t)}function K_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const bm=t=>typeof t<"u",Eh=t=>typeof t=="function",Q5=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function JX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Bs=Math.PI,Is=2*Bs,QX=Is+Bs,ry=Number.POSITIVE_INFINITY,eJ=Bs/180,Go=Bs/2,Yh=Bs/4,e3=Bs*2/3,fh=Math.log10,Qc=Math.sign;function Xg(t,e,n){return Math.abs(t-e)<n}function t3(t){const e=Math.round(t);t=Xg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(fh(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function tJ(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Tp(t){return!isNaN(parseFloat(t))&&isFinite(t)}function nJ(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function LP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function _c(t){return t*(Bs/180)}function Z_(t){return t*(180/Bs)}function n3(t){if(!ko(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function SP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Bs&&(s+=Is),{angle:s,distance:i}}function jb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function rJ(t,e){return(t-e+QX)%Is-Bs}function xu(t){return(t%Is+Is)%Is}function _m(t,e,n,r){const i=xu(t),s=xu(e),o=xu(n),a=xu(s-i),l=xu(o-i),c=xu(i-s),h=xu(i-o);return i===s||i===o||r&&s===o||a>l&&c<h}function Pa(t,e,n){return Math.max(e,Math.min(n,t))}function iJ(t){return Pa(t,-32768,32767)}function Td(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function X_(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Dd=(t,e,n,r)=>X_(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),sJ=(t,e,n)=>X_(t,n,r=>t[r][e]>=n);function oJ(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const CP=["push","pop","shift","splice","unshift"];function aJ(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),CP.forEach(n=>{const r="_onData"+K_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function r3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(CP.forEach(s=>{delete t[s]}),delete t._chartjs)}function EP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const PP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function MP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,PP.call(window,()=>{r=!1,t.apply(e,n)}))}}function lJ(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const J_=t=>t==="start"?"left":t==="end"?"right":"center",cl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,uJ=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function kP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:h,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Pa(Math.min(Dd(a,l,c).lo,n?r:Dd(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Pa(Math.max(Dd(a,o.axis,h,!0).hi+1,n?0:Dd(e,l,o.getPixelForValue(h),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function AP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const N0=t=>t===0||t===1,i3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Is/n)),s3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Is/n)+1,Jg={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Go)+1,easeOutSine:t=>Math.sin(t*Go),easeInOutSine:t=>-.5*(Math.cos(Bs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>N0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>N0(t)?t:i3(t,.075,.3),easeOutElastic:t=>N0(t)?t:s3(t,.075,.3),easeInOutElastic(t){return N0(t)?t:t<.5?.5*i3(t*2,.1125,.45):.5+.5*s3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Jg.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Jg.easeInBounce(t*2)*.5:Jg.easeOutBounce(t*2-1)*.5+.5};function Q_(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function o3(t){return Q_(t)?t:new vm(t)}function _2(t){return Q_(t)?t:new vm(t).saturate(.5).darken(.1).hexString()}const cJ=["x","y","borderWidth","radius","tension"],dJ=["color","borderColor","backgroundColor"];function hJ(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:dJ},numbers:{type:"number",properties:cJ}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function fJ(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const a3=new Map;function pJ(t,e){e=e||{};const n=t+JSON.stringify(e);let r=a3.get(n);return r||(r=new Intl.NumberFormat(t,e),a3.set(n,r)),r}function Bm(t,e,n){return pJ(e,n).format(t)}const TP={values(t){return Ks(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=gJ(t,n)}const o=fh(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Bm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(fh(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?TP.numeric.call(this,t,e,n):""}};function gJ(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var Gy={formatters:TP};function mJ(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Gy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const _f=Object.create(null),zb=Object.create(null);function Qg(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function w2(t,e,n){return typeof e=="string"?ym(Qg(t,e),n):ym(Qg(t,""),e)}class vJ{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>_2(i.backgroundColor),this.hoverBorderColor=(r,i)=>_2(i.borderColor),this.hoverColor=(r,i)=>_2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return w2(this,e,n)}get(e){return Qg(this,e)}describe(e,n){return w2(zb,e,n)}override(e,n){return w2(_f,e,n)}route(e,n,r,i){const s=Qg(this,e),o=Qg(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Oi(l)?Object.assign({},c,l):ui(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Ao=new vJ({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hJ,fJ,mJ]);function yJ(t){return!t||Wi(t.size)||Wi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function iy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function bJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,h,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Ks(p))o=iy(t,i,s,o,p);else if(Ks(p))for(c=0,h=p.length;c<h;c++)v=p[c],v!=null&&!Ks(v)&&(o=iy(t,i,s,o,v));t.restore();const g=s.length/2;if(g>n.length){for(l=0;l<g;l++)delete i[s[l]];s.splice(0,g)}return o}function Kh(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function l3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function $b(t,e,n,r){DP(t,e,n,r,null)}function DP(t,e,n,r,i){let s,o,a,l,c,h,p,v;const g=e.pointStyle,x=e.rotation,E=e.radius;let k=(x||0)*eJ;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(k),t.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),g){default:i?t.ellipse(n,r,i/2,E,0,0,Is):t.arc(n,r,E,0,Is),t.closePath();break;case"triangle":h=i?i/2:E,t.moveTo(n+Math.sin(k)*h,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*h,r-Math.cos(k)*E),k+=e3,t.lineTo(n+Math.sin(k)*h,r-Math.cos(k)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(k+Yh)*l,p=Math.cos(k+Yh)*(i?i/2-c:l),a=Math.sin(k+Yh)*l,v=Math.sin(k+Yh)*(i?i/2-c:l),t.arc(n-p,r-a,c,k-Bs,k-Go),t.arc(n+v,r-o,c,k-Go,k),t.arc(n+p,r+a,c,k,k+Go),t.arc(n-v,r+o,c,k+Go,k+Bs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}k+=Yh;case"rectRot":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":k+=Yh;case"cross":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),k+=Yh,p=Math.cos(k)*(i?i/2:E),o=Math.cos(k)*E,a=Math.sin(k)*E,v=Math.sin(k)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(k)*E,a=Math.sin(k)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(k)*(i?i/2:E),r+Math.sin(k)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Od(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function qy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Yy(t){t.restore()}function _J(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function wJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function xJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Wi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function LJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function SJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wf(t,e,n,r,i,s={}){const o=Ks(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,xJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&SJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Wi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),LJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function wm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*Bs,Bs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,Bs,Go,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Go,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Go,!0),t.lineTo(n+o.topLeft,r)}const CJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,EJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function PJ(t,e){const n=(""+t).match(CJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const MJ=t=>+t||0;function ew(t,e){const n={},r=Oi(e),i=r?Object.keys(e):e,s=Oi(t)?r?o=>ui(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=MJ(s(o));return n}function OP(t){return ew(t,{top:"y",right:"x",bottom:"y",left:"x"})}function pf(t){return ew(t,["topLeft","topRight","bottomLeft","bottomRight"])}function yl(t){const e=OP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function pa(t,e){t=t||{},e=e||Ao.font;let n=ui(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ui(t.style,e.style);r&&!(""+r).match(EJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ui(t.family,e.family),lineHeight:PJ(ui(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ui(t.weight,e.weight),string:""};return i.string=yJ(i),i}function Pg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function kJ(t,e,n){const{min:r,max:i}=t,s=wP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Ah(t,e){return Object.assign(Object.create(t),e)}function tw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=RP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>tw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return IP(a,l,()=>RJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return c3(a).includes(l)},ownKeys(a){return c3(a)},set(a,l,c){const h=a._storage||(a._storage=i());return a[l]=h[l]=c,delete a._keys,!0}})}function Dp(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:NP(t,r),setContext:s=>Dp(t,s,n,r),override:s=>Dp(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return IP(s,o,()=>TJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function NP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Eh(n)?n:()=>n,isIndexable:Eh(r)?r:()=>r}}const AJ=(t,e)=>t?t+K_(e):e,nw=(t,e)=>Oi(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function IP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function TJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Eh(a)&&o.isScriptable(e)&&(a=DJ(e,a,t,n)),Ks(a)&&a.length&&(a=OJ(e,a,t,o.isIndexable)),nw(e,a)&&(a=Dp(a,i,s&&s[e],o)),a}function DJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),nw(t,l)&&(l=rw(i._scopes,i,t,l)),l}function OJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Oi(e[0])){const l=e,c=i._scopes.filter(h=>h!==l);e=[];for(const h of l){const p=rw(c,i,t,h);e.push(Dp(p,s,o&&o[t],a))}}return e}function BP(t,e,n){return Eh(t)?t(e,n):t}const NJ=(t,e)=>t===!0?e:typeof t=="string"?Ch(e,t):void 0;function IJ(t,e,n,r,i){for(const s of e){const o=NJ(n,s);if(o){t.add(o);const a=BP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function rw(t,e,n,r){const i=e._rootScopes,s=BP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=u3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=u3(a,o,s,l,r),l===null)?!1:tw(Array.from(a),[""],i,s,()=>BJ(e,n,r))}function u3(t,e,n,r,i){for(;n;)n=IJ(t,e,n,r,i);return n}function BJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Ks(i)&&Oi(n)?n:i||{}}function RJ(t,e,n,r){let i;for(const s of e)if(i=RP(AJ(s,t),n),typeof i<"u")return nw(t,i)?rw(n,r,t,i):i}function RP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function c3(t){let e=t._keys;return e||(e=t._keys=FJ(t._scopes)),e}function FJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function FP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,h;for(a=0,l=r;a<l;++a)c=a+n,h=e[c],o[a]={r:i.parse(Ch(h,s),c)};return o}const jJ=Number.EPSILON||1e-14,Op=(t,e)=>e<t.length&&!t[e].skip&&t[e],jP=t=>t==="x"?"y":"x";function zJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=jb(s,i),l=jb(o,s);let c=a/(a+l),h=l/(a+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const p=r*c,v=r*h;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function $J(t,e,n){const r=t.length;let i,s,o,a,l,c=Op(t,0);for(let h=0;h<r-1;++h)if(l=c,c=Op(t,h+1),!(!l||!c)){if(Xg(e[h],0,jJ)){n[h]=n[h+1]=0;continue}i=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=i*o*e[h],n[h+1]=s*o*e[h])}}function VJ(t,e,n="x"){const r=jP(n),i=t.length;let s,o,a,l=Op(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Op(t,c+1),!a)continue;const h=a[n],p=a[r];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${r}`]=p+s*e[c])}}function UJ(t,e="x"){const n=jP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Op(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Op(t,o+1),!!l){if(c){const h=c[e]-l[e];i[o]=h!==0?(c[n]-l[n])/h:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}$J(t,i,s),VJ(t,s,e)}function I0(t,e,n){return Math.max(Math.min(t,n),e)}function HJ(t,e){let n,r,i,s,o,a=Od(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Od(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=I0(i.cp1x,e.left,e.right),i.cp1y=I0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=I0(i.cp2x,e.left,e.right),i.cp2y=I0(i.cp2y,e.top,e.bottom)))}function WJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")UJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=zJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&HJ(t,n)}function iw(){return typeof window<"u"&&typeof document<"u"}function sw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function sy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Ky=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function GJ(t,e){return Ky(t).getPropertyValue(e)}const qJ=["top","right","bottom","left"];function gf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=qJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const YJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function KJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(YJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function ef(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Ky(n),s=i.boxSizing==="border-box",o=gf(i,"padding"),a=gf(i,"border","width"),{x:l,y:c,box:h}=KJ(t,n),p=o.left+(h&&a.left),v=o.top+(h&&a.top);let{width:g,height:x}=e;return s&&(g-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/g*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function ZJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=sw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Ky(s),l=gf(a,"border","width"),c=gf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=sy(a.maxWidth,s,"clientWidth"),i=sy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||ry,maxHeight:i||ry}}const B0=t=>Math.round(t*10)/10;function XJ(t,e,n,r){const i=Ky(t),s=gf(i,"margin"),o=sy(i.maxWidth,t,"clientWidth")||ry,a=sy(i.maxHeight,t,"clientHeight")||ry,l=ZJ(t,e,n);let{width:c,height:h}=l;if(i.boxSizing==="content-box"){const v=gf(i,"border","width"),g=gf(i,"padding");c-=g.width+v.width,h-=g.height+v.height}return c=Math.max(0,c-s.width),h=Math.max(0,r?c/r:h-s.height),c=B0(Math.min(c,o,l.maxWidth)),h=B0(Math.min(h,a,l.maxHeight)),c&&!h&&(h=B0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,c=B0(Math.floor(h*r))),{width:c,height:h}}function d3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const JJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};iw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function h3(t,e){const n=GJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function tf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function QJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function eQ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=tf(t,i,n),a=tf(i,s,n),l=tf(s,e,n),c=tf(o,a,n),h=tf(a,l,n);return tf(c,h,n)}const tQ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},nQ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function wp(t,e,n){return t?tQ(e,n):nQ()}function zP(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function $P(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function VP(t){return t==="angle"?{between:_m,compare:rJ,normalize:xu}:{between:Td,compare:(e,n)=>e-n,normalize:e=>e}}function f3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function rQ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=VP(r),l=e.length;let{start:c,end:h,loop:p}=t,v,g;if(p){for(c+=l,h+=l,v=0,g=l;v<g&&o(a(e[c%l][r]),i,s);++v)c--,h--;c%=l,h%=l}return h<c&&(h+=l),{start:c,end:h,loop:p,style:t.style}}function UP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=VP(r),{start:h,end:p,loop:v,style:g}=rQ(t,e,n),x=[];let E=!1,k=null,A,D,z;const Y=()=>l(i,z,A)&&a(i,z)!==0,te=()=>a(s,A)===0||l(s,z,A),ge=()=>E||Y(),pe=()=>!E||te();for(let N=h,j=h;N<=p;++N)D=e[N%o],!D.skip&&(A=c(D[r]),A!==z&&(E=l(A,i,s),k===null&&ge()&&(k=a(A,i)===0?N:j),k!==null&&pe()&&(x.push(f3({start:k,end:N,loop:v,count:o,style:g})),k=null),j=N,z=A));return k!==null&&x.push(f3({start:k,end:p,loop:v,count:o,style:g})),x}function HP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=UP(r[i],t.points,e);s.length&&n.push(...s)}return n}function iQ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function sQ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function oQ(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=iQ(n,i,s,r);if(r===!0)return p3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return p3(t,sQ(n,o,l,c),n,e)}function p3(t,e,n,r){return!r||!r.setContext||!n?e:aQ(t,e,n,r)}function aQ(t,e,n,r){const i=t._chart.getContext(),s=g3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let h=s,p=e[0].start,v=p;function g(x,E,k,A){const D=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=D;for(;n[E%l].skip;)E+=D;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:k,style:A}),h=A,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],k;for(v=p+1;v<=x.end;v++){const A=n[v%l];k=g3(r.setContext(Ah(i,{type:"segment",p0:E,p1:A,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),lQ(k,h)&&g(p,v-1,x.loop,h),E=A,h=k}p<v-1&&g(p,v-1,x.loop,h)}return c}function g3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function lQ(t,e){if(!e)return!1;const n=[],r=function(i,s){return Q_(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class uQ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=PP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xd=new uQ;const m3="transparent",cQ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=o3(t||m3),i=r.valid&&o3(e||m3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class dQ{constructor(e,n,r,i){const s=n[r];i=Pg([e.to,i,s,e.from]);const o=Pg([e.from,s,i]);this._active=!0,this._fn=e.fn||cQ[e.type||typeof o],this._easing=Jg[e.easing]||Jg.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Pg([e.to,n,i,e.from]),this._from=Pg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class WP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Oi(e))return;const n=Object.keys(Ao.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Oi(s))return;const o={};for(const a of n)o[a]=s[a];(Ks(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=fQ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&hQ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const h=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,h,a);continue}else p.cancel();if(!v||!v.duration){e[c]=h;continue}s[c]=p=new dQ(v,e,c,h),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return xd.add(this._chart,r),!0}}function hQ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function fQ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function v3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function pQ(t,e,n){if(n===!1)return!1;const r=v3(t,n),i=v3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function gQ(t){let e,n,r,i;return Oi(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function GP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function y3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],ko(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function mQ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function b3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function vQ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function yQ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function bQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function _3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function w3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,h=vQ(s,o,r),p=e.length;let v;for(let g=0;g<p;++g){const x=e[g],{[l]:E,[c]:k}=x,A=x._stacks||(x._stacks={});v=A[c]=bQ(i,h,E),v[a]=k,v._top=_3(v,o,!0,r.type),v._bottom=_3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=k}}function x2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function _Q(t,e){return Ah(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function wQ(t,e,n){return Ah(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function lg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const L2=t=>t==="reset"||t==="none",x3=(t,e)=>e?t:Object.assign({},t),xQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:GP(n,!0),values:null};class xc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=b3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&lg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,g,x)=>p==="x"?v:p==="r"?x:g,s=n.xAxisID=ui(r.xAxisID,x2(e,"x")),o=n.yAxisID=ui(r.yAxisID,x2(e,"y")),a=n.rAxisID=ui(r.rAxisID,x2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),h=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&r3(this._data,this),e._stacked&&lg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Oi(n))this._data=mQ(n);else if(r!==n){if(r){r3(r,this);const i=this._cachedMeta;lg(i),i._parsed=[]}n&&Object.isExtensible(n)&&aJ(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=b3(n.vScale,n),n.stack!==r.stack&&(i=!0,lg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&w3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],h,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Ks(i[e])?v=this.parseArrayData(r,i,e,n):Oi(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const g=()=>p[a]===null||c&&p[a]<c[a];for(h=0;h<n;++h)r._parsed[h+e]=p=v[h],l&&(g()&&(l=!1),c=p);r._sorted=l}o&&w3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),h=s===o,p=new Array(i);let v,g,x;for(v=0,g=i;v<g;++v)x=v+r,p[v]={[a]:h||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,h,p;for(l=0,c=i;l<c;++l)h=l+r,p=n[h],a[l]={x:s.parse(p[0],h),y:o.parse(p[1],h)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let h,p,v,g;for(h=0,p=i;h<p;++h)v=h+r,g=n[v],c[h]={x:s.parse(Ch(g,a),v),y:o.parse(Ch(g,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:GP(i,!0),values:n._stacks[e.axis]._visualValues};return y3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=y3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=xQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=yQ(a);let v,g;function x(){g=i[v];const E=g[a.axis];return!ko(g[e.axis])||h>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,g,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,g,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],ko(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=gQ(ui(this.options.clip,pQ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const p=i[h];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=wQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=_Q(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&bm(r);if(a)return x3(a,l);const c=this.chart.config,h=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),h),g=Object.keys(Ao.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,g,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(x3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,n),v=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(v,this.getContext(e,r,n))}const c=new WP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||L2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){L2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!L2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&lg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Je(xc,"defaults",{}),Je(xc,"datasetElementType",null),Je(xc,"dataElementType",null);function LQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=EP(r.sort((i,s)=>i-s))}return t._cache.$bar}function SQ(t){const e=t.iScale,n=LQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(bm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function CQ(t,e,n,r){const i=n.barThickness;let s,o;return Wi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function EQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function PQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function qP(t,e,n,r){return Ks(t)?PQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function L3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,h,p,v;for(c=n,h=n+r;c<h;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(qP(v,p,s,c));return l}function S2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function MQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function kQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function AQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:h}=kQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(s[S3(h,o,a,l)]=!0,i=c)),s[S3(i,o,a,l)]=!0,t.borderSkipped=s}function S3(t,e,n,r){return r?(t=TQ(t,e,n),t=C3(t,n,e)):t=C3(t,e,n),t}function TQ(t,e,n){return t===e?n:t===n?e:t}function C3(t,e,n){return t==="start"?e:t==="end"?n:t}function DQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class pv extends xc{parsePrimitiveData(e,n,r,i){return L3(e,n,r,i)}parseArrayData(e,n,r,i){return L3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,h=o.axis==="x"?a:l,p=[];let v,g,x,E;for(v=r,g=r+i;v<g;++v)E=n[v],x={},x[s.axis]=s.parse(Ch(E,c),v),p.push(qP(Ch(E,h),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=S2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let g=n;g<n+r;g++){const x=this.getParsed(g),E=s||Wi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(g),k=this._calculateBarIndexPixels(g,h),A=(x._stacks||{})[a.axis],D={horizontal:c,base:E.base,enableBorderRadius:!A||S2(x._custom)||o===A._top||o===A._bottom,x:c?E.head:k.center,y:c?k.center:E.head,height:c?k.size:Math.abs(E.size),width:c?Math.abs(E.size):k.size};v&&(D.options=p||this.resolveDataElementOptions(g,e[g].active?"active":i));const z=D.options||e[g].options;AQ(D,z,A,o),DQ(D,z,h.ratio),this.updateElement(e[g],g,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),h=c&&c[l.vScale.axis];if(Wi(h)||isNaN(h))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||SQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,h=S2(c);let p=l[n.axis],v=0,g=r?this.applyStack(n,l,r):p,x,E;g!==p&&(v=g-p,g=p),h&&(p=c.barStart,g=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const k=!Wi(s)&&!h?s:v;let A=n.getPixelForValue(k);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+g):x=A,E=x-A,Math.abs(E)<o){E=MQ(E,n,a)*o,p===a&&(A-=E/2);const D=n.getPixelForDecimal(0),z=n.getPixelForDecimal(1),Y=Math.min(D,z),te=Math.max(D,z);A=Math.max(Math.min(A,te),Y),x=A+E,r&&!h&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(A))}if(A===n.getPixelForValue(a)){const D=Qc(E)*n.getLineWidthForValue(a)/2;A+=D,E-=D}return{size:E,base:A,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ui(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,h=i.barThickness==="flex"?EQ(e,n,i,c):CQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=h.start+h.chunk*p+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Je(pv,"id","bar"),Je(pv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Je(pv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class gv extends xc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ui(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ui(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),h=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const g=e[v],x=!s&&this.getParsed(v),E={},k=E[h]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[h]),A=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(k)||isNaN(A),c&&(E.options=l||this.resolveDataElementOptions(v,g.active?"active":i),s&&(E.options.radius=0)),this.updateElement(g,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ui(r&&r._custom,s),i}}Je(gv,"id","bubble"),Je(gv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Je(gv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function OQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<Is){const a=t,l=a+e,c=Math.cos(a),h=Math.sin(a),p=Math.cos(l),v=Math.sin(l),g=(z,Y,te)=>_m(z,a,l,!0)?1:Math.max(Y,Y*n,te,te*n),x=(z,Y,te)=>_m(z,a,l,!0)?-1:Math.min(Y,Y*n,te,te*n),E=g(0,c,p),k=g(Go,h,v),A=x(Bs,c,p),D=x(Bs+Go,h,v);r=(E-A)/2,i=(k-D)/2,s=-(E+A)/2,o=-(k+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class af extends xc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Oi(r[e])){const{key:l="value"}=this._parsing;s=c=>+Ch(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return _c(this.options.rotation-90)}_getCircumference(){return _c(this.options.circumference)}_getRotationExtents(){let e=Is,n=-Is;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(qX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:g,offsetX:x,offsetY:E}=OQ(p,h,l),k=(r.width-o)/v,A=(r.height-o)/g,D=Math.max(Math.min(k,A)/2,0),z=wP(this.options.radius,D),Y=Math.max(z*l,0),te=(z-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*z,this.offsetY=E*z,i.total=this.calculateTotal(),this.outerRadius=z-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/Is)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,h=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,g=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:k}=this._getSharedOptions(n,i);let A=this._getRotation(),D;for(D=0;D<n;++D)A+=this._circumference(D,s);for(D=n;D<n+r;++D){const z=this._circumference(D,s),Y=e[D],te={x:h+this.offsetX,y:p+this.offsetY,startAngle:A,endAngle:A+z,circumference:z,outerRadius:x,innerRadius:g};k&&(te.options=E||this.resolveDataElementOptions(D,Y.active?"active":i)),A+=z,this.updateElement(Y,D,te,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?Is*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Bm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ui(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Je(af,"id","doughnut"),Je(af,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Je(af,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Je(af,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class mv extends xc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=kP(n,i,o);this._drawStart=a,this._drawCount=l,AP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,g=a.axis,{spanGaps:x,segment:E}=this.options,k=Tp(x)?x:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||s||i==="none",D=n+r,z=e.length;let Y=n>0&&this.getParsed(n-1);for(let te=0;te<z;++te){const ge=e[te],pe=A?ge:{};if(te<n||te>=D){pe.skip=!0;continue}const N=this.getParsed(te),j=Wi(N[g]),K=pe[v]=o.getPixelForValue(N[v],te),I=pe[g]=s||j?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,N,l):N[g],te);pe.skip=isNaN(K)||isNaN(I)||j,pe.stop=te>0&&Math.abs(N[v]-Y[v])>k,E&&(pe.parsed=N,pe.raw=c.data[te]),p&&(pe.options=h||this.resolveDataElementOptions(te,ge.active?"active":i)),A||this.updateElement(ge,te,pe,i),Y=N}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Je(mv,"id","line"),Je(mv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Je(mv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class em extends xc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Bm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*Bs;let g=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)g+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const k=e[x];let A=g,D=g+this._computeAngle(x,i,E),z=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;g=D,s&&(l.animateScale&&(z=0),l.animateRotate&&(A=D=v));const Y={x:h,y:p,innerRadius:0,outerRadius:z,startAngle:A,endAngle:D,options:this.resolveDataElementOptions(x,k.active?"active":i)};this.updateElement(k,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?_c(this.resolveDataElementOptions(e,n).angle||r):0}}Je(em,"id","polarArea"),Je(em,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Je(em,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Vb extends af{}Je(Vb,"id","pie"),Je(Vb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class vv extends xc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return FP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),h=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:h.x,v=o?s.yCenter:h.y,g={x:p,y:v,angle:h.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,g,i)}}}Je(vv,"id","radar"),Je(vv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Je(vv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class yv extends xc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=kP(n,r,i);if(this._drawStart=s,this._drawCount=o,AP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,h=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(h),v=this.includeOptions(i,p),g=o.axis,x=a.axis,{spanGaps:E,segment:k}=this.options,A=Tp(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let z=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const te=e[Y],ge=this.getParsed(Y),pe=D?te:{},N=Wi(ge[x]),j=pe[g]=o.getPixelForValue(ge[g],Y),K=pe[x]=s||N?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,ge,l):ge[x],Y);pe.skip=isNaN(j)||isNaN(K)||N,pe.stop=Y>0&&Math.abs(ge[g]-z[g])>A,k&&(pe.parsed=ge,pe.raw=c.data[Y]),v&&(pe.options=p||this.resolveDataElementOptions(Y,te.active?"active":i)),D||this.updateElement(te,Y,pe,i),z=ge}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Je(yv,"id","scatter"),Je(yv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Je(yv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var NQ=Object.freeze({__proto__:null,BarController:pv,BubbleController:gv,DoughnutController:af,LineController:mv,PieController:Vb,PolarAreaController:em,RadarController:vv,ScatterController:yv});function Zh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ow{constructor(e){Je(this,"options");this.options=e||{}}static override(e){Object.assign(ow.prototype,e)}init(){}formats(){return Zh()}parse(){return Zh()}format(){return Zh()}add(){return Zh()}diff(){return Zh()}startOf(){return Zh()}endOf(){return Zh()}}var YP={_date:ow};function IQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?sJ:Dd;if(r){if(i._sharedOptions){const c=s[0],h=typeof c.getRange=="function"&&c.getRange(e);if(h){const p=l(s,e,n-h),v=l(s,e,n+h);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Zy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:h}=s[a],{lo:p,hi:v}=IQ(s[a],e,o,i);for(let g=p;g<=v;++g){const x=h[g];x.skip||r(x,c,g)}}}function BQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function C2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Zy(t,n,e,function(a,l,c){!i&&!Od(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function RQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:h}=o.getProps(["startAngle","endAngle"],r),{angle:p}=SP(o,{x:e.x,y:e.y});_m(p,c,h)&&i.push({element:o,datasetIndex:a,index:l})}return Zy(t,n,e,s),i}function FQ(t,e,n,r,i,s){let o=[];const a=BQ(n);let l=Number.POSITIVE_INFINITY;function c(h,p,v){const g=h.inRange(e.x,e.y,i);if(r&&!g)return;const x=h.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!g)return;const k=a(e,x);k<l?(o=[{element:h,datasetIndex:p,index:v}],l=k):k===l&&o.push({element:h,datasetIndex:p,index:v})}return Zy(t,n,e,c),o}function E2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?RQ(t,e,n,i):FQ(t,e,n,r,i,s)}function E3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Zy(t,n,e,(l,c,h)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:h}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var jQ={modes:{index(t,e,n,r){const i=ef(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const h=a[0].index,p=c.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:h})}),l):[]},dataset(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?C2(t,i,s,r,o):E2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let h=0;h<c.length;++h)a.push({element:c[h],datasetIndex:l,index:h})}return a},point(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return C2(t,i,s,r,o)},nearest(t,e,n,r){const i=ef(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=ef(e,t);return E3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=ef(e,t);return E3(t,i,"y",n.intersect,r)}}};const KP=["left","top","right","bottom"];function ug(t,e){return t.filter(n=>n.pos===e)}function P3(t,e){return t.filter(n=>KP.indexOf(n.pos)===-1&&n.box.axis===e)}function cg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function zQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function $Q(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!KP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function VQ(t,e){const n=$Q(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],h=c&&a.stackWeight/c.weight;a.horizontal?(a.width=h?h*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=h?h*i:l&&e.availableHeight)}return n}function UQ(t){const e=zQ(t),n=cg(e.filter(c=>c.box.fullSize),!0),r=cg(ug(e,"left"),!0),i=cg(ug(e,"right")),s=cg(ug(e,"top"),!0),o=cg(ug(e,"bottom")),a=P3(e,"x"),l=P3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:ug(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function M3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function ZP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function HQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Oi(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&ZP(o,s.getPadding());const a=Math.max(0,e.outerWidth-M3(o,t,"left","right")),l=Math.max(0,e.outerHeight-M3(o,t,"top","bottom")),c=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function WQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function GQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Mg(t,e,n,r){const i=[];let s,o,a,l,c,h;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,GQ(a.horizontal,e));const{same:p,other:v}=HQ(e,n,a,r);c|=p&&i.length,h=h||v,l.fullSize||i.push(a)}return c&&Mg(i,e,n,r)||h}function R0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function k3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},h=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*h,v=c.size||l.height;bm(c.start)&&(o=c.start),l.fullSize?R0(l,i.left,o,n.outerWidth-i.right-i.left,v):R0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*h,v=c.size||l.width;bm(c.start)&&(s=c.start),l.fullSize?R0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):R0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var vl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=yl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=UQ(t.boxes),l=a.vertical,c=a.horizontal;us(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const h=l.reduce((E,k)=>k.box.options&&k.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),v=Object.assign({},i);ZP(v,yl(r));const g=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=VQ(l.concat(c),p);Mg(a.fullSize,g,p,x),Mg(l,g,p,x),Mg(c,g,p,x)&&Mg(l,g,p,x),WQ(g),k3(a.leftAndTop,g,p,x),g.x+=g.w,g.y+=g.h,k3(a.rightAndBottom,g,p,x),t.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},us(a.chartArea,E=>{const k=E.box;Object.assign(k,t.chartArea),k.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}};class XP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class qQ extends XP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const bv="$chartjs",YQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},A3=t=>t===null||t==="";function KQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[bv]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",A3(i)){const s=h3(t,"width");s!==void 0&&(t.width=s)}if(A3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=h3(t,"height");s!==void 0&&(t.height=s)}return t}const JP=JJ?{passive:!0}:!1;function ZQ(t,e,n){t.addEventListener(e,n,JP)}function XQ(t,e,n){t.canvas.removeEventListener(e,n,JP)}function JQ(t,e){const n=YQ[t.type]||t.type,{x:r,y:i}=ef(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function oy(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function QQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.addedNodes,r),o=o&&!oy(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function eee(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||oy(a.removedNodes,r),o=o&&!oy(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const xm=new Map;let T3=0;function QP(){const t=window.devicePixelRatio;t!==T3&&(T3=t,xm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function tee(t,e){xm.size||window.addEventListener("resize",QP),xm.set(t,e)}function nee(t){xm.delete(t),xm.size||window.removeEventListener("resize",QP)}function ree(t,e,n){const r=t.canvas,i=r&&sw(r);if(!i)return;const s=MP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,h=l.contentRect.height;c===0&&h===0||s(c,h)});return o.observe(i),tee(t,s),o}function P2(t,e,n){n&&n.disconnect(),e==="resize"&&nee(t)}function iee(t,e,n){const r=t.canvas,i=MP(s=>{t.ctx!==null&&n(JQ(s,t))},t);return ZQ(r,e,i),i}class see extends XP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(KQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[bv])return!1;const r=n[bv].initial;["height","width"].forEach(s=>{const o=r[s];Wi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[bv],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:QQ,detach:eee,resize:ree}[n]||iee;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:P2,detach:P2,resize:P2}[n]||XQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return XJ(e,n,r,i)}isAttached(e){const n=sw(e);return!!(n&&n.isConnected)}}function oee(t){return!iw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?qQ:see}var G0;let zd=(G0=class{constructor(){Je(this,"x");Je(this,"y");Je(this,"active",!1);Je(this,"options");Je(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Tp(this.x)&&Tp(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Je(G0,"defaults",{}),Je(G0,"defaultRoutes"),G0);function aee(t,e){const n=t.options.ticks,r=lee(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?cee(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return dee(e,c,s,o/i),c;const h=uee(s,e,i);if(o>0){let p,v;const g=o>1?Math.round((l-a)/(o-1)):null;for(F0(e,c,h,Wi(g)?0:a-g,a),p=0,v=o-1;p<v;p++)F0(e,c,h,s[p],s[p+1]);return F0(e,c,h,l,Wi(g)?e.length:l+g),c}return F0(e,c,h),c}function lee(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function uee(t,e,n){const r=hee(t),i=e.length/n;if(!r)return Math.max(i,1);const s=tJ(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function cee(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function dee(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function F0(t,e,n,r,i){const s=ui(r,0),o=Math.min(ui(i,t.length),t.length);let a=0,l,c,h;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===h&&(e.push(t[c]),a++,h=Math.round(s+a*n))}function hee(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const fee=t=>t==="left"?"right":t==="right"?"left":t,D3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,O3=(t,e)=>Math.min(e||t,t);function N3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function pee(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function gee(t,e){us(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function dg(t){return t.drawTicks?t.tickLength:0}function I3(t,e){if(!t.display)return 0;const n=pa(t.font,e),r=yl(t.padding);return(Ks(t.text)?t.text.length:1)*n.lineHeight+r.height}function mee(t,e){return Ah(t,{scale:e,type:"scale"})}function vee(t,e,n){return Ah(t,{tick:n,index:e,type:"tick"})}function yee(t,e,n){let r=J_(t);return(n&&e!=="right"||!n&&e==="right")&&(r=fee(r)),r}function bee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:h}=l;let p=0,v,g,x;const E=o-i,k=a-s;if(t.isHorizontal()){if(g=cl(r,s,a),Oi(n)){const A=Object.keys(n)[0],D=n[A];x=h[A].getPixelForValue(D)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=D3(t,n,e);v=a-s}else{if(Oi(n)){const A=Object.keys(n)[0],D=n[A];g=h[A].getPixelForValue(D)-k+e}else n==="center"?g=(c.left+c.right)/2-k+e:g=D3(t,n,e);x=cl(r,o,i),p=n==="left"?-Go:Go}return{titleX:g,titleY:x,maxWidth:v,rotation:p}}class Cf extends zd{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=wu(e,Number.POSITIVE_INFINITY),n=wu(n,Number.NEGATIVE_INFINITY),r=wu(r,Number.POSITIVE_INFINITY),i=wu(i,Number.NEGATIVE_INFINITY),{min:wu(e,r),max:wu(n,i),minDefined:ko(e),maxDefined:ko(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:wu(n,wu(r,n)),max:wu(r,wu(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ks(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=kJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?N3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=aee(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ks(this.options.afterUpdate,[this])}beforeSetDimensions(){ks(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ks(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),ks(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ks(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=ks(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){ks(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ks(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=O3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,v=h.highest.height,g=Pa(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:g/(r-1),p+6>a&&(a=g/(r-(e.offset?.5:1)),l=this.maxHeight-dg(e.grid)-n.padding-I3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Z_(Math.min(Math.asin(Pa((h.highest.height+6)/a,-1,1)),Math.asin(Pa(l/c,-1,1))-Math.asin(Pa(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){ks(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ks(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=I3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=dg(s)+l):(e.height=this.maxHeight,e.width=dg(s)+l),r.display&&this.ticks.length){const{first:c,last:h,widest:p,highest:v}=this._getLabelSizes(),g=r.padding*2,x=_c(this.labelRotation),E=Math.cos(x),k=Math.sin(x);if(a){const A=r.mirror?0:k*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+A+g)}else{const A=r.mirror?0:E*p.width+k*v.height;e.width=Math.min(this.maxWidth,e.width+A+g)}this._calculatePadding(c,h,k,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,g=0;l?c?(v=i*e.width,g=r*n.height):(v=r*e.height,g=i*n.width):s==="start"?g=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,g=n.width/2),this.paddingLeft=Math.max((v-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-p+o)*this.width/(this.width-p),0)}else{let h=n.height/2,p=e.height/2;s==="start"?(h=0,p=e.height):s==="end"&&(h=n.height,p=0),this.paddingTop=h+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ks(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Wi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=N3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/O3(n,r));let c=0,h=0,p,v,g,x,E,k,A,D,z,Y,te;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=k=E.string,A=s[k]=s[k]||{data:{},gc:[]},D=E.lineHeight,z=Y=0,!Wi(x)&&!Ks(x))z=iy(i,A.data,A.gc,z,x),Y=D;else if(Ks(x))for(v=0,g=x.length;v<g;++v)te=x[v],!Wi(te)&&!Ks(te)&&(z=iy(i,A.data,A.gc,z,te),Y+=D);o.push(z),a.push(Y),c=Math.max(z,c),h=Math.max(Y,h)}gee(s,n);const ge=o.indexOf(c),pe=a.indexOf(h),N=j=>({width:o[j]||0,height:a[j]||0});return{first:N(0),last:N(n-1),widest:N(ge),highest:N(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return iJ(this._alignToPixels?Kh(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=vee(this.getContext(),e,r))}return this.$context||(this.$context=mee(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=_c(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=dg(s),g=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,k=E/2,A=function(V){return Kh(r,V,E)};let D,z,Y,te,ge,pe,N,j,K,I,R,B;if(o==="top")D=A(this.bottom),pe=this.bottom-v,j=D-k,I=A(e.top)+k,B=e.bottom;else if(o==="bottom")D=A(this.top),I=e.top,B=A(e.bottom)-k,pe=D+k,j=this.top+v;else if(o==="left")D=A(this.right),ge=this.right-v,N=D-k,K=A(e.left)+k,R=e.right;else if(o==="right")D=A(this.left),K=e.left,R=A(e.right)-k,ge=D+k,N=this.left+v;else if(n==="x"){if(o==="center")D=A((e.top+e.bottom)/2+.5);else if(Oi(o)){const V=Object.keys(o)[0],ne=o[V];D=A(this.chart.scales[V].getPixelForValue(ne))}I=e.top,B=e.bottom,pe=D+k,j=pe+v}else if(n==="y"){if(o==="center")D=A((e.left+e.right)/2);else if(Oi(o)){const V=Object.keys(o)[0],ne=o[V];D=A(this.chart.scales[V].getPixelForValue(ne))}ge=D-k,N=ge-v,K=e.left,R=e.right}const $=ui(i.ticks.maxTicksLimit,p),U=Math.max(1,Math.ceil(p/$));for(z=0;z<p;z+=U){const V=this.getContext(z),ne=s.setContext(V),X=a.setContext(V),we=ne.lineWidth,ve=ne.color,Ze=X.dash||[],ie=X.dashOffset,H=ne.tickWidth,Z=ne.tickColor,me=ne.tickBorderDash||[],fe=ne.tickBorderDashOffset;Y=pee(this,z,l),Y!==void 0&&(te=Kh(r,Y,we),c?ge=N=K=R=te:pe=j=I=B=te,g.push({tx1:ge,ty1:pe,tx2:N,ty2:j,x1:K,y1:I,x2:R,y2:B,width:we,color:ve,borderDash:Ze,borderDashOffset:ie,tickWidth:H,tickColor:Z,tickBorderDash:me,tickBorderDashOffset:fe}))}return this._ticksLength=p,this._borderValue=D,g}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:h,mirror:p}=s,v=dg(r.grid),g=v+h,x=p?-h:g,E=-_c(this.labelRotation),k=[];let A,D,z,Y,te,ge,pe,N,j,K,I,R,B="middle";if(i==="top")ge=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")ge=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,te=U.x}else if(i==="right"){const U=this._getYAxisLabelAlignment(v);pe=U.textAlign,te=U.x}else if(n==="x"){if(i==="center")ge=(e.top+e.bottom)/2+g;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];ge=this.chart.scales[U].getPixelForValue(V)+g}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")te=(e.left+e.right)/2-g;else if(Oi(i)){const U=Object.keys(i)[0],V=i[U];te=this.chart.scales[U].getPixelForValue(V)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?B="top":l==="end"&&(B="bottom"));const $=this._getLabelSizes();for(A=0,D=a.length;A<D;++A){z=a[A],Y=z.label;const U=s.setContext(this.getContext(A));N=this.getPixelForTick(A)+s.labelOffset,j=this._resolveTickFontOptions(A),K=j.lineHeight,I=Ks(Y)?Y.length:1;const V=I/2,ne=U.color,X=U.textStrokeColor,we=U.textStrokeWidth;let ve=pe;o?(te=N,pe==="inner"&&(A===D-1?ve=this.options.reverse?"left":"right":A===0?ve=this.options.reverse?"right":"left":ve="center"),i==="top"?c==="near"||E!==0?R=-I*K+K/2:c==="center"?R=-$.highest.height/2-V*K+K:R=-$.highest.height+K/2:c==="near"||E!==0?R=K/2:c==="center"?R=$.highest.height/2-V*K:R=$.highest.height-I*K,p&&(R*=-1),E!==0&&!U.showLabelBackdrop&&(te+=K/2*Math.sin(E))):(ge=N,R=(1-I)*K/2);let Ze;if(U.showLabelBackdrop){const ie=yl(U.backdropPadding),H=$.heights[A],Z=$.widths[A];let me=R-ie.top,fe=0-ie.left;switch(B){case"middle":me-=H/2;break;case"bottom":me-=H;break}switch(pe){case"center":fe-=Z/2;break;case"right":fe-=Z;break;case"inner":A===D-1?fe-=Z:A>0&&(fe-=Z/2);break}Ze={left:fe,top:me,width:Z+ie.width,height:H+ie.height,color:U.backdropColor}}k.push({label:Y,font:j,textOffset:R,options:{rotation:E,color:ne,strokeColor:X,strokeWidth:we,textAlign:ve,textBaseline:B,translation:[te,ge],backdrop:Ze}})}return k}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-_c(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,h;return n==="left"?i?(h=this.right+s,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h+=l)):(h=this.right-a,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h=this.left)):n==="right"?i?(h=this.left+s,r==="near"?c="right":r==="center"?(c="center",h-=l/2):(c="left",h-=l)):(h=this.left+a,r==="near"?c="left":r==="center"?(c="center",h+=l/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,h,p,v;this.isHorizontal()?(c=Kh(e,this.left,o)-o/2,h=Kh(e,this.right,a)+a/2,p=v=l):(p=Kh(e,this.top,o)-o/2,v=Kh(e,this.bottom,a)+a/2,c=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(h,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&qy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,h=o.textOffset;wf(r,c,0,h,l,a)}i&&Yy(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=pa(r.font),o=yl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Oi(n)?(l+=o.bottom,Ks(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:h,maxWidth:p,rotation:v}=bee(this,l,n,a);wf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:yee(a,n,i),textBaseline:"middle",translation:[c,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ui(e.grid&&e.grid.z,-1),i=ui(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Cf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return pa(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class j0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;xee(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,_ee(e,o,r),this.override&&Ao.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Ao[i]&&(delete Ao[i][r],this.override&&delete _f[r])}}function _ee(t,e,n){const r=ym(Object.create(null),[n?Ao.get(n):{},Ao.get(e),t.defaults]);Ao.set(e,r),t.defaultRoutes&&wee(e,t.defaultRoutes),t.descriptors&&Ao.describe(e,t.descriptors)}function wee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Ao.route(s,i,l,a)})}function xee(t){return"id"in t&&"defaults"in t}class Lee{constructor(){this.controllers=new j0(xc,"datasets",!0),this.elements=new j0(zd,"elements"),this.plugins=new j0(Object,"plugins"),this.scales=new j0(Cf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):us(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=K_(e);ks(r["before"+i],[],r),n[e](r),ks(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new Lee;class See{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(ks(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Wi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ui(r.options&&r.options.plugins,{}),s=Cee(r);return i===!1&&!n?[]:Pee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function Cee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Eee(t,e){return!e&&t===!1?null:t===!0?{}:t}function Pee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Eee(r[l],i);c!==null&&s.push({plugin:a,options:Mee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Mee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ub(t,e){const n=Ao.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function kee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Aee(t,e){return t===e?"_index_":"_value_"}function B3(t){if(t==="x"||t==="y"||t==="r")return t}function Tee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Hb(t,...e){if(B3(t))return t;for(const n of e){const r=n.axis||Tee(n.position)||t.length>1&&B3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function R3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Dee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return R3(t,"x",n[0])||R3(t,"y",n[0])}return{}}function Oee(t,e){const n=_f[t.type]||{scales:{}},r=e.scales||{},i=Ub(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Oi(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Hb(o,a,Dee(o,t),Ao.scales[a.type]),c=Aee(l,i),h=n.scales||{};s[o]=Zg(Object.create(null),[{axis:l},a,h[l],h[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Ub(a,e),h=(_f[a]||{}).scales||{};Object.keys(h).forEach(p=>{const v=kee(p,l),g=o[v+"AxisID"]||v;s[g]=s[g]||Object.create(null),Zg(s[g],[{axis:v},r[g],h[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Zg(a,[Ao.scales[a.type],Ao.scale])}),s}function eM(t){const e=t.options||(t.options={});e.plugins=ui(e.plugins,{}),e.scales=Oee(t,e)}function tM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Nee(t){return t=t||{},t.data=tM(t.data),eM(t),t}const F3=new Map,nM=new Set;function z0(t,e){let n=F3.get(t);return n||(n=e(),F3.set(t,n),nM.add(n)),n}const hg=(t,e,n)=>{const r=Ch(e,n);r!==void 0&&t.add(r)};class Iee{constructor(e){this._config=Nee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=tM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),eM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return z0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return z0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return z0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return z0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(p=>hg(l,e,p))),h.forEach(p=>hg(l,i,p)),h.forEach(p=>hg(l,_f[s]||{},p)),h.forEach(p=>hg(l,Ao,p)),h.forEach(p=>hg(l,zb,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),nM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,_f[n]||{},Ao.datasets[n]||{},{type:n},Ao,zb]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=j3(this._resolverCache,e,i);let l=o;if(Ree(o,n)){s.$shared=!1,r=Eh(r)?r():r;const c=this.createResolver(e,r,a);l=Dp(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=j3(this._resolverCache,e,r);return Oi(n)?Dp(s,n,void 0,i):s}}function j3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:tw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const Bee=t=>Oi(t)&&Object.getOwnPropertyNames(t).some(e=>Eh(t[e]));function Ree(t,e){const{isScriptable:n,isIndexable:r}=NP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Eh(a)||Bee(a))||o&&Ks(a))return!0}return!1}var Fee="4.4.1";const jee=["top","bottom","left","right","chartArea"];function z3(t,e){return t==="top"||t==="bottom"||jee.indexOf(t)===-1&&e==="x"}function $3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function V3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),ks(n&&n.onComplete,[t],e)}function zee(t){const e=t.chart,n=e.options.animation;ks(n&&n.onProgress,[t],e)}function rM(t){return iw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _v={},U3=t=>{const e=rM(t);return Object.values(_v).filter(n=>n.canvas===e).pop()};function $ee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Vee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function $0(t,e,n){return t.options.clip?t[n]:e[n]}function Uee(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:$0(n,e,"left"),right:$0(n,e,"right"),top:$0(r,e,"top"),bottom:$0(r,e,"bottom")}:e}class Wc{static register(...e){Vc.add(...e),H3()}static unregister(...e){Vc.remove(...e),H3()}constructor(e,n){const r=this.config=new Iee(n),i=rM(e),s=U3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||oee(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,h=l&&l.width;if(this.id=GX(),this.ctx=a,this.canvas=l,this.width=h,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new See,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=lJ(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],_v[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xd.listen(this,"complete",V3),xd.listen(this,"progress",zee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Wi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():d3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return l3(this.canvas,this.ctx),this}stop(){return xd.stop(this),this}resize(e,n){xd.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,d3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ks(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};us(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Hb(o,a),c=l==="r",h=l==="x";return{options:a,dposition:c?"chartArea":h?"bottom":"left",dtype:c?"radialLinear":h?"category":"linear"}}))),us(s,o=>{const a=o.options,l=a.id,c=Hb(l,a),h=ui(a.type,o.dtype);(a.position===void 0||z3(a.position,c)!==z3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const v=Vc.getScale(h);p=new v({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),us(i,(o,a)=>{o||delete r[a]}),us(r,o=>{vl.configure(this,o,o.options),vl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort($3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Ub(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:h}=Ao.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(h),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){us(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,h=this.data.datasets.length;c<h;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||us(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort($3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){us(this.scales,e=>{vl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!Q5(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;$ee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!Q5(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],us(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Eh(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xd.has(this)?this.attached&&!xd.running(this)&&xd.start(this):(this.draw(),V3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=Uee(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&qy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Yy(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Od(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=jQ.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ah(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);bm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),xd.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),l3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _v[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};us(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){us(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},us(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ty(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(h=>!c.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=JX(e),c=Vee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,ks(s.onHover,[e,a,this],this),l&&ks(s.onClick,[e,a,this],this));const h=!ty(a,i);return(h||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,h}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Je(Wc,"defaults",Ao),Je(Wc,"instances",_v),Je(Wc,"overrides",_f),Je(Wc,"registry",Vc),Je(Wc,"version",Fee),Je(Wc,"getChart",U3);function H3(){return us(Wc.instances,t=>t._plugins.invalidate())}function Hee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Go,r-Go),t.closePath(),t.clip()}function Wee(t){return ew(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Gee(t,e,n,r){const i=Wee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Pa(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Pa(i.innerStart,0,o),innerEnd:Pa(i.innerEnd,0,o)}}function Qf(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ay(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:h}=e,p=Math.max(e.outerRadius+r+n-c,0),v=h>0?h+r+n+c:0;let g=0;const x=i-l;if(r){const U=h>0?h-r:0,V=p>0?p-r:0,ne=(U+V)/2,X=ne!==0?x*ne/(ne+r):x;g=(x-X)/2}const E=Math.max(.001,x*p-n/Bs)/p,k=(x-E)/2,A=l+k+g,D=i-k-g,{outerStart:z,outerEnd:Y,innerStart:te,innerEnd:ge}=Gee(e,v,p,D-A),pe=p-z,N=p-Y,j=A+z/pe,K=D-Y/N,I=v+te,R=v+ge,B=A+te/I,$=D-ge/R;if(t.beginPath(),s){const U=(j+K)/2;if(t.arc(o,a,p,j,U),t.arc(o,a,p,U,K),Y>0){const we=Qf(N,K,o,a);t.arc(we.x,we.y,Y,K,D+Go)}const V=Qf(R,D,o,a);if(t.lineTo(V.x,V.y),ge>0){const we=Qf(R,$,o,a);t.arc(we.x,we.y,ge,D+Go,$+Math.PI)}const ne=(D-ge/v+(A+te/v))/2;if(t.arc(o,a,v,D-ge/v,ne,!0),t.arc(o,a,v,ne,A+te/v,!0),te>0){const we=Qf(I,B,o,a);t.arc(we.x,we.y,te,B+Math.PI,A-Go)}const X=Qf(pe,A,o,a);if(t.lineTo(X.x,X.y),z>0){const we=Qf(pe,j,o,a);t.arc(we.x,we.y,z,A-Go,j)}}else{t.moveTo(o,a);const U=Math.cos(j)*p+o,V=Math.sin(j)*p+a;t.lineTo(U,V);const ne=Math.cos(K)*p+o,X=Math.sin(K)*p+a;t.lineTo(ne,X)}t.closePath()}function qee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ay(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%Is||Is))}return ay(t,e,n,r,l,i),t.fill(),l}function Yee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:p,borderDashOffset:v}=l,g=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,g?(t.lineWidth=c*2,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let x=e.endAngle;if(s){ay(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%Is||Is))}g&&Hee(t,e,x),s||(ay(t,e,n,r,x,i),t.stroke())}class kg extends zd{constructor(n){super();Je(this,"circumference");Je(this,"endAngle");Je(this,"fullCircles");Je(this,"innerRadius");Je(this,"outerRadius");Je(this,"pixelMargin");Je(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=SP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:h,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),g=(this.options.spacing+this.options.borderWidth)/2,E=ui(v,c-l)>=Is||_m(o,l,c),k=Td(a,h+g,p+g);return E&&k}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:h}=this.options,p=(s+o)/2,v=(a+l+h+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>Is?Math.floor(i/Is):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(Bs,i||0)),h=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,qee(n,this,h,o,a),Yee(n,this,h,o,a),n.restore()}}Je(kg,"id","arc"),Je(kg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Je(kg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Je(kg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function iM(t,e,n=e){t.lineCap=ui(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ui(n.borderDash,e.borderDash)),t.lineDashOffset=ui(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ui(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ui(n.borderWidth,e.borderWidth),t.strokeStyle=ui(n.borderColor,e.borderColor)}function Kee(t,e,n){t.lineTo(n.x,n.y)}function Zee(t){return t.stepped?_J:t.tension||t.cubicInterpolationMode==="monotone"?wJ:Kee}function sM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),h=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Xee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=sM(i,n,r),h=Zee(s);let{move:p=!0,reverse:v}=r||{},g,x,E;for(g=0;g<=c;++g)x=i[(a+(v?c-g:g))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):h(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],h(t,E,x,v,s.stepped)),!!l}function Jee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=sM(i,n,r),{move:l=!0,reverse:c}=r||{};let h=0,p=0,v,g,x,E,k,A;const D=Y=>(o+(c?a-Y:Y))%s,z=()=>{E!==k&&(t.lineTo(h,k),t.lineTo(h,E),t.lineTo(h,A))};for(l&&(g=i[D(0)],t.moveTo(g.x,g.y)),v=0;v<=a;++v){if(g=i[D(v)],g.skip)continue;const Y=g.x,te=g.y,ge=Y|0;ge===x?(te<E?E=te:te>k&&(k=te),h=(p*h+Y)/++p):(z(),t.lineTo(Y,te),x=ge,p=0,E=k=te),A=te}z()}function Wb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Jee:Xee}function Qee(t){return t.stepped?QJ:t.tension||t.cubicInterpolationMode==="monotone"?eQ:tf}function ete(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),iM(t,e.options),t.stroke(i)}function tte(t,e,n,r){const{segments:i,options:s}=e,o=Wb(e);for(const a of i)iM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const nte=typeof Path2D=="function";function rte(t,e,n,r){nte&&!e.options.segment?ete(t,e,n,r):tte(t,e,n,r)}class ph extends zd{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;WJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=oQ(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=HP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Qee(r);let c,h;for(c=0,h=o.length;c<h;++c){const{start:p,end:v}=o[c],g=s[p],x=s[v];if(g===x){a.push(g);continue}const E=Math.abs((i-g[n])/(x[n]-g[n])),k=l(g,x,E,r.stepped);k[n]=e[n],a.push(k)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Wb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Wb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),rte(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Je(ph,"id","line"),Je(ph,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Je(ph,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Je(ph,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function W3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class wv extends zd{constructor(n){super();Je(this,"parsed");Je(this,"skip");Je(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return W3(this,n,"x",r)}inYRange(n,r){return W3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Od(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,$b(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Je(wv,"id","point"),Je(wv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Je(wv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function oM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,h,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,h=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),h=Math.max(r,i)),{left:a,top:c,right:l,bottom:h}}function gh(t,e,n,r){return t?0:Pa(e,n,r)}function ite(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=OP(r);return{t:gh(i.top,s.top,0,n),r:gh(i.right,s.right,0,e),b:gh(i.bottom,s.bottom,0,n),l:gh(i.left,s.left,0,e)}}function ste(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=pf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Oi(i);return{topLeft:gh(!l||a.top||a.left,s.topLeft,0,o),topRight:gh(!l||a.top||a.right,s.topRight,0,o),bottomLeft:gh(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:gh(!l||a.bottom||a.right,s.bottomRight,0,o)}}function ote(t){const e=oM(t),n=e.right-e.left,r=e.bottom-e.top,i=ite(t,n/2,r/2),s=ste(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function M2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&oM(t,r);return a&&(i||Td(e,a.left,a.right))&&(s||Td(n,a.top,a.bottom))}function ate(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function lte(t,e){t.rect(e.x,e.y,e.w,e.h)}function k2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class xv extends zd{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=ote(this),a=ate(o.radius)?wm:lte;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,k2(o,n,s)),e.clip(),a(e,k2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,k2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return M2(this,e,n,r)}inXRange(e,n){return M2(this,e,null,n)}inYRange(e,n){return M2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Je(xv,"id","bar"),Je(xv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Je(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var ute=Object.freeze({__proto__:null,ArcElement:kg,BarElement:xv,LineElement:ph,PointElement:wv});const Gb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],G3=Gb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function aM(t){return Gb[t%Gb.length]}function lM(t){return G3[t%G3.length]}function cte(t,e){return t.borderColor=aM(e),t.backgroundColor=lM(e),++e}function dte(t,e){return t.backgroundColor=t.data.map(()=>aM(e++)),e}function hte(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function fte(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof af?e=dte(n,e):i instanceof em?e=hte(n,e):i&&(e=cte(n,e))}}function q3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function pte(t){return t&&(t.borderColor||t.backgroundColor)}var gte={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(q3(r)||pte(i)||s&&q3(s)))return;const o=fte(t);r.forEach(o)}};function mte(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let h=e,p,v,g,x,E;for(o[l++]=t[h],p=0;p<s-2;p++){let k=0,A=0,D;const z=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,te=Y-z;for(D=z;D<Y;D++)k+=t[D].x,A+=t[D].y;k/=te,A/=te;const ge=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:N,y:j}=t[h];for(g=x=-1,D=ge;D<pe;D++)x=.5*Math.abs((N-k)*(t[D].y-j)-(N-t[D].x)*(A-j)),x>g&&(g=x,v=t[D],E=D);o[l++]=v,h=E}return o[l++]=t[c],o}function vte(t,e,n,r){let i=0,s=0,o,a,l,c,h,p,v,g,x,E;const k=[],A=e+n-1,D=t[e].x,Y=t[A].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/Y*r,c=a.y;const te=l|0;if(te===h)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const ge=o-1;if(!Wi(p)&&!Wi(v)){const pe=Math.min(p,v),N=Math.max(p,v);pe!==g&&pe!==ge&&k.push({...t[pe],x:i}),N!==g&&N!==ge&&k.push({...t[N],x:i})}o>0&&ge!==g&&k.push(t[ge]),k.push(a),h=te,s=0,x=E=c,p=v=g=o}}return k}function uM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Y3(t){t.data.datasets.forEach(e=>{uM(e)})}function yte(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Pa(Dd(e,s.axis,o).lo,0,n-1)),c?i=Pa(Dd(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var bte={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Y3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(Pg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=t.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||t.options.parsing)return;let{start:p,count:v}=yte(l,c);const g=n.threshold||4*r;if(v<=g){uM(i);return}Wi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=mte(c,p,v,r,n);break;case"min-max":x=vte(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Y3(t)}};function _te(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=aw(l,c,i);const h=qb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:h,start:i[l],end:i[c]});continue}const p=HP(e,h);for(const v of p){const g=qb(n,s[v.start],s[v.end],v.loop),x=UP(a,i,g);for(const E of x)o.push({source:E,target:v,start:{[n]:K3(h,g,"start",Math.max)},end:{[n]:K3(h,g,"end",Math.min)}})}}return o}function qb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=xu(i),s=xu(s)),{property:t,start:i,end:s}}function wte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=aw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function aw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function K3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function cM(t,e){let n=[],r=!1;return Ks(t)?(r=!0,n=t):n=wte(t,e),n.length?new ph({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function Z3(t){return t&&t.fill!==!1}function xte(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!ko(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function Lte(t,e,n){const r=Pte(t);if(Oi(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return ko(i)&&Math.floor(i)===i?Ste(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Ste(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function Cte(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Oi(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function Ete(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Oi(t)?r=t.value:r=e.getBaseValue(),r}function Pte(t){const e=t.options,n=e.fill;let r=ui(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Mte(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=kte(e,n);a.push(cM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let h=c.start;h<=c.end;h++)Ate(i,o[h],a)}return new ph({points:i,options:{}})}function kte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function Ate(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=Tte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function Tte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const h=s[c],p=o[h.start][n],v=o[h.end][n];if(Td(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class dM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:Is},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function Dte(t){const{chart:e,fill:n,line:r}=t;if(ko(n))return Ote(e,n);if(n==="stack")return Mte(t);if(n==="shape")return!0;const i=Nte(t);return i instanceof dM?i:cM(i,r)}function Ote(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function Nte(t){return(t.scale||{}).getPointPositionForValue?Bte(t):Ite(t)}function Ite(t){const{scale:e={},fill:n}=t,r=Cte(n,e);if(ko(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Bte(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=Ete(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new dM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function A2(t,e,n){const r=Dte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:h=c,below:p=c}=l||{};r&&i.points.length&&(qy(t,n),Rte(t,{line:i,target:r,above:h,below:p,area:n,scale:s,axis:o}),Yy(t))}function Rte(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(X3(t,r,o.top),J3(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),X3(t,r,o.bottom)),J3(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function X3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,h=i[l],p=i[aw(l,c,i)];s?(t.moveTo(h.x,h.y),s=!1):(t.lineTo(h.x,n),t.lineTo(h.x,h.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function J3(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=_te(n,r,i);for(const{source:l,target:c,start:h,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,g=r!==!0;t.save(),t.fillStyle=v,Fte(t,o,g&&qb(i,h,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(g){x?t.closePath():Q3(t,r,p,i);const k=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&k,E||Q3(t,r,h,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function Fte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function Q3(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var jte={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof ph&&(l={visible:t.isDatasetVisible(o),index:o,fill:Lte(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=xte(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&A2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;Z3(s)&&A2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!Z3(r)||n.drawTime!=="beforeDatasetDraw"||A2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const eL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},zte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class tL extends zd{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=ks(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=pa(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=eL(r,s);let c,h;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],h=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,g=-h;return this.legendItems.forEach((x,E)=>{const k=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+k+2*a>o)&&(p+=h,c[c.length-(E>0?0:1)]=0,g+=h,v++),l[E]={left:0,top:g,row:v,width:k,height:i},c[c.length-1]+=k+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],h=o-e;let p=a,v=0,g=0,x=0,E=0;return this.legendItems.forEach((k,A)=>{const{itemWidth:D,itemHeight:z}=$te(r,n,s,k,i);A>0&&g+z+2*a>h&&(p+=v+a,c.push({width:v,height:g}),x+=v+a,E++,v=g=0),l[A]={left:x,top:g,col:E,width:D,height:z},v=Math.max(v,D),g+=z+a}),p+=v,c.push({width:v,height:g}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=wp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=cl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=cl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=cl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;qy(e,this),this._draw(),Yy(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Ao.color,l=wp(e.rtl,this.left,this.width),c=pa(o.font),{padding:h}=o,p=c.size,v=p/2;let g;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:k}=eL(o,p),A=function(ge,pe,N){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const j=ui(N.lineWidth,1);if(i.fillStyle=ui(N.fillStyle,a),i.lineCap=ui(N.lineCap,"butt"),i.lineDashOffset=ui(N.lineDashOffset,0),i.lineJoin=ui(N.lineJoin,"miter"),i.lineWidth=j,i.strokeStyle=ui(N.strokeStyle,a),i.setLineDash(ui(N.lineDash,[])),o.usePointStyle){const K={radius:E*Math.SQRT2/2,pointStyle:N.pointStyle,rotation:N.rotation,borderWidth:j},I=l.xPlus(ge,x/2),R=pe+v;DP(i,K,I,R,o.pointStyleWidth&&x)}else{const K=pe+Math.max((p-E)/2,0),I=l.leftForLtr(ge,x),R=pf(N.borderRadius);i.beginPath(),Object.values(R).some(B=>B!==0)?wm(i,{x:I,y:K,w:x,h:E,radius:R}):i.rect(I,K,x,E),i.fill(),j!==0&&i.stroke()}i.restore()},D=function(ge,pe,N){wf(i,N.text,ge,pe+k/2,c,{strikethrough:N.hidden,textAlign:l.textAlign(N.textAlign)})},z=this.isHorizontal(),Y=this._computeTitleHeight();z?g={x:cl(s,this.left+h,this.right-r[0]),y:this.top+h+Y,line:0}:g={x:this.left+h,y:cl(s,this.top+Y+h,this.bottom-n[0].height),line:0},zP(this.ctx,e.textDirection);const te=k+h;this.legendItems.forEach((ge,pe)=>{i.strokeStyle=ge.fontColor,i.fillStyle=ge.fontColor;const N=i.measureText(ge.text).width,j=l.textAlign(ge.textAlign||(ge.textAlign=o.textAlign)),K=x+v+N;let I=g.x,R=g.y;l.setWidth(this.width),z?pe>0&&I+K+h>this.right&&(R=g.y+=te,g.line++,I=g.x=cl(s,this.left+h,this.right-r[g.line])):pe>0&&R+te>this.bottom&&(I=g.x=I+n[g.line].width+h,g.line++,R=g.y=cl(s,this.top+Y+h,this.bottom-n[g.line].height));const B=l.x(I);if(A(B,R,ge),I=uJ(j,I+x+v,z?I+K:this.right,e.rtl),D(l.x(I),R,ge),z)g.x+=K+h;else if(typeof ge.text!="string"){const $=c.lineHeight;g.y+=hM(ge,$)+h}else g.y+=te}),$P(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=pa(n.font),i=yl(n.padding);if(!n.display)return;const s=wp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let h,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),h=this.top+c,p=cl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,k)=>Math.max(E,k.height),0);h=c+cl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const g=cl(a,p,p+v);o.textAlign=s.textAlign(J_(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,wf(o,n.text,g,h,r)}_computeTitleHeight(){const e=this.options.title,n=pa(e.font),r=yl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Td(e,this.left,this.right)&&Td(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Td(e,i.left,i.left+i.width)&&Td(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Hte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=zte(i,r);i&&!s&&ks(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&ks(n.onHover,[e,r,this],this)}else r&&ks(n.onClick,[e,r,this],this)}}function $te(t,e,n,r,i){const s=Vte(r,t,e,n),o=Ute(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Vte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Ute(t,e,n){let r=t;return typeof e.text!="string"&&(r=hM(e,n)),r}function hM(t,e){const n=t.text?t.text.length:0;return e*n}function Hte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Wte={id:"legend",_element:tL,start(t,e,n){const r=t.legend=new tL({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r)},stop(t){vl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;vl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),h=yl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class lw extends zd{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Ks(r.text)?r.text.length:1;this._padding=yl(r.padding);const s=i*pa(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,h,p;return this.isHorizontal()?(h=cl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(h=r+e,p=cl(a,i,n),l=Bs*-.5):(h=s-e,p=cl(a,n,i),l=Bs*.5),c=i-n),{titleX:h,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=pa(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);wf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:J_(n.align),textBaseline:"middle",translation:[o,a]})}}function Gte(t,e){const n=new lw({ctx:t.ctx,options:e,chart:t});vl.configure(t,n,e),vl.addBox(t,n),t.titleBlock=n}var qte={id:"title",_element:lw,start(t,e,n){Gte(t,n)},stop(t){const e=t.titleBlock;vl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const V0=new WeakMap;var Yte={id:"subtitle",start(t,e,n){const r=new lw({ctx:t.ctx,options:n,chart:t});vl.configure(t,r,n),vl.addBox(t,r),V0.set(t,r)},stop(t){vl.removeBox(t,V0.get(t)),V0.delete(t)},beforeUpdate(t,e,n){const r=V0.get(t);vl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ag={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),h=jb(e,c);h<i&&(i=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(Ks(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ld(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Kte(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function nL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=pa(e.bodyFont),c=pa(e.titleFont),h=pa(e.footerFont),p=s.length,v=i.length,g=r.length,x=yl(e.padding);let E=x.height,k=0,A=r.reduce((Y,te)=>Y+te.before.length+te.lines.length+te.after.length,0);if(A+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),A){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=g*Y+(A-g)*l.lineHeight+(A-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*h.lineHeight+(v-1)*e.footerSpacing);let D=0;const z=function(Y){k=Math.max(k,n.measureText(Y).width+D)};return n.save(),n.font=c.string,us(t.title,z),n.font=l.string,us(t.beforeBody.concat(t.afterBody),z),D=e.displayColors?o+2+e.boxPadding:0,us(r,Y=>{us(Y.before,z),us(Y.lines,z),us(Y.after,z)}),D=0,n.font=h.string,us(t.footer,z),n.restore(),k+=x.width,{width:k,height:E}}function Zte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Xte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Jte(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Xte(c,t,e,n)&&(c="center"),c}function rL(t,e,n){const r=n.yAlign||e.yAlign||Zte(t,n);return{xAlign:n.xAlign||e.xAlign||Jte(t,e,n,r),yAlign:r}}function Qte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function ene(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function iL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:h,topRight:p,bottomLeft:v,bottomRight:g}=pf(o);let x=Qte(e,a);const E=ene(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(h,v)+i:a==="right"&&(x+=Math.max(p,g)+i),{x:Pa(x,0,r.width-e.width),y:Pa(E,0,r.height-e.height)}}function U0(t,e,n){const r=yl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function sL(t){return zc([],Ld(t))}function tne(t,e,n){return Ah(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function oL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const fM={beforeTitle:wd,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:wd,beforeBody:wd,beforeLabel:wd,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Wi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:wd,afterBody:wd,beforeFooter:wd,footer:wd,afterFooter:wd};function Kl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?fM[e].call(n,r):i}class Yb extends zd{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new WP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=tne(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Kl(r,"beforeTitle",this,e),s=Kl(r,"title",this,e),o=Kl(r,"afterTitle",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}getBeforeBody(e,n){return sL(Kl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return us(e,s=>{const o={before:[],lines:[],after:[]},a=oL(r,s);zc(o.before,Ld(Kl(a,"beforeLabel",this,s))),zc(o.lines,Kl(a,"label",this,s)),zc(o.after,Ld(Kl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return sL(Kl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Kl(r,"beforeFooter",this,e),s=Kl(r,"footer",this,e),o=Kl(r,"afterFooter",this,e);let a=[];return a=zc(a,Ld(i)),a=zc(a,Ld(s)),a=zc(a,Ld(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Kte(this.chart,n[l]));return e.filter&&(a=a.filter((h,p,v)=>e.filter(h,p,v,r))),e.itemSort&&(a=a.sort((h,p)=>e.itemSort(h,p,r))),us(a,h=>{const p=oL(e.callbacks,h);i.push(Kl(p,"labelColor",this,h)),s.push(Kl(p,"labelPointStyle",this,h)),o.push(Kl(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Ag[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=nL(this,r),c=Object.assign({},a,l),h=rL(this.chart,r,c),p=iL(r,c,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:h,bottomRight:p}=pf(a),{x:v,y:g}=e,{width:x,height:E}=n;let k,A,D,z,Y,te;return s==="center"?(Y=g+E/2,i==="left"?(k=v,A=k-o,z=Y+o,te=Y-o):(k=v+x,A=k+o,z=Y-o,te=Y+o),D=k):(i==="left"?A=v+Math.max(l,h)+o:i==="right"?A=v+x-Math.max(c,p)-o:A=this.caretX,s==="top"?(z=g,Y=z-o,k=A-o,D=A+o):(z=g+E,Y=z+o,k=A+o,D=A-o),te=z),{x1:k,x2:A,x3:D,y1:z,y2:Y,y3:te}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=wp(r.rtl,this.x,this.width);for(e.x=U0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=pa(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,h=pa(s.bodyFont),p=U0(this,"left",s),v=i.x(p),g=l<h.lineHeight?(h.lineHeight-l)/2:0,x=n.y+g;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},k=i.leftForLtr(v,c)+c/2,A=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,$b(e,E,k,A),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$b(e,E,k,A)}else{e.lineWidth=Oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),k=i.leftForLtr(i.xPlus(v,1),c-2),A=pf(o.borderRadius);Object.values(A).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,wm(e,{x:E,y:x,w:c,h:l,radius:A}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),wm(e,{x:k,y:x+1,w:c-2,h:l-2,radius:A}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(k,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:h}=r,p=pa(r.bodyFont);let v=p.lineHeight,g=0;const x=wp(r.rtl,this.x,this.width),E=function(N){n.fillText(N,x.x(e.x+g),e.y+v/2),e.y+=v+s},k=x.textAlign(o);let A,D,z,Y,te,ge,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=U0(this,k,r),n.fillStyle=r.bodyColor,us(this.beforeBody,E),g=a&&k!=="right"?o==="center"?c/2+h:c+2+h:0,Y=0,ge=i.length;Y<ge;++Y){for(A=i[Y],D=this.labelTextColors[Y],n.fillStyle=D,us(A.before,E),z=A.lines,a&&z.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),te=0,pe=z.length;te<pe;++te)E(z[te]),v=p.lineHeight;us(A.after,E)}g=0,v=p.lineHeight,us(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=wp(r.rtl,this.x,this.width);for(e.x=U0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=pa(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:h}=r,{topLeft:p,topRight:v,bottomLeft:g,bottomRight:x}=pf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+h-x),n.quadraticCurveTo(a+c,l+h,a+c-x,l+h),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+g,l+h),n.quadraticCurveTo(a,l+h,a,l+h-g),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Ag[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=nL(this,e),l=Object.assign({},o,this._size),c=rL(n,e,l),h=iL(e,l,c,n);(i._to!==h.x||s._to!==h.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=yl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),zP(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),$P(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ty(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ty(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Ag[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Je(Yb,"positioners",Ag);var nne={id:"tooltip",_element:Yb,positioners:Ag,afterInit(t,e,n){n&&(t.tooltip=new Yb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:fM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},rne=Object.freeze({__proto__:null,Colors:gte,Decimation:bte,Filler:jte,Legend:Wte,SubTitle:Yte,Title:qte,Tooltip:nne});const ine=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function sne(t,e,n,r){const i=t.indexOf(e);if(i===-1)return ine(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const one=(t,e)=>t===null?null:Pa(Math.round(t),0,e);function aL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Kb extends Cf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Wi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:sne(r,e,ui(n,e),this._addedLabels),one(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return aL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Je(Kb,"id","category"),Je(Kb,"defaults",{ticks:{callback:aL}});function ane(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:h,maxDigits:p,includeBounds:v}=t,g=s||1,x=h-1,{min:E,max:k}=e,A=!Wi(o),D=!Wi(a),z=!Wi(c),Y=(k-E)/(p+1);let te=t3((k-E)/x/g)*g,ge,pe,N,j;if(te<1e-14&&!A&&!D)return[{value:E},{value:k}];j=Math.ceil(k/te)-Math.floor(E/te),j>x&&(te=t3(j*te/x/g)*g),Wi(l)||(ge=Math.pow(10,l),te=Math.ceil(te*ge)/ge),i==="ticks"?(pe=Math.floor(E/te)*te,N=Math.ceil(k/te)*te):(pe=E,N=k),A&&D&&s&&nJ((a-o)/s,te/1e3)?(j=Math.round(Math.min((a-o)/te,h)),te=(a-o)/j,pe=o,N=a):z?(pe=A?o:pe,N=D?a:N,j=c-1,te=(N-pe)/j):(j=(N-pe)/te,Xg(j,Math.round(j),te/1e3)?j=Math.round(j):j=Math.ceil(j));const K=Math.max(n3(te),n3(pe));ge=Math.pow(10,Wi(l)?K:l),pe=Math.round(pe*ge)/ge,N=Math.round(N*ge)/ge;let I=0;for(A&&(v&&pe!==o?(n.push({value:o}),pe<o&&I++,Xg(Math.round((pe+I*te)*ge)/ge,o,lL(o,Y,t))&&I++):pe<o&&I++);I<j;++I){const R=Math.round((pe+I*te)*ge)/ge;if(D&&R>a)break;n.push({value:R})}return D&&v&&N!==a?n.length&&Xg(n[n.length-1].value,a,lL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!D||N===a)&&n.push({value:N}),n}function lL(t,e,{horizontal:n,minRotation:r}){const i=_c(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class ly extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Wi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=ane(i,s);return e.bounds==="ticks"&&LP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Bm(e,this.chart.options.locale,this.options.ticks.format)}}class Zb extends ly{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?e:0,this.max=ko(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=_c(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Je(Zb,"id","linear"),Je(Zb,"defaults",{ticks:{callback:Gy.formatters.numeric}});const Lm=t=>Math.floor(fh(t)),Xh=(t,e)=>Math.pow(10,Lm(t)+e);function uL(t){return t/Math.pow(10,Lm(t))===1}function cL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function lne(t,e){const n=e-t;let r=Lm(n);for(;cL(t,e,r)>10;)r++;for(;cL(t,e,r)<10;)r--;return Math.min(r,Lm(t))}function une(t,{min:e,max:n}){e=wu(t.min,e);const r=[],i=Lm(e);let s=lne(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,h=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-h)/Math.pow(10,s)),v=wu(t.min,Math.round((l+h+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:uL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+h+p*Math.pow(10,s))*o)/o;const g=wu(t.max,v);return r.push({value:g,major:uL(g),significand:p}),r}class Xb extends Cf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=ly.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return ko(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=ko(e)?Math.max(0,e):null,this.max=ko(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ko(this._userMin)&&(this.min=e===Xh(this.min,0)?Xh(this.min,-1):Xh(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Xh(r,-1)),o(Xh(i,1)))),r<=0&&s(Xh(i,-1)),i<=0&&o(Xh(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=une(n,this);return e.bounds==="ticks"&&LP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Bm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=fh(e),this._valueRange=fh(this.max)-fh(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(fh(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Je(Xb,"id","logarithmic"),Je(Xb,"defaults",{ticks:{callback:Gy.formatters.logarithmic,major:{enabled:!0}}});function Jb(t){const e=t.ticks;if(e.display&&t.display){const n=yl(e.backdropPadding);return ui(e.font&&e.font.size,Ao.font.size)+n.height}return 0}function cne(t,e,n){return n=Ks(n)?n:[n],{w:bJ(t,e.string,n),h:n.length*e.lineHeight}}function dL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function dne(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?Bs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const h=t.getPointPosition(l,t.drawingArea+i[l],a),p=pa(c.font),v=cne(t.ctx,p,t._pointLabels[l]);r[l]=v;const g=xu(t.getIndexAngle(l)+a),x=Math.round(Z_(g)),E=dL(x,h.x,v.w,0,180),k=dL(x,h.y,v.h,90,270);hne(n,e,g,E,k)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=gne(t,r,i)}function hne(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function fne(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Z_(xu(l.angle+Go))),h=yne(l.y,a.h,c),p=mne(c),v=vne(l.x,a.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:v,top:h,right:v+a.w,bottom:h+a.h}}function pne(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Od({x:n,y:r},e)||Od({x:n,y:s},e)||Od({x:i,y:r},e)||Od({x:i,y:s},e))}function gne(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:Jb(s)/2,additionalAngle:o?Bs/i:0};let c;for(let h=0;h<i;h++){l.padding=n[h],l.size=e[h];const p=fne(t,h,l);r.push(p),a==="auto"&&(p.visible=pne(p,c),p.visible&&(c=p))}return r}function mne(t){return t===0||t===180?"center":t<180?"left":"right"}function vne(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function yne(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function bne(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Wi(a)){const l=pf(e.borderRadius),c=yl(e.backdropPadding);t.fillStyle=a;const h=r-c.left,p=i-c.top,v=s-r+c.width,g=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),wm(t,{x:h,y:p,w:v,h:g,radius:l}),t.fill()):t.fillRect(h,p,v,g)}}function _ne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));bne(n,o,s);const a=pa(o.font),{x:l,y:c,textAlign:h}=s;wf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function pM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,Is);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function wne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),pM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function xne(t,e,n){return Ah(t,{label:n,index:e,type:"pointLabel"})}class Tg extends ly{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=yl(Jb(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=ko(e)&&!isNaN(e)?e:0,this.max=ko(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Jb(this.options))}generateTickLabels(e){ly.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=ks(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?dne(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=Is/(this._pointLabels.length||1),r=this.options.startAngle||0;return xu(e*n+_c(r))}getDistanceFromCenterForValue(e){if(Wi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Wi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return xne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Go+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),pM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&_ne(this,o),i.display&&this.ticks.forEach((h,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(h.value);const v=this.getContext(p),g=i.setContext(v),x=s.setContext(v);wne(this,g,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const h=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=h;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),h=pa(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=yl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-h.size/2-p.top,o+p.width,h.size+p.height)}wf(e,a.label,0,-s,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Je(Tg,"id","radialLinear"),Je(Tg,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Gy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Je(Tg,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Je(Tg,"descriptors",{angleLines:{_fallback:"grid"}});const Xy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},eu=Object.keys(Xy);function hL(t,e){return t-e}function fL(t,e){if(Wi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),ko(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Tp(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function pL(t,e,n,r){const i=eu.length;for(let s=eu.indexOf(t);s<i-1;++s){const o=Xy[eu[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return eu[s]}return eu[i-1]}function Lne(t,e,n,r,i){for(let s=eu.length-1;s>=eu.indexOf(n);s--){const o=eu[s];if(Xy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return eu[n?eu.indexOf(n):0]}function Sne(t){for(let e=eu.indexOf(t)+1,n=eu.length;e<n;++e)if(Xy[eu[e]].common)return eu[e]}function gL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=X_(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function Cne(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function mL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:Cne(t,r,i,n)}class Sm extends Cf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new YP._date(e.adapters.date);i.init(n),Zg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:fL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=ko(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=ko(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=oJ(i,s,o);return this._unit=n.unit||(r.autoSkip?pL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Lne(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Sne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),mL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Pa(n,0,o),r=Pa(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||pL(s.minUnit,n,r,this._getLabelCapacity(n)),a=ui(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Tp(l)||l===!0,h={};let p=n,v,g;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,g=0;v<r;v=+e.add(v,a,o),g++)gL(h,v,x);return(v===r||i.bounds==="ticks"||g===1)&&gL(h,v,x),Object.keys(h).sort(hL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return ks(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,h=l&&a[l],p=c&&a[c],v=r[n],g=c&&p&&v&&v.major;return this._adapter.format(e,i||(g?p:h))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=_c(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,mL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(fL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return EP(e.sort(hL))}}Je(Sm,"id","time"),Je(Sm,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function H0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Dd(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Dd(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class Qb extends Sm{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=H0(n,this.min),this._tableRange=H0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,h;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)h=i[o+1],l=i[o-1],c=i[o],Math.round((h+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(H0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return H0(this._table,r*this._tableRange+this._minPos,!0)}}Je(Qb,"id","timeseries"),Je(Qb,"defaults",Sm.defaults);var Ene=Object.freeze({__proto__:null,CategoryScale:Kb,LinearScale:Zb,LogarithmicScale:Xb,RadialLinearScale:Tg,TimeScale:Sm,TimeSeriesScale:Qb});const Pne=[NQ,ute,rne,Ene];Wc.register(...Pne);const gM=6048e5,Mne=864e5,Rm=6e4,Fm=36e5,kne=1e3,vL=Symbol.for("constructDateFrom");function To(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&vL in t?t[vL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Jr(t,e){return To(e||t,t)}function Jy(t,e,n){const r=Jr(t,n==null?void 0:n.in);return isNaN(e)?To((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function uw(t,e,n){const r=Jr(t,n==null?void 0:n.in);if(isNaN(e))return To(t,NaN);if(!e)return r;const i=r.getDate(),s=To(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function cw(t,e,n){return To(t,+Jr(t)+e)}function Ane(t,e,n){return cw(t,e*Fm)}let Tne={};function Ef(){return Tne}function nd(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.weekStartsOn)??0,i=Jr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Np(t,e){return nd(t,{...e,weekStartsOn:1})}function mM(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear(),i=To(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Np(i),o=To(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Np(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function uy(t){const e=Jr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Pf(t,...e){const n=To.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function e_(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function vM(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=e_(r),o=e_(i),a=+s-uy(s),l=+o-uy(o);return Math.round((a-l)/Mne)}function Dne(t,e){const n=mM(t,e),r=To(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Np(r)}function One(t,e,n){const r=Jr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*Rm),r}function Nne(t,e,n){return uw(t,e*3,n)}function Ine(t,e,n){return cw(t,e*1e3)}function Bne(t,e,n){return Jy(t,e*7,n)}function Rne(t,e,n){return uw(t,e*12,n)}function tm(t,e){const n=+Jr(t)-+Jr(e);return n<0?-1:n>0?1:n}function Fne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function yM(t){return!(!Fne(t)&&typeof t!="number"||isNaN(+Jr(t)))}function jne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function zne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function bM(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=yL(r,i),o=Math.abs(vM(r,i));r.setDate(r.getDate()-s*o);const a=+(yL(r,i)===-s),l=s*(o-a);return l===0?0:l}function yL(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function jm(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function $ne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=(+r-+i)/Fm;return jm(n==null?void 0:n.roundingMethod)(s)}function dw(t,e){return+Jr(t)-+Jr(e)}function Vne(t,e,n){const r=dw(t,e)/Rm;return jm(n==null?void 0:n.roundingMethod)(r)}function _M(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function wM(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Une(t,e){const n=Jr(t,e==null?void 0:e.in);return+_M(n,e)==+wM(n,e)}function xM(t,e,n){const[r,i,s]=Pf(n==null?void 0:n.in,t,t,e),o=tm(i,s),a=Math.abs(jne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=tm(i,s)===-o;Une(r)&&a===1&&tm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Hne(t,e,n){const r=xM(t,e,n)/3;return jm(n==null?void 0:n.roundingMethod)(r)}function Wne(t,e,n){const r=dw(t,e)/1e3;return jm(n==null?void 0:n.roundingMethod)(r)}function Gne(t,e,n){const r=bM(t,e,n)/7;return jm(n==null?void 0:n.roundingMethod)(r)}function qne(t,e,n){const[r,i]=Pf(n==null?void 0:n.in,t,e),s=tm(r,i),o=Math.abs(zne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=tm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function Yne(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Kne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Zne(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function LM(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Xne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function Jne(t,e){var a,l;const n=Ef(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Jr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Qne(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function ere(t,e){const n=Jr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function tre(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const nre={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},rre=(t,e,n)=>{let r;const i=nre[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function T2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const ire={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},sre={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ore={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},are={date:T2({formats:ire,defaultWidth:"full"}),time:T2({formats:sre,defaultWidth:"full"}),dateTime:T2({formats:ore,defaultWidth:"full"})},lre={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},ure=(t,e,n,r)=>lre[t];function fg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const cre={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dre={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},hre={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},fre={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gre={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mre=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},vre={ordinalNumber:mre,era:fg({values:cre,defaultWidth:"wide"}),quarter:fg({values:dre,defaultWidth:"wide",argumentCallback:t=>t-1}),month:fg({values:hre,defaultWidth:"wide"}),day:fg({values:fre,defaultWidth:"wide"}),dayPeriod:fg({values:pre,defaultWidth:"wide",formattingValues:gre,defaultFormattingWidth:"wide"})};function pg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?bre(a,p=>p.test(o)):yre(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const h=e.slice(o.length);return{value:c,rest:h}}}function yre(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function bre(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function _re(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const wre=/^(\d+)(th|st|nd|rd)?/i,xre=/\d+/i,Lre={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Sre={any:[/^b/i,/^(a|c)/i]},Cre={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ere={any:[/1/i,/2/i,/3/i,/4/i]},Pre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Mre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},kre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Are={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Tre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Dre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ore={ordinalNumber:_re({matchPattern:wre,parsePattern:xre,valueCallback:t=>parseInt(t,10)}),era:pg({matchPatterns:Lre,defaultMatchWidth:"wide",parsePatterns:Sre,defaultParseWidth:"any"}),quarter:pg({matchPatterns:Cre,defaultMatchWidth:"wide",parsePatterns:Ere,defaultParseWidth:"any",valueCallback:t=>t+1}),month:pg({matchPatterns:Pre,defaultMatchWidth:"wide",parsePatterns:Mre,defaultParseWidth:"any"}),day:pg({matchPatterns:kre,defaultMatchWidth:"wide",parsePatterns:Are,defaultParseWidth:"any"}),dayPeriod:pg({matchPatterns:Tre,defaultMatchWidth:"any",parsePatterns:Dre,defaultParseWidth:"any"})},SM={code:"en-US",formatDistance:rre,formatLong:are,formatRelative:ure,localize:vre,match:Ore,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Nre(t,e){const n=Jr(t,e==null?void 0:e.in);return vM(n,LM(n))+1}function CM(t,e){const n=Jr(t,e==null?void 0:e.in),r=+Np(n)-+Dne(n);return Math.round(r/gM)+1}function hw(t,e){var h,p,v,g;const n=Jr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Ef(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(h=e==null?void 0:e.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((g=(v=i.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=To((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nd(o,e),l=To((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nd(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Ire(t,e){var a,l,c,h;const n=Ef(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((h=(c=n.locale)==null?void 0:c.options)==null?void 0:h.firstWeekContainsDate)??1,i=hw(t,e),s=To((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nd(s,e)}function EM(t,e){const n=Jr(t,e==null?void 0:e.in),r=+nd(n,e)-+Ire(n,e);return Math.round(r/gM)+1}function ls(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Qd={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ls(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ls(n+1,2)},d(t,e){return ls(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ls(t.getHours()%12||12,e.length)},H(t,e){return ls(t.getHours(),e.length)},m(t,e){return ls(t.getMinutes(),e.length)},s(t,e){return ls(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ls(i,e.length)}},ep={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},bL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Qd.y(t,e)},Y:function(t,e,n,r){const i=hw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ls(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ls(s,e.length)},R:function(t,e){const n=mM(t);return ls(n,e.length)},u:function(t,e){const n=t.getFullYear();return ls(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ls(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ls(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Qd.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ls(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=EM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ls(i,e.length)},I:function(t,e,n){const r=CM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ls(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Qd.d(t,e)},D:function(t,e,n){const r=Nre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ls(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ls(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ls(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ls(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ep.noon:r===0?i=ep.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ep.evening:r>=12?i=ep.afternoon:r>=4?i=ep.morning:i=ep.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Qd.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Qd.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ls(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ls(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Qd.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Qd.s(t,e)},S:function(t,e){return Qd.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return wL(r);case"XXXX":case"XX":return nf(r);case"XXXXX":case"XXX":default:return nf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return wL(r);case"xxxx":case"xx":return nf(r);case"xxxxx":case"xxx":default:return nf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+_L(r,":");case"OOOO":default:return"GMT"+nf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+_L(r,":");case"zzzz":default:return"GMT"+nf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ls(r,e.length)},T:function(t,e,n){return ls(+t,e.length)}};function _L(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ls(s,2)}function wL(t,e){return t%60===0?(t>0?"-":"+")+ls(Math.abs(t)/60,2):nf(t,e)}function nf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ls(Math.trunc(r/60),2),s=ls(r%60,2);return n+i+e+s}const xL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},PM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Bre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return xL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",xL(r,e)).replace("{{time}}",PM(i,e))},t_={p:PM,P:Bre},Rre=/^D+$/,Fre=/^Y+$/,jre=["D","DD","YY","YYYY"];function MM(t){return Rre.test(t)}function kM(t){return Fre.test(t)}function n_(t,e,n){const r=zre(t,e,n);if(console.warn(r),jre.includes(t))throw new RangeError(r)}function zre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $re=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Vre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ure=/^'([^]*?)'?$/,Hre=/''/g,Wre=/[a-zA-Z]/;function Gre(t,e,n){var h,p,v,g,x,E,k,A;const r=Ef(),i=(n==null?void 0:n.locale)??r.locale??SM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(v=r.locale)==null?void 0:v.options)==null?void 0:g.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((A=(k=r.locale)==null?void 0:k.options)==null?void 0:A.weekStartsOn)??0,a=Jr(t,n==null?void 0:n.in);if(!yM(a))throw new RangeError("Invalid time value");let l=e.match(Vre).map(D=>{const z=D[0];if(z==="p"||z==="P"){const Y=t_[z];return Y(D,i.formatLong)}return D}).join("").match($re).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const z=D[0];if(z==="'")return{isToken:!1,value:qre(D)};if(bL[z])return{isToken:!0,value:D};if(z.match(Wre))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const z=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&kM(z)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&MM(z))&&n_(z,e,String(t));const Y=bL[z[0]];return Y(a,z,i.localize,c)}).join("")}function qre(t){const e=t.match(Ure);return e?e[1].replace(Hre,"'"):t}function Yre(){return Object.assign({},Ef())}function Kre(t,e){const n=Jr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Zre(t,e){const n=Xre(e)?new e(0):To(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Xre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Jre=10;class AM{constructor(){Je(this,"subPriority",0)}validate(e,n){return!0}}class Qre extends AM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class eie extends AM{constructor(n,r){super();Je(this,"priority",Jre);Je(this,"subPriority",-1);this.context=n||(i=>To(r,i))}set(n,r){return r.timestampIsSet?n:To(n,Zre(n,this.context))}}class rs{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Qre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class tie extends rs{constructor(){super(...arguments);Je(this,"priority",140);Je(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const qo={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Yo(t,e){return t&&{value:e(t.value),rest:t.rest}}function fo(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*Fm+s*Rm+o*kne),rest:e.slice(n[0].length)}}function TM(t){return fo(qo.anyDigitsSigned,t)}function Do(t,e){switch(t){case 1:return fo(qo.singleDigit,e);case 2:return fo(qo.twoDigits,e);case 3:return fo(qo.threeDigits,e);case 4:return fo(qo.fourDigits,e);default:return fo(new RegExp("^\\d{1,"+t+"}"),e)}}function cy(t,e){switch(t){case 1:return fo(qo.singleDigitSigned,e);case 2:return fo(qo.twoDigitsSigned,e);case 3:return fo(qo.threeDigitsSigned,e);case 4:return fo(qo.fourDigitsSigned,e);default:return fo(new RegExp("^-?\\d{1,"+t+"}"),e)}}function fw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function DM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function OM(t){return t%400===0||t%4===0&&t%100!==0}class nie extends rs{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Yo(Do(4,n),s);case"yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=DM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class rie extends rs{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Yo(Do(4,n),s);case"Yo":return Yo(i.ordinalNumber(n,{unit:"year"}),s);default:return Yo(Do(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=hw(n,s);if(i.isTwoDigitYear){const l=DM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nd(n,s)}}class iie extends rs{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return cy(r==="R"?4:r.length,n)}set(n,r,i){const s=To(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Np(s)}}class sie extends rs{constructor(){super(...arguments);Je(this,"priority",130);Je(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return cy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class oie extends rs{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Do(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class aie extends rs{constructor(){super(...arguments);Je(this,"priority",120);Je(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Do(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class lie extends rs{constructor(){super(...arguments);Je(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Je(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Yo(fo(qo.month,n),s);case"MM":return Yo(Do(2,n),s);case"Mo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class uie extends rs{constructor(){super(...arguments);Je(this,"priority",110);Je(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Yo(fo(qo.month,n),s);case"LL":return Yo(Do(2,n),s);case"Lo":return Yo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function cie(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),Jr(r,n==null?void 0:n.in)}class die extends rs{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return fo(qo.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nd(cie(n,i,s),s)}}function hie(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=CM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class fie extends rs{constructor(){super(...arguments);Je(this,"priority",100);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return fo(qo.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Np(hie(n,i))}}const pie=[31,28,31,30,31,30,31,31,30,31,30,31],gie=[31,29,31,30,31,30,31,31,30,31,30,31];class mie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subPriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return fo(qo.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=OM(i),o=n.getMonth();return s?r>=1&&r<=gie[o]:r>=1&&r<=pie[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class vie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"subpriority",1);Je(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return fo(qo.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Do(r.length,n)}}validate(n,r){const i=n.getFullYear();return OM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function pw(t,e,n){var p,v,g,x;const r=Ef(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(g=r.locale)==null?void 0:g.options)==null?void 0:x.weekStartsOn)??0,s=Jr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,h=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Jy(s,h,n)}class yie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class bie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Yo(Do(r.length,n),o);case"eo":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}class _ie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Yo(Do(r.length,n),o);case"co":return Yo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=pw(n,i,s),n.setHours(0,0,0,0),n}}function wie(t,e,n){const r=Jr(t,n==null?void 0:n.in),i=Kre(r,n),s=e-i;return Jy(r,s,n)}class xie extends rs{constructor(){super(...arguments);Je(this,"priority",90);Je(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Do(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Yo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Yo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Yo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Yo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=wie(n,i),n.setHours(0,0,0,0),n}}class Lie extends rs{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Sie extends rs{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Cie extends rs{constructor(){super(...arguments);Je(this,"priority",80);Je(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(fw(i),0,0,0),n}}class Eie extends rs{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return fo(qo.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class Pie extends rs{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return fo(qo.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class Mie extends rs{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return fo(qo.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class kie extends rs{constructor(){super(...arguments);Je(this,"priority",70);Je(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return fo(qo.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Do(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class Aie extends rs{constructor(){super(...arguments);Je(this,"priority",60);Je(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return fo(qo.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class Tie extends rs{constructor(){super(...arguments);Je(this,"priority",50);Je(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return fo(qo.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Do(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class Die extends rs{constructor(){super(...arguments);Je(this,"priority",30);Je(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Yo(Do(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class Oie extends rs{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Gc.basicOptionalMinutes,n);case"XX":return qc(Gc.basic,n);case"XXXX":return qc(Gc.basicOptionalSeconds,n);case"XXXXX":return qc(Gc.extendedOptionalSeconds,n);case"XXX":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-uy(n)-i)}}class Nie extends rs{constructor(){super(...arguments);Je(this,"priority",10);Je(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Gc.basicOptionalMinutes,n);case"xx":return qc(Gc.basic,n);case"xxxx":return qc(Gc.basicOptionalSeconds,n);case"xxxxx":return qc(Gc.extendedOptionalSeconds,n);case"xxx":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:To(n,n.getTime()-uy(n)-i)}}class Iie extends rs{constructor(){super(...arguments);Je(this,"priority",40);Je(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[To(n,i*1e3),{timestampIsSet:!0}]}}class Bie extends rs{constructor(){super(...arguments);Je(this,"priority",20);Je(this,"incompatibleTokens","*")}parse(n){return TM(n)}set(n,r,i){return[To(n,i),{timestampIsSet:!0}]}}const Rie={G:new tie,y:new nie,Y:new rie,R:new iie,u:new sie,Q:new oie,q:new aie,M:new lie,L:new uie,w:new die,I:new fie,d:new mie,D:new vie,E:new yie,e:new bie,c:new _ie,i:new xie,a:new Lie,b:new Sie,B:new Cie,h:new Eie,H:new Pie,K:new Mie,k:new kie,m:new Aie,s:new Tie,S:new Die,X:new Oie,x:new Nie,t:new Iie,T:new Bie},Fie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,zie=/^'([^]*?)'?$/,$ie=/''/g,Vie=/\S/,Uie=/[a-zA-Z]/;function Hie(t,e,n,r){var k,A,D,z,Y,te,ge,pe;const i=()=>To((r==null?void 0:r.in)||n,NaN),s=Yre(),o=(r==null?void 0:r.locale)??s.locale??SM,a=(r==null?void 0:r.firstWeekContainsDate)??((A=(k=r==null?void 0:r.locale)==null?void 0:k.options)==null?void 0:A.firstWeekContainsDate)??s.firstWeekContainsDate??((z=(D=s.locale)==null?void 0:D.options)==null?void 0:z.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((te=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:te.weekStartsOn)??s.weekStartsOn??((pe=(ge=s.locale)==null?void 0:ge.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():Jr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},h=[new eie(r==null?void 0:r.in,n)],p=e.match(jie).map(N=>{const j=N[0];if(j in t_){const K=t_[j];return K(N,o.formatLong)}return N}).join("").match(Fie),v=[];for(let N of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&kM(N)&&n_(N,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&MM(N)&&n_(N,e,t);const j=N[0],K=Rie[j];if(K){const{incompatibleTokens:I}=K;if(Array.isArray(I)){const B=v.find($=>I.includes($.token)||$.token===j);if(B)throw new RangeError(`The format string mustn't contain \`${B.fullToken}\` and \`${N}\` at the same time`)}else if(K.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${N}\` and any other token at the same time`);v.push({token:j,fullToken:N});const R=K.run(t,N,o.match,c);if(!R)return i();h.push(R.setter),t=R.rest}else{if(j.match(Uie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");if(N==="''"?N="'":j==="'"&&(N=Wie(N)),t.indexOf(N)===0)t=t.slice(N.length);else return i()}}if(t.length>0&&Vie.test(t))return i();const g=h.map(N=>N.priority).sort((N,j)=>j-N).filter((N,j,K)=>K.indexOf(N)===j).map(N=>h.filter(j=>j.priority===N).sort((j,K)=>K.subPriority-j.subPriority)).map(N=>N[0]);let x=Jr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const N of g){if(!N.validate(x,c))return i();const j=N.set(x,E,c);Array.isArray(j)?(x=j[0],Object.assign(E,j[1])):x=j}return x}function Wie(t){return t.match(zie)[1].replace($ie,"'")}function Gie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function qie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function Yie(t,e){const n=Jr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Kie(t,e){const n=()=>To(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Qie(t);let s;if(i.date){const c=ese(i.date,r);s=tse(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=nse(i.time),isNaN(a)))return n();if(i.timezone){if(l=rse(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),h=Jr(0,e==null?void 0:e.in);return h.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),h.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),h}return Jr(o+a+l,e==null?void 0:e.in)}const W0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Zie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Xie=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Jie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qie(t){const e={},n=t.split(W0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],W0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(W0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=W0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function ese(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function tse(t,e){if(e===null)return new Date(NaN);const n=t.match(Zie);if(!n)return new Date(NaN);const r=!!n[4],i=gg(n[1]),s=gg(n[2])-1,o=gg(n[3]),a=gg(n[4]),l=gg(n[5])-1;if(r)return lse(e,a,l)?ise(e,a,l):new Date(NaN);{const c=new Date(0);return!ose(e,s,o)||!ase(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function gg(t){return t?parseInt(t):1}function nse(t){const e=t.match(Xie);if(!e)return NaN;const n=D2(e[1]),r=D2(e[2]),i=D2(e[3]);return use(n,r,i)?n*Fm+r*Rm+i*1e3:NaN}function D2(t){return t&&parseFloat(t.replace(",","."))||0}function rse(t){if(t==="Z")return 0;const e=t.match(Jie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return cse(r,i)?n*(r*Fm+i*Rm):NaN}function ise(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const sse=[31,null,31,30,31,30,31,31,30,31,30,31];function NM(t){return t%400===0||t%4===0&&t%100!==0}function ose(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(sse[e]||(NM(t)?29:28))}function ase(t,e){return e>=1&&e<=(NM(t)?366:365)}function lse(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function use(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function cse(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const dse={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};YP._date.override({_id:"date-fns",formats:function(){return dse},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Jr(t):n==="string"&&(typeof e=="string"?t=Hie(t,e,new Date,this.options):t=Kie(t,this.options)),yM(t)?t.getTime():null},format:function(t,e){return Gre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return cw(t,e);case"second":return Ine(t,e);case"minute":return One(t,e);case"hour":return Ane(t,e);case"day":return Jy(t,e);case"week":return Bne(t,e);case"month":return uw(t,e);case"quarter":return Nne(t,e);case"year":return Rne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return dw(t,e);case"second":return Wne(t,e);case"minute":return Vne(t,e);case"hour":return $ne(t,e);case"day":return bM(t,e);case"week":return Gne(t,e);case"month":return xM(t,e);case"quarter":return Hne(t,e);case"year":return qne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return Yie(t);case"minute":return qie(t);case"hour":return Gie(t);case"day":return e_(t);case"week":return nd(t);case"isoWeek":return nd(t,{weekStartsOn:+n});case"month":return Kne(t);case"quarter":return Yne(t);case"year":return LM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return tre(t);case"minute":return Qne(t);case"hour":return Xne(t);case"day":return _M(t);case"week":return Jne(t);case"month":return wM(t);case"quarter":return ere(t);case"year":return Zne(t);default:return t}}});const hse={class:"container mx-auto px-4 py-8"},fse={class:"mb-8"},pse={key:0,class:"mb-6"},gse={class:"flex gap-4"},mse=["disabled"],vse={key:0,value:""},yse=["value"],bse={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},_se={class:"flex"},wse={class:"ml-3"},xse={class:"text-sm font-medium text-red-800"},Lse={class:"mb-6"},Sse={class:"flex gap-4"},Cse=["disabled"],Ese={key:0,value:""},Pse={key:1,value:""},Mse=["value"],kse=["disabled"],Ase={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},Tse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},Dse={class:"font-medium"},Ose={class:"font-medium"},Nse={class:"font-medium"},Ise={class:"font-medium"},Bse={class:"font-medium"},Rse={class:"font-medium"},Fse={class:"md:col-span-2 lg:col-span-3 flex items-center"},jse=["href"],zse={class:"mb-6"},$se={class:"border-b border-gray-200"},Vse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Use=["onClick"],Hse={key:2,class:"mb-8"},Wse={class:"text-sm text-gray-600 mb-4"},Gse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},qse={class:"bg-white rounded-lg shadow-md p-6"},Yse={class:"text-4xl font-bold text-primary-600 mb-2"},Kse={class:"text-sm text-gray-600"},Zse={class:"bg-white rounded-lg shadow-md p-6"},Xse={class:"text-4xl font-bold text-primary-600 mb-2"},Jse={class:"mt-4"},Qse={class:"w-full bg-gray-200 rounded-full h-2.5"},eoe={class:"bg-white rounded-lg shadow-md p-6"},toe={class:"text-4xl font-bold text-primary-600 mb-2"},noe={class:"text-sm text-gray-600"},roe={class:"bg-white rounded-lg shadow-md p-6"},ioe={class:"text-4xl font-bold text-primary-600 mb-2"},soe={class:"text-sm text-gray-600"},ooe={class:"bg-white rounded-lg shadow-md p-6"},aoe={class:"text-4xl font-bold text-primary-600 mb-2"},loe={class:"text-sm text-gray-600"},uoe={class:"bg-white rounded-lg shadow-md p-6"},coe={class:"text-4xl font-bold text-primary-600 mb-2"},doe={class:"text-sm text-gray-600"},hoe={key:3,class:"mb-8"},foe={class:"flex justify-between items-center mb-4"},poe={class:"flex items-center gap-4"},goe={key:0,class:"text-sm text-gray-600"},moe=["disabled"],voe={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},yoe={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},boe=["value"],_oe={key:0,class:"mt-1 text-sm text-red-600"},woe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},xoe={class:"bg-white rounded-lg shadow-md p-6"},Loe={class:"chart-container"},Soe={class:"bg-white rounded-lg shadow-md p-6"},Coe={class:"chart-container"},Eoe={class:"bg-white rounded-lg shadow-md p-6"},Poe={class:"chart-container"},Moe={class:"bg-white rounded-lg shadow-md p-6"},koe={class:"chart-container"},Aoe={class:"bg-white rounded-lg shadow-md p-6"},Toe={class:"chart-container"},Doe={class:"bg-white rounded-lg shadow-md p-6"},Ooe={class:"chart-container"},Noe=Rs({__name:"MeteoView",setup(t){const e=iu(),n=ga(),r=Ct({}),i=Ct(new Date),s=Ct(""),o=Ct([]),a=Ct(""),l=Ct([]),c=Ct(null),h=Ct(""),p=Ct(""),v=Jn(()=>n.isAdmin);let g=null;const x=Jn(()=>!a.value||!o.value.length?null:o.value.find(Q=>Q.mac===a.value));function E(Q){return Q?Q.latitude&&Q.longitude&&Q.latitude!==0&&Q.longitude!==0:!1}function k(Q){return E(Q)?`${Q.latitude.toFixed(6)}, ${Q.longitude.toFixed(6)}`:""}function A(Q){if(!E(Q))return"#";const se=Q.latitude,ue=Q.longitude,ze=encodeURIComponent(Q.name||"Station mto");return`https://www.google.com/maps/search/?api=1&query=${se},${ue}&query_place_id=${ze}`}async function D(){try{h.value="";const Q={};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",Q);const se=await H1.getDevices(Q);console.log("[fetchDevices] Rponse API:",se.data);let ue;if(se.data&&se.data.devices)ue=se.data.devices;else if(Array.isArray(se.data))ue=se.data;else if(ue=[],typeof se.data=="object"&&se.data!==null){for(const ze in se.data)if(Array.isArray(se.data[ze])){ue=se.data[ze];break}}o.value=ue.map(ze=>{var Ce,ye;return{id:ze.id,name:ze.name||`Station ${ze.mac}`,mac:ze.mac,model:((Ce=ze.stationtype)==null?void 0:Ce.split("_")[0])||"Inconnu",firmware_version:(ye=ze.stationtype)!=null&&ye.includes("_V")?ze.stationtype.split("_V")[1]:"1.0",timezone:ze.date_zone_id||"UTC",created_at:ze.createtime?new Date(ze.createtime*1e3).toISOString():new Date().toISOString(),latitude:ze.latitude||0,longitude:ze.longitude||0}}),console.log("[fetchDevices] Appareils normaliss:",o.value),o.value.length>0?(a.value=o.value[0].mac,await z()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(Q){console.error("[fetchDevices] Erreur lors de la rcupration des appareils:",Q),Q.response&&Q.response.data&&Q.response.data.error?h.value=Q.response.data.error:(h.value="Erreur lors de la rcupration des stations mto",e.error("Erreur lors de la rcupration des stations mto")),o.value=[],a.value="",r.value={}}}async function z(){if(a.value)try{h.value="";const Q={mac:a.value};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",Q);const se=await H1.getRealTimeData(Q);console.log("[fetchWeatherData] Rponse API:",se.data),console.log("[fetchWeatherData] Structure de la rponse:",{hasData:se.data&&"data"in se.data,hasCode:se.data&&"code"in se.data,topLevelKeys:se.data?Object.keys(se.data):[]});let ue;se.data&&"data"in se.data?ue=se.data.data:se.data&&("outdoor"in se.data||"indoor"in se.data)?ue=se.data:(ue={},console.warn("[fetchWeatherData] Format de rponse non reconnu")),r.value=ue,i.value=new Date,console.log("[fetchWeatherData] Donnes mto extraites:",r.value)}catch(Q){console.error("[fetchWeatherData] Erreur:",Q),Q.response&&Q.response.data&&Q.response.data.error?h.value=Q.response.data.error:(h.value="Erreur lors de la rcupration des donnes mto",e.error("Erreur lors de la rcupration des donnes mto")),r.value={}}}function Y(Q){if(Q==null)return"0";const se=typeof Q=="string"?parseFloat(Q):Q;return isNaN(se)?"0":((se-32)*5/9).toFixed(1)}function te(Q){if(Q==null)return"0";const se=typeof Q=="string"?parseFloat(Q):Q;return isNaN(se)?"0":(se*1.60934).toFixed(1)}function ge(Q){if(Q==null)return"0";const se=typeof Q=="string"?parseFloat(Q):Q;return isNaN(se)?"0":(se*25.4).toFixed(1)}function pe(Q){if(Q==null)return"0";const se=typeof Q=="string"?parseFloat(Q):Q;return isNaN(se)?"0":(se*33.8639).toFixed(1)}function N(Q){if(!Q)return"N/A";const se=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],ue=Math.round(Q/22.5)%16;return se[ue]}function j(Q){return Q?Q>0?"En hausse":"En baisse":"Stable"}async function K(){if(v.value)try{const Q=await Tl.getUsers({role:"ENTREPRISE"});l.value=Q.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(Q){console.error("Erreur lors de la rcupration des entreprises:",Q),e.error("Erreur lors de la rcupration des entreprises")}}async function I(){try{o.value=[],a.value="",r.value={},h.value="",Object.values(de).forEach(Q=>{try{Q.destroy()}catch(se){console.error("Erreur lors de la destruction d'un graphique:",se)}}),de={},await D()}catch(Q){console.error("Erreur lors de la rcupration des appareils avec l'entreprise:",Q),e.error("Erreur lors du changement d'entreprise")}}const R=[{id:"realtime",name:"Temps rel"},{id:"history",name:"Historique"}],B=Ct("realtime"),$=Ct("today"),U=Ct("5min"),V=Ct(""),ne=Ct(""),X=()=>{const Q=new Date,se=new Date(Q);se.setDate(Q.getDate()-1),V.value=se.toISOString().split("T")[0],ne.value=se.toISOString().split("T")[0]},we=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],ve=Jn(()=>{const Q=ce(),se=new Date(Q.start),ue=new Date(Q.end);ue.setHours(23,59,59,999);const ze=Math.abs(ue.getTime()-se.getTime()),Ce=Math.ceil(ze/(1e3*60*60*24)),Ve=Math.abs(new Date().getTime()-se.getTime()),Ye=Math.ceil(Ve/(1e3*60*60*24));return we.filter(Ke=>Ce<=Ke.maxDays&&Ye<=Ke.maxPastDays)});ki($,Q=>{Q==="custom"&&X(),!ve.value.some(ue=>ue.value===U.value)&&ve.value.length>0&&(U.value=ve.value[0].value)}),ki([V,ne],()=>{$.value==="custom"&&!ve.value.some(se=>se.value===U.value)&&ve.value.length>0&&(U.value=ve.value[0].value)});const Ze=Ct(null),ie=Ct(null),H=Ct(null),Z=Ct(null),me=Ct(null),fe=Ct(null);let de={};const ce=()=>{let Q=new Date,se=new Date;switch($.value){case"today":Q.setHours(0,0,0,0);break;case"yesterday":Q.setDate(Q.getDate()-1),Q.setHours(0,0,0,0),se.setDate(se.getDate()-1),se.setHours(23,59,59,999);break;case"week":Q.setDate(Q.getDate()-7);break;case"month":Q.setDate(Q.getDate()-30);break;case"custom":Q=new Date(V.value),se=new Date(ne.value);break}return{start:Q.toISOString().split("T")[0],end:se.toISOString().split("T")[0]}},J=async()=>{try{if(Re.value){console.log("[updateAllCharts] Mise  jour dj en cours, annulation");return}if(Re.value=!0,ve.value.length===0){e.warning("Aucun intervalle disponible pour cette priode"),Re.value=!1;return}ve.value.some(ze=>ze.value===U.value)||(U.value=ve.value[0].value),console.log("[updateAllCharts] Dbut de la mise  jour des graphiques");const se=ce(),ue={mac:a.value,start_date:se.start,end_date:se.end,cycle_type:U.value};v.value&&c.value&&(ue.entreprise=c.value),console.log("[updateAllCharts] Rcupration des donnes historiques:",ue);try{const Ce=(await H1.getHistoryData(ue)).data;console.log("[updateAllCharts] Donnes historiques reues:",Ce);const ye=[{type:"temp",ref:Ze},{type:"humidity",ref:ie},{type:"pressure",ref:H},{type:"wind",ref:Z},{type:"rain",ref:me},{type:"solar",ref:fe}];for(const Ve of ye)if(console.log(`[updateAllCharts] Mise  jour du graphique ${Ve.type}`),Ve.ref.value){const Ye=he(Ce,Ve.type);De(Ve.type,Ve.ref.value,Ye)}s.value=new Date().toLocaleString()}catch(ze){console.error("[updateAllCharts] Erreur lors de la rcupration des donnes:",ze),e.error("Erreur lors de la rcupration des donnes historiques")}finally{Re.value=!1}}catch(Q){console.error("[updateAllCharts] Erreur lors de la mise  jour des graphiques:",Q),e.error("Erreur lors de la mise  jour des graphiques"),Re.value=!1}},Re=Ct(!1),De=(Q,se,ue)=>{try{if(de[Q]&&(de[Q].destroy(),delete de[Q]),console.log(`[updateChart] Donnes reues pour ${Q}:`,ue),!ue.datasets||!ue.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${Q}`),de[Q]=new Wc(se,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donne disponible"}}}});return}let ze="hour";U.value==="5min"||U.value==="30min"?ze="hour":(U.value==="4hour"||U.value==="1day")&&(ze="day");const Ce=ce(),ye=new Date(Ce.start),Ve=new Date(Ce.end);Ve.setHours(23,59,59,999);const Ye={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(Ke){return Ke.length>0?new Date(Ke[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:ze,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:ye.getTime(),max:Ve.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:et(Q)},ticks:{callback:function(Ke){const _t=typeof Ke=="string"?parseFloat(Ke):Ke;switch(Q){case"temp":return _t.toFixed(1)+"C";case"humidity":return _t.toFixed(0)+"%";case"pressure":return _t.toFixed(0)+" hPa";case"wind":case"rain":return _t.toFixed(1)+(Q==="wind"?" km/h":" mm");case"solar":return _t.toFixed(0)+" W/m";default:return _t}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};de[Q]=new Wc(se,{type:"line",data:{datasets:ue.datasets||[]},options:Ye}),console.log(`[updateChart] Graphique ${Q} cr avec ${ue.datasets.length} datasets`)}catch(ze){console.error(`[updateChart] Erreur lors de la mise  jour du graphique ${Q}:`,ze)}},et=Q=>{switch(Q){case"temp":return"Temprature (C)";case"humidity":return"Humidit (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Prcipitations (mm)";case"solar":return"Rayonnement (W/m)";default:return""}},he=(Q,se)=>{var ye,Ve,Ye,Ke,_t,Ge,ft,Ut,tn,yn,Qe,at,it,$t,Zt,On,mn,Tn,Qn;if(console.log(`[formatHistoryDataForChart] Donnes reues pour ${se}:`,Q),!Q)return console.warn(`[formatHistoryDataForChart] Pas de donnes pour ${se}`),null;let ue;if("data"in Q)ue=Q.data;else if(se in Q)ue=Q;else return console.warn(`[formatHistoryDataForChart] Structure de donnes non reconnue pour ${se}`),null;console.log(`[formatHistoryDataForChart] Donnes extraites pour ${se}:`,ue);const ze=[],Ce=(Qt,xn,Cn,er)=>{if(!Array.isArray(Qt)){console.warn(`[formatHistoryDataForChart] Les donnes pour ${xn} ne sont pas un tableau`);return}const vr=Qt.map(xr=>{const ur=parseFloat(String(xr.value));return{x:xr.time,y:er?er(ur):ur}}).filter(xr=>!isNaN(xr.y));vr.length>0&&ze.push({label:xn,data:vr,borderColor:Cn,fill:!1,tension:.4})};switch(se){case"temp":(Ve=(ye=ue.outdoor)==null?void 0:ye.temperature)!=null&&Ve.list?Ce(Object.entries(ue.outdoor.temperature.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Temprature","#FF6384",Qt=>(Qt-32)*5/9):(Ye=ue.outdoor)!=null&&Ye.temperature&&Ce(ue.outdoor.temperature,"Temprature","#FF6384",Qt=>(Qt-32)*5/9);break;case"humidity":(_t=(Ke=ue.outdoor)==null?void 0:Ke.humidity)!=null&&_t.list?Ce(Object.entries(ue.outdoor.humidity.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Humidit","#36A2EB"):(Ge=ue.outdoor)!=null&&Ge.humidity&&Ce(ue.outdoor.humidity,"Humidit","#36A2EB");break;case"pressure":(Ut=(ft=ue.pressure)==null?void 0:ft.absolute)!=null&&Ut.list?Ce(Object.entries(ue.pressure.absolute.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Pression","#4BC0C0",Qt=>Qt*33.8639):(tn=ue.pressure)!=null&&tn.absolute&&Ce(ue.pressure.absolute,"Pression","#4BC0C0",Qt=>Qt*33.8639);break;case"wind":(Qe=(yn=ue.wind)==null?void 0:yn.wind_speed)!=null&&Qe.list?(Ce(Object.entries(ue.wind.wind_speed.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),(at=ue.wind.wind_gust)!=null&&at.list&&Ce(Object.entries(ue.wind.wind_gust.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Rafales","#FF9F40",Qt=>Qt*1.60934)):(it=ue.wind)!=null&&it.wind_speed&&(Ce(ue.wind.wind_speed,"Vitesse du vent","#FFCE56",Qt=>Qt*1.60934),ue.wind.wind_gust&&Ce(ue.wind.wind_gust,"Rafales","#FF9F40",Qt=>Qt*1.60934));break;case"rain":(Zt=($t=ue.rainfall)==null?void 0:$t.daily)!=null&&Zt.list?Ce(Object.entries(ue.rainfall.daily.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Prcipitations journalires","#9966FF",Qt=>Qt*25.4):(On=ue.rainfall)!=null&&On.daily&&Ce(ue.rainfall.daily,"Prcipitations journalires","#9966FF",Qt=>Qt*25.4);break;case"solar":(Tn=(mn=ue.solar_and_uvi)==null?void 0:mn.solar)!=null&&Tn.list?Ce(Object.entries(ue.solar_and_uvi.solar.list).map(([Qt,xn])=>({time:parseInt(Qt)*1e3,value:xn})),"Rayonnement solaire","#FF9F40"):(Qn=ue.solar_and_uvi)!=null&&Qn.solar&&Ce(ue.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets gnrs pour ${se}:`,ze),{datasets:ze}};return Zu(()=>{Object.values(de).forEach(Q=>Q.destroy())}),ki([$,U,V,ne],()=>{B.value==="history"&&a.value&&J()}),go(async()=>{const Q=[];v.value&&Q.push(K()),await Promise.all(Q),await D(),g=window.setInterval(z,5*60*1e3)}),ki(c,Q=>{v.value&&Q&&I()}),ki(a,Q=>{Q&&B.value==="history"&&J()}),ki(B,Q=>{Q==="history"&&a.value&&J()}),Zu(()=>{g&&clearInterval(g)}),(Q,se)=>{var ue,ze,Ce,ye,Ve,Ye,Ke,_t,Ge,ft,Ut,tn,yn,Qe,at,it,$t,Zt,On,mn,Tn,Qn,Qt,xn,Cn,er,vr,xr,ur,qr,Fs,Ai,Oo,Ts,tr,Ds,No,lt;return Te(),Ie("div",hse,[S("div",fse,[se[38]||(se[38]=S("h1",{class:"text-3xl font-bold mb-4"},"Mto",-1)),v.value?(Te(),Ie("div",pse,[se[6]||(se[6]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une entreprise ",-1)),S("div",gse,[kn(S("select",{"onUpdate:modelValue":se[0]||(se[0]=Be=>c.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:I},[l.value.length?Jt("",!0):(Te(),Ie("option",vse,"Chargement des entreprises...")),(Te(!0),Ie(wn,null,ir(l.value,Be=>(Te(),Ie("option",{key:Be.id,value:Be.id},kt(Be.company_name||`${Be.first_name} ${Be.last_name}`),9,yse))),128))],40,mse),[[ns,c.value]])])])):Jt("",!0),h.value?(Te(),Ie("div",bse,[S("div",_se,[se[7]||(se[7]=S("div",{class:"flex-shrink-0"},[S("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),S("div",wse,[S("h3",xse,kt(h.value),1)])])])):Jt("",!0),S("div",Lse,[se[17]||(se[17]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Slectionner une station ",-1)),S("div",Sse,[kn(S("select",{"onUpdate:modelValue":se[1]||(se[1]=Be=>a.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||h.value)},[!o.value.length&&!h.value?(Te(),Ie("option",Ese,"Chargement des stations...")):Jt("",!0),h.value?(Te(),Ie("option",Pse,"Aucune station disponible")):Jt("",!0),(Te(!0),Ie(wn,null,ir(o.value,Be=>(Te(),Ie("option",{key:Be.mac,value:Be.mac},kt(Be.name)+" ("+kt(Be.model)+" - v"+kt(Be.firmware_version)+") ",9,Mse))),128))],8,Cse),[[ns,a.value]]),S("button",{onClick:z,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||h.value)}," Actualiser ",8,kse)]),x.value?(Te(),Ie("div",Ase,[se[16]||(se[16]=S("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),S("div",Tse,[S("div",null,[se[8]||(se[8]=S("span",{class:"text-gray-500"},"Modle:",-1)),S("p",Dse,kt(x.value.model),1)]),S("div",null,[se[9]||(se[9]=S("span",{class:"text-gray-500"},"Version:",-1)),S("p",Ose,kt(x.value.firmware_version),1)]),S("div",null,[se[10]||(se[10]=S("span",{class:"text-gray-500"},"ID:",-1)),S("p",Nse,kt(x.value.id),1)]),S("div",null,[se[11]||(se[11]=S("span",{class:"text-gray-500"},"MAC:",-1)),S("p",Ise,kt(x.value.mac),1)]),S("div",null,[se[12]||(se[12]=S("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),S("p",Bse,kt(x.value.timezone),1)]),S("div",null,[se[13]||(se[13]=S("span",{class:"text-gray-500"},"Installation:",-1)),S("p",Rse,kt(new Date(x.value.created_at).toLocaleDateString()),1)]),S("div",Fse,[se[15]||(se[15]=S("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Te(),Ie("a",{key:0,href:A(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[se[14]||(se[14]=S("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[S("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),Xr(" "+kt(k(x.value)),1)],8,jse)):Jt("",!0)])])])):Jt("",!0)]),S("div",zse,[S("div",$se,[S("nav",Vse,[(Te(),Ie(wn,null,ir(R,Be=>S("button",{key:Be.id,onClick:dt=>B.value=Be.id,class:Di([B.value===Be.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},kt(Be.name),11,Use)),64))])])]),B.value==="realtime"?(Te(),Ie("div",Hse,[S("p",Wse," Dernire mise  jour : "+kt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),S("div",Gse,[S("div",qse,[se[18]||(se[18]=S("h2",{class:"text-xl font-semibold mb-4"},"Temprature Extrieure",-1)),S("div",Yse,kt(Y((ze=(ue=r.value.outdoor)==null?void 0:ue.temperature)==null?void 0:ze.value))+"C ",1),S("div",Kse," Min: "+kt(Y(((ye=(Ce=r.value.outdoor)==null?void 0:Ce.temperature)==null?void 0:ye.min)||"0"))+"C Max: "+kt(Y(((Ye=(Ve=r.value.outdoor)==null?void 0:Ve.temperature)==null?void 0:Ye.max)||"0"))+"C ",1)]),S("div",Zse,[se[19]||(se[19]=S("h2",{class:"text-xl font-semibold mb-4"},"Humidit",-1)),S("div",Xse,kt(((_t=(Ke=r.value.outdoor)==null?void 0:Ke.humidity)==null?void 0:_t.value)||"0")+"% ",1),S("div",Jse,[S("div",Qse,[S("div",{class:"bg-primary-600 h-2.5 rounded-full",style:nu({width:`${((ft=(Ge=r.value.outdoor)==null?void 0:Ge.humidity)==null?void 0:ft.value)||0}%`})},null,4)])])]),S("div",eoe,[se[20]||(se[20]=S("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphrique",-1)),S("div",toe,kt(pe((tn=(Ut=r.value.pressure)==null?void 0:Ut.absolute)==null?void 0:tn.value))+" hPa ",1),S("div",noe," Tendance: "+kt(j((Qe=(yn=r.value.pressure)==null?void 0:yn.absolute)==null?void 0:Qe.trend)),1)]),S("div",roe,[se[22]||(se[22]=S("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),S("div",ioe,kt(te(((it=(at=r.value.wind)==null?void 0:at.speed)==null?void 0:it.value)||((Zt=($t=r.value.wind)==null?void 0:$t.wind_speed)==null?void 0:Zt.value)))+" km/h ",1),S("div",soe,[Xr(" Direction: "+kt(N(((mn=(On=r.value.wind)==null?void 0:On.direction)==null?void 0:mn.value)||((Qn=(Tn=r.value.wind)==null?void 0:Tn.wind_direction)==null?void 0:Qn.value)))+" ",1),se[21]||(se[21]=S("br",null,null,-1)),Xr(" Rafales: "+kt(te(((xn=(Qt=r.value.wind)==null?void 0:Qt.gust)==null?void 0:xn.value)||((er=(Cn=r.value.wind)==null?void 0:Cn.wind_gust)==null?void 0:er.value)))+" km/h ",1)])]),S("div",ooe,[se[24]||(se[24]=S("h2",{class:"text-xl font-semibold mb-4"},"Prcipitations",-1)),S("div",aoe,kt(ge((xr=(vr=r.value.rainfall)==null?void 0:vr.daily)==null?void 0:xr.value))+" mm ",1),S("div",loe,[Xr(" Taux: "+kt(ge(((qr=(ur=r.value.rainfall)==null?void 0:ur.rate)==null?void 0:qr.value)||((Ai=(Fs=r.value.rainfall)==null?void 0:Fs.rain_rate)==null?void 0:Ai.value)))+" mm/h ",1),se[23]||(se[23]=S("br",null,null,-1)),Xr(" Mensuel: "+kt(ge((Ts=(Oo=r.value.rainfall)==null?void 0:Oo.monthly)==null?void 0:Ts.value))+" mm ",1)])]),S("div",uoe,[se[25]||(se[25]=S("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),S("div",coe,kt(((Ds=(tr=r.value.solar_and_uvi)==null?void 0:tr.solar)==null?void 0:Ds.value)||"0")+" W/m ",1),S("div",doe," UV: "+kt(((lt=(No=r.value.solar_and_uvi)==null?void 0:No.uvi)==null?void 0:lt.value)||"0"),1)])])])):B.value==="history"?(Te(),Ie("div",hoe,[S("div",foe,[se[26]||(se[26]=S("h2",{class:"text-xl font-semibold"},"Donnes historiques",-1)),S("div",poe,[s.value?(Te(),Ie("div",goe," Dernire mise  jour: "+kt(s.value),1)):Jt("",!0),S("button",{onClick:J,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,moe)])]),S("div",voe,[S("div",null,[se[28]||(se[28]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Priode ",-1)),kn(S("select",{"onUpdate:modelValue":se[2]||(se[2]=Be=>$.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},se[27]||(se[27]=[tu('<option value="today" data-v-9a089f70>Aujourd&#39;hui</option><option value="yesterday" data-v-9a089f70>Hier</option><option value="week" data-v-9a089f70>7 derniers jours</option><option value="month" data-v-9a089f70>30 derniers jours</option><option value="custom" data-v-9a089f70>Priode personnalise</option>',5)]),512),[[ns,$.value]])]),$.value==="custom"?(Te(),Ie("div",yoe,[S("div",null,[se[29]||(se[29]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de dbut ",-1)),kn(S("input",{type:"date","onUpdate:modelValue":se[3]||(se[3]=Be=>V.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[$r,V.value]])]),S("div",null,[se[30]||(se[30]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),kn(S("input",{type:"date","onUpdate:modelValue":se[4]||(se[4]=Be=>ne.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[$r,ne.value]])])])):Jt("",!0),S("div",null,[se[31]||(se[31]=S("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),kn(S("select",{"onUpdate:modelValue":se[5]||(se[5]=Be=>U.value=Be),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Te(!0),Ie(wn,null,ir(ve.value,Be=>(Te(),Ie("option",{key:Be.value,value:Be.value},kt(Be.label),9,boe))),128))],512),[[ns,U.value]]),p.value?(Te(),Ie("div",_oe,kt(p.value),1)):Jt("",!0)])]),S("div",woe,[S("div",xoe,[se[32]||(se[32]=S("h3",{class:"text-lg font-semibold mb-4"},"Temprature",-1)),S("div",Loe,[S("canvas",{ref_key:"tempChart",ref:Ze},null,512)])]),S("div",Soe,[se[33]||(se[33]=S("h3",{class:"text-lg font-semibold mb-4"},"Humidit",-1)),S("div",Coe,[S("canvas",{ref_key:"humidityChart",ref:ie},null,512)])]),S("div",Eoe,[se[34]||(se[34]=S("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),S("div",Poe,[S("canvas",{ref_key:"pressureChart",ref:H},null,512)])]),S("div",Moe,[se[35]||(se[35]=S("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),S("div",koe,[S("canvas",{ref_key:"windChart",ref:Z},null,512)])]),S("div",Aoe,[se[36]||(se[36]=S("h3",{class:"text-lg font-semibold mb-4"},"Prcipitations",-1)),S("div",Toe,[S("canvas",{ref_key:"rainChart",ref:me},null,512)])]),S("div",Doe,[se[37]||(se[37]=S("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),S("div",Ooe,[S("canvas",{ref_key:"solarChart",ref:fe},null,512)])])])])):Jt("",!0)])])}}}),Ioe=rd(Noe,[["__scopeId","data-v-9a089f70"]]),IM=KB({history:EB("/"),routes:[{path:"/",name:"home",component:B5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:Ioe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:XK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:xY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>kd(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Oj,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>kd(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>kd(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:tj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:LX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:B5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>kd(()=>import("./NotFoundView.js"),[])}]});IM.beforeEach(async(t,e,n)=>{var a,l;const r=ga();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function Boe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function h(){if("serviceWorker"in navigator){if(a=await kd(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=h(),c}const gw=Rv(O9),BM=rI();gw.use(BM);gw.use(IM);const Roe=ga(BM);window.INITIAL_STATE&&Roe.initialize(window.INITIAL_STATE);gw.mount("#app");Boe({immediate:!0,onRegistered(t){t&&console.log("SW enregistr:",t)},onRegisterError(t){console.error("Erreur d'enregistrement du SW:",t)},onOfflineReady(){console.log("L'application est prte  tre utilise hors ligne")}});export{cs as _,su as a,S as b,Ie as c,Rs as d,Jt as e,Yn as f,Xr as g,kn as h,Te as i,tu as j,mi as k,Gu as l,yS as m,Di as n,go as o,XB as p,Dm as q,Ct as r,Ea as s,kt as t,ga as u,$r as v,Su as w,B_ as x};

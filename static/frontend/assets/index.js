var CD=Object.defineProperty;var ED=(t,e,n)=>e in t?CD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Ze=(t,e,n)=>ED(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function dy(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const Bi={},fp=[],Gu=()=>{},PD=()=>!1,Pm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),o_=t=>t.startsWith("onUpdate:"),Cs=Object.assign,a_=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},MD=Object.prototype.hasOwnProperty,ns=(t,e)=>MD.call(t,e),rr=Array.isArray,pp=t=>Rp(t)==="[object Map]",Sf=t=>Rp(t)==="[object Set]",Mx=t=>Rp(t)==="[object Date]",kD=t=>Rp(t)==="[object RegExp]",kr=t=>typeof t=="function",Ns=t=>typeof t=="string",xc=t=>typeof t=="symbol",gs=t=>t!==null&&typeof t=="object",l_=t=>(gs(t)||kr(t))&&kr(t.then)&&kr(t.catch),PL=Object.prototype.toString,Rp=t=>PL.call(t),AD=t=>Rp(t).slice(8,-1),fy=t=>Rp(t)==="[object Object]",u_=t=>Ns(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,gp=dy(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),py=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},TD=/-(\w)/g,$a=py(t=>t.replace(TD,(e,n)=>n?n.toUpperCase():"")),DD=/\B([A-Z])/g,Jl=py(t=>t.replace(DD,"-$1").toLowerCase()),Mm=py(t=>t.charAt(0).toUpperCase()+t.slice(1)),Ng=py(t=>t?`on${Mm(t)}`:""),Al=(t,e)=>!Object.is(t,e),mp=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},ML=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},Sv=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Cv=t=>{const e=Ns(t)?Number(t):NaN;return isNaN(e)?t:e};let kx;const gy=()=>kx||(kx=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),OD="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",ND=dy(OD);function eu(t){if(rr(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],i=Ns(r)?FD(r):eu(r);if(i)for(const s in i)e[s]=i[s]}return e}else if(Ns(t)||gs(t))return t}const ID=/;(?![^(]*\))/g,BD=/:([^]+)/,RD=/\/\*[^]*?\*\//g;function FD(t){const e={};return t.replace(RD,"").split(ID).forEach(n=>{if(n){const r=n.split(BD);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Fi(t){let e="";if(Ns(t))e=t;else if(rr(t))for(let n=0;n<t.length;n++){const r=Fi(t[n]);r&&(e+=r+" ")}else if(gs(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function jD(t){if(!t)return null;let{class:e,style:n}=t;return e&&!Ns(e)&&(t.class=Fi(e)),n&&(t.style=eu(n)),t}const zD="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$D=dy(zD);function kL(t){return!!t||t===""}function VD(t,e){if(t.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<t.length;r++)n=wd(t[r],e[r]);return n}function wd(t,e){if(t===e)return!0;let n=Mx(t),r=Mx(e);if(n||r)return n&&r?t.getTime()===e.getTime():!1;if(n=xc(t),r=xc(e),n||r)return t===e;if(n=rr(t),r=rr(e),n||r)return n&&r?VD(t,e):!1;if(n=gs(t),r=gs(e),n||r){if(!n||!r)return!1;const i=Object.keys(t).length,s=Object.keys(e).length;if(i!==s)return!1;for(const o in t){const a=t.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!wd(t[o],e[o]))return!1}}return String(t)===String(e)}function my(t,e){return t.findIndex(n=>wd(n,e))}const AL=t=>!!(t&&t.__v_isRef===!0),Dt=t=>Ns(t)?t:t==null?"":rr(t)||gs(t)&&(t.toString===PL||!kr(t.toString))?AL(t)?Dt(t.value):JSON.stringify(t,TL,2):String(t),TL=(t,e)=>AL(e)?TL(t,e.value):pp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,i],s)=>(n[M1(r,s)+" =>"]=i,n),{})}:Sf(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>M1(n))}:xc(e)?M1(e):gs(e)&&!rr(e)&&!fy(e)?String(e):e,M1=(t,e="")=>{var n;return xc(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kl;class c_{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=kl,!e&&kl&&(this.index=(kl.scopes||(kl.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=kl;try{return kl=this,e()}finally{kl=n}}}on(){kl=this}off(){kl=this.parent}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function h_(t){return new c_(t)}function d_(){return kl}function DL(t,e=!1){kl&&kl.cleanups.push(t)}let Ds;const k1=new WeakSet;class im{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,kl&&kl.active&&kl.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,k1.has(this)&&(k1.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||NL(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ax(this),IL(this);const e=Ds,n=_c;Ds=this,_c=!0;try{return this.fn()}finally{BL(this),Ds=e,_c=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)g_(e);this.deps=this.depsTail=void 0,Ax(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?k1.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){N2(this)&&this.run()}get dirty(){return N2(this)}}let OL=0,Ig,Bg;function NL(t,e=!1){if(t.flags|=8,e){t.next=Bg,Bg=t;return}t.next=Ig,Ig=t}function f_(){OL++}function p_(){if(--OL>0)return;if(Bg){let e=Bg;for(Bg=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Ig;){let e=Ig;for(Ig=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function IL(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function BL(t){let e,n=t.depsTail,r=n;for(;r;){const i=r.prevDep;r.version===-1?(r===n&&(n=i),g_(r),UD(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=i}t.deps=e,t.depsTail=n}function N2(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(RL(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function RL(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===sm))return;t.globalVersion=sm;const e=t.dep;if(t.flags|=2,e.version>0&&!t.isSSR&&t.deps&&!N2(t)){t.flags&=-3;return}const n=Ds,r=_c;Ds=t,_c=!0;try{IL(t);const i=t.fn(t._value);(e.version===0||Al(i,t._value))&&(t._value=i,e.version++)}catch(i){throw e.version++,i}finally{Ds=n,_c=r,BL(t),t.flags&=-3}}function g_(t,e=!1){const{dep:n,prevSub:r,nextSub:i}=t;if(r&&(r.nextSub=i,t.prevSub=void 0),i&&(i.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let s=n.computed.deps;s;s=s.nextDep)g_(s,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function UD(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}function HD(t,e){t.effect instanceof im&&(t=t.effect.fn);const n=new im(t);e&&Cs(n,e);try{n.run()}catch(i){throw n.stop(),i}const r=n.run.bind(n);return r.effect=n,r}function WD(t){t.effect.stop()}let _c=!0;const FL=[];function kd(){FL.push(_c),_c=!1}function Ad(){const t=FL.pop();_c=t===void 0?!0:t}function Ax(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=Ds;Ds=void 0;try{e()}finally{Ds=n}}}let sm=0;class GD{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class vy{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!Ds||!_c||Ds===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Ds)n=this.activeLink=new GD(Ds,this),Ds.deps?(n.prevDep=Ds.depsTail,Ds.depsTail.nextDep=n,Ds.depsTail=n):Ds.deps=Ds.depsTail=n,jL(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Ds.depsTail,n.nextDep=void 0,Ds.depsTail.nextDep=n,Ds.depsTail=n,Ds.deps===n&&(Ds.deps=r)}return n}trigger(e){this.version++,sm++,this.notify(e)}notify(e){f_();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{p_()}}}function jL(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)jL(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Ev=new WeakMap,cf=Symbol(""),I2=Symbol(""),om=Symbol("");function ol(t,e,n){if(_c&&Ds){let r=Ev.get(t);r||Ev.set(t,r=new Map);let i=r.get(n);i||(r.set(n,i=new vy),i.map=r,i.key=n),i.track()}}function Ch(t,e,n,r,i,s){const o=Ev.get(t);if(!o){sm++;return}const a=l=>{l&&l.trigger()};if(f_(),e==="clear")o.forEach(a);else{const l=rr(t),c=l&&u_(n);if(l&&n==="length"){const d=Number(r);o.forEach((p,v)=>{(v==="length"||v===om||!xc(v)&&v>=d)&&a(p)})}else switch((n!==void 0||o.has(void 0))&&a(o.get(n)),c&&a(o.get(om)),e){case"add":l?c&&a(o.get("length")):(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"delete":l||(a(o.get(cf)),pp(t)&&a(o.get(I2)));break;case"set":pp(t)&&a(o.get(cf));break}}p_()}function qD(t,e){const n=Ev.get(t);return n&&n.get(e)}function Gf(t){const e=Ii(t);return e===t?e:(ol(e,"iterate",om),Su(t)?e:e.map(al))}function yy(t){return ol(t=Ii(t),"iterate",om),t}const YD={__proto__:null,[Symbol.iterator](){return A1(this,Symbol.iterator,al)},concat(...t){return Gf(this).concat(...t.map(e=>rr(e)?Gf(e):e))},entries(){return A1(this,"entries",t=>(t[1]=al(t[1]),t))},every(t,e){return mh(this,"every",t,e,void 0,arguments)},filter(t,e){return mh(this,"filter",t,e,n=>n.map(al),arguments)},find(t,e){return mh(this,"find",t,e,al,arguments)},findIndex(t,e){return mh(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return mh(this,"findLast",t,e,al,arguments)},findLastIndex(t,e){return mh(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return mh(this,"forEach",t,e,void 0,arguments)},includes(...t){return T1(this,"includes",t)},indexOf(...t){return T1(this,"indexOf",t)},join(t){return Gf(this).join(t)},lastIndexOf(...t){return T1(this,"lastIndexOf",t)},map(t,e){return mh(this,"map",t,e,void 0,arguments)},pop(){return Xp(this,"pop")},push(...t){return Xp(this,"push",t)},reduce(t,...e){return Tx(this,"reduce",t,e)},reduceRight(t,...e){return Tx(this,"reduceRight",t,e)},shift(){return Xp(this,"shift")},some(t,e){return mh(this,"some",t,e,void 0,arguments)},splice(...t){return Xp(this,"splice",t)},toReversed(){return Gf(this).toReversed()},toSorted(t){return Gf(this).toSorted(t)},toSpliced(...t){return Gf(this).toSpliced(...t)},unshift(...t){return Xp(this,"unshift",t)},values(){return A1(this,"values",al)}};function A1(t,e,n){const r=yy(t),i=r[e]();return r!==t&&!Su(t)&&(i._next=i.next,i.next=()=>{const s=i._next();return s.value&&(s.value=n(s.value)),s}),i}const KD=Array.prototype;function mh(t,e,n,r,i,s){const o=yy(t),a=o!==t&&!Su(t),l=o[e];if(l!==KD[e]){const p=l.apply(t,s);return a?al(p):p}let c=n;o!==t&&(a?c=function(p,v){return n.call(this,al(p),v,t)}:n.length>2&&(c=function(p,v){return n.call(this,p,v,t)}));const d=l.call(o,c,r);return a&&i?i(d):d}function Tx(t,e,n,r){const i=yy(t);let s=n;return i!==t&&(Su(t)?n.length>3&&(s=function(o,a,l){return n.call(this,o,a,l,t)}):s=function(o,a,l){return n.call(this,o,al(a),l,t)}),i[e](s,...r)}function T1(t,e,n){const r=Ii(t);ol(r,"iterate",om);const i=r[e](...n);return(i===-1||i===!1)&&wy(n[0])?(n[0]=Ii(n[0]),r[e](...n)):i}function Xp(t,e,n=[]){kd(),f_();const r=Ii(t)[e].apply(t,n);return p_(),Ad(),r}const ZD=dy("__proto__,__v_isRef,__isVue"),zL=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(xc));function XD(t){xc(t)||(t=String(t));const e=Ii(this);return ol(e,"has",t),e.hasOwnProperty(t)}class $L{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const i=this._isReadonly,s=this._isShallow;if(n==="__v_isReactive")return!i;if(n==="__v_isReadonly")return i;if(n==="__v_isShallow")return s;if(n==="__v_raw")return r===(i?s?qL:GL:s?WL:HL).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=rr(e);if(!i){let l;if(o&&(l=YD[n]))return l;if(n==="hasOwnProperty")return XD}const a=Reflect.get(e,n,po(e)?e:r);return(xc(n)?zL.has(n):ZD(n))||(i||ol(e,"get",n),s)?a:po(a)?o&&u_(n)?a:a.value:gs(a)?i?pc(a):ru(a):a}}class VL extends $L{constructor(e=!1){super(!1,e)}set(e,n,r,i){let s=e[n];if(!this._isShallow){const l=xd(s);if(!Su(r)&&!xd(r)&&(s=Ii(s),r=Ii(r)),!rr(e)&&po(s)&&!po(r))return l?!1:(s.value=r,!0)}const o=rr(e)&&u_(n)?Number(n)<e.length:ns(e,n),a=Reflect.set(e,n,r,po(e)?e:i);return e===Ii(i)&&(o?Al(r,s)&&Ch(e,"set",n,r):Ch(e,"add",n,r)),a}deleteProperty(e,n){const r=ns(e,n);e[n];const i=Reflect.deleteProperty(e,n);return i&&r&&Ch(e,"delete",n,void 0),i}has(e,n){const r=Reflect.has(e,n);return(!xc(n)||!zL.has(n))&&ol(e,"has",n),r}ownKeys(e){return ol(e,"iterate",rr(e)?"length":cf),Reflect.ownKeys(e)}}class UL extends $L{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const JD=new VL,QD=new UL,e8=new VL(!0),t8=new UL(!0),B2=t=>t,u0=t=>Reflect.getPrototypeOf(t);function n8(t,e,n){return function(...r){const i=this.__v_raw,s=Ii(i),o=pp(s),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=i[t](...r),d=n?B2:e?R2:al;return!e&&ol(s,"iterate",l?I2:cf),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:a?[d(p[0]),d(p[1])]:d(p),done:v}},[Symbol.iterator](){return this}}}}function c0(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function r8(t,e){const n={get(i){const s=this.__v_raw,o=Ii(s),a=Ii(i);t||(Al(i,a)&&ol(o,"get",i),ol(o,"get",a));const{has:l}=u0(o),c=e?B2:t?R2:al;if(l.call(o,i))return c(s.get(i));if(l.call(o,a))return c(s.get(a));s!==o&&s.get(i)},get size(){const i=this.__v_raw;return!t&&ol(Ii(i),"iterate",cf),Reflect.get(i,"size",i)},has(i){const s=this.__v_raw,o=Ii(s),a=Ii(i);return t||(Al(i,a)&&ol(o,"has",i),ol(o,"has",a)),i===a?s.has(i):s.has(i)||s.has(a)},forEach(i,s){const o=this,a=o.__v_raw,l=Ii(a),c=e?B2:t?R2:al;return!t&&ol(l,"iterate",cf),a.forEach((d,p)=>i.call(s,c(d),c(p),o))}};return Cs(n,t?{add:c0("add"),set:c0("set"),delete:c0("delete"),clear:c0("clear")}:{add(i){!e&&!Su(i)&&!xd(i)&&(i=Ii(i));const s=Ii(this);return u0(s).has.call(s,i)||(s.add(i),Ch(s,"add",i,i)),this},set(i,s){!e&&!Su(s)&&!xd(s)&&(s=Ii(s));const o=Ii(this),{has:a,get:l}=u0(o);let c=a.call(o,i);c||(i=Ii(i),c=a.call(o,i));const d=l.call(o,i);return o.set(i,s),c?Al(s,d)&&Ch(o,"set",i,s):Ch(o,"add",i,s),this},delete(i){const s=Ii(this),{has:o,get:a}=u0(s);let l=o.call(s,i);l||(i=Ii(i),l=o.call(s,i)),a&&a.call(s,i);const c=s.delete(i);return l&&Ch(s,"delete",i,void 0),c},clear(){const i=Ii(this),s=i.size!==0,o=i.clear();return s&&Ch(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{n[i]=n8(i,t,e)}),n}function by(t,e){const n=r8(t,e);return(r,i,s)=>i==="__v_isReactive"?!t:i==="__v_isReadonly"?t:i==="__v_raw"?r:Reflect.get(ns(n,i)&&i in r?n:r,i,s)}const i8={get:by(!1,!1)},s8={get:by(!1,!0)},o8={get:by(!0,!1)},a8={get:by(!0,!0)},HL=new WeakMap,WL=new WeakMap,GL=new WeakMap,qL=new WeakMap;function l8(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function u8(t){return t.__v_skip||!Object.isExtensible(t)?0:l8(AD(t))}function ru(t){return xd(t)?t:_y(t,!1,JD,i8,HL)}function m_(t){return _y(t,!1,e8,s8,WL)}function pc(t){return _y(t,!0,QD,o8,GL)}function c8(t){return _y(t,!0,t8,a8,qL)}function _y(t,e,n,r,i){if(!gs(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const s=i.get(t);if(s)return s;const o=u8(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return i.set(t,a),a}function Zc(t){return xd(t)?Zc(t.__v_raw):!!(t&&t.__v_isReactive)}function xd(t){return!!(t&&t.__v_isReadonly)}function Su(t){return!!(t&&t.__v_isShallow)}function wy(t){return t?!!t.__v_raw:!1}function Ii(t){const e=t&&t.__v_raw;return e?Ii(e):t}function xy(t){return!ns(t,"__v_skip")&&Object.isExtensible(t)&&ML(t,"__v_skip",!0),t}const al=t=>gs(t)?ru(t):t,R2=t=>gs(t)?pc(t):t;function po(t){return t?t.__v_isRef===!0:!1}function Lt(t){return YL(t,!1)}function v_(t){return YL(t,!0)}function YL(t,e){return po(t)?t:new h8(t,e)}class h8{constructor(e,n){this.dep=new vy,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ii(e),this._value=n?e:al(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Su(e)||xd(e);e=r?e:Ii(e),Al(e,n)&&(this._rawValue=e,this._value=r?e:al(e),this.dep.trigger())}}function d8(t){t.dep&&t.dep.trigger()}function Xn(t){return po(t)?t.value:t}function f8(t){return kr(t)?t():Xn(t)}const p8={get:(t,e,n)=>e==="__v_raw"?t:Xn(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return po(i)&&!po(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function y_(t){return Zc(t)?t:new Proxy(t,p8)}class g8{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new vy,{get:r,set:i}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=i}get value(){return this._value=this._get()}set value(e){this._set(e)}}function KL(t){return new g8(t)}function ZL(t){const e=rr(t)?new Array(t.length):{};for(const n in t)e[n]=XL(t,n);return e}class m8{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return qD(Ii(this._object),this._key)}}class v8{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function y8(t,e,n){return po(t)?t:kr(t)?new v8(t):gs(t)&&arguments.length>1?XL(t,e,n):Lt(t)}function XL(t,e,n){const r=t[e];return po(r)?r:new m8(t,e,n)}class b8{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new vy(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=sm-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Ds!==this)return NL(this,!0),!0}get value(){const e=this.dep.track();return RL(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function _8(t,e,n=!1){let r,i;return kr(t)?r=t:(r=t.get,i=t.set),new b8(r,i,n)}const w8={GET:"get",HAS:"has",ITERATE:"iterate"},x8={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},h0={},Pv=new WeakMap;let rd;function L8(){return rd}function JL(t,e=!1,n=rd){if(n){let r=Pv.get(n);r||Pv.set(n,r=[]),r.push(t)}}function S8(t,e,n=Bi){const{immediate:r,deep:i,once:s,scheduler:o,augmentJob:a,call:l}=n,c=Y=>i?Y:Su(Y)||i===!1||i===0?Eh(Y,1):Eh(Y);let d,p,v,m,x=!1,E=!1;if(po(t)?(p=()=>t.value,x=Su(t)):Zc(t)?(p=()=>c(t),x=!0):rr(t)?(E=!0,x=t.some(Y=>Zc(Y)||Su(Y)),p=()=>t.map(Y=>{if(po(Y))return Y.value;if(Zc(Y))return c(Y);if(kr(Y))return l?l(Y,2):Y()})):kr(t)?e?p=l?()=>l(t,2):t:p=()=>{if(v){kd();try{v()}finally{Ad()}}const Y=rd;rd=d;try{return l?l(t,3,[m]):t(m)}finally{rd=Y}}:p=Gu,e&&i){const Y=p,te=i===!0?1/0:i;p=()=>Eh(Y(),te)}const A=d_(),k=()=>{d.stop(),A&&A.active&&a_(A.effects,d)};if(s&&e){const Y=e;e=(...te)=>{Y(...te),k()}}let D=E?new Array(t.length).fill(h0):h0;const $=Y=>{if(!(!(d.flags&1)||!d.dirty&&!Y))if(e){const te=d.run();if(i||x||(E?te.some((me,pe)=>Al(me,D[pe])):Al(te,D))){v&&v();const me=rd;rd=d;try{const pe=[te,D===h0?void 0:E&&D[0]===h0?[]:D,m];l?l(e,3,pe):e(...pe),D=te}finally{rd=me}}}else d.run()};return a&&a($),d=new im(p),d.scheduler=o?()=>o($,!1):$,m=Y=>JL(Y,!1,d),v=d.onStop=()=>{const Y=Pv.get(d);if(Y){if(l)l(Y,4);else for(const te of Y)te();Pv.delete(d)}},e?r?$(!0):D=d.run():o?o($.bind(null,!0),!0):d.run(),k.pause=d.pause.bind(d),k.resume=d.resume.bind(d),k.stop=k,k}function Eh(t,e=1/0,n){if(e<=0||!gs(t)||t.__v_skip||(n=n||new Set,n.has(t)))return t;if(n.add(t),e--,po(t))Eh(t.value,e,n);else if(rr(t))for(let r=0;r<t.length;r++)Eh(t[r],e,n);else if(Sf(t)||pp(t))t.forEach(r=>{Eh(r,e,n)});else if(fy(t)){for(const r in t)Eh(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Eh(t[r],e,n)}return t}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const QL=[];function C8(t){QL.push(t)}function E8(){QL.pop()}function P8(t,e){}const M8={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},k8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function Fp(t,e,n,r){try{return r?t(...r):t()}catch(i){Cf(i,e,n)}}function Yu(t,e,n,r){if(kr(t)){const i=Fp(t,e,n,r);return i&&l_(i)&&i.catch(s=>{Cf(s,e,n)}),i}if(rr(t)){const i=[];for(let s=0;s<t.length;s++)i.push(Yu(t[s],e,n,r));return i}}function Cf(t,e,n,r=!0){const i=e?e.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Bi;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${n}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](t,l,c)===!1)return}a=a.parent}if(s){kd(),Fp(s,null,10,[t,l,c]),Ad();return}}A8(t,n,i,r,o)}function A8(t,e,n,r=!0,i=!1){if(i)throw t;console.error(t)}const Tl=[];let $c=-1;const vp=[];let id=null,rp=0;const eS=Promise.resolve();let Mv=null;function la(t){const e=Mv||eS;return t?e.then(this?t.bind(this):t):e}function T8(t){let e=$c+1,n=Tl.length;for(;e<n;){const r=e+n>>>1,i=Tl[r],s=lm(i);s<t||s===t&&i.flags&2?e=r+1:n=r}return e}function b_(t){if(!(t.flags&1)){const e=lm(t),n=Tl[Tl.length-1];!n||!(t.flags&2)&&e>=lm(n)?Tl.push(t):Tl.splice(T8(e),0,t),t.flags|=1,tS()}}function tS(){Mv||(Mv=eS.then(nS))}function am(t){rr(t)?vp.push(...t):id&&t.id===-1?id.splice(rp+1,0,t):t.flags&1||(vp.push(t),t.flags|=1),tS()}function Dx(t,e,n=$c+1){for(;n<Tl.length;n++){const r=Tl[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;Tl.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function kv(t){if(vp.length){const e=[...new Set(vp)].sort((n,r)=>lm(n)-lm(r));if(vp.length=0,id){id.push(...e);return}for(id=e,rp=0;rp<id.length;rp++){const n=id[rp];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}id=null,rp=0}}const lm=t=>t.id==null?t.flags&2?-1:1/0:t.id;function nS(t){try{for($c=0;$c<Tl.length;$c++){const e=Tl[$c];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Fp(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;$c<Tl.length;$c++){const e=Tl[$c];e&&(e.flags&=-2)}$c=-1,Tl.length=0,kv(),Mv=null,(Tl.length||vp.length)&&nS()}}let ip,d0=[];function rS(t,e){var n,r;ip=t,ip?(ip.enabled=!0,d0.forEach(({event:i,args:s})=>ip.emit(i,...s)),d0=[]):typeof window<"u"&&window.HTMLElement&&!((r=(n=window.navigator)==null?void 0:n.userAgent)!=null&&r.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{rS(s,e)}),setTimeout(()=>{ip||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,d0=[])},3e3)):d0=[]}let ca=null,Ly=null;function um(t){const e=ca;return ca=t,Ly=t&&t.type.__scopeId||null,e}function D8(t){Ly=t}function O8(){Ly=null}const N8=t=>Wu;function Wu(t,e=ca,n){if(!e||t._n)return t;const r=(...i)=>{r._d&&G2(-1);const s=um(e);let o;try{o=t(...i)}finally{um(s),r._d&&G2(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function kn(t,e){if(ca===null)return t;const n=Tm(ca),r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[s,o,a,l=Bi]=e[i];s&&(kr(s)&&(s={mounted:s,updated:s}),s.deep&&Eh(o),r.push({dir:s,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Uc(t,e,n,r){const i=t.dirs,s=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];s&&(a.oldValue=s[o].value);let l=a.dir[r];l&&(kd(),Yu(l,n,8,[t.el,a,t,e]),Ad())}}const iS=Symbol("_vte"),sS=t=>t.__isTeleport,Rg=t=>t&&(t.disabled||t.disabled===""),Ox=t=>t&&(t.defer||t.defer===""),Nx=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Ix=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,F2=(t,e)=>{const n=t&&t.to;return Ns(n)?e?e(n):null:n},oS={name:"Teleport",__isTeleport:!0,process(t,e,n,r,i,s,o,a,l,c){const{mc:d,pc:p,pbc:v,o:{insert:m,querySelector:x,createText:E,createComment:A}}=c,k=Rg(e.props);let{shapeFlag:D,children:$,dynamicChildren:Y}=e;if(t==null){const te=e.el=E(""),me=e.anchor=E("");m(te,n,r),m(me,n,r);const pe=(z,K)=>{D&16&&(i&&i.isCE&&(i.ce._teleportTarget=z),d($,z,K,i,s,o,a,l))},I=()=>{const z=e.target=F2(e.props,x),K=aS(z,e,E,m);z&&(o!=="svg"&&Nx(z)?o="svg":o!=="mathml"&&Ix(z)&&(o="mathml"),k||(pe(z,K),K0(e,!1)))};k&&(pe(n,me),K0(e,!0)),Ox(e.props)?aa(()=>{I(),e.el.__isMounted=!0},s):I()}else{if(Ox(e.props)&&!t.el.__isMounted){aa(()=>{oS.process(t,e,n,r,i,s,o,a,l,c),delete t.el.__isMounted},s);return}e.el=t.el,e.targetStart=t.targetStart;const te=e.anchor=t.anchor,me=e.target=t.target,pe=e.targetAnchor=t.targetAnchor,I=Rg(t.props),z=I?n:me,K=I?te:pe;if(o==="svg"||Nx(me)?o="svg":(o==="mathml"||Ix(me))&&(o="mathml"),Y?(v(t.dynamicChildren,Y,z,i,s,o,a),k_(t,e,!0)):l||p(t,e,z,K,i,s,o,a,!1),k)I?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):f0(e,n,te,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const N=e.target=F2(e.props,x);N&&f0(e,N,null,c,0)}else I&&f0(e,me,pe,c,1);K0(e,k)}},remove(t,e,n,{um:r,o:{remove:i}},s){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:d,target:p,props:v}=t;if(p&&(i(c),i(d)),s&&i(l),o&16){const m=s||!Rg(v);for(let x=0;x<a.length;x++){const E=a[x];r(E,e,n,m,!!E.dynamicChildren)}}},move:f0,hydrate:I8};function f0(t,e,n,{o:{insert:r},m:i},s=2){s===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:d}=t,p=s===2;if(p&&r(o,e,n),(!p||Rg(d))&&l&16)for(let v=0;v<c.length;v++)i(c[v],e,n,2);p&&r(a,e,n)}function I8(t,e,n,r,i,s,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:d}},p){const v=e.target=F2(e.props,l);if(v){const m=Rg(e.props),x=v._lpa||v.firstChild;if(e.shapeFlag&16)if(m)e.anchor=p(o(t),e,a(t),n,r,i,s),e.targetStart=x,e.targetAnchor=x&&o(x);else{e.anchor=o(t);let E=x;for(;E;){if(E&&E.nodeType===8){if(E.data==="teleport start anchor")e.targetStart=E;else if(E.data==="teleport anchor"){e.targetAnchor=E,v._lpa=e.targetAnchor&&o(e.targetAnchor);break}}E=o(E)}e.targetAnchor||aS(v,e,d,c),p(x&&o(x),e,v,n,r,i,s)}K0(e,m)}return e.anchor&&o(e.anchor)}const j2=oS;function K0(t,e){const n=t.ctx;if(n&&n.ut){let r,i;for(e?(r=t.el,i=t.anchor):(r=t.targetStart,i=t.targetAnchor);r&&r!==i;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function aS(t,e,n,r){const i=e.targetStart=n(""),s=e.targetAnchor=n("");return i[iS]=s,t&&(r(i,t),r(s,t)),s}const sd=Symbol("_leaveCb"),p0=Symbol("_enterCb");function __(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return go(()=>{t.isMounted=!0}),Td(()=>{t.isUnmounting=!0}),t}const Ru=[Function,Array],w_={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ru,onEnter:Ru,onAfterEnter:Ru,onEnterCancelled:Ru,onBeforeLeave:Ru,onLeave:Ru,onAfterLeave:Ru,onLeaveCancelled:Ru,onBeforeAppear:Ru,onAppear:Ru,onAfterAppear:Ru,onAppearCancelled:Ru},lS=t=>{const e=t.subTree;return e.component?lS(e.component):e},B8={name:"BaseTransition",props:w_,setup(t,{slots:e}){const n=Xu(),r=__();return()=>{const i=e.default&&Sy(e.default(),!0);if(!i||!i.length)return;const s=uS(i),o=Ii(t),{mode:a}=o;if(r.isLeaving)return D1(s);const l=Bx(s);if(!l)return D1(s);let c=Sp(l,o,r,n,p=>c=p);l.type!==ta&&Nh(l,c);let d=n.subTree&&Bx(n.subTree);if(d&&d.type!==ta&&!vc(l,d)&&lS(n).type!==ta){let p=Sp(d,o,r,n);if(Nh(d,p),a==="out-in"&&l.type!==ta)return r.isLeaving=!0,p.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete p.afterLeave,d=void 0},D1(s);a==="in-out"&&l.type!==ta?p.delayLeave=(v,m,x)=>{const E=hS(r,d);E[String(d.key)]=d,v[sd]=()=>{m(),v[sd]=void 0,delete c.delayedLeave,d=void 0},c.delayedLeave=()=>{x(),delete c.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return s}}};function uS(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==ta){e=n;break}}return e}const cS=B8;function hS(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Sp(t,e,n,r,i){const{appear:s,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:v,onLeave:m,onAfterLeave:x,onLeaveCancelled:E,onBeforeAppear:A,onAppear:k,onAfterAppear:D,onAppearCancelled:$}=e,Y=String(t.key),te=hS(n,t),me=(z,K)=>{z&&Yu(z,r,9,K)},pe=(z,K)=>{const N=K[1];me(z,K),rr(z)?z.every(B=>B.length<=1)&&N():z.length<=1&&N()},I={mode:o,persisted:a,beforeEnter(z){let K=l;if(!n.isMounted)if(s)K=A||l;else return;z[sd]&&z[sd](!0);const N=te[Y];N&&vc(t,N)&&N.el[sd]&&N.el[sd](),me(K,[z])},enter(z){let K=c,N=d,B=p;if(!n.isMounted)if(s)K=k||c,N=D||d,B=$||p;else return;let V=!1;const R=z[p0]=j=>{V||(V=!0,j?me(B,[z]):me(N,[z]),I.delayedLeave&&I.delayedLeave(),z[p0]=void 0)};K?pe(K,[z,R]):R()},leave(z,K){const N=String(t.key);if(z[p0]&&z[p0](!0),n.isUnmounting)return K();me(v,[z]);let B=!1;const V=z[sd]=R=>{B||(B=!0,K(),R?me(E,[z]):me(x,[z]),z[sd]=void 0,te[N]===t&&delete te[N])};te[N]=t,m?pe(m,[z,V]):V()},clone(z){const K=Sp(z,e,n,r,i);return i&&i(K),K}};return I}function D1(t){if(km(t))return t=eh(t),t.children=null,t}function Bx(t){if(!km(t))return sS(t.type)&&t.children?uS(t.children):t;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&kr(n.default))return n.default()}}function Nh(t,e){t.shapeFlag&6&&t.component?(t.transition=e,Nh(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function Sy(t,e=!1,n){let r=[],i=0;for(let s=0;s<t.length;s++){let o=t[s];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:s);o.type===En?(o.patchFlag&128&&i++,r=r.concat(Sy(o.children,e,a))):(e||o.type!==ta)&&r.push(a!=null?eh(o,{key:a}):o)}if(i>1)for(let s=0;s<r.length;s++)r[s].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function $s(t,e){return kr(t)?Cs({name:t.name},e,{setup:t}):t}function R8(){const t=Xu();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function x_(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}function F8(t){const e=Xu(),n=v_(null);if(e){const i=e.refs===Bi?e.refs={}:e.refs;Object.defineProperty(i,t,{enumerable:!0,get:()=>n.value,set:s=>n.value=s})}return n}function cm(t,e,n,r,i=!1){if(rr(t)){t.forEach((x,E)=>cm(x,e&&(rr(e)?e[E]:e),n,r,i));return}if(vd(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cm(t,e,n,r.component.subTree);return}const s=r.shapeFlag&4?Tm(r.component):r.el,o=i?null:s,{i:a,r:l}=t,c=e&&e.r,d=a.refs===Bi?a.refs={}:a.refs,p=a.setupState,v=Ii(p),m=p===Bi?()=>!1:x=>ns(v,x);if(c!=null&&c!==l&&(Ns(c)?(d[c]=null,m(c)&&(p[c]=null)):po(c)&&(c.value=null)),kr(l))Fp(l,a,12,[o,d]);else{const x=Ns(l),E=po(l);if(x||E){const A=()=>{if(t.f){const k=x?m(l)?p[l]:d[l]:l.value;i?rr(k)&&a_(k,s):rr(k)?k.includes(s)||k.push(s):x?(d[l]=[s],m(l)&&(p[l]=d[l])):(l.value=[s],t.k&&(d[t.k]=l.value))}else x?(d[l]=o,m(l)&&(p[l]=o)):E&&(l.value=o,t.k&&(d[t.k]=o))};o?(A.id=-1,aa(A,n)):A()}}}let Rx=!1;const qf=()=>{Rx||(console.error("Hydration completed but contains mismatches."),Rx=!0)},j8=t=>t.namespaceURI.includes("svg")&&t.tagName!=="foreignObject",z8=t=>t.namespaceURI.includes("MathML"),g0=t=>{if(t.nodeType===1){if(j8(t))return"svg";if(z8(t))return"mathml"}},cp=t=>t.nodeType===8;function $8(t){const{mt:e,p:n,o:{patchProp:r,createText:i,nextSibling:s,parentNode:o,remove:a,insert:l,createComment:c}}=t,d=($,Y)=>{if(!Y.hasChildNodes()){n(null,$,Y),kv(),Y._vnode=$;return}p(Y.firstChild,$,null,null,null),kv(),Y._vnode=$},p=($,Y,te,me,pe,I=!1)=>{I=I||!!Y.dynamicChildren;const z=cp($)&&$.data==="[",K=()=>E($,Y,te,me,pe,z),{type:N,ref:B,shapeFlag:V,patchFlag:R}=Y;let j=$.nodeType;Y.el=$,R===-2&&(I=!1,Y.dynamicChildren=null);let W=null;switch(N){case yd:j!==3?Y.children===""?(l(Y.el=i(""),o($),$),W=$):W=K():($.data!==Y.children&&(qf(),$.data=Y.children),W=s($));break;case ta:D($)?(W=s($),k(Y.el=$.content.firstChild,$,te)):j!==8||z?W=K():W=s($);break;case df:if(z&&($=s($),j=$.nodeType),j===1||j===3){W=$;const X=!Y.children.length;for(let oe=0;oe<Y.staticCount;oe++)X&&(Y.children+=W.nodeType===1?W.outerHTML:W.data),oe===Y.staticCount-1&&(Y.anchor=W),W=s(W);return z?s(W):W}else K();break;case En:z?W=x($,Y,te,me,pe,I):W=K();break;default:if(V&1)(j!==1||Y.type.toLowerCase()!==$.tagName.toLowerCase())&&!D($)?W=K():W=v($,Y,te,me,pe,I);else if(V&6){Y.slotScopeIds=pe;const X=o($);if(z?W=A($):cp($)&&$.data==="teleport start"?W=A($,$.data,"teleport end"):W=s($),e(Y,X,null,te,me,g0(X),I),vd(Y)&&!Y.type.__asyncResolved){let oe;z?(oe=fi(En),oe.anchor=W?W.previousSibling:X.lastChild):oe=$.nodeType===3?li(""):fi("div"),oe.el=$,Y.component.subTree=oe}}else V&64?j!==8?W=K():W=Y.type.hydrate($,Y,te,me,pe,I,t,m):V&128&&(W=Y.type.hydrate($,Y,te,me,g0(o($)),pe,I,t,p))}return B!=null&&cm(B,null,me,Y),W},v=($,Y,te,me,pe,I)=>{I=I||!!Y.dynamicChildren;const{type:z,props:K,patchFlag:N,shapeFlag:B,dirs:V,transition:R}=Y,j=z==="input"||z==="option";if(j||N!==-1){V&&Uc(Y,null,te,"created");let W=!1;if(D($)){W=FS(null,R)&&te&&te.vnode.props&&te.vnode.props.appear;const oe=$.content.firstChild;W&&R.beforeEnter(oe),k(oe,$,te),Y.el=$=oe}if(B&16&&!(K&&(K.innerHTML||K.textContent))){let oe=m($.firstChild,Y,$,te,me,pe,I);for(;oe;){m0($,1)||qf();const _e=oe;oe=oe.nextSibling,a(_e)}}else if(B&8){let oe=Y.children;oe[0]===`
`&&($.tagName==="PRE"||$.tagName==="TEXTAREA")&&(oe=oe.slice(1)),$.textContent!==oe&&(m0($,0)||qf(),$.textContent=Y.children)}if(K){if(j||!I||N&48){const oe=$.tagName.includes("-");for(const _e in K)(j&&(_e.endsWith("value")||_e==="indeterminate")||Pm(_e)&&!gp(_e)||_e[0]==="."||oe)&&r($,_e,null,K[_e],void 0,te)}else if(K.onClick)r($,"onClick",null,K.onClick,void 0,te);else if(N&4&&Zc(K.style))for(const oe in K.style)K.style[oe]}let X;(X=K&&K.onVnodeBeforeMount)&&Zl(X,te,Y),V&&Uc(Y,null,te,"beforeMount"),((X=K&&K.onVnodeMounted)||V||W)&&qS(()=>{X&&Zl(X,te,Y),W&&R.enter($),V&&Uc(Y,null,te,"mounted")},me)}return $.nextSibling},m=($,Y,te,me,pe,I,z)=>{z=z||!!Y.dynamicChildren;const K=Y.children,N=K.length;for(let B=0;B<N;B++){const V=z?K[B]:K[B]=Xl(K[B]),R=V.type===yd;$?(R&&!z&&B+1<N&&Xl(K[B+1]).type===yd&&(l(i($.data.slice(V.children.length)),te,s($)),$.data=V.children),$=p($,V,me,pe,I,z)):R&&!V.children?l(V.el=i(""),te):(m0(te,1)||qf(),n(null,V,te,null,me,pe,g0(te),I))}return $},x=($,Y,te,me,pe,I)=>{const{slotScopeIds:z}=Y;z&&(pe=pe?pe.concat(z):z);const K=o($),N=m(s($),Y,K,te,me,pe,I);return N&&cp(N)&&N.data==="]"?s(Y.anchor=N):(qf(),l(Y.anchor=c("]"),K,N),N)},E=($,Y,te,me,pe,I)=>{if(m0($.parentElement,1)||qf(),Y.el=null,I){const N=A($);for(;;){const B=s($);if(B&&B!==N)a(B);else break}}const z=s($),K=o($);return a($),n(null,Y,K,z,te,me,g0(K),pe),te&&(te.vnode.el=Y.el,My(te,Y.el)),z},A=($,Y="[",te="]")=>{let me=0;for(;$;)if($=s($),$&&cp($)&&($.data===Y&&me++,$.data===te)){if(me===0)return s($);me--}return $},k=($,Y,te)=>{const me=Y.parentNode;me&&me.replaceChild($,Y);let pe=te;for(;pe;)pe.vnode.el===Y&&(pe.vnode.el=pe.subTree.el=$),pe=pe.parent},D=$=>$.nodeType===1&&$.tagName==="TEMPLATE";return[d,p]}const Fx="data-allow-mismatch",V8={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function m0(t,e){if(e===0||e===1)for(;t&&!t.hasAttribute(Fx);)t=t.parentElement;const n=t&&t.getAttribute(Fx);if(n==null)return!1;if(n==="")return!0;{const r=n.split(",");return e===0&&r.includes("children")?!0:n.split(",").includes(V8[e])}}const U8=gy().requestIdleCallback||(t=>setTimeout(t,1)),H8=gy().cancelIdleCallback||(t=>clearTimeout(t)),W8=(t=1e4)=>e=>{const n=U8(e,{timeout:t});return()=>H8(n)};function G8(t){const{top:e,left:n,bottom:r,right:i}=t.getBoundingClientRect(),{innerHeight:s,innerWidth:o}=window;return(e>0&&e<s||r>0&&r<s)&&(n>0&&n<o||i>0&&i<o)}const q8=t=>(e,n)=>{const r=new IntersectionObserver(i=>{for(const s of i)if(s.isIntersecting){r.disconnect(),e();break}},t);return n(i=>{if(i instanceof Element){if(G8(i))return e(),r.disconnect(),!1;r.observe(i)}}),()=>r.disconnect()},Y8=t=>e=>{if(t){const n=matchMedia(t);if(n.matches)e();else return n.addEventListener("change",e,{once:!0}),()=>n.removeEventListener("change",e)}},K8=(t=[])=>(e,n)=>{Ns(t)&&(t=[t]);let r=!1;const i=o=>{r||(r=!0,s(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},s=()=>{n(o=>{for(const a of t)o.removeEventListener(a,i)})};return n(o=>{for(const a of t)o.addEventListener(a,i,{once:!0})}),s};function Z8(t,e){if(cp(t)&&t.data==="["){let n=1,r=t.nextSibling;for(;r;){if(r.nodeType===1){if(e(r)===!1)break}else if(cp(r))if(r.data==="]"){if(--n===0)break}else r.data==="["&&n++;r=r.nextSibling}}else e(t)}const vd=t=>!!t.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function X8(t){kr(t)&&(t={loader:t});const{loader:e,loadingComponent:n,errorComponent:r,delay:i=200,hydrate:s,timeout:o,suspensible:a=!0,onError:l}=t;let c=null,d,p=0;const v=()=>(p++,c=null,m()),m=()=>{let x;return c||(x=c=e().catch(E=>{if(E=E instanceof Error?E:new Error(String(E)),l)return new Promise((A,k)=>{l(E,()=>A(v()),()=>k(E),p+1)});throw E}).then(E=>x!==c&&c?c:(E&&(E.__esModule||E[Symbol.toStringTag]==="Module")&&(E=E.default),d=E,E)))};return $s({name:"AsyncComponentWrapper",__asyncLoader:m,__asyncHydrate(x,E,A){const k=s?()=>{const D=s(A,$=>Z8(x,$));D&&(E.bum||(E.bum=[])).push(D)}:A;d?k():m().then(()=>!E.isUnmounted&&k())},get __asyncResolved(){return d},setup(){const x=ua;if(x_(x),d)return()=>O1(d,x);const E=$=>{c=null,Cf($,x,13,!r)};if(a&&x.suspense||Cp)return m().then($=>()=>O1($,x)).catch($=>(E($),()=>r?fi(r,{error:$}):null));const A=Lt(!1),k=Lt(),D=Lt(!!i);return i&&setTimeout(()=>{D.value=!1},i),o!=null&&setTimeout(()=>{if(!A.value&&!k.value){const $=new Error(`Async component timed out after ${o}ms.`);E($),k.value=$}},o),m().then(()=>{A.value=!0,x.parent&&km(x.parent.vnode)&&x.parent.update()}).catch($=>{E($),k.value=$}),()=>{if(A.value&&d)return O1(d,x);if(k.value&&r)return fi(r,{error:k.value});if(n&&!D.value)return fi(n)}}})}function O1(t,e){const{ref:n,props:r,children:i,ce:s}=e.vnode,o=fi(t,r,i);return o.ref=n,o.ce=s,delete e.vnode.ce,o}const km=t=>t.type.__isKeepAlive,J8={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(t,{slots:e}){const n=Xu(),r=n.ctx;if(!r.renderer)return()=>{const D=e.default&&e.default();return D&&D.length===1?D[0]:D};const i=new Map,s=new Set;let o=null;const a=n.suspense,{renderer:{p:l,m:c,um:d,o:{createElement:p}}}=r,v=p("div");r.activate=(D,$,Y,te,me)=>{const pe=D.component;c(D,$,Y,0,a),l(pe.vnode,D,$,Y,pe,a,te,D.slotScopeIds,me),aa(()=>{pe.isDeactivated=!1,pe.a&&mp(pe.a);const I=D.props&&D.props.onVnodeMounted;I&&Zl(I,pe.parent,D)},a)},r.deactivate=D=>{const $=D.component;Tv($.m),Tv($.a),c(D,v,null,1,a),aa(()=>{$.da&&mp($.da);const Y=D.props&&D.props.onVnodeUnmounted;Y&&Zl(Y,$.parent,D),$.isDeactivated=!0},a)};function m(D){N1(D),d(D,n,a,!0)}function x(D){i.forEach(($,Y)=>{const te=X2($.type);te&&!D(te)&&E(Y)})}function E(D){const $=i.get(D);$&&(!o||!vc($,o))?m($):o&&N1(o),i.delete(D),s.delete(D)}Ri(()=>[t.include,t.exclude],([D,$])=>{D&&x(Y=>yg(D,Y)),$&&x(Y=>!yg($,Y))},{flush:"post",deep:!0});let A=null;const k=()=>{A!=null&&(Dv(n.subTree.type)?aa(()=>{i.set(A,v0(n.subTree))},n.subTree.suspense):i.set(A,v0(n.subTree)))};return go(k),Ey(k),Td(()=>{i.forEach(D=>{const{subTree:$,suspense:Y}=n,te=v0($);if(D.type===te.type&&D.key===te.key){N1(te);const me=te.component.da;me&&aa(me,Y);return}m(D)})}),()=>{if(A=null,!e.default)return o=null;const D=e.default(),$=D[0];if(D.length>1)return o=null,D;if(!Ih($)||!($.shapeFlag&4)&&!($.shapeFlag&128))return o=null,$;let Y=v0($);if(Y.type===ta)return o=null,Y;const te=Y.type,me=X2(vd(Y)?Y.type.__asyncResolved||{}:te),{include:pe,exclude:I,max:z}=t;if(pe&&(!me||!yg(pe,me))||I&&me&&yg(I,me))return Y.shapeFlag&=-257,o=Y,$;const K=Y.key==null?te:Y.key,N=i.get(K);return Y.el&&(Y=eh(Y),$.shapeFlag&128&&($.ssContent=Y)),A=K,N?(Y.el=N.el,Y.component=N.component,Y.transition&&Nh(Y,Y.transition),Y.shapeFlag|=512,s.delete(K),s.add(K)):(s.add(K),z&&s.size>parseInt(z,10)&&E(s.values().next().value)),Y.shapeFlag|=256,o=Y,Dv($.type)?$:Y}}},Q8=J8;function yg(t,e){return rr(t)?t.some(n=>yg(n,e)):Ns(t)?t.split(",").includes(e):kD(t)?(t.lastIndex=0,t.test(e)):!1}function dS(t,e){pS(t,"a",e)}function fS(t,e){pS(t,"da",e)}function pS(t,e,n=ua){const r=t.__wdc||(t.__wdc=()=>{let i=n;for(;i;){if(i.isDeactivated)return;i=i.parent}return t()});if(Cy(e,r,n),n){let i=n.parent;for(;i&&i.parent;)km(i.parent.vnode)&&eO(r,e,n,i),i=i.parent}}function eO(t,e,n,r){const i=Cy(e,t,r,!0);Ku(()=>{a_(r[e],i)},n)}function N1(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function v0(t){return t.shapeFlag&128?t.ssContent:t}function Cy(t,e,n=ua,r=!1){if(n){const i=n[t]||(n[t]=[]),s=e.__weh||(e.__weh=(...o)=>{kd();const a=bf(n),l=Yu(e,n,t,o);return a(),Ad(),l});return r?i.unshift(s):i.push(s),s}}const Fh=t=>(e,n=ua)=>{(!Cp||t==="sp")&&Cy(t,(...r)=>e(...r),n)},gS=Fh("bm"),go=Fh("m"),L_=Fh("bu"),Ey=Fh("u"),Td=Fh("bum"),Ku=Fh("um"),mS=Fh("sp"),vS=Fh("rtg"),yS=Fh("rtc");function bS(t,e=ua){Cy("ec",t,e)}const S_="components",tO="directives";function _S(t,e){return C_(S_,t,!0,e)||t}const wS=Symbol.for("v-ndc");function nO(t){return Ns(t)?C_(S_,t,!1)||t:t||wS}function rO(t){return C_(tO,t)}function C_(t,e,n=!0,r=!1){const i=ca||ua;if(i){const s=i.type;if(t===S_){const a=X2(s,!1);if(a&&(a===e||a===$a(e)||a===Mm($a(e))))return s}const o=jx(i[t]||s[t],e)||jx(i.appContext[t],e);return!o&&r?s:o}}function jx(t,e){return t&&(t[e]||t[$a(e)]||t[Mm($a(e))])}function fr(t,e,n,r){let i;const s=n&&n[r],o=rr(t);if(o||Ns(t)){const a=o&&Zc(t);let l=!1;a&&(l=!Su(t),t=yy(t)),i=new Array(t.length);for(let c=0,d=t.length;c<d;c++)i[c]=e(l?al(t[c]):t[c],c,void 0,s&&s[c])}else if(typeof t=="number"){i=new Array(t);for(let a=0;a<t;a++)i[a]=e(a+1,a,void 0,s&&s[a])}else if(gs(t))if(t[Symbol.iterator])i=Array.from(t,(a,l)=>e(a,l,void 0,s&&s[l]));else{const a=Object.keys(t);i=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const d=a[l];i[l]=e(t[d],d,l,s&&s[l])}}else i=[];return n&&(n[r]=i),i}function iO(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(rr(r))for(let i=0;i<r.length;i++)t[r[i].name]=r[i].fn;else r&&(t[r.name]=r.key?(...i)=>{const s=r.fn(...i);return s&&(s.key=r.key),s}:r.fn)}return t}function sO(t,e,n={},r,i){if(ca.ce||ca.parent&&vd(ca.parent)&&ca.parent.ce)return e!=="default"&&(n.name=e),Be(),Ol(En,null,[fi("slot",n,r&&r())],64);let s=t[e];s&&s._c&&(s._d=!1),Be();const o=s&&E_(s(n)),a=n.key||o&&o.key,l=Ol(En,{key:(a&&!xc(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&t._===1?64:-2);return!i&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function E_(t){return t.some(e=>Ih(e)?!(e.type===ta||e.type===En&&!E_(e.children)):!0)?t:null}function oO(t,e){const n={};for(const r in t)n[e&&/[A-Z]/.test(r)?`on:${r}`:Ng(r)]=t[r];return n}const z2=t=>t?eC(t)?Tm(t):z2(t.parent):null,Fg=Cs(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>z2(t.parent),$root:t=>z2(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>P_(t),$forceUpdate:t=>t.f||(t.f=()=>{b_(t.update)}),$nextTick:t=>t.n||(t.n=la.bind(t.proxy)),$watch:t=>BO.bind(t)}),I1=(t,e)=>t!==Bi&&!t.__isScriptSetup&&ns(t,e),$2={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:i,props:s,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const m=o[e];if(m!==void 0)switch(m){case 1:return r[e];case 2:return i[e];case 4:return n[e];case 3:return s[e]}else{if(I1(r,e))return o[e]=1,r[e];if(i!==Bi&&ns(i,e))return o[e]=2,i[e];if((c=t.propsOptions[0])&&ns(c,e))return o[e]=3,s[e];if(n!==Bi&&ns(n,e))return o[e]=4,n[e];V2&&(o[e]=0)}}const d=Fg[e];let p,v;if(d)return e==="$attrs"&&ol(t.attrs,"get",""),d(t);if((p=a.__cssModules)&&(p=p[e]))return p;if(n!==Bi&&ns(n,e))return o[e]=4,n[e];if(v=l.config.globalProperties,ns(v,e))return v[e]},set({_:t},e,n){const{data:r,setupState:i,ctx:s}=t;return I1(i,e)?(i[e]=n,!0):r!==Bi&&ns(r,e)?(r[e]=n,!0):ns(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(s[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:s}},o){let a;return!!n[o]||t!==Bi&&ns(t,o)||I1(e,o)||(a=s[0])&&ns(a,o)||ns(r,o)||ns(Fg,o)||ns(i.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:ns(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}},aO=Cs({},$2,{get(t,e){if(e!==Symbol.unscopables)return $2.get(t,e,t)},has(t,e){return e[0]!=="_"&&!ND(e)}});function lO(){return null}function uO(){return null}function cO(t){}function hO(t){}function dO(){return null}function fO(){}function pO(t,e){return null}function gO(){return xS().slots}function mO(){return xS().attrs}function xS(){const t=Xu();return t.setupContext||(t.setupContext=rC(t))}function hm(t){return rr(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}function vO(t,e){const n=hm(t);for(const r in e){if(r.startsWith("__skip"))continue;let i=n[r];i?rr(i)||kr(i)?i=n[r]={type:i,default:e[r]}:i.default=e[r]:i===null&&(i=n[r]={default:e[r]}),i&&e[`__skip_${r}`]&&(i.skipFactory=!0)}return n}function yO(t,e){return!t||!e?t||e:rr(t)&&rr(e)?t.concat(e):Cs({},hm(t),hm(e))}function bO(t,e){const n={};for(const r in t)e.includes(r)||Object.defineProperty(n,r,{enumerable:!0,get:()=>t[r]});return n}function _O(t){const e=Xu();let n=t();return Y2(),l_(n)&&(n=n.catch(r=>{throw bf(e),r})),[n,()=>bf(e)]}let V2=!0;function wO(t){const e=P_(t),n=t.proxy,r=t.ctx;V2=!1,e.beforeCreate&&zx(e.beforeCreate,t,"bc");const{data:i,computed:s,methods:o,watch:a,provide:l,inject:c,created:d,beforeMount:p,mounted:v,beforeUpdate:m,updated:x,activated:E,deactivated:A,beforeDestroy:k,beforeUnmount:D,destroyed:$,unmounted:Y,render:te,renderTracked:me,renderTriggered:pe,errorCaptured:I,serverPrefetch:z,expose:K,inheritAttrs:N,components:B,directives:V,filters:R}=e;if(c&&xO(c,r,null),o)for(const X in o){const oe=o[X];kr(oe)&&(r[X]=oe.bind(n))}if(i){const X=i.call(n,n);gs(X)&&(t.data=ru(X))}if(V2=!0,s)for(const X in s){const oe=s[X],_e=kr(oe)?oe.bind(n,n):kr(oe.get)?oe.get.bind(n,n):Gu,Ce=!kr(oe)&&kr(oe.set)?oe.set.bind(n):Gu,De=Zn({get:_e,set:Ce});Object.defineProperty(r,X,{enumerable:!0,configurable:!0,get:()=>De.value,set:Z=>De.value=Z})}if(a)for(const X in a)LS(a[X],r,n,X);if(l){const X=kr(l)?l.call(n):l;Reflect.ownKeys(X).forEach(oe=>{jg(oe,X[oe])})}d&&zx(d,t,"c");function W(X,oe){rr(oe)?oe.forEach(_e=>X(_e.bind(n))):oe&&X(oe.bind(n))}if(W(gS,p),W(go,v),W(L_,m),W(Ey,x),W(dS,E),W(fS,A),W(bS,I),W(yS,me),W(vS,pe),W(Td,D),W(Ku,Y),W(mS,z),rr(K))if(K.length){const X=t.exposed||(t.exposed={});K.forEach(oe=>{Object.defineProperty(X,oe,{get:()=>n[oe],set:_e=>n[oe]=_e})})}else t.exposed||(t.exposed={});te&&t.render===Gu&&(t.render=te),N!=null&&(t.inheritAttrs=N),B&&(t.components=B),V&&(t.directives=V),z&&x_(t)}function xO(t,e,n=Gu){rr(t)&&(t=U2(t));for(const r in t){const i=t[r];let s;gs(i)?"default"in i?s=Cu(i.from||r,i.default,!0):s=Cu(i.from||r):s=Cu(i),po(s)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[r]=s}}function zx(t,e,n){Yu(rr(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function LS(t,e,n,r){let i=r.includes(".")?US(n,r):()=>n[r];if(Ns(t)){const s=e[t];kr(s)&&Ri(i,s)}else if(kr(t))Ri(i,t.bind(n));else if(gs(t))if(rr(t))t.forEach(s=>LS(s,e,n,r));else{const s=kr(t.handler)?t.handler.bind(n):e[t.handler];kr(s)&&Ri(i,s,t)}}function P_(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:s,config:{optionMergeStrategies:o}}=t.appContext,a=s.get(e);let l;return a?l=a:!i.length&&!n&&!r?l=e:(l={},i.length&&i.forEach(c=>Av(l,c,o,!0)),Av(l,e,o)),gs(e)&&s.set(e,l),l}function Av(t,e,n,r=!1){const{mixins:i,extends:s}=e;s&&Av(t,s,n,!0),i&&i.forEach(o=>Av(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=LO[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const LO={data:$x,props:Vx,emits:Vx,methods:bg,computed:bg,beforeCreate:Ll,created:Ll,beforeMount:Ll,mounted:Ll,beforeUpdate:Ll,updated:Ll,beforeDestroy:Ll,beforeUnmount:Ll,destroyed:Ll,unmounted:Ll,activated:Ll,deactivated:Ll,errorCaptured:Ll,serverPrefetch:Ll,components:bg,directives:bg,watch:CO,provide:$x,inject:SO};function $x(t,e){return e?t?function(){return Cs(kr(t)?t.call(this,this):t,kr(e)?e.call(this,this):e)}:e:t}function SO(t,e){return bg(U2(t),U2(e))}function U2(t){if(rr(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Ll(t,e){return t?[...new Set([].concat(t,e))]:e}function bg(t,e){return t?Cs(Object.create(null),t,e):e}function Vx(t,e){return t?rr(t)&&rr(e)?[...new Set([...t,...e])]:Cs(Object.create(null),hm(t),hm(e??{})):e}function CO(t,e){if(!t)return e;if(!e)return t;const n=Cs(Object.create(null),t);for(const r in e)n[r]=Ll(t[r],e[r]);return n}function SS(){return{app:null,config:{isNativeTag:PD,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let EO=0;function PO(t,e){return function(r,i=null){kr(r)||(r=Cs({},r)),i!=null&&!gs(i)&&(i=null);const s=SS(),o=new WeakSet,a=[];let l=!1;const c=s.app={_uid:EO++,_component:r,_props:i,_container:null,_context:s,_instance:null,version:sC,get config(){return s.config},set config(d){},use(d,...p){return o.has(d)||(d&&kr(d.install)?(o.add(d),d.install(c,...p)):kr(d)&&(o.add(d),d(c,...p))),c},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),c},component(d,p){return p?(s.components[d]=p,c):s.components[d]},directive(d,p){return p?(s.directives[d]=p,c):s.directives[d]},mount(d,p,v){if(!l){const m=c._ceVNode||fi(r,i);return m.appContext=s,v===!0?v="svg":v===!1&&(v=void 0),p&&e?e(m,d):t(m,d,v),l=!0,c._container=d,d.__vue_app__=c,Tm(m.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Yu(a,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(d,p){return s.provides[d]=p,c},runWithContext(d){const p=hf;hf=c;try{return d()}finally{hf=p}}};return c}}let hf=null;function jg(t,e){if(ua){let n=ua.provides;const r=ua.parent&&ua.parent.provides;r===n&&(n=ua.provides=Object.create(r)),n[t]=e}}function Cu(t,e,n=!1){const r=ua||ca;if(r||hf){const i=hf?hf._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&t in i)return i[t];if(arguments.length>1)return n&&kr(e)?e.call(r&&r.proxy):e}}function CS(){return!!(ua||ca||hf)}const ES={},PS=()=>Object.create(ES),MS=t=>Object.getPrototypeOf(t)===ES;function MO(t,e,n,r=!1){const i={},s=PS();t.propsDefaults=Object.create(null),kS(t,e,i,s);for(const o in t.propsOptions[0])o in i||(i[o]=void 0);n?t.props=r?i:m_(i):t.type.props?t.props=i:t.props=s,t.attrs=s}function kO(t,e,n,r){const{props:i,attrs:s,vnode:{patchFlag:o}}=t,a=Ii(i),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=t.vnode.dynamicProps;for(let p=0;p<d.length;p++){let v=d[p];if(Py(t.emitsOptions,v))continue;const m=e[v];if(l)if(ns(s,v))m!==s[v]&&(s[v]=m,c=!0);else{const x=$a(v);i[x]=H2(l,a,x,m,t,!1)}else m!==s[v]&&(s[v]=m,c=!0)}}}else{kS(t,e,i,s)&&(c=!0);let d;for(const p in a)(!e||!ns(e,p)&&((d=Jl(p))===p||!ns(e,d)))&&(l?n&&(n[p]!==void 0||n[d]!==void 0)&&(i[p]=H2(l,a,p,void 0,t,!0)):delete i[p]);if(s!==a)for(const p in s)(!e||!ns(e,p))&&(delete s[p],c=!0)}c&&Ch(t.attrs,"set","")}function kS(t,e,n,r){const[i,s]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(gp(l))continue;const c=e[l];let d;i&&ns(i,d=$a(l))?!s||!s.includes(d)?n[d]=c:(a||(a={}))[d]=c:Py(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(s){const l=Ii(n),c=a||Bi;for(let d=0;d<s.length;d++){const p=s[d];n[p]=H2(i,l,p,c[p],t,!ns(c,p))}}return o}function H2(t,e,n,r,i,s){const o=t[n];if(o!=null){const a=ns(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&kr(l)){const{propsDefaults:c}=i;if(n in c)r=c[n];else{const d=bf(i);r=c[n]=l.call(null,e),d()}}else r=l;i.ce&&i.ce._setProp(n,r)}o[0]&&(s&&!a?r=!1:o[1]&&(r===""||r===Jl(n))&&(r=!0))}return r}const AO=new WeakMap;function AS(t,e,n=!1){const r=n?AO:e.propsCache,i=r.get(t);if(i)return i;const s=t.props,o={},a=[];let l=!1;if(!kr(t)){const d=p=>{l=!0;const[v,m]=AS(p,e,!0);Cs(o,v),m&&a.push(...m)};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}if(!s&&!l)return gs(t)&&r.set(t,fp),fp;if(rr(s))for(let d=0;d<s.length;d++){const p=$a(s[d]);Ux(p)&&(o[p]=Bi)}else if(s)for(const d in s){const p=$a(d);if(Ux(p)){const v=s[d],m=o[p]=rr(v)||kr(v)?{type:v}:Cs({},v),x=m.type;let E=!1,A=!0;if(rr(x))for(let k=0;k<x.length;++k){const D=x[k],$=kr(D)&&D.name;if($==="Boolean"){E=!0;break}else $==="String"&&(A=!1)}else E=kr(x)&&x.name==="Boolean";m[0]=E,m[1]=A,(E||ns(m,"default"))&&a.push(p)}}const c=[o,a];return gs(t)&&r.set(t,c),c}function Ux(t){return t[0]!=="$"&&!gp(t)}const TS=t=>t[0]==="_"||t==="$stable",M_=t=>rr(t)?t.map(Xl):[Xl(t)],TO=(t,e,n)=>{if(e._n)return e;const r=Wu((...i)=>M_(e(...i)),n);return r._c=!1,r},DS=(t,e,n)=>{const r=t._ctx;for(const i in t){if(TS(i))continue;const s=t[i];if(kr(s))e[i]=TO(i,s,r);else if(s!=null){const o=M_(s);e[i]=()=>o}}},OS=(t,e)=>{const n=M_(e);t.slots.default=()=>n},NS=(t,e,n)=>{for(const r in e)(n||r!=="_")&&(t[r]=e[r])},DO=(t,e,n)=>{const r=t.slots=PS();if(t.vnode.shapeFlag&32){const i=e._;i?(NS(r,e,n),n&&ML(r,"_",i,!0)):DS(e,r)}else e&&OS(t,e)},OO=(t,e,n)=>{const{vnode:r,slots:i}=t;let s=!0,o=Bi;if(r.shapeFlag&32){const a=e._;a?n&&a===1?s=!1:NS(i,e,n):(s=!e.$stable,DS(e,i)),o=e}else e&&(OS(t,e),o={default:1});if(s)for(const a in i)!TS(a)&&o[a]==null&&delete i[a]},aa=qS;function IS(t){return RS(t)}function BS(t){return RS(t,$8)}function RS(t,e){const n=gy();n.__VUE__=!0;const{insert:r,remove:i,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:d,parentNode:p,nextSibling:v,setScopeId:m=Gu,insertStaticContent:x}=t,E=(ge,Q,ie,fe=null,Se=null,de=null,Xe=void 0,$e=null,Je=!!Q.dynamicChildren)=>{if(ge===Q)return;ge&&!vc(ge,Q)&&(fe=ve(ge),Z(ge,Se,de,!0),ge=null),Q.patchFlag===-2&&(Je=!1,Q.dynamicChildren=null);const{type:He,ref:Ge,shapeFlag:xt}=Q;switch(He){case yd:A(ge,Q,ie,fe);break;case ta:k(ge,Q,ie,fe);break;case df:ge==null&&D(Q,ie,fe,Xe);break;case En:B(ge,Q,ie,fe,Se,de,Xe,$e,Je);break;default:xt&1?te(ge,Q,ie,fe,Se,de,Xe,$e,Je):xt&6?V(ge,Q,ie,fe,Se,de,Xe,$e,Je):(xt&64||xt&128)&&He.process(ge,Q,ie,fe,Se,de,Xe,$e,Je,Oe)}Ge!=null&&Se&&cm(Ge,ge&&ge.ref,de,Q||ge,!Q)},A=(ge,Q,ie,fe)=>{if(ge==null)r(Q.el=a(Q.children),ie,fe);else{const Se=Q.el=ge.el;Q.children!==ge.children&&c(Se,Q.children)}},k=(ge,Q,ie,fe)=>{ge==null?r(Q.el=l(Q.children||""),ie,fe):Q.el=ge.el},D=(ge,Q,ie,fe)=>{[ge.el,ge.anchor]=x(ge.children,Q,ie,fe,ge.el,ge.anchor)},$=({el:ge,anchor:Q},ie,fe)=>{let Se;for(;ge&&ge!==Q;)Se=v(ge),r(ge,ie,fe),ge=Se;r(Q,ie,fe)},Y=({el:ge,anchor:Q})=>{let ie;for(;ge&&ge!==Q;)ie=v(ge),i(ge),ge=ie;i(Q)},te=(ge,Q,ie,fe,Se,de,Xe,$e,Je)=>{Q.type==="svg"?Xe="svg":Q.type==="math"&&(Xe="mathml"),ge==null?me(Q,ie,fe,Se,de,Xe,$e,Je):z(ge,Q,Se,de,Xe,$e,Je)},me=(ge,Q,ie,fe,Se,de,Xe,$e)=>{let Je,He;const{props:Ge,shapeFlag:xt,transition:Et,dirs:Kt}=ge;if(Je=ge.el=o(ge.type,de,Ge&&Ge.is,Ge),xt&8?d(Je,ge.children):xt&16&&I(ge.children,Je,null,fe,Se,B1(ge,de),Xe,$e),Kt&&Uc(ge,null,fe,"created"),pe(Je,ge,ge.scopeId,Xe,fe),Ge){for(const an in Ge)an!=="value"&&!gp(an)&&s(Je,an,null,Ge[an],de,fe);"value"in Ge&&s(Je,"value",null,Ge.value,de),(He=Ge.onVnodeBeforeMount)&&Zl(He,fe,ge)}Kt&&Uc(ge,null,fe,"beforeMount");const sn=FS(Se,Et);sn&&Et.beforeEnter(Je),r(Je,Q,ie),((He=Ge&&Ge.onVnodeMounted)||sn||Kt)&&aa(()=>{He&&Zl(He,fe,ge),sn&&Et.enter(Je),Kt&&Uc(ge,null,fe,"mounted")},Se)},pe=(ge,Q,ie,fe,Se)=>{if(ie&&m(ge,ie),fe)for(let de=0;de<fe.length;de++)m(ge,fe[de]);if(Se){let de=Se.subTree;if(Q===de||Dv(de.type)&&(de.ssContent===Q||de.ssFallback===Q)){const Xe=Se.vnode;pe(ge,Xe,Xe.scopeId,Xe.slotScopeIds,Se.parent)}}},I=(ge,Q,ie,fe,Se,de,Xe,$e,Je=0)=>{for(let He=Je;He<ge.length;He++){const Ge=ge[He]=$e?od(ge[He]):Xl(ge[He]);E(null,Ge,Q,ie,fe,Se,de,Xe,$e)}},z=(ge,Q,ie,fe,Se,de,Xe)=>{const $e=Q.el=ge.el;let{patchFlag:Je,dynamicChildren:He,dirs:Ge}=Q;Je|=ge.patchFlag&16;const xt=ge.props||Bi,Et=Q.props||Bi;let Kt;if(ie&&Ud(ie,!1),(Kt=Et.onVnodeBeforeUpdate)&&Zl(Kt,ie,Q,ge),Ge&&Uc(Q,ge,ie,"beforeUpdate"),ie&&Ud(ie,!0),(xt.innerHTML&&Et.innerHTML==null||xt.textContent&&Et.textContent==null)&&d($e,""),He?K(ge.dynamicChildren,He,$e,ie,fe,B1(Q,Se),de):Xe||oe(ge,Q,$e,null,ie,fe,B1(Q,Se),de,!1),Je>0){if(Je&16)N($e,xt,Et,ie,Se);else if(Je&2&&xt.class!==Et.class&&s($e,"class",null,Et.class,Se),Je&4&&s($e,"style",xt.style,Et.style,Se),Je&8){const sn=Q.dynamicProps;for(let an=0;an<sn.length;an++){const Qe=sn[an],at=xt[Qe],it=Et[Qe];(it!==at||Qe==="value")&&s($e,Qe,at,it,Se,ie)}}Je&1&&ge.children!==Q.children&&d($e,Q.children)}else!Xe&&He==null&&N($e,xt,Et,ie,Se);((Kt=Et.onVnodeUpdated)||Ge)&&aa(()=>{Kt&&Zl(Kt,ie,Q,ge),Ge&&Uc(Q,ge,ie,"updated")},fe)},K=(ge,Q,ie,fe,Se,de,Xe)=>{for(let $e=0;$e<Q.length;$e++){const Je=ge[$e],He=Q[$e],Ge=Je.el&&(Je.type===En||!vc(Je,He)||Je.shapeFlag&70)?p(Je.el):ie;E(Je,He,Ge,null,fe,Se,de,Xe,!0)}},N=(ge,Q,ie,fe,Se)=>{if(Q!==ie){if(Q!==Bi)for(const de in Q)!gp(de)&&!(de in ie)&&s(ge,de,Q[de],null,Se,fe);for(const de in ie){if(gp(de))continue;const Xe=ie[de],$e=Q[de];Xe!==$e&&de!=="value"&&s(ge,de,$e,Xe,Se,fe)}"value"in ie&&s(ge,"value",Q.value,ie.value,Se)}},B=(ge,Q,ie,fe,Se,de,Xe,$e,Je)=>{const He=Q.el=ge?ge.el:a(""),Ge=Q.anchor=ge?ge.anchor:a("");let{patchFlag:xt,dynamicChildren:Et,slotScopeIds:Kt}=Q;Kt&&($e=$e?$e.concat(Kt):Kt),ge==null?(r(He,ie,fe),r(Ge,ie,fe),I(Q.children||[],ie,Ge,Se,de,Xe,$e,Je)):xt>0&&xt&64&&Et&&ge.dynamicChildren?(K(ge.dynamicChildren,Et,ie,Se,de,Xe,$e),(Q.key!=null||Se&&Q===Se.subTree)&&k_(ge,Q,!0)):oe(ge,Q,ie,Ge,Se,de,Xe,$e,Je)},V=(ge,Q,ie,fe,Se,de,Xe,$e,Je)=>{Q.slotScopeIds=$e,ge==null?Q.shapeFlag&512?Se.ctx.activate(Q,ie,fe,Xe,Je):R(Q,ie,fe,Se,de,Xe,Je):j(ge,Q,Je)},R=(ge,Q,ie,fe,Se,de,Xe)=>{const $e=ge.component=QS(ge,fe,Se);if(km(ge)&&($e.ctx.renderer=Oe),tC($e,!1,Xe),$e.asyncDep){if(Se&&Se.registerDep($e,W,Xe),!ge.el){const Je=$e.subTree=fi(ta);k(null,Je,Q,ie)}}else W($e,ge,Q,ie,Se,de,Xe)},j=(ge,Q,ie)=>{const fe=Q.component=ge.component;if(VO(ge,Q,ie))if(fe.asyncDep&&!fe.asyncResolved){X(fe,Q,ie);return}else fe.next=Q,fe.update();else Q.el=ge.el,fe.vnode=Q},W=(ge,Q,ie,fe,Se,de,Xe)=>{const $e=()=>{if(ge.isMounted){let{next:xt,bu:Et,u:Kt,parent:sn,vnode:an}=ge;{const Qt=jS(ge);if(Qt){xt&&(xt.el=an.el,X(ge,xt,Xe)),Qt.asyncDep.then(()=>{ge.isUnmounted||$e()});return}}let Qe=xt,at;Ud(ge,!1),xt?(xt.el=an.el,X(ge,xt,Xe)):xt=an,Et&&mp(Et),(at=xt.props&&xt.props.onVnodeBeforeUpdate)&&Zl(at,sn,xt,an),Ud(ge,!0);const it=Z0(ge),Bt=ge.subTree;ge.subTree=it,E(Bt,it,p(Bt.el),ve(Bt),ge,Se,de),xt.el=it.el,Qe===null&&My(ge,it.el),Kt&&aa(Kt,Se),(at=xt.props&&xt.props.onVnodeUpdated)&&aa(()=>Zl(at,sn,xt,an),Se)}else{let xt;const{el:Et,props:Kt}=Q,{bm:sn,m:an,parent:Qe,root:at,type:it}=ge,Bt=vd(Q);if(Ud(ge,!1),sn&&mp(sn),!Bt&&(xt=Kt&&Kt.onVnodeBeforeMount)&&Zl(xt,Qe,Q),Ud(ge,!0),Et&&Ye){const Qt=()=>{ge.subTree=Z0(ge),Ye(Et,ge.subTree,ge,Se,null)};Bt&&it.__asyncHydrate?it.__asyncHydrate(Et,ge,Qt):Qt()}else{at.ce&&at.ce._injectChildStyle(it);const Qt=ge.subTree=Z0(ge);E(null,Qt,ie,fe,ge,Se,de),Q.el=Qt.el}if(an&&aa(an,Se),!Bt&&(xt=Kt&&Kt.onVnodeMounted)){const Qt=Q;aa(()=>Zl(xt,Qe,Qt),Se)}(Q.shapeFlag&256||Qe&&vd(Qe.vnode)&&Qe.vnode.shapeFlag&256)&&ge.a&&aa(ge.a,Se),ge.isMounted=!0,Q=ie=fe=null}};ge.scope.on();const Je=ge.effect=new im($e);ge.scope.off();const He=ge.update=Je.run.bind(Je),Ge=ge.job=Je.runIfDirty.bind(Je);Ge.i=ge,Ge.id=ge.uid,Je.scheduler=()=>b_(Ge),Ud(ge,!0),He()},X=(ge,Q,ie)=>{Q.component=ge;const fe=ge.vnode.props;ge.vnode=Q,ge.next=null,kO(ge,Q.props,fe,ie),OO(ge,Q.children,ie),kd(),Dx(ge),Ad()},oe=(ge,Q,ie,fe,Se,de,Xe,$e,Je=!1)=>{const He=ge&&ge.children,Ge=ge?ge.shapeFlag:0,xt=Q.children,{patchFlag:Et,shapeFlag:Kt}=Q;if(Et>0){if(Et&128){Ce(He,xt,ie,fe,Se,de,Xe,$e,Je);return}else if(Et&256){_e(He,xt,ie,fe,Se,de,Xe,$e,Je);return}}Kt&8?(Ge&16&&ce(He,Se,de),xt!==He&&d(ie,xt)):Ge&16?Kt&16?Ce(He,xt,ie,fe,Se,de,Xe,$e,Je):ce(He,Se,de,!0):(Ge&8&&d(ie,""),Kt&16&&I(xt,ie,fe,Se,de,Xe,$e,Je))},_e=(ge,Q,ie,fe,Se,de,Xe,$e,Je)=>{ge=ge||fp,Q=Q||fp;const He=ge.length,Ge=Q.length,xt=Math.min(He,Ge);let Et;for(Et=0;Et<xt;Et++){const Kt=Q[Et]=Je?od(Q[Et]):Xl(Q[Et]);E(ge[Et],Kt,ie,null,Se,de,Xe,$e,Je)}He>Ge?ce(ge,Se,de,!0,!1,xt):I(Q,ie,fe,Se,de,Xe,$e,Je,xt)},Ce=(ge,Q,ie,fe,Se,de,Xe,$e,Je)=>{let He=0;const Ge=Q.length;let xt=ge.length-1,Et=Ge-1;for(;He<=xt&&He<=Et;){const Kt=ge[He],sn=Q[He]=Je?od(Q[He]):Xl(Q[He]);if(vc(Kt,sn))E(Kt,sn,ie,null,Se,de,Xe,$e,Je);else break;He++}for(;He<=xt&&He<=Et;){const Kt=ge[xt],sn=Q[Et]=Je?od(Q[Et]):Xl(Q[Et]);if(vc(Kt,sn))E(Kt,sn,ie,null,Se,de,Xe,$e,Je);else break;xt--,Et--}if(He>xt){if(He<=Et){const Kt=Et+1,sn=Kt<Ge?Q[Kt].el:fe;for(;He<=Et;)E(null,Q[He]=Je?od(Q[He]):Xl(Q[He]),ie,sn,Se,de,Xe,$e,Je),He++}}else if(He>Et)for(;He<=xt;)Z(ge[He],Se,de,!0),He++;else{const Kt=He,sn=He,an=new Map;for(He=sn;He<=Et;He++){const An=Q[He]=Je?od(Q[He]):Xl(Q[He]);An.key!=null&&an.set(An.key,He)}let Qe,at=0;const it=Et-sn+1;let Bt=!1,Qt=0;const Tn=new Array(it);for(He=0;He<it;He++)Tn[He]=0;for(He=Kt;He<=xt;He++){const An=ge[He];if(at>=it){Z(An,Se,de,!0);continue}let Kn;if(An.key!=null)Kn=an.get(An.key);else for(Qe=sn;Qe<=Et;Qe++)if(Tn[Qe-sn]===0&&vc(An,Q[Qe])){Kn=Qe;break}Kn===void 0?Z(An,Se,de,!0):(Tn[Kn-sn]=He+1,Kn>=Qt?Qt=Kn:Bt=!0,E(An,Q[Kn],ie,null,Se,de,Xe,$e,Je),at++)}const xn=Bt?NO(Tn):fp;for(Qe=xn.length-1,He=it-1;He>=0;He--){const An=sn+He,Kn=Q[An],en=An+1<Ge?Q[An+1].el:fe;Tn[He]===0?E(null,Kn,ie,en,Se,de,Xe,$e,Je):Bt&&(Qe<0||He!==xn[Qe]?De(Kn,ie,en,2):Qe--)}}},De=(ge,Q,ie,fe,Se=null)=>{const{el:de,type:Xe,transition:$e,children:Je,shapeFlag:He}=ge;if(He&6){De(ge.component.subTree,Q,ie,fe);return}if(He&128){ge.suspense.move(Q,ie,fe);return}if(He&64){Xe.move(ge,Q,ie,Oe);return}if(Xe===En){r(de,Q,ie);for(let xt=0;xt<Je.length;xt++)De(Je[xt],Q,ie,fe);r(ge.anchor,Q,ie);return}if(Xe===df){$(ge,Q,ie);return}if(fe!==2&&He&1&&$e)if(fe===0)$e.beforeEnter(de),r(de,Q,ie),aa(()=>$e.enter(de),Se);else{const{leave:xt,delayLeave:Et,afterLeave:Kt}=$e,sn=()=>r(de,Q,ie),an=()=>{xt(de,()=>{sn(),Kt&&Kt()})};Et?Et(de,sn,an):an()}else r(de,Q,ie)},Z=(ge,Q,ie,fe=!1,Se=!1)=>{const{type:de,props:Xe,ref:$e,children:Je,dynamicChildren:He,shapeFlag:Ge,patchFlag:xt,dirs:Et,cacheIndex:Kt}=ge;if(xt===-2&&(Se=!1),$e!=null&&cm($e,null,ie,ge,!0),Kt!=null&&(Q.renderCache[Kt]=void 0),Ge&256){Q.ctx.deactivate(ge);return}const sn=Ge&1&&Et,an=!vd(ge);let Qe;if(an&&(Qe=Xe&&Xe.onVnodeBeforeUnmount)&&Zl(Qe,Q,ge),Ge&6)he(ge.component,ie,fe);else{if(Ge&128){ge.suspense.unmount(ie,fe);return}sn&&Uc(ge,null,Q,"beforeUnmount"),Ge&64?ge.type.remove(ge,Q,ie,Oe,fe):He&&!He.hasOnce&&(de!==En||xt>0&&xt&64)?ce(He,Q,ie,!1,!0):(de===En&&xt&384||!Se&&Ge&16)&&ce(Je,Q,ie),fe&&G(ge)}(an&&(Qe=Xe&&Xe.onVnodeUnmounted)||sn)&&aa(()=>{Qe&&Zl(Qe,Q,ge),sn&&Uc(ge,null,Q,"unmounted")},ie)},G=ge=>{const{type:Q,el:ie,anchor:fe,transition:Se}=ge;if(Q===En){re(ie,fe);return}if(Q===df){Y(ge);return}const de=()=>{i(ie),Se&&!Se.persisted&&Se.afterLeave&&Se.afterLeave()};if(ge.shapeFlag&1&&Se&&!Se.persisted){const{leave:Xe,delayLeave:$e}=Se,Je=()=>Xe(ie,de);$e?$e(ge.el,de,Je):Je()}else de()},re=(ge,Q)=>{let ie;for(;ge!==Q;)ie=v(ge),i(ge),ge=ie;i(Q)},he=(ge,Q,ie)=>{const{bum:fe,scope:Se,job:de,subTree:Xe,um:$e,m:Je,a:He}=ge;Tv(Je),Tv(He),fe&&mp(fe),Se.stop(),de&&(de.flags|=8,Z(Xe,ge,Q,ie)),$e&&aa($e,Q),aa(()=>{ge.isUnmounted=!0},Q),Q&&Q.pendingBranch&&!Q.isUnmounted&&ge.asyncDep&&!ge.asyncResolved&&ge.suspenseId===Q.pendingId&&(Q.deps--,Q.deps===0&&Q.resolve())},ce=(ge,Q,ie,fe=!1,Se=!1,de=0)=>{for(let Xe=de;Xe<ge.length;Xe++)Z(ge[Xe],Q,ie,fe,Se)},ve=ge=>{if(ge.shapeFlag&6)return ve(ge.component.subTree);if(ge.shapeFlag&128)return ge.suspense.next();const Q=v(ge.anchor||ge.el),ie=Q&&Q[iS];return ie?v(ie):Q};let ee=!1;const J=(ge,Q,ie)=>{ge==null?Q._vnode&&Z(Q._vnode,null,null,!0):E(Q._vnode||null,ge,Q,null,null,null,ie),Q._vnode=ge,ee||(ee=!0,Dx(),kv(),ee=!1)},Oe={p:E,um:Z,m:De,r:G,mt:R,mc:I,pc:oe,pbc:K,n:ve,o:t};let Te,Ye;return e&&([Te,Ye]=e(Oe)),{render:J,hydrate:Te,createApp:PO(J,Te)}}function B1({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Ud({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function FS(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function k_(t,e,n=!1){const r=t.children,i=e.children;if(rr(r)&&rr(i))for(let s=0;s<r.length;s++){const o=r[s];let a=i[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[s]=od(i[s]),a.el=o.el),!n&&a.patchFlag!==-2&&k_(o,a)),a.type===yd&&(a.el=o.el)}}function NO(t){const e=t.slice(),n=[0];let r,i,s,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(i=n[n.length-1],t[i]<c){e[r]=i,n.push(r);continue}for(s=0,o=n.length-1;s<o;)a=s+o>>1,t[n[a]]<c?s=a+1:o=a;c<t[n[s]]&&(s>0&&(e[r]=n[s-1]),n[s]=r)}}for(s=n.length,o=n[s-1];s-- >0;)n[s]=o,o=e[o];return n}function jS(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:jS(e)}function Tv(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const zS=Symbol.for("v-scx"),$S=()=>Cu(zS);function dm(t,e){return Am(t,null,e)}function IO(t,e){return Am(t,null,{flush:"post"})}function VS(t,e){return Am(t,null,{flush:"sync"})}function Ri(t,e,n){return Am(t,e,n)}function Am(t,e,n=Bi){const{immediate:r,deep:i,flush:s,once:o}=n,a=Cs({},n),l=e&&r||!e&&s!=="post";let c;if(Cp){if(s==="sync"){const m=$S();c=m.__watcherHandles||(m.__watcherHandles=[])}else if(!l){const m=()=>{};return m.stop=Gu,m.resume=Gu,m.pause=Gu,m}}const d=ua;a.call=(m,x,E)=>Yu(m,d,x,E);let p=!1;s==="post"?a.scheduler=m=>{aa(m,d&&d.suspense)}:s!=="sync"&&(p=!0,a.scheduler=(m,x)=>{x?m():b_(m)}),a.augmentJob=m=>{e&&(m.flags|=4),p&&(m.flags|=2,d&&(m.id=d.uid,m.i=d))};const v=S8(t,e,a);return Cp&&(c?c.push(v):l&&v()),v}function BO(t,e,n){const r=this.proxy,i=Ns(t)?t.includes(".")?US(r,t):()=>r[t]:t.bind(r,r);let s;kr(e)?s=e:(s=e.handler,n=e);const o=bf(this),a=Am(i,s.bind(r),n);return o(),a}function US(t,e){const n=e.split(".");return()=>{let r=t;for(let i=0;i<n.length&&r;i++)r=r[n[i]];return r}}function RO(t,e,n=Bi){const r=Xu(),i=$a(e),s=Jl(e),o=HS(t,i),a=KL((l,c)=>{let d,p=Bi,v;return VS(()=>{const m=t[i];Al(d,m)&&(d=m,c())}),{get(){return l(),n.get?n.get(d):d},set(m){const x=n.set?n.set(m):m;if(!Al(x,d)&&!(p!==Bi&&Al(m,p)))return;const E=r.vnode.props;E&&(e in E||i in E||s in E)&&(`onUpdate:${e}`in E||`onUpdate:${i}`in E||`onUpdate:${s}`in E)||(d=m,c()),r.emit(`update:${e}`,x),Al(m,x)&&Al(m,p)&&!Al(x,v)&&c(),p=m,v=x}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Bi:a,done:!1}:{done:!0}}}},a}const HS=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${$a(e)}Modifiers`]||t[`${Jl(e)}Modifiers`];function FO(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||Bi;let i=n;const s=e.startsWith("update:"),o=s&&HS(r,e.slice(7));o&&(o.trim&&(i=n.map(d=>Ns(d)?d.trim():d)),o.number&&(i=n.map(Sv)));let a,l=r[a=Ng(e)]||r[a=Ng($a(e))];!l&&s&&(l=r[a=Ng(Jl(e))]),l&&Yu(l,t,6,i);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,Yu(c,t,6,i)}}function WS(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(i!==void 0)return i;const s=t.emits;let o={},a=!1;if(!kr(t)){const l=c=>{const d=WS(c,e,!0);d&&(a=!0,Cs(o,d))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!s&&!a?(gs(t)&&r.set(t,null),null):(rr(s)?s.forEach(l=>o[l]=null):Cs(o,s),gs(t)&&r.set(t,o),o)}function Py(t,e){return!t||!Pm(e)?!1:(e=e.slice(2).replace(/Once$/,""),ns(t,e[0].toLowerCase()+e.slice(1))||ns(t,Jl(e))||ns(t,e))}function Z0(t){const{type:e,vnode:n,proxy:r,withProxy:i,propsOptions:[s],slots:o,attrs:a,emit:l,render:c,renderCache:d,props:p,data:v,setupState:m,ctx:x,inheritAttrs:E}=t,A=um(t);let k,D;try{if(n.shapeFlag&4){const Y=i||r,te=Y;k=Xl(c.call(te,Y,d,p,m,v,x)),D=a}else{const Y=e;k=Xl(Y.length>1?Y(p,{attrs:a,slots:o,emit:l}):Y(p,null)),D=e.props?a:zO(a)}}catch(Y){zg.length=0,Cf(Y,t,1),k=fi(ta)}let $=k;if(D&&E!==!1){const Y=Object.keys(D),{shapeFlag:te}=$;Y.length&&te&7&&(s&&Y.some(o_)&&(D=$O(D,s)),$=eh($,D,!1,!0))}return n.dirs&&($=eh($,null,!1,!0),$.dirs=$.dirs?$.dirs.concat(n.dirs):n.dirs),n.transition&&Nh($,n.transition),k=$,um(A),k}function jO(t,e=!0){let n;for(let r=0;r<t.length;r++){const i=t[r];if(Ih(i)){if(i.type!==ta||i.children==="v-if"){if(n)return;n=i}}else return}return n}const zO=t=>{let e;for(const n in t)(n==="class"||n==="style"||Pm(n))&&((e||(e={}))[n]=t[n]);return e},$O=(t,e)=>{const n={};for(const r in t)(!o_(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function VO(t,e,n){const{props:r,children:i,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Hx(r,o,c):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const v=d[p];if(o[v]!==r[v]&&!Py(c,v))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Hx(r,o,c):!0:!!o;return!1}function Hx(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const s=r[i];if(e[s]!==t[s]&&!Py(n,s))return!0}return!1}function My({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Dv=t=>t.__isSuspense;let W2=0;const UO={name:"Suspense",__isSuspense:!0,process(t,e,n,r,i,s,o,a,l,c){if(t==null)WO(e,n,r,i,s,o,a,l,c);else{if(s&&s.deps>0&&!t.suspense.isInFallback){e.suspense=t.suspense,e.suspense.vnode=e,e.el=t.el;return}GO(t,e,n,r,i,o,a,l,c)}},hydrate:qO,normalize:YO},HO=UO;function fm(t,e){const n=t.props&&t.props[e];kr(n)&&n()}function WO(t,e,n,r,i,s,o,a,l){const{p:c,o:{createElement:d}}=l,p=d("div"),v=t.suspense=GS(t,i,r,e,p,n,s,o,a,l);c(null,v.pendingBranch=t.ssContent,p,null,r,v,s,o),v.deps>0?(fm(t,"onPending"),fm(t,"onFallback"),c(null,t.ssFallback,e,n,r,null,s,o),yp(v,t.ssFallback)):v.resolve(!1,!0)}function GO(t,e,n,r,i,s,o,a,{p:l,um:c,o:{createElement:d}}){const p=e.suspense=t.suspense;p.vnode=e,e.el=t.el;const v=e.ssContent,m=e.ssFallback,{activeBranch:x,pendingBranch:E,isInFallback:A,isHydrating:k}=p;if(E)p.pendingBranch=v,vc(v,E)?(l(E,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():A&&(k||(l(x,m,n,r,i,null,s,o,a),yp(p,m)))):(p.pendingId=W2++,k?(p.isHydrating=!1,p.activeBranch=E):c(E,i,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),A?(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0?p.resolve():(l(x,m,n,r,i,null,s,o,a),yp(p,m))):x&&vc(v,x)?(l(x,v,n,r,i,p,s,o,a),p.resolve(!0)):(l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0&&p.resolve()));else if(x&&vc(v,x))l(x,v,n,r,i,p,s,o,a),yp(p,v);else if(fm(e,"onPending"),p.pendingBranch=v,v.shapeFlag&512?p.pendingId=v.component.suspenseId:p.pendingId=W2++,l(null,v,p.hiddenContainer,null,i,p,s,o,a),p.deps<=0)p.resolve();else{const{timeout:D,pendingId:$}=p;D>0?setTimeout(()=>{p.pendingId===$&&p.fallback(m)},D):D===0&&p.fallback(m)}}function GS(t,e,n,r,i,s,o,a,l,c,d=!1){const{p,m:v,um:m,n:x,o:{parentNode:E,remove:A}}=c;let k;const D=KO(t);D&&e&&e.pendingBranch&&(k=e.pendingId,e.deps++);const $=t.props?Cv(t.props.timeout):void 0,Y=s,te={vnode:t,parent:e,parentComponent:n,namespace:o,container:r,hiddenContainer:i,deps:0,pendingId:W2++,timeout:typeof $=="number"?$:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(me=!1,pe=!1){const{vnode:I,activeBranch:z,pendingBranch:K,pendingId:N,effects:B,parentComponent:V,container:R}=te;let j=!1;te.isHydrating?te.isHydrating=!1:me||(j=z&&K.transition&&K.transition.mode==="out-in",j&&(z.transition.afterLeave=()=>{N===te.pendingId&&(v(K,R,s===Y?x(z):s,0),am(B))}),z&&(E(z.el)===R&&(s=x(z)),m(z,V,te,!0)),j||v(K,R,s,0)),yp(te,K),te.pendingBranch=null,te.isInFallback=!1;let W=te.parent,X=!1;for(;W;){if(W.pendingBranch){W.effects.push(...B),X=!0;break}W=W.parent}!X&&!j&&am(B),te.effects=[],D&&e&&e.pendingBranch&&k===e.pendingId&&(e.deps--,e.deps===0&&!pe&&e.resolve()),fm(I,"onResolve")},fallback(me){if(!te.pendingBranch)return;const{vnode:pe,activeBranch:I,parentComponent:z,container:K,namespace:N}=te;fm(pe,"onFallback");const B=x(I),V=()=>{te.isInFallback&&(p(null,me,K,B,z,null,N,a,l),yp(te,me))},R=me.transition&&me.transition.mode==="out-in";R&&(I.transition.afterLeave=V),te.isInFallback=!0,m(I,z,null,!0),R||V()},move(me,pe,I){te.activeBranch&&v(te.activeBranch,me,pe,I),te.container=me},next(){return te.activeBranch&&x(te.activeBranch)},registerDep(me,pe,I){const z=!!te.pendingBranch;z&&te.deps++;const K=me.vnode.el;me.asyncDep.catch(N=>{Cf(N,me,0)}).then(N=>{if(me.isUnmounted||te.isUnmounted||te.pendingId!==me.suspenseId)return;me.asyncResolved=!0;const{vnode:B}=me;K2(me,N,!1),K&&(B.el=K);const V=!K&&me.subTree.el;pe(me,B,E(K||me.subTree.el),K?null:x(me.subTree),te,o,I),V&&A(V),My(me,B.el),z&&--te.deps===0&&te.resolve()})},unmount(me,pe){te.isUnmounted=!0,te.activeBranch&&m(te.activeBranch,n,me,pe),te.pendingBranch&&m(te.pendingBranch,n,me,pe)}};return te}function qO(t,e,n,r,i,s,o,a,l){const c=e.suspense=GS(e,r,n,t.parentNode,document.createElement("div"),null,i,s,o,a,!0),d=l(t,c.pendingBranch=e.ssContent,n,c,s,o);return c.deps===0&&c.resolve(!1,!0),d}function YO(t){const{shapeFlag:e,children:n}=t,r=e&32;t.ssContent=Wx(r?n.default:n),t.ssFallback=r?Wx(n.fallback):fi(ta)}function Wx(t){let e;if(kr(t)){const n=yf&&t._c;n&&(t._d=!1,Be()),t=t(),n&&(t._d=!0,e=hl,YS())}return rr(t)&&(t=jO(t)),t=Xl(t),e&&!t.dynamicChildren&&(t.dynamicChildren=e.filter(n=>n!==t)),t}function qS(t,e){e&&e.pendingBranch?rr(t)?e.effects.push(...t):e.effects.push(t):am(t)}function yp(t,e){t.activeBranch=e;const{vnode:n,parentComponent:r}=t;let i=e.el;for(;!i&&e.component;)e=e.component.subTree,i=e.el;n.el=i,r&&r.subTree===n&&(r.vnode.el=i,My(r,i))}function KO(t){const e=t.props&&t.props.suspensible;return e!=null&&e!==!1}const En=Symbol.for("v-fgt"),yd=Symbol.for("v-txt"),ta=Symbol.for("v-cmt"),df=Symbol.for("v-stc"),zg=[];let hl=null;function Be(t=!1){zg.push(hl=t?null:[])}function YS(){zg.pop(),hl=zg[zg.length-1]||null}let yf=1;function G2(t,e=!1){yf+=t,t<0&&hl&&e&&(hl.hasOnce=!0)}function KS(t){return t.dynamicChildren=yf>0?hl||fp:null,YS(),yf>0&&hl&&hl.push(t),t}function ze(t,e,n,r,i,s){return KS(C(t,e,n,r,i,s,!0))}function Ol(t,e,n,r,i){return KS(fi(t,e,n,r,i,!0))}function Ih(t){return t?t.__v_isVNode===!0:!1}function vc(t,e){return t.type===e.type&&t.key===e.key}function ZO(t){}const ZS=({key:t})=>t??null,X0=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?Ns(t)||po(t)||kr(t)?{i:ca,r:t,k:e,f:!!n}:t:null);function C(t,e=null,n=null,r=0,i=null,s=t===En?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&ZS(e),ref:e&&X0(e),scopeId:Ly,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ca};return a?(A_(l,n),s&128&&t.normalize(l)):n&&(l.shapeFlag|=Ns(n)?8:16),yf>0&&!o&&hl&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&hl.push(l),l}const fi=XO;function XO(t,e=null,n=null,r=0,i=null,s=!1){if((!t||t===wS)&&(t=ta),Ih(t)){const a=eh(t,e,!0);return n&&A_(a,n),yf>0&&!s&&hl&&(a.shapeFlag&6?hl[hl.indexOf(t)]=a:hl.push(a)),a.patchFlag=-2,a}if(iN(t)&&(t=t.__vccOpts),e){e=XS(e);let{class:a,style:l}=e;a&&!Ns(a)&&(e.class=Fi(a)),gs(l)&&(wy(l)&&!rr(l)&&(l=Cs({},l)),e.style=eu(l))}const o=Ns(t)?1:Dv(t)?128:sS(t)?64:gs(t)?4:kr(t)?2:0;return C(t,e,n,r,i,o,s,!0)}function XS(t){return t?wy(t)||MS(t)?Cs({},t):t:null}function eh(t,e,n=!1,r=!1){const{props:i,ref:s,patchFlag:o,children:a,transition:l}=t,c=e?JS(i||{},e):i,d={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&ZS(c),ref:e&&e.ref?n&&s?rr(s)?s.concat(X0(e)):[s,X0(e)]:X0(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==En?o===-1?16:o|16:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:l,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&eh(t.ssContent),ssFallback:t.ssFallback&&eh(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return l&&r&&Nh(d,l.clone(d)),d}function li(t=" ",e=0){return fi(yd,null,t,e)}function Dl(t,e){const n=fi(df,null,t);return n.staticCount=e,n}function nn(t="",e=!1){return e?(Be(),Ol(ta,null,t)):fi(ta,null,t)}function Xl(t){return t==null||typeof t=="boolean"?fi(ta):rr(t)?fi(En,null,t.slice()):Ih(t)?od(t):fi(yd,null,String(t))}function od(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:eh(t)}function A_(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(rr(e))n=16;else if(typeof e=="object")if(r&65){const i=e.default;i&&(i._c&&(i._d=!1),A_(t,i()),i._c&&(i._d=!0));return}else{n=32;const i=e._;!i&&!MS(e)?e._ctx=ca:i===3&&ca&&(ca.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else kr(e)?(e={default:e,_ctx:ca},n=32):(e=String(e),r&64?(n=16,e=[li(e)]):n=8);t.children=e,t.shapeFlag|=n}function JS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const i in r)if(i==="class")e.class!==r.class&&(e.class=Fi([e.class,r.class]));else if(i==="style")e.style=eu([e.style,r.style]);else if(Pm(i)){const s=e[i],o=r[i];o&&s!==o&&!(rr(s)&&s.includes(o))&&(e[i]=s?[].concat(s,o):o)}else i!==""&&(e[i]=r[i])}return e}function Zl(t,e,n,r=null){Yu(t,e,7,[n,r])}const JO=SS();let QO=0;function QS(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||JO,s={uid:QO++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new c_(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:AS(r,i),emitsOptions:WS(r,i),emit:null,emitted:null,propsDefaults:Bi,inheritAttrs:r.inheritAttrs,ctx:Bi,data:Bi,props:Bi,attrs:Bi,slots:Bi,refs:Bi,setupState:Bi,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=FO.bind(null,s),t.ce&&t.ce(s),s}let ua=null;const Xu=()=>ua||ca;let Ov,q2;{const t=gy(),e=(n,r)=>{let i;return(i=t[n])||(i=t[n]=[]),i.push(r),s=>{i.length>1?i.forEach(o=>o(s)):i[0](s)}};Ov=e("__VUE_INSTANCE_SETTERS__",n=>ua=n),q2=e("__VUE_SSR_SETTERS__",n=>Cp=n)}const bf=t=>{const e=ua;return Ov(t),t.scope.on(),()=>{t.scope.off(),Ov(e)}},Y2=()=>{ua&&ua.scope.off(),Ov(null)};function eC(t){return t.vnode.shapeFlag&4}let Cp=!1;function tC(t,e=!1,n=!1){e&&q2(e);const{props:r,children:i}=t.vnode,s=eC(t);MO(t,r,s,e),DO(t,i,n);const o=s?eN(t,e):void 0;return e&&q2(!1),o}function eN(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,$2);const{setup:r}=n;if(r){kd();const i=t.setupContext=r.length>1?rC(t):null,s=bf(t),o=Fp(r,t,0,[t.props,i]),a=l_(o);if(Ad(),s(),(a||t.sp)&&!vd(t)&&x_(t),a){if(o.then(Y2,Y2),e)return o.then(l=>{K2(t,l,e)}).catch(l=>{Cf(l,t,0)});t.asyncDep=o}else K2(t,o,e)}else nC(t,e)}function K2(t,e,n){kr(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:gs(e)&&(t.setupState=y_(e)),nC(t,n)}let Nv,Z2;function tN(t){Nv=t,Z2=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,aO))}}const nN=()=>!Nv;function nC(t,e,n){const r=t.type;if(!t.render){if(!e&&Nv&&!r.render){const i=r.template||P_(t).template;if(i){const{isCustomElement:s,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Cs(Cs({isCustomElement:s,delimiters:a},o),l);r.render=Nv(i,c)}}t.render=r.render||Gu,Z2&&Z2(t)}{const i=bf(t);kd();try{wO(t)}finally{Ad(),i()}}}const rN={get(t,e){return ol(t,"get",""),t[e]}};function rC(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,rN),slots:t.slots,emit:t.emit,expose:e}}function Tm(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(y_(xy(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Fg)return Fg[n](t)},has(e,n){return n in e||n in Fg}})):t.proxy}function X2(t,e=!0){return kr(t)?t.displayName||t.name:t.name||e&&t.__name}function iN(t){return kr(t)&&"__vccOpts"in t}const Zn=(t,e)=>_8(t,e,Cp);function ky(t,e,n){const r=arguments.length;return r===2?gs(e)&&!rr(e)?Ih(e)?fi(t,null,[e]):fi(t,e):fi(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ih(n)&&(n=[n]),fi(t,e,n))}function sN(){}function oN(t,e,n,r){const i=n[r];if(i&&iC(i,t))return i;const s=e();return s.memo=t.slice(),s.cacheIndex=r,n[r]=s}function iC(t,e){const n=t.memo;if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(Al(n[r],e[r]))return!1;return yf>0&&hl&&hl.push(t),!0}const sC="3.5.13",aN=Gu,lN=k8,uN=ip,cN=rS,hN={createComponentInstance:QS,setupComponent:tC,renderComponentRoot:Z0,setCurrentRenderingInstance:um,isVNode:Ih,normalizeVNode:Xl,getComponentPublicInstance:Tm,ensureValidVNode:E_,pushWarningContext:C8,popWarningContext:E8},dN=hN,fN=null,pN=null,gN=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let J2;const Gx=typeof window<"u"&&window.trustedTypes;if(Gx)try{J2=Gx.createPolicy("vue",{createHTML:t=>t})}catch{}const oC=J2?t=>J2.createHTML(t):t=>t,mN="http://www.w3.org/2000/svg",vN="http://www.w3.org/1998/Math/MathML",Lh=typeof document<"u"?document:null,qx=Lh&&Lh.createElement("template"),yN={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e==="svg"?Lh.createElementNS(mN,t):e==="mathml"?Lh.createElementNS(vN,t):n?Lh.createElement(t,{is:n}):Lh.createElement(t);return t==="select"&&r&&r.multiple!=null&&i.setAttribute("multiple",r.multiple),i},createText:t=>Lh.createTextNode(t),createComment:t=>Lh.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lh.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,i,s){const o=n?n.previousSibling:e.lastChild;if(i&&(i===s||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),n),!(i===s||!(i=i.nextSibling)););else{qx.innerHTML=oC(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const a=qx.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},Kh="transition",Jp="animation",Ep=Symbol("_vtc"),aC={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},lC=Cs({},w_,aC),bN=t=>(t.displayName="Transition",t.props=lC,t),Q2=bN((t,{slots:e})=>ky(cS,uC(t),e)),Hd=(t,e=[])=>{rr(t)?t.forEach(n=>n(...e)):t&&t(...e)},Yx=t=>t?rr(t)?t.some(e=>e.length>1):t.length>1:!1;function uC(t){const e={};for(const B in t)B in aC||(e[B]=t[B]);if(t.css===!1)return e;const{name:n="v",type:r,duration:i,enterFromClass:s=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:d=a,leaveFromClass:p=`${n}-leave-from`,leaveActiveClass:v=`${n}-leave-active`,leaveToClass:m=`${n}-leave-to`}=t,x=_N(i),E=x&&x[0],A=x&&x[1],{onBeforeEnter:k,onEnter:D,onEnterCancelled:$,onLeave:Y,onLeaveCancelled:te,onBeforeAppear:me=k,onAppear:pe=D,onAppearCancelled:I=$}=e,z=(B,V,R,j)=>{B._enterCancelled=j,td(B,V?d:a),td(B,V?c:o),R&&R()},K=(B,V)=>{B._isLeaving=!1,td(B,p),td(B,m),td(B,v),V&&V()},N=B=>(V,R)=>{const j=B?pe:D,W=()=>z(V,B,R);Hd(j,[V,W]),Kx(()=>{td(V,B?l:s),Fc(V,B?d:a),Yx(j)||Zx(V,r,E,W)})};return Cs(e,{onBeforeEnter(B){Hd(k,[B]),Fc(B,s),Fc(B,o)},onBeforeAppear(B){Hd(me,[B]),Fc(B,l),Fc(B,c)},onEnter:N(!1),onAppear:N(!0),onLeave(B,V){B._isLeaving=!0;const R=()=>K(B,V);Fc(B,p),B._enterCancelled?(Fc(B,v),eb()):(eb(),Fc(B,v)),Kx(()=>{B._isLeaving&&(td(B,p),Fc(B,m),Yx(Y)||Zx(B,r,A,R))}),Hd(Y,[B,R])},onEnterCancelled(B){z(B,!1,void 0,!0),Hd($,[B])},onAppearCancelled(B){z(B,!0,void 0,!0),Hd(I,[B])},onLeaveCancelled(B){K(B),Hd(te,[B])}})}function _N(t){if(t==null)return null;if(gs(t))return[R1(t.enter),R1(t.leave)];{const e=R1(t);return[e,e]}}function R1(t){return Cv(t)}function Fc(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Ep]||(t[Ep]=new Set)).add(e)}function td(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Ep];n&&(n.delete(e),n.size||(t[Ep]=void 0))}function Kx(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let wN=0;function Zx(t,e,n,r){const i=t._endId=++wN,s=()=>{i===t._endId&&r()};if(n!=null)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=cC(t,e);if(!o)return r();const c=o+"end";let d=0;const p=()=>{t.removeEventListener(c,v),s()},v=m=>{m.target===t&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),t.addEventListener(c,v)}function cC(t,e){const n=window.getComputedStyle(t),r=x=>(n[x]||"").split(", "),i=r(`${Kh}Delay`),s=r(`${Kh}Duration`),o=Xx(i,s),a=r(`${Jp}Delay`),l=r(`${Jp}Duration`),c=Xx(a,l);let d=null,p=0,v=0;e===Kh?o>0&&(d=Kh,p=o,v=s.length):e===Jp?c>0&&(d=Jp,p=c,v=l.length):(p=Math.max(o,c),d=p>0?o>c?Kh:Jp:null,v=d?d===Kh?s.length:l.length:0);const m=d===Kh&&/\b(transform|all)(,|$)/.test(r(`${Kh}Property`).toString());return{type:d,timeout:p,propCount:v,hasTransform:m}}function Xx(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>Jx(n)+Jx(t[r])))}function Jx(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function eb(){return document.body.offsetHeight}function xN(t,e,n){const r=t[Ep];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Iv=Symbol("_vod"),hC=Symbol("_vsh"),Ay={beforeMount(t,{value:e},{transition:n}){t[Iv]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Qp(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Qp(t,!0),r.enter(t)):r.leave(t,()=>{Qp(t,!1)}):Qp(t,e))},beforeUnmount(t,{value:e}){Qp(t,e)}};function Qp(t,e){t.style.display=e?t[Iv]:"none",t[hC]=!e}function LN(){Ay.getSSRProps=({value:t})=>{if(!t)return{style:{display:"none"}}}}const dC=Symbol("");function SN(t){const e=Xu();if(!e)return;const n=e.ut=(i=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(s=>Bv(s,i))},r=()=>{const i=t(e.proxy);e.ce?Bv(e.ce,i):tb(e.subTree,i),n(i)};L_(()=>{am(r)}),go(()=>{Ri(r,Gu,{flush:"post"});const i=new MutationObserver(r);i.observe(e.subTree.el.parentNode,{childList:!0}),Ku(()=>i.disconnect())})}function tb(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{tb(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)Bv(t.el,e);else if(t.type===En)t.children.forEach(n=>tb(n,e));else if(t.type===df){let{el:n,anchor:r}=t;for(;n&&(Bv(n,e),n!==r);)n=n.nextSibling}}function Bv(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const i in e)n.setProperty(`--${i}`,e[i]),r+=`--${i}: ${e[i]};`;n[dC]=r}}const CN=/(^|;)\s*display\s*:/;function EN(t,e,n){const r=t.style,i=Ns(n);let s=!1;if(n&&!i){if(e)if(Ns(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&J0(r,a,"")}else for(const o in e)n[o]==null&&J0(r,o,"");for(const o in n)o==="display"&&(s=!0),J0(r,o,n[o])}else if(i){if(e!==n){const o=r[dC];o&&(n+=";"+o),r.cssText=n,s=CN.test(n)}}else e&&t.removeAttribute("style");Iv in t&&(t[Iv]=s?r.display:"",t[hC]&&(r.display="none"))}const Qx=/\s*!important$/;function J0(t,e,n){if(rr(n))n.forEach(r=>J0(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=PN(t,e);Qx.test(n)?t.setProperty(Jl(r),n.replace(Qx,""),"important"):t[r]=n}}const e4=["Webkit","Moz","ms"],F1={};function PN(t,e){const n=F1[e];if(n)return n;let r=$a(e);if(r!=="filter"&&r in t)return F1[e]=r;r=Mm(r);for(let i=0;i<e4.length;i++){const s=e4[i]+r;if(s in t)return F1[e]=s}return e}const t4="http://www.w3.org/1999/xlink";function n4(t,e,n,r,i,s=$D(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(t4,e.slice(6,e.length)):t.setAttributeNS(t4,e,n):n==null||s&&!kL(n)?t.removeAttribute(e):t.setAttribute(e,s?"":xc(n)?String(n):n)}function r4(t,e,n,r,i){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?oC(n):n);return}const s=t.tagName;if(e==="value"&&s!=="PROGRESS"&&!s.includes("-")){const a=s==="OPTION"?t.getAttribute("value")||"":t.value,l=n==null?t.type==="checkbox"?"on":"":String(n);(a!==l||!("_value"in t))&&(t.value=l),n==null&&t.removeAttribute(e),t._value=n;return}let o=!1;if(n===""||n==null){const a=typeof t[e];a==="boolean"?n=kL(n):n==null&&a==="string"?(n="",o=!0):a==="number"&&(n=0,o=!0)}try{t[e]=n}catch{}o&&t.removeAttribute(i||e)}function Ph(t,e,n,r){t.addEventListener(e,n,r)}function MN(t,e,n,r){t.removeEventListener(e,n,r)}const i4=Symbol("_vei");function kN(t,e,n,r,i=null){const s=t[i4]||(t[i4]={}),o=s[e];if(r&&o)o.value=r;else{const[a,l]=AN(e);if(r){const c=s[e]=ON(r,i);Ph(t,a,c,l)}else o&&(MN(t,a,o,l),s[e]=void 0)}}const s4=/(?:Once|Passive|Capture)$/;function AN(t){let e;if(s4.test(t)){e={};let r;for(;r=t.match(s4);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Jl(t.slice(2)),e]}let j1=0;const TN=Promise.resolve(),DN=()=>j1||(TN.then(()=>j1=0),j1=Date.now());function ON(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Yu(NN(r,n.value),e,5,[r])};return n.value=t,n.attached=DN(),n}function NN(t,e){if(rr(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>i=>!i._stopped&&r&&r(i))}else return e}const o4=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,IN=(t,e,n,r,i,s)=>{const o=i==="svg";e==="class"?xN(t,r,o):e==="style"?EN(t,n,r):Pm(e)?o_(e)||kN(t,e,n,r,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):BN(t,e,r,o))?(r4(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&n4(t,e,r,o,s,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!Ns(r))?r4(t,$a(e),r,s,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),n4(t,e,r,o))};function BN(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&o4(e)&&kr(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=t.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return o4(e)&&Ns(n)?!1:e in t}const a4={};/*! #__NO_SIDE_EFFECTS__ */function fC(t,e,n){const r=$s(t,e);fy(r)&&Cs(r,e);class i extends Ty{constructor(o){super(r,o,n)}}return i.def=r,i}/*! #__NO_SIDE_EFFECTS__ */const RN=(t,e)=>fC(t,e,LC),FN=typeof HTMLElement<"u"?HTMLElement:class{};class Ty extends FN{constructor(e,n={},r=Fv){super(),this._def=e,this._props=n,this._createApp=r,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&r!==Fv?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Ty){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,la(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);this._ob=new MutationObserver(r=>{for(const i of r)this._setAttr(i.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(r,i=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:s,styles:o}=r;let a;if(s&&!rr(s))for(const l in s){const c=s[l];(c===Number||c&&c.type===Number)&&(l in this._props&&(this._props[l]=Cv(this._props[l])),(a||(a=Object.create(null)))[$a(l)]=!0)}this._numberProps=a,i&&this._resolveProps(r),this.shadowRoot&&this._applyStyles(o),this._mount(r)},n=this._def.__asyncLoader;n?this._pendingResolve=n().then(r=>e(this._def=r,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const n=this._instance&&this._instance.exposed;if(n)for(const r in n)ns(this,r)||Object.defineProperty(this,r,{get:()=>Xn(n[r])})}_resolveProps(e){const{props:n}=e,r=rr(n)?n:Object.keys(n||{});for(const i of Object.keys(this))i[0]!=="_"&&r.includes(i)&&this._setProp(i,this[i]);for(const i of r.map($a))Object.defineProperty(this,i,{get(){return this._getProp(i)},set(s){this._setProp(i,s,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const n=this.hasAttribute(e);let r=n?this.getAttribute(e):a4;const i=$a(e);n&&this._numberProps&&this._numberProps[i]&&(r=Cv(r)),this._setProp(i,r,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,n,r=!0,i=!1){if(n!==this._props[e]&&(n===a4?delete this._props[e]:(this._props[e]=n,e==="key"&&this._app&&(this._app._ceVNode.key=n)),i&&this._instance&&this._update(),r)){const s=this._ob;s&&s.disconnect(),n===!0?this.setAttribute(Jl(e),""):typeof n=="string"||typeof n=="number"?this.setAttribute(Jl(e),n+""):n||this.removeAttribute(Jl(e)),s&&s.observe(this,{attributes:!0})}}_update(){xC(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const n=fi(this._def,Cs(e,this._props));return this._instance||(n.ce=r=>{this._instance=r,r.ce=this,r.isCE=!0;const i=(s,o)=>{this.dispatchEvent(new CustomEvent(s,fy(o[0])?Cs({detail:o},o[0]):{detail:o}))};r.emit=(s,...o)=>{i(s,o),Jl(s)!==s&&i(Jl(s),o)},this._setParent()}),n}_applyStyles(e,n){if(!e)return;if(n){if(n===this._def||this._styleChildren.has(n))return;this._styleChildren.add(n)}const r=this._nonce;for(let i=e.length-1;i>=0;i--){const s=document.createElement("style");r&&s.setAttribute("nonce",r),s.textContent=e[i],this.shadowRoot.prepend(s)}}_parseSlots(){const e=this._slots={};let n;for(;n=this.firstChild;){const r=n.nodeType===1&&n.getAttribute("slot")||"default";(e[r]||(e[r]=[])).push(n),this.removeChild(n)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),n=this._instance.type.__scopeId;for(let r=0;r<e.length;r++){const i=e[r],s=i.getAttribute("name")||"default",o=this._slots[s],a=i.parentNode;if(o)for(const l of o){if(n&&l.nodeType===1){const c=n+"-s",d=document.createTreeWalker(l,1);l.setAttribute(c,"");let p;for(;p=d.nextNode();)p.setAttribute(c,"")}a.insertBefore(l,i)}else for(;i.firstChild;)a.insertBefore(i.firstChild,i);a.removeChild(i)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function pC(t){const e=Xu(),n=e&&e.ce;return n||null}function jN(){const t=pC();return t&&t.shadowRoot}function zN(t="$style"){{const e=Xu();if(!e)return Bi;const n=e.type.__cssModules;if(!n)return Bi;const r=n[t];return r||Bi}}const gC=new WeakMap,mC=new WeakMap,Rv=Symbol("_moveCb"),l4=Symbol("_enterCb"),$N=t=>(delete t.props.mode,t),VN=$N({name:"TransitionGroup",props:Cs({},lC,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=Xu(),r=__();let i,s;return Ey(()=>{if(!i.length)return;const o=t.moveClass||`${t.name||"v"}-move`;if(!qN(i[0].el,n.vnode.el,o))return;i.forEach(HN),i.forEach(WN);const a=i.filter(GN);eb(),a.forEach(l=>{const c=l.el,d=c.style;Fc(c,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=c[Rv]=v=>{v&&v.target!==c||(!v||/transform$/.test(v.propertyName))&&(c.removeEventListener("transitionend",p),c[Rv]=null,td(c,o))};c.addEventListener("transitionend",p)})}),()=>{const o=Ii(t),a=uC(o);let l=o.tag||En;if(i=[],s)for(let c=0;c<s.length;c++){const d=s[c];d.el&&d.el instanceof Element&&(i.push(d),Nh(d,Sp(d,a,r,n)),gC.set(d,d.el.getBoundingClientRect()))}s=e.default?Sy(e.default()):[];for(let c=0;c<s.length;c++){const d=s[c];d.key!=null&&Nh(d,Sp(d,a,r,n))}return fi(l,null,s)}}}),UN=VN;function HN(t){const e=t.el;e[Rv]&&e[Rv](),e[l4]&&e[l4]()}function WN(t){mC.set(t,t.el.getBoundingClientRect())}function GN(t){const e=gC.get(t),n=mC.get(t),r=e.left-n.left,i=e.top-n.top;if(r||i){const s=t.el.style;return s.transform=s.webkitTransform=`translate(${r}px,${i}px)`,s.transitionDuration="0s",t}}function qN(t,e,n){const r=t.cloneNode(),i=t[Ep];i&&i.forEach(a=>{a.split(/\s+/).forEach(l=>l&&r.classList.remove(l))}),n.split(/\s+/).forEach(a=>a&&r.classList.add(a)),r.style.display="none";const s=e.nodeType===1?e:e.parentNode;s.appendChild(r);const{hasTransform:o}=cC(r);return s.removeChild(r),o}const Ld=t=>{const e=t.props["onUpdate:modelValue"]||!1;return rr(e)?n=>mp(e,n):e};function YN(t){t.target.composing=!0}function u4(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qu=Symbol("_assign"),jr={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t[qu]=Ld(i);const s=r||i.props&&i.props.type==="number";Ph(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),s&&(a=Sv(a)),t[qu](a)}),n&&Ph(t,"change",()=>{t.value=t.value.trim()}),e||(Ph(t,"compositionstart",YN),Ph(t,"compositionend",u4),Ph(t,"change",u4))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:i,number:s}},o){if(t[qu]=Ld(o),t.composing)return;const a=(s||t.type==="number")&&!/^0\d/.test(t.value)?Sv(t.value):t.value,l=e??"";a!==l&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||i&&t.value.trim()===l)||(t.value=l))}},Pl={deep:!0,created(t,e,n){t[qu]=Ld(n),Ph(t,"change",()=>{const r=t._modelValue,i=Pp(t),s=t.checked,o=t[qu];if(rr(r)){const a=my(r,i),l=a!==-1;if(s&&!l)o(r.concat(i));else if(!s&&l){const c=[...r];c.splice(a,1),o(c)}}else if(Sf(r)){const a=new Set(r);s?a.add(i):a.delete(i),o(a)}else o(vC(t,s))})},mounted:c4,beforeUpdate(t,e,n){t[qu]=Ld(n),c4(t,e,n)}};function c4(t,{value:e,oldValue:n},r){t._modelValue=e;let i;if(rr(e))i=my(e,r.props.value)>-1;else if(Sf(e))i=e.has(r.props.value);else{if(e===n)return;i=wd(e,vC(t,!0))}t.checked!==i&&(t.checked=i)}const T_={created(t,{value:e},n){t.checked=wd(e,n.props.value),t[qu]=Ld(n),Ph(t,"change",()=>{t[qu](Pp(t))})},beforeUpdate(t,{value:e,oldValue:n},r){t[qu]=Ld(r),e!==n&&(t.checked=wd(e,r.props.value))}},rs={deep:!0,created(t,{value:e,modifiers:{number:n}},r){const i=Sf(e);Ph(t,"change",()=>{const s=Array.prototype.filter.call(t.options,o=>o.selected).map(o=>n?Sv(Pp(o)):Pp(o));t[qu](t.multiple?i?new Set(s):s:s[0]),t._assigning=!0,la(()=>{t._assigning=!1})}),t[qu]=Ld(r)},mounted(t,{value:e}){h4(t,e)},beforeUpdate(t,e,n){t[qu]=Ld(n)},updated(t,{value:e}){t._assigning||h4(t,e)}};function h4(t,e){const n=t.multiple,r=rr(e);if(!(n&&!r&&!Sf(e))){for(let i=0,s=t.options.length;i<s;i++){const o=t.options[i],a=Pp(o);if(n)if(r){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(c=>String(c)===String(a)):o.selected=my(e,a)>-1}else o.selected=e.has(a);else if(wd(Pp(o),e)){t.selectedIndex!==i&&(t.selectedIndex=i);return}}!n&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function Pp(t){return"_value"in t?t._value:t.value}function vC(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const D_={created(t,e,n){y0(t,e,n,null,"created")},mounted(t,e,n){y0(t,e,n,null,"mounted")},beforeUpdate(t,e,n,r){y0(t,e,n,r,"beforeUpdate")},updated(t,e,n,r){y0(t,e,n,r,"updated")}};function yC(t,e){switch(t){case"SELECT":return rs;case"TEXTAREA":return jr;default:switch(e){case"checkbox":return Pl;case"radio":return T_;default:return jr}}}function y0(t,e,n,r,i){const o=yC(t.tagName,n.props&&n.props.type)[i];o&&o(t,e,n,r)}function KN(){jr.getSSRProps=({value:t})=>({value:t}),T_.getSSRProps=({value:t},e)=>{if(e.props&&wd(e.props.value,t))return{checked:!0}},Pl.getSSRProps=({value:t},e)=>{if(rr(t)){if(e.props&&my(t,e.props.value)>-1)return{checked:!0}}else if(Sf(t)){if(e.props&&t.has(e.props.value))return{checked:!0}}else if(t)return{checked:!0}},D_.getSSRProps=(t,e)=>{if(typeof e.type!="string")return;const n=yC(e.type.toUpperCase(),e.props&&e.props.type);if(n.getSSRProps)return n.getSSRProps(t,e)}}const ZN=["ctrl","shift","alt","meta"],XN={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>ZN.some(n=>t[`${n}Key`]&&!e.includes(n))},Bh=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(i,...s)=>{for(let o=0;o<e.length;o++){const a=XN[e[o]];if(a&&a(i,e))return}return t(i,...s)})},JN={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},QN=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=i=>{if(!("key"in i))return;const s=Jl(i.key);if(e.some(o=>o===s||JN[o]===s))return t(i)})},bC=Cs({patchProp:IN},yN);let $g,d4=!1;function _C(){return $g||($g=IS(bC))}function wC(){return $g=d4?$g:BS(bC),d4=!0,$g}const xC=(...t)=>{_C().render(...t)},eI=(...t)=>{wC().hydrate(...t)},Fv=(...t)=>{const e=_C().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(!i)return;const s=e._component;!kr(s)&&!s.render&&!s.template&&(s.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=n(i,!1,SC(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e},LC=(...t)=>{const e=wC().createApp(...t),{mount:n}=e;return e.mount=r=>{const i=CC(r);if(i)return n(i,!0,SC(i))},e};function SC(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function CC(t){return Ns(t)?document.querySelector(t):t}let f4=!1;const tI=()=>{f4||(f4=!0,KN(),LN())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const nI=()=>{},rI=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:cS,BaseTransitionPropsValidators:w_,Comment:ta,DeprecationTypes:gN,EffectScope:c_,ErrorCodes:M8,ErrorTypeStrings:lN,Fragment:En,KeepAlive:Q8,ReactiveEffect:im,Static:df,Suspense:HO,Teleport:j2,Text:yd,TrackOpTypes:w8,Transition:Q2,TransitionGroup:UN,TriggerOpTypes:x8,VueElement:Ty,assertNumber:P8,callWithAsyncErrorHandling:Yu,callWithErrorHandling:Fp,camelize:$a,capitalize:Mm,cloneVNode:eh,compatUtils:pN,compile:nI,computed:Zn,createApp:Fv,createBlock:Ol,createCommentVNode:nn,createElementBlock:ze,createElementVNode:C,createHydrationRenderer:BS,createPropsRestProxy:bO,createRenderer:IS,createSSRApp:LC,createSlots:iO,createStaticVNode:Dl,createTextVNode:li,createVNode:fi,customRef:KL,defineAsyncComponent:X8,defineComponent:$s,defineCustomElement:fC,defineEmits:uO,defineExpose:cO,defineModel:fO,defineOptions:hO,defineProps:lO,defineSSRCustomElement:RN,defineSlots:dO,devtools:uN,effect:HD,effectScope:h_,getCurrentInstance:Xu,getCurrentScope:d_,getCurrentWatcher:L8,getTransitionRawChildren:Sy,guardReactiveProps:XS,h:ky,handleError:Cf,hasInjectionContext:CS,hydrate:eI,hydrateOnIdle:W8,hydrateOnInteraction:K8,hydrateOnMediaQuery:Y8,hydrateOnVisible:q8,initCustomFormatter:sN,initDirectivesForSSR:tI,inject:Cu,isMemoSame:iC,isProxy:wy,isReactive:Zc,isReadonly:xd,isRef:po,isRuntimeOnly:nN,isShallow:Su,isVNode:Ih,markRaw:xy,mergeDefaults:vO,mergeModels:yO,mergeProps:JS,nextTick:la,normalizeClass:Fi,normalizeProps:jD,normalizeStyle:eu,onActivated:dS,onBeforeMount:gS,onBeforeUnmount:Td,onBeforeUpdate:L_,onDeactivated:fS,onErrorCaptured:bS,onMounted:go,onRenderTracked:yS,onRenderTriggered:vS,onScopeDispose:DL,onServerPrefetch:mS,onUnmounted:Ku,onUpdated:Ey,onWatcherCleanup:JL,openBlock:Be,popScopeId:O8,provide:jg,proxyRefs:y_,pushScopeId:D8,queuePostFlushCb:am,reactive:ru,readonly:pc,ref:Lt,registerRuntimeCompiler:tN,render:xC,renderList:fr,renderSlot:sO,resolveComponent:_S,resolveDirective:rO,resolveDynamicComponent:nO,resolveFilter:fN,resolveTransitionHooks:Sp,setBlockTracking:G2,setDevtoolsHook:cN,setTransitionHooks:Nh,shallowReactive:m_,shallowReadonly:c8,shallowRef:v_,ssrContextKey:zS,ssrUtils:dN,stop:WD,toDisplayString:Dt,toHandlerKey:Ng,toHandlers:oO,toRaw:Ii,toRef:y8,toRefs:ZL,toValue:f8,transformVNodeArgs:ZO,triggerRef:d8,unref:Xn,useAttrs:mO,useCssModule:zN,useCssVars:SN,useHost:pC,useId:R8,useModel:RO,useSSRContext:$S,useShadowRoot:jN,useSlots:gO,useTemplateRef:F8,useTransitionState:__,vModelCheckbox:Pl,vModelDynamic:D_,vModelRadio:T_,vModelSelect:rs,vModelText:jr,vShow:Ay,version:sC,warn:aN,watch:Ri,watchEffect:dm,watchPostEffect:IO,watchSyncEffect:VS,withAsyncContext:_O,withCtx:Wu,withDefaults:pO,withDirectives:kn,withKeys:QN,withMemo:oN,withModifiers:Bh,withScopeId:N8},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let EC;const Dy=t=>EC=t,PC=Symbol();function nb(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vg;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vg||(Vg={}));function iI(){const t=h_(!0),e=t.run(()=>Lt({}));let n=[],r=[];const i=xy({install(s){Dy(i),i._a=s,s.provide(PC,i),s.config.globalProperties.$pinia=i,r.forEach(o=>n.push(o)),r=[]},use(s){return this._a?n.push(s):r.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return i}const MC=()=>{};function p4(t,e,n,r=MC){t.push(e);const i=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),r())};return!n&&d_()&&DL(i),i}function Yf(t,...e){t.slice().forEach(n=>{n(...e)})}const sI=t=>t(),g4=Symbol(),z1=Symbol();function rb(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,r)=>t.set(r,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const r=e[n],i=t[n];nb(i)&&nb(r)&&t.hasOwnProperty(n)&&!po(r)&&!Zc(r)?t[n]=rb(i,r):t[n]=r}return t}const oI=Symbol();function aI(t){return!nb(t)||!t.hasOwnProperty(oI)}const{assign:nd}=Object;function lI(t){return!!(po(t)&&t.effect)}function uI(t,e,n,r){const{state:i,actions:s,getters:o}=e,a=n.state.value[t];let l;function c(){a||(n.state.value[t]=i?i():{});const d=ZL(n.state.value[t]);return nd(d,s,Object.keys(o||{}).reduce((p,v)=>(p[v]=xy(Zn(()=>{Dy(n);const m=n._s.get(t);return o[v].call(m,m)})),p),{}))}return l=kC(t,c,e,n,r,!0),l}function kC(t,e,n={},r,i,s){let o;const a=nd({actions:{}},n),l={deep:!0};let c,d,p=[],v=[],m;const x=r.state.value[t];!s&&!x&&(r.state.value[t]={}),Lt({});let E;function A(I){let z;c=d=!1,typeof I=="function"?(I(r.state.value[t]),z={type:Vg.patchFunction,storeId:t,events:m}):(rb(r.state.value[t],I),z={type:Vg.patchObject,payload:I,storeId:t,events:m});const K=E=Symbol();la().then(()=>{E===K&&(c=!0)}),d=!0,Yf(p,z,r.state.value[t])}const k=s?function(){const{state:z}=n,K=z?z():{};this.$patch(N=>{nd(N,K)})}:MC;function D(){o.stop(),p=[],v=[],r._s.delete(t)}const $=(I,z="")=>{if(g4 in I)return I[z1]=z,I;const K=function(){Dy(r);const N=Array.from(arguments),B=[],V=[];function R(X){B.push(X)}function j(X){V.push(X)}Yf(v,{args:N,name:K[z1],store:te,after:R,onError:j});let W;try{W=I.apply(this&&this.$id===t?this:te,N)}catch(X){throw Yf(V,X),X}return W instanceof Promise?W.then(X=>(Yf(B,X),X)).catch(X=>(Yf(V,X),Promise.reject(X))):(Yf(B,W),W)};return K[g4]=!0,K[z1]=z,K},Y={_p:r,$id:t,$onAction:p4.bind(null,v),$patch:A,$reset:k,$subscribe(I,z={}){const K=p4(p,I,z.detached,()=>N()),N=o.run(()=>Ri(()=>r.state.value[t],B=>{(z.flush==="sync"?d:c)&&I({storeId:t,type:Vg.direct,events:m},B)},nd({},l,z)));return K},$dispose:D},te=ru(Y);r._s.set(t,te);const pe=(r._a&&r._a.runWithContext||sI)(()=>r._e.run(()=>(o=h_()).run(()=>e({action:$}))));for(const I in pe){const z=pe[I];if(po(z)&&!lI(z)||Zc(z))s||(x&&aI(z)&&(po(z)?z.value=x[I]:rb(z,x[I])),r.state.value[t][I]=z);else if(typeof z=="function"){const K=$(z,I);pe[I]=K,a.actions[I]=z}}return nd(te,pe),nd(Ii(te),pe),Object.defineProperty(te,"$state",{get:()=>r.state.value[t],set:I=>{A(z=>{nd(z,I)})}}),r._p.forEach(I=>{nd(te,o.run(()=>I({store:te,app:r._a,pinia:r,options:a})))}),x&&s&&n.hydrate&&n.hydrate(te.$state,x),c=!0,d=!0,te}/*! #__NO_SIDE_EFFECTS__ */function jp(t,e,n){let r,i;const s=typeof e=="function";typeof t=="string"?(r=t,i=s?n:e):(i=t,r=t.id);function o(a,l){const c=CS();return a=a||(c?Cu(PC,null):null),a&&Dy(a),a=EC,a._s.has(r)||(s?kC(r,e,i,a):uI(r,i,a)),a._s.get(r)}return o.$id=r,o}function AC(t,e){return function(){return t.apply(e,arguments)}}const{toString:cI}=Object.prototype,{getPrototypeOf:O_}=Object,Oy=(t=>e=>{const n=cI.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Cc=t=>(t=t.toLowerCase(),e=>Oy(e)===t),Ny=t=>e=>typeof e===t,{isArray:zp}=Array,pm=Ny("undefined");function hI(t){return t!==null&&!pm(t)&&t.constructor!==null&&!pm(t.constructor)&&Eu(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const TC=Cc("ArrayBuffer");function dI(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&TC(t.buffer),e}const fI=Ny("string"),Eu=Ny("function"),DC=Ny("number"),Iy=t=>t!==null&&typeof t=="object",pI=t=>t===!0||t===!1,Q0=t=>{if(Oy(t)!=="object")return!1;const e=O_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},gI=Cc("Date"),mI=Cc("File"),vI=Cc("Blob"),yI=Cc("FileList"),bI=t=>Iy(t)&&Eu(t.pipe),_I=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Eu(t.append)&&((e=Oy(t))==="formdata"||e==="object"&&Eu(t.toString)&&t.toString()==="[object FormData]"))},wI=Cc("URLSearchParams"),[xI,LI,SI,CI]=["ReadableStream","Request","Response","Headers"].map(Cc),EI=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Dm(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),zp(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let a;for(r=0;r<o;r++)a=s[r],e.call(null,t[a],a,t)}}function OC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const af=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,NC=t=>!pm(t)&&t!==af;function ib(){const{caseless:t}=NC(this)&&this||{},e={},n=(r,i)=>{const s=t&&OC(e,i)||i;Q0(e[s])&&Q0(r)?e[s]=ib(e[s],r):Q0(r)?e[s]=ib({},r):zp(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Dm(arguments[r],n);return e}const PI=(t,e,n,{allOwnKeys:r}={})=>(Dm(e,(i,s)=>{n&&Eu(i)?t[s]=AC(i,n):t[s]=i},{allOwnKeys:r}),t),MI=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),kI=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},AI=(t,e,n,r)=>{let i,s,o;const a={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&O_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},TI=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},DI=t=>{if(!t)return null;if(zp(t))return t;let e=t.length;if(!DC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},OI=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&O_(Uint8Array)),NI=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},II=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},BI=Cc("HTMLFormElement"),RI=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),m4=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),FI=Cc("RegExp"),IC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Dm(n,(i,s)=>{let o;(o=e(i,s,t))!==!1&&(r[s]=o||i)}),Object.defineProperties(t,r)},jI=t=>{IC(t,(e,n)=>{if(Eu(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(Eu(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},zI=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return zp(t)?r(t):r(String(t).split(e)),n},$I=()=>{},VI=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function UI(t){return!!(t&&Eu(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const HI=t=>{const e=new Array(10),n=(r,i)=>{if(Iy(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=zp(r)?[]:{};return Dm(r,(o,a)=>{const l=n(o,i+1);!pm(l)&&(s[a]=l)}),e[i]=void 0,s}}return r};return n(t,0)},WI=Cc("AsyncFunction"),GI=t=>t&&(Iy(t)||Eu(t))&&Eu(t.then)&&Eu(t.catch),BC=((t,e)=>t?setImmediate:e?((n,r)=>(af.addEventListener("message",({source:i,data:s})=>{i===af&&s===n&&r.length&&r.shift()()},!1),i=>{r.push(i),af.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Eu(af.postMessage)),qI=typeof queueMicrotask<"u"?queueMicrotask.bind(af):typeof process<"u"&&process.nextTick||BC,Xt={isArray:zp,isArrayBuffer:TC,isBuffer:hI,isFormData:_I,isArrayBufferView:dI,isString:fI,isNumber:DC,isBoolean:pI,isObject:Iy,isPlainObject:Q0,isReadableStream:xI,isRequest:LI,isResponse:SI,isHeaders:CI,isUndefined:pm,isDate:gI,isFile:mI,isBlob:vI,isRegExp:FI,isFunction:Eu,isStream:bI,isURLSearchParams:wI,isTypedArray:OI,isFileList:yI,forEach:Dm,merge:ib,extend:PI,trim:EI,stripBOM:MI,inherits:kI,toFlatObject:AI,kindOf:Oy,kindOfTest:Cc,endsWith:TI,toArray:DI,forEachEntry:NI,matchAll:II,isHTMLForm:BI,hasOwnProperty:m4,hasOwnProp:m4,reduceDescriptors:IC,freezeMethods:jI,toObjectSet:zI,toCamelCase:RI,noop:$I,toFiniteNumber:VI,findKey:OC,global:af,isContextDefined:NC,isSpecCompliantForm:UI,toJSONObject:HI,isAsyncFn:WI,isThenable:GI,setImmediate:BC,asap:qI};function ai(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Xt.inherits(ai,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Xt.toJSONObject(this.config),code:this.code,status:this.status}}});const RC=ai.prototype,FC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{FC[t]={value:t}});Object.defineProperties(ai,FC);Object.defineProperty(RC,"isAxiosError",{value:!0});ai.from=(t,e,n,r,i,s)=>{const o=Object.create(RC);return Xt.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),ai.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const YI=null;function sb(t){return Xt.isPlainObject(t)||Xt.isArray(t)}function jC(t){return Xt.endsWith(t,"[]")?t.slice(0,-2):t}function v4(t,e,n){return t?t.concat(e).map(function(i,s){return i=jC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function KI(t){return Xt.isArray(t)&&!t.some(sb)}const ZI=Xt.toFlatObject(Xt,{},null,function(e){return/^is[A-Z]/.test(e)});function By(t,e,n){if(!Xt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Xt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,A){return!Xt.isUndefined(A[E])});const r=n.metaTokens,i=n.visitor||d,s=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&Xt.isSpecCompliantForm(e);if(!Xt.isFunction(i))throw new TypeError("visitor must be a function");function c(x){if(x===null)return"";if(Xt.isDate(x))return x.toISOString();if(!l&&Xt.isBlob(x))throw new ai("Blob is not supported. Use a Buffer instead.");return Xt.isArrayBuffer(x)||Xt.isTypedArray(x)?l&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function d(x,E,A){let k=x;if(x&&!A&&typeof x=="object"){if(Xt.endsWith(E,"{}"))E=r?E:E.slice(0,-2),x=JSON.stringify(x);else if(Xt.isArray(x)&&KI(x)||(Xt.isFileList(x)||Xt.endsWith(E,"[]"))&&(k=Xt.toArray(x)))return E=jC(E),k.forEach(function($,Y){!(Xt.isUndefined($)||$===null)&&e.append(o===!0?v4([E],Y,s):o===null?E:E+"[]",c($))}),!1}return sb(x)?!0:(e.append(v4(A,E,s),c(x)),!1)}const p=[],v=Object.assign(ZI,{defaultVisitor:d,convertValue:c,isVisitable:sb});function m(x,E){if(!Xt.isUndefined(x)){if(p.indexOf(x)!==-1)throw Error("Circular reference detected in "+E.join("."));p.push(x),Xt.forEach(x,function(k,D){(!(Xt.isUndefined(k)||k===null)&&i.call(e,k,Xt.isString(D)?D.trim():D,E,v))===!0&&m(k,E?E.concat(D):[D])}),p.pop()}}if(!Xt.isObject(t))throw new TypeError("data must be an object");return m(t),e}function y4(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function N_(t,e){this._pairs=[],t&&By(t,this,e)}const zC=N_.prototype;zC.append=function(e,n){this._pairs.push([e,n])};zC.toString=function(e){const n=e?function(r){return e.call(this,r,y4)}:y4;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function XI(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $C(t,e,n){if(!e)return t;const r=n&&n.encode||XI;Xt.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(i?s=i(e,n):s=Xt.isURLSearchParams(e)?e.toString():new N_(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class b4{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Xt.forEach(this.handlers,function(r){r!==null&&e(r)})}}const VC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},JI=typeof URLSearchParams<"u"?URLSearchParams:N_,QI=typeof FormData<"u"?FormData:null,e7=typeof Blob<"u"?Blob:null,t7={isBrowser:!0,classes:{URLSearchParams:JI,FormData:QI,Blob:e7},protocols:["http","https","file","blob","url","data"]},I_=typeof window<"u"&&typeof document<"u",ob=typeof navigator=="object"&&navigator||void 0,n7=I_&&(!ob||["ReactNative","NativeScript","NS"].indexOf(ob.product)<0),r7=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",i7=I_&&window.location.href||"http://localhost",s7=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I_,hasStandardBrowserEnv:n7,hasStandardBrowserWebWorkerEnv:r7,navigator:ob,origin:i7},Symbol.toStringTag,{value:"Module"})),ll={...s7,...t7};function o7(t,e){return By(t,new ll.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return ll.isNode&&Xt.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function a7(t){return Xt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function l7(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function UC(t){function e(n,r,i,s){let o=n[s++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=s>=n.length;return o=!o&&Xt.isArray(i)?i.length:o,l?(Xt.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!a):((!i[o]||!Xt.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&Xt.isArray(i[o])&&(i[o]=l7(i[o])),!a)}if(Xt.isFormData(t)&&Xt.isFunction(t.entries)){const n={};return Xt.forEachEntry(t,(r,i)=>{e(a7(r),i,n,0)}),n}return null}function u7(t,e,n){if(Xt.isString(t))try{return(e||JSON.parse)(t),Xt.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Om={transitional:VC,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=Xt.isObject(e);if(s&&Xt.isHTMLForm(e)&&(e=new FormData(e)),Xt.isFormData(e))return i?JSON.stringify(UC(e)):e;if(Xt.isArrayBuffer(e)||Xt.isBuffer(e)||Xt.isStream(e)||Xt.isFile(e)||Xt.isBlob(e)||Xt.isReadableStream(e))return e;if(Xt.isArrayBufferView(e))return e.buffer;if(Xt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return o7(e,this.formSerializer).toString();if((a=Xt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return By(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),u7(e)):e}],transformResponse:[function(e){const n=this.transitional||Om.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(Xt.isResponse(e)||Xt.isReadableStream(e))return e;if(e&&Xt.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?ai.from(a,ai.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ll.classes.FormData,Blob:ll.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Xt.forEach(["delete","get","head","post","put","patch"],t=>{Om.headers[t]={}});const c7=Xt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),h7=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&c7[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},_4=Symbol("internals");function eg(t){return t&&String(t).trim().toLowerCase()}function ev(t){return t===!1||t==null?t:Xt.isArray(t)?t.map(ev):String(t)}function d7(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const f7=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function $1(t,e,n,r,i){if(Xt.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!Xt.isString(e)){if(Xt.isString(r))return e.indexOf(r)!==-1;if(Xt.isRegExp(r))return r.test(e)}}function p7(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function g7(t,e){const n=Xt.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}let tu=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(a,l,c){const d=eg(l);if(!d)throw new Error("header name must be a non-empty string");const p=Xt.findKey(i,d);(!p||i[p]===void 0||c===!0||c===void 0&&i[p]!==!1)&&(i[p||l]=ev(a))}const o=(a,l)=>Xt.forEach(a,(c,d)=>s(c,d,l));if(Xt.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(Xt.isString(e)&&(e=e.trim())&&!f7(e))o(h7(e),n);else if(Xt.isHeaders(e))for(const[a,l]of e.entries())s(l,a,r);else e!=null&&s(n,e,r);return this}get(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return d7(i);if(Xt.isFunction(n))return n.call(this,i,r);if(Xt.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=eg(e),e){const r=Xt.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||$1(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=eg(o),o){const a=Xt.findKey(r,o);a&&(!n||$1(r,r[a],a,n))&&(delete r[a],i=!0)}}return Xt.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||$1(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return Xt.forEach(this,(i,s)=>{const o=Xt.findKey(r,s);if(o){n[o]=ev(i),delete n[s];return}const a=e?p7(s):String(s).trim();a!==s&&delete n[s],n[a]=ev(i),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Xt.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&Xt.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[_4]=this[_4]={accessors:{}}).accessors,i=this.prototype;function s(o){const a=eg(o);r[a]||(g7(i,o),r[a]=!0)}return Xt.isArray(e)?e.forEach(s):s(e),this}};tu.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Xt.reduceDescriptors(tu.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});Xt.freezeMethods(tu);function V1(t,e){const n=this||Om,r=e||n,i=tu.from(r.headers);let s=r.data;return Xt.forEach(t,function(a){s=a.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function HC(t){return!!(t&&t.__CANCEL__)}function $p(t,e,n){ai.call(this,t??"canceled",ai.ERR_CANCELED,e,n),this.name="CanceledError"}Xt.inherits($p,ai,{__CANCEL__:!0});function WC(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new ai("Request failed with status code "+n.status,[ai.ERR_BAD_REQUEST,ai.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function m7(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function v7(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),d=r[s];o||(o=c),n[i]=l,r[i]=c;let p=s,v=0;for(;p!==i;)v+=n[p++],p=p%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const m=d&&c-d;return m?Math.round(v*1e3/m):void 0}}function y7(t,e){let n=0,r=1e3/e,i,s;const o=(c,d=Date.now())=>{n=d,i=null,s&&(clearTimeout(s),s=null),t.apply(null,c)};return[(...c)=>{const d=Date.now(),p=d-n;p>=r?o(c,d):(i=c,s||(s=setTimeout(()=>{s=null,o(i)},r-p)))},()=>i&&o(i)]}const jv=(t,e,n=3)=>{let r=0;const i=v7(50,250);return y7(s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,c=i(l),d=o<=a;r=o;const p={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&d?(a-o)/c:void 0,event:s,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(p)},n)},w4=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},x4=t=>(...e)=>Xt.asap(()=>t(...e)),b7=ll.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,ll.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(ll.origin),ll.navigator&&/(msie|trident)/i.test(ll.navigator.userAgent)):()=>!0,_7=ll.hasStandardBrowserEnv?{write(t,e,n,r,i,s){const o=[t+"="+encodeURIComponent(e)];Xt.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Xt.isString(r)&&o.push("path="+r),Xt.isString(i)&&o.push("domain="+i),s===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function w7(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function x7(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function GC(t,e,n){let r=!w7(e);return t&&(r||n==!1)?x7(t,e):e}const L4=t=>t instanceof tu?{...t}:t;function _f(t,e){e=e||{};const n={};function r(c,d,p,v){return Xt.isPlainObject(c)&&Xt.isPlainObject(d)?Xt.merge.call({caseless:v},c,d):Xt.isPlainObject(d)?Xt.merge({},d):Xt.isArray(d)?d.slice():d}function i(c,d,p,v){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c,p,v)}else return r(c,d,p,v)}function s(c,d){if(!Xt.isUndefined(d))return r(void 0,d)}function o(c,d){if(Xt.isUndefined(d)){if(!Xt.isUndefined(c))return r(void 0,c)}else return r(void 0,d)}function a(c,d,p){if(p in e)return r(c,d);if(p in t)return r(void 0,c)}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,d,p)=>i(L4(c),L4(d),p,!0)};return Xt.forEach(Object.keys(Object.assign({},t,e)),function(d){const p=l[d]||i,v=p(t[d],e[d],d);Xt.isUndefined(v)&&p!==a||(n[d]=v)}),n}const qC=t=>{const e=_f({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:o,auth:a}=e;e.headers=o=tu.from(o),e.url=$C(GC(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(Xt.isFormData(n)){if(ll.hasStandardBrowserEnv||ll.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...d]=l?l.split(";").map(p=>p.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...d].join("; "))}}if(ll.hasStandardBrowserEnv&&(r&&Xt.isFunction(r)&&(r=r(e)),r||r!==!1&&b7(e.url))){const c=i&&s&&_7.read(s);c&&o.set(i,c)}return e},L7=typeof XMLHttpRequest<"u",S7=L7&&function(t){return new Promise(function(n,r){const i=qC(t);let s=i.data;const o=tu.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,d,p,v,m,x;function E(){m&&m(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(d),i.signal&&i.signal.removeEventListener("abort",d)}let A=new XMLHttpRequest;A.open(i.method.toUpperCase(),i.url,!0),A.timeout=i.timeout;function k(){if(!A)return;const $=tu.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),te={data:!a||a==="text"||a==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:$,config:t,request:A};WC(function(pe){n(pe),E()},function(pe){r(pe),E()},te),A=null}"onloadend"in A?A.onloadend=k:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(k)},A.onabort=function(){A&&(r(new ai("Request aborted",ai.ECONNABORTED,t,A)),A=null)},A.onerror=function(){r(new ai("Network Error",ai.ERR_NETWORK,t,A)),A=null},A.ontimeout=function(){let Y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const te=i.transitional||VC;i.timeoutErrorMessage&&(Y=i.timeoutErrorMessage),r(new ai(Y,te.clarifyTimeoutError?ai.ETIMEDOUT:ai.ECONNABORTED,t,A)),A=null},s===void 0&&o.setContentType(null),"setRequestHeader"in A&&Xt.forEach(o.toJSON(),function(Y,te){A.setRequestHeader(te,Y)}),Xt.isUndefined(i.withCredentials)||(A.withCredentials=!!i.withCredentials),a&&a!=="json"&&(A.responseType=i.responseType),c&&([v,x]=jv(c,!0),A.addEventListener("progress",v)),l&&A.upload&&([p,m]=jv(l),A.upload.addEventListener("progress",p),A.upload.addEventListener("loadend",m)),(i.cancelToken||i.signal)&&(d=$=>{A&&(r(!$||$.type?new $p(null,t,A):$),A.abort(),A=null)},i.cancelToken&&i.cancelToken.subscribe(d),i.signal&&(i.signal.aborted?d():i.signal.addEventListener("abort",d)));const D=m7(i.url);if(D&&ll.protocols.indexOf(D)===-1){r(new ai("Unsupported protocol "+D+":",ai.ERR_BAD_REQUEST,t));return}A.send(s||null)})},C7=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const s=function(c){if(!i){i=!0,a();const d=c instanceof Error?c:this.reason;r.abort(d instanceof ai?d:new $p(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,s(new ai(`timeout ${e} of ms exceeded`,ai.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(s):c.removeEventListener("abort",s)}),t=null)};t.forEach(c=>c.addEventListener("abort",s));const{signal:l}=r;return l.unsubscribe=()=>Xt.asap(a),l}},E7=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},P7=async function*(t,e){for await(const n of M7(t))yield*E7(n,e)},M7=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},S4=(t,e,n,r)=>{const i=P7(t,e);let s=0,o,a=l=>{o||(o=!0,r&&r(l))};return new ReadableStream({async pull(l){try{const{done:c,value:d}=await i.next();if(c){a(),l.close();return}let p=d.byteLength;if(n){let v=s+=p;n(v)}l.enqueue(new Uint8Array(d))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},Ry=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",YC=Ry&&typeof ReadableStream=="function",k7=Ry&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),KC=(t,...e)=>{try{return!!t(...e)}catch{return!1}},A7=YC&&KC(()=>{let t=!1;const e=new Request(ll.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),C4=64*1024,ab=YC&&KC(()=>Xt.isReadableStream(new Response("").body)),zv={stream:ab&&(t=>t.body)};Ry&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!zv[e]&&(zv[e]=Xt.isFunction(t[e])?n=>n[e]():(n,r)=>{throw new ai(`Response type '${e}' is not supported`,ai.ERR_NOT_SUPPORT,r)})})})(new Response);const T7=async t=>{if(t==null)return 0;if(Xt.isBlob(t))return t.size;if(Xt.isSpecCompliantForm(t))return(await new Request(ll.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(Xt.isArrayBufferView(t)||Xt.isArrayBuffer(t))return t.byteLength;if(Xt.isURLSearchParams(t)&&(t=t+""),Xt.isString(t))return(await k7(t)).byteLength},D7=async(t,e)=>{const n=Xt.toFiniteNumber(t.getContentLength());return n??T7(e)},O7=Ry&&(async t=>{let{url:e,method:n,data:r,signal:i,cancelToken:s,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:d,withCredentials:p="same-origin",fetchOptions:v}=qC(t);c=c?(c+"").toLowerCase():"text";let m=C7([i,s&&s.toAbortSignal()],o),x;const E=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let A;try{if(l&&A7&&n!=="get"&&n!=="head"&&(A=await D7(d,r))!==0){let te=new Request(e,{method:"POST",body:r,duplex:"half"}),me;if(Xt.isFormData(r)&&(me=te.headers.get("content-type"))&&d.setContentType(me),te.body){const[pe,I]=w4(A,jv(x4(l)));r=S4(te.body,C4,pe,I)}}Xt.isString(p)||(p=p?"include":"omit");const k="credentials"in Request.prototype;x=new Request(e,{...v,signal:m,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:r,duplex:"half",credentials:k?p:void 0});let D=await fetch(x);const $=ab&&(c==="stream"||c==="response");if(ab&&(a||$&&E)){const te={};["status","statusText","headers"].forEach(z=>{te[z]=D[z]});const me=Xt.toFiniteNumber(D.headers.get("content-length")),[pe,I]=a&&w4(me,jv(x4(a),!0))||[];D=new Response(S4(D.body,C4,pe,()=>{I&&I(),E&&E()}),te)}c=c||"text";let Y=await zv[Xt.findKey(zv,c)||"text"](D,t);return!$&&E&&E(),await new Promise((te,me)=>{WC(te,me,{data:Y,headers:tu.from(D.headers),status:D.status,statusText:D.statusText,config:t,request:x})})}catch(k){throw E&&E(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new ai("Network Error",ai.ERR_NETWORK,t,x),{cause:k.cause||k}):ai.from(k,k&&k.code,t,x)}}),lb={http:YI,xhr:S7,fetch:O7};Xt.forEach(lb,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const E4=t=>`- ${t}`,N7=t=>Xt.isFunction(t)||t===null||t===!1,ZC={getAdapter:t=>{t=Xt.isArray(t)?t:[t];const{length:e}=t;let n,r;const i={};for(let s=0;s<e;s++){n=t[s];let o;if(r=n,!N7(n)&&(r=lb[(o=String(n)).toLowerCase()],r===void 0))throw new ai(`Unknown adapter '${o}'`);if(r)break;i[o||"#"+s]=r}if(!r){const s=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?s.length>1?`since :
`+s.map(E4).join(`
`):" "+E4(s[0]):"as no adapter specified";throw new ai("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:lb};function U1(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new $p(null,t)}function P4(t){return U1(t),t.headers=tu.from(t.headers),t.data=V1.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ZC.getAdapter(t.adapter||Om.adapter)(t).then(function(r){return U1(t),r.data=V1.call(t,t.transformResponse,r),r.headers=tu.from(r.headers),r},function(r){return HC(r)||(U1(t),r&&r.response&&(r.response.data=V1.call(t,t.transformResponse,r.response),r.response.headers=tu.from(r.response.headers))),Promise.reject(r)})}const XC="1.8.4",Fy={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Fy[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const M4={};Fy.transitional=function(e,n,r){function i(s,o){return"[Axios v"+XC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,a)=>{if(e===!1)throw new ai(i(o," has been removed"+(n?" in "+n:"")),ai.ERR_DEPRECATED);return n&&!M4[o]&&(M4[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,a):!0}};Fy.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function I7(t,e,n){if(typeof t!="object")throw new ai("options must be an object",ai.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const a=t[s],l=a===void 0||o(a,s,t);if(l!==!0)throw new ai("option "+s+" must be "+l,ai.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ai("Unknown option "+s,ai.ERR_BAD_OPTION)}}const tv={assertOptions:I7,validators:Fy},Bc=tv.validators;let ff=class{constructor(e){this.defaults=e,this.interceptors={request:new b4,response:new b4}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const s=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?s&&!String(r.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+s):r.stack=s}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=_f(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&tv.assertOptions(r,{silentJSONParsing:Bc.transitional(Bc.boolean),forcedJSONParsing:Bc.transitional(Bc.boolean),clarifyTimeoutError:Bc.transitional(Bc.boolean)},!1),i!=null&&(Xt.isFunction(i)?n.paramsSerializer={serialize:i}:tv.assertOptions(i,{encode:Bc.function,serialize:Bc.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),tv.assertOptions(n,{baseUrl:Bc.spelling("baseURL"),withXsrfToken:Bc.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=s&&Xt.merge(s.common,s[n.method]);s&&Xt.forEach(["delete","get","head","post","put","patch","common"],x=>{delete s[x]}),n.headers=tu.concat(o,s);const a=[];let l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,a.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let d,p=0,v;if(!l){const x=[P4.bind(this),void 0];for(x.unshift.apply(x,a),x.push.apply(x,c),v=x.length,d=Promise.resolve(n);p<v;)d=d.then(x[p++],x[p++]);return d}v=a.length;let m=n;for(p=0;p<v;){const x=a[p++],E=a[p++];try{m=x(m)}catch(A){E.call(this,A);break}}try{d=P4.call(this,m)}catch(x){return Promise.reject(x)}for(p=0,v=c.length;p<v;)d=d.then(c[p++],c[p++]);return d}getUri(e){e=_f(this.defaults,e);const n=GC(e.baseURL,e.url,e.allowAbsoluteUrls);return $C(n,e.params,e.paramsSerializer)}};Xt.forEach(["delete","get","head","options"],function(e){ff.prototype[e]=function(n,r){return this.request(_f(r||{},{method:e,url:n,data:(r||{}).data}))}});Xt.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,a){return this.request(_f(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}ff.prototype[e]=n(),ff.prototype[e+"Form"]=n(!0)});let B7=class JC{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(a=>{r.subscribe(a),s=a}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,a){r.reason||(r.reason=new $p(s,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new JC(function(i){e=i}),cancel:e}}};function R7(t){return function(n){return t.apply(null,n)}}function F7(t){return Xt.isObject(t)&&t.isAxiosError===!0}const ub={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ub).forEach(([t,e])=>{ub[e]=t});function QC(t){const e=new ff(t),n=AC(ff.prototype.request,e);return Xt.extend(n,ff.prototype,e,{allOwnKeys:!0}),Xt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return QC(_f(t,i))},n}const Go=QC(Om);Go.Axios=ff;Go.CanceledError=$p;Go.CancelToken=B7;Go.isCancel=HC;Go.VERSION=XC;Go.toFormData=By;Go.AxiosError=ai;Go.Cancel=Go.CanceledError;Go.all=function(e){return Promise.all(e)};Go.spread=R7;Go.isAxiosError=F7;Go.mergeConfig=_f;Go.AxiosHeaders=tu;Go.formToJSON=t=>UC(Xt.isHTMLForm(t)?new FormData(t):t);Go.getAdapter=ZC.getAdapter;Go.HttpStatusCode=ub;Go.default=Go;const{Axios:Loe,AxiosError:Soe,CanceledError:Coe,isCancel:Eoe,CancelToken:Poe,VERSION:Moe,all:koe,Cancel:Aoe,isAxiosError:Toe,spread:Doe,toFormData:Ooe,AxiosHeaders:Noe,HttpStatusCode:Ioe,formToJSON:Boe,getAdapter:Roe,mergeConfig:Foe}=Go,bn=ru({measures:[],longTasks:[],memorySnapshots:[],framesPerSecond:0,lastFpsUpdate:0,frameCount:0,isRecording:!1,isEnabled:!1,startTime:0,currentOperation:null,operationStack:[],operationHistory:[]});let bd=null,lf=null;const j7=1e3;function jy(){if(bn.isEnabled){bn.isRecording=!0,bn.startTime=performance.now(),bn.frameCount=0,bn.lastFpsUpdate=performance.now();try{window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes.includes("longtask")&&(bd=new PerformanceObserver(t=>{t.getEntries().forEach(n=>{bn.longTasks.push({duration:n.duration,startTime:n.startTime,name:n.name,component:Lc()})})}),bd.observe({entryTypes:["longtask"]}))}catch(t){console.warn("PerformanceObserver pour longues tâches non supporté",t)}z7(),B_()}}function $v(){bn.isRecording=!1,bd&&(bd.disconnect(),bd=null),rE()}function cb(){bd&&(bd.disconnect(),bd=null),rE(),bn.measures=[],bn.longTasks=[],bn.memorySnapshots=[],bn.operationHistory=[],bn.frameCount=0,bn.framesPerSecond=0,bn.lastFpsUpdate=0,bn.isEnabled&&jy()}function eE(t,e,n){if(!bn.isEnabled||!bn.isRecording)return()=>{};const r=performance.now(),i=bn.currentOperation;return bn.currentOperation=t,bn.operationStack.push(t),()=>{const s=performance.now()-r;bn.operationStack.pop(),bn.currentOperation=bn.operationStack[bn.operationStack.length-1]||null,bn.measures.push({name:t,startTime:r,duration:s,component:e||Lc(),info:n,parentOperation:i||void 0}),s>10&&bn.operationHistory.push({operation:t,component:e||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}async function tE(t,e,n,r){if(!bn.isEnabled||!bn.isRecording)return e();const i=performance.now(),s=bn.currentOperation;bn.currentOperation=t,bn.operationStack.push(t);try{return await e()}finally{const o=performance.now()-i;bn.operationStack.pop(),bn.currentOperation=bn.operationStack[bn.operationStack.length-1]||null,bn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&bn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function nE(t,e,n,r){if(!bn.isEnabled||!bn.isRecording)return e();const i=performance.now(),s=bn.currentOperation;bn.currentOperation=t,bn.operationStack.push(t);try{return e()}finally{const o=performance.now()-i;bn.operationStack.pop(),bn.currentOperation=bn.operationStack[bn.operationStack.length-1]||null,bn.measures.push({name:t,startTime:i,duration:o,component:n||Lc(),info:r,parentOperation:s||void 0}),o>10&&bn.operationHistory.push({operation:t,component:n||Lc()||"unknown",durationMs:o,timestamp:Date.now()})}}function B_(){!bn.isEnabled||!bn.isRecording||(performance.memory?bn.memorySnapshots.push({jsHeapSizeLimit:performance.memory.jsHeapSizeLimit,totalJSHeapSize:performance.memory.totalJSHeapSize,usedJSHeapSize:performance.memory.usedJSHeapSize,timestamp:performance.now()}):bn.memorySnapshots.push({timestamp:performance.now()}))}function z7(){lf!==null&&cancelAnimationFrame(lf),bn.frameCount=0,bn.lastFpsUpdate=performance.now();function t(){bn.frameCount++;const e=performance.now();e-bn.lastFpsUpdate>=j7&&(bn.framesPerSecond=Math.round(bn.frameCount*1e3/(e-bn.lastFpsUpdate)),bn.frameCount=0,bn.lastFpsUpdate=e),bn.isRecording&&(lf=requestAnimationFrame(t))}lf=requestAnimationFrame(t)}function rE(){lf!==null&&(cancelAnimationFrame(lf),lf=null)}function Lc(){return""}function hb(t){bn.isEnabled=t,t&&!bn.isRecording?jy():!t&&bn.isRecording&&$v()}function iE(t,e,n){return(...r)=>{if(!bn.isEnabled||!bn.isRecording)return t(...r);const i=performance.now();try{return t(...r)}finally{const s=performance.now()-i;bn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&bn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function sE(t,e,n){return async(...r)=>{if(!bn.isEnabled||!bn.isRecording)return await t(...r);const i=performance.now();try{return await t(...r)}finally{const s=performance.now()-i;bn.measures.push({name:e,startTime:i,duration:s,component:n||Lc(),info:{args:r}}),s>10&&bn.operationHistory.push({operation:e,component:n||Lc()||"unknown",durationMs:s,timestamp:Date.now()})}}}function $7(t,e){const n=bn.measures.filter(o=>o.startTime>=t&&o.startTime+o.duration<=e),r=new Map,i=[];n.forEach(o=>{o.parentOperation?(r.has(o.parentOperation)||r.set(o.parentOperation,[]),r.get(o.parentOperation).push(o)):i.push(o)});function s(o){const a=r.get(o.name)||[];return{operation:o.name,duration:o.duration,component:o.component,children:a.sort((l,c)=>c.duration-l.duration).map(l=>s(l))}}return i.sort((o,a)=>a.duration-o.duration).map(o=>s(o))}function db(t,e){const n=t||bn.startTime,r=e||performance.now(),i=$7(n,r),s=r-n,o=new Map;function a(c){const d=o.get(c.operation)||{duration:0,component:c.component};d.duration+=c.duration,o.set(c.operation,d),c.children.forEach(p=>a(p))}i.forEach(c=>a(c));const l=Array.from(o.entries()).map(([c,{duration:d,component:p}])=>({operation:c,duration:d,component:p,impact:d/s*100})).sort((c,d)=>d.impact-c.impact).slice(0,10);return{criticalPaths:i,totalTime:s,bottlenecks:l}}function Vp(){const t=Lt(!1);go(()=>{try{const r=new URL(window.location.href).searchParams.get("perf")==="true";t.value=r,hb(r),cb()}catch(n){console.warn("Erreur lors de la vérification du paramètre perf:",n),t.value=!1,hb(!1)}}),Ku(()=>{bn.isRecording&&$v()});const e=(n,r)=>{if(!bn.isEnabled||!bn.isRecording)return null;const i=bn.measures.find(c=>c.name===n&&c.startTime===r);if(!i)return null;const s=i.startTime+i.duration,o=bn.measures.filter(c=>c.startTime>=i.startTime&&c.startTime<=s&&c!==i),a=bn.longTasks.filter(c=>c.startTime>=i.startTime&&c.startTime<=s),l=bn.memorySnapshots.filter(c=>c.timestamp>=i.startTime&&c.timestamp<=s);return{operation:{name:i.name,component:i.component,startTime:i.startTime,duration:i.duration,info:i.info},context:{relatedOperations:o.map(c=>({name:c.name,component:c.component,startTime:c.startTime-i.startTime,duration:c.duration,info:c.info})),longTasks:a.map(c=>({duration:c.duration,startTime:c.startTime-i.startTime,name:c.name,component:c.component})),memorySnapshots:l.map(c=>({...c,timestamp:c.timestamp-i.startTime}))},summary:{totalRelatedOperations:o.length,totalLongTasks:a.length,maxLongTaskDuration:Math.max(...a.map(c=>c.duration),0),memoryDelta:l.length>1?(l[l.length-1].usedJSHeapSize||0)-(l[0].usedJSHeapSize||0):0}}};return{isEnabled:pc(Lt(bn.isEnabled)),isQueryParamEnabled:pc(t),isRecording:pc(Lt(bn.isRecording)),measures:pc(Lt(bn.measures)),longTasks:pc(Lt(bn.longTasks)),memorySnapshots:pc(Lt(bn.memorySnapshots)),framesPerSecond:pc(Lt(bn.framesPerSecond)),operationHistory:pc(Lt(bn.operationHistory)),startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,getOperationDetails:e,getSlowOperations:()=>!bn.isEnabled||!bn.isRecording?[]:[...bn.measures].sort((n,r)=>r.duration-n.duration).slice(0,10),getLongTasks:()=>!bn.isEnabled||!bn.isRecording?[]:[...bn.longTasks].sort((n,r)=>r.duration-n.duration),getPerformanceReport:()=>{if(!bn.isEnabled||!bn.isRecording)return null;const n=db();return{totalMeasures:bn.measures.length,totalLongTasks:bn.longTasks.length,slowestOperations:[...bn.measures].sort((r,i)=>i.duration-r.duration).slice(0,10),averageFps:bn.framesPerSecond,memoryUsage:bn.memorySnapshots.length>0?bn.memorySnapshots[bn.memorySnapshots.length-1]:null,operationsByComponent:V7(bn.measures),criticalPaths:n.criticalPaths,bottlenecks:n.bottlenecks,recordingDuration:bn.isRecording?performance.now()-bn.startTime:null}},analyzeCriticalPaths:db}}function V7(t){if(!bn.isEnabled||!bn.isRecording)return{};const e={};return t.forEach(n=>{const r=n.component||"unknown";e[r]||(e[r]={totalTime:0,callCount:0,operations:{}}),e[r].totalTime+=n.duration,e[r].callCount++,e[r].operations[n.name]||(e[r].operations[n.name]={totalTime:0,callCount:0}),e[r].operations[n.name].totalTime+=n.duration,e[r].operations[n.name].callCount++}),e}const vn={startRecording:jy,stopRecording:$v,clearRecording:cb,startMeasure:eE,measure:nE,measureAsync:tE,captureMemorySnapshot:B_,createPerformanceTracker:iE,createAsyncPerformanceTracker:sE,setEnabled:hb,analyzeCriticalPaths:db},jn=Go.create({baseURL:"/api",headers:{"Content-Type":"application/json",Accept:"application/json"},withCredentials:!0}),qr=Vp();function oE(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}jn.interceptors.request.use(async t=>{const e=qr.startMeasure("api_request_interceptor","ApiService");try{const n=oE("access_token");return n&&(t.headers.Authorization=`Bearer ${n}`),console.log("Request config:",{url:t.url,method:t.method,headers:t.headers,withCredentials:t.withCredentials}),t}finally{e()}},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));jn.interceptors.response.use(t=>t,async t=>{var r,i;const e=qr.startMeasure("api_response_interceptor","ApiService"),n=t.config;try{if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;const s=da();try{await qr.measureAsync("token_refresh",()=>s.refreshToken(),"ApiService");const o=oE("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,jn(n)}catch(o){return await s.logout(),window.location.pathname!=="/login"&&(window.location.href="/login"),Promise.reject(o)}}return Promise.reject(t)}finally{e()}});function U7(t){var n;const e=[];if((n=t.response)!=null&&n.data){const r=t.response.data;typeof r=="object"&&!Array.isArray(r)?Object.entries(r).forEach(([i,s])=>{Array.isArray(s)?s.forEach(o=>{e.push({field:i,message:o})}):typeof s=="string"&&e.push({field:i,message:s})}):typeof r=="string"?e.push({field:"non_field_error",message:r}):r.detail&&e.push({field:"non_field_error",message:r.detail})}else t.message&&e.push({field:"non_field_error",message:`Erreur de connexion: ${t.message}`});return e.length===0&&e.push({field:"non_field_error",message:"Une erreur inconnue s'est produite"}),e}async function nv(t){console.log("[fetchUsersByHierarchy] Récupération des utilisateurs:",t);const e={role:t.role};t.entrepriseId&&(e.entreprise=t.entrepriseId),t.salarieId&&(e.salarie=t.salarieId),t.includeDetails&&(e.include_plans=!0),t.search&&(e.search=t.search),console.log("[fetchUsersByHierarchy] Filtres appliqués:",e);try{const n=await Ml.getUsers(e);return console.log(`[fetchUsersByHierarchy] Résultat (${n.data.length} utilisateurs):`,n.data),n.data}catch(n){throw console.error("[fetchUsersByHierarchy] Erreur lors de la récupération des utilisateurs:",n),n}}const Ml={async getUsers(t={}){const e=qr.startMeasure("get_users","UserService");try{return await qr.measureAsync("get_users_request",()=>jn.get("/users/",{params:t}),"UserService")}finally{e()}},async getUser(t){return await jn.get(`/users/${t}/`)},async createUser(t){return await jn.post("/users/",t)},async updateUser(t,e){return await jn.patch(`/users/${t}/`,e)},async deleteUser(t){return await jn.delete(`/users/${t}/`)},async getEntreprises(){return await jn.get("/users/",{params:{role:"ENTREPRISE"}})},async getSalaries(t){const e={role:"SALARIE"};return t&&(e.entreprise=t),await jn.get("/users/",{params:e})},async getSalarieVisiteurs(t){return await jn.get("/users/",{params:{role:"VISITEUR",salarie:t}})},async getEntrepriseVisiteurs(t){return await jn.get("/users/",{params:{role:"VISITEUR",entreprise:t}})},async getUsersByHierarchy(t){const e=qr.startMeasure("get_users_hierarchy","UserService");try{const n=qr.measure("prepare_hierarchy_filters",()=>{const r={role:t.role};return t.entrepriseId&&(r.entreprise=t.entrepriseId),t.salarieId&&(r.salarie=t.salarieId),t.includeDetails&&(r.include_plans=!0),t.search&&(r.search=t.search),r},"UserService");return await qr.measureAsync("get_users_hierarchy_request",()=>jn.get("/users/",{params:n}),"UserService")}finally{e()}},async getEntrepriseSalaries(t){return await jn.get("/users/",{params:{role:"SALARIE",entreprise:t}})},async getVisiteurs(t,e){const n={role:"VISITEUR"};return t&&(n.salarie=t),e&&(n.entreprise=e),await jn.get("/users/",{params:n})},async assignEntrepriseToSalarie(t,e){return await jn.patch(`/users/${t}/`,{entreprise:e})},async assignSalarieToVisiteur(t,e){return await jn.patch(`/users/${t}/`,{salarie:e})},formatLogoFileName(t){return qr.measure("format_logo_filename",()=>{var i;const e=new Date().getTime(),n=((i=t.name.split(".").pop())==null?void 0:i.toLowerCase())||"";return`${t.name.split(".")[0].toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}-${e}.${n}`},"UserService")},async uploadLogo(t){const e=qr.startMeasure("upload_logo","UserService");try{const n=new FormData,r=this.formatLogoFileName(t),i=new File([t],r,{type:t.type});return n.append("logo",i),await qr.measureAsync("upload_logo_request",()=>jn.post("/users/upload_logo/",n,{headers:{"Content-Type":"multipart/form-data"}}),"UserService")}finally{e()}}};async function H1(t,e=3,n=1e3,r=1e4){let i=0;for(;;)try{return await t()}catch(s){if(i++,i>=e)throw s;const o=Math.min(n*Math.pow(2,i-1),r),a=Math.random()*200;console.log(`Tentative ${i}/${e} échouée, nouvelle tentative dans ${o+a}ms`),await new Promise(l=>setTimeout(l,o+a))}}const b0={async getPlans(){const t=qr.startMeasure("get_plans","IrrigationService");try{return await qr.measureAsync("get_plans_request",()=>jn.get("/plans/"),"IrrigationService")}finally{t()}},async createPlan(t){const e=qr.startMeasure("create_plan","IrrigationService");try{const n=qr.measure("format_plan_data",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationService");return await qr.measureAsync("create_plan_request",()=>jn.post("/plans/",n),"IrrigationService")}finally{e()}},async updatePlan(t,e){const n=qr.startMeasure("update_plan","IrrigationService");try{return await qr.measureAsync("update_plan_request",()=>jn.put(`/plans/${t}/`,e),"IrrigationService")}finally{n()}},async deletePlan(t){const e=qr.startMeasure("delete_plan","IrrigationService");try{return await qr.measureAsync("delete_plan_request",()=>jn.delete(`/plans/${t}/`),"IrrigationService")}finally{e()}},async getVisiteurPlans(t){return await jn.get("/plans/",{params:{visiteur:t}})},async createPlanForVisiteur(t){return await jn.post("/plans/",t)},async getEntreprisePlans(t){return await jn.get("/plans/",{params:{entreprise:t}})},async getSalariePlans(t){return await jn.get("/plans/",{params:{salarie:t}})},async createPlanForSalarie(t,e){const n={...t,salarie:e};return await jn.post("/plans/",n)},async createPlanForEntreprise(t,e){const n={...t,entreprise:e};return await jn.post("/plans/",n)}},Sa={async getNotes(t={}){const e=qr.startMeasure("get_notes","NoteService");try{return await qr.measureAsync("get_notes_request",()=>jn.get("/notes/",{params:t}),"NoteService")}finally{e()}},async getNotesByPlan(t){const e=qr.startMeasure("get_notes_by_plan","NoteService");try{return await qr.measureAsync("get_notes_by_plan_request",()=>jn.get("/notes/",{params:{plan:t}}),"NoteService")}finally{e()}},async getNote(t){const e=qr.startMeasure("get_note","NoteService");try{return await qr.measureAsync("get_note_request",()=>jn.get(`/notes/${t}/`),"NoteService")}finally{e()}},async createNote(t){const e=qr.startMeasure("create_note","NoteService");try{const n={...t};return n.location&&Object.keys(n.location).length===0&&delete n.location,await qr.measureAsync("create_note_request",()=>jn.post("/notes/",n),"NoteService")}finally{e()}},async updateNote(t,e){console.log("[noteService][updateNote] Mise à jour de la note:",{noteId:t,noteData:e});const n=qr.startMeasure("update_note","NoteService");try{const r={...e};r.location&&Object.keys(r.location).length===0&&delete r.location,e.column!==void 0?r.column=e.column:e.columnId!==void 0&&(r.column=e.columnId),delete r.columnId,delete r.column_id,delete r.column_details,console.log("[noteService][updateNote] Données formatées:",r);const i=await qr.measureAsync("update_note_request",()=>jn.patch(`/notes/${t}/`,r),"NoteService");return console.log("[noteService][updateNote] Réponse du serveur:",i.data),i}catch(r){throw console.error("[noteService][updateNote] Erreur lors de la mise à jour:",r),r}finally{n()}},async deleteNote(t){const e=qr.startMeasure("delete_note","NoteService");try{return await qr.measureAsync("delete_note_request",()=>jn.delete(`/notes/${t}/`),"NoteService")}finally{e()}},async getComments(t){return await jn.get(`/notes/${t}/comments/`)},async addComment(t,e){const n=typeof e=="string"?{text:e}:e;return console.log(`[noteService][addComment] Envoi du commentaire pour la note ${t}:`,n),await jn.post(`/notes/${t}/comments/`,n)},async updateComment(t,e,n){return await jn.patch(`/notes/${t}/comments/${e}/`,n)},async deleteComment(t,e){return await jn.delete(`/notes/${t}/comments/${e}/`)},async getPhotos(t){return await jn.get(`/notes/${t}/photos/`)},async addPhoto(t,e){return await jn.post(`/notes/${t}/photos/`,e,{headers:{"Content-Type":"multipart/form-data"}})},async updatePhoto(t,e,n){return await jn.patch(`/notes/${t}/photos/${e}/`,n)},async deletePhoto(t,e){return await jn.delete(`/notes/${t}/photos/${e}/`)}},W1={async getDevices(t={}){const e=qr.startMeasure("get_weather_devices","WeatherService");try{return await H1(()=>jn.get("/weather/devices/",{params:t}),3,1e3,1e4)}finally{e()}},async getRealTimeData(t){const e=qr.startMeasure("get_weather_data","WeatherService");try{const n=typeof t=="string"?{mac:t}:t;return await H1(()=>jn.get("/weather/",{params:n}),3,1e3,1e4)}finally{e()}},async getHistoryData(t){const e=qr.startMeasure("get_history_data","WeatherService");try{return await H1(()=>jn.get("/weather/history/",{params:t}),3,1e3,1e4)}finally{e()}}},_0={async getFilters(){const t=qr.startMeasure("get_map_filters","MapFilterService");try{return await qr.measureAsync("get_map_filters_request",()=>jn.get("/map-filters/"),"MapFilterService")}finally{t()}},async getFilter(t){const e=qr.startMeasure("get_map_filter","MapFilterService");try{return await qr.measureAsync("get_map_filter_request",()=>jn.get(`/map-filters/${t}/`),"MapFilterService")}finally{e()}},async createFilter(t){const e=qr.startMeasure("create_map_filter","MapFilterService");try{return await qr.measureAsync("create_map_filter_request",()=>jn.post("/map-filters/",t),"MapFilterService")}finally{e()}},async updateFilter(t,e){const n=qr.startMeasure("update_map_filter","MapFilterService");try{return await qr.measureAsync("update_map_filter_request",()=>jn.patch(`/map-filters/${t}/`,e),"MapFilterService")}finally{n()}},async deleteFilter(t){const e=qr.startMeasure("delete_map_filter","MapFilterService");try{return await qr.measureAsync("delete_map_filter_request",()=>jn.delete(`/map-filters/${t}/`),"MapFilterService")}finally{e()}}};jn.defaults.baseURL="/api";jn.defaults.headers.common["Content-Type"]="application/json";jn.defaults.withCredentials=!0;function gm(t){var r;const n=`; ${document.cookie}`.split(`; ${t}=`);return n.length===2&&((r=n.pop())==null?void 0:r.split(";").shift())||null}jn.interceptors.request.use(t=>{const e=gm("access_token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>(console.error("Request interceptor error:",t),Promise.reject(t)));jn.interceptors.response.use(t=>t,async t=>{var r,i;const e=da(),n=t.config;if(((r=t.response)==null?void 0:r.status)===401&&!n._retry&&!((i=n.url)!=null&&i.includes("/token/refresh/"))){n._retry=!0;try{if(!gm("access_token"))throw new Error("No token available");await e.refreshToken();const o=gm("access_token");if(o)return n.headers.Authorization=`Bearer ${o}`,jn(n)}catch(s){console.error("Token refresh failed:",s),await e.logout(),window.location.pathname!=="/login"&&(window.location.href="/login")}}return Promise.reject(t)});function H7(t,e,n=1){const r=new Date;r.setTime(r.getTime()+n*24*60*60*1e3);const i=`expires=${r.toUTCString()}`;document.cookie=`${t}=${e};${i};path=/;secure;samesite=Strict`}function xu(t){if(!t)return"-";const e=t.first_name||"",n=t.last_name?t.last_name.toUpperCase():"",r=`${e} ${n}`.trim(),i=t.company_name||t.role||"";return!r&&!i?"-":r?i?`${r} (${i})`:r:`(${i})`}function W7(t="",e=""){return`${(t==null?void 0:t.charAt(0))||""}${(e==null?void 0:e.charAt(0))||""}`.toUpperCase()}const G7={ADMIN:"Administrateur",ENTREPRISE:"Entreprise",SALARIE:"Salarie",VISITEUR:"Visiteur"};function q7(t){return G7[t]||t}function Y7(){return"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"}function K7(t){return t?"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800":"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800"}async function Z7({role:t,entrepriseId:e,salarieId:n,includeDetails:r=!1}){const i={role:t};return e&&(i.entreprise=e),n&&(i.salarie=n),r&&(i.include_plans=!0),(await Ml.getUsers(i)).data}const da=jp("auth",{state:()=>({user:null,isAuthenticated:!1,mustChangePassword:!1,initialized:!1,loading:!1,error:null,enterprises:[],employees:[],visitors:[]}),getters:{isAdmin:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="admin"},isEntreprise:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="entreprise"},isSalarie:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="salarie"},isVisiteur:t=>{var e;return((e=t.user)==null?void 0:e.user_type)==="visiteur"},currentUser:t=>t.user,hasEnterprise:t=>{var e;return!!((e=t.user)!=null&&e.enterprise_id)},hasEmployee:t=>{var e;return!!((e=t.user)!=null&&e.employee_id)}},actions:{async initialize(t){if(!t){const n=await this.restoreSession();return this.initialized=!0,n}if(t.isAuthenticated&&t.user)return this.user=t.user,this.isAuthenticated=!0,this.mustChangePassword=t.user.must_change_password||!1,this.initialized=!0,!0;const e=await this.restoreSession();return this.initialized=!0,e},async restoreSession(){try{if(!gm("access_token"))return this.isAuthenticated=!1,this.user=null,!1;const e=await jn.post("/token/refresh/");return e.data.user?(this.user=e.data.user,this.isAuthenticated=!0,this.mustChangePassword=e.data.user.must_change_password||!1,!0):(await this.fetchUserProfile(),!0)}catch(t){return console.error("Failed to restore session:",t),this.isAuthenticated=!1,this.user=null,!1}},async login(t,e){var n,r,i;try{const s=await jn.post("/token/",{username:t,password:e});if(!s.data.access)throw new Error("Token d'accès non reçu");document.cookie=`access_token=${s.data.access}; path=/; secure; samesite=Strict`;const o=await this.fetchUserProfile();return this.user=o,this.isAuthenticated=!0,!0}catch(s){throw this.isAuthenticated=!1,this.user=null,((n=s.response)==null?void 0:n.status)===401?new Error("Identifiants incorrects"):(i=(r=s.response)==null?void 0:r.data)!=null&&i.detail?new Error(s.response.data.detail):s}},async logout(){this.user=null,this.isAuthenticated=!1,this.mustChangePassword=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT"},async checkAuth(){try{return await this.fetchUserProfile(),!0}catch{return this.isAuthenticated=!1,this.user=null,!1}},async fetchUserProfile(){try{const t=await jn.get("/users/me/");return this.user=t.data,this.isAuthenticated=!0,this.mustChangePassword=t.data.must_change_password||!1,t.data}catch(t){throw this.isAuthenticated=!1,this.user=null,t}},async changePassword(t,e){try{const n=await jn.post("/users/change_password/",{old_password:t,password:e});return this.user={...this.user,must_change_password:!1},n.data}catch(n){throw console.error("Password change error:",n),n}},async refreshToken(){var t,e;try{if(!gm("refresh_token"))throw new Error("No refresh token available");const r=await jn.post("/token/refresh/",{},{withCredentials:!0,_retry:!0}),{access:i}=r.data;if(!i)throw new Error("No access token received");return H7("access_token",i,1),this.isAuthenticated=!0,i}catch(n){throw console.error("Error refreshing token:",{status:(t=n.response)==null?void 0:t.status,data:(e=n.response)==null?void 0:e.data}),this.isAuthenticated=!1,document.cookie="access_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",document.cookie="refresh_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",n}},async fetchUsers(t={}){this.loading=!0;try{return(await Ml.getUsers(t)).data}catch(e){throw this.error="Erreur lors de la récupération des utilisateurs",e}finally{this.loading=!1}},async fetchEnterprises(){this.loading=!0;try{const t=await Ml.getUsers({role:"ENTREPRISE"});return this.enterprises=t.data,this.enterprises}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async fetchEnterpriseEmployees(t){this.loading=!0;try{const e=await Ml.getUsers({role:"SALARIE",entreprise:t});return this.employees=e.data,this.employees}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchEnterpriseVisitors(t){this.loading=!0;try{const e=await Ml.getUsers({role:"VISITEUR",entreprise:t});return this.visitors=e.data,this.visitors}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}},async createUser(t){this.loading=!0;try{return(await Ml.createUser(t)).data}catch(e){throw this.error="Erreur lors de la création de l'utilisateur",e}finally{this.loading=!1}},async updateUser(t,e){this.loading=!0;try{return(await Ml.updateUser(t,e)).data}catch(n){throw this.error="Erreur lors de la mise à jour de l'utilisateur",n}finally{this.loading=!1}},async deleteUser(t){this.loading=!0;try{return await Ml.deleteUser(t),!0}catch(e){throw this.error="Erreur lors de la suppression de l'utilisateur",e}finally{this.loading=!1}},async fetchEnterprisesLegacy(){this.loading=!0;try{const t=await jn.get("/users/",{params:{role:"entreprise"}});this.enterprises=t.data}catch(t){throw this.error="Erreur lors de la récupération des entreprises",t}finally{this.loading=!1}},async setEnterprise(t,e){this.loading=!0;try{await jn.patch(`/users/${t}/`,{enterprise:e}),this.user&&this.user.id===t&&(this.user.enterprise_id=e)}catch(n){throw this.error="Erreur lors de la mise à jour de l'entreprise",n}finally{this.loading=!1}},async updateUserRole(t,e){this.loading=!0;try{const n=await jn.patch(`/users/${t}/`,{role:e});return this.user&&this.user.id===t&&(this.user.user_type=e),n.data}catch(n){throw this.error="Erreur lors de la mise à jour du rôle",n}finally{this.loading=!1}},async updateUserEmail(t){var e;this.loading=!0;try{const n=await jn.patch(`/users/${(e=this.user)==null?void 0:e.id}/`,{email:t});return this.user&&(this.user.email=t),n.data}catch(n){throw this.error="Erreur lors de la mise à jour de l'email",n}finally{this.loading=!1}},async uploadLogo(t){this.loading=!0;try{const e=await Ml.uploadLogo(t);return this.user&&e.data.logo&&(this.user.logo=e.data.logo),e.data}catch(e){throw this.error="Erreur lors du téléversement du logo",e}finally{this.loading=!1}},checkAccess(t){return this.user?t.includes(this.user.user_type):!1},async fetchUsersByRole(t){this.loading=!0;try{return await Z7(t)}catch(e){throw console.error(`Error fetching ${t.role}:`,e),e}finally{this.loading=!1}},async fetchEntrepriseSalaries(t){this.loading=!0;try{return(await Ml.getUsers({role:"SALARIE",entreprise:t})).data}catch(e){throw this.error="Erreur lors de la récupération des salaries",e}finally{this.loading=!1}},async fetchSalarieVisiteurs(t){this.loading=!0;try{return(await Ml.getUsers({role:"VISITEUR",salarie:t})).data}catch(e){throw this.error="Erreur lors de la récupération des visiteurs",e}finally{this.loading=!1}}}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const sp=typeof document<"u";function aE(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function X7(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&aE(t.default)}const os=Object.assign;function G1(t,e){const n={};for(const r in e){const i=e[r];n[r]=Sc(i)?i.map(t):t(i)}return n}const Ug=()=>{},Sc=Array.isArray,lE=/#/g,J7=/&/g,Q7=/\//g,eB=/=/g,tB=/\?/g,uE=/\+/g,nB=/%5B/g,rB=/%5D/g,cE=/%5E/g,iB=/%60/g,hE=/%7B/g,sB=/%7C/g,dE=/%7D/g,oB=/%20/g;function R_(t){return encodeURI(""+t).replace(sB,"|").replace(nB,"[").replace(rB,"]")}function aB(t){return R_(t).replace(hE,"{").replace(dE,"}").replace(cE,"^")}function fb(t){return R_(t).replace(uE,"%2B").replace(oB,"+").replace(lE,"%23").replace(J7,"%26").replace(iB,"`").replace(hE,"{").replace(dE,"}").replace(cE,"^")}function lB(t){return fb(t).replace(eB,"%3D")}function uB(t){return R_(t).replace(lE,"%23").replace(tB,"%3F")}function cB(t){return t==null?"":uB(t).replace(Q7,"%2F")}function mm(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const hB=/\/$/,dB=t=>t.replace(hB,"");function q1(t,e,n="/"){let r,i={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),i=t(s)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=mB(r??e,n),{fullPath:r+(s&&"?")+s+o,path:r,query:i,hash:mm(o)}}function fB(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function k4(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function pB(t,e,n){const r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&Mp(e.matched[r],n.matched[i])&&fE(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Mp(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function fE(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!gB(t[n],e[n]))return!1;return!0}function gB(t,e){return Sc(t)?A4(t,e):Sc(e)?A4(e,t):t===e}function A4(t,e){return Sc(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function mB(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),i=r[r.length-1];(i===".."||i===".")&&r.push("");let s=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")s>1&&s--;else break;return n.slice(0,s).join("/")+"/"+r.slice(o).join("/")}const Zh={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vm;(function(t){t.pop="pop",t.push="push"})(vm||(vm={}));var Hg;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Hg||(Hg={}));function vB(t){if(!t)if(sp){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),dB(t)}const yB=/^[^#]+#/;function bB(t,e){return t.replace(yB,"#")+e}function _B(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const zy=()=>({left:window.scrollX,top:window.scrollY});function wB(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),i=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=_B(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function T4(t,e){return(history.state?history.state.position-e:-1)+t}const pb=new Map;function xB(t,e){pb.set(t,e)}function LB(t){const e=pb.get(t);return pb.delete(t),e}let SB=()=>location.protocol+"//"+location.host;function pE(t,e){const{pathname:n,search:r,hash:i}=e,s=t.indexOf("#");if(s>-1){let a=i.includes(t.slice(s))?t.slice(s).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),k4(l,"")}return k4(n,t)+r+i}function CB(t,e,n,r){let i=[],s=[],o=null;const a=({state:v})=>{const m=pE(t,location),x=n.value,E=e.value;let A=0;if(v){if(n.value=m,e.value=v,o&&o===x){o=null;return}A=E?v.position-E.position:0}else r(m);i.forEach(k=>{k(n.value,x,{delta:A,type:vm.pop,direction:A?A>0?Hg.forward:Hg.back:Hg.unknown})})};function l(){o=n.value}function c(v){i.push(v);const m=()=>{const x=i.indexOf(v);x>-1&&i.splice(x,1)};return s.push(m),m}function d(){const{history:v}=window;v.state&&v.replaceState(os({},v.state,{scroll:zy()}),"")}function p(){for(const v of s)v();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:l,listen:c,destroy:p}}function D4(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?zy():null}}function EB(t){const{history:e,location:n}=window,r={value:pE(t,n)},i={value:e.state};i.value||s(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,d){const p=t.indexOf("#"),v=p>-1?(n.host&&document.querySelector("base")?t:t.slice(p))+l:SB()+t+l;try{e[d?"replaceState":"pushState"](c,"",v),i.value=c}catch(m){console.error(m),n[d?"replace":"assign"](v)}}function o(l,c){const d=os({},e.state,D4(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});s(l,d,!0),r.value=l}function a(l,c){const d=os({},i.value,e.state,{forward:l,scroll:zy()});s(d.current,d,!0);const p=os({},D4(r.value,l,null),{position:d.position+1},c);s(l,p,!1),r.value=l}return{location:r,state:i,push:a,replace:o}}function PB(t){t=vB(t);const e=EB(t),n=CB(t,e.state,e.location,e.replace);function r(s,o=!0){o||n.pauseListeners(),history.go(s)}const i=os({location:"",base:t,go:r,createHref:bB.bind(null,t)},e,n);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function MB(t){return typeof t=="string"||t&&typeof t=="object"}function gE(t){return typeof t=="string"||typeof t=="symbol"}const mE=Symbol("");var O4;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(O4||(O4={}));function kp(t,e){return os(new Error,{type:t,[mE]:!0},e)}function vh(t,e){return t instanceof Error&&mE in t&&(e==null||!!(t.type&e))}const N4="[^/]+?",kB={sensitive:!1,strict:!1,start:!0,end:!0},AB=/[.+*?^${}()[\]/\\]/g;function TB(t,e){const n=os({},kB,e),r=[];let i=n.start?"^":"";const s=[];for(const c of t){const d=c.length?[]:[90];n.strict&&!c.length&&(i+="/");for(let p=0;p<c.length;p++){const v=c[p];let m=40+(n.sensitive?.25:0);if(v.type===0)p||(i+="/"),i+=v.value.replace(AB,"\\$&"),m+=40;else if(v.type===1){const{value:x,repeatable:E,optional:A,regexp:k}=v;s.push({name:x,repeatable:E,optional:A});const D=k||N4;if(D!==N4){m+=10;try{new RegExp(`(${D})`)}catch(Y){throw new Error(`Invalid custom RegExp for param "${x}" (${D}): `+Y.message)}}let $=E?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;p||($=A&&c.length<2?`(?:/${$})`:"/"+$),A&&($+="?"),i+=$,m+=20,A&&(m+=-8),E&&(m+=-20),D===".*"&&(m+=-50)}d.push(m)}r.push(d)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,n.sensitive?"":"i");function a(c){const d=c.match(o),p={};if(!d)return null;for(let v=1;v<d.length;v++){const m=d[v]||"",x=s[v-1];p[x.name]=m&&x.repeatable?m.split("/"):m}return p}function l(c){let d="",p=!1;for(const v of t){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const m of v)if(m.type===0)d+=m.value;else if(m.type===1){const{value:x,repeatable:E,optional:A}=m,k=x in c?c[x]:"";if(Sc(k)&&!E)throw new Error(`Provided param "${x}" is an array but it is not repeatable (* or + modifiers)`);const D=Sc(k)?k.join("/"):k;if(!D)if(A)v.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${x}"`);d+=D}}return d||"/"}return{re:o,score:r,keys:s,parse:a,stringify:l}}function DB(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function vE(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const s=DB(r[n],i[n]);if(s)return s;n++}if(Math.abs(i.length-r.length)===1){if(I4(r))return 1;if(I4(i))return-1}return i.length-r.length}function I4(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const OB={type:0,value:""},NB=/[a-zA-Z0-9_]/;function IB(t){if(!t)return[[]];if(t==="/")return[[OB]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(m){throw new Error(`ERR (${n})/"${c}": ${m}`)}let n=0,r=n;const i=[];let s;function o(){s&&i.push(s),s=[]}let a=0,l,c="",d="";function p(){c&&(n===0?s.push({type:0,value:c}):n===1||n===2||n===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:d,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function v(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&p(),o()):l===":"?(p(),n=1):v();break;case 4:v(),n=r;break;case 1:l==="("?n=2:NB.test(l)?v():(p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+l:n=3:d+=l;break;case 3:p(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,d="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),p(),o(),i}function BB(t,e,n){const r=TB(IB(t.path),n),i=os(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function RB(t,e){const n=[],r=new Map;e=j4({strict:!1,end:!0,sensitive:!1},e);function i(p){return r.get(p)}function s(p,v,m){const x=!m,E=R4(p);E.aliasOf=m&&m.record;const A=j4(e,p),k=[E];if("alias"in p){const Y=typeof p.alias=="string"?[p.alias]:p.alias;for(const te of Y)k.push(R4(os({},E,{components:m?m.record.components:E.components,path:te,aliasOf:m?m.record:E})))}let D,$;for(const Y of k){const{path:te}=Y;if(v&&te[0]!=="/"){const me=v.record.path,pe=me[me.length-1]==="/"?"":"/";Y.path=v.record.path+(te&&pe+te)}if(D=BB(Y,v,A),m?m.alias.push(D):($=$||D,$!==D&&$.alias.push(D),x&&p.name&&!F4(D)&&o(p.name)),yE(D)&&l(D),E.children){const me=E.children;for(let pe=0;pe<me.length;pe++)s(me[pe],D,m&&m.children[pe])}m=m||D}return $?()=>{o($)}:Ug}function o(p){if(gE(p)){const v=r.get(p);v&&(r.delete(p),n.splice(n.indexOf(v),1),v.children.forEach(o),v.alias.forEach(o))}else{const v=n.indexOf(p);v>-1&&(n.splice(v,1),p.record.name&&r.delete(p.record.name),p.children.forEach(o),p.alias.forEach(o))}}function a(){return n}function l(p){const v=zB(p,n);n.splice(v,0,p),p.record.name&&!F4(p)&&r.set(p.record.name,p)}function c(p,v){let m,x={},E,A;if("name"in p&&p.name){if(m=r.get(p.name),!m)throw kp(1,{location:p});A=m.record.name,x=os(B4(v.params,m.keys.filter($=>!$.optional).concat(m.parent?m.parent.keys.filter($=>$.optional):[]).map($=>$.name)),p.params&&B4(p.params,m.keys.map($=>$.name))),E=m.stringify(x)}else if(p.path!=null)E=p.path,m=n.find($=>$.re.test(E)),m&&(x=m.parse(E),A=m.record.name);else{if(m=v.name?r.get(v.name):n.find($=>$.re.test(v.path)),!m)throw kp(1,{location:p,currentLocation:v});A=m.record.name,x=os({},v.params,p.params),E=m.stringify(x)}const k=[];let D=m;for(;D;)k.unshift(D.record),D=D.parent;return{name:A,path:E,params:x,matched:k,meta:jB(k)}}t.forEach(p=>s(p));function d(){n.length=0,r.clear()}return{addRoute:s,resolve:c,removeRoute:o,clearRoutes:d,getRoutes:a,getRecordMatcher:i}}function B4(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function R4(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:FB(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function FB(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function F4(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function jB(t){return t.reduce((e,n)=>os(e,n.meta),{})}function j4(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function zB(t,e){let n=0,r=e.length;for(;n!==r;){const s=n+r>>1;vE(t,e[s])<0?r=s:n=s+1}const i=$B(t);return i&&(r=e.lastIndexOf(i,r-1)),r}function $B(t){let e=t;for(;e=e.parent;)if(yE(e)&&vE(t,e)===0)return e}function yE({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function VB(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let i=0;i<r.length;++i){const s=r[i].replace(uE," "),o=s.indexOf("="),a=mm(o<0?s:s.slice(0,o)),l=o<0?null:mm(s.slice(o+1));if(a in e){let c=e[a];Sc(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function z4(t){let e="";for(let n in t){const r=t[n];if(n=lB(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Sc(r)?r.map(s=>s&&fb(s)):[r&&fb(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function UB(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Sc(r)?r.map(i=>i==null?null:""+i):r==null?r:""+r)}return e}const HB=Symbol(""),$4=Symbol(""),$y=Symbol(""),F_=Symbol(""),gb=Symbol("");function tg(){let t=[];function e(r){return t.push(r),()=>{const i=t.indexOf(r);i>-1&&t.splice(i,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function ad(t,e,n,r,i,s=o=>o()){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=v=>{v===!1?l(kp(4,{from:n,to:e})):v instanceof Error?l(v):MB(v)?l(kp(2,{from:e,to:v})):(o&&r.enterCallbacks[i]===o&&typeof v=="function"&&o.push(v),a())},d=s(()=>t.call(r&&r.instances[i],e,n,c));let p=Promise.resolve(d);t.length<3&&(p=p.then(c)),p.catch(v=>l(v))})}function Y1(t,e,n,r,i=s=>s()){const s=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(aE(l)){const d=(l.__vccOpts||l)[e];d&&s.push(ad(d,n,r,o,a,i))}else{let c=l();s.push(()=>c.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const p=X7(d)?d.default:d;o.mods[a]=d,o.components[a]=p;const m=(p.__vccOpts||p)[e];return m&&ad(m,n,r,o,a,i)()}))}}return s}function V4(t){const e=Cu($y),n=Cu(F_),r=Zn(()=>{const l=Xn(t.to);return e.resolve(l)}),i=Zn(()=>{const{matched:l}=r.value,{length:c}=l,d=l[c-1],p=n.matched;if(!d||!p.length)return-1;const v=p.findIndex(Mp.bind(null,d));if(v>-1)return v;const m=U4(l[c-2]);return c>1&&U4(d)===m&&p[p.length-1].path!==m?p.findIndex(Mp.bind(null,l[c-2])):v}),s=Zn(()=>i.value>-1&&YB(n.params,r.value.params)),o=Zn(()=>i.value>-1&&i.value===n.matched.length-1&&fE(n.params,r.value.params));function a(l={}){if(qB(l)){const c=e[Xn(t.replace)?"replace":"push"](Xn(t.to)).catch(Ug);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Zn(()=>r.value.href),isActive:s,isExactActive:o,navigate:a}}function WB(t){return t.length===1?t[0]:t}const GB=$s({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:V4,setup(t,{slots:e}){const n=ru(V4(t)),{options:r}=Cu($y),i=Zn(()=>({[H4(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[H4(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const s=e.default&&WB(e.default(n));return t.custom?s:ky("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},s)}}}),_g=GB;function qB(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function YB(t,e){for(const n in e){const r=e[n],i=t[n];if(typeof r=="string"){if(r!==i)return!1}else if(!Sc(i)||i.length!==r.length||r.some((s,o)=>s!==i[o]))return!1}return!0}function U4(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const H4=(t,e,n)=>t??e??n,KB=$s({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Cu(gb),i=Zn(()=>t.route||r.value),s=Cu($4,0),o=Zn(()=>{let c=Xn(s);const{matched:d}=i.value;let p;for(;(p=d[c])&&!p.components;)c++;return c}),a=Zn(()=>i.value.matched[o.value]);jg($4,Zn(()=>o.value+1)),jg(HB,a),jg(gb,i);const l=Lt();return Ri(()=>[l.value,a.value,t.name],([c,d,p],[v,m,x])=>{d&&(d.instances[p]=c,m&&m!==d&&c&&c===v&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),c&&d&&(!m||!Mp(d,m)||!v)&&(d.enterCallbacks[p]||[]).forEach(E=>E(c))},{flush:"post"}),()=>{const c=i.value,d=t.name,p=a.value,v=p&&p.components[d];if(!v)return W4(n.default,{Component:v,route:c});const m=p.props[d],x=m?m===!0?c.params:typeof m=="function"?m(c):m:null,A=ky(v,os({},x,e,{onVnodeUnmounted:k=>{k.component.isUnmounted&&(p.instances[d]=null)},ref:l}));return W4(n.default,{Component:A,route:c})||A}}});function W4(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const bE=KB;function ZB(t){const e=RB(t.routes,t),n=t.parseQuery||VB,r=t.stringifyQuery||z4,i=t.history,s=tg(),o=tg(),a=tg(),l=v_(Zh);let c=Zh;sp&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=G1.bind(null,ve=>""+ve),p=G1.bind(null,cB),v=G1.bind(null,mm);function m(ve,ee){let J,Oe;return gE(ve)?(J=e.getRecordMatcher(ve),Oe=ee):Oe=ve,e.addRoute(Oe,J)}function x(ve){const ee=e.getRecordMatcher(ve);ee&&e.removeRoute(ee)}function E(){return e.getRoutes().map(ve=>ve.record)}function A(ve){return!!e.getRecordMatcher(ve)}function k(ve,ee){if(ee=os({},ee||l.value),typeof ve=="string"){const Q=q1(n,ve,ee.path),ie=e.resolve({path:Q.path},ee),fe=i.createHref(Q.fullPath);return os(Q,ie,{params:v(ie.params),hash:mm(Q.hash),redirectedFrom:void 0,href:fe})}let J;if(ve.path!=null)J=os({},ve,{path:q1(n,ve.path,ee.path).path});else{const Q=os({},ve.params);for(const ie in Q)Q[ie]==null&&delete Q[ie];J=os({},ve,{params:p(Q)}),ee.params=p(ee.params)}const Oe=e.resolve(J,ee),Te=ve.hash||"";Oe.params=d(v(Oe.params));const Ye=fB(r,os({},ve,{hash:aB(Te),path:Oe.path})),ge=i.createHref(Ye);return os({fullPath:Ye,hash:Te,query:r===z4?UB(ve.query):ve.query||{}},Oe,{redirectedFrom:void 0,href:ge})}function D(ve){return typeof ve=="string"?q1(n,ve,l.value.path):os({},ve)}function $(ve,ee){if(c!==ve)return kp(8,{from:ee,to:ve})}function Y(ve){return pe(ve)}function te(ve){return Y(os(D(ve),{replace:!0}))}function me(ve){const ee=ve.matched[ve.matched.length-1];if(ee&&ee.redirect){const{redirect:J}=ee;let Oe=typeof J=="function"?J(ve):J;return typeof Oe=="string"&&(Oe=Oe.includes("?")||Oe.includes("#")?Oe=D(Oe):{path:Oe},Oe.params={}),os({query:ve.query,hash:ve.hash,params:Oe.path!=null?{}:ve.params},Oe)}}function pe(ve,ee){const J=c=k(ve),Oe=l.value,Te=ve.state,Ye=ve.force,ge=ve.replace===!0,Q=me(J);if(Q)return pe(os(D(Q),{state:typeof Q=="object"?os({},Te,Q.state):Te,force:Ye,replace:ge}),ee||J);const ie=J;ie.redirectedFrom=ee;let fe;return!Ye&&pB(r,Oe,J)&&(fe=kp(16,{to:ie,from:Oe}),De(Oe,Oe,!0,!1)),(fe?Promise.resolve(fe):K(ie,Oe)).catch(Se=>vh(Se)?vh(Se,2)?Se:Ce(Se):oe(Se,ie,Oe)).then(Se=>{if(Se){if(vh(Se,2))return pe(os({replace:ge},D(Se.to),{state:typeof Se.to=="object"?os({},Te,Se.to.state):Te,force:Ye}),ee||ie)}else Se=B(ie,Oe,!0,ge,Te);return N(ie,Oe,Se),Se})}function I(ve,ee){const J=$(ve,ee);return J?Promise.reject(J):Promise.resolve()}function z(ve){const ee=re.values().next().value;return ee&&typeof ee.runWithContext=="function"?ee.runWithContext(ve):ve()}function K(ve,ee){let J;const[Oe,Te,Ye]=XB(ve,ee);J=Y1(Oe.reverse(),"beforeRouteLeave",ve,ee);for(const Q of Oe)Q.leaveGuards.forEach(ie=>{J.push(ad(ie,ve,ee))});const ge=I.bind(null,ve,ee);return J.push(ge),ce(J).then(()=>{J=[];for(const Q of s.list())J.push(ad(Q,ve,ee));return J.push(ge),ce(J)}).then(()=>{J=Y1(Te,"beforeRouteUpdate",ve,ee);for(const Q of Te)Q.updateGuards.forEach(ie=>{J.push(ad(ie,ve,ee))});return J.push(ge),ce(J)}).then(()=>{J=[];for(const Q of Ye)if(Q.beforeEnter)if(Sc(Q.beforeEnter))for(const ie of Q.beforeEnter)J.push(ad(ie,ve,ee));else J.push(ad(Q.beforeEnter,ve,ee));return J.push(ge),ce(J)}).then(()=>(ve.matched.forEach(Q=>Q.enterCallbacks={}),J=Y1(Ye,"beforeRouteEnter",ve,ee,z),J.push(ge),ce(J))).then(()=>{J=[];for(const Q of o.list())J.push(ad(Q,ve,ee));return J.push(ge),ce(J)}).catch(Q=>vh(Q,8)?Q:Promise.reject(Q))}function N(ve,ee,J){a.list().forEach(Oe=>z(()=>Oe(ve,ee,J)))}function B(ve,ee,J,Oe,Te){const Ye=$(ve,ee);if(Ye)return Ye;const ge=ee===Zh,Q=sp?history.state:{};J&&(Oe||ge?i.replace(ve.fullPath,os({scroll:ge&&Q&&Q.scroll},Te)):i.push(ve.fullPath,Te)),l.value=ve,De(ve,ee,J,ge),Ce()}let V;function R(){V||(V=i.listen((ve,ee,J)=>{if(!he.listening)return;const Oe=k(ve),Te=me(Oe);if(Te){pe(os(Te,{replace:!0,force:!0}),Oe).catch(Ug);return}c=Oe;const Ye=l.value;sp&&xB(T4(Ye.fullPath,J.delta),zy()),K(Oe,Ye).catch(ge=>vh(ge,12)?ge:vh(ge,2)?(pe(os(D(ge.to),{force:!0}),Oe).then(Q=>{vh(Q,20)&&!J.delta&&J.type===vm.pop&&i.go(-1,!1)}).catch(Ug),Promise.reject()):(J.delta&&i.go(-J.delta,!1),oe(ge,Oe,Ye))).then(ge=>{ge=ge||B(Oe,Ye,!1),ge&&(J.delta&&!vh(ge,8)?i.go(-J.delta,!1):J.type===vm.pop&&vh(ge,20)&&i.go(-1,!1)),N(Oe,Ye,ge)}).catch(Ug)}))}let j=tg(),W=tg(),X;function oe(ve,ee,J){Ce(ve);const Oe=W.list();return Oe.length?Oe.forEach(Te=>Te(ve,ee,J)):console.error(ve),Promise.reject(ve)}function _e(){return X&&l.value!==Zh?Promise.resolve():new Promise((ve,ee)=>{j.add([ve,ee])})}function Ce(ve){return X||(X=!ve,R(),j.list().forEach(([ee,J])=>ve?J(ve):ee()),j.reset()),ve}function De(ve,ee,J,Oe){const{scrollBehavior:Te}=t;if(!sp||!Te)return Promise.resolve();const Ye=!J&&LB(T4(ve.fullPath,0))||(Oe||!J)&&history.state&&history.state.scroll||null;return la().then(()=>Te(ve,ee,Ye)).then(ge=>ge&&wB(ge)).catch(ge=>oe(ge,ve,ee))}const Z=ve=>i.go(ve);let G;const re=new Set,he={currentRoute:l,listening:!0,addRoute:m,removeRoute:x,clearRoutes:e.clearRoutes,hasRoute:A,getRoutes:E,resolve:k,options:t,push:Y,replace:te,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:W.add,isReady:_e,install(ve){const ee=this;ve.component("RouterLink",_g),ve.component("RouterView",bE),ve.config.globalProperties.$router=ee,Object.defineProperty(ve.config.globalProperties,"$route",{enumerable:!0,get:()=>Xn(l)}),sp&&!G&&l.value===Zh&&(G=!0,Y(i.location).catch(Te=>{}));const J={};for(const Te in Zh)Object.defineProperty(J,Te,{get:()=>l.value[Te],enumerable:!0});ve.provide($y,ee),ve.provide(F_,m_(J)),ve.provide(gb,l);const Oe=ve.unmount;re.add(ve),ve.unmount=function(){re.delete(ve),re.size<1&&(c=Zh,V&&V(),V=null,l.value=Zh,G=!1,X=!1),Oe()}}};function ce(ve){return ve.reduce((ee,J)=>ee.then(()=>z(J)),Promise.resolve())}return he}function XB(t,e){const n=[],r=[],i=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(t.matched.find(c=>Mp(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Mp(c,l))||i.push(l))}return[n,r,i]}function Nm(){return Cu($y)}function JB(t){return Cu(F_)}const nu=jp("notification",()=>{const t=Lt([]),e=Lt(0),n=Lt(null),r=Zn(()=>[...t.value].sort((p,v)=>v.timestamp-p.timestamp));function i({type:p,message:v,duration:m=5e3}){const x=++e.value,E=Date.now(),A={id:x,type:p,message:v,duration:m,timestamp:E};return t.value.push(A),n.value=x,m>0&&setTimeout(()=>{c(x)},m),x}const s=(p,v=5e3)=>i({type:"success",message:p,duration:v}),o=(p,v=5e3)=>i({type:"error",message:p,duration:v}),a=(p,v=5e3)=>i({type:"info",message:p,duration:v}),l=(p,v=5e3)=>i({type:"warning",message:p,duration:v});function c(p){const v=t.value.findIndex(m=>m.id===p);v!==-1&&t.value.splice(v,1),n.value===p&&(n.value=null)}function d(){t.value=[],n.value=null}return{notifications:r,lastAddedId:n,addNotification:i,removeNotification:c,clearAll:d,success:s,error:o,info:a,warning:l}}),QB=Object.freeze(Object.defineProperty({__proto__:null,useNotificationStore:nu},Symbol.toStringTag,{value:"Module"}));var Ca=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _E(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}function eR(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var wE=eR,tR=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,nR=tR,rR=nR,iR=typeof self=="object"&&self&&self.Object===Object&&self,sR=rR||iR||Function("return this")(),xE=sR,oR=xE,aR=function(){return oR.Date.now()},lR=aR,uR=/\s/;function cR(t){for(var e=t.length;e--&&uR.test(t.charAt(e)););return e}var hR=cR,dR=hR,fR=/^\s+/;function pR(t){return t&&t.slice(0,dR(t)+1).replace(fR,"")}var gR=pR,mR=xE,vR=mR.Symbol,LE=vR,G4=LE,SE=Object.prototype,yR=SE.hasOwnProperty,bR=SE.toString,ng=G4?G4.toStringTag:void 0;function _R(t){var e=yR.call(t,ng),n=t[ng];try{t[ng]=void 0;var r=!0}catch{}var i=bR.call(t);return r&&(e?t[ng]=n:delete t[ng]),i}var wR=_R,xR=Object.prototype,LR=xR.toString;function SR(t){return LR.call(t)}var CR=SR,q4=LE,ER=wR,PR=CR,MR="[object Null]",kR="[object Undefined]",Y4=q4?q4.toStringTag:void 0;function AR(t){return t==null?t===void 0?kR:MR:Y4&&Y4 in Object(t)?ER(t):PR(t)}var TR=AR;function DR(t){return t!=null&&typeof t=="object"}var OR=DR,NR=TR,IR=OR,BR="[object Symbol]";function RR(t){return typeof t=="symbol"||IR(t)&&NR(t)==BR}var FR=RR,jR=gR,K4=wE,zR=FR,Z4=NaN,$R=/^[-+]0x[0-9a-f]+$/i,VR=/^0b[01]+$/i,UR=/^0o[0-7]+$/i,HR=parseInt;function WR(t){if(typeof t=="number")return t;if(zR(t))return Z4;if(K4(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=K4(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=jR(t);var n=VR.test(t);return n||UR.test(t)?HR(t.slice(2),n?2:8):$R.test(t)?Z4:+t}var GR=WR,qR=wE,K1=lR,X4=GR,YR="Expected a function",KR=Math.max,ZR=Math.min;function XR(t,e,n){var r,i,s,o,a,l,c=0,d=!1,p=!1,v=!0;if(typeof t!="function")throw new TypeError(YR);e=X4(e)||0,qR(n)&&(d=!!n.leading,p="maxWait"in n,s=p?KR(X4(n.maxWait)||0,e):s,v="trailing"in n?!!n.trailing:v);function m(me){var pe=r,I=i;return r=i=void 0,c=me,o=t.apply(I,pe),o}function x(me){return c=me,a=setTimeout(k,e),d?m(me):o}function E(me){var pe=me-l,I=me-c,z=e-pe;return p?ZR(z,s-I):z}function A(me){var pe=me-l,I=me-c;return l===void 0||pe>=e||pe<0||p&&I>=s}function k(){var me=K1();if(A(me))return D(me);a=setTimeout(k,E(me))}function D(me){return a=void 0,v&&r?m(me):(r=i=void 0,o)}function $(){a!==void 0&&clearTimeout(a),c=0,r=l=i=a=void 0}function Y(){return a===void 0?o:D(K1())}function te(){var me=K1(),pe=A(me);if(r=arguments,i=this,l=me,pe){if(a===void 0)return x(l);if(p)return clearTimeout(a),a=setTimeout(k,e),m(l)}return a===void 0&&(a=setTimeout(k,e)),o}return te.cancel=$,te.flush=Y,te}var JR=XR;const QR=j_(JR),eF={class:"relative w-full"},tF={key:0,class:"search-results w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto"},nF=["onClick"],J4=$s({__name:"SearchBar",emits:["select-location"],setup(t,{emit:e}){const n=Lt(""),r=Lt([]),i=e,s=QR(async l=>{if(l.length<3){r.value=[];return}try{const d=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(l)}`)).json();r.value=d}catch(c){console.error("Erreur lors de la recherche d'adresse:",c),r.value=[]}},300);function o(){s(n.value)}function a(l){n.value=l.display_name,r.value=[],i("select-location",{lat:parseFloat(l.lat),lng:parseFloat(l.lon)})}return(l,c)=>(Be(),ze("div",eF,[kn(C("input",{"onUpdate:modelValue":c[0]||(c[0]=d=>n.value=d),onInput:o,type:"text",placeholder:"Rechercher une adresse...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500"},null,544),[[jr,n.value]]),r.value.length>0?(Be(),ze("div",tF,[(Be(!0),ze(En,null,fr(r.value,d=>(Be(),ze("div",{key:d.place_id,onClick:p=>a(d),class:"px-4 py-2 hover:bg-gray-100 cursor-pointer"},Dt(d.display_name),9,nF))),128))])):nn("",!0)]))}}),rF={class:"perf-title"},iF={class:"perf-basic-stats"},sF={class:"perf-stat"},oF={class:"perf-stat"},aF={class:"perf-expand-btn"},lF={key:0,class:"perf-content"},uF={class:"perf-section"},cF={class:"perf-metrics"},hF={class:"perf-metric"},dF={class:"perf-metric-value"},fF={class:"perf-metric"},pF={class:"perf-metric-value"},gF={class:"perf-metric"},mF={class:"perf-metric-value"},vF={class:"perf-metric"},yF={class:"perf-metric-value"},bF={class:"perf-section"},_F={class:"perf-metrics"},wF={key:0,class:"perf-metric"},xF={class:"perf-metric-value"},LF={key:1,class:"perf-metric"},SF={class:"perf-metric-value"},CF={key:2,class:"perf-metric"},EF={class:"perf-metric-value"},PF={class:"perf-section"},MF={class:"perf-table"},kF={class:"perf-table-cell"},AF={class:"perf-table-cell"},TF={class:"perf-table-cell"},DF={class:"perf-table-cell"},OF=["onClick"],NF={key:0,class:"perf-empty"},IF=$s({__name:"PerformancePanel",props:{position:{}},setup(t){const n=t.position||"bottom-left",r=Lt(!1),{isQueryParamEnabled:i,isRecording:s,measures:o,longTasks:a,memorySnapshots:l,framesPerSecond:c,operationHistory:d,startRecording:p,stopRecording:v,clearRecording:m,captureMemorySnapshot:x,getSlowOperations:E,getPerformanceReport:A,getOperationDetails:k}=Vp(),D=Zn(()=>{const B=A()??{totalMeasures:0,totalLongTasks:0,slowestOperations:[],averageFps:0,memoryUsage:null};return{totalMeasures:B.totalMeasures,totalLongTasks:B.totalLongTasks,averageDuration:B.slowestOperations.length>0?B.slowestOperations.reduce((V,R)=>V+R.duration,0)/B.slowestOperations.length:0,fps:B.averageFps,slowestOperations:B.slowestOperations,memoryUsage:B.memoryUsage}}),$=Zn(()=>(A()??{slowestOperations:[]}).slowestOperations.slice(0,5).map(V=>({operation:V.name,component:V.component||"unknown",durationMs:V.duration,timestamp:V.startTime}))),Y=Lt(null);go(()=>{i.value&&(Y.value=window.setInterval(()=>{x()},1e3))}),Ku(()=>{Y.value!==null&&clearInterval(Y.value)});function te(B){return B===void 0?"N/A":B<1024?B+" B":B<1024*1024?(B/1024).toFixed(2)+" KB":B<1024*1024*1024?(B/(1024*1024)).toFixed(2)+" MB":(B/(1024*1024*1024)).toFixed(2)+" GB"}function me(B){return B.toFixed(2)}const pe=()=>{x()};function I(){const B=A(),V="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(B,null,2)),R=document.createElement("a");R.setAttribute("href",V),R.setAttribute("download","performance_report.json"),document.body.appendChild(R),R.click(),R.remove()}function z(){m(),pe()}function K(){const B=A();navigator.clipboard.writeText(JSON.stringify(B,null,2)).then(()=>{alert("Données de performance copiées dans le presse-papiers")}).catch(V=>{console.error("Erreur lors de la copie des données",V),alert("Erreur lors de la copie des données")})}async function N(B){const V=k(B.operation,B.timestamp);if(!V){alert("Impossible de trouver les détails de cette opération");return}const R={operation:{...V.operation,startTimeRelative:"0ms",startTimeAbsolute:new Date(V.operation.startTime).toISOString()},context:{...V.context,relatedOperations:V.context.relatedOperations.map(j=>({...j,startTime:`+${j.startTime.toFixed(2)}ms`})),longTasks:V.context.longTasks.map(j=>({...j,startTime:`+${j.startTime.toFixed(2)}ms`})),memorySnapshots:V.context.memorySnapshots.map(j=>({...j,timestamp:`+${j.timestamp.toFixed(2)}ms`,usedJSHeapSize:j.usedJSHeapSize?te(j.usedJSHeapSize):"N/A",totalJSHeapSize:j.totalJSHeapSize?te(j.totalJSHeapSize):"N/A"}))},summary:{...V.summary,memoryDelta:te(V.summary.memoryDelta),maxLongTaskDuration:`${V.summary.maxLongTaskDuration.toFixed(2)}ms`}};try{await navigator.clipboard.writeText(JSON.stringify(R,null,2)),alert("Détails de l'opération copiés dans le presse-papiers")}catch(j){console.error("Erreur lors de la copie des détails",j),alert("Erreur lors de la copie des détails")}}return(B,V)=>{var R,j,W,X,oe,_e;return Xn(i)?(Be(),ze("div",{key:0,class:Fi(["performance-panel",`position-${Xn(n)}`,{expanded:r.value}])},[C("div",{class:"perf-header",onClick:V[0]||(V[0]=Ce=>r.value=!r.value)},[C("div",rF,[C("div",{class:Fi(["perf-indicator",{active:Xn(s)}])},null,2),V[1]||(V[1]=C("span",null,"Performance",-1))]),C("div",iF,[C("span",sF,Dt(D.value.fps)+" FPS",1),C("span",oF,Dt(me(D.value.averageDuration))+"ms",1)]),C("button",aF,Dt(r.value?"▼":"▲"),1)]),r.value?(Be(),ze("div",lF,[C("div",uF,[V[6]||(V[6]=C("h3",null,"Métriques générales",-1)),C("div",cF,[C("div",hF,[V[2]||(V[2]=C("span",{class:"perf-metric-label"},"Mesures",-1)),C("span",dF,Dt(D.value.totalMeasures),1)]),C("div",fF,[V[3]||(V[3]=C("span",{class:"perf-metric-label"},"Tâches longues",-1)),C("span",pF,Dt(D.value.totalLongTasks),1)]),C("div",gF,[V[4]||(V[4]=C("span",{class:"perf-metric-label"},"Durée moyenne",-1)),C("span",mF,Dt(me(D.value.averageDuration))+"ms",1)]),C("div",vF,[V[5]||(V[5]=C("span",{class:"perf-metric-label"},"FPS",-1)),C("span",yF,Dt(D.value.fps),1)])])]),C("div",bF,[V[10]||(V[10]=C("h3",null,"Mémoire",-1)),C("div",_F,[((R=D.value.memoryUsage)==null?void 0:R.usedJSHeapSize)!==void 0?(Be(),ze("div",wF,[V[7]||(V[7]=C("span",{class:"perf-metric-label"},"Utilisée",-1)),C("span",xF,Dt(te((j=D.value.memoryUsage)==null?void 0:j.usedJSHeapSize)),1)])):nn("",!0),((W=D.value.memoryUsage)==null?void 0:W.totalJSHeapSize)!==void 0?(Be(),ze("div",LF,[V[8]||(V[8]=C("span",{class:"perf-metric-label"},"Totale",-1)),C("span",SF,Dt(te((X=D.value.memoryUsage)==null?void 0:X.totalJSHeapSize)),1)])):nn("",!0),((oe=D.value.memoryUsage)==null?void 0:oe.jsHeapSizeLimit)!==void 0?(Be(),ze("div",CF,[V[9]||(V[9]=C("span",{class:"perf-metric-label"},"Limite",-1)),C("span",EF,Dt(te((_e=D.value.memoryUsage)==null?void 0:_e.jsHeapSizeLimit)),1)])):nn("",!0)])]),C("div",PF,[V[13]||(V[13]=C("h3",null,"Opérations les plus lentes",-1)),C("div",MF,[V[12]||(V[12]=Dl('<div class="perf-table-header" data-v-fefe39b0><div class="perf-table-cell" data-v-fefe39b0>Opération</div><div class="perf-table-cell" data-v-fefe39b0>Composant</div><div class="perf-table-cell" data-v-fefe39b0>Durée</div><div class="perf-table-cell" data-v-fefe39b0>Actions</div></div>',1)),(Be(!0),ze(En,null,fr($.value,Ce=>(Be(),ze("div",{class:"perf-table-row",key:Ce.timestamp},[C("div",kF,Dt(Ce.operation),1),C("div",AF,Dt(Ce.component),1),C("div",TF,Dt(me(Ce.durationMs))+"ms",1),C("div",DF,[C("button",{onClick:De=>N(Ce),class:"perf-action-button",title:"Copier les détails"},V[11]||(V[11]=[C("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1)]),8,OF)])]))),128)),$.value.length===0?(Be(),ze("div",NF," Aucune opération enregistrée ")):nn("",!0)])]),C("div",{class:"perf-actions"},[C("button",{onClick:z,class:"perf-button"}," Réinitialiser "),C("button",{onClick:I,class:"perf-button"}," Télécharger "),C("button",{onClick:K,class:"perf-button"}," Copier ")])])):nn("",!0)],2)):nn("",!0)}}}),jh=(t,e)=>{const n=t.__vccOpts||t;for(const[r,i]of e)n[r]=i;return n},BF=jh(IF,[["__scopeId","data-v-fefe39b0"]]),RF={key:0,class:"pwa-update-notification"},FF={key:1,class:"pwa-offline-notification"},jF=$s({__name:"PWAUpdateNotification",setup(t,{expose:e}){const n=Lt(!1),r=Lt(!1),i=Lt(null),s=async()=>{i.value&&(await i.value(),n.value=!1)},o=()=>{n.value=!1},a=()=>{r.value=!1};return e({showRefreshUI:n,showOfflineReady:r,updateSW:i,refreshApp:s,closeNotification:o,closeOfflineNotification:a}),(l,c)=>(Be(),ze(En,null,[n.value?(Be(),ze("div",RF,[C("div",{class:"pwa-update-content"},[c[0]||(c[0]=C("p",null,"Une nouvelle version est disponible",-1)),C("div",{class:"pwa-update-actions"},[C("button",{onClick:s,class:"pwa-update-button"},"Mettre à jour"),C("button",{onClick:o,class:"pwa-close-button"},"Plus tard")])])])):nn("",!0),r.value?(Be(),ze("div",FF,[C("div",{class:"pwa-offline-content"},[c[1]||(c[1]=C("p",null,"Application prête pour une utilisation hors ligne",-1)),C("button",{onClick:a,class:"pwa-close-button"},"OK")])])):nn("",!0)],64))}}),zF=jh(jF,[["__scopeId","data-v-aaba7e40"]]),$F="/static/frontend/img/icons/android-chrome-192x192.png",VF={class:"prompt-content"},UF={class:"prompt-body"},HF={key:0,class:"install-instructions ios"},WF={key:1,class:"install-instructions android"},GF={key:2,class:"install-instructions desktop"},qF={key:3,class:"install-instructions desktop"},YF=$s({__name:"PWAInstallPrompt",setup(t){const e=Lt(!1),n=Lt(!1),r=Lt(null);Lt(null);const i=Lt(!1),s=Lt(!1),o=Lt(!1),a=()=>window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,l=()=>{const m=localStorage.getItem("pwaPromptLastClosed");if(!m)return!1;const x=3*24*60*60*1e3;return Date.now()-parseInt(m)<x},c=()=>{i.value=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,s.value=/Android/.test(navigator.userAgent),o.value=!i.value&&!s.value,window.addEventListener("beforeinstallprompt",m=>{m.preventDefault(),r.value=m,e.value=!0,n.value=!0}),window.addEventListener("appinstalled",m=>{console.log("Application installée avec succès",m),e.value=!1}),!a()&&(l()||setTimeout(()=>{e.value=!0,n.value=!0},3e3))},d=()=>{window.removeEventListener("beforeinstallprompt",()=>{}),window.removeEventListener("appinstalled",()=>{})};go(()=>{c()}),Td(()=>{d()});const p=async()=>{if(!r.value){console.log("Installation non disponible");return}try{r.value.prompt();const m=await r.value.userChoice;r.value=null,m.outcome==="accepted"?(console.log("Installation acceptée"),e.value=!1):console.log("Installation refusée")}catch(m){console.error("Erreur lors de l'installation:",m)}},v=()=>{e.value=!1,localStorage.setItem("pwaPromptLastClosed",Date.now().toString())};return(m,x)=>e.value?(Be(),ze("div",{key:0,class:Fi(["pwa-install-prompt",{fullscreen:n.value}])},[C("div",VF,[C("div",{class:"prompt-header"},[x[1]||(x[1]=C("div",{class:"app-info"},[C("img",{src:$F,alt:"TagMap Logo",class:"app-logo"}),C("div",{class:"app-details"},[C("h2",null,"Installer TagMap"),C("p",null,"Solution innovante de cartographie et gestion de projets")])],-1)),C("button",{onClick:v,class:"close-button","aria-label":"Fermer"},x[0]||(x[0]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[C("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),C("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)]))]),C("div",UF,[i.value?(Be(),ze("div",HF,x[2]||(x[2]=[Dl('<h3 data-v-48772823>Pour installer l&#39;application sur votre iPhone :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Partager</strong> <span class="ios-share-icon" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8" data-v-48772823></path><polyline points="16 6 12 2 8 6" data-v-48772823></polyline><line x1="12" y1="2" x2="12" y2="15" data-v-48772823></line></svg></span></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Faites défiler et appuyez sur <strong data-v-48772823>Sur l&#39;écran d&#39;accueil</strong></p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>3</div><div class="step-content" data-v-48772823><p data-v-48772823>Appuyez sur <strong data-v-48772823>Ajouter</strong> en haut à droite</p></div></div>',4)]))):s.value?(Be(),ze("div",WF,[x[3]||(x[3]=C("h3",null,"Pour installer l'application sur votre appareil :",-1)),x[4]||(x[4]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Appuyez sur le bouton ci-dessous")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):o.value?(Be(),ze("div",GF,[x[5]||(x[5]=C("h3",null,"Pour installer l'application sur votre ordinateur :",-1)),x[6]||(x[6]=C("div",{class:"instruction-step"},[C("div",{class:"step-number"},"1"),C("div",{class:"step-content"},[C("p",null,"Cliquez sur le bouton ci-dessous pour installer l'application")])],-1)),C("button",{onClick:p,class:"install-button"}," Installer l'application ")])):(Be(),ze("div",qF,x[7]||(x[7]=[Dl('<h3 data-v-48772823>Pour installer l&#39;application sur votre ordinateur :</h3><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>1</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur l&#39;icône d&#39;installation dans la barre d&#39;adresse</p></div></div><div class="instruction-step" data-v-48772823><div class="step-number" data-v-48772823>2</div><div class="step-content" data-v-48772823><p data-v-48772823>Cliquez sur &quot;Installer&quot;</p></div></div>',3)])))]),C("div",{class:"prompt-footer"},[x[8]||(x[8]=Dl('<div class="benefits" data-v-48772823><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z" data-v-48772823></path></svg><span data-v-48772823>Sécurisé</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><circle cx="12" cy="12" r="10" data-v-48772823></circle><polyline points="12 6 12 12 16 14" data-v-48772823></polyline></svg><span data-v-48772823>Rapide</span></div><div class="benefit-item" data-v-48772823><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-48772823><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" data-v-48772823></path></svg><span data-v-48772823>Hors ligne</span></div></div>',1)),C("button",{onClick:v,class:"remind-later"},"Me le rappeler plus tard")])])],2)):nn("",!0)}}),KF=jh(YF,[["__scopeId","data-v-48772823"]]),ZF={class:"h-screen flex flex-col"},XF={key:0,class:"bg-white shadow-sm z-[2500] flex-shrink-0"},JF={class:"mx-auto px-4 sm:px-6 lg:px-8"},QF={class:"flex h-16 items-center justify-between"},e9={class:"flex items-center"},t9={class:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},n9={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},r9={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},i9={class:"hidden md:flex md:ml-6 space-x-8"},s9={key:0,class:"flex-1 mx-2"},o9={class:"hidden md:block"},a9={class:"md:hidden"},l9={key:1,class:"flex-1"},u9={class:"flex items-center space-x-2 md:space-x-4"},c9={class:"relative"},h9={class:"px-4 py-2 border-b border-gray-100 flex justify-between items-center"},d9={class:"flex items-center justify-between w-full"},f9={class:"flex items-center space-x-3"},p9={class:"max-h-72 overflow-y-auto"},g9={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},m9={class:"flex items-start"},v9={class:"flex-shrink-0 mr-3"},y9={key:0,class:"h-6 w-6 md:h-5 md:w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor"},b9={key:1,class:"h-6 w-6 md:h-5 md:w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},_9={key:2,class:"h-6 w-6 md:h-5 md:w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},w9={key:3,class:"h-6 w-6 md:h-5 md:w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor"},x9={class:"flex-1"},L9={class:"text-sm md:text-sm text-gray-800"},S9=["onClick"],C9={class:"relative"},E9={class:"hidden md:flex flex-col items-end"},P9={class:"text-sm font-medium text-gray-700"},M9={key:0,class:"text-xs text-gray-500"},k9=["src","alt"],A9={class:"md:hidden px-4 py-2 border-b border-gray-100 flex justify-between items-center"},T9={class:"text-sm font-semibold text-gray-700"},D9={class:"text-xs text-gray-500"},O9={key:0,class:"md:hidden fixed inset-0 bg-white shadow-lg z-[3000] border-t border-gray-200",style:{top:"var(--header-height)"}},N9={class:"space-y-1 px-2 pb-3 pt-2"},I9=$s({__name:"App",setup(t){const e=Nm(),n=da(),r=nu(),i=Lt(!1),s=Lt(!1),o=Lt(!1),a=Lt(!1),l=Lt(null),c=Lt(!1),d=Lt(!1),p=Lt(null),v=Lt("13px"),m=Lt("65px"),x=Lt(null),E=Lt(null);function A(){d.value=window.innerWidth<768}go(()=>{A(),window.addEventListener("resize",A),window.addEventListener("resize",k),window.addEventListener("pwa-update-available",()=>{x.value&&(x.value.showRefreshUI=!0,x.value.updateSW=boe)}),window.addEventListener("pwa-offline-ready",()=>{x.value&&(x.value.showOfflineReady=!0)})}),Td(()=>{window.removeEventListener("resize",A),window.removeEventListener("resize",k),window.removeEventListener("pwa-update-available",()=>{}),window.removeEventListener("pwa-offline-ready",()=>{})});function k(){if(!p.value)return;const R=p.value.getBoundingClientRect();v.value=`${R.top+window.scrollY+5}px`;const j=R.left+R.width/2;m.value=`${window.innerWidth-j-22}px`}const D=Zn(()=>{const R=n.user;if(!R)return"";const j=`${R.first_name} ${R.last_name.toUpperCase()}`;return R.company_name?`${j} (${R.company_name})`:j}),$=Zn(()=>{var j;switch((j=n.user)==null?void 0:j.user_type){case"admin":return"Accès administrateur";case"entreprise":return"Accès entreprise";case"salarie":return"Accès salarie";case"visiteur":return"Accès visiteur";default:return""}}),Y=Zn(()=>{var R;return((R=n.user)==null?void 0:R.user_type)==="admin"}),te=Zn(()=>n.isAuthenticated),me=[{name:"Carte",to:"/"},{name:"Météo",to:"/meteo"},{name:"Notes",to:"/notes"}],pe=Zn(()=>{var j;if(!te.value)return[];const R=[...me];return(Y.value||((j=n.user)==null?void 0:j.user_type)==="entreprise")&&R.push({name:"Utilisateurs",to:"/users"}),R}),I=Zn(()=>te.value?[{name:"Mon profil",to:"/profile"}]:[]);async function z(){try{await n.logout(),e.push("/login")}catch(R){console.error("Erreur lors de la déconnexion:",R)}}function K(R){window.dispatchEvent(new CustomEvent("map-set-location",{detail:{lat:R.lat,lng:R.lng,zoom:16}}))}go(async()=>{console.log("App mounted, checking auth...");try{if(localStorage.getItem("token")){console.log("Token found, checking auth..."),await n.checkAuth(),await n.fetchUserProfile();const j=localStorage.getItem("lastPlanId");j&&window.dispatchEvent(new CustomEvent("load-last-plan",{detail:{planId:j}}))}else console.log("No token found")}catch(R){console.error("Auth check error:",R),e.push("/login")}});const N=Zn(()=>{const R="TagMap";if(!te.value)return`${R} - Connexion`;const j=e.currentRoute.value,X={home:"Carte",meteo:"Météo",notes:"Notes",users:"Utilisateurs",profile:"Mon profil",changePassword:"Changement de mot de passe",map:"Carte"}[j.name]||"";return X?`${R} - ${X}`:R});Ri(N,R=>{document.title=R},{immediate:!0});const B=Zn(()=>r.notifications.length);function V(){r.clearAll(),o.value=!1}return dm(()=>{if(r.lastAddedId!==null){const R=r.notifications.find(j=>j.id===r.lastAddedId);R&&la(()=>{k(),a.value=!0,l.value={id:R.id,message:R.message,type:R.type},requestAnimationFrame(()=>{setTimeout(()=>{c.value=!0,setTimeout(()=>{c.value=!1,setTimeout(()=>{var j;((j=l.value)==null?void 0:j.id)===R.id&&(l.value=null,a.value=!1)},300)},4e3)},50)})})}}),(R,j)=>{var W;return Be(),ze("div",ZF,[te.value?(Be(),ze("header",XF,[C("nav",JF,[C("div",QF,[C("div",e9,[C("button",{onClick:j[0]||(j[0]=X=>s.value=!s.value),class:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 md:hidden"},[j[7]||(j[7]=C("span",{class:"sr-only"},"Ouvrir le menu",-1)),(Be(),ze("svg",t9,[s.value?(Be(),ze("path",r9)):(Be(),ze("path",n9))]))]),fi(Xn(_g),{to:"/",class:"text-xl font-semibold text-primary-600 truncate ml-2 md:ml-0"},{default:Wu(()=>j[8]||(j[8]=[C("span",{class:"md:inline hidden"},"TagMap",-1),C("span",{class:"md:hidden inline"},"TM",-1)])),_:1}),C("div",i9,[(Be(!0),ze(En,null,fr(pe.value,X=>(Be(),Ol(Xn(_g),{key:X.name,to:X.to,class:Fi(["text-sm font-medium transition-colors duration-200",[R.$route.path===X.to?"text-primary-600 border-b-2 border-primary-500":"text-gray-500 hover:text-gray-900"]])},{default:Wu(()=>[li(Dt(X.name),1)]),_:2},1032,["to","class"]))),128))])]),R.$route.path==="/"?(Be(),ze("div",s9,[C("div",o9,[fi(J4,{onSelectLocation:K})]),C("div",a9,[fi(J4,{onSelectLocation:K,class:"max-w-full"})])])):(Be(),ze("div",l9)),C("div",u9,[C("div",c9,[C("button",{ref_key:"bellButtonRef",ref:p,onClick:j[1]||(j[1]=X=>o.value=!o.value),class:Fi(["relative flex items-center justify-center p-2 text-gray-400 hover:text-gray-500 rounded-full hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",{"animate-bell":a.value}])},j[9]||(j[9]=[C("span",{class:"sr-only"},"Voir les notifications",-1),C("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)]),2),o.value?(Be(),ze("div",{key:0,class:"absolute right-0 mt-2 md:w-80 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:eu(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",h9,[C("div",d9,[j[11]||(j[11]=C("h3",{class:"text-sm font-semibold text-gray-700"},"Notifications",-1)),C("div",f9,[B.value>0?(Be(),ze("button",{key:0,onClick:V,class:"text-xs text-primary-600 hover:text-primary-800"}," Tout effacer ")):nn("",!0),C("button",{onClick:j[2]||(j[2]=X=>o.value=!1),class:"md:hidden p-1 rounded-full hover:bg-gray-100"},j[10]||(j[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])]),C("div",p9,[B.value===0?(Be(),ze("div",g9," Aucune notification ")):nn("",!0),(Be(!0),ze(En,null,fr(Xn(r).notifications,X=>(Be(),ze("div",{key:X.id,class:"px-4 py-3 md:py-3 py-4 border-b border-gray-100 last:border-0 hover:bg-gray-50"},[C("div",m9,[C("div",v9,[X.type==="success"?(Be(),ze("svg",y9,j[12]||(j[12]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):X.type==="error"?(Be(),ze("svg",b9,j[13]||(j[13]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)]))):X.type==="warning"?(Be(),ze("svg",_9,j[14]||(j[14]=[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)]))):(Be(),ze("svg",w9,j[15]||(j[15]=[C("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))]),C("div",x9,[C("p",L9,Dt(X.message),1),C("button",{onClick:oe=>Xn(r).removeNotification(X.id),class:"text-xs md:text-xs text-primary-600 hover:text-primary-800 mt-2 md:mt-1 py-1 md:py-0"}," Fermer ",8,S9)])])]))),128))])],4)):nn("",!0)]),C("div",C9,[C("button",{onClick:j[3]||(j[3]=X=>i.value=!i.value),class:"flex items-center space-x-2 md:space-x-3 focus:outline-none"},[C("div",E9,[C("span",P9,Dt(D.value),1),$.value?(Be(),ze("span",M9,Dt($.value),1)):nn("",!0)]),C("img",{class:"h-8 w-8 rounded-full ring-2 ring-white",src:((W=Xn(n).user)==null?void 0:W.logo)||"https://ui-avatars.com/api/?name="+encodeURIComponent(D.value),alt:D.value},null,8,k9)]),i.value?(Be(),ze("div",{key:0,class:"absolute right-0 mt-2 md:w-48 w-screen md:origin-top-right md:rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-[3500] md:right-0 right-0 left-0 md:left-auto",style:eu(d.value?"position: fixed; top: 64px; left: 0; right: 0; margin: 0;":"")},[C("div",A9,[C("div",null,[C("div",T9,Dt(D.value),1),C("div",D9,Dt($.value),1)]),C("button",{onClick:j[4]||(j[4]=X=>i.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},j[16]||(j[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),(Be(!0),ze(En,null,fr(I.value,X=>(Be(),Ol(Xn(_g),{key:X.name,to:X.to,class:"block px-4 md:py-2 py-3 text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",onClick:j[5]||(j[5]=oe=>i.value=!1)},{default:Wu(()=>[li(Dt(X.name),1)]),_:2},1032,["to"]))),128)),C("button",{onClick:z,class:"block w-full px-4 md:py-2 py-3 text-left text-sm text-red-600 hover:bg-gray-50 font-medium"}," Déconnexion ")],4)):nn("",!0)])])]),s.value?(Be(),ze("div",O9,[C("div",N9,[(Be(!0),ze(En,null,fr(pe.value,X=>(Be(),Ol(Xn(_g),{key:X.name,to:X.to,class:Fi(["block px-3 py-2 rounded-md text-base font-medium",[R.$route.path===X.to?"bg-primary-50 text-primary-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"]]),onClick:j[6]||(j[6]=oe=>s.value=!1)},{default:Wu(()=>[li(Dt(X.name),1)]),_:2},1032,["to","class"]))),128))])])):nn("",!0)])])):nn("",!0),C("main",{class:Fi([R.$route.path==="/"&&!d.value?"overflow-hidden":"overflow-auto","flex-1 flex flex-col","md:h-[calc(100vh-64px)]"])},[fi(Xn(bE))],2),fi(BF,{position:"bottom-left"}),fi(zF,{ref_key:"pwaUpdateNotification",ref:x},null,512),fi(KF,{ref_key:"pwaInstallPrompt",ref:E},null,512)])}}}),B9="modulepreload",R9=function(t){return"/static/frontend/"+t},Q4={},Mh=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=R9(l),l in Q4)return;Q4[l]=!0;const c=l.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":B9,c||(p.as="script"),p.crossOrigin="",p.href=l,a&&p.setAttribute("nonce",a),document.head.appendChild(p),c)return new Promise((v,m)=>{p.addEventListener("load",v),p.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})},F9={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},j9={class:"max-w-md w-full space-y-8"},z9={class:"space-y-4"},$9={class:"mt-1"},V9={class:"mt-1"},U9={class:"mt-1"},H9={key:0,class:"rounded-md bg-red-50 p-4"},W9={class:"flex"},G9={class:"ml-3"},q9={class:"text-sm font-medium text-red-800"},Y9={key:1,class:"rounded-md bg-yellow-50 p-4"},K9={class:"flex"},Z9={class:"ml-3"},X9={class:"mt-2 text-sm text-yellow-700"},J9={class:"list-disc pl-5 space-y-1"},Q9=["disabled"],ej={class:"absolute left-0 inset-y-0 flex items-center pl-3"},tj={key:0,class:"h-5 w-5 text-primary-500 group-hover:text-primary-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},nj={key:1,class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},rj=$s({__name:"ChangePasswordForm",setup(t){const e=Nm(),n=da(),r=ru({oldPassword:"",newPassword:"",confirmPassword:""}),i=Lt(!1),s=Lt("");go(()=>{var c,d;console.log("ChangePasswordForm mounted, auth state:",{isAuthenticated:n.isAuthenticated,userId:(c=n.user)==null?void 0:c.id,mustChangePassword:(d=n.user)==null?void 0:d.must_change_password})});const o=Zn(()=>{const c=[];return r.newPassword&&r.newPassword.length<8&&c.push("Le nouveau mot de passe doit contenir au moins 8 caractères"),r.newPassword&&r.confirmPassword&&r.newPassword!==r.confirmPassword&&c.push("Les mots de passe ne correspondent pas"),c}),a=Zn(()=>r.oldPassword.length>0&&r.newPassword.length>=8&&r.newPassword===r.confirmPassword);async function l(){var c,d,p,v,m,x,E,A;if(!a.value){s.value="Veuillez corriger les erreurs avant de continuer";return}if(!((c=n.user)!=null&&c.id)){s.value="Erreur : utilisateur non identifié";return}i.value=!0,s.value="";try{console.log("Submitting password change..."),await n.changePassword(r.oldPassword,r.newPassword),console.log("Password changed successfully"),e.push("/")}catch(k){console.error("Password change failed:",k),(p=(d=k.response)==null?void 0:d.data)!=null&&p.detail?s.value=k.response.data.detail:(m=(v=k.response)==null?void 0:v.data)!=null&&m.old_password?s.value=k.response.data.old_password[0]:(E=(x=k.response)==null?void 0:x.data)!=null&&E.password?s.value=k.response.data.password[0]:((A=k.response)==null?void 0:A.status)===401?(s.value="Session expirée, veuillez vous reconnecter",await n.logout(),e.push("/login")):s.value="Une erreur est survenue lors du changement de mot de passe"}finally{i.value=!1}}return(c,d)=>(Be(),ze("div",F9,[C("div",j9,[d[12]||(d[12]=C("div",null,[C("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Changement de mot de passe "),C("p",{class:"mt-2 text-center text-sm text-gray-600"}," Pour des raisons de sécurité, vous devez changer votre mot de passe. ")],-1)),C("form",{class:"mt-8 space-y-6",onSubmit:Bh(l,["prevent"])},[C("div",z9,[C("div",null,[d[3]||(d[3]=C("label",{for:"old-password",class:"block text-sm font-medium text-gray-700"},"Ancien mot de passe",-1)),C("div",$9,[kn(C("input",{id:"old-password","onUpdate:modelValue":d[0]||(d[0]=p=>r.oldPassword=p),name:"old-password",type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre mot de passe actuel"},null,512),[[jr,r.oldPassword]])])]),C("div",null,[d[4]||(d[4]=C("label",{for:"new-password",class:"block text-sm font-medium text-gray-700"},"Nouveau mot de passe",-1)),C("div",V9,[kn(C("input",{id:"new-password","onUpdate:modelValue":d[1]||(d[1]=p=>r.newPassword=p),name:"new-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Entrez votre nouveau mot de passe"},null,512),[[jr,r.newPassword]])]),d[5]||(d[5]=C("p",{class:"mt-1 text-sm text-gray-500"}," Le mot de passe doit contenir au moins 8 caractères ",-1))]),C("div",null,[d[6]||(d[6]=C("label",{for:"confirm-password",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),C("div",U9,[kn(C("input",{id:"confirm-password","onUpdate:modelValue":d[2]||(d[2]=p=>r.confirmPassword=p),name:"confirm-password",type:"password",required:"",autocomplete:"new-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"Confirmez votre nouveau mot de passe"},null,512),[[jr,r.confirmPassword]])])])]),s.value?(Be(),ze("div",H9,[C("div",W9,[d[7]||(d[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",G9,[C("h3",q9,Dt(s.value),1)])])])):nn("",!0),o.value.length>0?(Be(),ze("div",Y9,[C("div",K9,[d[9]||(d[9]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),C("div",Z9,[d[8]||(d[8]=C("h3",{class:"text-sm font-medium text-yellow-800"},"Attention",-1)),C("div",X9,[C("ul",J9,[(Be(!0),ze(En,null,fr(o.value,(p,v)=>(Be(),ze("li",{key:v},Dt(p),1))),128))])])])])])):nn("",!0),C("div",null,[C("button",{type:"submit",disabled:i.value||!a.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50"},[C("span",ej,[i.value?(Be(),ze("svg",nj,d[11]||(d[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Be(),ze("svg",tj,d[10]||(d[10]=[C("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"},null,-1)])))]),li(" "+Dt(i.value?"Modification en cours...":"Changer le mot de passe"),1)],8,Q9)])],32)])]))}}),ij="/static/frontend/assets/background.svg",sj={class:"min-h-screen overflow-auto relative py-12 sm:px-6 lg:px-8"},oj={class:"container mx-auto relative z-10"},aj={class:"sm:mx-auto sm:w-full sm:max-w-md"},lj={class:"bg-white/95 backdrop-blur-sm py-8 px-6 shadow-xl rounded-xl sm:px-10 border border-white/20"},uj={key:0,class:"rounded-md bg-red-50 p-4"},cj={class:"flex"},hj={class:"ml-3"},dj={class:"text-sm font-medium text-red-800"},fj={class:"mt-1"},pj={class:"mt-1 relative"},gj=["type"],mj={key:0,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},vj={key:1,class:"h-5 w-5 text-gray-400 hover:text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},yj={class:"flex items-center justify-between"},bj={class:"flex items-center"},_j={class:"text-sm"},wj=["disabled"],xj={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Lj={class:"mt-16 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Sj={class:"mt-12"},Cj={class:"flex flex-wrap justify-center gap-2 mb-8"},Ej=["onClick"],Pj={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Mj={class:"flex items-center mb-4"},kj={class:"text-2xl mr-2"},Aj={class:"text-xl font-semibold text-gray-900"},Tj={class:"text-gray-600 text-sm"},Dj={key:0,class:"flex justify-center mt-8 gap-2"},Oj=["onClick"],Z1=6,Nj=$s({__name:"LoginView",setup(t){const e=Nm(),n=da(),r=Lt(!1),i=Lt(null),s=Lt(!1),o=Lt("Tous"),a=Lt(1),l=ru({username:"",password:"",rememberMe:!1}),c=[{type:"Liniculteur",sector:"Agriculture",icon:"🌾",text:"En tant qu'entreprise, j'ai mis en place un sous-compte « agriculteur » permettant la géolocalisation des parcelles. Cela offre à nos salariés et prestataires une visibilité complète sur l'ensemble des parcelles et facilite leur accès. De plus, ils peuvent y ajouter des notes et des photos si nécessaire. Grâce aux trackers, nous renforçons également la sécurité de nos machines contre le vol."},{type:"Agro industriel",sector:"Industrie",icon:"🏭",text:"La gestion des comptes et sous-comptes est un atout majeur pour limiter, filtrer et contrôler l'accès de nos salariés aux différentes tâches."},{type:"Agence de voyage",sector:"Tourisme",icon:"✈️",text:"L'outil nous permet de créer gratuitement et sans limite des sous-comptes clients, d'établir des itinéraires personnalisés avec des points d'intérêt."},{type:"Industriel agroalimentaire",sector:"Industrie",icon:"🌱",text:"Nous disposons d'un compte entreprise avec des sous-comptes dédiés à chaque culture. Nos techniciens et agriculteurs partenaires peuvent ainsi ajouter des annotations et photo sur les parcelles. Grâce aux stations météo connectées, nous optimisons la gestion des tours d'irrigation par secteur géographique en fonction des précipitations."},{type:"Conseil municipal",sector:"Collectivité",icon:"🏛️",text:"Cette solution nous permet de gagner en efficacité dans la gestion des tâches à réaliser, en les géolocalisant et en offrant à nos employés communaux la possibilité d'ajouter des commentaires et des photos sur chaque tâche géoréférencée."},{type:"Location de matériel",sector:"Services",icon:"🚜",text:"Cette solution nous permet de géolocaliser notre flotte grâce à des trackers sans abonnement, avec uniquement un abonnement à la plateforme."},{type:"Agriculteur",sector:"Agriculture",icon:"👨‍🌾",text:"J'ai équipé tous mes canons d'enrouleurs de trackers et de caméras pour dissuader le vol de batteries."},{type:"Semencier",sector:"Agriculture",icon:"🌱",text:"Nous assurons la géolocalisation de l'ensemble de nos parcelles en France."},{type:"Concessionnaire irrigation",sector:"Services",icon:"💧",text:"Nous avons géolocalisé tous les forages de nos clients et ajouté en commentaire la procédure d'entrée, facilitant ainsi le travail de nos techniciens et agriculteurs lors des interventions."},{type:"Entreprise paysagiste",sector:"Services",icon:"🌳",text:"Nous géolocalisons tous nos chantiers et ajoutons une photo du chantier terminé en commentaire, servant de preuve en cas de litige."}],d=Zn(()=>["Tous",...new Set(c.map(E=>E.sector))]),p=Zn(()=>{let x=o.value==="Tous"?c:c.filter(k=>k.sector===o.value);const E=(a.value-1)*Z1,A=E+Z1;return x.slice(E,A)}),v=Zn(()=>{const x=o.value==="Tous"?c:c.filter(E=>E.sector===o.value);return Math.ceil(x.length/Z1)});go(async()=>{var x;console.log("LoginView mounted"),console.log("INITIAL_STATE:",window.INITIAL_STATE);try{if((x=window.INITIAL_STATE)!=null&&x.isAuthenticated){console.log("User is authenticated, redirecting to home"),e.push("/");return}await n.restoreSession()&&(console.log("Session restored, redirecting to home"),e.push("/"))}catch(E){console.error("Error during initialization:",E),i.value=null}});async function m(){var x,E,A,k,D,$,Y,te,me;r.value=!0,i.value=null;try{if(!l.username||!l.password){i.value="Veuillez remplir tous les champs";return}await n.login(l.username,l.password),(x=n.user)!=null&&x.must_change_password?e.push("/change-password"):e.push("/")}catch(pe){console.error("Login error:",pe),((E=pe==null?void 0:pe.response)==null?void 0:E.status)===500?i.value="Le service est temporairement indisponible. Veuillez réessayer dans quelques instants.":((A=pe==null?void 0:pe.response)==null?void 0:A.status)===401||((k=pe==null?void 0:pe.response)==null?void 0:k.status)===403?i.value="Identifiants incorrects. Veuillez vérifier votre nom d'utilisateur et mot de passe.":($=(D=pe==null?void 0:pe.response)==null?void 0:D.data)!=null&&$.detail?i.value=pe.response.data.detail:(me=(te=(Y=pe==null?void 0:pe.response)==null?void 0:Y.data)==null?void 0:te.non_field_errors)!=null&&me[0]?i.value=pe.response.data.non_field_errors[0]:(pe==null?void 0:pe.message)==="Network Error"?i.value="Impossible de se connecter au serveur. Veuillez vérifier votre connexion internet.":i.value="Une erreur est survenue lors de la connexion. Veuillez réessayer."}finally{r.value=!1}}return(x,E)=>{const A=_S("router-link");return Be(),ze("div",sj,[C("div",{class:"fixed inset-0 z-0",style:eu({backgroundImage:`url(${Xn(ij)})`,backgroundSize:"400px",backgroundRepeat:"repeat",filter:"blur(1px) opacity(0.15)"})},null,4),E[16]||(E[16]=C("div",{class:"fixed inset-0 z-0 bg-gradient-to-br from-white/40 via-transparent to-primary-900/10"},null,-1)),C("div",oj,[C("div",aj,[C("div",lj,[E[12]||(E[12]=C("div",{class:"text-center mb-8"},[C("h2",{class:"text-3xl font-bold text-gray-900 mb-2"}," TagMap "),C("p",{class:"text-sm text-gray-600"}," Solution innovante de cartographie et gestion de projets ")],-1)),C("form",{class:"space-y-6",onSubmit:Bh(m,["prevent"])},[i.value?(Be(),ze("div",uj,[C("div",cj,[E[4]||(E[4]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",hj,[C("h3",dj,Dt(i.value),1)])])])):nn("",!0),C("div",null,[E[5]||(E[5]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"}," Nom d'utilisateur ",-1)),C("div",fj,[kn(C("input",{id:"username","onUpdate:modelValue":E[0]||(E[0]=k=>l.username=k),name:"username",type:"text",required:"",autocomplete:"username",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm","aria-label":"Nom d'utilisateur"},null,512),[[jr,l.username]])])]),C("div",null,[E[8]||(E[8]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Mot de passe ",-1)),C("div",pj,[kn(C("input",{id:"password","onUpdate:modelValue":E[1]||(E[1]=k=>l.password=k),type:s.value?"text":"password",name:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full h-11 px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 sm:text-sm pr-10","aria-label":"Mot de passe"},null,8,gj),[[D_,l.password]]),C("button",{type:"button",onClick:E[2]||(E[2]=k=>s.value=!s.value),class:"absolute inset-y-0 right-0 pr-3 flex items-center","aria-label":"Afficher/masquer le mot de passe"},[s.value?(Be(),ze("svg",mj,E[6]||(E[6]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)]))):(Be(),ze("svg",vj,E[7]||(E[7]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)])))])])]),C("div",yj,[C("div",bj,[kn(C("input",{id:"remember-me","onUpdate:modelValue":E[3]||(E[3]=k=>l.rememberMe=k),name:"remember-me",type:"checkbox",class:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded","aria-label":"Se souvenir de moi"},null,512),[[Pl,l.rememberMe]]),E[9]||(E[9]=C("label",{for:"remember-me",class:"ml-2 block text-sm text-gray-900"}," Se souvenir de moi ",-1))]),C("div",_j,[fi(A,{to:"/forgot-password",class:"font-medium text-primary-600 hover:text-primary-500 transition-colors duration-200"},{default:Wu(()=>E[10]||(E[10]=[li(" Mot de passe oublié ? ")])),_:1})])]),C("div",null,[C("button",{type:"submit",disabled:r.value,class:"w-full h-11 flex justify-center items-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed","aria-label":"Se connecter"},[r.value?(Be(),ze("svg",xj,E[11]||(E[11]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),li(" "+Dt(r.value?"Connexion en cours...":"Se connecter"),1)],8,wj)])],32)])]),C("div",Lj,[E[14]||(E[14]=Dl('<div class="mb-12 bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-6" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>💡</span><h3 class="text-xl font-bold text-gray-900" data-v-9ff7ee32>Équipements Connectés sans Abonnement</h3></div><div class="grid grid-cols-1 md:grid-cols-2 gap-6" data-v-9ff7ee32><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>📍</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Tracker GPS solaire</h4><p class="text-gray-600" data-v-9ff7ee32>Géolocalisez et sécurisez votre matériel</p></div></div><div class="flex items-center space-x-4" data-v-9ff7ee32><div class="flex-shrink-0 text-2xl" data-v-9ff7ee32>🌤️</div><div data-v-9ff7ee32><h4 class="font-semibold" data-v-9ff7ee32>Station météo</h4><p class="text-gray-600" data-v-9ff7ee32>Optimisez vos décisions avec des données en temps réel</p></div></div></div></div><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8" data-v-9ff7ee32><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👀📌</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Carte Interactive</h3></div><p class="text-gray-600" data-v-9ff7ee32>Imaginez... Une carte interactive où tout est sous contrôle ! Tout est centralisé, organisé et accessible en un clin d&#39;œil !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>👥💻🔄</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Collaboration en Temps Réel</h3></div><p class="text-gray-600" data-v-9ff7ee32>Travail d&#39;équipe simplifié : Collaborez en temps réel sur une interface ultra-intuitive. Vos équipes restent synchronisées et efficaces !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🚜📸</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Cerveau Cartographique</h3></div><p class="text-gray-600" data-v-9ff7ee32>Un cerveau cartographique : Dessinez, annotez, planifiez, suivez !</p></div><div class="bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20" data-v-9ff7ee32><div class="flex items-center mb-4" data-v-9ff7ee32><span class="text-2xl mr-2" data-v-9ff7ee32>🔐🔑</span><h3 class="text-lg font-semibold text-gray-900" data-v-9ff7ee32>Accès Sécurisé</h3></div><p class="text-gray-600" data-v-9ff7ee32>Accès sécurisé et intelligent : Gérez les droits d&#39;accès de vos salariés et prestataires en un clic.</p></div></div>',2)),C("div",Sj,[E[13]||(E[13]=C("h3",{class:"text-2xl font-bold text-center text-gray-900 mb-8"},"Ils utilisent TagMap",-1)),C("div",Cj,[(Be(!0),ze(En,null,fr(d.value,k=>(Be(),ze("button",{key:k,onClick:D=>o.value=k,class:Fi(["px-4 py-2 rounded-full text-sm font-medium transition-all duration-200",o.value===k?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Dt(k),11,Ej))),128))]),C("div",Pj,[(Be(!0),ze(En,null,fr(p.value,k=>(Be(),ze("div",{key:k.type,class:"bg-white/90 backdrop-blur-sm p-6 rounded-xl shadow-lg border border-white/20 transition-all duration-300 hover:shadow-xl"},[C("div",Mj,[C("span",kj,Dt(k.icon),1),C("span",Aj,Dt(k.type),1)]),C("p",Tj,Dt(k.text),1)]))),128))]),v.value>1?(Be(),ze("div",Dj,[(Be(!0),ze(En,null,fr(v.value,k=>(Be(),ze("button",{key:k,onClick:D=>a.value=k,class:Fi(["w-8 h-8 rounded-full text-sm font-medium transition-all duration-200",a.value===k?"bg-primary-600 text-white":"bg-white/80 text-gray-700 hover:bg-primary-50"])},Dt(k),11,Oj))),128))])):nn("",!0)])]),E[15]||(E[15]=C("div",{class:"h-16"},null,-1))])])}}}),Ij=jh(Nj,[["__scopeId","data-v-9ff7ee32"]]),e5="/static/frontend/assets/logo.svg";var mb={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(Ca,function(n){var r="1.9.4";function i(u){var y,P,H,le;for(P=1,H=arguments.length;P<H;P++){le=arguments[P];for(y in le)u[y]=le[y]}return u}var s=Object.create||function(){function u(){}return function(y){return u.prototype=y,new u}}();function o(u,y){var P=Array.prototype.slice;if(u.bind)return u.bind.apply(u,P.call(arguments,1));var H=P.call(arguments,2);return function(){return u.apply(y,H.length?H.concat(P.call(arguments)):arguments)}}var a=0;function l(u){return"_leaflet_id"in u||(u._leaflet_id=++a),u._leaflet_id}function c(u,y,P){var H,le,Pe,ut;return ut=function(){H=!1,le&&(Pe.apply(P,le),le=!1)},Pe=function(){H?le=arguments:(u.apply(P,arguments),setTimeout(ut,y),H=!0)},Pe}function d(u,y,P){var H=y[1],le=y[0],Pe=H-le;return u===H&&P?u:((u-le)%Pe+Pe)%Pe+le}function p(){return!1}function v(u,y){if(y===!1)return u;var P=Math.pow(10,y===void 0?6:y);return Math.round(u*P)/P}function m(u){return u.trim?u.trim():u.replace(/^\s+|\s+$/g,"")}function x(u){return m(u).split(/\s+/)}function E(u,y){Object.prototype.hasOwnProperty.call(u,"options")||(u.options=u.options?s(u.options):{});for(var P in y)u.options[P]=y[P];return u.options}function A(u,y,P){var H=[];for(var le in u)H.push(encodeURIComponent(P?le.toUpperCase():le)+"="+encodeURIComponent(u[le]));return(!y||y.indexOf("?")===-1?"?":"&")+H.join("&")}var k=/\{ *([\w_ -]+) *\}/g;function D(u,y){return u.replace(k,function(P,H){var le=y[H];if(le===void 0)throw new Error("No value provided for variable "+P);return typeof le=="function"&&(le=le(y)),le})}var $=Array.isArray||function(u){return Object.prototype.toString.call(u)==="[object Array]"};function Y(u,y){for(var P=0;P<u.length;P++)if(u[P]===y)return P;return-1}var te="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function me(u){return window["webkit"+u]||window["moz"+u]||window["ms"+u]}var pe=0;function I(u){var y=+new Date,P=Math.max(0,16-(y-pe));return pe=y+P,window.setTimeout(u,P)}var z=window.requestAnimationFrame||me("RequestAnimationFrame")||I,K=window.cancelAnimationFrame||me("CancelAnimationFrame")||me("CancelRequestAnimationFrame")||function(u){window.clearTimeout(u)};function N(u,y,P){if(P&&z===I)u.call(y);else return z.call(window,o(u,y))}function B(u){u&&K.call(window,u)}var V={__proto__:null,extend:i,create:s,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:d,falseFn:p,formatNum:v,trim:m,splitWords:x,setOptions:E,getParamString:A,template:D,isArray:$,indexOf:Y,emptyImageUrl:te,requestFn:z,cancelFn:K,requestAnimFrame:N,cancelAnimFrame:B};function R(){}R.extend=function(u){var y=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=y.__super__=this.prototype,H=s(P);H.constructor=y,y.prototype=H;for(var le in this)Object.prototype.hasOwnProperty.call(this,le)&&le!=="prototype"&&le!=="__super__"&&(y[le]=this[le]);return u.statics&&i(y,u.statics),u.includes&&(j(u.includes),i.apply(null,[H].concat(u.includes))),i(H,u),delete H.statics,delete H.includes,H.options&&(H.options=P.options?s(P.options):{},i(H.options,u.options)),H._initHooks=[],H.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var Pe=0,ut=H._initHooks.length;Pe<ut;Pe++)H._initHooks[Pe].call(this)}},y},R.include=function(u){var y=this.prototype.options;return i(this.prototype,u),u.options&&(this.prototype.options=y,this.mergeOptions(u.options)),this},R.mergeOptions=function(u){return i(this.prototype.options,u),this},R.addInitHook=function(u){var y=Array.prototype.slice.call(arguments,1),P=typeof u=="function"?u:function(){this[u].apply(this,y)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function j(u){if(!(typeof L>"u"||!L||!L.Mixin)){u=$(u)?u:[u];for(var y=0;y<u.length;y++)u[y]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var W={on:function(u,y,P){if(typeof u=="object")for(var H in u)this._on(H,u[H],y);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P)}return this},off:function(u,y,P){if(!arguments.length)delete this._events;else if(typeof u=="object")for(var H in u)this._off(H,u[H],y);else{u=x(u);for(var le=arguments.length===1,Pe=0,ut=u.length;Pe<ut;Pe++)le?this._off(u[Pe]):this._off(u[Pe],y,P)}return this},_on:function(u,y,P,H){if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}if(this._listens(u,y,P)===!1){P===this&&(P=void 0);var le={fn:y,ctx:P};H&&(le.once=!0),this._events=this._events||{},this._events[u]=this._events[u]||[],this._events[u].push(le)}},_off:function(u,y,P){var H,le,Pe;if(this._events&&(H=this._events[u],!!H)){if(arguments.length===1){if(this._firingCount)for(le=0,Pe=H.length;le<Pe;le++)H[le].fn=p;delete this._events[u];return}if(typeof y!="function"){console.warn("wrong listener type: "+typeof y);return}var ut=this._listens(u,y,P);if(ut!==!1){var Ot=H[ut];this._firingCount&&(Ot.fn=p,this._events[u]=H=H.slice()),H.splice(ut,1)}}},fire:function(u,y,P){if(!this.listens(u,P))return this;var H=i({},y,{type:u,target:this,sourceTarget:y&&y.sourceTarget||this});if(this._events){var le=this._events[u];if(le){this._firingCount=this._firingCount+1||1;for(var Pe=0,ut=le.length;Pe<ut;Pe++){var Ot=le[Pe],Wt=Ot.fn;Ot.once&&this.off(u,Wt,Ot.ctx),Wt.call(Ot.ctx||this,H)}this._firingCount--}}return P&&this._propagateEvent(H),this},listens:function(u,y,P,H){typeof u!="string"&&console.warn('"string" type argument expected');var le=y;typeof y!="function"&&(H=!!y,le=void 0,P=void 0);var Pe=this._events&&this._events[u];if(Pe&&Pe.length&&this._listens(u,le,P)!==!1)return!0;if(H){for(var ut in this._eventParents)if(this._eventParents[ut].listens(u,y,P,H))return!0}return!1},_listens:function(u,y,P){if(!this._events)return!1;var H=this._events[u]||[];if(!y)return!!H.length;P===this&&(P=void 0);for(var le=0,Pe=H.length;le<Pe;le++)if(H[le].fn===y&&H[le].ctx===P)return le;return!1},once:function(u,y,P){if(typeof u=="object")for(var H in u)this._on(H,u[H],y,!0);else{u=x(u);for(var le=0,Pe=u.length;le<Pe;le++)this._on(u[le],y,P,!0)}return this},addEventParent:function(u){return this._eventParents=this._eventParents||{},this._eventParents[l(u)]=u,this},removeEventParent:function(u){return this._eventParents&&delete this._eventParents[l(u)],this},_propagateEvent:function(u){for(var y in this._eventParents)this._eventParents[y].fire(u.type,i({layer:u.target,propagatedFrom:u.target},u),!0)}};W.addEventListener=W.on,W.removeEventListener=W.clearAllEventListeners=W.off,W.addOneTimeEventListener=W.once,W.fireEvent=W.fire,W.hasEventListeners=W.listens;var X=R.extend(W);function oe(u,y,P){this.x=P?Math.round(u):u,this.y=P?Math.round(y):y}var _e=Math.trunc||function(u){return u>0?Math.floor(u):Math.ceil(u)};oe.prototype={clone:function(){return new oe(this.x,this.y)},add:function(u){return this.clone()._add(Ce(u))},_add:function(u){return this.x+=u.x,this.y+=u.y,this},subtract:function(u){return this.clone()._subtract(Ce(u))},_subtract:function(u){return this.x-=u.x,this.y-=u.y,this},divideBy:function(u){return this.clone()._divideBy(u)},_divideBy:function(u){return this.x/=u,this.y/=u,this},multiplyBy:function(u){return this.clone()._multiplyBy(u)},_multiplyBy:function(u){return this.x*=u,this.y*=u,this},scaleBy:function(u){return new oe(this.x*u.x,this.y*u.y)},unscaleBy:function(u){return new oe(this.x/u.x,this.y/u.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=_e(this.x),this.y=_e(this.y),this},distanceTo:function(u){u=Ce(u);var y=u.x-this.x,P=u.y-this.y;return Math.sqrt(y*y+P*P)},equals:function(u){return u=Ce(u),u.x===this.x&&u.y===this.y},contains:function(u){return u=Ce(u),Math.abs(u.x)<=Math.abs(this.x)&&Math.abs(u.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function Ce(u,y,P){return u instanceof oe?u:$(u)?new oe(u[0],u[1]):u==null?u:typeof u=="object"&&"x"in u&&"y"in u?new oe(u.x,u.y):new oe(u,y,P)}function De(u,y){if(u)for(var P=y?[u,y]:u,H=0,le=P.length;H<le;H++)this.extend(P[H])}De.prototype={extend:function(u){var y,P;if(!u)return this;if(u instanceof oe||typeof u[0]=="number"||"x"in u)y=P=Ce(u);else if(u=Z(u),y=u.min,P=u.max,!y||!P)return this;return!this.min&&!this.max?(this.min=y.clone(),this.max=P.clone()):(this.min.x=Math.min(y.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(y.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(u){return Ce((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,u)},getBottomLeft:function(){return Ce(this.min.x,this.max.y)},getTopRight:function(){return Ce(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(u){var y,P;return typeof u[0]=="number"||u instanceof oe?u=Ce(u):u=Z(u),u instanceof De?(y=u.min,P=u.max):y=P=u,y.x>=this.min.x&&P.x<=this.max.x&&y.y>=this.min.y&&P.y<=this.max.y},intersects:function(u){u=Z(u);var y=this.min,P=this.max,H=u.min,le=u.max,Pe=le.x>=y.x&&H.x<=P.x,ut=le.y>=y.y&&H.y<=P.y;return Pe&&ut},overlaps:function(u){u=Z(u);var y=this.min,P=this.max,H=u.min,le=u.max,Pe=le.x>y.x&&H.x<P.x,ut=le.y>y.y&&H.y<P.y;return Pe&&ut},isValid:function(){return!!(this.min&&this.max)},pad:function(u){var y=this.min,P=this.max,H=Math.abs(y.x-P.x)*u,le=Math.abs(y.y-P.y)*u;return Z(Ce(y.x-H,y.y-le),Ce(P.x+H,P.y+le))},equals:function(u){return u?(u=Z(u),this.min.equals(u.getTopLeft())&&this.max.equals(u.getBottomRight())):!1}};function Z(u,y){return!u||u instanceof De?u:new De(u,y)}function G(u,y){if(u)for(var P=y?[u,y]:u,H=0,le=P.length;H<le;H++)this.extend(P[H])}G.prototype={extend:function(u){var y=this._southWest,P=this._northEast,H,le;if(u instanceof he)H=u,le=u;else if(u instanceof G){if(H=u._southWest,le=u._northEast,!H||!le)return this}else return u?this.extend(ce(u)||re(u)):this;return!y&&!P?(this._southWest=new he(H.lat,H.lng),this._northEast=new he(le.lat,le.lng)):(y.lat=Math.min(H.lat,y.lat),y.lng=Math.min(H.lng,y.lng),P.lat=Math.max(le.lat,P.lat),P.lng=Math.max(le.lng,P.lng)),this},pad:function(u){var y=this._southWest,P=this._northEast,H=Math.abs(y.lat-P.lat)*u,le=Math.abs(y.lng-P.lng)*u;return new G(new he(y.lat-H,y.lng-le),new he(P.lat+H,P.lng+le))},getCenter:function(){return new he((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new he(this.getNorth(),this.getWest())},getSouthEast:function(){return new he(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(u){typeof u[0]=="number"||u instanceof he||"lat"in u?u=ce(u):u=re(u);var y=this._southWest,P=this._northEast,H,le;return u instanceof G?(H=u.getSouthWest(),le=u.getNorthEast()):H=le=u,H.lat>=y.lat&&le.lat<=P.lat&&H.lng>=y.lng&&le.lng<=P.lng},intersects:function(u){u=re(u);var y=this._southWest,P=this._northEast,H=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>=y.lat&&H.lat<=P.lat,ut=le.lng>=y.lng&&H.lng<=P.lng;return Pe&&ut},overlaps:function(u){u=re(u);var y=this._southWest,P=this._northEast,H=u.getSouthWest(),le=u.getNorthEast(),Pe=le.lat>y.lat&&H.lat<P.lat,ut=le.lng>y.lng&&H.lng<P.lng;return Pe&&ut},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(u,y){return u?(u=re(u),this._southWest.equals(u.getSouthWest(),y)&&this._northEast.equals(u.getNorthEast(),y)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(u,y){return u instanceof G?u:new G(u,y)}function he(u,y,P){if(isNaN(u)||isNaN(y))throw new Error("Invalid LatLng object: ("+u+", "+y+")");this.lat=+u,this.lng=+y,P!==void 0&&(this.alt=+P)}he.prototype={equals:function(u,y){if(!u)return!1;u=ce(u);var P=Math.max(Math.abs(this.lat-u.lat),Math.abs(this.lng-u.lng));return P<=(y===void 0?1e-9:y)},toString:function(u){return"LatLng("+v(this.lat,u)+", "+v(this.lng,u)+")"},distanceTo:function(u){return ee.distance(this,ce(u))},wrap:function(){return ee.wrapLatLng(this)},toBounds:function(u){var y=180*u/40075017,P=y/Math.cos(Math.PI/180*this.lat);return re([this.lat-y,this.lng-P],[this.lat+y,this.lng+P])},clone:function(){return new he(this.lat,this.lng,this.alt)}};function ce(u,y,P){return u instanceof he?u:$(u)&&typeof u[0]!="object"?u.length===3?new he(u[0],u[1],u[2]):u.length===2?new he(u[0],u[1]):null:u==null?u:typeof u=="object"&&"lat"in u?new he(u.lat,"lng"in u?u.lng:u.lon,u.alt):y===void 0?null:new he(u,y,P)}var ve={latLngToPoint:function(u,y){var P=this.projection.project(u),H=this.scale(y);return this.transformation._transform(P,H)},pointToLatLng:function(u,y){var P=this.scale(y),H=this.transformation.untransform(u,P);return this.projection.unproject(H)},project:function(u){return this.projection.project(u)},unproject:function(u){return this.projection.unproject(u)},scale:function(u){return 256*Math.pow(2,u)},zoom:function(u){return Math.log(u/256)/Math.LN2},getProjectedBounds:function(u){if(this.infinite)return null;var y=this.projection.bounds,P=this.scale(u),H=this.transformation.transform(y.min,P),le=this.transformation.transform(y.max,P);return new De(H,le)},infinite:!1,wrapLatLng:function(u){var y=this.wrapLng?d(u.lng,this.wrapLng,!0):u.lng,P=this.wrapLat?d(u.lat,this.wrapLat,!0):u.lat,H=u.alt;return new he(P,y,H)},wrapLatLngBounds:function(u){var y=u.getCenter(),P=this.wrapLatLng(y),H=y.lat-P.lat,le=y.lng-P.lng;if(H===0&&le===0)return u;var Pe=u.getSouthWest(),ut=u.getNorthEast(),Ot=new he(Pe.lat-H,Pe.lng-le),Wt=new he(ut.lat-H,ut.lng-le);return new G(Ot,Wt)}},ee=i({},ve,{wrapLng:[-180,180],R:6371e3,distance:function(u,y){var P=Math.PI/180,H=u.lat*P,le=y.lat*P,Pe=Math.sin((y.lat-u.lat)*P/2),ut=Math.sin((y.lng-u.lng)*P/2),Ot=Pe*Pe+Math.cos(H)*Math.cos(le)*ut*ut,Wt=2*Math.atan2(Math.sqrt(Ot),Math.sqrt(1-Ot));return this.R*Wt}}),J=6378137,Oe={R:J,MAX_LATITUDE:85.0511287798,project:function(u){var y=Math.PI/180,P=this.MAX_LATITUDE,H=Math.max(Math.min(P,u.lat),-P),le=Math.sin(H*y);return new oe(this.R*u.lng*y,this.R*Math.log((1+le)/(1-le))/2)},unproject:function(u){var y=180/Math.PI;return new he((2*Math.atan(Math.exp(u.y/this.R))-Math.PI/2)*y,u.x*y/this.R)},bounds:function(){var u=J*Math.PI;return new De([-u,-u],[u,u])}()};function Te(u,y,P,H){if($(u)){this._a=u[0],this._b=u[1],this._c=u[2],this._d=u[3];return}this._a=u,this._b=y,this._c=P,this._d=H}Te.prototype={transform:function(u,y){return this._transform(u.clone(),y)},_transform:function(u,y){return y=y||1,u.x=y*(this._a*u.x+this._b),u.y=y*(this._c*u.y+this._d),u},untransform:function(u,y){return y=y||1,new oe((u.x/y-this._b)/this._a,(u.y/y-this._d)/this._c)}};function Ye(u,y,P,H){return new Te(u,y,P,H)}var ge=i({},ee,{code:"EPSG:3857",projection:Oe,transformation:function(){var u=.5/(Math.PI*Oe.R);return Ye(u,.5,-u,.5)}()}),Q=i({},ge,{code:"EPSG:900913"});function ie(u){return document.createElementNS("http://www.w3.org/2000/svg",u)}function fe(u,y){var P="",H,le,Pe,ut,Ot,Wt;for(H=0,Pe=u.length;H<Pe;H++){for(Ot=u[H],le=0,ut=Ot.length;le<ut;le++)Wt=Ot[le],P+=(le?"L":"M")+Wt.x+" "+Wt.y;P+=y?lt.svg?"z":"x":""}return P||"M0 0"}var Se=document.documentElement.style,de="ActiveXObject"in window,Xe=de&&!document.addEventListener,$e="msLaunchUri"in navigator&&!("documentMode"in document),Je=cn("webkit"),He=cn("android"),Ge=cn("android 2")||cn("android 3"),xt=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Et=He&&cn("Google")&&xt<537&&!("AudioNode"in window),Kt=!!window.opera,sn=!$e&&cn("chrome"),an=cn("gecko")&&!Je&&!Kt&&!de,Qe=!sn&&cn("safari"),at=cn("phantom"),it="OTransition"in Se,Bt=navigator.platform.indexOf("Win")===0,Qt=de&&"transition"in Se,Tn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ge,xn="MozPerspective"in Se,An=!window.L_DISABLE_3D&&(Qt||Tn||xn)&&!it&&!at,Kn=typeof orientation<"u"||cn("mobile"),en=Kn&&Je,Ln=Kn&&Tn,Mn=!window.PointerEvent&&window.MSPointerEvent,Hn=!!(window.PointerEvent||Mn),hr="ontouchstart"in window||!!window.TouchEvent,vr=!window.L_NO_TOUCH&&(hr||Hn),ir=Kn&&Kt,Vr=Kn&&an,Vs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ft=function(){var u=!1;try{var y=Object.defineProperty({},"passive",{get:function(){u=!0}});window.addEventListener("testPassiveEventSupport",p,y),window.removeEventListener("testPassiveEventSupport",p,y)}catch{}return u}(),rt=function(){return!!document.createElement("canvas").getContext}(),$t=!!(document.createElementNS&&ie("svg").createSVGRect),Jt=!!$t&&function(){var u=document.createElement("div");return u.innerHTML="<svg/>",(u.firstChild&&u.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gn=!$t&&function(){try{var u=document.createElement("div");u.innerHTML='<v:shape adj="1"/>';var y=u.firstChild;return y.style.behavior="url(#default#VML)",y&&typeof y.adj=="object"}catch{return!1}}(),Sn=navigator.platform.indexOf("Mac")===0,Ut=navigator.platform.indexOf("Linux")===0;function cn(u){return navigator.userAgent.toLowerCase().indexOf(u)>=0}var lt={ie:de,ielt9:Xe,edge:$e,webkit:Je,android:He,android23:Ge,androidStock:Et,opera:Kt,chrome:sn,gecko:an,safari:Qe,phantom:at,opera12:it,win:Bt,ie3d:Qt,webkit3d:Tn,gecko3d:xn,any3d:An,mobile:Kn,mobileWebkit:en,mobileWebkit3d:Ln,msPointer:Mn,pointer:Hn,touch:vr,touchNative:hr,mobileOpera:ir,mobileGecko:Vr,retina:Vs,passiveEvents:ft,canvas:rt,svg:$t,vml:Gn,inlineSvg:Jt,mac:Sn,linux:Ut},qt=lt.msPointer?"MSPointerDown":"pointerdown",Dn=lt.msPointer?"MSPointerMove":"pointermove",Ar=lt.msPointer?"MSPointerUp":"pointerup",Tt=lt.msPointer?"MSPointerCancel":"pointercancel",zn={touchstart:qt,touchmove:Dn,touchend:Ar,touchcancel:Tt},sr={touchstart:qi,touchmove:un,touchend:un,touchcancel:un},mi={},Nr=!1;function Rr(u,y,P){return y==="touchstart"&&Cr(),sr[y]?(P=sr[y].bind(this,P),u.addEventListener(zn[y],P,!1),P):(console.warn("wrong event specified:",y),p)}function yr(u,y,P){if(!zn[y]){console.warn("wrong event specified:",y);return}u.removeEventListener(zn[y],P,!1)}function ji(u){mi[u.pointerId]=u}function _r(u){mi[u.pointerId]&&(mi[u.pointerId]=u)}function Fr(u){delete mi[u.pointerId]}function Cr(){Nr||(document.addEventListener(qt,ji,!0),document.addEventListener(Dn,_r,!0),document.addEventListener(Ar,Fr,!0),document.addEventListener(Tt,Fr,!0),Nr=!0)}function un(u,y){if(y.pointerType!==(y.MSPOINTER_TYPE_MOUSE||"mouse")){y.touches=[];for(var P in mi)y.touches.push(mi[P]);y.changedTouches=[y],u(y)}}function qi(u,y){y.MSPOINTER_TYPE_TOUCH&&y.pointerType===y.MSPOINTER_TYPE_TOUCH&&Lr(y),un(u,y)}function Zi(u){var y={},P,H;for(H in u)P=u[H],y[H]=P&&P.bind?P.bind(u):P;return u=y,y.type="dblclick",y.detail=2,y.isTrusted=!1,y._simulated=!0,y}var Vi=200;function pi(u,y){u.addEventListener("dblclick",y);var P=0,H;function le(Pe){if(Pe.detail!==1){H=Pe.detail;return}if(!(Pe.pointerType==="mouse"||Pe.sourceCapabilities&&!Pe.sourceCapabilities.firesTouchEvents)){var ut=ml(Pe);if(!(ut.some(function(Wt){return Wt instanceof HTMLLabelElement&&Wt.attributes.for})&&!ut.some(function(Wt){return Wt instanceof HTMLInputElement||Wt instanceof HTMLSelectElement}))){var Ot=Date.now();Ot-P<=Vi?(H++,H===2&&y(Zi(Pe))):H=1,P=Ot}}}return u.addEventListener("click",le),{dblclick:y,simDblclick:le}}function zr(u,y){u.removeEventListener("dblclick",y.dblclick),u.removeEventListener("click",y.simDblclick)}var Jr=si(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),gr=si(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ui=gr==="webkitTransition"||gr==="OTransition"?gr+"End":"transitionend";function qo(u){return typeof u=="string"?document.getElementById(u):u}function Is(u,y){var P=u.style[y]||u.currentStyle&&u.currentStyle[y];if((!P||P==="auto")&&document.defaultView){var H=document.defaultView.getComputedStyle(u,null);P=H?H[y]:null}return P==="auto"?null:P}function Yn(u,y,P){var H=document.createElement(u);return H.className=y||"",P&&P.appendChild(H),H}function dn(u){var y=u.parentNode;y&&y.removeChild(u)}function as(u){for(;u.firstChild;)u.removeChild(u.firstChild)}function xi(u){var y=u.parentNode;y&&y.lastChild!==u&&y.appendChild(u)}function ki(u){var y=u.parentNode;y&&y.firstChild!==u&&y.insertBefore(u,y.firstChild)}function ls(u,y){if(u.classList!==void 0)return u.classList.contains(y);var P=ps(u);return P.length>0&&new RegExp("(^|\\s)"+y+"(\\s|$)").test(P)}function lr(u,y){if(u.classList!==void 0)for(var P=x(y),H=0,le=P.length;H<le;H++)u.classList.add(P[H]);else if(!ls(u,y)){var Pe=ps(u);Ir(u,(Pe?Pe+" ":"")+y)}}function Tr(u,y){u.classList!==void 0?u.classList.remove(y):Ir(u,m((" "+ps(u)+" ").replace(" "+y+" "," ")))}function Ir(u,y){u.className.baseVal===void 0?u.className=y:u.className.baseVal=y}function ps(u){return u.correspondingElement&&(u=u.correspondingElement),u.className.baseVal===void 0?u.className:u.className.baseVal}function ci(u,y){"opacity"in u.style?u.style.opacity=y:"filter"in u.style&&Qs(u,y)}function Qs(u,y){var P=!1,H="DXImageTransform.Microsoft.Alpha";try{P=u.filters.item(H)}catch{if(y===1)return}y=Math.round(y*100),P?(P.Enabled=y!==100,P.Opacity=y):u.style.filter+=" progid:"+H+"(opacity="+y+")"}function si(u){for(var y=document.documentElement.style,P=0;P<u.length;P++)if(u[P]in y)return u[P];return!1}function Cn(u,y,P){var H=y||new oe(0,0);u.style[Jr]=(lt.ie3d?"translate("+H.x+"px,"+H.y+"px)":"translate3d("+H.x+"px,"+H.y+"px,0)")+(P?" scale("+P+")":"")}function rn(u,y){u._leaflet_pos=y,lt.any3d?Cn(u,y):(u.style.left=y.x+"px",u.style.top=y.y+"px")}function Br(u){return u._leaflet_pos||new oe(0,0)}var ms,us,fa;if("onselectstart"in document)ms=function(){wr(window,"selectstart",Lr)},us=function(){Ur(window,"selectstart",Lr)};else{var pa=si(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ms=function(){if(pa){var u=document.documentElement.style;fa=u[pa],u[pa]="none"}},us=function(){pa&&(document.documentElement.style[pa]=fa,fa=void 0)}}function ga(){wr(window,"dragstart",Lr)}function To(){Ur(window,"dragstart",Lr)}var Qr,na;function Bs(u){for(;u.tabIndex===-1;)u=u.parentNode;u.style&&(zi(),Qr=u,na=u.style.outlineStyle,u.style.outlineStyle="none",wr(window,"keydown",zi))}function zi(){Qr&&(Qr.style.outlineStyle=na,Qr=void 0,na=void 0,Ur(window,"keydown",zi))}function ra(u){do u=u.parentNode;while((!u.offsetWidth||!u.offsetHeight)&&u!==document.body);return u}function pl(u){var y=u.getBoundingClientRect();return{x:y.width/u.offsetWidth||1,y:y.height/u.offsetHeight||1,boundingClientRect:y}}var mr={__proto__:null,TRANSFORM:Jr,TRANSITION:gr,TRANSITION_END:Ui,get:qo,getStyle:Is,create:Yn,remove:dn,empty:as,toFront:xi,toBack:ki,hasClass:ls,addClass:lr,removeClass:Tr,setClass:Ir,getClass:ps,setOpacity:ci,testProp:si,setTransform:Cn,setPosition:rn,getPosition:Br,get disableTextSelection(){return ms},get enableTextSelection(){return us},disableImageDrag:ga,enableImageDrag:To,preventOutline:Bs,restoreOutline:zi,getSizedParentNode:ra,getScale:pl};function wr(u,y,P,H){if(y&&typeof y=="object")for(var le in y)vi(u,le,y[le],P);else{y=x(y);for(var Pe=0,ut=y.length;Pe<ut;Pe++)vi(u,y[Pe],P,H)}return this}var mo="_leaflet_events";function Ur(u,y,P,H){if(arguments.length===1)gl(u),delete u[mo];else if(y&&typeof y=="object")for(var le in y)Es(u,le,y[le],P);else if(y=x(y),arguments.length===2)gl(u,function(Ot){return Y(y,Ot)!==-1});else for(var Pe=0,ut=y.length;Pe<ut;Pe++)Es(u,y[Pe],P,H);return this}function gl(u,y){for(var P in u[mo]){var H=P.split(/\d/)[0];(!y||y(H))&&Es(u,H,null,null,P)}}var Va={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function vi(u,y,P,H){var le=y+l(P)+(H?"_"+l(H):"");if(u[mo]&&u[mo][le])return this;var Pe=function(Ot){return P.call(H||u,Ot||window.event)},ut=Pe;!lt.touchNative&&lt.pointer&&y.indexOf("touch")===0?Pe=Rr(u,y,Pe):lt.touch&&y==="dblclick"?Pe=pi(u,Pe):"addEventListener"in u?y==="touchstart"||y==="touchmove"||y==="wheel"||y==="mousewheel"?u.addEventListener(Va[y]||y,Pe,lt.passiveEvents?{passive:!1}:!1):y==="mouseenter"||y==="mouseleave"?(Pe=function(Ot){Ot=Ot||window.event,Nl(u,Ot)&&ut(Ot)},u.addEventListener(Va[y],Pe,!1)):u.addEventListener(y,ut,!1):u.attachEvent("on"+y,Pe),u[mo]=u[mo]||{},u[mo][le]=Pe}function Es(u,y,P,H,le){le=le||y+l(P)+(H?"_"+l(H):"");var Pe=u[mo]&&u[mo][le];if(!Pe)return this;!lt.touchNative&&lt.pointer&&y.indexOf("touch")===0?yr(u,y,Pe):lt.touch&&y==="dblclick"?zr(u,Pe):"removeEventListener"in u?u.removeEventListener(Va[y]||y,Pe,!1):u.detachEvent("on"+y,Pe),u[mo][le]=null}function vs(u){return u.stopPropagation?u.stopPropagation():u.originalEvent?u.originalEvent._stopped=!0:u.cancelBubble=!0,this}function Ju(u){return vi(u,"wheel",vs),this}function su(u){return wr(u,"mousedown touchstart dblclick contextmenu",vs),u._leaflet_disable_click=!0,this}function Lr(u){return u.preventDefault?u.preventDefault():u.returnValue=!1,this}function Yr(u){return Lr(u),vs(u),this}function ml(u){if(u.composedPath)return u.composedPath();for(var y=[],P=u.target;P;)y.push(P),P=P.parentNode;return y}function Mc(u,y){if(!y)return new oe(u.clientX,u.clientY);var P=pl(y),H=P.boundingClientRect;return new oe((u.clientX-H.left)/P.x-y.clientLeft,(u.clientY-H.top)/P.y-y.clientTop)}var ou=lt.linux&&lt.chrome?window.devicePixelRatio:lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Pu(u){return lt.edge?u.wheelDeltaY/2:u.deltaY&&u.deltaMode===0?-u.deltaY/ou:u.deltaY&&u.deltaMode===1?-u.deltaY*20:u.deltaY&&u.deltaMode===2?-u.deltaY*60:u.deltaX||u.deltaZ?0:u.wheelDelta?(u.wheelDeltaY||u.wheelDelta)/2:u.detail&&Math.abs(u.detail)<32765?-u.detail*20:u.detail?u.detail/-32765*60:0}function Nl(u,y){var P=y.relatedTarget;if(!P)return!0;try{for(;P&&P!==u;)P=P.parentNode}catch{return!1}return P!==u}var au={__proto__:null,on:wr,off:Ur,stopPropagation:vs,disableScrollPropagation:Ju,disableClickPropagation:su,preventDefault:Lr,stop:Yr,getPropagationPath:ml,getMousePosition:Mc,getWheelDelta:Pu,isExternalTarget:Nl,addListener:wr,removeListener:Ur},Mu=X.extend({run:function(u,y,P,H){this.stop(),this._el=u,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(H||.5,.2),this._startPos=Br(u),this._offset=y.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(u){var y=+new Date-this._startTime,P=this._duration*1e3;y<P?this._runFrame(this._easeOut(y/P),u):(this._runFrame(1),this._complete())},_runFrame:function(u,y){var P=this._startPos.add(this._offset.multiplyBy(u));y&&P._round(),rn(this._el,P),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(u){return 1-Math.pow(1-u,this._easeOutPower)}}),ei=X.extend({options:{crs:ge,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(u,y){y=E(this,y),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(u),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),y.maxBounds&&this.setMaxBounds(y.maxBounds),y.zoom!==void 0&&(this._zoom=this._limitZoom(y.zoom)),y.center&&y.zoom!==void 0&&this.setView(ce(y.center),y.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=gr&&lt.any3d&&!lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),wr(this._proxy,Ui,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(u,y,P){if(y=y===void 0?this._zoom:this._limitZoom(y),u=this._limitCenter(ce(u),y,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=i({animate:P.animate},P.zoom),P.pan=i({animate:P.animate,duration:P.duration},P.pan));var H=this._zoom!==y?this._tryAnimatedZoom&&this._tryAnimatedZoom(u,y,P.zoom):this._tryAnimatedPan(u,P.pan);if(H)return clearTimeout(this._sizeTimer),this}return this._resetView(u,y,P.pan&&P.pan.noMoveStart),this},setZoom:function(u,y){return this._loaded?this.setView(this.getCenter(),u,{zoom:y}):(this._zoom=u,this)},zoomIn:function(u,y){return u=u||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+u,y)},zoomOut:function(u,y){return u=u||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-u,y)},setZoomAround:function(u,y,P){var H=this.getZoomScale(y),le=this.getSize().divideBy(2),Pe=u instanceof oe?u:this.latLngToContainerPoint(u),ut=Pe.subtract(le).multiplyBy(1-1/H),Ot=this.containerPointToLatLng(le.add(ut));return this.setView(Ot,y,{zoom:P})},_getBoundsCenterZoom:function(u,y){y=y||{},u=u.getBounds?u.getBounds():re(u);var P=Ce(y.paddingTopLeft||y.padding||[0,0]),H=Ce(y.paddingBottomRight||y.padding||[0,0]),le=this.getBoundsZoom(u,!1,P.add(H));if(le=typeof y.maxZoom=="number"?Math.min(y.maxZoom,le):le,le===1/0)return{center:u.getCenter(),zoom:le};var Pe=H.subtract(P).divideBy(2),ut=this.project(u.getSouthWest(),le),Ot=this.project(u.getNorthEast(),le),Wt=this.unproject(ut.add(Ot).divideBy(2).add(Pe),le);return{center:Wt,zoom:le}},fitBounds:function(u,y){if(u=re(u),!u.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(u,y);return this.setView(P.center,P.zoom,y)},fitWorld:function(u){return this.fitBounds([[-90,-180],[90,180]],u)},panTo:function(u,y){return this.setView(u,this._zoom,{pan:y})},panBy:function(u,y){if(u=Ce(u).round(),y=y||{},!u.x&&!u.y)return this.fire("moveend");if(y.animate!==!0&&!this.getSize().contains(u))return this._resetView(this.unproject(this.project(this.getCenter()).add(u)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Mu,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),y.noMoveStart||this.fire("movestart"),y.animate!==!1){lr(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(u).round();this._panAnim.run(this._mapPane,P,y.duration||.25,y.easeLinearity)}else this._rawPanBy(u),this.fire("move").fire("moveend");return this},flyTo:function(u,y,P){if(P=P||{},P.animate===!1||!lt.any3d)return this.setView(u,y,P);this._stop();var H=this.project(this.getCenter()),le=this.project(u),Pe=this.getSize(),ut=this._zoom;u=ce(u),y=y===void 0?ut:y;var Ot=Math.max(Pe.x,Pe.y),Wt=Ot*this.getZoomScale(ut,y),fn=le.distanceTo(H)||1,Rn=1.42,er=Rn*Rn;function $r(bi){var ao=bi?-1:1,Ie=bi?Wt:Ot,Bo=Wt*Wt-Ot*Ot+ao*er*er*fn*fn,tc=2*Ie*er*fn,Ks=Bo/tc,Gr=Math.sqrt(Ks*Ks+1)-Ks,Vh=Gr<1e-9?-18:Math.log(Gr);return Vh}function As(bi){return(Math.exp(bi)-Math.exp(-bi))/2}function cs(bi){return(Math.exp(bi)+Math.exp(-bi))/2}function Ys(bi){return As(bi)/cs(bi)}var es=$r(0);function Io(bi){return Ot*(cs(es)/cs(es+Rn*bi))}function sh(bi){return Ot*(cs(es)*Ys(es+Rn*bi)-As(es))/er}function Ba(bi){return 1-Math.pow(1-bi,1.5)}var wa=Date.now(),oa=($r(1)-es)/Rn,Od=P.duration?1e3*P.duration:1e3*oa*.8;function Tu(){var bi=(Date.now()-wa)/Od,ao=Ba(bi)*oa;bi<=1?(this._flyToFrame=N(Tu,this),this._move(this.unproject(H.add(le.subtract(H).multiplyBy(sh(ao)/fn)),ut),this.getScaleZoom(Ot/Io(ao),ut),{flyTo:!0})):this._move(u,y)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),Tu.call(this),this},flyToBounds:function(u,y){var P=this._getBoundsCenterZoom(u,y);return this.flyTo(P.center,P.zoom,y)},setMaxBounds:function(u){return u=re(u),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),u.isValid()?(this.options.maxBounds=u,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(u){var y=this.options.minZoom;return this.options.minZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(u):this},setMaxZoom:function(u){var y=this.options.maxZoom;return this.options.maxZoom=u,this._loaded&&y!==u&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(u):this},panInsideBounds:function(u,y){this._enforcingBounds=!0;var P=this.getCenter(),H=this._limitCenter(P,this._zoom,re(u));return P.equals(H)||this.panTo(H,y),this._enforcingBounds=!1,this},panInside:function(u,y){y=y||{};var P=Ce(y.paddingTopLeft||y.padding||[0,0]),H=Ce(y.paddingBottomRight||y.padding||[0,0]),le=this.project(this.getCenter()),Pe=this.project(u),ut=this.getPixelBounds(),Ot=Z([ut.min.add(P),ut.max.subtract(H)]),Wt=Ot.getSize();if(!Ot.contains(Pe)){this._enforcingBounds=!0;var fn=Pe.subtract(Ot.getCenter()),Rn=Ot.extend(Pe).getSize().subtract(Wt);le.x+=fn.x<0?-Rn.x:Rn.x,le.y+=fn.y<0?-Rn.y:Rn.y,this.panTo(this.unproject(le),y),this._enforcingBounds=!1}return this},invalidateSize:function(u){if(!this._loaded)return this;u=i({animate:!1,pan:!0},u===!0?{animate:!0}:u);var y=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),H=y.divideBy(2).round(),le=P.divideBy(2).round(),Pe=H.subtract(le);return!Pe.x&&!Pe.y?this:(u.animate&&u.pan?this.panBy(Pe):(u.pan&&this._rawPanBy(Pe),this.fire("move"),u.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:y,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(u){if(u=this._locateOptions=i({timeout:1e4,watch:!1},u),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var y=o(this._handleGeolocationResponse,this),P=o(this._handleGeolocationError,this);return u.watch?this._locationWatchId=navigator.geolocation.watchPosition(y,P,u):navigator.geolocation.getCurrentPosition(y,P,u),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(u){if(this._container._leaflet_id){var y=u.code,P=u.message||(y===1?"permission denied":y===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:y,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(u){if(this._container._leaflet_id){var y=u.coords.latitude,P=u.coords.longitude,H=new he(y,P),le=H.toBounds(u.coords.accuracy*2),Pe=this._locateOptions;if(Pe.setView){var ut=this.getBoundsZoom(le);this.setView(H,Pe.maxZoom?Math.min(ut,Pe.maxZoom):ut)}var Ot={latlng:H,bounds:le,timestamp:u.timestamp};for(var Wt in u.coords)typeof u.coords[Wt]=="number"&&(Ot[Wt]=u.coords[Wt]);this.fire("locationfound",Ot)}},addHandler:function(u,y){if(!y)return this;var P=this[u]=new y(this);return this._handlers.push(P),this.options[u]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),dn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var u;for(u in this._layers)this._layers[u].remove();for(u in this._panes)dn(this._panes[u]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(u,y){var P="leaflet-pane"+(u?" leaflet-"+u.replace("Pane","")+"-pane":""),H=Yn("div",P,y||this._mapPane);return u&&(this._panes[u]=H),H},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var u=this.getPixelBounds(),y=this.unproject(u.getBottomLeft()),P=this.unproject(u.getTopRight());return new G(y,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(u,y,P){u=re(u),P=Ce(P||[0,0]);var H=this.getZoom()||0,le=this.getMinZoom(),Pe=this.getMaxZoom(),ut=u.getNorthWest(),Ot=u.getSouthEast(),Wt=this.getSize().subtract(P),fn=Z(this.project(Ot,H),this.project(ut,H)).getSize(),Rn=lt.any3d?this.options.zoomSnap:1,er=Wt.x/fn.x,$r=Wt.y/fn.y,As=y?Math.max(er,$r):Math.min(er,$r);return H=this.getScaleZoom(As,H),Rn&&(H=Math.round(H/(Rn/100))*(Rn/100),H=y?Math.ceil(H/Rn)*Rn:Math.floor(H/Rn)*Rn),Math.max(le,Math.min(Pe,H))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new oe(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(u,y){var P=this._getTopLeftPoint(u,y);return new De(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(u){return this.options.crs.getProjectedBounds(u===void 0?this.getZoom():u)},getPane:function(u){return typeof u=="string"?this._panes[u]:u},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(u,y){var P=this.options.crs;return y=y===void 0?this._zoom:y,P.scale(u)/P.scale(y)},getScaleZoom:function(u,y){var P=this.options.crs;y=y===void 0?this._zoom:y;var H=P.zoom(u*P.scale(y));return isNaN(H)?1/0:H},project:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.latLngToPoint(ce(u),y)},unproject:function(u,y){return y=y===void 0?this._zoom:y,this.options.crs.pointToLatLng(Ce(u),y)},layerPointToLatLng:function(u){var y=Ce(u).add(this.getPixelOrigin());return this.unproject(y)},latLngToLayerPoint:function(u){var y=this.project(ce(u))._round();return y._subtract(this.getPixelOrigin())},wrapLatLng:function(u){return this.options.crs.wrapLatLng(ce(u))},wrapLatLngBounds:function(u){return this.options.crs.wrapLatLngBounds(re(u))},distance:function(u,y){return this.options.crs.distance(ce(u),ce(y))},containerPointToLayerPoint:function(u){return Ce(u).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(u){return Ce(u).add(this._getMapPanePos())},containerPointToLatLng:function(u){var y=this.containerPointToLayerPoint(Ce(u));return this.layerPointToLatLng(y)},latLngToContainerPoint:function(u){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ce(u)))},mouseEventToContainerPoint:function(u){return Mc(u,this._container)},mouseEventToLayerPoint:function(u){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(u))},mouseEventToLatLng:function(u){return this.layerPointToLatLng(this.mouseEventToLayerPoint(u))},_initContainer:function(u){var y=this._container=qo(u);if(y){if(y._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");wr(y,"scroll",this._onScroll,this),this._containerId=l(y)},_initLayout:function(){var u=this._container;this._fadeAnimated=this.options.fadeAnimation&&lt.any3d,lr(u,"leaflet-container"+(lt.touch?" leaflet-touch":"")+(lt.retina?" leaflet-retina":"")+(lt.ielt9?" leaflet-oldie":"")+(lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var y=Is(u,"position");y!=="absolute"&&y!=="relative"&&y!=="fixed"&&y!=="sticky"&&(u.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var u=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),rn(this._mapPane,new oe(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(lr(u.markerPane,"leaflet-zoom-hide"),lr(u.shadowPane,"leaflet-zoom-hide"))},_resetView:function(u,y,P){rn(this._mapPane,new oe(0,0));var H=!this._loaded;this._loaded=!0,y=this._limitZoom(y),this.fire("viewprereset");var le=this._zoom!==y;this._moveStart(le,P)._move(u,y)._moveEnd(le),this.fire("viewreset"),H&&this.fire("load")},_moveStart:function(u,y){return u&&this.fire("zoomstart"),y||this.fire("movestart"),this},_move:function(u,y,P,H){y===void 0&&(y=this._zoom);var le=this._zoom!==y;return this._zoom=y,this._lastCenter=u,this._pixelOrigin=this._getNewPixelOrigin(u),H?P&&P.pinch&&this.fire("zoom",P):((le||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(u){return u&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(u){rn(this._mapPane,this._getMapPanePos().subtract(u))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(u){this._targets={},this._targets[l(this._container)]=this;var y=u?Ur:wr;y(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&y(window,"resize",this._onResize,this),lt.any3d&&this.options.transform3DLimit&&(u?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var u=this._getMapPanePos();Math.max(Math.abs(u.x),Math.abs(u.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(u,y){for(var P=[],H,le=y==="mouseout"||y==="mouseover",Pe=u.target||u.srcElement,ut=!1;Pe;){if(H=this._targets[l(Pe)],H&&(y==="click"||y==="preclick")&&this._draggableMoved(H)){ut=!0;break}if(H&&H.listens(y,!0)&&(le&&!Nl(Pe,u)||(P.push(H),le))||Pe===this._container)break;Pe=Pe.parentNode}return!P.length&&!ut&&!le&&this.listens(y,!0)&&(P=[this]),P},_isClickDisabled:function(u){for(;u&&u!==this._container;){if(u._leaflet_disable_click)return!0;u=u.parentNode}},_handleDOMEvent:function(u){var y=u.target||u.srcElement;if(!(!this._loaded||y._leaflet_disable_events||u.type==="click"&&this._isClickDisabled(y))){var P=u.type;P==="mousedown"&&Bs(y),this._fireDOMEvent(u,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(u,y,P){if(u.type==="click"){var H=i({},u);H.type="preclick",this._fireDOMEvent(H,H.type,P)}var le=this._findEventTargets(u,y);if(P){for(var Pe=[],ut=0;ut<P.length;ut++)P[ut].listens(y,!0)&&Pe.push(P[ut]);le=Pe.concat(le)}if(le.length){y==="contextmenu"&&Lr(u);var Ot=le[0],Wt={originalEvent:u};if(u.type!=="keypress"&&u.type!=="keydown"&&u.type!=="keyup"){var fn=Ot.getLatLng&&(!Ot._radius||Ot._radius<=10);Wt.containerPoint=fn?this.latLngToContainerPoint(Ot.getLatLng()):this.mouseEventToContainerPoint(u),Wt.layerPoint=this.containerPointToLayerPoint(Wt.containerPoint),Wt.latlng=fn?Ot.getLatLng():this.layerPointToLatLng(Wt.layerPoint)}for(ut=0;ut<le.length;ut++)if(le[ut].fire(y,Wt,!0),Wt.originalEvent._stopped||le[ut].options.bubblingMouseEvents===!1&&Y(this._mouseEvents,y)!==-1)return}},_draggableMoved:function(u){return u=u.dragging&&u.dragging.enabled()?u:this,u.dragging&&u.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var u=0,y=this._handlers.length;u<y;u++)this._handlers[u].disable()},whenReady:function(u,y){return this._loaded?u.call(y||this,{target:this}):this.on("load",u,y),this},_getMapPanePos:function(){return Br(this._mapPane)||new oe(0,0)},_moved:function(){var u=this._getMapPanePos();return u&&!u.equals([0,0])},_getTopLeftPoint:function(u,y){var P=u&&y!==void 0?this._getNewPixelOrigin(u,y):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(u,y){var P=this.getSize()._divideBy(2);return this.project(u,y)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(u,y,P){var H=this._getNewPixelOrigin(P,y);return this.project(u,y)._subtract(H)},_latLngBoundsToNewLayerBounds:function(u,y,P){var H=this._getNewPixelOrigin(P,y);return Z([this.project(u.getSouthWest(),y)._subtract(H),this.project(u.getNorthWest(),y)._subtract(H),this.project(u.getSouthEast(),y)._subtract(H),this.project(u.getNorthEast(),y)._subtract(H)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(u){return this.latLngToLayerPoint(u).subtract(this._getCenterLayerPoint())},_limitCenter:function(u,y,P){if(!P)return u;var H=this.project(u,y),le=this.getSize().divideBy(2),Pe=new De(H.subtract(le),H.add(le)),ut=this._getBoundsOffset(Pe,P,y);return Math.abs(ut.x)<=1&&Math.abs(ut.y)<=1?u:this.unproject(H.add(ut),y)},_limitOffset:function(u,y){if(!y)return u;var P=this.getPixelBounds(),H=new De(P.min.add(u),P.max.add(u));return u.add(this._getBoundsOffset(H,y))},_getBoundsOffset:function(u,y,P){var H=Z(this.project(y.getNorthEast(),P),this.project(y.getSouthWest(),P)),le=H.min.subtract(u.min),Pe=H.max.subtract(u.max),ut=this._rebound(le.x,-Pe.x),Ot=this._rebound(le.y,-Pe.y);return new oe(ut,Ot)},_rebound:function(u,y){return u+y>0?Math.round(u-y)/2:Math.max(0,Math.ceil(u))-Math.max(0,Math.floor(y))},_limitZoom:function(u){var y=this.getMinZoom(),P=this.getMaxZoom(),H=lt.any3d?this.options.zoomSnap:1;return H&&(u=Math.round(u/H)*H),Math.max(y,Math.min(P,u))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Tr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(u,y){var P=this._getCenterOffset(u)._trunc();return(y&&y.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,y),!0)},_createAnimProxy:function(){var u=this._proxy=Yn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(u),this.on("zoomanim",function(y){var P=Jr,H=this._proxy.style[P];Cn(this._proxy,this.project(y.center,y.zoom),this.getZoomScale(y.zoom,1)),H===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){dn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var u=this.getCenter(),y=this.getZoom();Cn(this._proxy,this.project(u,y),this.getZoomScale(y,1))},_catchTransitionEnd:function(u){this._animatingZoom&&u.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(u,y,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(y-this._zoom)>this.options.zoomAnimationThreshold)return!1;var H=this.getZoomScale(y),le=this._getCenterOffset(u)._divideBy(1-1/H);return P.animate!==!0&&!this.getSize().contains(le)?!1:(N(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(u,y,!0)},this),!0)},_animateZoom:function(u,y,P,H){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=u,this._animateToZoom=y,lr(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:u,zoom:y,noUpdate:H}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Tr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ys(u,y){return new ei(u,y)}var ur=R.extend({options:{position:"topright"},initialize:function(u){E(this,u)},getPosition:function(){return this.options.position},setPosition:function(u){var y=this._map;return y&&y.removeControl(this),this.options.position=u,y&&y.addControl(this),this},getContainer:function(){return this._container},addTo:function(u){this.remove(),this._map=u;var y=this._container=this.onAdd(u),P=this.getPosition(),H=u._controlCorners[P];return lr(y,"leaflet-control"),P.indexOf("bottom")!==-1?H.insertBefore(y,H.firstChild):H.appendChild(y),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(dn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(u){this._map&&u&&u.screenX>0&&u.screenY>0&&this._map.getContainer().focus()}}),bs=function(u){return new ur(u)};ei.include({addControl:function(u){return u.addTo(this),this},removeControl:function(u){return u.remove(),this},_initControlPos:function(){var u=this._controlCorners={},y="leaflet-",P=this._controlContainer=Yn("div",y+"control-container",this._container);function H(le,Pe){var ut=y+le+" "+y+Pe;u[le+Pe]=Yn("div",ut,P)}H("top","left"),H("top","right"),H("bottom","left"),H("bottom","right")},_clearControlPos:function(){for(var u in this._controlCorners)dn(this._controlCorners[u]);dn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Il=ur.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(u,y,P,H){return P<H?-1:H<P?1:0}},initialize:function(u,y,P){E(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var H in u)this._addLayer(u[H],H);for(H in y)this._addLayer(y[H],H,!0)},onAdd:function(u){this._initLayout(),this._update(),this._map=u,u.on("zoomend",this._checkDisabledLayers,this);for(var y=0;y<this._layers.length;y++)this._layers[y].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(u){return ur.prototype.addTo.call(this,u),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(u,y){return this._addLayer(u,y),this._map?this._update():this},addOverlay:function(u,y){return this._addLayer(u,y,!0),this._map?this._update():this},removeLayer:function(u){u.off("add remove",this._onLayerChange,this);var y=this._getLayer(l(u));return y&&this._layers.splice(this._layers.indexOf(y),1),this._map?this._update():this},expand:function(){lr(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var u=this._map.getSize().y-(this._container.offsetTop+50);return u<this._section.clientHeight?(lr(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=u+"px"):Tr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Tr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var u="leaflet-control-layers",y=this._container=Yn("div",u),P=this.options.collapsed;y.setAttribute("aria-haspopup",!0),su(y),Ju(y);var H=this._section=Yn("section",u+"-list");P&&(this._map.on("click",this.collapse,this),wr(y,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var le=this._layersLink=Yn("a",u+"-toggle",y);le.href="#",le.title="Layers",le.setAttribute("role","button"),wr(le,{keydown:function(Pe){Pe.keyCode===13&&this._expandSafely()},click:function(Pe){Lr(Pe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=Yn("div",u+"-base",H),this._separator=Yn("div",u+"-separator",H),this._overlaysList=Yn("div",u+"-overlays",H),y.appendChild(H)},_getLayer:function(u){for(var y=0;y<this._layers.length;y++)if(this._layers[y]&&l(this._layers[y].layer)===u)return this._layers[y]},_addLayer:function(u,y,P){this._map&&u.on("add remove",this._onLayerChange,this),this._layers.push({layer:u,name:y,overlay:P}),this.options.sortLayers&&this._layers.sort(o(function(H,le){return this.options.sortFunction(H.layer,le.layer,H.name,le.name)},this)),this.options.autoZIndex&&u.setZIndex&&(this._lastZIndex++,u.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;as(this._baseLayersList),as(this._overlaysList),this._layerControlInputs=[];var u,y,P,H,le=0;for(P=0;P<this._layers.length;P++)H=this._layers[P],this._addItem(H),y=y||H.overlay,u=u||!H.overlay,le+=H.overlay?0:1;return this.options.hideSingleBase&&(u=u&&le>1,this._baseLayersList.style.display=u?"":"none"),this._separator.style.display=y&&u?"":"none",this},_onLayerChange:function(u){this._handlingClick||this._update();var y=this._getLayer(l(u.target)),P=y.overlay?u.type==="add"?"overlayadd":"overlayremove":u.type==="add"?"baselayerchange":null;P&&this._map.fire(P,y)},_createRadioElement:function(u,y){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+u+'"'+(y?' checked="checked"':"")+"/>",H=document.createElement("div");return H.innerHTML=P,H.firstChild},_addItem:function(u){var y=document.createElement("label"),P=this._map.hasLayer(u.layer),H;u.overlay?(H=document.createElement("input"),H.type="checkbox",H.className="leaflet-control-layers-selector",H.defaultChecked=P):H=this._createRadioElement("leaflet-base-layers_"+l(this),P),this._layerControlInputs.push(H),H.layerId=l(u.layer),wr(H,"click",this._onInputClick,this);var le=document.createElement("span");le.innerHTML=" "+u.name;var Pe=document.createElement("span");y.appendChild(Pe),Pe.appendChild(H),Pe.appendChild(le);var ut=u.overlay?this._overlaysList:this._baseLayersList;return ut.appendChild(y),this._checkDisabledLayers(),y},_onInputClick:function(){if(!this._preventClick){var u=this._layerControlInputs,y,P,H=[],le=[];this._handlingClick=!0;for(var Pe=u.length-1;Pe>=0;Pe--)y=u[Pe],P=this._getLayer(y.layerId).layer,y.checked?H.push(P):y.checked||le.push(P);for(Pe=0;Pe<le.length;Pe++)this._map.hasLayer(le[Pe])&&this._map.removeLayer(le[Pe]);for(Pe=0;Pe<H.length;Pe++)this._map.hasLayer(H[Pe])||this._map.addLayer(H[Pe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var u=this._layerControlInputs,y,P,H=this._map.getZoom(),le=u.length-1;le>=0;le--)y=u[le],P=this._getLayer(y.layerId).layer,y.disabled=P.options.minZoom!==void 0&&H<P.options.minZoom||P.options.maxZoom!==void 0&&H>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var u=this._section;this._preventClick=!0,wr(u,"click",Lr),this.expand();var y=this;setTimeout(function(){Ur(u,"click",Lr),y._preventClick=!1})}}),Ua=function(u,y,P){return new Il(u,y,P)},Xi=ur.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(u){var y="leaflet-control-zoom",P=Yn("div",y+" leaflet-bar"),H=this.options;return this._zoomInButton=this._createButton(H.zoomInText,H.zoomInTitle,y+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(H.zoomOutText,H.zoomOutTitle,y+"-out",P,this._zoomOut),this._updateDisabled(),u.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(u){u.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(u){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(u.shiftKey?3:1))},_zoomOut:function(u){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(u.shiftKey?3:1))},_createButton:function(u,y,P,H,le){var Pe=Yn("a",P,H);return Pe.innerHTML=u,Pe.href="#",Pe.title=y,Pe.setAttribute("role","button"),Pe.setAttribute("aria-label",y),su(Pe),wr(Pe,"click",Yr),wr(Pe,"click",le,this),wr(Pe,"click",this._refocusOnMap,this),Pe},_updateDisabled:function(){var u=this._map,y="leaflet-disabled";Tr(this._zoomInButton,y),Tr(this._zoomOutButton,y),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||u._zoom===u.getMinZoom())&&(lr(this._zoomOutButton,y),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||u._zoom===u.getMaxZoom())&&(lr(this._zoomInButton,y),this._zoomInButton.setAttribute("aria-disabled","true"))}});ei.mergeOptions({zoomControl:!0}),ei.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Xi,this.addControl(this.zoomControl))});var ku=function(u){return new Xi(u)},Pa=ur.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(u){var y="leaflet-control-scale",P=Yn("div",y),H=this.options;return this._addScales(H,y+"-line",P),u.on(H.updateWhenIdle?"moveend":"move",this._update,this),u.whenReady(this._update,this),P},onRemove:function(u){u.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(u,y,P){u.metric&&(this._mScale=Yn("div",y,P)),u.imperial&&(this._iScale=Yn("div",y,P))},_update:function(){var u=this._map,y=u.getSize().y/2,P=u.distance(u.containerPointToLatLng([0,y]),u.containerPointToLatLng([this.options.maxWidth,y]));this._updateScales(P)},_updateScales:function(u){this.options.metric&&u&&this._updateMetric(u),this.options.imperial&&u&&this._updateImperial(u)},_updateMetric:function(u){var y=this._getRoundNum(u),P=y<1e3?y+" m":y/1e3+" km";this._updateScale(this._mScale,P,y/u)},_updateImperial:function(u){var y=u*3.2808399,P,H,le;y>5280?(P=y/5280,H=this._getRoundNum(P),this._updateScale(this._iScale,H+" mi",H/P)):(le=this._getRoundNum(y),this._updateScale(this._iScale,le+" ft",le/y))},_updateScale:function(u,y,P){u.style.width=Math.round(this.options.maxWidth*P)+"px",u.innerHTML=y},_getRoundNum:function(u){var y=Math.pow(10,(Math.floor(u)+"").length-1),P=u/y;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,y*P}}),lu=function(u){return new Pa(u)},uu='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ia=ur.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(lt.inlineSvg?uu+" ":"")+"Leaflet</a>"},initialize:function(u){E(this,u),this._attributions={}},onAdd:function(u){u.attributionControl=this,this._container=Yn("div","leaflet-control-attribution"),su(this._container);for(var y in u._layers)u._layers[y].getAttribution&&this.addAttribution(u._layers[y].getAttribution());return this._update(),u.on("layeradd",this._addAttribution,this),this._container},onRemove:function(u){u.off("layeradd",this._addAttribution,this)},_addAttribution:function(u){u.layer.getAttribution&&(this.addAttribution(u.layer.getAttribution()),u.layer.once("remove",function(){this.removeAttribution(u.layer.getAttribution())},this))},setPrefix:function(u){return this.options.prefix=u,this._update(),this},addAttribution:function(u){return u?(this._attributions[u]||(this._attributions[u]=0),this._attributions[u]++,this._update(),this):this},removeAttribution:function(u){return u?(this._attributions[u]&&(this._attributions[u]--,this._update()),this):this},_update:function(){if(this._map){var u=[];for(var y in this._attributions)this._attributions[y]&&u.push(y);var P=[];this.options.prefix&&P.push(this.options.prefix),u.length&&P.push(u.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});ei.mergeOptions({attributionControl:!0}),ei.addInitHook(function(){this.options.attributionControl&&new ia().addTo(this)});var cu=function(u){return new ia(u)};ur.Layers=Il,ur.Zoom=Xi,ur.Scale=Pa,ur.Attribution=ia,bs.layers=Ua,bs.zoom=ku,bs.scale=lu,bs.attribution=cu;var Li=R.extend({initialize:function(u){this._map=u},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Li.addTo=function(u,y){return u.addHandler(y,this),this};var kc={Events:W},Us=lt.touch?"touchstart mousedown":"mousedown",ma=X.extend({options:{clickTolerance:3},initialize:function(u,y,P,H){E(this,H),this._element=u,this._dragStartTarget=y||u,this._preventOutline=P},enable:function(){this._enabled||(wr(this._dragStartTarget,Us,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ma._dragging===this&&this.finishDrag(!0),Ur(this._dragStartTarget,Us,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(u){if(this._enabled&&(this._moved=!1,!ls(this._element,"leaflet-zoom-anim"))){if(u.touches&&u.touches.length!==1){ma._dragging===this&&this.finishDrag();return}if(!(ma._dragging||u.shiftKey||u.which!==1&&u.button!==1&&!u.touches)&&(ma._dragging=this,this._preventOutline&&Bs(this._element),ga(),ms(),!this._moving)){this.fire("down");var y=u.touches?u.touches[0]:u,P=ra(this._element);this._startPoint=new oe(y.clientX,y.clientY),this._startPos=Br(this._element),this._parentScale=pl(P);var H=u.type==="mousedown";wr(document,H?"mousemove":"touchmove",this._onMove,this),wr(document,H?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(u){if(this._enabled){if(u.touches&&u.touches.length>1){this._moved=!0;return}var y=u.touches&&u.touches.length===1?u.touches[0]:u,P=new oe(y.clientX,y.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,Lr(u),this._moved||(this.fire("dragstart"),this._moved=!0,lr(document.body,"leaflet-dragging"),this._lastTarget=u.target||u.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),lr(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=u,this._updatePosition())}},_updatePosition:function(){var u={originalEvent:this._lastEvent};this.fire("predrag",u),rn(this._element,this._newPos),this.fire("drag",u)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(u){Tr(document.body,"leaflet-dragging"),this._lastTarget&&(Tr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ur(document,"mousemove touchmove",this._onMove,this),Ur(document,"mouseup touchend touchcancel",this._onUp,this),To(),us();var y=this._moved&&this._moving;this._moving=!1,ma._dragging=!1,y&&this.fire("dragend",{noInertia:u,distance:this._newPos.distanceTo(this._startPos)})}});function hu(u,y,P){var H,le=[1,4,2,8],Pe,ut,Ot,Wt,fn,Rn,er,$r;for(Pe=0,Rn=u.length;Pe<Rn;Pe++)u[Pe]._code=Ht(u[Pe],y);for(Ot=0;Ot<4;Ot++){for(er=le[Ot],H=[],Pe=0,Rn=u.length,ut=Rn-1;Pe<Rn;ut=Pe++)Wt=u[Pe],fn=u[ut],Wt._code&er?fn._code&er||($r=Pt(fn,Wt,er,y,P),$r._code=Ht($r,y),H.push($r)):(fn._code&er&&($r=Pt(fn,Wt,er,y,P),$r._code=Ht($r,y),H.push($r)),H.push(Wt));u=H}return u}function va(u,y){var P,H,le,Pe,ut,Ot,Wt,fn,Rn;if(!u||u.length===0)throw new Error("latlngs not passed");$n(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var er=ce([0,0]),$r=re(u),As=$r.getNorthWest().distanceTo($r.getSouthWest())*$r.getNorthEast().distanceTo($r.getNorthWest());As<1700&&(er=Bl(u));var cs=u.length,Ys=[];for(P=0;P<cs;P++){var es=ce(u[P]);Ys.push(y.project(ce([es.lat-er.lat,es.lng-er.lng])))}for(Ot=Wt=fn=0,P=0,H=cs-1;P<cs;H=P++)le=Ys[P],Pe=Ys[H],ut=le.y*Pe.x-Pe.y*le.x,Wt+=(le.x+Pe.x)*ut,fn+=(le.y+Pe.y)*ut,Ot+=ut*3;Ot===0?Rn=Ys[0]:Rn=[Wt/Ot,fn/Ot];var Io=y.unproject(Ce(Rn));return ce([Io.lat+er.lat,Io.lng+er.lng])}function Bl(u){for(var y=0,P=0,H=0,le=0;le<u.length;le++){var Pe=ce(u[le]);y+=Pe.lat,P+=Pe.lng,H++}return ce([y/H,P/H])}var Rl={__proto__:null,clipPolygon:hu,polygonCenter:va,centroid:Bl};function Si(u,y){if(!y||!u.length)return u.slice();var P=y*y;return u=we(u,P),u=_s(u,P),u}function Yo(u,y,P){return Math.sqrt(Bn(u,y,P,!0))}function Ha(u,y,P){return Bn(u,y,P)}function _s(u,y){var P=u.length,H=typeof Uint8Array<"u"?Uint8Array:Array,le=new H(P);le[0]=le[P-1]=1,F(u,le,y,0,P-1);var Pe,ut=[];for(Pe=0;Pe<P;Pe++)le[Pe]&&ut.push(u[Pe]);return ut}function F(u,y,P,H,le){var Pe=0,ut,Ot,Wt;for(Ot=H+1;Ot<=le-1;Ot++)Wt=Bn(u[Ot],u[H],u[le],!0),Wt>Pe&&(ut=Ot,Pe=Wt);Pe>P&&(y[ut]=1,F(u,y,P,H,ut),F(u,y,P,ut,le))}function we(u,y){for(var P=[u[0]],H=1,le=0,Pe=u.length;H<Pe;H++)mn(u[H],u[le])>y&&(P.push(u[H]),le=H);return le<Pe-1&&P.push(u[Pe-1]),P}var et;function dt(u,y,P,H,le){var Pe=H?et:Ht(u,P),ut=Ht(y,P),Ot,Wt,fn;for(et=ut;;){if(!(Pe|ut))return[u,y];if(Pe&ut)return!1;Ot=Pe||ut,Wt=Pt(u,y,Ot,P,le),fn=Ht(Wt,P),Ot===Pe?(u=Wt,Pe=fn):(y=Wt,ut=fn)}}function Pt(u,y,P,H,le){var Pe=y.x-u.x,ut=y.y-u.y,Ot=H.min,Wt=H.max,fn,Rn;return P&8?(fn=u.x+Pe*(Wt.y-u.y)/ut,Rn=Wt.y):P&4?(fn=u.x+Pe*(Ot.y-u.y)/ut,Rn=Ot.y):P&2?(fn=Wt.x,Rn=u.y+ut*(Wt.x-u.x)/Pe):P&1&&(fn=Ot.x,Rn=u.y+ut*(Ot.x-u.x)/Pe),new oe(fn,Rn,le)}function Ht(u,y){var P=0;return u.x<y.min.x?P|=1:u.x>y.max.x&&(P|=2),u.y<y.min.y?P|=4:u.y>y.max.y&&(P|=8),P}function mn(u,y){var P=y.x-u.x,H=y.y-u.y;return P*P+H*H}function Bn(u,y,P,H){var le=y.x,Pe=y.y,ut=P.x-le,Ot=P.y-Pe,Wt=ut*ut+Ot*Ot,fn;return Wt>0&&(fn=((u.x-le)*ut+(u.y-Pe)*Ot)/Wt,fn>1?(le=P.x,Pe=P.y):fn>0&&(le+=ut*fn,Pe+=Ot*fn)),ut=u.x-le,Ot=u.y-Pe,H?ut*ut+Ot*Ot:new oe(le,Pe)}function $n(u){return!$(u[0])||typeof u[0][0]!="object"&&typeof u[0][0]<"u"}function or(u){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),$n(u)}function br(u,y){var P,H,le,Pe,ut,Ot,Wt,fn;if(!u||u.length===0)throw new Error("latlngs not passed");$n(u)||(console.warn("latlngs are not flat! Only the first ring will be used"),u=u[0]);var Rn=ce([0,0]),er=re(u),$r=er.getNorthWest().distanceTo(er.getSouthWest())*er.getNorthEast().distanceTo(er.getNorthWest());$r<1700&&(Rn=Bl(u));var As=u.length,cs=[];for(P=0;P<As;P++){var Ys=ce(u[P]);cs.push(y.project(ce([Ys.lat-Rn.lat,Ys.lng-Rn.lng])))}for(P=0,H=0;P<As-1;P++)H+=cs[P].distanceTo(cs[P+1])/2;if(H===0)fn=cs[0];else for(P=0,Pe=0;P<As-1;P++)if(ut=cs[P],Ot=cs[P+1],le=ut.distanceTo(Ot),Pe+=le,Pe>H){Wt=(Pe-H)/le,fn=[Ot.x-Wt*(Ot.x-ut.x),Ot.y-Wt*(Ot.y-ut.y)];break}var es=y.unproject(Ce(fn));return ce([es.lat+Rn.lat,es.lng+Rn.lng])}var Hr={__proto__:null,simplify:Si,pointToSegmentDistance:Yo,closestPointOnSegment:Ha,clipSegment:dt,_getEdgeIntersection:Pt,_getBitCode:Ht,_sqClosestPointOnSegment:Bn,isFlat:$n,_flat:or,polylineCenter:br},Yi={project:function(u){return new oe(u.lng,u.lat)},unproject:function(u){return new he(u.y,u.x)},bounds:new De([-180,-90],[180,90])},yi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new De([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(u){var y=Math.PI/180,P=this.R,H=u.lat*y,le=this.R_MINOR/P,Pe=Math.sqrt(1-le*le),ut=Pe*Math.sin(H),Ot=Math.tan(Math.PI/4-H/2)/Math.pow((1-ut)/(1+ut),Pe/2);return H=-P*Math.log(Math.max(Ot,1e-10)),new oe(u.lng*y*P,H)},unproject:function(u){for(var y=180/Math.PI,P=this.R,H=this.R_MINOR/P,le=Math.sqrt(1-H*H),Pe=Math.exp(-u.y/P),ut=Math.PI/2-2*Math.atan(Pe),Ot=0,Wt=.1,fn;Ot<15&&Math.abs(Wt)>1e-7;Ot++)fn=le*Math.sin(ut),fn=Math.pow((1-fn)/(1+fn),le/2),Wt=Math.PI/2-2*Math.atan(Pe*fn)-ut,ut+=Wt;return new he(ut*y,u.x*y/P)}},Ci={__proto__:null,LonLat:Yi,Mercator:yi,SphericalMercator:Oe},ws=i({},ee,{code:"EPSG:3395",projection:yi,transformation:function(){var u=.5/(Math.PI*yi.R);return Ye(u,.5,-u,.5)}()}),Ps=i({},ee,{code:"EPSG:4326",projection:Yi,transformation:Ye(1/180,1,-1/180,.5)}),Ko=i({},ve,{projection:Yi,transformation:Ye(1,0,-1,0),scale:function(u){return Math.pow(2,u)},zoom:function(u){return Math.log(u)/Math.LN2},distance:function(u,y){var P=y.lng-u.lng,H=y.lat-u.lat;return Math.sqrt(P*P+H*H)},infinite:!0});ve.Earth=ee,ve.EPSG3395=ws,ve.EPSG3857=ge,ve.EPSG900913=Q,ve.EPSG4326=Ps,ve.Simple=Ko;var Wr=X.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(u){return u.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(u){return u&&u.removeLayer(this),this},getPane:function(u){return this._map.getPane(u?this.options[u]||u:this.options.pane)},addInteractiveTarget:function(u){return this._map._targets[l(u)]=this,this},removeInteractiveTarget:function(u){return delete this._map._targets[l(u)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(u){var y=u.target;if(y.hasLayer(this)){if(this._map=y,this._zoomAnimated=y._zoomAnimated,this.getEvents){var P=this.getEvents();y.on(P,this),this.once("remove",function(){y.off(P,this)},this)}this.onAdd(y),this.fire("add"),y.fire("layeradd",{layer:this})}}});ei.include({addLayer:function(u){if(!u._layerAdd)throw new Error("The provided object is not a Layer.");var y=l(u);return this._layers[y]?this:(this._layers[y]=u,u._mapToAdd=this,u.beforeAdd&&u.beforeAdd(this),this.whenReady(u._layerAdd,u),this)},removeLayer:function(u){var y=l(u);return this._layers[y]?(this._loaded&&u.onRemove(this),delete this._layers[y],this._loaded&&(this.fire("layerremove",{layer:u}),u.fire("remove")),u._map=u._mapToAdd=null,this):this},hasLayer:function(u){return l(u)in this._layers},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},_addLayers:function(u){u=u?$(u)?u:[u]:[];for(var y=0,P=u.length;y<P;y++)this.addLayer(u[y])},_addZoomLimit:function(u){(!isNaN(u.options.maxZoom)||!isNaN(u.options.minZoom))&&(this._zoomBoundLayers[l(u)]=u,this._updateZoomLevels())},_removeZoomLimit:function(u){var y=l(u);this._zoomBoundLayers[y]&&(delete this._zoomBoundLayers[y],this._updateZoomLevels())},_updateZoomLevels:function(){var u=1/0,y=-1/0,P=this._getZoomSpan();for(var H in this._zoomBoundLayers){var le=this._zoomBoundLayers[H].options;u=le.minZoom===void 0?u:Math.min(u,le.minZoom),y=le.maxZoom===void 0?y:Math.max(y,le.maxZoom)}this._layersMaxZoom=y===-1/0?void 0:y,this._layersMinZoom=u===1/0?void 0:u,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var eo=Wr.extend({initialize:function(u,y){E(this,y),this._layers={};var P,H;if(u)for(P=0,H=u.length;P<H;P++)this.addLayer(u[P])},addLayer:function(u){var y=this.getLayerId(u);return this._layers[y]=u,this._map&&this._map.addLayer(u),this},removeLayer:function(u){var y=u in this._layers?u:this.getLayerId(u);return this._map&&this._layers[y]&&this._map.removeLayer(this._layers[y]),delete this._layers[y],this},hasLayer:function(u){var y=typeof u=="number"?u:this.getLayerId(u);return y in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(u){var y=Array.prototype.slice.call(arguments,1),P,H;for(P in this._layers)H=this._layers[P],H[u]&&H[u].apply(H,y);return this},onAdd:function(u){this.eachLayer(u.addLayer,u)},onRemove:function(u){this.eachLayer(u.removeLayer,u)},eachLayer:function(u,y){for(var P in this._layers)u.call(y,this._layers[P]);return this},getLayer:function(u){return this._layers[u]},getLayers:function(){var u=[];return this.eachLayer(u.push,u),u},setZIndex:function(u){return this.invoke("setZIndex",u)},getLayerId:function(u){return l(u)}}),Fl=function(u,y){return new eo(u,y)},vo=eo.extend({addLayer:function(u){return this.hasLayer(u)?this:(u.addEventParent(this),eo.prototype.addLayer.call(this,u),this.fire("layeradd",{layer:u}))},removeLayer:function(u){return this.hasLayer(u)?(u in this._layers&&(u=this._layers[u]),u.removeEventParent(this),eo.prototype.removeLayer.call(this,u),this.fire("layerremove",{layer:u})):this},setStyle:function(u){return this.invoke("setStyle",u)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var u=new G;for(var y in this._layers){var P=this._layers[y];u.extend(P.getBounds?P.getBounds():P.getLatLng())}return u}}),Au=function(u,y){return new vo(u,y)},Ma=R.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(u){E(this,u)},createIcon:function(u){return this._createIcon("icon",u)},createShadow:function(u){return this._createIcon("shadow",u)},_createIcon:function(u,y){var P=this._getIconUrl(u);if(!P){if(u==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var H=this._createImg(P,y&&y.tagName==="IMG"?y:null);return this._setIconStyles(H,u),(this.options.crossOrigin||this.options.crossOrigin==="")&&(H.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),H},_setIconStyles:function(u,y){var P=this.options,H=P[y+"Size"];typeof H=="number"&&(H=[H,H]);var le=Ce(H),Pe=Ce(y==="shadow"&&P.shadowAnchor||P.iconAnchor||le&&le.divideBy(2,!0));u.className="leaflet-marker-"+y+" "+(P.className||""),Pe&&(u.style.marginLeft=-Pe.x+"px",u.style.marginTop=-Pe.y+"px"),le&&(u.style.width=le.x+"px",u.style.height=le.y+"px")},_createImg:function(u,y){return y=y||document.createElement("img"),y.src=u,y},_getIconUrl:function(u){return lt.retina&&this.options[u+"RetinaUrl"]||this.options[u+"Url"]}});function Qu(u){return new Ma(u)}var vl=Ma.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(u){return typeof vl.imagePath!="string"&&(vl.imagePath=this._detectIconPath()),(this.options.imagePath||vl.imagePath)+Ma.prototype._getIconUrl.call(this,u)},_stripUrl:function(u){var y=function(P,H,le){var Pe=H.exec(P);return Pe&&Pe[le]};return u=y(u,/^url\((['"])?(.+)\1\)$/,2),u&&y(u,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var u=Yn("div","leaflet-default-icon-path",document.body),y=Is(u,"background-image")||Is(u,"backgroundImage");if(document.body.removeChild(u),y=this._stripUrl(y),y)return y;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),yl=Li.extend({initialize:function(u){this._marker=u},addHooks:function(){var u=this._marker._icon;this._draggable||(this._draggable=new ma(u,u,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),lr(u,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Tr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(u){var y=this._marker,P=y._map,H=this._marker.options.autoPanSpeed,le=this._marker.options.autoPanPadding,Pe=Br(y._icon),ut=P.getPixelBounds(),Ot=P.getPixelOrigin(),Wt=Z(ut.min._subtract(Ot).add(le),ut.max._subtract(Ot).subtract(le));if(!Wt.contains(Pe)){var fn=Ce((Math.max(Wt.max.x,Pe.x)-Wt.max.x)/(ut.max.x-Wt.max.x)-(Math.min(Wt.min.x,Pe.x)-Wt.min.x)/(ut.min.x-Wt.min.x),(Math.max(Wt.max.y,Pe.y)-Wt.max.y)/(ut.max.y-Wt.max.y)-(Math.min(Wt.min.y,Pe.y)-Wt.min.y)/(ut.min.y-Wt.min.y)).multiplyBy(H);P.panBy(fn,{animate:!1}),this._draggable._newPos._add(fn),this._draggable._startPos._add(fn),rn(y._icon,this._draggable._newPos),this._onDrag(u),this._panRequest=N(this._adjustPan.bind(this,u))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(u){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,u)))},_onDrag:function(u){var y=this._marker,P=y._shadow,H=Br(y._icon),le=y._map.layerPointToLatLng(H);P&&rn(P,H),y._latlng=le,u.latlng=le,u.oldLatLng=this._oldLatLng,y.fire("move",u).fire("drag",u)},_onDragEnd:function(u){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",u)}}),Ms=Wr.extend({options:{icon:new vl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(u,y){E(this,y),this._latlng=ce(u)},onAdd:function(u){this._zoomAnimated=this._zoomAnimated&&u.options.markerZoomAnimation,this._zoomAnimated&&u.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(u){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&u.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(u){var y=this._latlng;return this._latlng=ce(u),this.update(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},setZIndexOffset:function(u){return this.options.zIndexOffset=u,this.update()},getIcon:function(){return this.options.icon},setIcon:function(u){return this.options.icon=u,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var u=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(u)}return this},_initIcon:function(){var u=this.options,y="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=u.icon.createIcon(this._icon),H=!1;P!==this._icon&&(this._icon&&this._removeIcon(),H=!0,u.title&&(P.title=u.title),P.tagName==="IMG"&&(P.alt=u.alt||"")),lr(P,y),u.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,u.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&wr(P,"focus",this._panOnFocus,this);var le=u.icon.createShadow(this._shadow),Pe=!1;le!==this._shadow&&(this._removeShadow(),Pe=!0),le&&(lr(le,y),le.alt=""),this._shadow=le,u.opacity<1&&this._updateOpacity(),H&&this.getPane().appendChild(this._icon),this._initInteraction(),le&&Pe&&this.getPane(u.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ur(this._icon,"focus",this._panOnFocus,this),dn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&dn(this._shadow),this._shadow=null},_setPos:function(u){this._icon&&rn(this._icon,u),this._shadow&&rn(this._shadow,u),this._zIndex=u.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(u){this._icon&&(this._icon.style.zIndex=this._zIndex+u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center).round();this._setPos(y)},_initInteraction:function(){if(this.options.interactive&&(lr(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),yl)){var u=this.options.draggable;this.dragging&&(u=this.dragging.enabled(),this.dragging.disable()),this.dragging=new yl(this),u&&this.dragging.enable()}},setOpacity:function(u){return this.options.opacity=u,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var u=this.options.opacity;this._icon&&ci(this._icon,u),this._shadow&&ci(this._shadow,u)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var u=this._map;if(u){var y=this.options.icon.options,P=y.iconSize?Ce(y.iconSize):Ce(0,0),H=y.iconAnchor?Ce(y.iconAnchor):Ce(0,0);u.panInside(this._latlng,{paddingTopLeft:H,paddingBottomRight:P.subtract(H)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ka(u,y){return new Ms(u,y)}var Zo=Wr.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(u){this._renderer=u.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(u){return E(this,u),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&u&&Object.prototype.hasOwnProperty.call(u,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Do=Zo.extend({options:{fill:!0,radius:10},initialize:function(u,y){E(this,y),this._latlng=ce(u),this._radius=this.options.radius},setLatLng:function(u){var y=this._latlng;return this._latlng=ce(u),this.redraw(),this.fire("move",{oldLatLng:y,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(u){return this.options.radius=this._radius=u,this.redraw()},getRadius:function(){return this._radius},setStyle:function(u){var y=u&&u.radius||this._radius;return Zo.prototype.setStyle.call(this,u),this.setRadius(y),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var u=this._radius,y=this._radiusY||u,P=this._clickTolerance(),H=[u+P,y+P];this._pxBounds=new De(this._point.subtract(H),this._point.add(H))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(u){return u.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function jl(u,y){return new Do(u,y)}var to=Do.extend({initialize:function(u,y,P){if(typeof y=="number"&&(y=i({},P,{radius:y})),E(this,y),this._latlng=ce(u),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(u){return this._mRadius=u,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var u=[this._radius,this._radiusY||this._radius];return new G(this._map.layerPointToLatLng(this._point.subtract(u)),this._map.layerPointToLatLng(this._point.add(u)))},setStyle:Zo.prototype.setStyle,_project:function(){var u=this._latlng.lng,y=this._latlng.lat,P=this._map,H=P.options.crs;if(H.distance===ee.distance){var le=Math.PI/180,Pe=this._mRadius/ee.R/le,ut=P.project([y+Pe,u]),Ot=P.project([y-Pe,u]),Wt=ut.add(Ot).divideBy(2),fn=P.unproject(Wt).lat,Rn=Math.acos((Math.cos(Pe*le)-Math.sin(y*le)*Math.sin(fn*le))/(Math.cos(y*le)*Math.cos(fn*le)))/le;(isNaN(Rn)||Rn===0)&&(Rn=Pe/Math.cos(Math.PI/180*y)),this._point=Wt.subtract(P.getPixelOrigin()),this._radius=isNaN(Rn)?0:Wt.x-P.project([fn,u-Rn]).x,this._radiusY=Wt.y-ut.y}else{var er=H.unproject(H.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(er).x}this._updateBounds()}});function yo(u,y,P){return new to(u,y,P)}var bo=Zo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(u,y){E(this,y),this._setLatLngs(u)},getLatLngs:function(){return this._latlngs},setLatLngs:function(u){return this._setLatLngs(u),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(u){for(var y=1/0,P=null,H=Bn,le,Pe,ut=0,Ot=this._parts.length;ut<Ot;ut++)for(var Wt=this._parts[ut],fn=1,Rn=Wt.length;fn<Rn;fn++){le=Wt[fn-1],Pe=Wt[fn];var er=H(u,le,Pe,!0);er<y&&(y=er,P=H(u,le,Pe))}return P&&(P.distance=Math.sqrt(y)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return br(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(u,y){return y=y||this._defaultShape(),u=ce(u),y.push(u),this._bounds.extend(u),this.redraw()},_setLatLngs:function(u){this._bounds=new G,this._latlngs=this._convertLatLngs(u)},_defaultShape:function(){return $n(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(u){for(var y=[],P=$n(u),H=0,le=u.length;H<le;H++)P?(y[H]=ce(u[H]),this._bounds.extend(y[H])):y[H]=this._convertLatLngs(u[H]);return y},_project:function(){var u=new De;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,u),this._bounds.isValid()&&u.isValid()&&(this._rawPxBounds=u,this._updateBounds())},_updateBounds:function(){var u=this._clickTolerance(),y=new oe(u,u);this._rawPxBounds&&(this._pxBounds=new De([this._rawPxBounds.min.subtract(y),this._rawPxBounds.max.add(y)]))},_projectLatlngs:function(u,y,P){var H=u[0]instanceof he,le=u.length,Pe,ut;if(H){for(ut=[],Pe=0;Pe<le;Pe++)ut[Pe]=this._map.latLngToLayerPoint(u[Pe]),P.extend(ut[Pe]);y.push(ut)}else for(Pe=0;Pe<le;Pe++)this._projectLatlngs(u[Pe],y,P)},_clipPoints:function(){var u=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}var y=this._parts,P,H,le,Pe,ut,Ot,Wt;for(P=0,le=0,Pe=this._rings.length;P<Pe;P++)for(Wt=this._rings[P],H=0,ut=Wt.length;H<ut-1;H++)Ot=dt(Wt[H],Wt[H+1],u,H,!0),Ot&&(y[le]=y[le]||[],y[le].push(Ot[0]),(Ot[1]!==Wt[H+1]||H===ut-2)&&(y[le].push(Ot[1]),le++))}},_simplifyPoints:function(){for(var u=this._parts,y=this.options.smoothFactor,P=0,H=u.length;P<H;P++)u[P]=Si(u[P],y)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(u,y){var P,H,le,Pe,ut,Ot,Wt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(P=0,Pe=this._parts.length;P<Pe;P++)for(Ot=this._parts[P],H=0,ut=Ot.length,le=ut-1;H<ut;le=H++)if(!(!y&&H===0)&&Yo(u,Ot[le],Ot[H])<=Wt)return!0;return!1}});function Ac(u,y){return new bo(u,y)}bo._flat=or;var Rs=bo.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return va(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(u){var y=bo.prototype._convertLatLngs.call(this,u),P=y.length;return P>=2&&y[0]instanceof he&&y[0].equals(y[P-1])&&y.pop(),y},_setLatLngs:function(u){bo.prototype._setLatLngs.call(this,u),$n(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return $n(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var u=this._renderer._bounds,y=this.options.weight,P=new oe(y,y);if(u=new De(u.min.subtract(P),u.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(u))){if(this.options.noClip){this._parts=this._rings;return}for(var H=0,le=this._rings.length,Pe;H<le;H++)Pe=hu(this._rings[H],u,!0),Pe.length&&this._parts.push(Pe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(u){var y=!1,P,H,le,Pe,ut,Ot,Wt,fn;if(!this._pxBounds||!this._pxBounds.contains(u))return!1;for(Pe=0,Wt=this._parts.length;Pe<Wt;Pe++)for(P=this._parts[Pe],ut=0,fn=P.length,Ot=fn-1;ut<fn;Ot=ut++)H=P[ut],le=P[Ot],H.y>u.y!=le.y>u.y&&u.x<(le.x-H.x)*(u.y-H.y)/(le.y-H.y)+H.x&&(y=!y);return y||bo.prototype._containsPoint.call(this,u,!0)}});function Wa(u,y){return new Rs(u,y)}var no=vo.extend({initialize:function(u,y){E(this,y),this._layers={},u&&this.addData(u)},addData:function(u){var y=$(u)?u:u.features,P,H,le;if(y){for(P=0,H=y.length;P<H;P++)le=y[P],(le.geometries||le.geometry||le.features||le.coordinates)&&this.addData(le);return this}var Pe=this.options;if(Pe.filter&&!Pe.filter(u))return this;var ut=ro(u,Pe);return ut?(ut.feature=so(u),ut.defaultOptions=ut.options,this.resetStyle(ut),Pe.onEachFeature&&Pe.onEachFeature(u,ut),this.addLayer(ut)):this},resetStyle:function(u){return u===void 0?this.eachLayer(this.resetStyle,this):(u.options=i({},u.defaultOptions),this._setLayerStyle(u,this.options.style),this)},setStyle:function(u){return this.eachLayer(function(y){this._setLayerStyle(y,u)},this)},_setLayerStyle:function(u,y){u.setStyle&&(typeof y=="function"&&(y=y(u.feature)),u.setStyle(y))}});function ro(u,y){var P=u.type==="Feature"?u.geometry:u,H=P?P.coordinates:null,le=[],Pe=y&&y.pointToLayer,ut=y&&y.coordsToLatLng||qa,Ot,Wt,fn,Rn;if(!H&&!P)return null;switch(P.type){case"Point":return Ot=ut(H),Ga(Pe,u,Ot,y);case"MultiPoint":for(fn=0,Rn=H.length;fn<Rn;fn++)Ot=ut(H[fn]),le.push(Ga(Pe,u,Ot,y));return new vo(le);case"LineString":case"MultiLineString":return Wt=io(H,P.type==="LineString"?0:1,ut),new bo(Wt,y);case"Polygon":case"MultiPolygon":return Wt=io(H,P.type==="Polygon"?1:2,ut),new Rs(Wt,y);case"GeometryCollection":for(fn=0,Rn=P.geometries.length;fn<Rn;fn++){var er=ro({geometry:P.geometries[fn],type:"Feature",properties:u.properties},y);er&&le.push(er)}return new vo(le);case"FeatureCollection":for(fn=0,Rn=P.features.length;fn<Rn;fn++){var $r=ro(P.features[fn],y);$r&&le.push($r)}return new vo(le);default:throw new Error("Invalid GeoJSON object.")}}function Ga(u,y,P,H){return u?u(y,P):new Ms(P,H&&H.markersInheritOptions&&H)}function qa(u){return new he(u[1],u[0],u[2])}function io(u,y,P){for(var H=[],le=0,Pe=u.length,ut;le<Pe;le++)ut=y?io(u[le],y-1,P):(P||qa)(u[le]),H.push(ut);return H}function Hs(u,y){return u=ce(u),u.alt!==void 0?[v(u.lng,y),v(u.lat,y),v(u.alt,y)]:[v(u.lng,y),v(u.lat,y)]}function Aa(u,y,P,H){for(var le=[],Pe=0,ut=u.length;Pe<ut;Pe++)le.push(y?Aa(u[Pe],$n(u[Pe])?0:y-1,P,H):Hs(u[Pe],H));return!y&&P&&le.length>0&&le.push(le[0].slice()),le}function Xo(u,y){return u.feature?i({},u.feature,{geometry:y}):so(y)}function so(u){return u.type==="Feature"||u.type==="FeatureCollection"?u:{type:"Feature",properties:{},geometry:u}}var wt={toGeoJSON:function(u){return Xo(this,{type:"Point",coordinates:Hs(this.getLatLng(),u)})}};Ms.include(wt),to.include(wt),Do.include(wt),bo.include({toGeoJSON:function(u){var y=!$n(this._latlngs),P=Aa(this._latlngs,y?1:0,!1,u);return Xo(this,{type:(y?"Multi":"")+"LineString",coordinates:P})}}),Rs.include({toGeoJSON:function(u){var y=!$n(this._latlngs),P=y&&!$n(this._latlngs[0]),H=Aa(this._latlngs,P?2:y?1:0,!0,u);return y||(H=[H]),Xo(this,{type:(P?"Multi":"")+"Polygon",coordinates:H})}}),eo.include({toMultiPoint:function(u){var y=[];return this.eachLayer(function(P){y.push(P.toGeoJSON(u).geometry.coordinates)}),Xo(this,{type:"MultiPoint",coordinates:y})},toGeoJSON:function(u){var y=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(y==="MultiPoint")return this.toMultiPoint(u);var P=y==="GeometryCollection",H=[];return this.eachLayer(function(le){if(le.toGeoJSON){var Pe=le.toGeoJSON(u);if(P)H.push(Pe.geometry);else{var ut=so(Pe);ut.type==="FeatureCollection"?H.push.apply(H,ut.features):H.push(ut)}}}),P?Xo(this,{geometries:H,type:"GeometryCollection"}):{type:"FeatureCollection",features:H}}});function Yt(u,y){return new no(u,y)}var Nt=Yt,Nn=Wr.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(u,y,P){this._url=u,this._bounds=re(y),E(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(lr(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){dn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(u){return this.options.opacity=u,this._image&&this._updateOpacity(),this},setStyle:function(u){return u.opacity&&this.setOpacity(u.opacity),this},bringToFront:function(){return this._map&&xi(this._image),this},bringToBack:function(){return this._map&&ki(this._image),this},setUrl:function(u){return this._url=u,this._image&&(this._image.src=u),this},setBounds:function(u){return this._bounds=re(u),this._map&&this._reset(),this},getEvents:function(){var u={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var u=this._url.tagName==="IMG",y=this._image=u?this._url:Yn("img");if(lr(y,"leaflet-image-layer"),this._zoomAnimated&&lr(y,"leaflet-zoom-animated"),this.options.className&&lr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onload=o(this.fire,this,"load"),y.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),u){this._url=y.src;return}y.src=this._url,y.alt=this.options.alt},_animateZoom:function(u){var y=this._map.getZoomScale(u.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,u.zoom,u.center).min;Cn(this._image,P,y)},_reset:function(){var u=this._image,y=new De(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=y.getSize();rn(u,y.min),u.style.width=P.x+"px",u.style.height=P.y+"px"},_updateOpacity:function(){ci(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var u=this.options.errorOverlayUrl;u&&this._url!==u&&(this._url=u,this._image.src=u)},getCenter:function(){return this._bounds.getCenter()}}),Jn=function(u,y,P){return new Nn(u,y,P)},xr=Nn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var u=this._url.tagName==="VIDEO",y=this._image=u?this._url:Yn("video");if(lr(y,"leaflet-image-layer"),this._zoomAnimated&&lr(y,"leaflet-zoom-animated"),this.options.className&&lr(y,this.options.className),y.onselectstart=p,y.onmousemove=p,y.onloadeddata=o(this.fire,this,"load"),u){for(var P=y.getElementsByTagName("source"),H=[],le=0;le<P.length;le++)H.push(P[le].src);this._url=P.length>0?H:[y.src];return}$(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(y.style,"objectFit")&&(y.style.objectFit="fill"),y.autoplay=!!this.options.autoplay,y.loop=!!this.options.loop,y.muted=!!this.options.muted,y.playsInline=!!this.options.playsInline;for(var Pe=0;Pe<this._url.length;Pe++){var ut=Yn("source");ut.src=this._url[Pe],y.appendChild(ut)}}});function Ji(u,y,P){return new xr(u,y,P)}var Ei=Nn.extend({_initImage:function(){var u=this._image=this._url;lr(u,"leaflet-image-layer"),this._zoomAnimated&&lr(u,"leaflet-zoom-animated"),this.options.className&&lr(u,this.options.className),u.onselectstart=p,u.onmousemove=p}});function du(u,y,P){return new Ei(u,y,P)}var _o=Wr.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(u,y){u&&(u instanceof he||$(u))?(this._latlng=ce(u),E(this,y)):(E(this,u),this._source=y),this.options.content&&(this._content=this.options.content)},openOn:function(u){return u=arguments.length?u:this._source._map,u.hasLayer(this)||u.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(u){return this._map?this.close():(arguments.length?this._source=u:u=this._source,this._prepareOpen(),this.openOn(u._map)),this},onAdd:function(u){this._zoomAnimated=u._zoomAnimated,this._container||this._initLayout(),u._fadeAnimated&&ci(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),u._fadeAnimated&&ci(this._container,1),this.bringToFront(),this.options.interactive&&(lr(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(u){u._fadeAnimated?(ci(this._container,0),this._removeTimeout=setTimeout(o(dn,void 0,this._container),200)):dn(this._container),this.options.interactive&&(Tr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(u){return this._latlng=ce(u),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(u){return this._content=u,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var u={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&xi(this._container),this},bringToBack:function(){return this._map&&ki(this._container),this},_prepareOpen:function(u){var y=this._source;if(!y._map)return!1;if(y instanceof vo){y=null;var P=this._source._layers;for(var H in P)if(P[H]._map){y=P[H];break}if(!y)return!1;this._source=y}if(!u)if(y.getCenter)u=y.getCenter();else if(y.getLatLng)u=y.getLatLng();else if(y.getBounds)u=y.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(u),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var u=this._contentNode,y=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof y=="string")u.innerHTML=y;else{for(;u.hasChildNodes();)u.removeChild(u.firstChild);u.appendChild(y)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var u=this._map.latLngToLayerPoint(this._latlng),y=Ce(this.options.offset),P=this._getAnchor();this._zoomAnimated?rn(this._container,u.add(P)):y=y.add(u).add(P);var H=this._containerBottom=-y.y,le=this._containerLeft=-Math.round(this._containerWidth/2)+y.x;this._container.style.bottom=H+"px",this._container.style.left=le+"px"}},_getAnchor:function(){return[0,0]}});ei.include({_initOverlay:function(u,y,P,H){var le=y;return le instanceof u||(le=new u(H).setContent(y)),P&&le.setLatLng(P),le}}),Wr.include({_initOverlay:function(u,y,P,H){var le=P;return le instanceof u?(E(le,H),le._source=this):(le=y&&!H?y:new u(H,this),le.setContent(P)),le}});var Qi=_o.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(u){return u=arguments.length?u:this._source._map,!u.hasLayer(this)&&u._popup&&u._popup.options.autoClose&&u.removeLayer(u._popup),u._popup=this,_o.prototype.openOn.call(this,u)},onAdd:function(u){_o.prototype.onAdd.call(this,u),u.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zo||this._source.on("preclick",vs))},onRemove:function(u){_o.prototype.onRemove.call(this,u),u.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zo||this._source.off("preclick",vs))},getEvents:function(){var u=_o.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(u.preclick=this.close),this.options.keepInView&&(u.moveend=this._adjustPan),u},_initLayout:function(){var u="leaflet-popup",y=this._container=Yn("div",u+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=Yn("div",u+"-content-wrapper",y);if(this._contentNode=Yn("div",u+"-content",P),su(y),Ju(this._contentNode),wr(y,"contextmenu",vs),this._tipContainer=Yn("div",u+"-tip-container",y),this._tip=Yn("div",u+"-tip",this._tipContainer),this.options.closeButton){var H=this._closeButton=Yn("a",u+"-close-button",y);H.setAttribute("role","button"),H.setAttribute("aria-label","Close popup"),H.href="#close",H.innerHTML='<span aria-hidden="true">&#215;</span>',wr(H,"click",function(le){Lr(le),this.close()},this)}},_updateLayout:function(){var u=this._contentNode,y=u.style;y.width="",y.whiteSpace="nowrap";var P=u.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),y.width=P+1+"px",y.whiteSpace="",y.height="";var H=u.offsetHeight,le=this.options.maxHeight,Pe="leaflet-popup-scrolled";le&&H>le?(y.height=le+"px",lr(u,Pe)):Tr(u,Pe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center),P=this._getAnchor();rn(this._container,y.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var u=this._map,y=parseInt(Is(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+y,H=this._containerWidth,le=new oe(this._containerLeft,-P-this._containerBottom);le._add(Br(this._container));var Pe=u.layerPointToContainerPoint(le),ut=Ce(this.options.autoPanPadding),Ot=Ce(this.options.autoPanPaddingTopLeft||ut),Wt=Ce(this.options.autoPanPaddingBottomRight||ut),fn=u.getSize(),Rn=0,er=0;Pe.x+H+Wt.x>fn.x&&(Rn=Pe.x+H-fn.x+Wt.x),Pe.x-Rn-Ot.x<0&&(Rn=Pe.x-Ot.x),Pe.y+P+Wt.y>fn.y&&(er=Pe.y+P-fn.y+Wt.y),Pe.y-er-Ot.y<0&&(er=Pe.y-Ot.y),(Rn||er)&&(this.options.keepInView&&(this._autopanning=!0),u.fire("autopanstart").panBy([Rn,er]))}},_getAnchor:function(){return Ce(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ta=function(u,y){return new Qi(u,y)};ei.mergeOptions({closePopupOnClick:!0}),ei.include({openPopup:function(u,y,P){return this._initOverlay(Qi,u,y,P).openOn(this),this},closePopup:function(u){return u=arguments.length?u:this._popup,u&&u.close(),this}}),Wr.include({bindPopup:function(u,y){return this._popup=this._initOverlay(Qi,this._popup,u,y),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(u){return this._popup&&(this instanceof vo||(this._popup._source=this),this._popup._prepareOpen(u||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(u){return this._popup&&this._popup.setContent(u),this},getPopup:function(){return this._popup},_openPopup:function(u){if(!(!this._popup||!this._map)){Yr(u);var y=u.layer||u.target;if(this._popup._source===y&&!(y instanceof Zo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(u.latlng);return}this._popup._source=y,this.openPopup(u.latlng)}},_movePopup:function(u){this._popup.setLatLng(u.latlng)},_onKeyPress:function(u){u.originalEvent.keyCode===13&&this._openPopup(u)}});var Ya=_o.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(u){_o.prototype.onAdd.call(this,u),this.setOpacity(this.options.opacity),u.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(u){_o.prototype.onRemove.call(this,u),u.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var u=_o.prototype.getEvents.call(this);return this.options.permanent||(u.preclick=this.close),u},_initLayout:function(){var u="leaflet-tooltip",y=u+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Yn("div",y),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(u){var y,P,H=this._map,le=this._container,Pe=H.latLngToContainerPoint(H.getCenter()),ut=H.layerPointToContainerPoint(u),Ot=this.options.direction,Wt=le.offsetWidth,fn=le.offsetHeight,Rn=Ce(this.options.offset),er=this._getAnchor();Ot==="top"?(y=Wt/2,P=fn):Ot==="bottom"?(y=Wt/2,P=0):Ot==="center"?(y=Wt/2,P=fn/2):Ot==="right"?(y=0,P=fn/2):Ot==="left"?(y=Wt,P=fn/2):ut.x<Pe.x?(Ot="right",y=0,P=fn/2):(Ot="left",y=Wt+(Rn.x+er.x)*2,P=fn/2),u=u.subtract(Ce(y,P,!0)).add(Rn).add(er),Tr(le,"leaflet-tooltip-right"),Tr(le,"leaflet-tooltip-left"),Tr(le,"leaflet-tooltip-top"),Tr(le,"leaflet-tooltip-bottom"),lr(le,"leaflet-tooltip-"+Ot),rn(le,u)},_updatePosition:function(){var u=this._map.latLngToLayerPoint(this._latlng);this._setPosition(u)},setOpacity:function(u){this.options.opacity=u,this._container&&ci(this._container,u)},_animateZoom:function(u){var y=this._map._latLngToNewLayerPoint(this._latlng,u.zoom,u.center);this._setPosition(y)},_getAnchor:function(){return Ce(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Da=function(u,y){return new Ya(u,y)};ei.include({openTooltip:function(u,y,P){return this._initOverlay(Ya,u,y,P).openOn(this),this},closeTooltip:function(u){return u.close(),this}}),Wr.include({bindTooltip:function(u,y){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ya,this._tooltip,u,y),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(u){if(!(!u&&this._tooltipHandlersAdded)){var y=u?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[y](P),this._tooltipHandlersAdded=!u}},openTooltip:function(u){return this._tooltip&&(this instanceof vo||(this._tooltip._source=this),this._tooltip._prepareOpen(u)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(u){return this._tooltip&&this._tooltip.setContent(u),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&(wr(y,"focus",function(){this._tooltip._source=u,this.openTooltip()},this),wr(y,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(u){var y=typeof u.getElement=="function"&&u.getElement();y&&y.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(u){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var y=this;this._map.once("moveend",function(){y._openOnceFlag=!1,y._openTooltip(u)});return}this._tooltip._source=u.layer||u.target,this.openTooltip(this._tooltip.options.sticky?u.latlng:void 0)}},_moveTooltip:function(u){var y=u.latlng,P,H;this._tooltip.options.sticky&&u.originalEvent&&(P=this._map.mouseEventToContainerPoint(u.originalEvent),H=this._map.containerPointToLayerPoint(P),y=this._map.layerPointToLatLng(H)),this._tooltip.setLatLng(y)}});var Oa=Ma.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(u){var y=u&&u.tagName==="DIV"?u:document.createElement("div"),P=this.options;if(P.html instanceof Element?(as(y),y.appendChild(P.html)):y.innerHTML=P.html!==!1?P.html:"",P.bgPos){var H=Ce(P.bgPos);y.style.backgroundPosition=-H.x+"px "+-H.y+"px"}return this._setIconStyles(y,"icon"),y},createShadow:function(){return null}});function Na(u){return new Oa(u)}Ma.Default=vl;var ti=Wr.extend({options:{tileSize:256,opacity:1,updateWhenIdle:lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(u){E(this,u)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(u){u._addZoomLimit(this)},onRemove:function(u){this._removeAllTiles(),dn(this._container),u._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(xi(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ki(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(u){return this.options.opacity=u,this._updateOpacity(),this},setZIndex:function(u){return this.options.zIndex=u,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var u=this._clampZoom(this._map.getZoom());u!==this._tileZoom&&(this._tileZoom=u,this._updateLevels()),this._update()}return this},getEvents:function(){var u={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),u.move=this._onMove),this._zoomAnimated&&(u.zoomanim=this._animateZoom),u},createTile:function(){return document.createElement("div")},getTileSize:function(){var u=this.options.tileSize;return u instanceof oe?u:new oe(u,u)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(u){for(var y=this.getPane().children,P=-u(-1/0,1/0),H=0,le=y.length,Pe;H<le;H++)Pe=y[H].style.zIndex,y[H]!==this._container&&Pe&&(P=u(P,+Pe));isFinite(P)&&(this.options.zIndex=P+u(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!lt.ielt9){ci(this._container,this.options.opacity);var u=+new Date,y=!1,P=!1;for(var H in this._tiles){var le=this._tiles[H];if(!(!le.current||!le.loaded)){var Pe=Math.min(1,(u-le.loaded)/200);ci(le.el,Pe),Pe<1?y=!0:(le.active?P=!0:this._onOpaqueTile(le),le.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),y&&(B(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:p,_initContainer:function(){this._container||(this._container=Yn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var u=this._tileZoom,y=this.options.maxZoom;if(u!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===u?(this._levels[P].el.style.zIndex=y-Math.abs(u-P),this._onUpdateLevel(P)):(dn(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var H=this._levels[u],le=this._map;return H||(H=this._levels[u]={},H.el=Yn("div","leaflet-tile-container leaflet-zoom-animated",this._container),H.el.style.zIndex=y,H.origin=le.project(le.unproject(le.getPixelOrigin()),u).round(),H.zoom=u,this._setZoomTransform(H,le.getCenter(),le.getZoom()),p(H.el.offsetWidth),this._onCreateLevel(H)),this._level=H,H}},_onUpdateLevel:p,_onRemoveLevel:p,_onCreateLevel:p,_pruneTiles:function(){if(this._map){var u,y,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(u in this._tiles)y=this._tiles[u],y.retain=y.current;for(u in this._tiles)if(y=this._tiles[u],y.current&&!y.active){var H=y.coords;this._retainParent(H.x,H.y,H.z,H.z-5)||this._retainChildren(H.x,H.y,H.z,H.z+2)}for(u in this._tiles)this._tiles[u].retain||this._removeTile(u)}},_removeTilesAtZoom:function(u){for(var y in this._tiles)this._tiles[y].coords.z===u&&this._removeTile(y)},_removeAllTiles:function(){for(var u in this._tiles)this._removeTile(u)},_invalidateAll:function(){for(var u in this._levels)dn(this._levels[u].el),this._onRemoveLevel(Number(u)),delete this._levels[u];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(u,y,P,H){var le=Math.floor(u/2),Pe=Math.floor(y/2),ut=P-1,Ot=new oe(+le,+Pe);Ot.z=+ut;var Wt=this._tileCoordsToKey(Ot),fn=this._tiles[Wt];return fn&&fn.active?(fn.retain=!0,!0):(fn&&fn.loaded&&(fn.retain=!0),ut>H?this._retainParent(le,Pe,ut,H):!1)},_retainChildren:function(u,y,P,H){for(var le=2*u;le<2*u+2;le++)for(var Pe=2*y;Pe<2*y+2;Pe++){var ut=new oe(le,Pe);ut.z=P+1;var Ot=this._tileCoordsToKey(ut),Wt=this._tiles[Ot];if(Wt&&Wt.active){Wt.retain=!0;continue}else Wt&&Wt.loaded&&(Wt.retain=!0);P+1<H&&this._retainChildren(le,Pe,P+1,H)}},_resetView:function(u){var y=u&&(u.pinch||u.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),y,y)},_animateZoom:function(u){this._setView(u.center,u.zoom,!0,u.noUpdate)},_clampZoom:function(u){var y=this.options;return y.minNativeZoom!==void 0&&u<y.minNativeZoom?y.minNativeZoom:y.maxNativeZoom!==void 0&&y.maxNativeZoom<u?y.maxNativeZoom:u},_setView:function(u,y,P,H){var le=Math.round(y);this.options.maxZoom!==void 0&&le>this.options.maxZoom||this.options.minZoom!==void 0&&le<this.options.minZoom?le=void 0:le=this._clampZoom(le);var Pe=this.options.updateWhenZooming&&le!==this._tileZoom;(!H||Pe)&&(this._tileZoom=le,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),le!==void 0&&this._update(u),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(u,y)},_setZoomTransforms:function(u,y){for(var P in this._levels)this._setZoomTransform(this._levels[P],u,y)},_setZoomTransform:function(u,y,P){var H=this._map.getZoomScale(P,u.zoom),le=u.origin.multiplyBy(H).subtract(this._map._getNewPixelOrigin(y,P)).round();lt.any3d?Cn(u.el,le,H):rn(u.el,le)},_resetGrid:function(){var u=this._map,y=u.options.crs,P=this._tileSize=this.getTileSize(),H=this._tileZoom,le=this._map.getPixelWorldBounds(this._tileZoom);le&&(this._globalTileRange=this._pxBoundsToTileRange(le)),this._wrapX=y.wrapLng&&!this.options.noWrap&&[Math.floor(u.project([0,y.wrapLng[0]],H).x/P.x),Math.ceil(u.project([0,y.wrapLng[1]],H).x/P.y)],this._wrapY=y.wrapLat&&!this.options.noWrap&&[Math.floor(u.project([y.wrapLat[0],0],H).y/P.x),Math.ceil(u.project([y.wrapLat[1],0],H).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(u){var y=this._map,P=y._animatingZoom?Math.max(y._animateToZoom,y.getZoom()):y.getZoom(),H=y.getZoomScale(P,this._tileZoom),le=y.project(u,this._tileZoom).floor(),Pe=y.getSize().divideBy(H*2);return new De(le.subtract(Pe),le.add(Pe))},_update:function(u){var y=this._map;if(y){var P=this._clampZoom(y.getZoom());if(u===void 0&&(u=y.getCenter()),this._tileZoom!==void 0){var H=this._getTiledPixelBounds(u),le=this._pxBoundsToTileRange(H),Pe=le.getCenter(),ut=[],Ot=this.options.keepBuffer,Wt=new De(le.getBottomLeft().subtract([Ot,-Ot]),le.getTopRight().add([Ot,-Ot]));if(!(isFinite(le.min.x)&&isFinite(le.min.y)&&isFinite(le.max.x)&&isFinite(le.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var fn in this._tiles){var Rn=this._tiles[fn].coords;(Rn.z!==this._tileZoom||!Wt.contains(new oe(Rn.x,Rn.y)))&&(this._tiles[fn].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(u,P);return}for(var er=le.min.y;er<=le.max.y;er++)for(var $r=le.min.x;$r<=le.max.x;$r++){var As=new oe($r,er);if(As.z=this._tileZoom,!!this._isValidTile(As)){var cs=this._tiles[this._tileCoordsToKey(As)];cs?cs.current=!0:ut.push(As)}}if(ut.sort(function(es,Io){return es.distanceTo(Pe)-Io.distanceTo(Pe)}),ut.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ys=document.createDocumentFragment();for($r=0;$r<ut.length;$r++)this._addTile(ut[$r],Ys);this._level.el.appendChild(Ys)}}}},_isValidTile:function(u){var y=this._map.options.crs;if(!y.infinite){var P=this._globalTileRange;if(!y.wrapLng&&(u.x<P.min.x||u.x>P.max.x)||!y.wrapLat&&(u.y<P.min.y||u.y>P.max.y))return!1}if(!this.options.bounds)return!0;var H=this._tileCoordsToBounds(u);return re(this.options.bounds).overlaps(H)},_keyToBounds:function(u){return this._tileCoordsToBounds(this._keyToTileCoords(u))},_tileCoordsToNwSe:function(u){var y=this._map,P=this.getTileSize(),H=u.scaleBy(P),le=H.add(P),Pe=y.unproject(H,u.z),ut=y.unproject(le,u.z);return[Pe,ut]},_tileCoordsToBounds:function(u){var y=this._tileCoordsToNwSe(u),P=new G(y[0],y[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(u){return u.x+":"+u.y+":"+u.z},_keyToTileCoords:function(u){var y=u.split(":"),P=new oe(+y[0],+y[1]);return P.z=+y[2],P},_removeTile:function(u){var y=this._tiles[u];y&&(dn(y.el),delete this._tiles[u],this.fire("tileunload",{tile:y.el,coords:this._keyToTileCoords(u)}))},_initTile:function(u){lr(u,"leaflet-tile");var y=this.getTileSize();u.style.width=y.x+"px",u.style.height=y.y+"px",u.onselectstart=p,u.onmousemove=p,lt.ielt9&&this.options.opacity<1&&ci(u,this.options.opacity)},_addTile:function(u,y){var P=this._getTilePos(u),H=this._tileCoordsToKey(u),le=this.createTile(this._wrapCoords(u),o(this._tileReady,this,u));this._initTile(le),this.createTile.length<2&&N(o(this._tileReady,this,u,null,le)),rn(le,P),this._tiles[H]={el:le,coords:u,current:!0},y.appendChild(le),this.fire("tileloadstart",{tile:le,coords:u})},_tileReady:function(u,y,P){y&&this.fire("tileerror",{error:y,tile:P,coords:u});var H=this._tileCoordsToKey(u);P=this._tiles[H],P&&(P.loaded=+new Date,this._map._fadeAnimated?(ci(P.el,0),B(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),y||(lr(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:u})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),lt.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(u){return u.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(u){var y=new oe(this._wrapX?d(u.x,this._wrapX):u.x,this._wrapY?d(u.y,this._wrapY):u.y);return y.z=u.z,y},_pxBoundsToTileRange:function(u){var y=this.getTileSize();return new De(u.min.unscaleBy(y).floor(),u.max.unscaleBy(y).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var u in this._tiles)if(!this._tiles[u].loaded)return!1;return!0}});function ya(u){return new ti(u)}var Ws=ti.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(u,y){this._url=u,y=E(this,y),y.detectRetina&&lt.retina&&y.maxZoom>0?(y.tileSize=Math.floor(y.tileSize/2),y.zoomReverse?(y.zoomOffset--,y.minZoom=Math.min(y.maxZoom,y.minZoom+1)):(y.zoomOffset++,y.maxZoom=Math.max(y.minZoom,y.maxZoom-1)),y.minZoom=Math.max(0,y.minZoom)):y.zoomReverse?y.minZoom=Math.min(y.maxZoom,y.minZoom):y.maxZoom=Math.max(y.minZoom,y.maxZoom),typeof y.subdomains=="string"&&(y.subdomains=y.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(u,y){return this._url===u&&y===void 0&&(y=!0),this._url=u,y||this.redraw(),this},createTile:function(u,y){var P=document.createElement("img");return wr(P,"load",o(this._tileOnLoad,this,y,P)),wr(P,"error",o(this._tileOnError,this,y,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(u),P},getTileUrl:function(u){var y={r:lt.retina?"@2x":"",s:this._getSubdomain(u),x:u.x,y:u.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-u.y;this.options.tms&&(y.y=P),y["-y"]=P}return D(this._url,i(y,this.options))},_tileOnLoad:function(u,y){lt.ielt9?setTimeout(o(u,this,null,y),0):u(null,y)},_tileOnError:function(u,y,P){var H=this.options.errorTileUrl;H&&y.getAttribute("src")!==H&&(y.src=H),u(P,y)},_onTileRemove:function(u){u.tile.onload=null},_getZoomForUrl:function(){var u=this._tileZoom,y=this.options.maxZoom,P=this.options.zoomReverse,H=this.options.zoomOffset;return P&&(u=y-u),u+H},_getSubdomain:function(u){var y=Math.abs(u.x+u.y)%this.options.subdomains.length;return this.options.subdomains[y]},_abortLoading:function(){var u,y;for(u in this._tiles)if(this._tiles[u].coords.z!==this._tileZoom&&(y=this._tiles[u].el,y.onload=p,y.onerror=p,!y.complete)){y.src=te;var P=this._tiles[u].coords;dn(y),delete this._tiles[u],this.fire("tileabort",{tile:y,coords:P})}},_removeTile:function(u){var y=this._tiles[u];if(y)return y.el.setAttribute("src",te),ti.prototype._removeTile.call(this,u)},_tileReady:function(u,y,P){if(!(!this._map||P&&P.getAttribute("src")===te))return ti.prototype._tileReady.call(this,u,y,P)}});function Pi(u,y){return new Ws(u,y)}var Di=Ws.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(u,y){this._url=u;var P=i({},this.defaultWmsParams);for(var H in y)H in this.options||(P[H]=y[H]);y=E(this,y);var le=y.detectRetina&&lt.retina?2:1,Pe=this.getTileSize();P.width=Pe.x*le,P.height=Pe.y*le,this.wmsParams=P},onAdd:function(u){this._crs=this.options.crs||u.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var y=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[y]=this._crs.code,Ws.prototype.onAdd.call(this,u)},getTileUrl:function(u){var y=this._tileCoordsToNwSe(u),P=this._crs,H=Z(P.project(y[0]),P.project(y[1])),le=H.min,Pe=H.max,ut=(this._wmsVersion>=1.3&&this._crs===Ps?[le.y,le.x,Pe.y,Pe.x]:[le.x,le.y,Pe.x,Pe.y]).join(","),Ot=Ws.prototype.getTileUrl.call(this,u);return Ot+A(this.wmsParams,Ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ut},setParams:function(u,y){return i(this.wmsParams,u),y||this.redraw(),this}});function xs(u,y){return new Di(u,y)}Ws.WMS=Di,Pi.wms=xs;var Hi=Wr.extend({options:{padding:.1},initialize:function(u){E(this,u),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),lr(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var u={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(u.zoomanim=this._onAnimZoom),u},_onAnimZoom:function(u){this._updateTransform(u.center,u.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(u,y){var P=this._map.getZoomScale(y,this._zoom),H=this._map.getSize().multiplyBy(.5+this.options.padding),le=this._map.project(this._center,y),Pe=H.multiplyBy(-P).add(le).subtract(this._map._getNewPixelOrigin(u,y));lt.any3d?Cn(this._container,Pe,P):rn(this._container,Pe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var u in this._layers)this._layers[u]._reset()},_onZoomEnd:function(){for(var u in this._layers)this._layers[u]._project()},_updatePaths:function(){for(var u in this._layers)this._layers[u]._update()},_update:function(){var u=this.options.padding,y=this._map.getSize(),P=this._map.containerPointToLayerPoint(y.multiplyBy(-u)).round();this._bounds=new De(P,P.add(y.multiplyBy(1+u*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Jo=Hi.extend({options:{tolerance:0},getEvents:function(){var u=Hi.prototype.getEvents.call(this);return u.viewprereset=this._onViewPreReset,u},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Hi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var u=this._container=document.createElement("canvas");wr(u,"mousemove",this._onMouseMove,this),wr(u,"click dblclick mousedown mouseup contextmenu",this._onClick,this),wr(u,"mouseout",this._handleMouseOut,this),u._leaflet_disable_events=!0,this._ctx=u.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,dn(this._container),Ur(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var u;this._redrawBounds=null;for(var y in this._layers)u=this._layers[y],u._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hi.prototype._update.call(this);var u=this._bounds,y=this._container,P=u.getSize(),H=lt.retina?2:1;rn(y,u.min),y.width=H*P.x,y.height=H*P.y,y.style.width=P.x+"px",y.style.height=P.y+"px",lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-u.min.x,-u.min.y),this.fire("update")}},_reset:function(){Hi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(u){this._updateDashArray(u),this._layers[l(u)]=u;var y=u._order={layer:u,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=y),this._drawLast=y,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(u){this._requestRedraw(u)},_removePath:function(u){var y=u._order,P=y.next,H=y.prev;P?P.prev=H:this._drawLast=H,H?H.next=P:this._drawFirst=P,delete u._order,delete this._layers[l(u)],this._requestRedraw(u)},_updatePath:function(u){this._extendRedrawBounds(u),u._project(),u._update(),this._requestRedraw(u)},_updateStyle:function(u){this._updateDashArray(u),this._requestRedraw(u)},_updateDashArray:function(u){if(typeof u.options.dashArray=="string"){var y=u.options.dashArray.split(/[, ]+/),P=[],H,le;for(le=0;le<y.length;le++){if(H=Number(y[le]),isNaN(H))return;P.push(H)}u.options._dashArray=P}else u.options._dashArray=u.options.dashArray},_requestRedraw:function(u){this._map&&(this._extendRedrawBounds(u),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(u){if(u._pxBounds){var y=(u.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new De,this._redrawBounds.extend(u._pxBounds.min.subtract([y,y])),this._redrawBounds.extend(u._pxBounds.max.add([y,y]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var u=this._redrawBounds;if(u){var y=u.getSize();this._ctx.clearRect(u.min.x,u.min.y,y.x,y.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var u,y=this._redrawBounds;if(this._ctx.save(),y){var P=y.getSize();this._ctx.beginPath(),this._ctx.rect(y.min.x,y.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var H=this._drawFirst;H;H=H.next)u=H.layer,(!y||u._pxBounds&&u._pxBounds.intersects(y))&&u._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(u,y){if(this._drawing){var P,H,le,Pe,ut=u._parts,Ot=ut.length,Wt=this._ctx;if(Ot){for(Wt.beginPath(),P=0;P<Ot;P++){for(H=0,le=ut[P].length;H<le;H++)Pe=ut[P][H],Wt[H?"lineTo":"moveTo"](Pe.x,Pe.y);y&&Wt.closePath()}this._fillStroke(Wt,u)}}},_updateCircle:function(u){if(!(!this._drawing||u._empty())){var y=u._point,P=this._ctx,H=Math.max(Math.round(u._radius),1),le=(Math.max(Math.round(u._radiusY),1)||H)/H;le!==1&&(P.save(),P.scale(1,le)),P.beginPath(),P.arc(y.x,y.y/le,H,0,Math.PI*2,!1),le!==1&&P.restore(),this._fillStroke(P,u)}},_fillStroke:function(u,y){var P=y.options;P.fill&&(u.globalAlpha=P.fillOpacity,u.fillStyle=P.fillColor||P.color,u.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(u.setLineDash&&u.setLineDash(y.options&&y.options._dashArray||[]),u.globalAlpha=P.opacity,u.lineWidth=P.weight,u.strokeStyle=P.color,u.lineCap=P.lineCap,u.lineJoin=P.lineJoin,u.stroke())},_onClick:function(u){for(var y=this._map.mouseEventToLayerPoint(u),P,H,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(!(u.type==="click"||u.type==="preclick")||!this._map._draggableMoved(P))&&(H=P);this._fireEvent(H?[H]:!1,u)},_onMouseMove:function(u){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var y=this._map.mouseEventToLayerPoint(u);this._handleMouseHover(u,y)}},_handleMouseOut:function(u){var y=this._hoveredLayer;y&&(Tr(this._container,"leaflet-interactive"),this._fireEvent([y],u,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(u,y){if(!this._mouseHoverThrottled){for(var P,H,le=this._drawFirst;le;le=le.next)P=le.layer,P.options.interactive&&P._containsPoint(y)&&(H=P);H!==this._hoveredLayer&&(this._handleMouseOut(u),H&&(lr(this._container,"leaflet-interactive"),this._fireEvent([H],u,"mouseover"),this._hoveredLayer=H)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,u),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(u,y,P){this._map._fireDOMEvent(y,P||y.type,u)},_bringToFront:function(u){var y=u._order;if(y){var P=y.next,H=y.prev;if(P)P.prev=H;else return;H?H.next=P:P&&(this._drawFirst=P),y.prev=this._drawLast,this._drawLast.next=y,y.next=null,this._drawLast=y,this._requestRedraw(u)}},_bringToBack:function(u){var y=u._order;if(y){var P=y.next,H=y.prev;if(H)H.next=P;else return;P?P.prev=H:H&&(this._drawLast=H),y.prev=null,y.next=this._drawFirst,this._drawFirst.prev=y,this._drawFirst=y,this._requestRedraw(u)}}});function Oo(u){return lt.canvas?new Jo(u):null}var sa=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(u){return document.createElement("<lvml:"+u+' class="lvml">')}}catch{}return function(u){return document.createElement("<"+u+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),ec={_initContainer:function(){this._container=Yn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Hi.prototype._update.call(this),this.fire("update"))},_initPath:function(u){var y=u._container=sa("shape");lr(y,"leaflet-vml-shape "+(this.options.className||"")),y.coordsize="1 1",u._path=sa("path"),y.appendChild(u._path),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){var y=u._container;this._container.appendChild(y),u.options.interactive&&u.addInteractiveTarget(y)},_removePath:function(u){var y=u._container;dn(y),u.removeInteractiveTarget(y),delete this._layers[l(u)]},_updateStyle:function(u){var y=u._stroke,P=u._fill,H=u.options,le=u._container;le.stroked=!!H.stroke,le.filled=!!H.fill,H.stroke?(y||(y=u._stroke=sa("stroke")),le.appendChild(y),y.weight=H.weight+"px",y.color=H.color,y.opacity=H.opacity,H.dashArray?y.dashStyle=$(H.dashArray)?H.dashArray.join(" "):H.dashArray.replace(/( *, *)/g," "):y.dashStyle="",y.endcap=H.lineCap.replace("butt","flat"),y.joinstyle=H.lineJoin):y&&(le.removeChild(y),u._stroke=null),H.fill?(P||(P=u._fill=sa("fill")),le.appendChild(P),P.color=H.fillColor||H.color,P.opacity=H.fillOpacity):P&&(le.removeChild(P),u._fill=null)},_updateCircle:function(u){var y=u._point.round(),P=Math.round(u._radius),H=Math.round(u._radiusY||P);this._setPath(u,u._empty()?"M0 0":"AL "+y.x+","+y.y+" "+P+","+H+" 0,"+65535*360)},_setPath:function(u,y){u._path.v=y},_bringToFront:function(u){xi(u._container)},_bringToBack:function(u){ki(u._container)}},Ia=lt.vml?sa:ie,ks=Hi.extend({_initContainer:function(){this._container=Ia("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ia("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){dn(this._container),Ur(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Hi.prototype._update.call(this);var u=this._bounds,y=u.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(y))&&(this._svgSize=y,P.setAttribute("width",y.x),P.setAttribute("height",y.y)),rn(P,u.min),P.setAttribute("viewBox",[u.min.x,u.min.y,y.x,y.y].join(" ")),this.fire("update")}},_initPath:function(u){var y=u._path=Ia("path");u.options.className&&lr(y,u.options.className),u.options.interactive&&lr(y,"leaflet-interactive"),this._updateStyle(u),this._layers[l(u)]=u},_addPath:function(u){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(u._path),u.addInteractiveTarget(u._path)},_removePath:function(u){dn(u._path),u.removeInteractiveTarget(u._path),delete this._layers[l(u)]},_updatePath:function(u){u._project(),u._update()},_updateStyle:function(u){var y=u._path,P=u.options;y&&(P.stroke?(y.setAttribute("stroke",P.color),y.setAttribute("stroke-opacity",P.opacity),y.setAttribute("stroke-width",P.weight),y.setAttribute("stroke-linecap",P.lineCap),y.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?y.setAttribute("stroke-dasharray",P.dashArray):y.removeAttribute("stroke-dasharray"),P.dashOffset?y.setAttribute("stroke-dashoffset",P.dashOffset):y.removeAttribute("stroke-dashoffset")):y.setAttribute("stroke","none"),P.fill?(y.setAttribute("fill",P.fillColor||P.color),y.setAttribute("fill-opacity",P.fillOpacity),y.setAttribute("fill-rule",P.fillRule||"evenodd")):y.setAttribute("fill","none"))},_updatePoly:function(u,y){this._setPath(u,fe(u._parts,y))},_updateCircle:function(u){var y=u._point,P=Math.max(Math.round(u._radius),1),H=Math.max(Math.round(u._radiusY),1)||P,le="a"+P+","+H+" 0 1,0 ",Pe=u._empty()?"M0 0":"M"+(y.x-P)+","+y.y+le+P*2+",0 "+le+-P*2+",0 ";this._setPath(u,Pe)},_setPath:function(u,y){u._path.setAttribute("d",y)},_bringToFront:function(u){xi(u._path)},_bringToBack:function(u){ki(u._path)}});lt.vml&&ks.include(ec);function $i(u){return lt.svg||lt.vml?new ks(u):null}ei.include({getRenderer:function(u){var y=u.options.renderer||this._getPaneRenderer(u.options.pane)||this.options.renderer||this._renderer;return y||(y=this._renderer=this._createRenderer()),this.hasLayer(y)||this.addLayer(y),y},_getPaneRenderer:function(u){if(u==="overlayPane"||u===void 0)return!1;var y=this._paneRenderers[u];return y===void 0&&(y=this._createRenderer({pane:u}),this._paneRenderers[u]=y),y},_createRenderer:function(u){return this.options.preferCanvas&&Oo(u)||$i(u)}});var oo=Rs.extend({initialize:function(u,y){Rs.prototype.initialize.call(this,this._boundsToLatLngs(u),y)},setBounds:function(u){return this.setLatLngs(this._boundsToLatLngs(u))},_boundsToLatLngs:function(u){return u=re(u),[u.getSouthWest(),u.getNorthWest(),u.getNorthEast(),u.getSouthEast()]}});function No(u,y){return new oo(u,y)}ks.create=Ia,ks.pointsToPath=fe,no.geometryToLayer=ro,no.coordsToLatLng=qa,no.coordsToLatLngs=io,no.latLngToCoords=Hs,no.latLngsToCoords=Aa,no.getFeature=Xo,no.asFeature=so,ei.mergeOptions({boxZoom:!0});var pr=Li.extend({initialize:function(u){this._map=u,this._container=u._container,this._pane=u._panes.overlayPane,this._resetStateTimeout=0,u.on("unload",this._destroy,this)},addHooks:function(){wr(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ur(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){dn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(u){if(!u.shiftKey||u.which!==1&&u.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ms(),ga(),this._startPoint=this._map.mouseEventToContainerPoint(u),wr(document,{contextmenu:Yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(u){this._moved||(this._moved=!0,this._box=Yn("div","leaflet-zoom-box",this._container),lr(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(u);var y=new De(this._point,this._startPoint),P=y.getSize();rn(this._box,y.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(dn(this._box),Tr(this._container,"leaflet-crosshair")),us(),To(),Ur(document,{contextmenu:Yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(u){if(!(u.which!==1&&u.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var y=new G(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(y).fire("boxzoomend",{boxZoomBounds:y})}},_onKeyDown:function(u){u.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ei.addInitHook("addHandler","boxZoom",pr),ei.mergeOptions({doubleClickZoom:!0});var Ka=Li.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(u){var y=this._map,P=y.getZoom(),H=y.options.zoomDelta,le=u.originalEvent.shiftKey?P-H:P+H;y.options.doubleClickZoom==="center"?y.setZoom(le):y.setZoomAround(u.containerPoint,le)}});ei.addInitHook("addHandler","doubleClickZoom",Ka),ei.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Za=Li.extend({addHooks:function(){if(!this._draggable){var u=this._map;this._draggable=new ma(u._mapPane,u._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),u.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),u.on("zoomend",this._onZoomEnd,this),u.whenReady(this._onZoomEnd,this))}lr(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Tr(this._map._container,"leaflet-grab"),Tr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var u=this._map;if(u._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var y=re(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(y.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(y.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;u.fire("movestart").fire("dragstart"),u.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(u){if(this._map.options.inertia){var y=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(y),this._prunePositions(y)}this._map.fire("move",u).fire("drag",u)},_prunePositions:function(u){for(;this._positions.length>1&&u-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var u=this._map.getSize().divideBy(2),y=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=y.subtract(u).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(u,y){return u-(u-y)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var u=this._draggable._newPos.subtract(this._draggable._startPos),y=this._offsetLimit;u.x<y.min.x&&(u.x=this._viscousLimit(u.x,y.min.x)),u.y<y.min.y&&(u.y=this._viscousLimit(u.y,y.min.y)),u.x>y.max.x&&(u.x=this._viscousLimit(u.x,y.max.x)),u.y>y.max.y&&(u.y=this._viscousLimit(u.y,y.max.y)),this._draggable._newPos=this._draggable._startPos.add(u)}},_onPreDragWrap:function(){var u=this._worldWidth,y=Math.round(u/2),P=this._initialWorldOffset,H=this._draggable._newPos.x,le=(H-y+P)%u+y-P,Pe=(H+y+P)%u-y-P,ut=Math.abs(le+P)<Math.abs(Pe+P)?le:Pe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ut},_onDragEnd:function(u){var y=this._map,P=y.options,H=!P.inertia||u.noInertia||this._times.length<2;if(y.fire("dragend",u),H)y.fire("moveend");else{this._prunePositions(+new Date);var le=this._lastPos.subtract(this._positions[0]),Pe=(this._lastTime-this._times[0])/1e3,ut=P.easeLinearity,Ot=le.multiplyBy(ut/Pe),Wt=Ot.distanceTo([0,0]),fn=Math.min(P.inertiaMaxSpeed,Wt),Rn=Ot.multiplyBy(fn/Wt),er=fn/(P.inertiaDeceleration*ut),$r=Rn.multiplyBy(-er/2).round();!$r.x&&!$r.y?y.fire("moveend"):($r=y._limitOffset($r,y.options.maxBounds),N(function(){y.panBy($r,{duration:er,easeLinearity:ut,noMoveStart:!0,animate:!0})}))}}});ei.addInitHook("addHandler","dragging",Za),ei.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ba=Li.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(u){this._map=u,this._setPanDelta(u.options.keyboardPanDelta),this._setZoomDelta(u.options.zoomDelta)},addHooks:function(){var u=this._map._container;u.tabIndex<=0&&(u.tabIndex="0"),wr(u,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ur(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var u=document.body,y=document.documentElement,P=u.scrollTop||y.scrollTop,H=u.scrollLeft||y.scrollLeft;this._map._container.focus(),window.scrollTo(H,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(u){var y=this._panKeys={},P=this.keyCodes,H,le;for(H=0,le=P.left.length;H<le;H++)y[P.left[H]]=[-1*u,0];for(H=0,le=P.right.length;H<le;H++)y[P.right[H]]=[u,0];for(H=0,le=P.down.length;H<le;H++)y[P.down[H]]=[0,u];for(H=0,le=P.up.length;H<le;H++)y[P.up[H]]=[0,-1*u]},_setZoomDelta:function(u){var y=this._zoomKeys={},P=this.keyCodes,H,le;for(H=0,le=P.zoomIn.length;H<le;H++)y[P.zoomIn[H]]=u;for(H=0,le=P.zoomOut.length;H<le;H++)y[P.zoomOut[H]]=-u},_addHooks:function(){wr(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ur(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(u){if(!(u.altKey||u.ctrlKey||u.metaKey)){var y=u.keyCode,P=this._map,H;if(y in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(H=this._panKeys[y],u.shiftKey&&(H=Ce(H).multiplyBy(3)),P.options.maxBounds&&(H=P._limitOffset(Ce(H),P.options.maxBounds)),P.options.worldCopyJump){var le=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(H)));P.panTo(le)}else P.panBy(H)}else if(y in this._zoomKeys)P.setZoom(P.getZoom()+(u.shiftKey?3:1)*this._zoomKeys[y]);else if(y===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;Yr(u)}}});ei.addInitHook("addHandler","keyboard",ba),ei.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var wo=Li.extend({addHooks:function(){wr(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ur(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(u){var y=Pu(u),P=this._map.options.wheelDebounceTime;this._delta+=y,this._lastMousePos=this._map.mouseEventToContainerPoint(u),this._startTime||(this._startTime=+new Date);var H=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),H),Yr(u)},_performZoom:function(){var u=this._map,y=u.getZoom(),P=this._map.options.zoomSnap||0;u._stop();var H=this._delta/(this._map.options.wheelPxPerZoomLevel*4),le=4*Math.log(2/(1+Math.exp(-Math.abs(H))))/Math.LN2,Pe=P?Math.ceil(le/P)*P:le,ut=u._limitZoom(y+(this._delta>0?Pe:-Pe))-y;this._delta=0,this._startTime=null,ut&&(u.options.scrollWheelZoom==="center"?u.setZoom(y+ut):u.setZoomAround(this._lastMousePos,y+ut))}});ei.addInitHook("addHandler","scrollWheelZoom",wo);var ih=600;ei.mergeOptions({tapHold:lt.touchNative&&lt.safari&&lt.mobile,tapTolerance:15});var Gs=Li.extend({addHooks:function(){wr(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ur(this._map._container,"touchstart",this._onDown,this)},_onDown:function(u){if(clearTimeout(this._holdTimeout),u.touches.length===1){var y=u.touches[0];this._startPos=this._newPos=new oe(y.clientX,y.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(wr(document,"touchend",Lr),wr(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",y))},this),ih),wr(document,"touchend touchcancel contextmenu",this._cancel,this),wr(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function u(){Ur(document,"touchend",Lr),Ur(document,"touchend touchcancel",u)},_cancel:function(){clearTimeout(this._holdTimeout),Ur(document,"touchend touchcancel contextmenu",this._cancel,this),Ur(document,"touchmove",this._onMove,this)},_onMove:function(u){var y=u.touches[0];this._newPos=new oe(y.clientX,y.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(u,y){var P=new MouseEvent(u,{bubbles:!0,cancelable:!0,view:window,screenX:y.screenX,screenY:y.screenY,clientX:y.clientX,clientY:y.clientY});P._simulated=!0,y.target.dispatchEvent(P)}});ei.addInitHook("addHandler","tapHold",Gs),ei.mergeOptions({touchZoom:lt.touch,bounceAtZoomLimits:!0});var qs=Li.extend({addHooks:function(){lr(this._map._container,"leaflet-touch-zoom"),wr(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Tr(this._map._container,"leaflet-touch-zoom"),Ur(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(u){var y=this._map;if(!(!u.touches||u.touches.length!==2||y._animatingZoom||this._zooming)){var P=y.mouseEventToContainerPoint(u.touches[0]),H=y.mouseEventToContainerPoint(u.touches[1]);this._centerPoint=y.getSize()._divideBy(2),this._startLatLng=y.containerPointToLatLng(this._centerPoint),y.options.touchZoom!=="center"&&(this._pinchStartLatLng=y.containerPointToLatLng(P.add(H)._divideBy(2))),this._startDist=P.distanceTo(H),this._startZoom=y.getZoom(),this._moved=!1,this._zooming=!0,y._stop(),wr(document,"touchmove",this._onTouchMove,this),wr(document,"touchend touchcancel",this._onTouchEnd,this),Lr(u)}},_onTouchMove:function(u){if(!(!u.touches||u.touches.length!==2||!this._zooming)){var y=this._map,P=y.mouseEventToContainerPoint(u.touches[0]),H=y.mouseEventToContainerPoint(u.touches[1]),le=P.distanceTo(H)/this._startDist;if(this._zoom=y.getScaleZoom(le,this._startZoom),!y.options.bounceAtZoomLimits&&(this._zoom<y.getMinZoom()&&le<1||this._zoom>y.getMaxZoom()&&le>1)&&(this._zoom=y._limitZoom(this._zoom)),y.options.touchZoom==="center"){if(this._center=this._startLatLng,le===1)return}else{var Pe=P._add(H)._divideBy(2)._subtract(this._centerPoint);if(le===1&&Pe.x===0&&Pe.y===0)return;this._center=y.unproject(y.project(this._pinchStartLatLng,this._zoom).subtract(Pe),this._zoom)}this._moved||(y._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var ut=o(y._move,y,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(ut,this,!0),Lr(u)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Ur(document,"touchmove",this._onTouchMove,this),Ur(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ei.addInitHook("addHandler","touchZoom",qs),ei.BoxZoom=pr,ei.DoubleClickZoom=Ka,ei.Drag=Za,ei.Keyboard=ba,ei.ScrollWheelZoom=wo,ei.TapHold=Gs,ei.TouchZoom=qs,n.Bounds=De,n.Browser=lt,n.CRS=ve,n.Canvas=Jo,n.Circle=to,n.CircleMarker=Do,n.Class=R,n.Control=ur,n.DivIcon=Oa,n.DivOverlay=_o,n.DomEvent=au,n.DomUtil=mr,n.Draggable=ma,n.Evented=X,n.FeatureGroup=vo,n.GeoJSON=no,n.GridLayer=ti,n.Handler=Li,n.Icon=Ma,n.ImageOverlay=Nn,n.LatLng=he,n.LatLngBounds=G,n.Layer=Wr,n.LayerGroup=eo,n.LineUtil=Hr,n.Map=ei,n.Marker=Ms,n.Mixin=kc,n.Path=Zo,n.Point=oe,n.PolyUtil=Rl,n.Polygon=Rs,n.Polyline=bo,n.Popup=Qi,n.PosAnimation=Mu,n.Projection=Ci,n.Rectangle=oo,n.Renderer=Hi,n.SVG=ks,n.SVGOverlay=Ei,n.TileLayer=Ws,n.Tooltip=Ya,n.Transformation=Te,n.Util=V,n.VideoOverlay=xr,n.bind=o,n.bounds=Z,n.canvas=Oo,n.circle=yo,n.circleMarker=jl,n.control=bs,n.divIcon=Na,n.extend=i,n.featureGroup=Au,n.geoJSON=Yt,n.geoJson=Nt,n.gridLayer=ya,n.icon=Qu,n.imageOverlay=Jn,n.latLng=ce,n.latLngBounds=re,n.layerGroup=Fl,n.map=ys,n.marker=ka,n.point=Ce,n.polygon=Wa,n.polyline=Ac,n.popup=Ta,n.rectangle=No,n.setOptions=E,n.stamp=l,n.svg=$i,n.svgOverlay=du,n.tileLayer=Pi,n.tooltip=Da,n.transformation=Ye,n.version=r,n.videoOverlay=Ji;var _a=window.L;n.noConflict=function(){return window.L=_a,this},window.L=n})})(mb,mb.exports);var Vt=mb.exports;const Wn=j_(Vt);var t5={exports:{}};(function(t,e){(function(n,r){r(e)})(Ca,function(n){var r=typeof window<"u"?window:typeof Ca<"u"?Ca:typeof self<"u"?self:{};function i(c,d){return c(d={exports:{}},d.exports),d.exports}var s=i(function(c,d){(function(p){const v={escape:function(j){return j.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:m,mimeType:function(j){return j=m(j).toLowerCase(),function(){var W="application/font-woff",X="image/jpeg";return{woff:W,woff2:W,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:X,jpeg:X,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[j]||""},dataAsUrl:function(j,W){return`data:${W};base64,`+j},isDataUrl:function(j){return j.search(/^(data:)/)!==-1},canvasToBlob:function(j){return j.toBlob?new Promise(function(X){j.toBlob(X)}):(W=j,new Promise(function(X){const oe=pe(W.toDataURL().split(",")[1]);var _e=oe.length;const Ce=new Uint8Array(_e);for(let De=0;De<_e;De++)Ce[De]=oe.charCodeAt(De);X(new Blob([Ce],{type:"image/png"}))}));var W},resolveUrl:function(j,W){const X=document.implementation.createHTMLDocument(),oe=X.createElement("base"),_e=(X.head.appendChild(oe),X.createElement("a"));return X.body.appendChild(_e),oe.href=W,_e.href=j,_e.href},getAndEncode:function(j){let W=te.impl.urlCache.find(function(X){return X.url===j});return W||(W={url:j,promise:null},te.impl.urlCache.push(W)),W.promise===null&&(te.impl.options.cacheBust&&(j+=(/\?/.test(j)?"&":"?")+new Date().getTime()),W.promise=new Promise(function(X){const oe=te.impl.options.httpTimeout,_e=new XMLHttpRequest;let Ce;var De;function Z(G){console.error(G),X("")}_e.onreadystatechange=function(){if(_e.readyState===4)if(_e.status!==200)Ce?X(Ce):Z(`cannot fetch resource: ${j}, status: `+_e.status);else{const G=new FileReader;G.onloadend=function(){var re=G.result.split(/,/)[1];X(re)},G.readAsDataURL(_e.response)}},_e.ontimeout=function(){Ce?X(Ce):Z(`timeout of ${oe}ms occured while fetching resource: `+j)},_e.responseType="blob",_e.timeout=oe,te.impl.options.useCredentials&&(_e.withCredentials=!0),_e.open("GET",j,!0),_e.send(),te.impl.options.imagePlaceholder&&(De=te.impl.options.imagePlaceholder.split(/,/))&&De[1]&&(Ce=De[1])})),W.promise},uid:function(){let j=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+j++}}(),delay:function(j){return function(W){return new Promise(function(X){setTimeout(function(){X(W)},j)})}},asArray:function(j){const W=[],X=j.length;for(let oe=0;oe<X;oe++)W.push(j[oe]);return W},escapeXhtml:function(j){return j.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(j){return j!=="data:,"?new Promise(function(W,X){const oe=new Image;te.impl.options.useCredentials&&(oe.crossOrigin="use-credentials"),oe.onload=function(){W(oe)},oe.onerror=X,oe.src=j}):Promise.resolve()},width:function(j){var W=x(j,"border-left-width"),X=x(j,"border-right-width");return j.scrollWidth+W+X},height:function(j){var W=x(j,"border-top-width"),X=x(j,"border-bottom-width");return j.scrollHeight+W+X}};function m(j){return(j=/\.([^\.\/]*?)(\?|$)/g.exec(j))?j[1]:""}function x(j,W){const X=me(j).getPropertyValue(W);return parseFloat(X.replace("px",""))}const E=function(){const j=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(_e,Ce,De){return W(_e)?Promise.resolve(_e).then(X).then(function(Z){let G=Promise.resolve(_e);return Z.forEach(function(re){G=G.then(function(he){return oe(he,re,Ce,De)})}),G}):Promise.resolve(_e)},shouldProcess:W,impl:{readUrls:X,inline:oe}};function W(_e){return _e.search(j)!==-1}function X(_e){const Ce=[];for(var De;(De=j.exec(_e))!==null;)Ce.push(De[1]);return Ce.filter(function(Z){return!v.isDataUrl(Z)})}function oe(_e,Ce,De,Z){return Promise.resolve(Ce).then(function(G){return De?v.resolveUrl(G,De):G}).then(Z||v.getAndEncode).then(function(G){return v.dataAsUrl(G,v.mimeType(Ce))}).then(function(G){return _e.replace((re=Ce,new RegExp(`(url\\(['"]?)(${v.escape(re)})(['"]?\\))`,"g")),`$1${G}$3`);var re})}}(),A={resolveAll:function(){return k().then(function(j){return Promise.all(j.map(function(W){return W.resolve()}))}).then(function(j){return j.join(`
`)})},impl:{readAll:k}};function k(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(W){const X=[];return W.forEach(function(oe){if(Object.getPrototypeOf(oe).hasOwnProperty("cssRules"))try{v.asArray(oe.cssRules||[]).forEach(X.push.bind(X))}catch(_e){console.log("Error while reading CSS rules from "+oe.href,_e.toString())}}),X}).then(function(W){return W.filter(function(X){return X.type===CSSRule.FONT_FACE_RULE}).filter(function(X){return E.shouldProcess(X.style.getPropertyValue("src"))})}).then(function(W){return W.map(j)});function j(W){return{resolve:function(){var X=(W.parentStyleSheet||{}).href;return E.inlineAll(W.cssText,X)},src:function(){return W.style.getPropertyValue("src")}}}}const D={inlineAll:function j(W){return W instanceof Element?function(X){const oe=X.style.getPropertyValue("background");return oe?E.inlineAll(oe).then(function(_e){X.style.setProperty("background",_e,oe)}).then(function(){return X}):Promise.resolve(X)}(W).then(function(){return W instanceof HTMLImageElement?$(W).inline():Promise.all(v.asArray(W.childNodes).map(function(X){return j(X)}))}):Promise.resolve(W)},impl:{newImage:$}};function $(j){return{inline:function(W){return v.isDataUrl(j.src)?Promise.resolve():Promise.resolve(j.src).then(W||v.getAndEncode).then(function(X){return v.dataAsUrl(X,v.mimeType(j.src))}).then(function(X){return new Promise(function(oe){j.onload=oe,j.onerror=oe,j.src=X})})}}}const Y={imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1},te={toSvg:I,toPng:function(j,W){return(W=W||{}).raster=!0,z(j,W).then(function(X){return X.toDataURL()})},toJpeg:function(j,W){return(W=W||{}).raster=!0,z(j,W).then(function(X){return X.toDataURL("image/jpeg",W.quality||1)})},toBlob:function(j,W){return(W=W||{}).raster=!0,z(j,W).then(v.canvasToBlob)},toPixelData:function(j,W){return(W=W||{}).raster=!0,z(j,W).then(function(X){return X.getContext("2d").getImageData(0,0,v.width(j),v.height(j)).data})},toCanvas:function(j,W){return(W=W||{}).raster=!0,z(j,W||{})},impl:{fontFaces:A,images:D,util:v,inliner:E,urlCache:[],options:{}}},me=(c.exports=te,p.getComputedStyle||window.getComputedStyle),pe=p.atob||window.atob;function I(j,W){var X=W=W||{};return X.imagePlaceholder===void 0?te.impl.options.imagePlaceholder=Y.imagePlaceholder:te.impl.options.imagePlaceholder=X.imagePlaceholder,X.cacheBust===void 0?te.impl.options.cacheBust=Y.cacheBust:te.impl.options.cacheBust=X.cacheBust,X.useCredentials===void 0?te.impl.options.useCredentials=Y.useCredentials:te.impl.options.useCredentials=X.useCredentials,Promise.resolve(j).then(function(oe){return function _e(Ce,De,Z,G,re=null){return Z||!De||De(Ce)?Promise.resolve(Ce).then(function(he){return he instanceof HTMLCanvasElement?v.makeImage(he.toDataURL()):he.nodeName==="IFRAME"?html2canvas(he.contentDocument.body).then(ce=>ce.toDataURL()).then(v.makeImage):he.cloneNode(!1)}).then(function(he){return function(ce,ve){const ee=ce.childNodes;return ee.length===0?Promise.resolve(ve):function(J,Oe){const Te=me(ce);let Ye=Promise.resolve();return Oe.forEach(function(ge){Ye=Ye.then(function(){return _e(ge,De,!1,G,Te)}).then(function(Q){Q&&J.appendChild(Q)})}),Ye}(ve,v.asArray(ee)).then(function(){return ve})}(Ce,he)}).then(function(he){return function(ce,ve,ee){return ve instanceof Element?Promise.resolve().then(function(){(function(J,Oe){const Te=me(J);Te.cssText?(Oe.style.cssText=Te.cssText,function(Ye,ge){ge.font=Ye.font,ge.fontFamily=Ye.fontFamily,ge.fontFeatureSettings=Ye.fontFeatureSettings,ge.fontKerning=Ye.fontKerning,ge.fontSize=Ye.fontSize,ge.fontStretch=Ye.fontStretch,ge.fontStyle=Ye.fontStyle,ge.fontVariant=Ye.fontVariant,ge.fontVariantCaps=Ye.fontVariantCaps,ge.fontVariantEastAsian=Ye.fontVariantEastAsian,ge.fontVariantLigatures=Ye.fontVariantLigatures,ge.fontVariantNumeric=Ye.fontVariantNumeric,ge.fontVariationSettings=Ye.fontVariationSettings,ge.fontWeight=Ye.fontWeight}(Te,Oe.style)):(ee?function(Ye,ge,Q,ie){const fe=Q.style,Se=Ye.style;for(var de of ge){var Xe=ge.getPropertyValue(de),$e=Se.getPropertyValue(de),Je=(Se.setProperty(de,ie?"initial":"unset"),ge.getPropertyValue(de));Je!==Xe?fe.setProperty(de,Xe):fe.removeProperty(de),Se.setProperty(de,$e)}}(J,Te,Oe,Z):function(Ye,ge,Q){const ie=function(Se){if(R[Se])return R[Se];V||((V=document.createElement("iframe")).style.visibility="hidden",V.style.position="fixed",document.body.appendChild(V),V.contentWindow.document.write('<!DOCTYPE html><meta charset="UTF-8"><title>sandbox</title><body>'));const de=document.createElement(Se),Xe=(V.contentWindow.document.body.appendChild(de),de.textContent=".",V.contentWindow.getComputedStyle(de)),$e={};return v.asArray(Xe).forEach(function(Je){$e[Je]=Je==="width"||Je==="height"?"auto":Xe.getPropertyValue(Je)}),V.contentWindow.document.body.removeChild(de),R[Se]=$e}(Q.tagName),fe=Q.style;v.asArray(Ye).forEach(function(Se){var de=Ye.getPropertyValue(Se);(de!==ie[Se]||ge&&de!==ge.getPropertyValue(Se))&&fe.setProperty(Se,de,Ye.getPropertyPriority(Se))})}(Te,re,Oe),Z&&(["inset-block","inset-block-start","inset-block-end"].forEach(Ye=>Oe.style.removeProperty(Ye)),["left","right","top","bottom"].forEach(Ye=>{Oe.style.getPropertyValue(Ye)&&Oe.style.setProperty(Ye,"0px")})))})(ce,ve)}).then(function(){[":before",":after"].forEach(function(J){(function(Oe){const Te=me(ce,Oe),Ye=Te.getPropertyValue("content");if(Ye!==""&&Ye!=="none"){const ge=v.uid(),Q=ve.getAttribute("class"),ie=(Q&&ve.setAttribute("class",Q+" "+ge),document.createElement("style"));ie.appendChild(function(){const fe=`.${ge}:`+Oe,Se=(Te.cssText?function(){return`${Te.cssText} content: ${Te.getPropertyValue("content")};`}:function(){return v.asArray(Te).map(function(de){return de+": "+Te.getPropertyValue(de)+(Te.getPropertyPriority(de)?" !important":"")}).join("; ")+";"})();return document.createTextNode(fe+`{${Se}}`)}()),ve.appendChild(ie)}})(J)})}).then(function(){ce instanceof HTMLTextAreaElement&&(ve.innerHTML=ce.value),ce instanceof HTMLInputElement&&ve.setAttribute("value",ce.value)}).then(function(){ve instanceof SVGElement&&(ve.setAttribute("xmlns","http://www.w3.org/2000/svg"),ve instanceof SVGRectElement&&["width","height"].forEach(function(J){const Oe=ve.getAttribute(J);Oe&&ve.style.setProperty(J,Oe)}))}).then(function(){return ve}):ve}(Ce,he,G)}):Promise.resolve()}(oe,W.filter,!0,!W.raster)}).then(K).then(N).then(function(oe){W.bgcolor&&(oe.style.backgroundColor=W.bgcolor),W.width&&(oe.style.width=W.width+"px"),W.height&&(oe.style.height=W.height+"px"),W.style&&Object.keys(W.style).forEach(function(Ce){oe.style[Ce]=W.style[Ce]});let _e=null;return typeof W.onclone=="function"&&(_e=W.onclone(oe)),Promise.resolve(_e).then(function(){return oe})}).then(function(oe){return oe=oe,_e=W.width||v.width(j),Ce=W.height||v.height(j),Promise.resolve(oe).then(function(De){return De.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(De)}).then(v.escapeXhtml).then(function(De){return`<foreignObject x="0" y="0" width="100%" height="100%">${De}</foreignObject>`}).then(function(De){return`<svg xmlns="http://www.w3.org/2000/svg" width="${_e}" height="${Ce}">${De}</svg>`}).then(function(De){return"data:image/svg+xml;charset=utf-8,"+De});var _e,Ce}).then(function(oe){return te.impl.urlCache=[],oe})}function z(j,W){return I(j,W).then(v.makeImage).then(v.delay(0)).then(function(X){var oe=typeof W.scale!="number"?1:W.scale;const _e=function(De,Z){const G=document.createElement("canvas");if(G.width=(W.width||v.width(De))*Z,G.height=(W.height||v.height(De))*Z,W.bgcolor){const re=G.getContext("2d");re.fillStyle=W.bgcolor,re.fillRect(0,0,G.width,G.height)}return G}(j,oe),Ce=_e.getContext("2d");return Ce.mozImageSmoothingEnabled=!1,Ce.msImageSmoothingEnabled=!1,Ce.imageSmoothingEnabled=!1,X&&(Ce.scale(oe,oe),Ce.drawImage(X,0,0)),V&&(document.body.removeChild(V),V=null,B&&clearTimeout(B),B=setTimeout(()=>{B=null,R={}},2e4)),_e})}function K(j){return A.resolveAll().then(function(W){const X=document.createElement("style");return j.appendChild(X),X.appendChild(document.createTextNode(W)),j})}function N(j){return D.inlineAll(j).then(function(){return j})}let B=null,V=null,R={}})(r)}),o=i(function(c,d){(function(){function p(A,k,D){var $=new XMLHttpRequest;$.open("GET",A),$.responseType="blob",$.onload=function(){E($.response,k,D)},$.onerror=function(){console.error("could not download file")},$.send()}function v(A){var k=new XMLHttpRequest;k.open("HEAD",A,!1);try{k.send()}catch{}return 200<=k.status&&299>=k.status}function m(A){try{A.dispatchEvent(new MouseEvent("click"))}catch{var k=document.createEvent("MouseEvents");k.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),A.dispatchEvent(k)}}var x=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof r=="object"&&r.global===r?r:void 0,E=x.saveAs||(typeof window!="object"||window!==x?function(){}:"download"in HTMLAnchorElement.prototype?function(A,k,D){var $=x.URL||x.webkitURL,Y=document.createElement("a");k=k||A.name||"download",Y.download=k,Y.rel="noopener",typeof A=="string"?(Y.href=A,Y.origin===location.origin?m(Y):v(Y.href)?p(A,k,D):m(Y,Y.target="_blank")):(Y.href=$.createObjectURL(A),setTimeout(function(){$.revokeObjectURL(Y.href)},4e4),setTimeout(function(){m(Y)},0))}:"msSaveOrOpenBlob"in navigator?function(A,k,D){if(k=k||A.name||"download",typeof A!="string")navigator.msSaveOrOpenBlob(function(Y,te){return te===void 0?te={autoBom:!1}:typeof te!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),te={autoBom:!te}),te.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Y.type)?new Blob(["\uFEFF",Y],{type:Y.type}):Y}(A,D),k);else if(v(A))p(A,k,D);else{var $=document.createElement("a");$.href=A,$.target="_blank",setTimeout(function(){m($)})}}:function(A,k,D,$){if(($=$||open("","_blank"))&&($.document.title=$.document.body.innerText="downloading..."),typeof A=="string")return p(A,k,D);var Y=A.type==="application/octet-stream",te=/constructor/i.test(x.HTMLElement)||x.safari,me=/CriOS\/[\d]+/.test(navigator.userAgent);if((me||Y&&te)&&typeof FileReader=="object"){var pe=new FileReader;pe.onloadend=function(){var K=pe.result;K=me?K:K.replace(/^data:[^;]*;/,"data:attachment/file;"),$?$.location.href=K:location=K,$=null},pe.readAsDataURL(A)}else{var I=x.URL||x.webkitURL,z=I.createObjectURL(A);$?$.location=z:location.href=z,$=null,setTimeout(function(){I.revokeObjectURL(z)},4e4)}});x.saveAs=E.saveAs=E,c.exports=E})()}),a=L.Control.extend({options:{cropImageByInnerWH:!0,hidden:!1,domtoimageOptions:{},position:"topleft",screenName:"screen",iconUrl:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDMyIDMyIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzMiAzMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxnPjxnIGlkPSJjYW1lcmEiPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsOS41MDFjLTQuNDE5LDAtOCwzLjU4MS04LDhjMCw0LjQxOCwzLjU4MSw4LDgsOGM0LjQxOCwwLDgtMy41ODIsOC04UzIwLjQxOCw5LjUwMSwxNiw5LjUwMXogTTIwLjU1NSwyMS40MDZjLTIuMTU2LDIuNTE2LTUuOTQzLDIuODA3LTguNDU5LDAuNjVjLTIuNTE3LTIuMTU2LTIuODA3LTUuOTQ0LTAuNjUtOC40NTljMi4xNTUtMi41MTcsNS45NDMtMi44MDcsOC40NTktMC42NUMyMi40MiwxNS4xMDIsMjIuNzExLDE4Ljg5MSwyMC41NTUsMjEuNDA2eiIvPjxwYXRoIHN0eWxlPSJmaWxsOiMwMTAwMDI7IiBkPSJNMTYsMTMuNTAxYy0yLjIwOSwwLTMuOTk5LDEuNzkxLTQsMy45OTl2MC4wMDJjMCwwLjI3NSwwLjIyNCwwLjUsMC41LDAuNXMwLjUtMC4yMjUsMC41LTAuNVYxNy41YzAuMDAxLTEuNjU2LDEuMzQzLTIuOTk5LDMtMi45OTljMC4yNzYsMCwwLjUtMC4yMjQsMC41LTAuNVMxNi4yNzYsMTMuNTAxLDE2LDEzLjUwMXoiLz48cGF0aCBzdHlsZT0iZmlsbDojMDEwMDAyOyIgZD0iTTI5LjQ5Miw4LjU0MmwtNC4zMzQtMC43MjNsLTEuMzczLTMuNDM0QzIzLjMyNiwzLjI0LDIyLjIzMiwyLjUsMjEsMi41SDExYy0xLjIzMiwwLTIuMzI2LDAuNzQtMi43ODYsMS44ODZMNi44NDIsNy44MTlMMi41MDksOC41NDJDMS4wNTUsOC43ODMsMCwxMC4wMjcsMCwxMS41djE1YzAsMS42NTQsMS4zNDYsMywzLDNoMjZjMS42NTQsMCwzLTEuMzQ2LDMtM3YtMTVDMzIsMTAuMDI3LDMwLjk0NSw4Ljc4MywyOS40OTIsOC41NDJ6IE0zMCwyNi41YzAsMC41NTMtMC40NDcsMS0xLDFIM2MtMC41NTMsMC0xLTAuNDQ3LTEtMXYtMTVjMC0wLjQ4OSwwLjM1NC0wLjkwNiwwLjgzNi0wLjk4Nkw4LjI4LDkuNjA3bDEuNzkxLTQuNDc4QzEwLjIyNCw0Ljc1LDEwLjU5MSw0LjUsMTEsNC41aDEwYzAuNDA4LDAsMC43NzUsMC4yNDksMC45MjgsMC42MjlsMS43OTEsNC40NzhsNS40NDUsMC45MDdDMjkuNjQ2LDEwLjU5NCwzMCwxMS4wMTEsMzAsMTEuNVYyNi41eiIvPjwvZz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PC9zdmc+",hideElementsWithSelectors:[".leaflet-control-container"],onCropBorderSize:2,caption:null,captionFontSize:15,captionFont:"Arial",captionColor:"black",captionBgColor:"white",captionOffset:5,mimeType:"image/png",debugMode:!1,preventDownload:!1,onPixelDataFail:function(c){var d=c.node,p=c.error;return console.warn("Map node is very big "+d.scrollWidth+"x"+d.scrollHeight),console.warn(`Add function: SimpleMapScreenshoter({
              onPixelDataFail: function({ node, plugin, error, mapPane, domtoimageOptions }) {
                 // Solutions:
                 // decrease size of map
                 // or decrease zoom level
                 // or remove elements with big distanses
                 // and after that return image in Promise - plugin._getPixelDataOfNormalMap
                 return plugin._getPixelDataOfNormalMap(domtoimageOptions)
              }
            })`),Promise.reject(p)}},onAdd:function(){return this._container=L.DomUtil.create("div","leaflet-control-simpleMapScreenshoter"),this._link=null,this._screenState={status:1,promise:null},this.options.hidden===!1&&this._addScreenBtn(),this._onUserStartInteractWithMap=this._onUserStartInteractWithMap.bind(this),this._onUserEndInteractWithMap=this._onUserEndInteractWithMap.bind(this),this._map.on("zoomstart",this._onUserStartInteractWithMap),this._map.on("move",this._onUserStartInteractWithMap),this._map.on("zoomend",this._onUserEndInteractWithMap),this._map.on("moveend",this._onUserEndInteractWithMap),this._container},takeScreen:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"blob",p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v={};for(var m in this.options)p.hasOwnProperty(m)?v[m]=p[m]:v[m]=this.options[m];return this._screenState.status===2?this._screenState.promise:(this._map.fire("simpleMapScreenshoter.takeScreen"),this._screenState.status=2,this._setElementsVisible(!1),this._screenState.promise=this._waitEndOfInteractions().then(function(){return c._getPixelData(v)}).then(function(x){return c._setElementsVisible(!0),c._toCanvas(x,v)}).then(function(x){return d==="image"?c._canvasToImage(x,v):d==="canvas"?x:c._canvasToBlob(x,v)}).then(function(x){return c._screenState.status=1,c._map.fire("simpleMapScreenshoter.done"),x}).catch(function(x){return c._setElementsVisible(!0),c._screenState.status=1,c._map.fire("simpleMapScreenshoter.error",{e:x}),Promise.reject(x)}),this._screenState.promise)},_setElementsVisible:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this.options.hideElementsWithSelectors.forEach(function(p){var v=c._map._container.querySelectorAll(p),m=!0,x=!1,E=void 0;try{for(var A,k=v[Symbol.iterator]();!(m=(A=k.next()).done);m=!0)A.value.style.opacity=d===!1?0:1}catch(D){x=!0,E=D}finally{try{!m&&k.return&&k.return()}finally{if(x)throw E}}})},_canvasToImage:function(c,d){var p=d.mimeType,v=c.toDataURL(p);return v.indexOf("base64")===-1?Promise.reject(new Error("Base64 image generation error")):Promise.resolve(v)},_canvasToBlob:function(c,d){var p=d.mimeType;return new Promise(function(v,m){c.toBlob(function(x){v(x)},p)})},_toCanvas:function(c,d){var p=d.captionOffset,v=d.caption,m=d.captionFontSize,x=d.captionFont,E=d.captionColor,A=d.captionBgColor,k=this._node,D=k.screenHeight,$=k.screenWidth,Y=document.createElement("canvas");Y.width=$,Y.height=D;for(var te=Y.getContext("2d"),me=te.createImageData($,D),pe=0;pe<c.length;++pe)me.data[pe]=c[pe];te.putImageData(me,0,0),me=null;var I=document.createElement("canvas"),z=I.getContext("2d"),K=0,N=0,B=D,V=$;if(this.options.cropImageByInnerWH===!0){for(var R=[],j=0,W=0;W<D;++W){j=0;for(var X=0;X<$;++X)c[4*W*$+4*X+4]===0&&j++;j===$&&R.push(W)}var oe=this._getMinAndMaxOnValuesBreak(R);K=oe.min;for(var _e=$,Ce=oe.max,De=[],Z=0,G=N;G<_e;++G){Z=0;for(var re=0;re<D;++re)c[4*re*$+4*G+4]===0&&Z++;Z===D&&De.push(G)}var he=this._getMinAndMaxOnValuesBreak(De);N=he.min,_e=he.max,(N===0&&_e===0||_e===null)&&(_e=$),(K===0&&Ce===0||Ce===null)&&(Ce=D),this.options.debugMode===!0&&(console.log("emptyYLine",R),console.log("minMaxY",oe),console.log("emptyXLine",De),console.log("minMaxX",he),console.log("debugX",{}),console.log("debugY",{})),K===0&&Ce===D&&N===0&&_e===$||(K+=this.options.onCropBorderSize,Ce-=this.options.onCropBorderSize,N+=this.options.onCropBorderSize,_e-=this.options.onCropBorderSize),B=Ce-K,V=_e-N,I.width=V,I.height=B}else I.width=V,I.height=B;var ce=null;return v&&(ce=typeof v=="function"?v.call(this):v),ce!==null&&(I.height=I.height+(p+m+p),z.beginPath(),z.rect(0,0,I.width,I.height),z.fillStyle=A,z.fill(),z.save()),z.drawImage(Y,N,K,V,B,0,0,V,B),ce!==null&&(z.font=m+"px "+x,z.fillStyle=E,z.fillText(ce,p,B+p+m)),Promise.resolve(I)},_getMinAndMaxOnValuesBreak:function(c){for(var d=0,p=0,v=!1,m=1;m<c.length;m++){if(c[m]-1!==c[m-1]){p=c[m],v=!0;break}d=c[m]}return v===!1&&c[0]>1?(d=0,p=c[0]):v===!1&&(d=c[c.length-1]||0,p=null),{min:d,max:p}},_getPixelData:function(c){var d=this,p=c.domtoimageOptions,v=p===void 0?{}:p;return this._getPixelDataOfNormalMap(v).catch(function(m){return console.warn("May be map size very big on that zoom level, we have error:",m.toString()),console.warn("You can manually hide map elements with large distances between them for fix that warn"),d._getPixelDataOfBigMap(v)})},_getPixelDataOfNormalMap:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},d=this._map.getContainer();return this._node={node:d,screenHeight:d.scrollHeight,screenWidth:d.scrollWidth},s.toPixelData(d,c)},_getPixelDataOfBigMap:function(){var c=this,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=this._map.getContainer(),v=this._map.getPane("mapPane");v.style.width=2*p.clientWidth+"px",v.style.height=2*p.clientHeight+"px",v.style.overflow="hidden";var m=function(){v.style.width="initial",v.style.height="initial",v.style.overflow="initial"};return this._node={node:p,screenHeight:p.scrollHeight,screenWidth:p.scrollWidth},s.toPixelData(p,d).then(function(x){return m(),x}).catch(function(x){return m(),p.scrollHeight>=4e3||p.scrollWidth>=4e3?c.options.onPixelDataFail({plugin:c,node:p,mapPane:v,error:x,domtoimageOptions:d}):Promise.reject(x)})},_addScreenBtn:function(){this._link=L.DomUtil.create("a","leaflet-control-simpleMapScreenshoter-btn",this._container),this._addCss(),L.DomEvent.addListener(this._link,"click",this._onScreenBtn,this),L.DomEvent.disableClickPropagation(this._link)},_addCss:function(){var c=`
    .leaflet-control-simpleMapScreenshoter{
       border: 2px solid rgba(0,0,0,0.2);
       background-clip: padding-box;
    }
    .leaflet-control-simpleMapScreenshoter a{
       background-color: #fff;
       border-bottom: 1px solid #ccc;
       width: 30px;
       height: 30px;
       line-height: 30px;
       display: block;
       text-align: center;
       text-decoration: none;
       color: black;
       overflow: hidden;
       border-radius: 2px;
       background-image: url('`+this.options.iconUrl+`');
       background-position: 46% 41%;
       background-repeat: no-repeat;
       background-size: 63%;
    }
    .leaflet-control-simpleMapScreenshoter a:hover{
       cursor: pointer;
    }
    `,d=document.head||document.getElementsByTagName("head")[0],p=document.createElement("style");p.appendChild(document.createTextNode(c)),d.appendChild(p)},_onScreenBtn:function(){var c=this;this._map.fire("simpleMapScreenshoter.click"),this.options.preventDownload||this.takeScreen().then(function(d){var p=typeof c.options.screenName=="function"?c.options.screenName.call(c):c.options.screenName;o.saveAs(d,p+".png")}).catch(function(d){c._map.fire("simpleMapScreenshoter.error",{e:d})})},_onUserStartInteractWithMap:function(){this._interaction=!0},_onUserEndInteractWithMap:function(){this._interaction=!1},_waitEndOfInteractions:function(){var c=this;return new Promise(function(d){var p=setInterval(function(){c._interaction||(d(),clearInterval(p))},100)})}}),l=(L.Control.SimpleMapScreenshoter=a,L.simpleMapScreenshoter=function(c){return new L.Control.SimpleMapScreenshoter(c)},a);n.default=l,n.SimpleMapScreenshoter=a,Object.defineProperty(n,"__esModule",{value:!0})})})(t5,t5.exports);var Cl=63710088e-1,CE={centimeters:Cl*100,centimetres:Cl*100,degrees:360/(2*Math.PI),feet:Cl*3.28084,inches:Cl*39.37,kilometers:Cl/1e3,kilometres:Cl/1e3,meters:Cl,metres:Cl,miles:Cl/1609.344,millimeters:Cl*1e3,millimetres:Cl*1e3,nauticalmiles:Cl/1852,radians:1,yards:Cl*1.0936};function Ap(t,e,n={}){const r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function Vv(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!n5(t[0])||!n5(t[1]))throw new Error("coordinates must contain numbers");return Ap({type:"Point",coordinates:t},e,n)}function Uu(t,e,n={}){for(const i of t){if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(i[i.length-1].length!==i[0].length)throw new Error("First and last Position are not equivalent.");for(let s=0;s<i[i.length-1].length;s++)if(i[i.length-1][s]!==i[0][s])throw new Error("First and last Position are not equivalent.")}return Ap({type:"Polygon",coordinates:t},e,n)}function Hu(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return Ap({type:"LineString",coordinates:t},e,n)}function Bj(t,e={}){const n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function Rj(t,e,n={}){return Ap({type:"MultiPolygon",coordinates:t},e,n)}function Fj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t*n}function jj(t,e="kilometers"){const n=CE[e];if(!n)throw new Error(e+" units is invalid");return t/n}function vb(t){return t%(2*Math.PI)*180/Math.PI}function yc(t){return t%360*Math.PI/180}function n5(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function r5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function zj(t){return t.type==="Feature"?t.geometry:t}function EE(t,e,n={}){if(n.final===!0)return $j(t,e);const r=r5(t),i=r5(e),s=yc(r[0]),o=yc(i[0]),a=yc(r[1]),l=yc(i[1]),c=Math.sin(o-s)*Math.cos(l),d=Math.cos(a)*Math.sin(l)-Math.sin(a)*Math.cos(l)*Math.cos(o-s);return vb(Math.atan2(c,d))}function $j(t,e){let n=EE(e,t);return n=(n+180)%360,n}function Vj(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function z_(t,e,n,r={}){const i=Vj(t),s=yc(i[0]),o=yc(i[1]),a=yc(n),l=jj(e,r.units),c=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(a)),d=s+Math.atan2(Math.sin(a)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(c)),p=vb(d),v=vb(c);return Vv([p,v],r.properties)}var i5=z_;function s5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function $_(t,e,n={}){var r=s5(t),i=s5(e),s=yc(i[1]-r[1]),o=yc(i[0]-r[0]),a=yc(r[1]),l=yc(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Fj(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var X1=$_;function Uj(t,e,n={}){const i=zj(t).coordinates;let s=0;for(let o=0;o<i.length&&!(e>=s&&o===i.length-1);o++)if(s>=e){const a=e-s;if(a){const l=EE(i[o],i[o-1])-180;return z_(i[o],a,l,n)}else return Vv(i[o])}else s+=$_(i[o],i[o+1],n);return Vv(i[i.length-1])}var yb=Uj;function Hj(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function Wj(t,e,n){var r=n;return Hj(t,function(i,s,o,a,l){s===0&&n===void 0?r=i:r=e(r,i,s,o,a,l)}),r}function PE(t){return Wj(t,(e,n)=>e+Gj(n),0)}function Gj(t){let e=0,n;switch(t.type){case"Polygon":return o5(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=o5(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function o5(t){let e=0;if(t&&t.length>0){e+=Math.abs(a5(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(a5(t[n]))}return e}var qj=Cl*Cl/2,J1=Math.PI/180;function a5(t){const e=t.length-1;if(e<=2)return 0;let n=0,r=0;for(;r<e;){const i=t[r],s=t[r+1===e?0:r+1],o=t[r+2>=e?(r+2)%e:r+2],a=i[0]*J1,l=s[1]*J1,c=o[0]*J1;n+=(c-a)*Math.sin(l),r++}return n*qj}var Rc=PE;function ME(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",A=x?t.features.length:1,k=0;k<A;k++){c=x?t.features[k].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var $=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=te==="Polygon"||te==="MultiPolygon"?1:0,te){case null:break;case"Point":if(e(l,p,k,$,Y)===!1)return!1;p++,$++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,k,$,Y)===!1)return!1;p++,te==="MultiPoint"&&$++}te==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,k,$,Y)===!1)return!1;p++}te==="MultiLineString"&&$++,te==="Polygon"&&Y++}te==="Polygon"&&$++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,k,$,Y)===!1)return!1;p++}Y++}$++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(ME(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Yj(t,e={}){let n=0,r=0,i=0;return ME(t,function(s){n+=s[0],r+=s[1],i++}),Vv([n/i,r/i],e.properties)}var Wg=Yj;function Kj(t,e,n={}){const r=n.steps||64,i=n.properties?n.properties:!Array.isArray(t)&&t.type==="Feature"&&t.properties?t.properties:{},s=[];for(let o=0;o<r;o++)s.push(z_(t,e,o*-360/r,n).geometry.coordinates);return s.push(s[0]),Uu([s],i)}var Zj=Kj,Xj=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Q1=Math.ceil,$u=Math.floor,Kl="[BigNumber Error] ",l5=Kl+"Number primitive has more than 15 significant digits: ",uc=1e14,ii=14,u5=9007199254740991,e2=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Xh=1e7,vu=1e9;function kE(t){var e,n,r,i=D.prototype={constructor:D,toString:null,valueOf:null},s=new D(1),o=20,a=4,l=-7,c=21,d=-1e7,p=1e7,v=!1,m=1,x=0,E={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},A="0123456789abcdefghijklmnopqrstuvwxyz",k=!0;function D(I,z){var K,N,B,V,R,j,W,X,oe=this;if(!(oe instanceof D))return new D(I,z);if(z==null){if(I&&I._isBigNumber===!0){oe.s=I.s,!I.c||I.e>p?oe.c=oe.e=null:I.e<d?oe.c=[oe.e=0]:(oe.e=I.e,oe.c=I.c.slice());return}if((j=typeof I=="number")&&I*0==0){if(oe.s=1/I<0?(I=-I,-1):1,I===~~I){for(V=0,R=I;R>=10;R/=10,V++);V>p?oe.c=oe.e=null:(oe.e=V,oe.c=[I]);return}X=String(I)}else{if(!Xj.test(X=String(I)))return r(oe,X,j);oe.s=X.charCodeAt(0)==45?(X=X.slice(1),-1):1}(V=X.indexOf("."))>-1&&(X=X.replace(".","")),(R=X.search(/e/i))>0?(V<0&&(V=R),V+=+X.slice(R+1),X=X.substring(0,R)):V<0&&(V=X.length)}else{if(co(z,2,A.length,"Base"),z==10&&k)return oe=new D(I),me(oe,o+oe.e+1,a);if(X=String(I),j=typeof I=="number"){if(I*0!=0)return r(oe,X,j,z);if(oe.s=1/I<0?(X=X.slice(1),-1):1,D.DEBUG&&X.replace(/^0\.0*|\./,"").length>15)throw Error(l5+I)}else oe.s=X.charCodeAt(0)===45?(X=X.slice(1),-1):1;for(K=A.slice(0,z),V=R=0,W=X.length;R<W;R++)if(K.indexOf(N=X.charAt(R))<0){if(N=="."){if(R>V){V=W;continue}}else if(!B&&(X==X.toUpperCase()&&(X=X.toLowerCase())||X==X.toLowerCase()&&(X=X.toUpperCase()))){B=!0,R=-1,V=0;continue}return r(oe,String(I),j,z)}j=!1,X=n(X,z,10,oe.s),(V=X.indexOf("."))>-1?X=X.replace(".",""):V=X.length}for(R=0;X.charCodeAt(R)===48;R++);for(W=X.length;X.charCodeAt(--W)===48;);if(X=X.slice(R,++W)){if(W-=R,j&&D.DEBUG&&W>15&&(I>u5||I!==$u(I)))throw Error(l5+oe.s*I);if((V=V-R-1)>p)oe.c=oe.e=null;else if(V<d)oe.c=[oe.e=0];else{if(oe.e=V,oe.c=[],R=(V+1)%ii,V<0&&(R+=ii),R<W){for(R&&oe.c.push(+X.slice(0,R)),W-=ii;R<W;)oe.c.push(+X.slice(R,R+=ii));R=ii-(X=X.slice(R)).length}else R-=W;for(;R--;X+="0");oe.c.push(+X)}}else oe.c=[oe.e=0]}D.clone=kE,D.ROUND_UP=0,D.ROUND_DOWN=1,D.ROUND_CEIL=2,D.ROUND_FLOOR=3,D.ROUND_HALF_UP=4,D.ROUND_HALF_DOWN=5,D.ROUND_HALF_EVEN=6,D.ROUND_HALF_CEIL=7,D.ROUND_HALF_FLOOR=8,D.EUCLID=9,D.config=D.set=function(I){var z,K;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(z="DECIMAL_PLACES")&&(K=I[z],co(K,0,vu,z),o=K),I.hasOwnProperty(z="ROUNDING_MODE")&&(K=I[z],co(K,0,8,z),a=K),I.hasOwnProperty(z="EXPONENTIAL_AT")&&(K=I[z],K&&K.pop?(co(K[0],-1e9,0,z),co(K[1],0,vu,z),l=K[0],c=K[1]):(co(K,-1e9,vu,z),l=-(c=K<0?-K:K))),I.hasOwnProperty(z="RANGE"))if(K=I[z],K&&K.pop)co(K[0],-1e9,-1,z),co(K[1],1,vu,z),d=K[0],p=K[1];else if(co(K,-1e9,vu,z),K)d=-(p=K<0?-K:K);else throw Error(Kl+z+" cannot be zero: "+K);if(I.hasOwnProperty(z="CRYPTO"))if(K=I[z],K===!!K)if(K)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))v=K;else throw v=!K,Error(Kl+"crypto unavailable");else v=K;else throw Error(Kl+z+" not true or false: "+K);if(I.hasOwnProperty(z="MODULO_MODE")&&(K=I[z],co(K,0,9,z),m=K),I.hasOwnProperty(z="POW_PRECISION")&&(K=I[z],co(K,0,vu,z),x=K),I.hasOwnProperty(z="FORMAT"))if(K=I[z],typeof K=="object")E=K;else throw Error(Kl+z+" not an object: "+K);if(I.hasOwnProperty(z="ALPHABET"))if(K=I[z],typeof K=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(K))k=K.slice(0,10)=="0123456789",A=K;else throw Error(Kl+z+" invalid: "+K)}else throw Error(Kl+"Object expected: "+I);return{DECIMAL_PLACES:o,ROUNDING_MODE:a,EXPONENTIAL_AT:[l,c],RANGE:[d,p],CRYPTO:v,MODULO_MODE:m,POW_PRECISION:x,FORMAT:E,ALPHABET:A}},D.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!D.DEBUG)return!0;var z,K,N=I.c,B=I.e,V=I.s;e:if({}.toString.call(N)=="[object Array]"){if((V===1||V===-1)&&B>=-1e9&&B<=vu&&B===$u(B)){if(N[0]===0){if(B===0&&N.length===1)return!0;break e}if(z=(B+1)%ii,z<1&&(z+=ii),String(N[0]).length==z){for(z=0;z<N.length;z++)if(K=N[z],K<0||K>=uc||K!==$u(K))break e;if(K!==0)return!0}}}else if(N===null&&B===null&&(V===null||V===1||V===-1))return!0;throw Error(Kl+"Invalid BigNumber: "+I)},D.maximum=D.max=function(){return Y(arguments,-1)},D.minimum=D.min=function(){return Y(arguments,1)},D.random=function(){var I=9007199254740992,z=Math.random()*I&2097151?function(){return $u(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(K){var N,B,V,R,j,W=0,X=[],oe=new D(s);if(K==null?K=o:co(K,0,vu),R=Q1(K/ii),v)if(crypto.getRandomValues){for(N=crypto.getRandomValues(new Uint32Array(R*=2));W<R;)j=N[W]*131072+(N[W+1]>>>11),j>=9e15?(B=crypto.getRandomValues(new Uint32Array(2)),N[W]=B[0],N[W+1]=B[1]):(X.push(j%1e14),W+=2);W=R/2}else if(crypto.randomBytes){for(N=crypto.randomBytes(R*=7);W<R;)j=(N[W]&31)*281474976710656+N[W+1]*1099511627776+N[W+2]*4294967296+N[W+3]*16777216+(N[W+4]<<16)+(N[W+5]<<8)+N[W+6],j>=9e15?crypto.randomBytes(7).copy(N,W):(X.push(j%1e14),W+=7);W=R/7}else throw v=!1,Error(Kl+"crypto unavailable");if(!v)for(;W<R;)j=z(),j<9e15&&(X[W++]=j%1e14);for(R=X[--W],K%=ii,R&&K&&(j=e2[ii-K],X[W]=$u(R/j)*j);X[W]===0;X.pop(),W--);if(W<0)X=[V=0];else{for(V=-1;X[0]===0;X.splice(0,1),V-=ii);for(W=1,j=X[0];j>=10;j/=10,W++);W<ii&&(V-=ii-W)}return oe.e=V,oe.c=X,oe}}(),D.sum=function(){for(var I=1,z=arguments,K=new D(z[0]);I<z.length;)K=K.plus(z[I++]);return K},n=function(){var I="0123456789";function z(K,N,B,V){for(var R,j=[0],W,X=0,oe=K.length;X<oe;){for(W=j.length;W--;j[W]*=N);for(j[0]+=V.indexOf(K.charAt(X++)),R=0;R<j.length;R++)j[R]>B-1&&(j[R+1]==null&&(j[R+1]=0),j[R+1]+=j[R]/B|0,j[R]%=B)}return j.reverse()}return function(K,N,B,V,R){var j,W,X,oe,_e,Ce,De,Z,G=K.indexOf("."),re=o,he=a;for(G>=0&&(oe=x,x=0,K=K.replace(".",""),Z=new D(N),Ce=Z.pow(K.length-G),x=oe,Z.c=z(yh(Fu(Ce.c),Ce.e,"0"),10,B,I),Z.e=Z.c.length),De=z(K,N,B,R?(j=A,I):(j=I,A)),X=oe=De.length;De[--oe]==0;De.pop());if(!De[0])return j.charAt(0);if(G<0?--X:(Ce.c=De,Ce.e=X,Ce.s=V,Ce=e(Ce,Z,re,he,B),De=Ce.c,_e=Ce.r,X=Ce.e),W=X+re+1,G=De[W],oe=B/2,_e=_e||W<0||De[W+1]!=null,_e=he<4?(G!=null||_e)&&(he==0||he==(Ce.s<0?3:2)):G>oe||G==oe&&(he==4||_e||he==6&&De[W-1]&1||he==(Ce.s<0?8:7)),W<1||!De[0])K=_e?yh(j.charAt(1),-re,j.charAt(0)):j.charAt(0);else{if(De.length=W,_e)for(--B;++De[--W]>B;)De[W]=0,W||(++X,De=[1].concat(De));for(oe=De.length;!De[--oe];);for(G=0,K="";G<=oe;K+=j.charAt(De[G++]));K=yh(K,X,j.charAt(0))}return K}}(),e=function(){function I(N,B,V){var R,j,W,X,oe=0,_e=N.length,Ce=B%Xh,De=B/Xh|0;for(N=N.slice();_e--;)W=N[_e]%Xh,X=N[_e]/Xh|0,R=De*W+X*Ce,j=Ce*W+R%Xh*Xh+oe,oe=(j/V|0)+(R/Xh|0)+De*X,N[_e]=j%V;return oe&&(N=[oe].concat(N)),N}function z(N,B,V,R){var j,W;if(V!=R)W=V>R?1:-1;else for(j=W=0;j<V;j++)if(N[j]!=B[j]){W=N[j]>B[j]?1:-1;break}return W}function K(N,B,V,R){for(var j=0;V--;)N[V]-=j,j=N[V]<B[V]?1:0,N[V]=j*R+N[V]-B[V];for(;!N[0]&&N.length>1;N.splice(0,1));}return function(N,B,V,R,j){var W,X,oe,_e,Ce,De,Z,G,re,he,ce,ve,ee,J,Oe,Te,Ye,ge=N.s==B.s?1:-1,Q=N.c,ie=B.c;if(!Q||!Q[0]||!ie||!ie[0])return new D(!N.s||!B.s||(Q?ie&&Q[0]==ie[0]:!ie)?NaN:Q&&Q[0]==0||!ie?ge*0:ge/0);for(G=new D(ge),re=G.c=[],X=N.e-B.e,ge=V+X+1,j||(j=uc,X=Vu(N.e/ii)-Vu(B.e/ii),ge=ge/ii|0),oe=0;ie[oe]==(Q[oe]||0);oe++);if(ie[oe]>(Q[oe]||0)&&X--,ge<0)re.push(1),_e=!0;else{for(J=Q.length,Te=ie.length,oe=0,ge+=2,Ce=$u(j/(ie[0]+1)),Ce>1&&(ie=I(ie,Ce,j),Q=I(Q,Ce,j),Te=ie.length,J=Q.length),ee=Te,he=Q.slice(0,Te),ce=he.length;ce<Te;he[ce++]=0);Ye=ie.slice(),Ye=[0].concat(Ye),Oe=ie[0],ie[1]>=j/2&&Oe++;do{if(Ce=0,W=z(ie,he,Te,ce),W<0){if(ve=he[0],Te!=ce&&(ve=ve*j+(he[1]||0)),Ce=$u(ve/Oe),Ce>1)for(Ce>=j&&(Ce=j-1),De=I(ie,Ce,j),Z=De.length,ce=he.length;z(De,he,Z,ce)==1;)Ce--,K(De,Te<Z?Ye:ie,Z,j),Z=De.length,W=1;else Ce==0&&(W=Ce=1),De=ie.slice(),Z=De.length;if(Z<ce&&(De=[0].concat(De)),K(he,De,ce,j),ce=he.length,W==-1)for(;z(ie,he,Te,ce)<1;)Ce++,K(he,Te<ce?Ye:ie,ce,j),ce=he.length}else W===0&&(Ce++,he=[0]);re[oe++]=Ce,he[0]?he[ce++]=Q[ee]||0:(he=[Q[ee]],ce=1)}while((ee++<J||he[0]!=null)&&ge--);_e=he[0]!=null,re[0]||re.splice(0,1)}if(j==uc){for(oe=1,ge=re[0];ge>=10;ge/=10,oe++);me(G,V+(G.e=oe+X*ii-1)+1,R,_e)}else G.e=X,G.r=+_e;return G}}();function $(I,z,K,N){var B,V,R,j,W;if(K==null?K=a:co(K,0,8),!I.c)return I.toString();if(B=I.c[0],R=I.e,z==null)W=Fu(I.c),W=N==1||N==2&&(R<=l||R>=c)?x0(W,R):yh(W,R,"0");else if(I=me(new D(I),z,K),V=I.e,W=Fu(I.c),j=W.length,N==1||N==2&&(z<=V||V<=l)){for(;j<z;W+="0",j++);W=x0(W,V)}else if(z-=R,W=yh(W,V,"0"),V+1>j){if(--z>0)for(W+=".";z--;W+="0");}else if(z+=V-j,z>0)for(V+1==j&&(W+=".");z--;W+="0");return I.s<0&&B?"-"+W:W}function Y(I,z){for(var K,N,B=1,V=new D(I[0]);B<I.length;B++)N=new D(I[B]),(!N.s||(K=Wd(V,N))===z||K===0&&V.s===z)&&(V=N);return V}function te(I,z,K){for(var N=1,B=z.length;!z[--B];z.pop());for(B=z[0];B>=10;B/=10,N++);return(K=N+K*ii-1)>p?I.c=I.e=null:K<d?I.c=[I.e=0]:(I.e=K,I.c=z),I}r=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,z=/^([^.]+)\.$/,K=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(V,R,j,W){var X,oe=j?R:R.replace(B,"");if(N.test(oe))V.s=isNaN(oe)?null:oe<0?-1:1;else{if(!j&&(oe=oe.replace(I,function(_e,Ce,De){return X=(De=De.toLowerCase())=="x"?16:De=="b"?2:8,!W||W==X?Ce:_e}),W&&(X=W,oe=oe.replace(z,"$1").replace(K,"0.$1")),R!=oe))return new D(oe,X);if(D.DEBUG)throw Error(Kl+"Not a"+(W?" base "+W:"")+" number: "+R);V.s=null}V.c=V.e=null}}();function me(I,z,K,N){var B,V,R,j,W,X,oe,_e=I.c,Ce=e2;if(_e){e:{for(B=1,j=_e[0];j>=10;j/=10,B++);if(V=z-B,V<0)V+=ii,R=z,W=_e[X=0],oe=$u(W/Ce[B-R-1]%10);else if(X=Q1((V+1)/ii),X>=_e.length)if(N){for(;_e.length<=X;_e.push(0));W=oe=0,B=1,V%=ii,R=V-ii+1}else break e;else{for(W=j=_e[X],B=1;j>=10;j/=10,B++);V%=ii,R=V-ii+B,oe=R<0?0:$u(W/Ce[B-R-1]%10)}if(N=N||z<0||_e[X+1]!=null||(R<0?W:W%Ce[B-R-1]),N=K<4?(oe||N)&&(K==0||K==(I.s<0?3:2)):oe>5||oe==5&&(K==4||N||K==6&&(V>0?R>0?W/Ce[B-R]:0:_e[X-1])%10&1||K==(I.s<0?8:7)),z<1||!_e[0])return _e.length=0,N?(z-=I.e+1,_e[0]=Ce[(ii-z%ii)%ii],I.e=-z||0):_e[0]=I.e=0,I;if(V==0?(_e.length=X,j=1,X--):(_e.length=X+1,j=Ce[ii-V],_e[X]=R>0?$u(W/Ce[B-R]%Ce[R])*j:0),N)for(;;)if(X==0){for(V=1,R=_e[0];R>=10;R/=10,V++);for(R=_e[0]+=j,j=1;R>=10;R/=10,j++);V!=j&&(I.e++,_e[0]==uc&&(_e[0]=1));break}else{if(_e[X]+=j,_e[X]!=uc)break;_e[X--]=0,j=1}for(V=_e.length;_e[--V]===0;_e.pop());}I.e>p?I.c=I.e=null:I.e<d&&(I.c=[I.e=0])}return I}function pe(I){var z,K=I.e;return K===null?I.toString():(z=Fu(I.c),z=K<=l||K>=c?x0(z,K):yh(z,K,"0"),I.s<0?"-"+z:z)}return i.absoluteValue=i.abs=function(){var I=new D(this);return I.s<0&&(I.s=1),I},i.comparedTo=function(I,z){return Wd(this,new D(I,z))},i.decimalPlaces=i.dp=function(I,z){var K,N,B,V=this;if(I!=null)return co(I,0,vu),z==null?z=a:co(z,0,8),me(new D(V),I+V.e+1,z);if(!(K=V.c))return null;if(N=((B=K.length-1)-Vu(this.e/ii))*ii,B=K[B])for(;B%10==0;B/=10,N--);return N<0&&(N=0),N},i.dividedBy=i.div=function(I,z){return e(this,new D(I,z),o,a)},i.dividedToIntegerBy=i.idiv=function(I,z){return e(this,new D(I,z),0,1)},i.exponentiatedBy=i.pow=function(I,z){var K,N,B,V,R,j,W,X,oe,_e=this;if(I=new D(I),I.c&&!I.isInteger())throw Error(Kl+"Exponent not an integer: "+pe(I));if(z!=null&&(z=new D(z)),j=I.e>14,!_e.c||!_e.c[0]||_e.c[0]==1&&!_e.e&&_e.c.length==1||!I.c||!I.c[0])return oe=new D(Math.pow(+pe(_e),j?I.s*(2-w0(I)):+pe(I))),z?oe.mod(z):oe;if(W=I.s<0,z){if(z.c?!z.c[0]:!z.s)return new D(NaN);N=!W&&_e.isInteger()&&z.isInteger(),N&&(_e=_e.mod(z))}else{if(I.e>9&&(_e.e>0||_e.e<-1||(_e.e==0?_e.c[0]>1||j&&_e.c[1]>=24e7:_e.c[0]<8e13||j&&_e.c[0]<=9999975e7)))return V=_e.s<0&&w0(I)?-0:0,_e.e>-1&&(V=1/V),new D(W?1/V:V);x&&(V=Q1(x/ii+2))}for(j?(K=new D(.5),W&&(I.s=1),X=w0(I)):(B=Math.abs(+pe(I)),X=B%2),oe=new D(s);;){if(X){if(oe=oe.times(_e),!oe.c)break;V?oe.c.length>V&&(oe.c.length=V):N&&(oe=oe.mod(z))}if(B){if(B=$u(B/2),B===0)break;X=B%2}else if(I=I.times(K),me(I,I.e+1,1),I.e>14)X=w0(I);else{if(B=+pe(I),B===0)break;X=B%2}_e=_e.times(_e),V?_e.c&&_e.c.length>V&&(_e.c.length=V):N&&(_e=_e.mod(z))}return N?oe:(W&&(oe=s.div(oe)),z?oe.mod(z):V?me(oe,x,a,R):oe)},i.integerValue=function(I){var z=new D(this);return I==null?I=a:co(I,0,8),me(z,z.e+1,I)},i.isEqualTo=i.eq=function(I,z){return Wd(this,new D(I,z))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(I,z){return Wd(this,new D(I,z))>0},i.isGreaterThanOrEqualTo=i.gte=function(I,z){return(z=Wd(this,new D(I,z)))===1||z===0},i.isInteger=function(){return!!this.c&&Vu(this.e/ii)>this.c.length-2},i.isLessThan=i.lt=function(I,z){return Wd(this,new D(I,z))<0},i.isLessThanOrEqualTo=i.lte=function(I,z){return(z=Wd(this,new D(I,z)))===-1||z===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(I,z){var K,N,B,V,R=this,j=R.s;if(I=new D(I,z),z=I.s,!j||!z)return new D(NaN);if(j!=z)return I.s=-z,R.plus(I);var W=R.e/ii,X=I.e/ii,oe=R.c,_e=I.c;if(!W||!X){if(!oe||!_e)return oe?(I.s=-z,I):new D(_e?R:NaN);if(!oe[0]||!_e[0])return _e[0]?(I.s=-z,I):new D(oe[0]?R:a==3?-0:0)}if(W=Vu(W),X=Vu(X),oe=oe.slice(),j=W-X){for((V=j<0)?(j=-j,B=oe):(X=W,B=_e),B.reverse(),z=j;z--;B.push(0));B.reverse()}else for(N=(V=(j=oe.length)<(z=_e.length))?j:z,j=z=0;z<N;z++)if(oe[z]!=_e[z]){V=oe[z]<_e[z];break}if(V&&(B=oe,oe=_e,_e=B,I.s=-I.s),z=(N=_e.length)-(K=oe.length),z>0)for(;z--;oe[K++]=0);for(z=uc-1;N>j;){if(oe[--N]<_e[N]){for(K=N;K&&!oe[--K];oe[K]=z);--oe[K],oe[N]+=uc}oe[N]-=_e[N]}for(;oe[0]==0;oe.splice(0,1),--X);return oe[0]?te(I,oe,X):(I.s=a==3?-1:1,I.c=[I.e=0],I)},i.modulo=i.mod=function(I,z){var K,N,B=this;return I=new D(I,z),!B.c||!I.s||I.c&&!I.c[0]?new D(NaN):!I.c||B.c&&!B.c[0]?new D(B):(m==9?(N=I.s,I.s=1,K=e(B,I,0,3),I.s=N,K.s*=N):K=e(B,I,0,m),I=B.minus(K.times(I)),!I.c[0]&&m==1&&(I.s=B.s),I)},i.multipliedBy=i.times=function(I,z){var K,N,B,V,R,j,W,X,oe,_e,Ce,De,Z,G,re,he=this,ce=he.c,ve=(I=new D(I,z)).c;if(!ce||!ve||!ce[0]||!ve[0])return!he.s||!I.s||ce&&!ce[0]&&!ve||ve&&!ve[0]&&!ce?I.c=I.e=I.s=null:(I.s*=he.s,!ce||!ve?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(N=Vu(he.e/ii)+Vu(I.e/ii),I.s*=he.s,W=ce.length,_e=ve.length,W<_e&&(Z=ce,ce=ve,ve=Z,B=W,W=_e,_e=B),B=W+_e,Z=[];B--;Z.push(0));for(G=uc,re=Xh,B=_e;--B>=0;){for(K=0,Ce=ve[B]%re,De=ve[B]/re|0,R=W,V=B+R;V>B;)X=ce[--R]%re,oe=ce[R]/re|0,j=De*X+oe*Ce,X=Ce*X+j%re*re+Z[V]+K,K=(X/G|0)+(j/re|0)+De*oe,Z[V--]=X%G;Z[V]=K}return K?++N:Z.splice(0,1),te(I,Z,N)},i.negated=function(){var I=new D(this);return I.s=-I.s||null,I},i.plus=function(I,z){var K,N=this,B=N.s;if(I=new D(I,z),z=I.s,!B||!z)return new D(NaN);if(B!=z)return I.s=-z,N.minus(I);var V=N.e/ii,R=I.e/ii,j=N.c,W=I.c;if(!V||!R){if(!j||!W)return new D(B/0);if(!j[0]||!W[0])return W[0]?I:new D(j[0]?N:B*0)}if(V=Vu(V),R=Vu(R),j=j.slice(),B=V-R){for(B>0?(R=V,K=W):(B=-B,K=j),K.reverse();B--;K.push(0));K.reverse()}for(B=j.length,z=W.length,B-z<0&&(K=W,W=j,j=K,z=B),B=0;z;)B=(j[--z]=j[z]+W[z]+B)/uc|0,j[z]=uc===j[z]?0:j[z]%uc;return B&&(j=[B].concat(j),++R),te(I,j,R)},i.precision=i.sd=function(I,z){var K,N,B,V=this;if(I!=null&&I!==!!I)return co(I,1,vu),z==null?z=a:co(z,0,8),me(new D(V),I,z);if(!(K=V.c))return null;if(B=K.length-1,N=B*ii+1,B=K[B]){for(;B%10==0;B/=10,N--);for(B=K[0];B>=10;B/=10,N++);}return I&&V.e+1>N&&(N=V.e+1),N},i.shiftedBy=function(I){return co(I,-9007199254740991,u5),this.times("1e"+I)},i.squareRoot=i.sqrt=function(){var I,z,K,N,B,V=this,R=V.c,j=V.s,W=V.e,X=o+4,oe=new D("0.5");if(j!==1||!R||!R[0])return new D(!j||j<0&&(!R||R[0])?NaN:R?V:1/0);if(j=Math.sqrt(+pe(V)),j==0||j==1/0?(z=Fu(R),(z.length+W)%2==0&&(z+="0"),j=Math.sqrt(+z),W=Vu((W+1)/2)-(W<0||W%2),j==1/0?z="5e"+W:(z=j.toExponential(),z=z.slice(0,z.indexOf("e")+1)+W),K=new D(z)):K=new D(j+""),K.c[0]){for(W=K.e,j=W+X,j<3&&(j=0);;)if(B=K,K=oe.times(B.plus(e(V,B,X,1))),Fu(B.c).slice(0,j)===(z=Fu(K.c)).slice(0,j))if(K.e<W&&--j,z=z.slice(j-3,j+1),z=="9999"||!N&&z=="4999"){if(!N&&(me(B,B.e+o+2,0),B.times(B).eq(V))){K=B;break}X+=4,j+=4,N=1}else{(!+z||!+z.slice(1)&&z.charAt(0)=="5")&&(me(K,K.e+o+2,1),I=!K.times(K).eq(V));break}}return me(K,K.e+o+1,a,I)},i.toExponential=function(I,z){return I!=null&&(co(I,0,vu),I++),$(this,I,z,1)},i.toFixed=function(I,z){return I!=null&&(co(I,0,vu),I=I+this.e+1),$(this,I,z)},i.toFormat=function(I,z,K){var N,B=this;if(K==null)I!=null&&z&&typeof z=="object"?(K=z,z=null):I&&typeof I=="object"?(K=I,I=z=null):K=E;else if(typeof K!="object")throw Error(Kl+"Argument not an object: "+K);if(N=B.toFixed(I,z),B.c){var V,R=N.split("."),j=+K.groupSize,W=+K.secondaryGroupSize,X=K.groupSeparator||"",oe=R[0],_e=R[1],Ce=B.s<0,De=Ce?oe.slice(1):oe,Z=De.length;if(W&&(V=j,j=W,W=V,Z-=V),j>0&&Z>0){for(V=Z%j||j,oe=De.substr(0,V);V<Z;V+=j)oe+=X+De.substr(V,j);W>0&&(oe+=X+De.slice(V)),Ce&&(oe="-"+oe)}N=_e?oe+(K.decimalSeparator||"")+((W=+K.fractionGroupSize)?_e.replace(new RegExp("\\d{"+W+"}\\B","g"),"$&"+(K.fractionGroupSeparator||"")):_e):oe}return(K.prefix||"")+N+(K.suffix||"")},i.toFraction=function(I){var z,K,N,B,V,R,j,W,X,oe,_e,Ce,De=this,Z=De.c;if(I!=null&&(j=new D(I),!j.isInteger()&&(j.c||j.s!==1)||j.lt(s)))throw Error(Kl+"Argument "+(j.isInteger()?"out of range: ":"not an integer: ")+pe(j));if(!Z)return new D(De);for(z=new D(s),X=K=new D(s),N=W=new D(s),Ce=Fu(Z),V=z.e=Ce.length-De.e-1,z.c[0]=e2[(R=V%ii)<0?ii+R:R],I=!I||j.comparedTo(z)>0?V>0?z:X:j,R=p,p=1/0,j=new D(Ce),W.c[0]=0;oe=e(j,z,0,1),B=K.plus(oe.times(N)),B.comparedTo(I)!=1;)K=N,N=B,X=W.plus(oe.times(B=X)),W=B,z=j.minus(oe.times(B=z)),j=B;return B=e(I.minus(K),N,0,1),W=W.plus(B.times(X)),K=K.plus(B.times(N)),W.s=X.s=De.s,V=V*2,_e=e(X,N,V,a).minus(De).abs().comparedTo(e(W,K,V,a).minus(De).abs())<1?[X,N]:[W,K],p=R,_e},i.toNumber=function(){return+pe(this)},i.toPrecision=function(I,z){return I!=null&&co(I,1,vu),$(this,I,z,2)},i.toString=function(I){var z,K=this,N=K.s,B=K.e;return B===null?N?(z="Infinity",N<0&&(z="-"+z)):z="NaN":(I==null?z=B<=l||B>=c?x0(Fu(K.c),B):yh(Fu(K.c),B,"0"):I===10&&k?(K=me(new D(K),o+B+1,a),z=yh(Fu(K.c),K.e,"0")):(co(I,2,A.length,"Base"),z=n(yh(Fu(K.c),B,"0"),10,I,N,!0)),N<0&&K.c[0]&&(z="-"+z)),z},i.valueOf=i.toJSON=function(){return pe(this)},i._isBigNumber=!0,i[Symbol.toStringTag]="BigNumber",i[Symbol.for("nodejs.util.inspect.custom")]=i.valueOf,t!=null&&D.set(t),D}function Vu(t){var e=t|0;return t>0||t===e?e:e-1}function Fu(t){for(var e,n,r=1,i=t.length,s=t[0]+"";r<i;){for(e=t[r++]+"",n=ii-e.length;n--;e="0"+e);s+=e}for(i=s.length;s.charCodeAt(--i)===48;);return s.slice(0,i+1||1)}function Wd(t,e){var n,r,i=t.c,s=e.c,o=t.s,a=e.s,l=t.e,c=e.e;if(!o||!a)return null;if(n=i&&!i[0],r=s&&!s[0],n||r)return n?r?0:-a:o;if(o!=a)return o;if(n=o<0,r=l==c,!i||!s)return r?0:!i^n?1:-1;if(!r)return l>c^n?1:-1;for(a=(l=i.length)<(c=s.length)?l:c,o=0;o<a;o++)if(i[o]!=s[o])return i[o]>s[o]^n?1:-1;return l==c?0:l>c^n?1:-1}function co(t,e,n,r){if(t<e||t>n||t!==$u(t))throw Error(Kl+(r||"Argument")+(typeof t=="number"?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w0(t){var e=t.c.length-1;return Vu(t.e/ii)==e&&t.c[e]%2!=0}function x0(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function yh(t,e,n){var r,i;if(e<0){for(i=n+".";++e;i+=n);t=i+t}else if(r=t.length,++e>r){for(i=n,e-=r;--e;i+=n);t+=i}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var Yc=kE(),Jj=class{constructor(t){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=t}},rg=class extends Jj{constructor(t){super(t)}},Qj=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(t){const e=this.root;if(e==null)return this.compare(t,t),-1;let n=null,r=null,i=null,s=null,o=e;const a=this.compare;let l;for(;;)if(l=a(o.key,t),l>0){let c=o.left;if(c==null||(l=a(c.key,t),l>0&&(o.left=c.right,c.right=o,o=c,c=o.left,c==null)))break;n==null?r=o:n.left=o,n=o,o=c}else if(l<0){let c=o.right;if(c==null||(l=a(c.key,t),l<0&&(o.right=c.left,c.left=o,o=c,c=o.right,c==null)))break;i==null?s=o:i.right=o,i=o,o=c}else break;return i!=null&&(i.right=o.left,o.left=s),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),l}splayMin(t){let e=t,n=e.left;for(;n!=null;){const r=n;e.left=r.right,r.right=e,e=r,n=e.left}return e}splayMax(t){let e=t,n=e.right;for(;n!=null;){const r=n;e.right=r.left,r.left=e,e=r,n=e.right}return e}_delete(t){if(this.root==null||this.splay(t)!=0)return null;let n=this.root;const r=n,i=n.left;if(this.size--,i==null)this.root=n.right;else{const s=n.right;n=this.splayMax(i),n.right=s,this.root=n}return this.modificationCount++,r}addNewRoot(t,e){this.size++,this.modificationCount++;const n=this.root;if(n==null){this.root=t;return}e<0?(t.left=n,t.right=n.right,n.right=null):(t.right=n,t.left=n.left,n.left=null),this.root=t}_first(){const t=this.root;return t==null?null:(this.root=this.splayMin(t),this.root)}_last(){const t=this.root;return t==null?null:(this.root=this.splayMax(t),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(t){return this.validKey(t)&&this.splay(t)==0}defaultCompare(){return(t,e)=>t<e?-1:t>e?1:0}wrap(){return{getRoot:()=>this.root,setRoot:t=>{this.root=t},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:t=>{this.splayCount=t},splay:t=>this.splay(t),has:t=>this.has(t)}}},CL,EL,Uv=class wg extends Qj{constructor(n,r){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,CL,"[object Set]");this.compare=n??this.defaultCompare(),this.validKey=r??(i=>i!=null&&i!=null)}delete(n){return this.validKey(n)?this._delete(n)!=null:!1}deleteAll(n){for(const r of n)this.delete(r)}forEach(n){const r=this[Symbol.iterator]();let i;for(;i=r.next(),!i.done;)n(i.value,i.value,this)}add(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this}addAndReturn(n){const r=this.splay(n);return r!=0&&this.addNewRoot(new rg(n),r),this.root.key}addAll(n){for(const r of n)this.add(r)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)<0)return this.root.key;let i=this.root.left;if(i==null)return null;let s=i.right;for(;s!=null;)i=s,s=i.right;return i.key}firstAfter(n){if(n==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(n)>0)return this.root.key;let i=this.root.right;if(i==null)return null;let s=i.left;for(;s!=null;)i=s,s=i.left;return i.key}retainAll(n){const r=new wg(this.compare,this.validKey),i=this.modificationCount;for(const s of n){if(i!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(s)&&this.splay(s)==0&&r.add(this.root.key)}r.size!=this.size&&(this.root=r.root,this.size=r.size,this.modificationCount++)}lookup(n){return!this.validKey(n)||this.splay(n)!=0?null:this.root.key}intersection(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)&&r.add(i);return r}difference(n){const r=new wg(this.compare,this.validKey);for(const i of this)n.has(i)||r.add(i);return r}union(n){const r=this.clone();return r.addAll(n),r}clone(){const n=new wg(this.compare,this.validKey);return n.size=this.size,n.root=this.copyNode(this.root),n}copyNode(n){if(n==null)return null;function r(s,o){let a,l;do{if(a=s.left,l=s.right,a!=null){const c=new rg(a.key);o.left=c,r(a,c)}if(l!=null){const c=new rg(l.key);o.right=c,s=l,o=c}}while(l!=null)}const i=new rg(n.key);return r(n,i),i}toSet(){return this.clone()}entries(){return new tz(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(EL=Symbol.iterator,CL=Symbol.toStringTag,EL)](){return new ez(this.wrap())}},AE=class{constructor(t){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=t,this.splayCount=t.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;const t=this.path[this.path.length-1];return this.getValue(t)}rebuildPath(t){this.path.splice(0,this.path.length),this.tree.splay(t),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(t){for(;t!=null;)this.path.push(t),t=t.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let n=this.tree.getRoot();for(;n!=null;)this.path.push(n),n=n.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let t=this.path[this.path.length-1],e=t.right;if(e!=null){for(;e!=null;)this.path.push(e),e=e.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===t;)t=this.path.pop();return this.path.length>0}},ez=class extends AE{getValue(t){return t.key}},tz=class extends AE{getValue(t){return[t.key,t.key]}},TE=t=>()=>t,bb=t=>{const e=t?(n,r)=>r.minus(n).abs().isLessThanOrEqualTo(t):TE(!1);return(n,r)=>e(n,r)?0:n.comparedTo(r)};function nz(t){const e=t?(n,r,i,s,o)=>n.exponentiatedBy(2).isLessThanOrEqualTo(s.minus(r).exponentiatedBy(2).plus(o.minus(i).exponentiatedBy(2)).times(t)):TE(!1);return(n,r,i)=>{const s=n.x,o=n.y,a=i.x,l=i.y,c=o.minus(l).times(r.x.minus(a)).minus(s.minus(a).times(r.y.minus(l)));return e(c,s,o,a,l)?0:c.comparedTo(0)}}var rz=t=>t,iz=t=>{if(t){const e=new Uv(bb(t)),n=new Uv(bb(t)),r=(s,o)=>o.addAndReturn(s),i=s=>({x:r(s.x,e),y:r(s.y,n)});return i({x:new Yc(0),y:new Yc(0)}),i}return rz},_b=t=>({set:e=>{Rh=_b(e)},reset:()=>_b(t),compare:bb(t),snap:iz(t),orient:nz(t)}),Rh=_b(),ig=(t,e)=>t.ll.x.isLessThanOrEqualTo(e.x)&&e.x.isLessThanOrEqualTo(t.ur.x)&&t.ll.y.isLessThanOrEqualTo(e.y)&&e.y.isLessThanOrEqualTo(t.ur.y),wb=(t,e)=>{if(e.ur.x.isLessThan(t.ll.x)||t.ur.x.isLessThan(e.ll.x)||e.ur.y.isLessThan(t.ll.y)||t.ur.y.isLessThan(e.ll.y))return null;const n=t.ll.x.isLessThan(e.ll.x)?e.ll.x:t.ll.x,r=t.ur.x.isLessThan(e.ur.x)?t.ur.x:e.ur.x,i=t.ll.y.isLessThan(e.ll.y)?e.ll.y:t.ll.y,s=t.ur.y.isLessThan(e.ur.y)?t.ur.y:e.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:s}}},rv=(t,e)=>t.x.times(e.y).minus(t.y.times(e.x)),DE=(t,e)=>t.x.times(e.x).plus(t.y.times(e.y)),Hv=t=>DE(t,t).sqrt(),sz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return rv(i,r).div(Hv(i)).div(Hv(r))},oz=(t,e,n)=>{const r={x:e.x.minus(t.x),y:e.y.minus(t.y)},i={x:n.x.minus(t.x),y:n.y.minus(t.y)};return DE(i,r).div(Hv(i)).div(Hv(r))},c5=(t,e,n)=>e.y.isZero()?null:{x:t.x.plus(e.x.div(e.y).times(n.minus(t.y))),y:n},h5=(t,e,n)=>e.x.isZero()?null:{x:n,y:t.y.plus(e.y.div(e.x).times(n.minus(t.x)))},az=(t,e,n,r)=>{if(e.x.isZero())return h5(n,r,t.x);if(r.x.isZero())return h5(t,e,n.x);if(e.y.isZero())return c5(n,r,t.y);if(r.y.isZero())return c5(t,e,n.y);const i=rv(e,r);if(i.isZero())return null;const s={x:n.x.minus(t.x),y:n.y.minus(t.y)},o=rv(s,e).div(i),a=rv(s,r).div(i),l=t.x.plus(a.times(e.x)),c=n.x.plus(o.times(r.x)),d=t.y.plus(a.times(e.y)),p=n.y.plus(o.times(r.y)),v=l.plus(c).div(2),m=d.plus(p).div(2);return{x:v,y:m}},Hc=class OE{constructor(e,n){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=n}static compare(e,n){const r=OE.comparePoints(e.point,n.point);return r!==0?r:(e.point!==n.point&&e.link(n),e.isLeft!==n.isLeft?e.isLeft?1:-1:Wv.compare(e.segment,n.segment))}static comparePoints(e,n){return e.x.isLessThan(n.x)?-1:e.x.isGreaterThan(n.x)?1:e.y.isLessThan(n.y)?-1:e.y.isGreaterThan(n.y)?1:0}link(e){if(e.point===this.point)throw new Error("Tried to link already linked events");const n=e.point.events;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}checkForConsuming(){const e=this.point.events.length;for(let n=0;n<e;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<e;i++){const s=this.point.events[i];s.consumedBy===void 0&&r.otherSE.point.events===s.otherSE.point.events&&r.segment.consume(s.segment)}}}getAvailableLinkedEvents(){const e=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&e.push(i)}return e}getLeftmostComparator(e){const n=new Map,r=i=>{const s=i.otherSE;n.set(i,{sine:sz(this.point,e.point,s.point),cosine:oz(this.point,e.point,s.point)})};return(i,s)=>{n.has(i)||r(i),n.has(s)||r(s);const{sine:o,cosine:a}=n.get(i),{sine:l,cosine:c}=n.get(s);return o.isGreaterThanOrEqualTo(0)&&l.isGreaterThanOrEqualTo(0)?a.isLessThan(c)?1:a.isGreaterThan(c)?-1:0:o.isLessThan(0)&&l.isLessThan(0)?a.isLessThan(c)?-1:a.isGreaterThan(c)?1:0:l.isLessThan(o)?-1:l.isGreaterThan(o)?1:0}}},lz=class xb{constructor(e){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=e;for(let n=0,r=e.length;n<r;n++)e[n].segment.ringOut=this;this.poly=null}static factory(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];if(!s.isInResult()||s.ringOut)continue;let o=null,a=s.leftSE,l=s.rightSE;const c=[a],d=a.point,p=[];for(;o=a,a=l,c.push(a),a.point!==d;)for(;;){const v=a.getAvailableLinkedEvents();if(v.length===0){const E=c[0].point,A=c[c.length-1].point;throw new Error(`Unable to complete output ring starting at [${E.x}, ${E.y}]. Last matching segment found ends at [${A.x}, ${A.y}].`)}if(v.length===1){l=v[0].otherSE;break}let m=null;for(let E=0,A=p.length;E<A;E++)if(p[E].point===a.point){m=E;break}if(m!==null){const E=p.splice(m)[0],A=c.splice(E.index);A.unshift(A[0].otherSE),n.push(new xb(A.reverse()));continue}p.push({index:c.length,point:a.point});const x=a.getLeftmostComparator(o);l=v.sort(x)[0].otherSE;break}n.push(new xb(c))}return n}getGeom(){let e=this.events[0].point;const n=[e];for(let c=1,d=this.events.length-1;c<d;c++){const p=this.events[c].point,v=this.events[c+1].point;Rh.orient(p,e,v)!==0&&(n.push(p),e=p)}if(n.length===1)return null;const r=n[0],i=n[1];Rh.orient(r,e,i)===0&&n.shift(),n.push(n[0]);const s=this.isExteriorRing()?1:-1,o=this.isExteriorRing()?0:n.length-1,a=this.isExteriorRing()?n.length:-1,l=[];for(let c=o;c!=a;c+=s)l.push([n[c].x.toNumber(),n[c].y.toNumber()]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var i,s;let e=this.events[0];for(let o=1,a=this.events.length;o<a;o++){const l=this.events[o];Hc.compare(e,l)>0&&(e=l)}let n=e.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return((i=r.ringOut)==null?void 0:i.enclosingRing())!==n.ringOut?n.ringOut:(s=n.ringOut)==null?void 0:s.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}},d5=class{constructor(t){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=this.exteriorRing.getGeom();if(t===null)return null;const e=[t];for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&e.push(i)}return e}},uz=class{constructor(t){Ze(this,"rings");Ze(this,"polys");this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getGeom();r!==null&&t.push(r)}return t}_composePolys(t){var n;const e=[];for(let r=0,i=t.length;r<i;r++){const s=t[r];if(!s.poly)if(s.isExteriorRing())e.push(new d5(s));else{const o=s.enclosingRing();o!=null&&o.poly||e.push(new d5(o)),(n=o==null?void 0:o.poly)==null||n.addInterior(s)}}return e}},cz=class{constructor(t,e=Wv.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=t,this.tree=new Uv(e),this.segments=[]}process(t){const e=t.segment,n=[];if(t.consumedBy)return t.isLeft?this.queue.delete(t.otherSE):this.tree.delete(e),n;t.isLeft&&this.tree.add(e);let r=e,i=e;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(t.isLeft){let s=null;if(r){const a=r.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(s=a),!r.isAnEndpoint(a))){const l=this._splitSafely(r,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}let o=null;if(i){const a=i.getIntersection(e);if(a!==null&&(e.isAnEndpoint(a)||(o=a),!i.isAnEndpoint(a))){const l=this._splitSafely(i,a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}}if(s!==null||o!==null){let a=null;s===null?a=o:o===null?a=s:a=Hc.comparePoints(s,o)<=0?s:o,this.queue.delete(e.rightSE),n.push(e.rightSE);const l=e.split(a);for(let c=0,d=l.length;c<d;c++)n.push(l[c])}n.length>0?(this.tree.delete(e),n.push(t)):(this.segments.push(e),e.prev=r)}else{if(r&&i){const s=r.getIntersection(i);if(s!==null){if(!r.isAnEndpoint(s)){const o=this._splitSafely(r,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}if(!i.isAnEndpoint(s)){const o=this._splitSafely(i,s);for(let a=0,l=o.length;a<l;a++)n.push(o[a])}}}this.tree.delete(e)}return n}_splitSafely(t,e){this.tree.delete(t);const n=t.rightSE;this.queue.delete(n);const r=t.split(e);return r.push(n),t.consumedBy===void 0&&this.tree.add(t),r}},hz=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(t,e,n){xg.type=t;const r=[new p5(e,!0)];for(let c=0,d=n.length;c<d;c++)r.push(new p5(n[c],!1));if(xg.numMultiPolys=r.length,xg.type==="difference"){const c=r[0];let d=1;for(;d<r.length;)wb(r[d].bbox,c.bbox)!==null?d++:r.splice(d,1)}if(xg.type==="intersection")for(let c=0,d=r.length;c<d;c++){const p=r[c];for(let v=c+1,m=r.length;v<m;v++)if(wb(p.bbox,r[v].bbox)===null)return[]}const i=new Uv(Hc.compare);for(let c=0,d=r.length;c<d;c++){const p=r[c].getSweepEvents();for(let v=0,m=p.length;v<m;v++)i.add(p[v])}const s=new cz(i);let o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){const c=s.process(o);for(let d=0,p=c.length;d<p;d++){const v=c[d];v.consumedBy===void 0&&i.add(v)}i.size!=0?(o=i.first(),i.delete(o)):o=null}Rh.reset();const a=lz.factory(s.segments);return new uz(a).getGeom()}},xg=new hz,Lb=xg,dz=0,Wv=class iv{constructor(e,n,r,i){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++dz,this.leftSE=e,e.segment=this,e.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=e,this.rings=r,this.windings=i}static compare(e,n){const r=e.leftSE.point.x,i=n.leftSE.point.x,s=e.rightSE.point.x,o=n.rightSE.point.x;if(o.isLessThan(r))return 1;if(s.isLessThan(i))return-1;const a=e.leftSE.point.y,l=n.leftSE.point.y,c=e.rightSE.point.y,d=n.rightSE.point.y;if(r.isLessThan(i)){if(l.isLessThan(a)&&l.isLessThan(c))return 1;if(l.isGreaterThan(a)&&l.isGreaterThan(c))return-1;const p=e.comparePoint(n.leftSE.point);if(p<0)return 1;if(p>0)return-1;const v=n.comparePoint(e.rightSE.point);return v!==0?v:-1}if(r.isGreaterThan(i)){if(a.isLessThan(l)&&a.isLessThan(d))return-1;if(a.isGreaterThan(l)&&a.isGreaterThan(d))return 1;const p=n.comparePoint(e.leftSE.point);if(p!==0)return p;const v=e.comparePoint(n.rightSE.point);return v<0?1:v>0?-1:1}if(a.isLessThan(l))return-1;if(a.isGreaterThan(l))return 1;if(s.isLessThan(o)){const p=n.comparePoint(e.rightSE.point);if(p!==0)return p}if(s.isGreaterThan(o)){const p=e.comparePoint(n.rightSE.point);if(p<0)return 1;if(p>0)return-1}if(!s.eq(o)){const p=c.minus(a),v=s.minus(r),m=d.minus(l),x=o.minus(i);if(p.isGreaterThan(v)&&m.isLessThan(x))return 1;if(p.isLessThan(v)&&m.isGreaterThan(x))return-1}return s.isGreaterThan(o)?1:s.isLessThan(o)||c.isLessThan(d)?-1:c.isGreaterThan(d)?1:e.id<n.id?-1:e.id>n.id?1:0}static fromRing(e,n,r){let i,s,o;const a=Hc.comparePoints(e,n);if(a<0)i=e,s=n,o=1;else if(a>0)i=n,s=e,o=-1;else throw new Error(`Tried to create degenerate segment at [${e.x}, ${e.y}]`);const l=new Hc(i,!0),c=new Hc(s,!1);return new iv(l,c,[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const e=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(n)?e:n},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(n)?e:n}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Rh.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){const n=this.bbox(),r=e.bbox(),i=wb(n,r);if(i===null)return null;const s=this.leftSE.point,o=this.rightSE.point,a=e.leftSE.point,l=e.rightSE.point,c=ig(n,a)&&this.comparePoint(a)===0,d=ig(r,s)&&e.comparePoint(s)===0,p=ig(n,l)&&this.comparePoint(l)===0,v=ig(r,o)&&e.comparePoint(o)===0;if(d&&c)return v&&!p?o:!v&&p?l:null;if(d)return p&&s.x.eq(l.x)&&s.y.eq(l.y)?null:s;if(c)return v&&o.x.eq(a.x)&&o.y.eq(a.y)?null:a;if(v&&p)return null;if(v)return o;if(p)return l;const m=az(s,this.vector(),a,e.vector());return m===null||!ig(i,m)?null:Rh.snap(m)}split(e){const n=[],r=e.events!==void 0,i=new Hc(e,!0),s=new Hc(e,!1),o=this.rightSE;this.replaceRightSE(s),n.push(s),n.push(i);const a=new iv(i,o,this.rings.slice(),this.windings.slice());return Hc.comparePoints(a.leftSE.point,a.rightSE.point)>0&&a.swapEvents(),Hc.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),s.checkForConsuming()),n}swapEvents(){const e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(e){let n=this,r=e;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=iv.compare(n,r);if(i!==0){if(i>0){const s=n;n=r,r=s}if(n.prev===r){const s=n;n=r,r=s}for(let s=0,o=r.rings.length;s<o;s++){const a=r.rings[s],l=r.windings[s],c=n.rings.indexOf(a);c===-1?(n.rings.push(a),n.windings.push(l)):n.windings[c]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const e=this.prev.consumedBy||this.prev;this._beforeState=e.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let a=0,l=this.rings.length;a<l;a++){const c=this.rings[a],d=this.windings[a],p=n.indexOf(c);p===-1?(n.push(c),r.push(d)):r[p]+=d}const s=[],o=[];for(let a=0,l=n.length;a<l;a++){if(r[a]===0)continue;const c=n[a],d=c.poly;if(o.indexOf(d)===-1)if(c.isExterior)s.push(d);else{o.indexOf(d)===-1&&o.push(d);const p=s.indexOf(c.poly);p!==-1&&s.splice(p,1)}}for(let a=0,l=s.length;a<l;a++){const c=s[a].multiPoly;i.indexOf(c)===-1&&i.push(c)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const e=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(Lb.type){case"union":{const r=e.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;e.length<n.length?(r=e.length,i=n.length):(r=n.length,i=e.length),this._isInResult=i===Lb.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(e.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(e)!==r(n);break}}return this._isInResult}},f5=class{constructor(t,e,n){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=e,this.isExterior=n,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const r=Rh.snap({x:new Yc(t[0][0]),y:new Yc(t[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let s=1,o=t.length;s<o;s++){if(typeof t[s][0]!="number"||typeof t[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const a=Rh.snap({x:new Yc(t[s][0]),y:new Yc(t[s][1])});a.x.eq(i.x)&&a.y.eq(i.y)||(this.segments.push(Wv.fromRing(i,a,this)),a.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=a.x),a.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=a.y),a.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=a.x),a.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=a.y),i=a)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push(Wv.fromRing(i,r,this))}getSweepEvents(){const t=[];for(let e=0,n=this.segments.length;e<n;e++){const r=this.segments[e];t.push(r.leftSE),t.push(r.rightSE)}return t}},fz=class{constructor(t,e){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new f5(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let n=1,r=t.length;n<r;n++){const i=new f5(t[n],this,!1);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=e}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let e=0,n=this.interiorRings.length;e<n;e++){const r=this.interiorRings[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},p5=class{constructor(t,e){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:new Yc(Number.POSITIVE_INFINITY),y:new Yc(Number.POSITIVE_INFINITY)},ur:{x:new Yc(Number.NEGATIVE_INFINITY),y:new Yc(Number.NEGATIVE_INFINITY)}};for(let n=0,r=t.length;n<r;n++){const i=new fz(t[n],this);i.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=e}getSweepEvents(){const t=[];for(let e=0,n=this.polys.length;e<n;e++){const r=this.polys[e].getSweepEvents();for(let i=0,s=r.length;i<s;i++)t.push(r[i])}return t}},pz=(t,...e)=>Lb.run("intersection",t,e);Rh.set;function gz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function mz(t,e={}){const n=[];if(gz(t,i=>{n.push(i.coordinates)}),n.length<2)throw new Error("Must specify at least 2 geometries");const r=pz(n[0],...n.slice(1));return r.length===0?null:r.length===1?Uu(r[0],e.properties):Rj(r,e.properties)}var vz=mz;function NE(t,e,n){if(t!==null)for(var r,i,s,o,a,l,c,d=0,p=0,v,m=t.type,x=m==="FeatureCollection",E=m==="Feature",A=x?t.features.length:1,k=0;k<A;k++){c=x?t.features[k].geometry:E?t.geometry:t,v=c?c.type==="GeometryCollection":!1,a=v?c.geometries.length:1;for(var D=0;D<a;D++){var $=0,Y=0;if(o=v?c.geometries[D]:c,o!==null){l=o.coordinates;var te=o.type;switch(d=0,te){case null:break;case"Point":if(e(l,p,k,$,Y)===!1)return!1;p++,$++;break;case"LineString":case"MultiPoint":for(r=0;r<l.length;r++){if(e(l[r],p,k,$,Y)===!1)return!1;p++,te==="MultiPoint"&&$++}te==="LineString"&&$++;break;case"Polygon":case"MultiLineString":for(r=0;r<l.length;r++){for(i=0;i<l[r].length-d;i++){if(e(l[r][i],p,k,$,Y)===!1)return!1;p++}te==="MultiLineString"&&$++,te==="Polygon"&&Y++}te==="Polygon"&&$++;break;case"MultiPolygon":for(r=0;r<l.length;r++){for(Y=0,i=0;i<l[r].length;i++){for(s=0;s<l[r][i].length-d;s++){if(e(l[r][i][s],p,k,$,Y)===!1)return!1;p++}Y++}$++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(NE(o.geometries[r],e)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function yz(t,e){var n,r,i,s,o,a,l,c,d,p,v=0,m=t.type==="FeatureCollection",x=t.type==="Feature",E=m?t.features.length:1;for(n=0;n<E;n++){for(a=m?t.features[n].geometry:x?t.geometry:t,c=m?t.features[n].properties:x?t.properties:{},d=m?t.features[n].bbox:x?t.bbox:void 0,p=m?t.features[n].id:x?t.id:void 0,l=a?a.type==="GeometryCollection":!1,o=l?a.geometries.length:1,i=0;i<o;i++){if(s=l?a.geometries[i]:a,s===null){if(e(null,v,c,d,p)===!1)return!1;continue}switch(s.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(s,v,c,d,p)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<s.geometries.length;r++)if(e(s.geometries[r],v,c,d,p)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}v++}}function bz(t,e){yz(t,function(n,r,i,s,o){var a=n===null?null:n.type;switch(a){case null:case"Point":case"LineString":case"Polygon":return e(Ap(n,i,{bbox:s,id:o}),r,0)===!1?!1:void 0}var l;switch(a){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var c=0;c<n.coordinates.length;c++){var d=n.coordinates[c],p={type:l,coordinates:d};if(e(Ap(p,i),r,c)===!1)return!1}})}function _z(t,e){bz(t,function(n,r,i){var s=0;if(n.geometry){var o=n.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var a,l=0,c=0,d=0;if(NE(n,function(p,v,m,x,E){if(a===void 0||r>l||x>c||E>d){a=p,l=r,c=x,d=E,s=0;return}var A=Hu([a,p],n.properties);if(e(A,r,i,E,s)===!1)return!1;s++,a=p})===!1)return!1}}})}function wz(t,e,n){var r=n,i=!1;return _z(t,function(s,o,a,l,c){i===!1&&n===void 0?r=s:r=e(r,s,o,a,l,c),i=!0}),r}function Gv(t,e={}){return wz(t,(n,r)=>{const i=r.geometry.coordinates;return n+$_(i[0],i[1],e)},0)}var Gd=Gv;class cd extends Wn.Polygon{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");this.properties=vn.measure("Polygon.constructor.initProperties",()=>({type:"Polygon",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{color:r.color||"#2b6451",weight:r.weight||3,opacity:r.opacity||1,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity||.2,dashArray:r.dashArray||"",name:r.name||""}})),this.updateProperties(),this.on({add:()=>this.updateProperties(),edit:()=>this.updateProperties(),drag:()=>this.updateProperties()})}updateProperties(){vn.measure("Polygon.updateProperties",()=>{var n,r,i,s,o;try{const a=this.getLatLngs()[0];if(!a||a.length<3){console.warn("Polygon has less than 3 points, cannot calculate properties");return}const l=a.map(k=>[k.lng,k.lat]);l.push(l[0]);const c=Uu([l]),d=PE(c),p=Gv(Hu([...l]),{units:"meters"}),v=Wg(c),m=Wn.latLng(v.geometry.coordinates[1],v.geometry.coordinates[0]),x=((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||"",E=((i=this.properties)==null?void 0:i.category)||"forages",A=((s=this.properties)==null?void 0:s.accessLevel)||"visitor";this.properties={type:"Polygon",coordinates:a.map(k=>({lat:k.lat,lng:k.lng})),surface:d,perimeter:p,center:{lat:m.lat,lng:m.lng},vertices:a.length,category:E,accessLevel:A,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:x}},this.fire("properties:updated",{shape:this,properties:this.properties})}catch(a){console.error("Failed to calculate polygon properties",a)}})}setName(n){vn.measure("Polygon.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return vn.measure("Polygon.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}setLatLngs(n){return vn.measure("Polygon.setLatLngs",()=>(super.setLatLngs(n),this.updateProperties(),this))}getMidPoints(){return vn.measure("Polygon.getMidPoints",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(Wn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return r})}moveVertex(n,r){vn.measure("Polygon.moveVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i[n]=r,Wn.Polygon.prototype.setLatLngs.call(this,[i]))})}addVertex(n,r){vn.measure("Polygon.addVertex",()=>{const i=this.getLatLngs()[0];n>=0&&n<i.length&&(i.splice((n+1)%i.length,0,r),Wn.Polygon.prototype.setLatLngs.call(this,[i]))})}move(n){return vn.measure("Polygon.move",()=>{const i=this.getLatLngs()[0].map(s=>Wn.latLng(s.lat+n.lat,s.lng+n.lng));return Wn.Polygon.prototype.setLatLngs.call(this,[i]),this})}getCenter(){return vn.measure("Polygon.getCenter",()=>{const n=this.getLatLngs()[0];if(!n||n.length===0)return new Wn.LatLng(0,0);try{const r=n.filter(c=>c&&typeof c.lat=="number"&&typeof c.lng=="number"&&!isNaN(c.lat)&&!isNaN(c.lng)&&Math.abs(c.lat)<=90&&Math.abs(c.lng)<=180);if(r.length===0)return console.warn("Aucun point valide dans le polygone pour calculer le centre"),new Wn.LatLng(0,0);const i=r.map(c=>[c.lng,c.lat]);i.push(i[0]);const s=Uu([i]),o=Wg(s),a=o.geometry.coordinates[1],l=o.geometry.coordinates[0];if(typeof a!="number"||typeof l!="number"||isNaN(a)||isNaN(l)||Math.abs(a)>90||Math.abs(l)>180)throw new Error("Centroid calculé invalide");return Wn.latLng(a,l)}catch(r){console.warn("Erreur lors du calcul du centroïde avec turf.js, utilisation de la méthode simple",r);let i=0,s=0,o=0;for(const a of n)a&&typeof a.lat=="number"&&typeof a.lng=="number"&&!isNaN(a.lat)&&!isNaN(a.lng)&&Math.abs(a.lat)<=90&&Math.abs(a.lng)<=180&&(i+=a.lat,s+=a.lng,o++);return o===0?(console.error("Impossible de calculer un centre valide pour le polygone"),new Wn.LatLng(0,0)):new Wn.LatLng(i/o,s/o)}})}getSegmentLengths(){return vn.measure("Polygon.getSegmentLengths",()=>{const n=this.getLatLngs()[0],r=[];if(n.length<2)return r;for(let i=0;i<n.length;i++){const s=n[i],o=n[(i+1)%n.length];r.push(s.distanceTo(o))}return r})}}class ea extends Wn.Polyline{constructor(n,r={}){super(n,{...r,pmIgnore:!1,interactive:!0});Ze(this,"properties");Ze(this,"cachedProperties",{});Ze(this,"needsUpdate",!0);this.properties=vn.measure("Line.constructor.initProperties",()=>({type:"Line",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...r||{},name:r.name||""}})),this.updateProperties(),this.on("add",()=>{this.updateProperties()})}updateProperties(){vn.measure("Line.updateProperties",()=>{var i,s,o,a,l;const n=this.getLatLngs();if(!n||n.length<2){console.warn("Line has less than 2 points, cannot calculate properties");return}const r=n.map(c=>[c.lng,c.lat]);try{const c=Hu(r),d=Gv(c,{units:"meters"});let p;if(n.length===2)p=Wn.latLng((n[0].lat+n[1].lat)/2,(n[0].lng+n[1].lng)/2);else{const A=yb(c,d/2,{units:"meters"});p=Wn.latLng(A.geometry.coordinates[1],A.geometry.coordinates[0])}const v=10,m=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"",x=((o=this.properties)==null?void 0:o.category)||"forages",E=((a=this.properties)==null?void 0:a.accessLevel)||"visitor";this.properties={type:"Line",length:d,coordinates:n.map(A=>({lat:A.lat,lng:A.lng})),center:{lat:p.lat,lng:p.lng},vertices:n.length,surfaceInfluence:d*v,dimensions:{width:v},category:x,accessLevel:E,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,dashArray:((l=this.options)==null?void 0:l.dashArray)||"",name:m}},this.cachedProperties.length=d,this.cachedProperties.center=p,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.needsUpdate=!1,this.fire("properties:updated",{shape:this,properties:this.properties})}catch(c){console.error("Failed to calculate line properties",c)}})}setName(n){vn.measure("Line.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return vn.measure("Line.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}invalidateCache(){vn.measure("Line.invalidateCache",()=>{this.needsUpdate=!0,this.cachedProperties={}})}setLatLngs(n){return super.setLatLngs(n),this.needsUpdate=!0,this.cachedProperties={},this.fire("latlngs:updated",{latlngs:this.getLatLngs()}),this}getMidPoints(){return vn.measure("Line.getMidPoints",()=>{if(!this.needsUpdate&&this.cachedProperties.midPoints)return this.cachedProperties.midPoints;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];if(!s||!o){console.warn("Points invalides détectés pour le segment",i);continue}r.push(Wn.latLng((s.lat+o.lat)/2,(s.lng+o.lng)/2))}return this.cachedProperties.midPoints=r,r})}getMidPointAt(n){return vn.measure("Line.getMidPointAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return null;const i=r[n],s=r[n+1];return!i||!s?(console.warn("Points invalides pour calcul du midpoint au segment",n),null):Wn.latLng((i.lat+s.lat)/2,(i.lng+s.lng)/2)})}moveVertex(n,r,i=!1){vn.measure("Line.moveVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length&&(s[n]=r,this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("vertex:moved",{index:n,latlng:r,allPoints:s}),i&&this.updateProperties())})}addVertex(n,r,i=!1){vn.measure("Line.addVertex",()=>{const s=this.getLatLngs();n>=0&&n<s.length-1&&(s.splice(n+1,0,r),Wn.Polyline.prototype.setLatLngs.call(this,s),this.needsUpdate=!0,this.cachedProperties.midPoints=void 0,this.cachedProperties.segmentLengths=void 0,this.cachedProperties.center=void 0,this.cachedProperties.length=void 0,i&&this.updateProperties())})}move(n,r=!0){return vn.measure("Line.move",()=>{this.fire("move:start");const i=this.getLatLngs(),s=i.map(o=>Wn.latLng(o.lat+n.lat,o.lng+n.lng));return this.setLatLngs(s),this.needsUpdate=!0,this.cachedProperties={},this.fire("move",{delta:n,newPositions:s,oldPositions:i}),r&&(this.updateProperties(),this.fire("properties:updated",{shape:this,properties:this.properties}),this.fire("move:end")),this})}getCenter(){return vn.measure("Line.getCenter",()=>{if(!this.needsUpdate&&this.cachedProperties.center)return this.cachedProperties.center;const n=this.getLatLngs();if(n.length<2)return n[0]||new Wn.LatLng(0,0);try{const r=n.map(l=>[l.lng,l.lat]),i=Hu(r),s=Gv(i,{units:"meters"}),o=yb(i,s/2,{units:"meters"}),a=Wn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0]);return this.cachedProperties.center=a,a}catch(r){console.warn("Error calculating line center with turf.js, using simple method",r);const i=n.reduce((a,l)=>a+l.lat,0)/n.length,s=n.reduce((a,l)=>a+l.lng,0)/n.length,o=new Wn.LatLng(i,s);return this.cachedProperties.center=o,o}})}getSegmentLengths(){return vn.measure("Line.getSegmentLengths",()=>{if(!this.needsUpdate&&this.cachedProperties.segmentLengths)return this.cachedProperties.segmentLengths;const n=this.getLatLngs(),r=[];if(n.length<2)return r;for(let i=0;i<n.length-1;i++){const s=n[i],o=n[i+1];r.push(s.distanceTo(o))}return this.cachedProperties.segmentLengths=r,r})}getSegmentLengthAt(n){return vn.measure("Line.getSegmentLengthAt",()=>{const r=this.getLatLngs();if(n<0||n>=r.length-1||r.length<2)return 0;const i=r[n],s=r[n+1];return i.distanceTo(s)})}getLengthToVertex(n){return vn.measure("Line.getLengthToVertex",()=>{const r=this.getLatLngs();let i=0;if(n<=0||r.length<2)return 0;for(let s=0;s<Math.min(n,r.length-1);s++)i+=r[s].distanceTo(r[s+1]);return i})}getLength(){return vn.measure("Line.getLength",()=>{if(!this.needsUpdate&&this.cachedProperties.length)return this.cachedProperties.length;const n=this.getLatLngs();let r=0;for(let i=0;i<n.length-1;i++)r+=n[i].distanceTo(n[i+1]);return this.cachedProperties.length=r,r})}}const El=class El extends ea{constructor(n,r={}){super(n,{...r,color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});Ze(this,"elevationData",[]);Ze(this,"elevationProfile",null);Ze(this,"elevationMarker",null);Ze(this,"isZooming",!1);Ze(this,"simpleLine",null);Ze(this,"isDestroyed",!1);Ze(this,"zoomAnimationTimeout",null);this.properties=vn.measure("ElevationLine.constructor.initProperties",()=>({...this.properties,type:"ElevationLine",category:r.category||"forages",accessLevel:r.accessLevel||"visitor",style:{...this.properties.style||{},name:r.name||""},elevationProfile:null,maxElevation:0,minElevation:0,elevationGain:0,elevationLoss:0,dataSource:"pending"})),this.setupEventListeners()}setupEventListeners(){vn.measure("ElevationLine.setupEventListeners",()=>{this.on("move",()=>this.updateElevationProfile()),this.on("add",()=>{this._map&&(this._map.on("zoomstart",this.handleZoomStart,this),this._map.on("zoomend",this.handleZoomEnd,this),this._map.on("zoomanim",this._animateZoom,this))}),this.on("remove",()=>{this.cleanupEventListeners()})})}cleanupEventListeners(){this._map&&(this._map.off("zoomstart",this.handleZoomStart,this),this._map.off("zoomend",this.handleZoomEnd,this),this._map.off("zoomanim",this._animateZoom,this)),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null)}_animateZoom(n){if(this.isDestroyed||!this._map||!this.getLatLngs().length){console.debug("[ElevationLine] Animation de zoom ignorée - ligne détruite ou carte non disponible");return}this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null);try{this.elevationMarker&&this.elevationMarker.remove();const r=this._path;r&&(r.style.display="none");const i=this.getLatLngs();if(i&&i.length>0&&this._map&&!this.isDestroyed){if(!this._map.getContainer()){console.debug("[ElevationLine] Carte non valide pendant l'animation de zoom");return}if(this.simpleLine?this.simpleLine.setLatLngs(i):(this.simpleLine=Wn.polyline(i,{color:"#FF4500",weight:3,opacity:.6,smoothFactor:1,interactive:!1}),this._map&&this._map.getContainer()&&this.simpleLine.addTo(this._map)),this.simpleLine&&this.simpleLine._path){const s=this.simpleLine._path.style.transform;this.simpleLine._path.style.transform="",this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this.simpleLine&&this.simpleLine._path&&(this.simpleLine._path.style.transform=s,this.simpleLine._path.style.display=""),r&&!this.isDestroyed&&(r.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(o){console.warn("[ElevationLine] Erreur lors de la restauration après animation:",o),this.cleanup()}},300)}}}catch(r){console.debug("[ElevationLine] Animation de zoom ignorée:",r),this.zoomAnimationTimeout=setTimeout(()=>{if(this.isDestroyed||!this._map||!this._map.getContainer()){this.cleanup();return}try{this._path&&(this._path.style.display=""),this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(i){console.error("[ElevationLine] Erreur lors de la restauration après animation:",i),this.cleanup()}},300)}}handleZoomStart(){this.isDestroyed||vn.measure("ElevationLine.handleZoomStart",()=>{if(!(this.isZooming||!this._map)){this.isZooming=!0;try{this.elevationMarker&&this.elevationMarker.remove();const n=this._path;n&&(n.style.display="none"),this.isDestroyed||this.setStyle({opacity:.3})}catch(n){console.error("[ElevationLine] Error in handleZoomStart:",n),this.cleanup()}}})}handleZoomEnd(){this.isDestroyed||vn.measure("ElevationLine.handleZoomEnd",()=>{if(!this._map){this.isZooming=!1;return}try{this.simpleLine&&this._map&&(this.simpleLine.remove(),this.simpleLine=null);const n=this._path;n&&(n.style.display=""),this.isDestroyed||this.setStyle({opacity:.8}),this.zoomAnimationTimeout&&clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=setTimeout(()=>{if(!(this.isDestroyed||!this._map))try{this._map&&this._map.hasLayer(this)&&!this.isDestroyed&&this.redraw()}catch(r){console.warn("[ElevationLine] Erreur lors du redraw après zoom:",r),this.cleanup()}},50)}catch(n){console.error("[ElevationLine] Error in handleZoomEnd:",n)}finally{this.isZooming=!1}})}cleanup(){vn.measure("ElevationLine.cleanup",()=>{if(this.isZooming=!1,this.hideElevationMarker(),this.zoomAnimationTimeout&&(clearTimeout(this.zoomAnimationTimeout),this.zoomAnimationTimeout=null),this.simpleLine&&this._map){try{this.simpleLine.remove()}catch(r){console.error("[ElevationLine] Error removing simpleLine:",r)}this.simpleLine=null}if(this.elevationProfile){try{this.elevationProfile.remove()}catch(r){console.error("[ElevationLine] Error removing elevationProfile:",r)}this.elevationProfile=null}const n=this._path;n&&(n.style.display=""),!this.isDestroyed&&this._map&&this._map.hasLayer(this)&&this.setStyle({opacity:.8})})}calculateOptimalSampleCount(){return vn.measure("ElevationLine.calculateOptimalSampleCount",()=>{const n=this.getLength(),r=Math.ceil(n/El.SAMPLE_DISTANCE);return Math.min(Math.max(r,El.MIN_SAMPLES),El.MAX_SAMPLES)})}async fetchElevationData(n=0){return vn.measure("ElevationLine.fetchElevationData",async()=>{if(this.getLatLngs().length===0)return;const i=this.getLength();let s="";const o=this.calculateOptimalSampleCount();console.log(`[ElevationLine] Using ${o} sample points for ${i.toFixed(0)}m line`);const a=[];for(let l=0;l<o;l++){const c=l/(o-1)*i,d=this.getPointAtDistance(c);d&&a.push(`${d.lat},${d.lng}`)}s=a.join("|");try{const l=await fetch(`${El.API_URL}?locations=${s}`);if(!l.ok)throw new Error(`HTTP error ${l.status}`);const c=await l.json();if(!c.results||!Array.isArray(c.results))throw new Error("Invalid API response format");this.elevationData=c.results.map((d,p)=>({distance:p/(o-1)*i,elevation:d.elevation})),this.properties.dataSource="api"}catch(l){if(console.warn(`[ElevationLine] API fetch attempt ${n+1}/${El.MAX_RETRIES} failed:`,l),n<El.MAX_RETRIES)return await new Promise(c=>setTimeout(c,El.RETRY_DELAY)),this.fetchElevationData(n+1);console.warn("[ElevationLine] All API attempts failed, falling back to simulation"),this.simulateElevationData(),this.properties.dataSource="simulation"}this.calculateElevationStatistics()})}simulateElevationData(){vn.measure("ElevationLine.simulateElevationData",()=>{const n=this.getLength(),r=this.calculateOptimalSampleCount();this.elevationData=Array.from({length:r},(i,s)=>{const o=s/(r-1)*n,a=100+Math.sin(o/n*Math.PI*2)*50;return{distance:o,elevation:a}})})}calculateElevationStatistics(){vn.measure("ElevationLine.calculateElevationStatistics",()=>{if(!this.elevationData.length)return;const n=this.elevationData.map(d=>d.elevation),r=n.length?Math.max(...n):0,i=n.length?Math.min(...n):0;let s=0,o=0,a=0,l=0,c=0;console.log("[ElevationLine][calculateElevationStatistics] Données brutes:",{elevationsCount:n.length,maxElevation:r,minElevation:i});for(let d=1;d<this.elevationData.length;d++){const p=this.elevationData[d-1],v=this.elevationData[d],m=v.elevation-p.elevation;m>0?s+=m:o+=Math.abs(m);const x=v.distance-p.distance;if(x>0){const E=m/x*100;a=Math.max(a,Math.abs(E)),l+=Math.abs(E),c++}}console.log("[ElevationLine][calculateElevationStatistics] Calculs intermédiaires:",{gain:s,loss:o,maxSlope:a,averageSlope:c>0?l/c:0}),this.properties={...this.properties,type:"ElevationLine",maxElevation:r,minElevation:i,elevationGain:s,elevationLoss:o,maxSlope:a,averageSlope:c>0?l/c:0,elevationData:this.elevationData,dataSource:this.properties.dataSource,length:this.getLength()},console.log("[ElevationLine][calculateElevationStatistics] Propriétés mises à jour:",this.properties)})}showElevationAt(n){vn.measure("ElevationLine.showElevationAt",()=>{if(!(!this.elevationData.length||!this._map))try{const r=this.elevationData.reduce((s,o)=>Math.abs(o.distance-n)<Math.abs(s.distance-n)?o:s),i=this.getPointAtDistance(n);if(!i)return;this.elevationMarker?(this.elevationMarker.setLatLng(i),this.elevationMarker.setTooltipContent(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`)):(this.elevationMarker=Wn.circleMarker(i,{radius:6,color:"#FF4500",fillColor:"#FF4500",fillOpacity:1,weight:2,className:"elevation-marker"}),this.elevationMarker.bindTooltip(`Distance: ${this.formatDistance(r.distance)}<br>Altitude: ${this.formatElevation(r.elevation)}`,{permanent:!0,direction:"top",offset:[0,-10],className:"elevation-marker-tooltip"}),this._map&&this._map.hasLayer(this)&&this.elevationMarker.addTo(this._map)),this.fire("elevation:show",{distance:n,elevation:r.elevation,latLng:i})}catch(r){console.error("[ElevationLine] Erreur lors de l'affichage de l'élévation:",r),this.hideElevationMarker()}})}hideElevationMarker(){vn.measure("ElevationLine.hideElevationMarker",()=>{this.elevationMarker&&(this.elevationMarker.remove(),this.elevationMarker=null)})}getPointAtDistance(n){return vn.measure("ElevationLine.getPointAtDistance",()=>{try{const i=this.getLatLngs().map(a=>[a.lng,a.lat]),s=Hu(i),o=yb(s,n,{units:"meters"});return Wn.latLng(o.geometry.coordinates[1],o.geometry.coordinates[0])}catch(r){return console.error("Error calculating point at distance",r),null}})}moveVertex(n,r,i=!1){vn.measure("ElevationLine.moveVertex",()=>{super.moveVertex(n,r,!1),this.properties.type="ElevationLine",i&&this.updateElevationProfile()})}addVertex(n,r,i=!1){vn.measure("ElevationLine.addVertex",()=>{console.warn("[ElevationLine] Tentative d'ajout de vertex ignorée - non autorisé pour un profil altimétrique")})}setLatLngs(n){return vn.measure("ElevationLine.setLatLngs",()=>(super.setLatLngs(n),this.properties.type="ElevationLine",this.updateElevationProfile(),this))}move(n,r=!0){return vn.measure("ElevationLine.move",()=>(super.move(n,!1),this.properties.type="ElevationLine",r&&this.updateElevationProfile(),this))}setName(n){vn.measure("ElevationLine.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return vn.measure("ElevationLine.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}formatDistance(n){return vn.measure("ElevationLine.formatDistance",()=>n>=1e3?`${(n/1e3).toFixed(2)} km`:`${n.toFixed(0)} m`)}formatElevation(n){return vn.measure("ElevationLine.formatElevation",()=>`${n.toFixed(0)} m`)}onAdd(n){return vn.measure("ElevationLine.onAdd",()=>(super.onAdd(n),this))}onRemove(n){return this.isDestroyed=!0,this.cleanupEventListeners(),this.cleanup(),super.onRemove(n)}async updateElevationProfile(){return vn.measure("ElevationLine.updateElevationProfile",async()=>{try{if(this.properties.elevationData&&this.properties.dataSource==="restored"){this.elevationData=this.properties.elevationData,this.calculateElevationStatistics(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties});return}await this.fetchElevationData(),this.updateProperties(),this._map&&this._map.hasLayer(this)&&this.redraw(),this.fire("elevation:updated",{shape:this,elevationData:this.elevationData,properties:this.properties})}catch(n){console.error("[ElevationLine] Erreur lors de la mise à jour du profil d'élévation:",n),this.properties.dataSource="error"}})}updateProperties(){vn.measure("ElevationLine.updateProperties",()=>{var n,r;if(super.updateProperties(),this.elevationData&&this.elevationData.length>0){const i=this.elevationData.map(A=>A.elevation),s=Math.max(...i),o=Math.min(...i);let a=0,l=0,c=0,d=0,p=0;for(let A=1;A<this.elevationData.length;A++){const k=this.elevationData[A-1],D=this.elevationData[A],$=D.elevation-k.elevation;$>0?a+=$:l+=Math.abs($);const Y=D.distance-k.distance;if(Y>0){const te=$/Y*100;c=Math.max(c,Math.abs(te)),d+=Math.abs(te),p++}}const m=this.getLatLngs().map(A=>({lat:A.lat,lng:A.lng})),x=((n=this.properties)==null?void 0:n.category)||"forages",E=((r=this.properties)==null?void 0:r.accessLevel)||"visitor";this.properties={...this.properties,type:"ElevationLine",coordinates:m,elevationData:this.elevationData.map(A=>({distance:A.distance,elevation:A.elevation})),maxElevation:s,minElevation:o,elevationGain:a,elevationLoss:l,maxSlope:c,averageSlope:p>0?d/p:0,dataSource:this.properties.dataSource||"api",category:x,accessLevel:E},this.fire("properties:updated",{shape:this,properties:this.properties})}})}getElevationData(){return vn.measure("ElevationLine.getElevationData",()=>this.elevationData)}};Ze(El,"API_URL","https://api.open-elevation.com/api/v1/lookup"),Ze(El,"RETRY_DELAY",2e3),Ze(El,"MAX_RETRIES",3),Ze(El,"SAMPLE_DISTANCE",100),Ze(El,"MIN_SAMPLES",10),Ze(El,"MAX_SAMPLES",50);let Sd=El;var qv={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */qv.exports;(function(t,e){(function(){var n,r="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",a="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,d="__lodash_placeholder__",p=1,v=2,m=4,x=1,E=2,A=1,k=2,D=4,$=8,Y=16,te=32,me=64,pe=128,I=256,z=512,K=30,N="...",B=800,V=16,R=1,j=2,W=3,X=1/0,oe=9007199254740991,_e=17976931348623157e292,Ce=NaN,De=4294967295,Z=De-1,G=De>>>1,re=[["ary",pe],["bind",A],["bindKey",k],["curry",$],["curryRight",Y],["flip",z],["partial",te],["partialRight",me],["rearg",I]],he="[object Arguments]",ce="[object Array]",ve="[object AsyncFunction]",ee="[object Boolean]",J="[object Date]",Oe="[object DOMException]",Te="[object Error]",Ye="[object Function]",ge="[object GeneratorFunction]",Q="[object Map]",ie="[object Number]",fe="[object Null]",Se="[object Object]",de="[object Promise]",Xe="[object Proxy]",$e="[object RegExp]",Je="[object Set]",He="[object String]",Ge="[object Symbol]",xt="[object Undefined]",Et="[object WeakMap]",Kt="[object WeakSet]",sn="[object ArrayBuffer]",an="[object DataView]",Qe="[object Float32Array]",at="[object Float64Array]",it="[object Int8Array]",Bt="[object Int16Array]",Qt="[object Int32Array]",Tn="[object Uint8Array]",xn="[object Uint8ClampedArray]",An="[object Uint16Array]",Kn="[object Uint32Array]",en=/\b__p \+= '';/g,Ln=/\b(__p \+=) '' \+/g,Mn=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Hn=/&(?:amp|lt|gt|quot|#39);/g,hr=/[&<>"']/g,vr=RegExp(Hn.source),ir=RegExp(hr.source),Vr=/<%-([\s\S]+?)%>/g,Vs=/<%([\s\S]+?)%>/g,ft=/<%=([\s\S]+?)%>/g,rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$t=/^\w*$/,Jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Gn=/[\\^$.*+?()[\]{}|]/g,Sn=RegExp(Gn.source),Ut=/^\s+/,cn=/\s/,lt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,qt=/\{\n\/\* \[wrapped with (.+)\] \*/,Dn=/,? & /,Ar=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Tt=/[()=,{}\[\]\/\s]/,zn=/\\(\\)?/g,sr=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mi=/\w*$/,Nr=/^[-+]0x[0-9a-f]+$/i,Rr=/^0b[01]+$/i,yr=/^\[object .+?Constructor\]$/,ji=/^0o[0-7]+$/i,_r=/^(?:0|[1-9]\d*)$/,Fr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Cr=/($^)/,un=/['\n\r\u2028\u2029\\]/g,qi="\\ud800-\\udfff",Zi="\\u0300-\\u036f",Vi="\\ufe20-\\ufe2f",pi="\\u20d0-\\u20ff",zr=Zi+Vi+pi,Jr="\\u2700-\\u27bf",gr="a-z\\xdf-\\xf6\\xf8-\\xff",Ui="\\xac\\xb1\\xd7\\xf7",qo="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Is="\\u2000-\\u206f",Yn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dn="A-Z\\xc0-\\xd6\\xd8-\\xde",as="\\ufe0e\\ufe0f",xi=Ui+qo+Is+Yn,ki="['’]",ls="["+qi+"]",lr="["+xi+"]",Tr="["+zr+"]",Ir="\\d+",ps="["+Jr+"]",ci="["+gr+"]",Qs="[^"+qi+xi+Ir+Jr+gr+dn+"]",si="\\ud83c[\\udffb-\\udfff]",Cn="(?:"+Tr+"|"+si+")",rn="[^"+qi+"]",Br="(?:\\ud83c[\\udde6-\\uddff]){2}",ms="[\\ud800-\\udbff][\\udc00-\\udfff]",us="["+dn+"]",fa="\\u200d",pa="(?:"+ci+"|"+Qs+")",ga="(?:"+us+"|"+Qs+")",To="(?:"+ki+"(?:d|ll|m|re|s|t|ve))?",Qr="(?:"+ki+"(?:D|LL|M|RE|S|T|VE))?",na=Cn+"?",Bs="["+as+"]?",zi="(?:"+fa+"(?:"+[rn,Br,ms].join("|")+")"+Bs+na+")*",ra="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pl="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mr=Bs+na+zi,wr="(?:"+[ps,Br,ms].join("|")+")"+mr,mo="(?:"+[rn+Tr+"?",Tr,Br,ms,ls].join("|")+")",Ur=RegExp(ki,"g"),gl=RegExp(Tr,"g"),Va=RegExp(si+"(?="+si+")|"+mo+mr,"g"),vi=RegExp([us+"?"+ci+"+"+To+"(?="+[lr,us,"$"].join("|")+")",ga+"+"+Qr+"(?="+[lr,us+pa,"$"].join("|")+")",us+"?"+pa+"+"+To,us+"+"+Qr,pl,ra,Ir,wr].join("|"),"g"),Es=RegExp("["+fa+qi+zr+as+"]"),vs=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ju=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],su=-1,Lr={};Lr[Qe]=Lr[at]=Lr[it]=Lr[Bt]=Lr[Qt]=Lr[Tn]=Lr[xn]=Lr[An]=Lr[Kn]=!0,Lr[he]=Lr[ce]=Lr[sn]=Lr[ee]=Lr[an]=Lr[J]=Lr[Te]=Lr[Ye]=Lr[Q]=Lr[ie]=Lr[Se]=Lr[$e]=Lr[Je]=Lr[He]=Lr[Et]=!1;var Yr={};Yr[he]=Yr[ce]=Yr[sn]=Yr[an]=Yr[ee]=Yr[J]=Yr[Qe]=Yr[at]=Yr[it]=Yr[Bt]=Yr[Qt]=Yr[Q]=Yr[ie]=Yr[Se]=Yr[$e]=Yr[Je]=Yr[He]=Yr[Ge]=Yr[Tn]=Yr[xn]=Yr[An]=Yr[Kn]=!0,Yr[Te]=Yr[Ye]=Yr[Et]=!1;var ml={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Mc={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ou={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Pu={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Nl=parseFloat,au=parseInt,Mu=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca,ei=typeof self=="object"&&self&&self.Object===Object&&self,ys=Mu||ei||Function("return this")(),ur=e&&!e.nodeType&&e,bs=ur&&!0&&t&&!t.nodeType&&t,Il=bs&&bs.exports===ur,Ua=Il&&Mu.process,Xi=function(){try{var wt=bs&&bs.require&&bs.require("util").types;return wt||Ua&&Ua.binding&&Ua.binding("util")}catch{}}(),ku=Xi&&Xi.isArrayBuffer,Pa=Xi&&Xi.isDate,lu=Xi&&Xi.isMap,uu=Xi&&Xi.isRegExp,ia=Xi&&Xi.isSet,cu=Xi&&Xi.isTypedArray;function Li(wt,Yt,Nt){switch(Nt.length){case 0:return wt.call(Yt);case 1:return wt.call(Yt,Nt[0]);case 2:return wt.call(Yt,Nt[0],Nt[1]);case 3:return wt.call(Yt,Nt[0],Nt[1],Nt[2])}return wt.apply(Yt,Nt)}function kc(wt,Yt,Nt,Nn){for(var Jn=-1,xr=wt==null?0:wt.length;++Jn<xr;){var Ji=wt[Jn];Yt(Nn,Ji,Nt(Ji),wt)}return Nn}function Us(wt,Yt){for(var Nt=-1,Nn=wt==null?0:wt.length;++Nt<Nn&&Yt(wt[Nt],Nt,wt)!==!1;);return wt}function ma(wt,Yt){for(var Nt=wt==null?0:wt.length;Nt--&&Yt(wt[Nt],Nt,wt)!==!1;);return wt}function hu(wt,Yt){for(var Nt=-1,Nn=wt==null?0:wt.length;++Nt<Nn;)if(!Yt(wt[Nt],Nt,wt))return!1;return!0}function va(wt,Yt){for(var Nt=-1,Nn=wt==null?0:wt.length,Jn=0,xr=[];++Nt<Nn;){var Ji=wt[Nt];Yt(Ji,Nt,wt)&&(xr[Jn++]=Ji)}return xr}function Bl(wt,Yt){var Nt=wt==null?0:wt.length;return!!Nt&&mn(wt,Yt,0)>-1}function Rl(wt,Yt,Nt){for(var Nn=-1,Jn=wt==null?0:wt.length;++Nn<Jn;)if(Nt(Yt,wt[Nn]))return!0;return!1}function Si(wt,Yt){for(var Nt=-1,Nn=wt==null?0:wt.length,Jn=Array(Nn);++Nt<Nn;)Jn[Nt]=Yt(wt[Nt],Nt,wt);return Jn}function Yo(wt,Yt){for(var Nt=-1,Nn=Yt.length,Jn=wt.length;++Nt<Nn;)wt[Jn+Nt]=Yt[Nt];return wt}function Ha(wt,Yt,Nt,Nn){var Jn=-1,xr=wt==null?0:wt.length;for(Nn&&xr&&(Nt=wt[++Jn]);++Jn<xr;)Nt=Yt(Nt,wt[Jn],Jn,wt);return Nt}function _s(wt,Yt,Nt,Nn){var Jn=wt==null?0:wt.length;for(Nn&&Jn&&(Nt=wt[--Jn]);Jn--;)Nt=Yt(Nt,wt[Jn],Jn,wt);return Nt}function F(wt,Yt){for(var Nt=-1,Nn=wt==null?0:wt.length;++Nt<Nn;)if(Yt(wt[Nt],Nt,wt))return!0;return!1}var we=br("length");function et(wt){return wt.split("")}function dt(wt){return wt.match(Ar)||[]}function Pt(wt,Yt,Nt){var Nn;return Nt(wt,function(Jn,xr,Ji){if(Yt(Jn,xr,Ji))return Nn=xr,!1}),Nn}function Ht(wt,Yt,Nt,Nn){for(var Jn=wt.length,xr=Nt+(Nn?1:-1);Nn?xr--:++xr<Jn;)if(Yt(wt[xr],xr,wt))return xr;return-1}function mn(wt,Yt,Nt){return Yt===Yt?Rs(wt,Yt,Nt):Ht(wt,$n,Nt)}function Bn(wt,Yt,Nt,Nn){for(var Jn=Nt-1,xr=wt.length;++Jn<xr;)if(Nn(wt[Jn],Yt))return Jn;return-1}function $n(wt){return wt!==wt}function or(wt,Yt){var Nt=wt==null?0:wt.length;return Nt?Ci(wt,Yt)/Nt:Ce}function br(wt){return function(Yt){return Yt==null?n:Yt[wt]}}function Hr(wt){return function(Yt){return wt==null?n:wt[Yt]}}function Yi(wt,Yt,Nt,Nn,Jn){return Jn(wt,function(xr,Ji,Ei){Nt=Nn?(Nn=!1,xr):Yt(Nt,xr,Ji,Ei)}),Nt}function yi(wt,Yt){var Nt=wt.length;for(wt.sort(Yt);Nt--;)wt[Nt]=wt[Nt].value;return wt}function Ci(wt,Yt){for(var Nt,Nn=-1,Jn=wt.length;++Nn<Jn;){var xr=Yt(wt[Nn]);xr!==n&&(Nt=Nt===n?xr:Nt+xr)}return Nt}function ws(wt,Yt){for(var Nt=-1,Nn=Array(wt);++Nt<wt;)Nn[Nt]=Yt(Nt);return Nn}function Ps(wt,Yt){return Si(Yt,function(Nt){return[Nt,wt[Nt]]})}function Ko(wt){return wt&&wt.slice(0,Ga(wt)+1).replace(Ut,"")}function Wr(wt){return function(Yt){return wt(Yt)}}function eo(wt,Yt){return Si(Yt,function(Nt){return wt[Nt]})}function Fl(wt,Yt){return wt.has(Yt)}function vo(wt,Yt){for(var Nt=-1,Nn=wt.length;++Nt<Nn&&mn(Yt,wt[Nt],0)>-1;);return Nt}function Au(wt,Yt){for(var Nt=wt.length;Nt--&&mn(Yt,wt[Nt],0)>-1;);return Nt}function Ma(wt,Yt){for(var Nt=wt.length,Nn=0;Nt--;)wt[Nt]===Yt&&++Nn;return Nn}var Qu=Hr(ml),vl=Hr(Mc);function yl(wt){return"\\"+Pu[wt]}function Ms(wt,Yt){return wt==null?n:wt[Yt]}function ka(wt){return Es.test(wt)}function Zo(wt){return vs.test(wt)}function Do(wt){for(var Yt,Nt=[];!(Yt=wt.next()).done;)Nt.push(Yt.value);return Nt}function jl(wt){var Yt=-1,Nt=Array(wt.size);return wt.forEach(function(Nn,Jn){Nt[++Yt]=[Jn,Nn]}),Nt}function to(wt,Yt){return function(Nt){return wt(Yt(Nt))}}function yo(wt,Yt){for(var Nt=-1,Nn=wt.length,Jn=0,xr=[];++Nt<Nn;){var Ji=wt[Nt];(Ji===Yt||Ji===d)&&(wt[Nt]=d,xr[Jn++]=Nt)}return xr}function bo(wt){var Yt=-1,Nt=Array(wt.size);return wt.forEach(function(Nn){Nt[++Yt]=Nn}),Nt}function Ac(wt){var Yt=-1,Nt=Array(wt.size);return wt.forEach(function(Nn){Nt[++Yt]=[Nn,Nn]}),Nt}function Rs(wt,Yt,Nt){for(var Nn=Nt-1,Jn=wt.length;++Nn<Jn;)if(wt[Nn]===Yt)return Nn;return-1}function Wa(wt,Yt,Nt){for(var Nn=Nt+1;Nn--;)if(wt[Nn]===Yt)return Nn;return Nn}function no(wt){return ka(wt)?io(wt):we(wt)}function ro(wt){return ka(wt)?Hs(wt):et(wt)}function Ga(wt){for(var Yt=wt.length;Yt--&&cn.test(wt.charAt(Yt)););return Yt}var qa=Hr(ou);function io(wt){for(var Yt=Va.lastIndex=0;Va.test(wt);)++Yt;return Yt}function Hs(wt){return wt.match(Va)||[]}function Aa(wt){return wt.match(vi)||[]}var Xo=function wt(Yt){Yt=Yt==null?ys:so.defaults(ys.Object(),Yt,so.pick(ys,Ju));var Nt=Yt.Array,Nn=Yt.Date,Jn=Yt.Error,xr=Yt.Function,Ji=Yt.Math,Ei=Yt.Object,du=Yt.RegExp,_o=Yt.String,Qi=Yt.TypeError,Ta=Nt.prototype,Ya=xr.prototype,Da=Ei.prototype,Oa=Yt["__core-js_shared__"],Na=Ya.toString,ti=Da.hasOwnProperty,ya=0,Ws=function(){var f=/[^.]+$/.exec(Oa&&Oa.keys&&Oa.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}(),Pi=Da.toString,Di=Na.call(Ei),xs=ys._,Hi=du("^"+Na.call(ti).replace(Gn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jo=Il?Yt.Buffer:n,Oo=Yt.Symbol,sa=Yt.Uint8Array,ec=Jo?Jo.allocUnsafe:n,Ia=to(Ei.getPrototypeOf,Ei),ks=Ei.create,$i=Da.propertyIsEnumerable,oo=Ta.splice,No=Oo?Oo.isConcatSpreadable:n,pr=Oo?Oo.iterator:n,Ka=Oo?Oo.toStringTag:n,Za=function(){try{var f=zd(Ei,"defineProperty");return f({},"",{}),f}catch{}}(),ba=Yt.clearTimeout!==ys.clearTimeout&&Yt.clearTimeout,wo=Nn&&Nn.now!==ys.Date.now&&Nn.now,ih=Yt.setTimeout!==ys.setTimeout&&Yt.setTimeout,Gs=Ji.ceil,qs=Ji.floor,_a=Ei.getOwnPropertySymbols,u=Jo?Jo.isBuffer:n,y=Yt.isFinite,P=Ta.join,H=to(Ei.keys,Ei),le=Ji.max,Pe=Ji.min,ut=Nn.now,Ot=Yt.parseInt,Wt=Ji.random,fn=Ta.reverse,Rn=zd(Yt,"DataView"),er=zd(Yt,"Map"),$r=zd(Yt,"Promise"),As=zd(Yt,"Set"),cs=zd(Yt,"WeakMap"),Ys=zd(Ei,"create"),es=cs&&new cs,Io={},sh=$d(Rn),Ba=$d(er),wa=$d($r),oa=$d(As),Od=$d(cs),Tu=Oo?Oo.prototype:n,bi=Tu?Tu.valueOf:n,ao=Tu?Tu.toString:n;function Ie(f){if(xo(f)&&!ri(f)&&!(f instanceof Gr)){if(f instanceof Ks)return f;if(ti.call(f,"__wrapped__"))return qw(f)}return new Ks(f)}var Bo=function(){function f(){}return function(b){if(!uo(b))return{};if(ks)return ks(b);f.prototype=b;var O=new f;return f.prototype=n,O}}();function tc(){}function Ks(f,b){this.__wrapped__=f,this.__actions__=[],this.__chain__=!!b,this.__index__=0,this.__values__=n}Ie.templateSettings={escape:Vr,evaluate:Vs,interpolate:ft,variable:"",imports:{_:Ie}},Ie.prototype=tc.prototype,Ie.prototype.constructor=Ie,Ks.prototype=Bo(tc.prototype),Ks.prototype.constructor=Ks;function Gr(f){this.__wrapped__=f,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=De,this.__views__=[]}function Vh(){var f=new Gr(this.__wrapped__);return f.__actions__=$l(this.__actions__),f.__dir__=this.__dir__,f.__filtered__=this.__filtered__,f.__iteratees__=$l(this.__iteratees__),f.__takeCount__=this.__takeCount__,f.__views__=$l(this.__views__),f}function Af(){if(this.__filtered__){var f=new Gr(this);f.__dir__=-1,f.__filtered__=!0}else f=this.clone(),f.__dir__*=-1;return f}function Uh(){var f=this.__wrapped__.value(),b=this.__dir__,O=ri(f),se=b<0,Le=O?f.length:0,Ve=JM(0,Le,this.__views__),ot=Ve.start,yt=Ve.end,At=yt-ot,pn=se?yt:ot-1,gn=this.__iteratees__,_n=gn.length,Un=0,cr=Pe(At,this.__takeCount__);if(!O||!se&&Le==At&&cr==At)return Du(f,this.__actions__);var Er=[];e:for(;At--&&Un<cr;){pn+=b;for(var gi=-1,Pr=f[pn];++gi<_n;){var Mi=gn[gi],Ni=Mi.iteratee,gu=Mi.type,xl=Ni(Pr);if(gu==j)Pr=xl;else if(!xl){if(gu==R)continue e;break e}}Er[Un++]=Pr}return Er}Gr.prototype=Bo(tc.prototype),Gr.prototype.constructor=Gr;function bl(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var se=f[b];this.set(se[0],se[1])}}function oh(){this.__data__=Ys?Ys(null):{},this.size=0}function Nd(f){var b=this.has(f)&&delete this.__data__[f];return this.size-=b?1:0,b}function Up(f){var b=this.__data__;if(Ys){var O=b[f];return O===l?n:O}return ti.call(b,f)?b[f]:n}function Tc(f){var b=this.__data__;return Ys?b[f]!==n:ti.call(b,f)}function Hh(f,b){var O=this.__data__;return this.size+=this.has(f)?0:1,O[f]=Ys&&b===n?l:b,this}bl.prototype.clear=oh,bl.prototype.delete=Nd,bl.prototype.get=Up,bl.prototype.has=Tc,bl.prototype.set=Hh;function fu(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var se=f[b];this.set(se[0],se[1])}}function Hp(){this.__data__=[],this.size=0}function Wh(f){var b=this.__data__,O=_t(b,f);if(O<0)return!1;var se=b.length-1;return O==se?b.pop():oo.call(b,O,1),--this.size,!0}function Gh(f){var b=this.__data__,O=_t(b,f);return O<0?n:b[O][1]}function Tf(f){return _t(this.__data__,f)>-1}function Df(f,b){var O=this.__data__,se=_t(O,f);return se<0?(++this.size,O.push([f,b])):O[se][1]=b,this}fu.prototype.clear=Hp,fu.prototype.delete=Wh,fu.prototype.get=Gh,fu.prototype.has=Tf,fu.prototype.set=Df;function Xa(f){var b=-1,O=f==null?0:f.length;for(this.clear();++b<O;){var se=f[b];this.set(se[0],se[1])}}function Of(){this.size=0,this.__data__={hash:new bl,map:new(er||fu),string:new bl}}function Nf(f){var b=Qm(this,f).delete(f);return this.size-=b?1:0,b}function If(f){return Qm(this,f).get(f)}function w(f){return Qm(this,f).has(f)}function T(f,b){var O=Qm(this,f),se=O.size;return O.set(f,b),this.size+=O.size==se?0:1,this}Xa.prototype.clear=Of,Xa.prototype.delete=Nf,Xa.prototype.get=If,Xa.prototype.has=w,Xa.prototype.set=T;function q(f){var b=-1,O=f==null?0:f.length;for(this.__data__=new Xa;++b<O;)this.add(f[b])}function ue(f){return this.__data__.set(f,l),this}function xe(f){return this.__data__.has(f)}q.prototype.add=q.prototype.push=ue,q.prototype.has=xe;function Me(f){var b=this.__data__=new fu(f);this.size=b.size}function Ae(){this.__data__=new fu,this.size=0}function Ne(f){var b=this.__data__,O=b.delete(f);return this.size=b.size,O}function Re(f){return this.__data__.get(f)}function Ke(f){return this.__data__.has(f)}function gt(f,b){var O=this.__data__;if(O instanceof fu){var se=O.__data__;if(!er||se.length<i-1)return se.push([f,b]),this.size=++O.size,this;O=this.__data__=new Xa(se)}return O.set(f,b),this.size=O.size,this}Me.prototype.clear=Ae,Me.prototype.delete=Ne,Me.prototype.get=Re,Me.prototype.has=Ke,Me.prototype.set=gt;function Ft(f,b){var O=ri(f),se=!O&&Vd(f),Le=!O&&!se&&Yh(f),Ve=!O&&!se&&!Le&&Hf(f),ot=O||se||Le||Ve,yt=ot?ws(f.length,_o):[],At=yt.length;for(var pn in f)(b||ti.call(f,pn))&&!(ot&&(pn=="length"||Le&&(pn=="offset"||pn=="parent")||Ve&&(pn=="buffer"||pn=="byteLength"||pn=="byteOffset")||dh(pn,At)))&&yt.push(pn);return yt}function jt(f){var b=f.length;return b?f[Rd(0,b-1)]:n}function Ct(f,b){return e0($l(f),tr(b,0,f.length))}function Zt(f){return e0($l(f))}function Gt(f,b,O){(O!==n&&!ac(f[b],O)||O===n&&!(b in f))&&In(f,b,O)}function mt(f,b,O){var se=f[b];(!(ti.call(f,b)&&ac(se,O))||O===n&&!(b in f))&&In(f,b,O)}function _t(f,b){for(var O=f.length;O--;)if(ac(f[O][0],b))return O;return-1}function on(f,b,O,se){return U(f,function(Le,Ve,ot){b(se,Le,O(Le),ot)}),se}function yn(f,b){return f&&Nc(b,xa(b),f)}function ln(f,b){return f&&Nc(b,Ul(b),f)}function In(f,b,O){b=="__proto__"&&Za?Za(f,b,{configurable:!0,enumerable:!0,value:O,writable:!0}):f[b]=O}function On(f,b){for(var O=-1,se=b.length,Le=Nt(se),Ve=f==null;++O<se;)Le[O]=Ve?n:b1(f,b[O]);return Le}function tr(f,b,O){return f===f&&(O!==n&&(f=f<=O?f:O),b!==n&&(f=f>=b?f:b)),f}function h(f,b,O,se,Le,Ve){var ot,yt=b&p,At=b&v,pn=b&m;if(O&&(ot=Le?O(f,se,Le,Ve):O(f)),ot!==n)return ot;if(!uo(f))return f;var gn=ri(f);if(gn){if(ot=ek(f),!yt)return $l(f,ot)}else{var _n=Qa(f),Un=_n==Ye||_n==ge;if(Yh(f))return bw(f,yt);if(_n==Se||_n==he||Un&&!Le){if(ot=At||Un?{}:Fw(f),!yt)return At?UM(f,ln(ot,f)):VM(f,yn(ot,f))}else{if(!Yr[_n])return Le?f:{};ot=tk(f,_n,yt)}}Ve||(Ve=new Me);var cr=Ve.get(f);if(cr)return cr;Ve.set(f,ot),fx(f)?f.forEach(function(Pr){ot.add(h(Pr,b,O,Pr,f,Ve))}):hx(f)&&f.forEach(function(Pr,Mi){ot.set(Mi,h(Pr,b,O,Mi,f,Ve))});var Er=pn?At?s1:i1:At?Ul:xa,gi=gn?n:Er(f);return Us(gi||f,function(Pr,Mi){gi&&(Mi=Pr,Pr=f[Mi]),mt(ot,Mi,h(Pr,b,O,Mi,f,Ve))}),ot}function g(f){var b=xa(f);return function(O){return _(O,f,b)}}function _(f,b,O){var se=O.length;if(f==null)return!se;for(f=Ei(f);se--;){var Le=O[se],Ve=b[Le],ot=f[Le];if(ot===n&&!(Le in f)||!Ve(ot))return!1}return!0}function S(f,b,O){if(typeof f!="function")throw new Qi(o);return Kp(function(){f.apply(n,O)},b)}function M(f,b,O,se){var Le=-1,Ve=Bl,ot=!0,yt=f.length,At=[],pn=b.length;if(!yt)return At;O&&(b=Si(b,Wr(O))),se?(Ve=Rl,ot=!1):b.length>=i&&(Ve=Fl,ot=!1,b=new q(b));e:for(;++Le<yt;){var gn=f[Le],_n=O==null?gn:O(gn);if(gn=se||gn!==0?gn:0,ot&&_n===_n){for(var Un=pn;Un--;)if(b[Un]===_n)continue e;At.push(gn)}else Ve(b,_n,se)||At.push(gn)}return At}var U=Sw(tn),ne=Sw(wn,!0);function ae(f,b){var O=!0;return U(f,function(se,Le,Ve){return O=!!b(se,Le,Ve),O}),O}function ye(f,b,O){for(var se=-1,Le=f.length;++se<Le;){var Ve=f[se],ot=b(Ve);if(ot!=null&&(yt===n?ot===ot&&!pu(ot):O(ot,yt)))var yt=ot,At=Ve}return At}function Ee(f,b,O,se){var Le=f.length;for(O=di(O),O<0&&(O=-O>Le?0:Le+O),se=se===n||se>Le?Le:di(se),se<0&&(se+=Le),se=O>se?0:gx(se);O<se;)f[O++]=b;return f}function nt(f,b){var O=[];return U(f,function(se,Le,Ve){b(se,Le,Ve)&&O.push(se)}),O}function qe(f,b,O,se,Le){var Ve=-1,ot=f.length;for(O||(O=rk),Le||(Le=[]);++Ve<ot;){var yt=f[Ve];b>0&&O(yt)?b>1?qe(yt,b-1,O,se,Le):Yo(Le,yt):se||(Le[Le.length]=yt)}return Le}var bt=Cw(),It=Cw(!0);function tn(f,b){return f&&bt(f,b,xa)}function wn(f,b){return f&&It(f,b,xa)}function Pn(f,b){return va(b,function(O){return fh(f[O])})}function dr(f,b){b=oc(b,f);for(var O=0,se=b.length;f!=null&&O<se;)f=f[Ic(b[O++])];return O&&O==se?f:n}function tt(f,b,O){var se=b(f);return ri(f)?se:Yo(se,O(f))}function st(f){return f==null?f===n?xt:fe:Ka&&Ka in Ei(f)?XM(f):ck(f)}function pt(f,b){return f>b}function zt(f,b){return f!=null&&ti.call(f,b)}function St(f,b){return f!=null&&b in Ei(f)}function Rt(f,b,O){return f>=Pe(b,O)&&f<le(b,O)}function be(f,b,O){for(var se=O?Rl:Bl,Le=f[0].length,Ve=f.length,ot=Ve,yt=Nt(Ve),At=1/0,pn=[];ot--;){var gn=f[ot];ot&&b&&(gn=Si(gn,Wr(b))),At=Pe(gn.length,At),yt[ot]=!O&&(b||Le>=120&&gn.length>=120)?new q(ot&&gn):n}gn=f[0];var _n=-1,Un=yt[0];e:for(;++_n<Le&&pn.length<At;){var cr=gn[_n],Er=b?b(cr):cr;if(cr=O||cr!==0?cr:0,!(Un?Fl(Un,Er):se(pn,Er,O))){for(ot=Ve;--ot;){var gi=yt[ot];if(!(gi?Fl(gi,Er):se(f[ot],Er,O)))continue e}Un&&Un.push(Er),pn.push(cr)}}return pn}function ke(f,b,O,se){return tn(f,function(Le,Ve,ot){b(se,O(Le),Ve,ot)}),se}function je(f,b,O){b=oc(b,f),f=Vw(f,b);var se=f==null?f:f[Ic(Iu(b))];return se==null?n:Li(se,f,O)}function Fe(f){return xo(f)&&st(f)==he}function Ue(f){return xo(f)&&st(f)==sn}function We(f){return xo(f)&&st(f)==J}function ct(f,b,O,se,Le){return f===b?!0:f==null||b==null||!xo(f)&&!xo(b)?f!==f&&b!==b:ht(f,b,O,se,ct,Le)}function ht(f,b,O,se,Le,Ve){var ot=ri(f),yt=ri(b),At=ot?ce:Qa(f),pn=yt?ce:Qa(b);At=At==he?Se:At,pn=pn==he?Se:pn;var gn=At==Se,_n=pn==Se,Un=At==pn;if(Un&&Yh(f)){if(!Yh(b))return!1;ot=!0,gn=!1}if(Un&&!gn)return Ve||(Ve=new Me),ot||Hf(f)?Iw(f,b,O,se,Le,Ve):KM(f,b,At,O,se,Le,Ve);if(!(O&x)){var cr=gn&&ti.call(f,"__wrapped__"),Er=_n&&ti.call(b,"__wrapped__");if(cr||Er){var gi=cr?f.value():f,Pr=Er?b.value():b;return Ve||(Ve=new Me),Le(gi,Pr,O,se,Ve)}}return Un?(Ve||(Ve=new Me),ZM(f,b,O,se,Le,Ve)):!1}function vt(f){return xo(f)&&Qa(f)==Q}function Mt(f,b,O,se){var Le=O.length,Ve=Le,ot=!se;if(f==null)return!Ve;for(f=Ei(f);Le--;){var yt=O[Le];if(ot&&yt[2]?yt[1]!==f[yt[0]]:!(yt[0]in f))return!1}for(;++Le<Ve;){yt=O[Le];var At=yt[0],pn=f[At],gn=yt[1];if(ot&&yt[2]){if(pn===n&&!(At in f))return!1}else{var _n=new Me;if(se)var Un=se(pn,gn,At,f,b,_n);if(!(Un===n?ct(gn,pn,x|E,se,_n):Un))return!1}}return!0}function kt(f){if(!uo(f)||sk(f))return!1;var b=fh(f)?Hi:yr;return b.test($d(f))}function hn(f){return xo(f)&&st(f)==$e}function Vn(f){return xo(f)&&Qa(f)==Je}function qn(f){return xo(f)&&o0(f.length)&&!!Lr[st(f)]}function nr(f){return typeof f=="function"?f:f==null?Hl:typeof f=="object"?ri(f)?nc(f[0],f[1]):Ro(f):Ex(f)}function _i(f){if(!Yp(f))return H(f);var b=[];for(var O in Ei(f))ti.call(f,O)&&O!="constructor"&&b.push(O);return b}function Oi(f){if(!uo(f))return uk(f);var b=Yp(f),O=[];for(var se in f)se=="constructor"&&(b||!ti.call(f,se))||O.push(se);return O}function ni(f,b){return f<b}function Wi(f,b){var O=-1,se=Vl(f)?Nt(f.length):[];return U(f,function(Le,Ve,ot){se[++O]=b(Le,Ve,ot)}),se}function Ro(f){var b=a1(f);return b.length==1&&b[0][2]?zw(b[0][0],b[0][1]):function(O){return O===f||Mt(O,f,b)}}function nc(f,b){return u1(f)&&jw(b)?zw(Ic(f),b):function(O){var se=b1(O,f);return se===n&&se===b?_1(O,f):ct(b,se,x|E)}}function Ra(f,b,O,se,Le){f!==b&&bt(b,function(Ve,ot){if(Le||(Le=new Me),uo(Ve))Id(f,b,ot,O,Ra,se,Le);else{var yt=se?se(h1(f,ot),Ve,ot+"",f,b,Le):n;yt===n&&(yt=Ve),Gt(f,ot,yt)}},Ul)}function Id(f,b,O,se,Le,Ve,ot){var yt=h1(f,O),At=h1(b,O),pn=ot.get(At);if(pn){Gt(f,O,pn);return}var gn=Ve?Ve(yt,At,O+"",f,b,ot):n,_n=gn===n;if(_n){var Un=ri(At),cr=!Un&&Yh(At),Er=!Un&&!cr&&Hf(At);gn=At,Un||cr||Er?ri(yt)?gn=yt:Fo(yt)?gn=$l(yt):cr?(_n=!1,gn=bw(At,!0)):Er?(_n=!1,gn=_w(At,!0)):gn=[]:Zp(At)||Vd(At)?(gn=yt,Vd(yt)?gn=mx(yt):(!uo(yt)||fh(yt))&&(gn=Fw(At))):_n=!1}_n&&(ot.set(At,gn),Le(gn,At,se,Ve,ot),ot.delete(At)),Gt(f,O,gn)}function _l(f,b){var O=f.length;if(O)return b+=b<0?O:0,dh(b,O)?f[b]:n}function Dc(f,b,O){b.length?b=Si(b,function(Ve){return ri(Ve)?function(ot){return dr(ot,Ve.length===1?Ve[0]:Ve)}:Ve}):b=[Hl];var se=-1;b=Si(b,Wr(Sr()));var Le=Wi(f,function(Ve,ot,yt){var At=Si(b,function(pn){return pn(Ve)});return{criteria:At,index:++se,value:Ve}});return yi(Le,function(Ve,ot){return $M(Ve,ot,O)})}function Fa(f,b){return lo(f,b,function(O,se){return _1(f,se)})}function lo(f,b,O){for(var se=-1,Le=b.length,Ve={};++se<Le;){var ot=b[se],yt=dr(f,ot);O(yt,ot)&&ah(Ve,oc(ot,f),yt)}return Ve}function Ls(f){return function(b){return dr(b,f)}}function Bf(f,b,O,se){var Le=se?Bn:mn,Ve=-1,ot=b.length,yt=f;for(f===b&&(b=$l(b)),O&&(yt=Si(f,Wr(O)));++Ve<ot;)for(var At=0,pn=b[Ve],gn=O?O(pn):pn;(At=Le(yt,gn,At,se))>-1;)yt!==f&&oo.call(yt,At,1),oo.call(f,At,1);return f}function Bd(f,b){for(var O=f?b.length:0,se=O-1;O--;){var Le=b[O];if(O==se||Le!==Ve){var Ve=Le;dh(Le)?oo.call(f,Le,1):lh(f,Le)}}return f}function Rd(f,b){return f+qs(Wt()*(b-f+1))}function Fd(f,b,O,se){for(var Le=-1,Ve=le(Gs((b-f)/(O||1)),0),ot=Nt(Ve);Ve--;)ot[se?Ve:++Le]=f,f+=O;return ot}function Rf(f,b){var O="";if(!f||b<1||b>oe)return O;do b%2&&(O+=f),b=qs(b/2),b&&(f+=f);while(b);return O}function hi(f,b){return d1($w(f,b,Hl),f+"")}function Ff(f){return jt(Wf(f))}function Vm(f,b){var O=Wf(f);return e0(O,tr(b,0,O.length))}function ah(f,b,O,se){if(!uo(f))return f;b=oc(b,f);for(var Le=-1,Ve=b.length,ot=Ve-1,yt=f;yt!=null&&++Le<Ve;){var At=Ic(b[Le]),pn=O;if(At==="__proto__"||At==="constructor"||At==="prototype")return f;if(Le!=ot){var gn=yt[At];pn=se?se(gn,At,yt):n,pn===n&&(pn=uo(gn)?gn:dh(b[Le+1])?[]:{})}mt(yt,At,pn),yt=yt[At]}return f}var rc=es?function(f,b){return es.set(f,b),f}:Hl,Um=Za?function(f,b){return Za(f,"toString",{configurable:!0,enumerable:!1,value:x1(b),writable:!0})}:Hl;function Hm(f){return e0(Wf(f))}function zl(f,b,O){var se=-1,Le=f.length;b<0&&(b=-b>Le?0:Le+b),O=O>Le?Le:O,O<0&&(O+=Le),Le=b>O?0:O-b>>>0,b>>>=0;for(var Ve=Nt(Le);++se<Le;)Ve[se]=f[se+b];return Ve}function Wm(f,b){var O;return U(f,function(se,Le,Ve){return O=b(se,Le,Ve),!O}),!!O}function ic(f,b,O){var se=0,Le=f==null?se:f.length;if(typeof b=="number"&&b===b&&Le<=G){for(;se<Le;){var Ve=se+Le>>>1,ot=f[Ve];ot!==null&&!pu(ot)&&(O?ot<=b:ot<b)?se=Ve+1:Le=Ve}return Le}return Wp(f,b,Hl,O)}function Wp(f,b,O,se){var Le=0,Ve=f==null?0:f.length;if(Ve===0)return 0;b=O(b);for(var ot=b!==b,yt=b===null,At=pu(b),pn=b===n;Le<Ve;){var gn=qs((Le+Ve)/2),_n=O(f[gn]),Un=_n!==n,cr=_n===null,Er=_n===_n,gi=pu(_n);if(ot)var Pr=se||Er;else pn?Pr=Er&&(se||Un):yt?Pr=Er&&Un&&(se||!cr):At?Pr=Er&&Un&&!cr&&(se||!gi):cr||gi?Pr=!1:Pr=se?_n<=b:_n<b;Pr?Le=gn+1:Ve=gn}return Pe(Ve,Z)}function Gp(f,b){for(var O=-1,se=f.length,Le=0,Ve=[];++O<se;){var ot=f[O],yt=b?b(ot):ot;if(!O||!ac(yt,At)){var At=yt;Ve[Le++]=ot===0?0:ot}}return Ve}function Gm(f){return typeof f=="number"?f:pu(f)?Ce:+f}function Ja(f){if(typeof f=="string")return f;if(ri(f))return Si(f,Ja)+"";if(pu(f))return ao?ao.call(f):"";var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function Oc(f,b,O){var se=-1,Le=Bl,Ve=f.length,ot=!0,yt=[],At=yt;if(O)ot=!1,Le=Rl;else if(Ve>=i){var pn=b?null:qM(f);if(pn)return bo(pn);ot=!1,Le=Fl,At=new q}else At=b?[]:yt;e:for(;++se<Ve;){var gn=f[se],_n=b?b(gn):gn;if(gn=O||gn!==0?gn:0,ot&&_n===_n){for(var Un=At.length;Un--;)if(At[Un]===_n)continue e;b&&At.push(_n),yt.push(gn)}else Le(At,_n,O)||(At!==yt&&At.push(_n),yt.push(gn))}return yt}function lh(f,b){return b=oc(b,f),f=Vw(f,b),f==null||delete f[Ic(Iu(b))]}function jf(f,b,O,se){return ah(f,b,O(dr(f,b)),se)}function uh(f,b,O,se){for(var Le=f.length,Ve=se?Le:-1;(se?Ve--:++Ve<Le)&&b(f[Ve],Ve,f););return O?zl(f,se?0:Ve,se?Ve+1:Le):zl(f,se?Ve+1:0,se?Le:Ve)}function Du(f,b){var O=f;return O instanceof Gr&&(O=O.value()),Ha(b,function(se,Le){return Le.func.apply(Le.thisArg,Yo([se],Le.args))},O)}function Ou(f,b,O){var se=f.length;if(se<2)return se?Oc(f[0]):[];for(var Le=-1,Ve=Nt(se);++Le<se;)for(var ot=f[Le],yt=-1;++yt<se;)yt!=Le&&(Ve[Le]=M(Ve[Le]||ot,f[yt],b,O));return Oc(qe(Ve,1),b,O)}function sc(f,b,O){for(var se=-1,Le=f.length,Ve=b.length,ot={};++se<Le;){var yt=se<Ve?b[se]:n;O(ot,f[se],yt)}return ot}function qh(f){return Fo(f)?f:[]}function jd(f){return typeof f=="function"?f:Hl}function oc(f,b){return ri(f)?f:u1(f,b)?[f]:Gw(ss(f))}var e1=hi;function Nu(f,b,O){var se=f.length;return O=O===n?se:O,!b&&O>=se?f:zl(f,b,O)}var zf=ba||function(f){return ys.clearTimeout(f)};function bw(f,b){if(b)return f.slice();var O=f.length,se=ec?ec(O):new f.constructor(O);return f.copy(se),se}function t1(f){var b=new f.constructor(f.byteLength);return new sa(b).set(new sa(f)),b}function FM(f,b){var O=b?t1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.byteLength)}function jM(f){var b=new f.constructor(f.source,mi.exec(f));return b.lastIndex=f.lastIndex,b}function zM(f){return bi?Ei(bi.call(f)):{}}function _w(f,b){var O=b?t1(f.buffer):f.buffer;return new f.constructor(O,f.byteOffset,f.length)}function ww(f,b){if(f!==b){var O=f!==n,se=f===null,Le=f===f,Ve=pu(f),ot=b!==n,yt=b===null,At=b===b,pn=pu(b);if(!yt&&!pn&&!Ve&&f>b||Ve&&ot&&At&&!yt&&!pn||se&&ot&&At||!O&&At||!Le)return 1;if(!se&&!Ve&&!pn&&f<b||pn&&O&&Le&&!se&&!Ve||yt&&O&&Le||!ot&&Le||!At)return-1}return 0}function $M(f,b,O){for(var se=-1,Le=f.criteria,Ve=b.criteria,ot=Le.length,yt=O.length;++se<ot;){var At=ww(Le[se],Ve[se]);if(At){if(se>=yt)return At;var pn=O[se];return At*(pn=="desc"?-1:1)}}return f.index-b.index}function xw(f,b,O,se){for(var Le=-1,Ve=f.length,ot=O.length,yt=-1,At=b.length,pn=le(Ve-ot,0),gn=Nt(At+pn),_n=!se;++yt<At;)gn[yt]=b[yt];for(;++Le<ot;)(_n||Le<Ve)&&(gn[O[Le]]=f[Le]);for(;pn--;)gn[yt++]=f[Le++];return gn}function Lw(f,b,O,se){for(var Le=-1,Ve=f.length,ot=-1,yt=O.length,At=-1,pn=b.length,gn=le(Ve-yt,0),_n=Nt(gn+pn),Un=!se;++Le<gn;)_n[Le]=f[Le];for(var cr=Le;++At<pn;)_n[cr+At]=b[At];for(;++ot<yt;)(Un||Le<Ve)&&(_n[cr+O[ot]]=f[Le++]);return _n}function $l(f,b){var O=-1,se=f.length;for(b||(b=Nt(se));++O<se;)b[O]=f[O];return b}function Nc(f,b,O,se){var Le=!O;O||(O={});for(var Ve=-1,ot=b.length;++Ve<ot;){var yt=b[Ve],At=se?se(O[yt],f[yt],yt,O,f):n;At===n&&(At=f[yt]),Le?In(O,yt,At):mt(O,yt,At)}return O}function VM(f,b){return Nc(f,l1(f),b)}function UM(f,b){return Nc(f,Bw(f),b)}function qm(f,b){return function(O,se){var Le=ri(O)?kc:on,Ve=b?b():{};return Le(O,f,Sr(se,2),Ve)}}function $f(f){return hi(function(b,O){var se=-1,Le=O.length,Ve=Le>1?O[Le-1]:n,ot=Le>2?O[2]:n;for(Ve=f.length>3&&typeof Ve=="function"?(Le--,Ve):n,ot&&wl(O[0],O[1],ot)&&(Ve=Le<3?n:Ve,Le=1),b=Ei(b);++se<Le;){var yt=O[se];yt&&f(b,yt,se,Ve)}return b})}function Sw(f,b){return function(O,se){if(O==null)return O;if(!Vl(O))return f(O,se);for(var Le=O.length,Ve=b?Le:-1,ot=Ei(O);(b?Ve--:++Ve<Le)&&se(ot[Ve],Ve,ot)!==!1;);return O}}function Cw(f){return function(b,O,se){for(var Le=-1,Ve=Ei(b),ot=se(b),yt=ot.length;yt--;){var At=ot[f?yt:++Le];if(O(Ve[At],At,Ve)===!1)break}return b}}function HM(f,b,O){var se=b&A,Le=qp(f);function Ve(){var ot=this&&this!==ys&&this instanceof Ve?Le:f;return ot.apply(se?O:this,arguments)}return Ve}function Ew(f){return function(b){b=ss(b);var O=ka(b)?ro(b):n,se=O?O[0]:b.charAt(0),Le=O?Nu(O,1).join(""):b.slice(1);return se[f]()+Le}}function Vf(f){return function(b){return Ha(Sx(Lx(b).replace(Ur,"")),f,"")}}function qp(f){return function(){var b=arguments;switch(b.length){case 0:return new f;case 1:return new f(b[0]);case 2:return new f(b[0],b[1]);case 3:return new f(b[0],b[1],b[2]);case 4:return new f(b[0],b[1],b[2],b[3]);case 5:return new f(b[0],b[1],b[2],b[3],b[4]);case 6:return new f(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new f(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var O=Bo(f.prototype),se=f.apply(O,b);return uo(se)?se:O}}function WM(f,b,O){var se=qp(f);function Le(){for(var Ve=arguments.length,ot=Nt(Ve),yt=Ve,At=Uf(Le);yt--;)ot[yt]=arguments[yt];var pn=Ve<3&&ot[0]!==At&&ot[Ve-1]!==At?[]:yo(ot,At);if(Ve-=pn.length,Ve<O)return Tw(f,b,Ym,Le.placeholder,n,ot,pn,n,n,O-Ve);var gn=this&&this!==ys&&this instanceof Le?se:f;return Li(gn,this,ot)}return Le}function Pw(f){return function(b,O,se){var Le=Ei(b);if(!Vl(b)){var Ve=Sr(O,3);b=xa(b),O=function(yt){return Ve(Le[yt],yt,Le)}}var ot=f(b,O,se);return ot>-1?Le[Ve?b[ot]:ot]:n}}function Mw(f){return hh(function(b){var O=b.length,se=O,Le=Ks.prototype.thru;for(f&&b.reverse();se--;){var Ve=b[se];if(typeof Ve!="function")throw new Qi(o);if(Le&&!ot&&Jm(Ve)=="wrapper")var ot=new Ks([],!0)}for(se=ot?se:O;++se<O;){Ve=b[se];var yt=Jm(Ve),At=yt=="wrapper"?o1(Ve):n;At&&c1(At[0])&&At[1]==(pe|$|te|I)&&!At[4].length&&At[9]==1?ot=ot[Jm(At[0])].apply(ot,At[3]):ot=Ve.length==1&&c1(Ve)?ot[yt]():ot.thru(Ve)}return function(){var pn=arguments,gn=pn[0];if(ot&&pn.length==1&&ri(gn))return ot.plant(gn).value();for(var _n=0,Un=O?b[_n].apply(this,pn):gn;++_n<O;)Un=b[_n].call(this,Un);return Un}})}function Ym(f,b,O,se,Le,Ve,ot,yt,At,pn){var gn=b&pe,_n=b&A,Un=b&k,cr=b&($|Y),Er=b&z,gi=Un?n:qp(f);function Pr(){for(var Mi=arguments.length,Ni=Nt(Mi),gu=Mi;gu--;)Ni[gu]=arguments[gu];if(cr)var xl=Uf(Pr),mu=Ma(Ni,xl);if(se&&(Ni=xw(Ni,se,Le,cr)),Ve&&(Ni=Lw(Ni,Ve,ot,cr)),Mi-=mu,cr&&Mi<pn){var jo=yo(Ni,xl);return Tw(f,b,Ym,Pr.placeholder,O,Ni,jo,yt,At,pn-Mi)}var lc=_n?O:this,gh=Un?lc[f]:f;return Mi=Ni.length,yt?Ni=hk(Ni,yt):Er&&Mi>1&&Ni.reverse(),gn&&At<Mi&&(Ni.length=At),this&&this!==ys&&this instanceof Pr&&(gh=gi||qp(gh)),gh.apply(lc,Ni)}return Pr}function kw(f,b){return function(O,se){return ke(O,f,b(se),{})}}function Km(f,b){return function(O,se){var Le;if(O===n&&se===n)return b;if(O!==n&&(Le=O),se!==n){if(Le===n)return se;typeof O=="string"||typeof se=="string"?(O=Ja(O),se=Ja(se)):(O=Gm(O),se=Gm(se)),Le=f(O,se)}return Le}}function n1(f){return hh(function(b){return b=Si(b,Wr(Sr())),hi(function(O){var se=this;return f(b,function(Le){return Li(Le,se,O)})})})}function Zm(f,b){b=b===n?" ":Ja(b);var O=b.length;if(O<2)return O?Rf(b,f):b;var se=Rf(b,Gs(f/no(b)));return ka(b)?Nu(ro(se),0,f).join(""):se.slice(0,f)}function GM(f,b,O,se){var Le=b&A,Ve=qp(f);function ot(){for(var yt=-1,At=arguments.length,pn=-1,gn=se.length,_n=Nt(gn+At),Un=this&&this!==ys&&this instanceof ot?Ve:f;++pn<gn;)_n[pn]=se[pn];for(;At--;)_n[pn++]=arguments[++yt];return Li(Un,Le?O:this,_n)}return ot}function Aw(f){return function(b,O,se){return se&&typeof se!="number"&&wl(b,O,se)&&(O=se=n),b=ph(b),O===n?(O=b,b=0):O=ph(O),se=se===n?b<O?1:-1:ph(se),Fd(b,O,se,f)}}function Xm(f){return function(b,O){return typeof b=="string"&&typeof O=="string"||(b=Bu(b),O=Bu(O)),f(b,O)}}function Tw(f,b,O,se,Le,Ve,ot,yt,At,pn){var gn=b&$,_n=gn?ot:n,Un=gn?n:ot,cr=gn?Ve:n,Er=gn?n:Ve;b|=gn?te:me,b&=~(gn?me:te),b&D||(b&=-4);var gi=[f,b,Le,cr,_n,Er,Un,yt,At,pn],Pr=O.apply(n,gi);return c1(f)&&Uw(Pr,gi),Pr.placeholder=se,Hw(Pr,f,b)}function r1(f){var b=Ji[f];return function(O,se){if(O=Bu(O),se=se==null?0:Pe(di(se),292),se&&y(O)){var Le=(ss(O)+"e").split("e"),Ve=b(Le[0]+"e"+(+Le[1]+se));return Le=(ss(Ve)+"e").split("e"),+(Le[0]+"e"+(+Le[1]-se))}return b(O)}}var qM=As&&1/bo(new As([,-0]))[1]==X?function(f){return new As(f)}:C1;function Dw(f){return function(b){var O=Qa(b);return O==Q?jl(b):O==Je?Ac(b):Ps(b,f(b))}}function ch(f,b,O,se,Le,Ve,ot,yt){var At=b&k;if(!At&&typeof f!="function")throw new Qi(o);var pn=se?se.length:0;if(pn||(b&=-97,se=Le=n),ot=ot===n?ot:le(di(ot),0),yt=yt===n?yt:di(yt),pn-=Le?Le.length:0,b&me){var gn=se,_n=Le;se=Le=n}var Un=At?n:o1(f),cr=[f,b,O,se,Le,gn,_n,Ve,ot,yt];if(Un&&lk(cr,Un),f=cr[0],b=cr[1],O=cr[2],se=cr[3],Le=cr[4],yt=cr[9]=cr[9]===n?At?0:f.length:le(cr[9]-pn,0),!yt&&b&($|Y)&&(b&=-25),!b||b==A)var Er=HM(f,b,O);else b==$||b==Y?Er=WM(f,b,yt):(b==te||b==(A|te))&&!Le.length?Er=GM(f,b,O,se):Er=Ym.apply(n,cr);var gi=Un?rc:Uw;return Hw(gi(Er,cr),f,b)}function Ow(f,b,O,se){return f===n||ac(f,Da[O])&&!ti.call(se,O)?b:f}function Nw(f,b,O,se,Le,Ve){return uo(f)&&uo(b)&&(Ve.set(b,f),Ra(f,b,n,Nw,Ve),Ve.delete(b)),f}function YM(f){return Zp(f)?n:f}function Iw(f,b,O,se,Le,Ve){var ot=O&x,yt=f.length,At=b.length;if(yt!=At&&!(ot&&At>yt))return!1;var pn=Ve.get(f),gn=Ve.get(b);if(pn&&gn)return pn==b&&gn==f;var _n=-1,Un=!0,cr=O&E?new q:n;for(Ve.set(f,b),Ve.set(b,f);++_n<yt;){var Er=f[_n],gi=b[_n];if(se)var Pr=ot?se(gi,Er,_n,b,f,Ve):se(Er,gi,_n,f,b,Ve);if(Pr!==n){if(Pr)continue;Un=!1;break}if(cr){if(!F(b,function(Mi,Ni){if(!Fl(cr,Ni)&&(Er===Mi||Le(Er,Mi,O,se,Ve)))return cr.push(Ni)})){Un=!1;break}}else if(!(Er===gi||Le(Er,gi,O,se,Ve))){Un=!1;break}}return Ve.delete(f),Ve.delete(b),Un}function KM(f,b,O,se,Le,Ve,ot){switch(O){case an:if(f.byteLength!=b.byteLength||f.byteOffset!=b.byteOffset)return!1;f=f.buffer,b=b.buffer;case sn:return!(f.byteLength!=b.byteLength||!Ve(new sa(f),new sa(b)));case ee:case J:case ie:return ac(+f,+b);case Te:return f.name==b.name&&f.message==b.message;case $e:case He:return f==b+"";case Q:var yt=jl;case Je:var At=se&x;if(yt||(yt=bo),f.size!=b.size&&!At)return!1;var pn=ot.get(f);if(pn)return pn==b;se|=E,ot.set(f,b);var gn=Iw(yt(f),yt(b),se,Le,Ve,ot);return ot.delete(f),gn;case Ge:if(bi)return bi.call(f)==bi.call(b)}return!1}function ZM(f,b,O,se,Le,Ve){var ot=O&x,yt=i1(f),At=yt.length,pn=i1(b),gn=pn.length;if(At!=gn&&!ot)return!1;for(var _n=At;_n--;){var Un=yt[_n];if(!(ot?Un in b:ti.call(b,Un)))return!1}var cr=Ve.get(f),Er=Ve.get(b);if(cr&&Er)return cr==b&&Er==f;var gi=!0;Ve.set(f,b),Ve.set(b,f);for(var Pr=ot;++_n<At;){Un=yt[_n];var Mi=f[Un],Ni=b[Un];if(se)var gu=ot?se(Ni,Mi,Un,b,f,Ve):se(Mi,Ni,Un,f,b,Ve);if(!(gu===n?Mi===Ni||Le(Mi,Ni,O,se,Ve):gu)){gi=!1;break}Pr||(Pr=Un=="constructor")}if(gi&&!Pr){var xl=f.constructor,mu=b.constructor;xl!=mu&&"constructor"in f&&"constructor"in b&&!(typeof xl=="function"&&xl instanceof xl&&typeof mu=="function"&&mu instanceof mu)&&(gi=!1)}return Ve.delete(f),Ve.delete(b),gi}function hh(f){return d1($w(f,n,Zw),f+"")}function i1(f){return tt(f,xa,l1)}function s1(f){return tt(f,Ul,Bw)}var o1=es?function(f){return es.get(f)}:C1;function Jm(f){for(var b=f.name+"",O=Io[b],se=ti.call(Io,b)?O.length:0;se--;){var Le=O[se],Ve=Le.func;if(Ve==null||Ve==f)return Le.name}return b}function Uf(f){var b=ti.call(Ie,"placeholder")?Ie:f;return b.placeholder}function Sr(){var f=Ie.iteratee||L1;return f=f===L1?nr:f,arguments.length?f(arguments[0],arguments[1]):f}function Qm(f,b){var O=f.__data__;return ik(b)?O[typeof b=="string"?"string":"hash"]:O.map}function a1(f){for(var b=xa(f),O=b.length;O--;){var se=b[O],Le=f[se];b[O]=[se,Le,jw(Le)]}return b}function zd(f,b){var O=Ms(f,b);return kt(O)?O:n}function XM(f){var b=ti.call(f,Ka),O=f[Ka];try{f[Ka]=n;var se=!0}catch{}var Le=Pi.call(f);return se&&(b?f[Ka]=O:delete f[Ka]),Le}var l1=_a?function(f){return f==null?[]:(f=Ei(f),va(_a(f),function(b){return $i.call(f,b)}))}:E1,Bw=_a?function(f){for(var b=[];f;)Yo(b,l1(f)),f=Ia(f);return b}:E1,Qa=st;(Rn&&Qa(new Rn(new ArrayBuffer(1)))!=an||er&&Qa(new er)!=Q||$r&&Qa($r.resolve())!=de||As&&Qa(new As)!=Je||cs&&Qa(new cs)!=Et)&&(Qa=function(f){var b=st(f),O=b==Se?f.constructor:n,se=O?$d(O):"";if(se)switch(se){case sh:return an;case Ba:return Q;case wa:return de;case oa:return Je;case Od:return Et}return b});function JM(f,b,O){for(var se=-1,Le=O.length;++se<Le;){var Ve=O[se],ot=Ve.size;switch(Ve.type){case"drop":f+=ot;break;case"dropRight":b-=ot;break;case"take":b=Pe(b,f+ot);break;case"takeRight":f=le(f,b-ot);break}}return{start:f,end:b}}function QM(f){var b=f.match(qt);return b?b[1].split(Dn):[]}function Rw(f,b,O){b=oc(b,f);for(var se=-1,Le=b.length,Ve=!1;++se<Le;){var ot=Ic(b[se]);if(!(Ve=f!=null&&O(f,ot)))break;f=f[ot]}return Ve||++se!=Le?Ve:(Le=f==null?0:f.length,!!Le&&o0(Le)&&dh(ot,Le)&&(ri(f)||Vd(f)))}function ek(f){var b=f.length,O=new f.constructor(b);return b&&typeof f[0]=="string"&&ti.call(f,"index")&&(O.index=f.index,O.input=f.input),O}function Fw(f){return typeof f.constructor=="function"&&!Yp(f)?Bo(Ia(f)):{}}function tk(f,b,O){var se=f.constructor;switch(b){case sn:return t1(f);case ee:case J:return new se(+f);case an:return FM(f,O);case Qe:case at:case it:case Bt:case Qt:case Tn:case xn:case An:case Kn:return _w(f,O);case Q:return new se;case ie:case He:return new se(f);case $e:return jM(f);case Je:return new se;case Ge:return zM(f)}}function nk(f,b){var O=b.length;if(!O)return f;var se=O-1;return b[se]=(O>1?"& ":"")+b[se],b=b.join(O>2?", ":" "),f.replace(lt,`{
/* [wrapped with `+b+`] */
`)}function rk(f){return ri(f)||Vd(f)||!!(No&&f&&f[No])}function dh(f,b){var O=typeof f;return b=b??oe,!!b&&(O=="number"||O!="symbol"&&_r.test(f))&&f>-1&&f%1==0&&f<b}function wl(f,b,O){if(!uo(O))return!1;var se=typeof b;return(se=="number"?Vl(O)&&dh(b,O.length):se=="string"&&b in O)?ac(O[b],f):!1}function u1(f,b){if(ri(f))return!1;var O=typeof f;return O=="number"||O=="symbol"||O=="boolean"||f==null||pu(f)?!0:$t.test(f)||!rt.test(f)||b!=null&&f in Ei(b)}function ik(f){var b=typeof f;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?f!=="__proto__":f===null}function c1(f){var b=Jm(f),O=Ie[b];if(typeof O!="function"||!(b in Gr.prototype))return!1;if(f===O)return!0;var se=o1(O);return!!se&&f===se[0]}function sk(f){return!!Ws&&Ws in f}var ok=Oa?fh:P1;function Yp(f){var b=f&&f.constructor,O=typeof b=="function"&&b.prototype||Da;return f===O}function jw(f){return f===f&&!uo(f)}function zw(f,b){return function(O){return O==null?!1:O[f]===b&&(b!==n||f in Ei(O))}}function ak(f){var b=i0(f,function(se){return O.size===c&&O.clear(),se}),O=b.cache;return b}function lk(f,b){var O=f[1],se=b[1],Le=O|se,Ve=Le<(A|k|pe),ot=se==pe&&O==$||se==pe&&O==I&&f[7].length<=b[8]||se==(pe|I)&&b[7].length<=b[8]&&O==$;if(!(Ve||ot))return f;se&A&&(f[2]=b[2],Le|=O&A?0:D);var yt=b[3];if(yt){var At=f[3];f[3]=At?xw(At,yt,b[4]):yt,f[4]=At?yo(f[3],d):b[4]}return yt=b[5],yt&&(At=f[5],f[5]=At?Lw(At,yt,b[6]):yt,f[6]=At?yo(f[5],d):b[6]),yt=b[7],yt&&(f[7]=yt),se&pe&&(f[8]=f[8]==null?b[8]:Pe(f[8],b[8])),f[9]==null&&(f[9]=b[9]),f[0]=b[0],f[1]=Le,f}function uk(f){var b=[];if(f!=null)for(var O in Ei(f))b.push(O);return b}function ck(f){return Pi.call(f)}function $w(f,b,O){return b=le(b===n?f.length-1:b,0),function(){for(var se=arguments,Le=-1,Ve=le(se.length-b,0),ot=Nt(Ve);++Le<Ve;)ot[Le]=se[b+Le];Le=-1;for(var yt=Nt(b+1);++Le<b;)yt[Le]=se[Le];return yt[b]=O(ot),Li(f,this,yt)}}function Vw(f,b){return b.length<2?f:dr(f,zl(b,0,-1))}function hk(f,b){for(var O=f.length,se=Pe(b.length,O),Le=$l(f);se--;){var Ve=b[se];f[se]=dh(Ve,O)?Le[Ve]:n}return f}function h1(f,b){if(!(b==="constructor"&&typeof f[b]=="function")&&b!="__proto__")return f[b]}var Uw=Ww(rc),Kp=ih||function(f,b){return ys.setTimeout(f,b)},d1=Ww(Um);function Hw(f,b,O){var se=b+"";return d1(f,nk(se,dk(QM(se),O)))}function Ww(f){var b=0,O=0;return function(){var se=ut(),Le=V-(se-O);if(O=se,Le>0){if(++b>=B)return arguments[0]}else b=0;return f.apply(n,arguments)}}function e0(f,b){var O=-1,se=f.length,Le=se-1;for(b=b===n?se:b;++O<b;){var Ve=Rd(O,Le),ot=f[Ve];f[Ve]=f[O],f[O]=ot}return f.length=b,f}var Gw=ak(function(f){var b=[];return f.charCodeAt(0)===46&&b.push(""),f.replace(Jt,function(O,se,Le,Ve){b.push(Le?Ve.replace(zn,"$1"):se||O)}),b});function Ic(f){if(typeof f=="string"||pu(f))return f;var b=f+"";return b=="0"&&1/f==-1/0?"-0":b}function $d(f){if(f!=null){try{return Na.call(f)}catch{}try{return f+""}catch{}}return""}function dk(f,b){return Us(re,function(O){var se="_."+O[0];b&O[1]&&!Bl(f,se)&&f.push(se)}),f.sort()}function qw(f){if(f instanceof Gr)return f.clone();var b=new Ks(f.__wrapped__,f.__chain__);return b.__actions__=$l(f.__actions__),b.__index__=f.__index__,b.__values__=f.__values__,b}function fk(f,b,O){(O?wl(f,b,O):b===n)?b=1:b=le(di(b),0);var se=f==null?0:f.length;if(!se||b<1)return[];for(var Le=0,Ve=0,ot=Nt(Gs(se/b));Le<se;)ot[Ve++]=zl(f,Le,Le+=b);return ot}function pk(f){for(var b=-1,O=f==null?0:f.length,se=0,Le=[];++b<O;){var Ve=f[b];Ve&&(Le[se++]=Ve)}return Le}function gk(){var f=arguments.length;if(!f)return[];for(var b=Nt(f-1),O=arguments[0],se=f;se--;)b[se-1]=arguments[se];return Yo(ri(O)?$l(O):[O],qe(b,1))}var mk=hi(function(f,b){return Fo(f)?M(f,qe(b,1,Fo,!0)):[]}),vk=hi(function(f,b){var O=Iu(b);return Fo(O)&&(O=n),Fo(f)?M(f,qe(b,1,Fo,!0),Sr(O,2)):[]}),yk=hi(function(f,b){var O=Iu(b);return Fo(O)&&(O=n),Fo(f)?M(f,qe(b,1,Fo,!0),n,O):[]});function bk(f,b,O){var se=f==null?0:f.length;return se?(b=O||b===n?1:di(b),zl(f,b<0?0:b,se)):[]}function _k(f,b,O){var se=f==null?0:f.length;return se?(b=O||b===n?1:di(b),b=se-b,zl(f,0,b<0?0:b)):[]}function wk(f,b){return f&&f.length?uh(f,Sr(b,3),!0,!0):[]}function xk(f,b){return f&&f.length?uh(f,Sr(b,3),!0):[]}function Lk(f,b,O,se){var Le=f==null?0:f.length;return Le?(O&&typeof O!="number"&&wl(f,b,O)&&(O=0,se=Le),Ee(f,b,O,se)):[]}function Yw(f,b,O){var se=f==null?0:f.length;if(!se)return-1;var Le=O==null?0:di(O);return Le<0&&(Le=le(se+Le,0)),Ht(f,Sr(b,3),Le)}function Kw(f,b,O){var se=f==null?0:f.length;if(!se)return-1;var Le=se-1;return O!==n&&(Le=di(O),Le=O<0?le(se+Le,0):Pe(Le,se-1)),Ht(f,Sr(b,3),Le,!0)}function Zw(f){var b=f==null?0:f.length;return b?qe(f,1):[]}function Sk(f){var b=f==null?0:f.length;return b?qe(f,X):[]}function Ck(f,b){var O=f==null?0:f.length;return O?(b=b===n?1:di(b),qe(f,b)):[]}function Ek(f){for(var b=-1,O=f==null?0:f.length,se={};++b<O;){var Le=f[b];se[Le[0]]=Le[1]}return se}function Xw(f){return f&&f.length?f[0]:n}function Pk(f,b,O){var se=f==null?0:f.length;if(!se)return-1;var Le=O==null?0:di(O);return Le<0&&(Le=le(se+Le,0)),mn(f,b,Le)}function Mk(f){var b=f==null?0:f.length;return b?zl(f,0,-1):[]}var kk=hi(function(f){var b=Si(f,qh);return b.length&&b[0]===f[0]?be(b):[]}),Ak=hi(function(f){var b=Iu(f),O=Si(f,qh);return b===Iu(O)?b=n:O.pop(),O.length&&O[0]===f[0]?be(O,Sr(b,2)):[]}),Tk=hi(function(f){var b=Iu(f),O=Si(f,qh);return b=typeof b=="function"?b:n,b&&O.pop(),O.length&&O[0]===f[0]?be(O,n,b):[]});function Dk(f,b){return f==null?"":P.call(f,b)}function Iu(f){var b=f==null?0:f.length;return b?f[b-1]:n}function Ok(f,b,O){var se=f==null?0:f.length;if(!se)return-1;var Le=se;return O!==n&&(Le=di(O),Le=Le<0?le(se+Le,0):Pe(Le,se-1)),b===b?Wa(f,b,Le):Ht(f,$n,Le,!0)}function Nk(f,b){return f&&f.length?_l(f,di(b)):n}var Ik=hi(Jw);function Jw(f,b){return f&&f.length&&b&&b.length?Bf(f,b):f}function Bk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,Sr(O,2)):f}function Rk(f,b,O){return f&&f.length&&b&&b.length?Bf(f,b,n,O):f}var Fk=hh(function(f,b){var O=f==null?0:f.length,se=On(f,b);return Bd(f,Si(b,function(Le){return dh(Le,O)?+Le:Le}).sort(ww)),se});function jk(f,b){var O=[];if(!(f&&f.length))return O;var se=-1,Le=[],Ve=f.length;for(b=Sr(b,3);++se<Ve;){var ot=f[se];b(ot,se,f)&&(O.push(ot),Le.push(se))}return Bd(f,Le),O}function f1(f){return f==null?f:fn.call(f)}function zk(f,b,O){var se=f==null?0:f.length;return se?(O&&typeof O!="number"&&wl(f,b,O)?(b=0,O=se):(b=b==null?0:di(b),O=O===n?se:di(O)),zl(f,b,O)):[]}function $k(f,b){return ic(f,b)}function Vk(f,b,O){return Wp(f,b,Sr(O,2))}function Uk(f,b){var O=f==null?0:f.length;if(O){var se=ic(f,b);if(se<O&&ac(f[se],b))return se}return-1}function Hk(f,b){return ic(f,b,!0)}function Wk(f,b,O){return Wp(f,b,Sr(O,2),!0)}function Gk(f,b){var O=f==null?0:f.length;if(O){var se=ic(f,b,!0)-1;if(ac(f[se],b))return se}return-1}function qk(f){return f&&f.length?Gp(f):[]}function Yk(f,b){return f&&f.length?Gp(f,Sr(b,2)):[]}function Kk(f){var b=f==null?0:f.length;return b?zl(f,1,b):[]}function Zk(f,b,O){return f&&f.length?(b=O||b===n?1:di(b),zl(f,0,b<0?0:b)):[]}function Xk(f,b,O){var se=f==null?0:f.length;return se?(b=O||b===n?1:di(b),b=se-b,zl(f,b<0?0:b,se)):[]}function Jk(f,b){return f&&f.length?uh(f,Sr(b,3),!1,!0):[]}function Qk(f,b){return f&&f.length?uh(f,Sr(b,3)):[]}var eA=hi(function(f){return Oc(qe(f,1,Fo,!0))}),tA=hi(function(f){var b=Iu(f);return Fo(b)&&(b=n),Oc(qe(f,1,Fo,!0),Sr(b,2))}),nA=hi(function(f){var b=Iu(f);return b=typeof b=="function"?b:n,Oc(qe(f,1,Fo,!0),n,b)});function rA(f){return f&&f.length?Oc(f):[]}function iA(f,b){return f&&f.length?Oc(f,Sr(b,2)):[]}function sA(f,b){return b=typeof b=="function"?b:n,f&&f.length?Oc(f,n,b):[]}function p1(f){if(!(f&&f.length))return[];var b=0;return f=va(f,function(O){if(Fo(O))return b=le(O.length,b),!0}),ws(b,function(O){return Si(f,br(O))})}function Qw(f,b){if(!(f&&f.length))return[];var O=p1(f);return b==null?O:Si(O,function(se){return Li(b,n,se)})}var oA=hi(function(f,b){return Fo(f)?M(f,b):[]}),aA=hi(function(f){return Ou(va(f,Fo))}),lA=hi(function(f){var b=Iu(f);return Fo(b)&&(b=n),Ou(va(f,Fo),Sr(b,2))}),uA=hi(function(f){var b=Iu(f);return b=typeof b=="function"?b:n,Ou(va(f,Fo),n,b)}),cA=hi(p1);function hA(f,b){return sc(f||[],b||[],mt)}function dA(f,b){return sc(f||[],b||[],ah)}var fA=hi(function(f){var b=f.length,O=b>1?f[b-1]:n;return O=typeof O=="function"?(f.pop(),O):n,Qw(f,O)});function ex(f){var b=Ie(f);return b.__chain__=!0,b}function pA(f,b){return b(f),f}function t0(f,b){return b(f)}var gA=hh(function(f){var b=f.length,O=b?f[0]:0,se=this.__wrapped__,Le=function(Ve){return On(Ve,f)};return b>1||this.__actions__.length||!(se instanceof Gr)||!dh(O)?this.thru(Le):(se=se.slice(O,+O+(b?1:0)),se.__actions__.push({func:t0,args:[Le],thisArg:n}),new Ks(se,this.__chain__).thru(function(Ve){return b&&!Ve.length&&Ve.push(n),Ve}))});function mA(){return ex(this)}function vA(){return new Ks(this.value(),this.__chain__)}function yA(){this.__values__===n&&(this.__values__=px(this.value()));var f=this.__index__>=this.__values__.length,b=f?n:this.__values__[this.__index__++];return{done:f,value:b}}function bA(){return this}function _A(f){for(var b,O=this;O instanceof tc;){var se=qw(O);se.__index__=0,se.__values__=n,b?Le.__wrapped__=se:b=se;var Le=se;O=O.__wrapped__}return Le.__wrapped__=f,b}function wA(){var f=this.__wrapped__;if(f instanceof Gr){var b=f;return this.__actions__.length&&(b=new Gr(this)),b=b.reverse(),b.__actions__.push({func:t0,args:[f1],thisArg:n}),new Ks(b,this.__chain__)}return this.thru(f1)}function xA(){return Du(this.__wrapped__,this.__actions__)}var LA=qm(function(f,b,O){ti.call(f,O)?++f[O]:In(f,O,1)});function SA(f,b,O){var se=ri(f)?hu:ae;return O&&wl(f,b,O)&&(b=n),se(f,Sr(b,3))}function CA(f,b){var O=ri(f)?va:nt;return O(f,Sr(b,3))}var EA=Pw(Yw),PA=Pw(Kw);function MA(f,b){return qe(n0(f,b),1)}function kA(f,b){return qe(n0(f,b),X)}function AA(f,b,O){return O=O===n?1:di(O),qe(n0(f,b),O)}function tx(f,b){var O=ri(f)?Us:U;return O(f,Sr(b,3))}function nx(f,b){var O=ri(f)?ma:ne;return O(f,Sr(b,3))}var TA=qm(function(f,b,O){ti.call(f,O)?f[O].push(b):In(f,O,[b])});function DA(f,b,O,se){f=Vl(f)?f:Wf(f),O=O&&!se?di(O):0;var Le=f.length;return O<0&&(O=le(Le+O,0)),a0(f)?O<=Le&&f.indexOf(b,O)>-1:!!Le&&mn(f,b,O)>-1}var OA=hi(function(f,b,O){var se=-1,Le=typeof b=="function",Ve=Vl(f)?Nt(f.length):[];return U(f,function(ot){Ve[++se]=Le?Li(b,ot,O):je(ot,b,O)}),Ve}),NA=qm(function(f,b,O){In(f,O,b)});function n0(f,b){var O=ri(f)?Si:Wi;return O(f,Sr(b,3))}function IA(f,b,O,se){return f==null?[]:(ri(b)||(b=b==null?[]:[b]),O=se?n:O,ri(O)||(O=O==null?[]:[O]),Dc(f,b,O))}var BA=qm(function(f,b,O){f[O?0:1].push(b)},function(){return[[],[]]});function RA(f,b,O){var se=ri(f)?Ha:Yi,Le=arguments.length<3;return se(f,Sr(b,4),O,Le,U)}function FA(f,b,O){var se=ri(f)?_s:Yi,Le=arguments.length<3;return se(f,Sr(b,4),O,Le,ne)}function jA(f,b){var O=ri(f)?va:nt;return O(f,s0(Sr(b,3)))}function zA(f){var b=ri(f)?jt:Ff;return b(f)}function $A(f,b,O){(O?wl(f,b,O):b===n)?b=1:b=di(b);var se=ri(f)?Ct:Vm;return se(f,b)}function VA(f){var b=ri(f)?Zt:Hm;return b(f)}function UA(f){if(f==null)return 0;if(Vl(f))return a0(f)?no(f):f.length;var b=Qa(f);return b==Q||b==Je?f.size:_i(f).length}function HA(f,b,O){var se=ri(f)?F:Wm;return O&&wl(f,b,O)&&(b=n),se(f,Sr(b,3))}var WA=hi(function(f,b){if(f==null)return[];var O=b.length;return O>1&&wl(f,b[0],b[1])?b=[]:O>2&&wl(b[0],b[1],b[2])&&(b=[b[0]]),Dc(f,qe(b,1),[])}),r0=wo||function(){return ys.Date.now()};function GA(f,b){if(typeof b!="function")throw new Qi(o);return f=di(f),function(){if(--f<1)return b.apply(this,arguments)}}function rx(f,b,O){return b=O?n:b,b=f&&b==null?f.length:b,ch(f,pe,n,n,n,n,b)}function ix(f,b){var O;if(typeof b!="function")throw new Qi(o);return f=di(f),function(){return--f>0&&(O=b.apply(this,arguments)),f<=1&&(b=n),O}}var g1=hi(function(f,b,O){var se=A;if(O.length){var Le=yo(O,Uf(g1));se|=te}return ch(f,se,b,O,Le)}),sx=hi(function(f,b,O){var se=A|k;if(O.length){var Le=yo(O,Uf(sx));se|=te}return ch(b,se,f,O,Le)});function ox(f,b,O){b=O?n:b;var se=ch(f,$,n,n,n,n,n,b);return se.placeholder=ox.placeholder,se}function ax(f,b,O){b=O?n:b;var se=ch(f,Y,n,n,n,n,n,b);return se.placeholder=ax.placeholder,se}function lx(f,b,O){var se,Le,Ve,ot,yt,At,pn=0,gn=!1,_n=!1,Un=!0;if(typeof f!="function")throw new Qi(o);b=Bu(b)||0,uo(O)&&(gn=!!O.leading,_n="maxWait"in O,Ve=_n?le(Bu(O.maxWait)||0,b):Ve,Un="trailing"in O?!!O.trailing:Un);function cr(jo){var lc=se,gh=Le;return se=Le=n,pn=jo,ot=f.apply(gh,lc),ot}function Er(jo){return pn=jo,yt=Kp(Mi,b),gn?cr(jo):ot}function gi(jo){var lc=jo-At,gh=jo-pn,Px=b-lc;return _n?Pe(Px,Ve-gh):Px}function Pr(jo){var lc=jo-At,gh=jo-pn;return At===n||lc>=b||lc<0||_n&&gh>=Ve}function Mi(){var jo=r0();if(Pr(jo))return Ni(jo);yt=Kp(Mi,gi(jo))}function Ni(jo){return yt=n,Un&&se?cr(jo):(se=Le=n,ot)}function gu(){yt!==n&&zf(yt),pn=0,se=At=Le=yt=n}function xl(){return yt===n?ot:Ni(r0())}function mu(){var jo=r0(),lc=Pr(jo);if(se=arguments,Le=this,At=jo,lc){if(yt===n)return Er(At);if(_n)return zf(yt),yt=Kp(Mi,b),cr(At)}return yt===n&&(yt=Kp(Mi,b)),ot}return mu.cancel=gu,mu.flush=xl,mu}var qA=hi(function(f,b){return S(f,1,b)}),YA=hi(function(f,b,O){return S(f,Bu(b)||0,O)});function KA(f){return ch(f,z)}function i0(f,b){if(typeof f!="function"||b!=null&&typeof b!="function")throw new Qi(o);var O=function(){var se=arguments,Le=b?b.apply(this,se):se[0],Ve=O.cache;if(Ve.has(Le))return Ve.get(Le);var ot=f.apply(this,se);return O.cache=Ve.set(Le,ot)||Ve,ot};return O.cache=new(i0.Cache||Xa),O}i0.Cache=Xa;function s0(f){if(typeof f!="function")throw new Qi(o);return function(){var b=arguments;switch(b.length){case 0:return!f.call(this);case 1:return!f.call(this,b[0]);case 2:return!f.call(this,b[0],b[1]);case 3:return!f.call(this,b[0],b[1],b[2])}return!f.apply(this,b)}}function ZA(f){return ix(2,f)}var XA=e1(function(f,b){b=b.length==1&&ri(b[0])?Si(b[0],Wr(Sr())):Si(qe(b,1),Wr(Sr()));var O=b.length;return hi(function(se){for(var Le=-1,Ve=Pe(se.length,O);++Le<Ve;)se[Le]=b[Le].call(this,se[Le]);return Li(f,this,se)})}),m1=hi(function(f,b){var O=yo(b,Uf(m1));return ch(f,te,n,b,O)}),ux=hi(function(f,b){var O=yo(b,Uf(ux));return ch(f,me,n,b,O)}),JA=hh(function(f,b){return ch(f,I,n,n,n,b)});function QA(f,b){if(typeof f!="function")throw new Qi(o);return b=b===n?b:di(b),hi(f,b)}function e6(f,b){if(typeof f!="function")throw new Qi(o);return b=b==null?0:le(di(b),0),hi(function(O){var se=O[b],Le=Nu(O,0,b);return se&&Yo(Le,se),Li(f,this,Le)})}function t6(f,b,O){var se=!0,Le=!0;if(typeof f!="function")throw new Qi(o);return uo(O)&&(se="leading"in O?!!O.leading:se,Le="trailing"in O?!!O.trailing:Le),lx(f,b,{leading:se,maxWait:b,trailing:Le})}function n6(f){return rx(f,1)}function r6(f,b){return m1(jd(b),f)}function i6(){if(!arguments.length)return[];var f=arguments[0];return ri(f)?f:[f]}function s6(f){return h(f,m)}function o6(f,b){return b=typeof b=="function"?b:n,h(f,m,b)}function a6(f){return h(f,p|m)}function l6(f,b){return b=typeof b=="function"?b:n,h(f,p|m,b)}function u6(f,b){return b==null||_(f,b,xa(b))}function ac(f,b){return f===b||f!==f&&b!==b}var c6=Xm(pt),h6=Xm(function(f,b){return f>=b}),Vd=Fe(function(){return arguments}())?Fe:function(f){return xo(f)&&ti.call(f,"callee")&&!$i.call(f,"callee")},ri=Nt.isArray,d6=ku?Wr(ku):Ue;function Vl(f){return f!=null&&o0(f.length)&&!fh(f)}function Fo(f){return xo(f)&&Vl(f)}function f6(f){return f===!0||f===!1||xo(f)&&st(f)==ee}var Yh=u||P1,p6=Pa?Wr(Pa):We;function g6(f){return xo(f)&&f.nodeType===1&&!Zp(f)}function m6(f){if(f==null)return!0;if(Vl(f)&&(ri(f)||typeof f=="string"||typeof f.splice=="function"||Yh(f)||Hf(f)||Vd(f)))return!f.length;var b=Qa(f);if(b==Q||b==Je)return!f.size;if(Yp(f))return!_i(f).length;for(var O in f)if(ti.call(f,O))return!1;return!0}function v6(f,b){return ct(f,b)}function y6(f,b,O){O=typeof O=="function"?O:n;var se=O?O(f,b):n;return se===n?ct(f,b,n,O):!!se}function v1(f){if(!xo(f))return!1;var b=st(f);return b==Te||b==Oe||typeof f.message=="string"&&typeof f.name=="string"&&!Zp(f)}function b6(f){return typeof f=="number"&&y(f)}function fh(f){if(!uo(f))return!1;var b=st(f);return b==Ye||b==ge||b==ve||b==Xe}function cx(f){return typeof f=="number"&&f==di(f)}function o0(f){return typeof f=="number"&&f>-1&&f%1==0&&f<=oe}function uo(f){var b=typeof f;return f!=null&&(b=="object"||b=="function")}function xo(f){return f!=null&&typeof f=="object"}var hx=lu?Wr(lu):vt;function _6(f,b){return f===b||Mt(f,b,a1(b))}function w6(f,b,O){return O=typeof O=="function"?O:n,Mt(f,b,a1(b),O)}function x6(f){return dx(f)&&f!=+f}function L6(f){if(ok(f))throw new Jn(s);return kt(f)}function S6(f){return f===null}function C6(f){return f==null}function dx(f){return typeof f=="number"||xo(f)&&st(f)==ie}function Zp(f){if(!xo(f)||st(f)!=Se)return!1;var b=Ia(f);if(b===null)return!0;var O=ti.call(b,"constructor")&&b.constructor;return typeof O=="function"&&O instanceof O&&Na.call(O)==Di}var y1=uu?Wr(uu):hn;function E6(f){return cx(f)&&f>=-9007199254740991&&f<=oe}var fx=ia?Wr(ia):Vn;function a0(f){return typeof f=="string"||!ri(f)&&xo(f)&&st(f)==He}function pu(f){return typeof f=="symbol"||xo(f)&&st(f)==Ge}var Hf=cu?Wr(cu):qn;function P6(f){return f===n}function M6(f){return xo(f)&&Qa(f)==Et}function k6(f){return xo(f)&&st(f)==Kt}var A6=Xm(ni),T6=Xm(function(f,b){return f<=b});function px(f){if(!f)return[];if(Vl(f))return a0(f)?ro(f):$l(f);if(pr&&f[pr])return Do(f[pr]());var b=Qa(f),O=b==Q?jl:b==Je?bo:Wf;return O(f)}function ph(f){if(!f)return f===0?f:0;if(f=Bu(f),f===X||f===-1/0){var b=f<0?-1:1;return b*_e}return f===f?f:0}function di(f){var b=ph(f),O=b%1;return b===b?O?b-O:b:0}function gx(f){return f?tr(di(f),0,De):0}function Bu(f){if(typeof f=="number")return f;if(pu(f))return Ce;if(uo(f)){var b=typeof f.valueOf=="function"?f.valueOf():f;f=uo(b)?b+"":b}if(typeof f!="string")return f===0?f:+f;f=Ko(f);var O=Rr.test(f);return O||ji.test(f)?au(f.slice(2),O?2:8):Nr.test(f)?Ce:+f}function mx(f){return Nc(f,Ul(f))}function D6(f){return f?tr(di(f),-9007199254740991,oe):f===0?f:0}function ss(f){return f==null?"":Ja(f)}var O6=$f(function(f,b){if(Yp(b)||Vl(b)){Nc(b,xa(b),f);return}for(var O in b)ti.call(b,O)&&mt(f,O,b[O])}),vx=$f(function(f,b){Nc(b,Ul(b),f)}),l0=$f(function(f,b,O,se){Nc(b,Ul(b),f,se)}),N6=$f(function(f,b,O,se){Nc(b,xa(b),f,se)}),I6=hh(On);function B6(f,b){var O=Bo(f);return b==null?O:yn(O,b)}var R6=hi(function(f,b){f=Ei(f);var O=-1,se=b.length,Le=se>2?b[2]:n;for(Le&&wl(b[0],b[1],Le)&&(se=1);++O<se;)for(var Ve=b[O],ot=Ul(Ve),yt=-1,At=ot.length;++yt<At;){var pn=ot[yt],gn=f[pn];(gn===n||ac(gn,Da[pn])&&!ti.call(f,pn))&&(f[pn]=Ve[pn])}return f}),F6=hi(function(f){return f.push(n,Nw),Li(yx,n,f)});function j6(f,b){return Pt(f,Sr(b,3),tn)}function z6(f,b){return Pt(f,Sr(b,3),wn)}function $6(f,b){return f==null?f:bt(f,Sr(b,3),Ul)}function V6(f,b){return f==null?f:It(f,Sr(b,3),Ul)}function U6(f,b){return f&&tn(f,Sr(b,3))}function H6(f,b){return f&&wn(f,Sr(b,3))}function W6(f){return f==null?[]:Pn(f,xa(f))}function G6(f){return f==null?[]:Pn(f,Ul(f))}function b1(f,b,O){var se=f==null?n:dr(f,b);return se===n?O:se}function q6(f,b){return f!=null&&Rw(f,b,zt)}function _1(f,b){return f!=null&&Rw(f,b,St)}var Y6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),f[b]=O},x1(Hl)),K6=kw(function(f,b,O){b!=null&&typeof b.toString!="function"&&(b=Pi.call(b)),ti.call(f,b)?f[b].push(O):f[b]=[O]},Sr),Z6=hi(je);function xa(f){return Vl(f)?Ft(f):_i(f)}function Ul(f){return Vl(f)?Ft(f,!0):Oi(f)}function X6(f,b){var O={};return b=Sr(b,3),tn(f,function(se,Le,Ve){In(O,b(se,Le,Ve),se)}),O}function J6(f,b){var O={};return b=Sr(b,3),tn(f,function(se,Le,Ve){In(O,Le,b(se,Le,Ve))}),O}var Q6=$f(function(f,b,O){Ra(f,b,O)}),yx=$f(function(f,b,O,se){Ra(f,b,O,se)}),eT=hh(function(f,b){var O={};if(f==null)return O;var se=!1;b=Si(b,function(Ve){return Ve=oc(Ve,f),se||(se=Ve.length>1),Ve}),Nc(f,s1(f),O),se&&(O=h(O,p|v|m,YM));for(var Le=b.length;Le--;)lh(O,b[Le]);return O});function tT(f,b){return bx(f,s0(Sr(b)))}var nT=hh(function(f,b){return f==null?{}:Fa(f,b)});function bx(f,b){if(f==null)return{};var O=Si(s1(f),function(se){return[se]});return b=Sr(b),lo(f,O,function(se,Le){return b(se,Le[0])})}function rT(f,b,O){b=oc(b,f);var se=-1,Le=b.length;for(Le||(Le=1,f=n);++se<Le;){var Ve=f==null?n:f[Ic(b[se])];Ve===n&&(se=Le,Ve=O),f=fh(Ve)?Ve.call(f):Ve}return f}function iT(f,b,O){return f==null?f:ah(f,b,O)}function sT(f,b,O,se){return se=typeof se=="function"?se:n,f==null?f:ah(f,b,O,se)}var _x=Dw(xa),wx=Dw(Ul);function oT(f,b,O){var se=ri(f),Le=se||Yh(f)||Hf(f);if(b=Sr(b,4),O==null){var Ve=f&&f.constructor;Le?O=se?new Ve:[]:uo(f)?O=fh(Ve)?Bo(Ia(f)):{}:O={}}return(Le?Us:tn)(f,function(ot,yt,At){return b(O,ot,yt,At)}),O}function aT(f,b){return f==null?!0:lh(f,b)}function lT(f,b,O){return f==null?f:jf(f,b,jd(O))}function uT(f,b,O,se){return se=typeof se=="function"?se:n,f==null?f:jf(f,b,jd(O),se)}function Wf(f){return f==null?[]:eo(f,xa(f))}function cT(f){return f==null?[]:eo(f,Ul(f))}function hT(f,b,O){return O===n&&(O=b,b=n),O!==n&&(O=Bu(O),O=O===O?O:0),b!==n&&(b=Bu(b),b=b===b?b:0),tr(Bu(f),b,O)}function dT(f,b,O){return b=ph(b),O===n?(O=b,b=0):O=ph(O),f=Bu(f),Rt(f,b,O)}function fT(f,b,O){if(O&&typeof O!="boolean"&&wl(f,b,O)&&(b=O=n),O===n&&(typeof b=="boolean"?(O=b,b=n):typeof f=="boolean"&&(O=f,f=n)),f===n&&b===n?(f=0,b=1):(f=ph(f),b===n?(b=f,f=0):b=ph(b)),f>b){var se=f;f=b,b=se}if(O||f%1||b%1){var Le=Wt();return Pe(f+Le*(b-f+Nl("1e-"+((Le+"").length-1))),b)}return Rd(f,b)}var pT=Vf(function(f,b,O){return b=b.toLowerCase(),f+(O?xx(b):b)});function xx(f){return w1(ss(f).toLowerCase())}function Lx(f){return f=ss(f),f&&f.replace(Fr,Qu).replace(gl,"")}function gT(f,b,O){f=ss(f),b=Ja(b);var se=f.length;O=O===n?se:tr(di(O),0,se);var Le=O;return O-=b.length,O>=0&&f.slice(O,Le)==b}function mT(f){return f=ss(f),f&&ir.test(f)?f.replace(hr,vl):f}function vT(f){return f=ss(f),f&&Sn.test(f)?f.replace(Gn,"\\$&"):f}var yT=Vf(function(f,b,O){return f+(O?"-":"")+b.toLowerCase()}),bT=Vf(function(f,b,O){return f+(O?" ":"")+b.toLowerCase()}),_T=Ew("toLowerCase");function wT(f,b,O){f=ss(f),b=di(b);var se=b?no(f):0;if(!b||se>=b)return f;var Le=(b-se)/2;return Zm(qs(Le),O)+f+Zm(Gs(Le),O)}function xT(f,b,O){f=ss(f),b=di(b);var se=b?no(f):0;return b&&se<b?f+Zm(b-se,O):f}function LT(f,b,O){f=ss(f),b=di(b);var se=b?no(f):0;return b&&se<b?Zm(b-se,O)+f:f}function ST(f,b,O){return O||b==null?b=0:b&&(b=+b),Ot(ss(f).replace(Ut,""),b||0)}function CT(f,b,O){return(O?wl(f,b,O):b===n)?b=1:b=di(b),Rf(ss(f),b)}function ET(){var f=arguments,b=ss(f[0]);return f.length<3?b:b.replace(f[1],f[2])}var PT=Vf(function(f,b,O){return f+(O?"_":"")+b.toLowerCase()});function MT(f,b,O){return O&&typeof O!="number"&&wl(f,b,O)&&(b=O=n),O=O===n?De:O>>>0,O?(f=ss(f),f&&(typeof b=="string"||b!=null&&!y1(b))&&(b=Ja(b),!b&&ka(f))?Nu(ro(f),0,O):f.split(b,O)):[]}var kT=Vf(function(f,b,O){return f+(O?" ":"")+w1(b)});function AT(f,b,O){return f=ss(f),O=O==null?0:tr(di(O),0,f.length),b=Ja(b),f.slice(O,O+b.length)==b}function TT(f,b,O){var se=Ie.templateSettings;O&&wl(f,b,O)&&(b=n),f=ss(f),b=l0({},b,se,Ow);var Le=l0({},b.imports,se.imports,Ow),Ve=xa(Le),ot=eo(Le,Ve),yt,At,pn=0,gn=b.interpolate||Cr,_n="__p += '",Un=du((b.escape||Cr).source+"|"+gn.source+"|"+(gn===ft?sr:Cr).source+"|"+(b.evaluate||Cr).source+"|$","g"),cr="//# sourceURL="+(ti.call(b,"sourceURL")?(b.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++su+"]")+`
`;f.replace(Un,function(Pr,Mi,Ni,gu,xl,mu){return Ni||(Ni=gu),_n+=f.slice(pn,mu).replace(un,yl),Mi&&(yt=!0,_n+=`' +
__e(`+Mi+`) +
'`),xl&&(At=!0,_n+=`';
`+xl+`;
__p += '`),Ni&&(_n+=`' +
((__t = (`+Ni+`)) == null ? '' : __t) +
'`),pn=mu+Pr.length,Pr}),_n+=`';
`;var Er=ti.call(b,"variable")&&b.variable;if(!Er)_n=`with (obj) {
`+_n+`
}
`;else if(Tt.test(Er))throw new Jn(a);_n=(At?_n.replace(en,""):_n).replace(Ln,"$1").replace(Mn,"$1;"),_n="function("+(Er||"obj")+`) {
`+(Er?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(yt?", __e = _.escape":"")+(At?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+_n+`return __p
}`;var gi=Cx(function(){return xr(Ve,cr+"return "+_n).apply(n,ot)});if(gi.source=_n,v1(gi))throw gi;return gi}function DT(f){return ss(f).toLowerCase()}function OT(f){return ss(f).toUpperCase()}function NT(f,b,O){if(f=ss(f),f&&(O||b===n))return Ko(f);if(!f||!(b=Ja(b)))return f;var se=ro(f),Le=ro(b),Ve=vo(se,Le),ot=Au(se,Le)+1;return Nu(se,Ve,ot).join("")}function IT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.slice(0,Ga(f)+1);if(!f||!(b=Ja(b)))return f;var se=ro(f),Le=Au(se,ro(b))+1;return Nu(se,0,Le).join("")}function BT(f,b,O){if(f=ss(f),f&&(O||b===n))return f.replace(Ut,"");if(!f||!(b=Ja(b)))return f;var se=ro(f),Le=vo(se,ro(b));return Nu(se,Le).join("")}function RT(f,b){var O=K,se=N;if(uo(b)){var Le="separator"in b?b.separator:Le;O="length"in b?di(b.length):O,se="omission"in b?Ja(b.omission):se}f=ss(f);var Ve=f.length;if(ka(f)){var ot=ro(f);Ve=ot.length}if(O>=Ve)return f;var yt=O-no(se);if(yt<1)return se;var At=ot?Nu(ot,0,yt).join(""):f.slice(0,yt);if(Le===n)return At+se;if(ot&&(yt+=At.length-yt),y1(Le)){if(f.slice(yt).search(Le)){var pn,gn=At;for(Le.global||(Le=du(Le.source,ss(mi.exec(Le))+"g")),Le.lastIndex=0;pn=Le.exec(gn);)var _n=pn.index;At=At.slice(0,_n===n?yt:_n)}}else if(f.indexOf(Ja(Le),yt)!=yt){var Un=At.lastIndexOf(Le);Un>-1&&(At=At.slice(0,Un))}return At+se}function FT(f){return f=ss(f),f&&vr.test(f)?f.replace(Hn,qa):f}var jT=Vf(function(f,b,O){return f+(O?" ":"")+b.toUpperCase()}),w1=Ew("toUpperCase");function Sx(f,b,O){return f=ss(f),b=O?n:b,b===n?Zo(f)?Aa(f):dt(f):f.match(b)||[]}var Cx=hi(function(f,b){try{return Li(f,n,b)}catch(O){return v1(O)?O:new Jn(O)}}),zT=hh(function(f,b){return Us(b,function(O){O=Ic(O),In(f,O,g1(f[O],f))}),f});function $T(f){var b=f==null?0:f.length,O=Sr();return f=b?Si(f,function(se){if(typeof se[1]!="function")throw new Qi(o);return[O(se[0]),se[1]]}):[],hi(function(se){for(var Le=-1;++Le<b;){var Ve=f[Le];if(Li(Ve[0],this,se))return Li(Ve[1],this,se)}})}function VT(f){return g(h(f,p))}function x1(f){return function(){return f}}function UT(f,b){return f==null||f!==f?b:f}var HT=Mw(),WT=Mw(!0);function Hl(f){return f}function L1(f){return nr(typeof f=="function"?f:h(f,p))}function GT(f){return Ro(h(f,p))}function qT(f,b){return nc(f,h(b,p))}var YT=hi(function(f,b){return function(O){return je(O,f,b)}}),KT=hi(function(f,b){return function(O){return je(f,O,b)}});function S1(f,b,O){var se=xa(b),Le=Pn(b,se);O==null&&!(uo(b)&&(Le.length||!se.length))&&(O=b,b=f,f=this,Le=Pn(b,xa(b)));var Ve=!(uo(O)&&"chain"in O)||!!O.chain,ot=fh(f);return Us(Le,function(yt){var At=b[yt];f[yt]=At,ot&&(f.prototype[yt]=function(){var pn=this.__chain__;if(Ve||pn){var gn=f(this.__wrapped__),_n=gn.__actions__=$l(this.__actions__);return _n.push({func:At,args:arguments,thisArg:f}),gn.__chain__=pn,gn}return At.apply(f,Yo([this.value()],arguments))})}),f}function ZT(){return ys._===this&&(ys._=xs),this}function C1(){}function XT(f){return f=di(f),hi(function(b){return _l(b,f)})}var JT=n1(Si),QT=n1(hu),eD=n1(F);function Ex(f){return u1(f)?br(Ic(f)):Ls(f)}function tD(f){return function(b){return f==null?n:dr(f,b)}}var nD=Aw(),rD=Aw(!0);function E1(){return[]}function P1(){return!1}function iD(){return{}}function sD(){return""}function oD(){return!0}function aD(f,b){if(f=di(f),f<1||f>oe)return[];var O=De,se=Pe(f,De);b=Sr(b),f-=De;for(var Le=ws(se,b);++O<f;)b(O);return Le}function lD(f){return ri(f)?Si(f,Ic):pu(f)?[f]:$l(Gw(ss(f)))}function uD(f){var b=++ya;return ss(f)+b}var cD=Km(function(f,b){return f+b},0),hD=r1("ceil"),dD=Km(function(f,b){return f/b},1),fD=r1("floor");function pD(f){return f&&f.length?ye(f,Hl,pt):n}function gD(f,b){return f&&f.length?ye(f,Sr(b,2),pt):n}function mD(f){return or(f,Hl)}function vD(f,b){return or(f,Sr(b,2))}function yD(f){return f&&f.length?ye(f,Hl,ni):n}function bD(f,b){return f&&f.length?ye(f,Sr(b,2),ni):n}var _D=Km(function(f,b){return f*b},1),wD=r1("round"),xD=Km(function(f,b){return f-b},0);function LD(f){return f&&f.length?Ci(f,Hl):0}function SD(f,b){return f&&f.length?Ci(f,Sr(b,2)):0}return Ie.after=GA,Ie.ary=rx,Ie.assign=O6,Ie.assignIn=vx,Ie.assignInWith=l0,Ie.assignWith=N6,Ie.at=I6,Ie.before=ix,Ie.bind=g1,Ie.bindAll=zT,Ie.bindKey=sx,Ie.castArray=i6,Ie.chain=ex,Ie.chunk=fk,Ie.compact=pk,Ie.concat=gk,Ie.cond=$T,Ie.conforms=VT,Ie.constant=x1,Ie.countBy=LA,Ie.create=B6,Ie.curry=ox,Ie.curryRight=ax,Ie.debounce=lx,Ie.defaults=R6,Ie.defaultsDeep=F6,Ie.defer=qA,Ie.delay=YA,Ie.difference=mk,Ie.differenceBy=vk,Ie.differenceWith=yk,Ie.drop=bk,Ie.dropRight=_k,Ie.dropRightWhile=wk,Ie.dropWhile=xk,Ie.fill=Lk,Ie.filter=CA,Ie.flatMap=MA,Ie.flatMapDeep=kA,Ie.flatMapDepth=AA,Ie.flatten=Zw,Ie.flattenDeep=Sk,Ie.flattenDepth=Ck,Ie.flip=KA,Ie.flow=HT,Ie.flowRight=WT,Ie.fromPairs=Ek,Ie.functions=W6,Ie.functionsIn=G6,Ie.groupBy=TA,Ie.initial=Mk,Ie.intersection=kk,Ie.intersectionBy=Ak,Ie.intersectionWith=Tk,Ie.invert=Y6,Ie.invertBy=K6,Ie.invokeMap=OA,Ie.iteratee=L1,Ie.keyBy=NA,Ie.keys=xa,Ie.keysIn=Ul,Ie.map=n0,Ie.mapKeys=X6,Ie.mapValues=J6,Ie.matches=GT,Ie.matchesProperty=qT,Ie.memoize=i0,Ie.merge=Q6,Ie.mergeWith=yx,Ie.method=YT,Ie.methodOf=KT,Ie.mixin=S1,Ie.negate=s0,Ie.nthArg=XT,Ie.omit=eT,Ie.omitBy=tT,Ie.once=ZA,Ie.orderBy=IA,Ie.over=JT,Ie.overArgs=XA,Ie.overEvery=QT,Ie.overSome=eD,Ie.partial=m1,Ie.partialRight=ux,Ie.partition=BA,Ie.pick=nT,Ie.pickBy=bx,Ie.property=Ex,Ie.propertyOf=tD,Ie.pull=Ik,Ie.pullAll=Jw,Ie.pullAllBy=Bk,Ie.pullAllWith=Rk,Ie.pullAt=Fk,Ie.range=nD,Ie.rangeRight=rD,Ie.rearg=JA,Ie.reject=jA,Ie.remove=jk,Ie.rest=QA,Ie.reverse=f1,Ie.sampleSize=$A,Ie.set=iT,Ie.setWith=sT,Ie.shuffle=VA,Ie.slice=zk,Ie.sortBy=WA,Ie.sortedUniq=qk,Ie.sortedUniqBy=Yk,Ie.split=MT,Ie.spread=e6,Ie.tail=Kk,Ie.take=Zk,Ie.takeRight=Xk,Ie.takeRightWhile=Jk,Ie.takeWhile=Qk,Ie.tap=pA,Ie.throttle=t6,Ie.thru=t0,Ie.toArray=px,Ie.toPairs=_x,Ie.toPairsIn=wx,Ie.toPath=lD,Ie.toPlainObject=mx,Ie.transform=oT,Ie.unary=n6,Ie.union=eA,Ie.unionBy=tA,Ie.unionWith=nA,Ie.uniq=rA,Ie.uniqBy=iA,Ie.uniqWith=sA,Ie.unset=aT,Ie.unzip=p1,Ie.unzipWith=Qw,Ie.update=lT,Ie.updateWith=uT,Ie.values=Wf,Ie.valuesIn=cT,Ie.without=oA,Ie.words=Sx,Ie.wrap=r6,Ie.xor=aA,Ie.xorBy=lA,Ie.xorWith=uA,Ie.zip=cA,Ie.zipObject=hA,Ie.zipObjectDeep=dA,Ie.zipWith=fA,Ie.entries=_x,Ie.entriesIn=wx,Ie.extend=vx,Ie.extendWith=l0,S1(Ie,Ie),Ie.add=cD,Ie.attempt=Cx,Ie.camelCase=pT,Ie.capitalize=xx,Ie.ceil=hD,Ie.clamp=hT,Ie.clone=s6,Ie.cloneDeep=a6,Ie.cloneDeepWith=l6,Ie.cloneWith=o6,Ie.conformsTo=u6,Ie.deburr=Lx,Ie.defaultTo=UT,Ie.divide=dD,Ie.endsWith=gT,Ie.eq=ac,Ie.escape=mT,Ie.escapeRegExp=vT,Ie.every=SA,Ie.find=EA,Ie.findIndex=Yw,Ie.findKey=j6,Ie.findLast=PA,Ie.findLastIndex=Kw,Ie.findLastKey=z6,Ie.floor=fD,Ie.forEach=tx,Ie.forEachRight=nx,Ie.forIn=$6,Ie.forInRight=V6,Ie.forOwn=U6,Ie.forOwnRight=H6,Ie.get=b1,Ie.gt=c6,Ie.gte=h6,Ie.has=q6,Ie.hasIn=_1,Ie.head=Xw,Ie.identity=Hl,Ie.includes=DA,Ie.indexOf=Pk,Ie.inRange=dT,Ie.invoke=Z6,Ie.isArguments=Vd,Ie.isArray=ri,Ie.isArrayBuffer=d6,Ie.isArrayLike=Vl,Ie.isArrayLikeObject=Fo,Ie.isBoolean=f6,Ie.isBuffer=Yh,Ie.isDate=p6,Ie.isElement=g6,Ie.isEmpty=m6,Ie.isEqual=v6,Ie.isEqualWith=y6,Ie.isError=v1,Ie.isFinite=b6,Ie.isFunction=fh,Ie.isInteger=cx,Ie.isLength=o0,Ie.isMap=hx,Ie.isMatch=_6,Ie.isMatchWith=w6,Ie.isNaN=x6,Ie.isNative=L6,Ie.isNil=C6,Ie.isNull=S6,Ie.isNumber=dx,Ie.isObject=uo,Ie.isObjectLike=xo,Ie.isPlainObject=Zp,Ie.isRegExp=y1,Ie.isSafeInteger=E6,Ie.isSet=fx,Ie.isString=a0,Ie.isSymbol=pu,Ie.isTypedArray=Hf,Ie.isUndefined=P6,Ie.isWeakMap=M6,Ie.isWeakSet=k6,Ie.join=Dk,Ie.kebabCase=yT,Ie.last=Iu,Ie.lastIndexOf=Ok,Ie.lowerCase=bT,Ie.lowerFirst=_T,Ie.lt=A6,Ie.lte=T6,Ie.max=pD,Ie.maxBy=gD,Ie.mean=mD,Ie.meanBy=vD,Ie.min=yD,Ie.minBy=bD,Ie.stubArray=E1,Ie.stubFalse=P1,Ie.stubObject=iD,Ie.stubString=sD,Ie.stubTrue=oD,Ie.multiply=_D,Ie.nth=Nk,Ie.noConflict=ZT,Ie.noop=C1,Ie.now=r0,Ie.pad=wT,Ie.padEnd=xT,Ie.padStart=LT,Ie.parseInt=ST,Ie.random=fT,Ie.reduce=RA,Ie.reduceRight=FA,Ie.repeat=CT,Ie.replace=ET,Ie.result=rT,Ie.round=wD,Ie.runInContext=wt,Ie.sample=zA,Ie.size=UA,Ie.snakeCase=PT,Ie.some=HA,Ie.sortedIndex=$k,Ie.sortedIndexBy=Vk,Ie.sortedIndexOf=Uk,Ie.sortedLastIndex=Hk,Ie.sortedLastIndexBy=Wk,Ie.sortedLastIndexOf=Gk,Ie.startCase=kT,Ie.startsWith=AT,Ie.subtract=xD,Ie.sum=LD,Ie.sumBy=SD,Ie.template=TT,Ie.times=aD,Ie.toFinite=ph,Ie.toInteger=di,Ie.toLength=gx,Ie.toLower=DT,Ie.toNumber=Bu,Ie.toSafeInteger=D6,Ie.toString=ss,Ie.toUpper=OT,Ie.trim=NT,Ie.trimEnd=IT,Ie.trimStart=BT,Ie.truncate=RT,Ie.unescape=FT,Ie.uniqueId=uD,Ie.upperCase=jT,Ie.upperFirst=w1,Ie.each=tx,Ie.eachRight=nx,Ie.first=Xw,S1(Ie,function(){var f={};return tn(Ie,function(b,O){ti.call(Ie.prototype,O)||(f[O]=b)}),f}(),{chain:!1}),Ie.VERSION=r,Us(["bind","bindKey","curry","curryRight","partial","partialRight"],function(f){Ie[f].placeholder=Ie}),Us(["drop","take"],function(f,b){Gr.prototype[f]=function(O){O=O===n?1:le(di(O),0);var se=this.__filtered__&&!b?new Gr(this):this.clone();return se.__filtered__?se.__takeCount__=Pe(O,se.__takeCount__):se.__views__.push({size:Pe(O,De),type:f+(se.__dir__<0?"Right":"")}),se},Gr.prototype[f+"Right"]=function(O){return this.reverse()[f](O).reverse()}}),Us(["filter","map","takeWhile"],function(f,b){var O=b+1,se=O==R||O==W;Gr.prototype[f]=function(Le){var Ve=this.clone();return Ve.__iteratees__.push({iteratee:Sr(Le,3),type:O}),Ve.__filtered__=Ve.__filtered__||se,Ve}}),Us(["head","last"],function(f,b){var O="take"+(b?"Right":"");Gr.prototype[f]=function(){return this[O](1).value()[0]}}),Us(["initial","tail"],function(f,b){var O="drop"+(b?"":"Right");Gr.prototype[f]=function(){return this.__filtered__?new Gr(this):this[O](1)}}),Gr.prototype.compact=function(){return this.filter(Hl)},Gr.prototype.find=function(f){return this.filter(f).head()},Gr.prototype.findLast=function(f){return this.reverse().find(f)},Gr.prototype.invokeMap=hi(function(f,b){return typeof f=="function"?new Gr(this):this.map(function(O){return je(O,f,b)})}),Gr.prototype.reject=function(f){return this.filter(s0(Sr(f)))},Gr.prototype.slice=function(f,b){f=di(f);var O=this;return O.__filtered__&&(f>0||b<0)?new Gr(O):(f<0?O=O.takeRight(-f):f&&(O=O.drop(f)),b!==n&&(b=di(b),O=b<0?O.dropRight(-b):O.take(b-f)),O)},Gr.prototype.takeRightWhile=function(f){return this.reverse().takeWhile(f).reverse()},Gr.prototype.toArray=function(){return this.take(De)},tn(Gr.prototype,function(f,b){var O=/^(?:filter|find|map|reject)|While$/.test(b),se=/^(?:head|last)$/.test(b),Le=Ie[se?"take"+(b=="last"?"Right":""):b],Ve=se||/^find/.test(b);Le&&(Ie.prototype[b]=function(){var ot=this.__wrapped__,yt=se?[1]:arguments,At=ot instanceof Gr,pn=yt[0],gn=At||ri(ot),_n=function(Mi){var Ni=Le.apply(Ie,Yo([Mi],yt));return se&&Un?Ni[0]:Ni};gn&&O&&typeof pn=="function"&&pn.length!=1&&(At=gn=!1);var Un=this.__chain__,cr=!!this.__actions__.length,Er=Ve&&!Un,gi=At&&!cr;if(!Ve&&gn){ot=gi?ot:new Gr(this);var Pr=f.apply(ot,yt);return Pr.__actions__.push({func:t0,args:[_n],thisArg:n}),new Ks(Pr,Un)}return Er&&gi?f.apply(this,yt):(Pr=this.thru(_n),Er?se?Pr.value()[0]:Pr.value():Pr)})}),Us(["pop","push","shift","sort","splice","unshift"],function(f){var b=Ta[f],O=/^(?:push|sort|unshift)$/.test(f)?"tap":"thru",se=/^(?:pop|shift)$/.test(f);Ie.prototype[f]=function(){var Le=arguments;if(se&&!this.__chain__){var Ve=this.value();return b.apply(ri(Ve)?Ve:[],Le)}return this[O](function(ot){return b.apply(ri(ot)?ot:[],Le)})}}),tn(Gr.prototype,function(f,b){var O=Ie[b];if(O){var se=O.name+"";ti.call(Io,se)||(Io[se]=[]),Io[se].push({name:b,func:O})}}),Io[Ym(n,k).name]=[{name:"wrapper",func:n}],Gr.prototype.clone=Vh,Gr.prototype.reverse=Af,Gr.prototype.value=Uh,Ie.prototype.at=gA,Ie.prototype.chain=mA,Ie.prototype.commit=vA,Ie.prototype.next=yA,Ie.prototype.plant=_A,Ie.prototype.reverse=wA,Ie.prototype.toJSON=Ie.prototype.valueOf=Ie.prototype.value=xA,Ie.prototype.first=Ie.prototype.head,pr&&(Ie.prototype[pr]=bA),Ie},so=Xo();bs?((bs.exports=so)._=so,ur._=so):ys._=so}).call(Ca)})(qv,qv.exports);var IE=qv.exports;class za extends Wn.Polygon{constructor(n,r={}){super([],{...r,pmIgnore:!1,interactive:!0});Ze(this,"_width");Ze(this,"_height");Ze(this,"_center");Ze(this,"_rotation");Ze(this,"_isMapReady",!1);Ze(this,"properties");Ze(this,"_helperPoints",{corners:[],midPoints:[]});Ze(this,"_throttledUpdateProperties");const i=n instanceof Wn.LatLngBounds?n:Wn.latLngBounds(n);if(this._center=i.getCenter(),this._rotation=0,console.log("[Rectangle][constructor] Initialisation avec options:",{bounds:i,center:this._center,hasExplicitDimensions:!!(r.width&&r.height),width:r.width,height:r.height}),r.width&&r.height)this._width=r.width,this._height=r.height,console.log("[Rectangle][constructor] Utilisation des dimensions explicites:",{width:this._width,height:this._height});else{const s=i.getSouthWest(),o=i.getNorthEast();this._width=vn.measure("Rectangle.constructor.calculateWidth",()=>{const a=X1([s.lng,s.lat],[o.lng,s.lat],{units:"meters"});return Math.max(a,1)}),this._height=vn.measure("Rectangle.constructor.calculateHeight",()=>{const a=X1([s.lng,s.lat],[s.lng,o.lat],{units:"meters"});return Math.max(a,1)}),console.log("[Rectangle][constructor] Dimensions calculées depuis bounds:",{width:this._width,height:this._height})}(this._width<1||this._height<1)&&this._getPixelsPerMeter()>0&&(this._width=Math.max(this._width,1),this._height=Math.max(this._height,1),this._updatePolygonCoordinates()),this.properties=vn.measure("Rectangle.constructor.initProperties",()=>({type:"Rectangle",style:{...r,name:r.name||""},rotation:this._rotation})),this._throttledUpdateProperties=vn.measure("Rectangle.constructor.initThrottle",()=>IE.throttle(()=>{this.updateProperties()},100)),this.on("add",()=>{this._isMapReady=!0,this._updatePolygonCoordinates(),this.updateProperties()}),this.on("remove",()=>{this._isMapReady=!1})}_updatePolygonCoordinates(){vn.measure("Rectangle._updatePolygonCoordinates",()=>{if(!this._isMapReady||!this._map)return;console.log("[Rectangle][_updatePolygonCoordinates] Début mise à jour avec:",{width:this._width,height:this._height,center:this._center,rotation:this._rotation}),this._width=Math.max(this._width,1),this._height=Math.max(this._height,1);const n=this._width/2,r=this._height/2,i=i5([this._center.lng,this._center.lat],r,0,{units:"meters"}).geometry.coordinates,s=i5([this._center.lng,this._center.lat],n,90,{units:"meters"}).geometry.coordinates,o=Math.abs(i[1]-this._center.lat)*2,a=Math.abs(s[0]-this._center.lng)*2,l=[Wn.latLng(this._center.lat+o/2,this._center.lng-a/2),Wn.latLng(this._center.lat+o/2,this._center.lng+a/2),Wn.latLng(this._center.lat-o/2,this._center.lng+a/2),Wn.latLng(this._center.lat-o/2,this._center.lng-a/2)];if(this._rotation===0){this.setLatLngs(l);return}const c=this._map.latLngToContainerPoint(this._center),d=l.map(A=>this._map.latLngToContainerPoint(A)),p=-this._rotation*Math.PI/180,v=Math.cos(p),m=Math.sin(p),E=d.map(A=>{const k=A.x-c.x,D=A.y-c.y;return Wn.point(c.x+(k*v-D*m),c.y+(k*m+D*v))}).map(A=>this._map.containerPointToLatLng(A));console.log("[Rectangle][_updatePolygonCoordinates] Résultat final:",{corners:E,dimensions:{width:this._width,height:this._height}}),this.setLatLngs(E),this.fire("coordinates:updated",{corners:E,center:this._center,rotation:this._rotation,dimensions:{width:this._width,height:this._height}})})}_getPixelsPerMeter(){return vn.measure("Rectangle._getPixelsPerMeter",()=>{if(!this._isMapReady||!this._map)return 1;const n=Math.max(this._width/1e3,1e-4),r=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(Wn.latLng(this._center.lat,this._center.lng+n)).x-r.x,o=X1([this._center.lng,this._center.lat],[this._center.lng+n,this._center.lat],{units:"meters"}),a=Math.abs(s/o);return isNaN(a)||a<=0?(console.warn("[Rectangle][_getPixelsPerMeter] Ratio invalide, utilisation de la valeur par défaut"),1):a})}getRotatedCorners(){return vn.measure("Rectangle.getRotatedCorners",()=>{try{const n=this.getLatLngs();if(!n||!Array.isArray(n)||n.length===0){const r=this._width/2,i=this._height/2;return[Wn.latLng(this._center.lat+i,this._center.lng-r),Wn.latLng(this._center.lat+i,this._center.lng+r),Wn.latLng(this._center.lat-i,this._center.lng+r),Wn.latLng(this._center.lat-i,this._center.lng-r)]}return n[0]}catch(n){console.warn("Error in getRotatedCorners:",n);const r=this._width/2,i=this._height/2;return[Wn.latLng(this._center.lat+i,this._center.lng-r),Wn.latLng(this._center.lat+i,this._center.lng+r),Wn.latLng(this._center.lat-i,this._center.lng+r),Wn.latLng(this._center.lat-i,this._center.lng-r)]}})}getMidPoints(){return vn.measure("Rectangle.getMidPoints",()=>{try{const n=this.getRotatedCorners();if(!n||n.length<4){const i=this._width/2,s=this._height/2;return[Wn.latLng(this._center.lat+s,this._center.lng),Wn.latLng(this._center.lat,this._center.lng+i),Wn.latLng(this._center.lat-s,this._center.lng),Wn.latLng(this._center.lat,this._center.lng-i)]}if(!n.every(i=>i&&typeof i.lat=="number"&&typeof i.lng=="number"))throw new Error("Invalid corner coordinates");return[this._getMidPoint(n[3],n[0]),this._getMidPoint(n[0],n[1]),this._getMidPoint(n[1],n[2]),this._getMidPoint(n[2],n[3])]}catch(n){console.warn("Error in getMidPoints:",n);const r=this._width/2,i=this._height/2;return[Wn.latLng(this._center.lat+i,this._center.lng),Wn.latLng(this._center.lat,this._center.lng+r),Wn.latLng(this._center.lat-i,this._center.lng),Wn.latLng(this._center.lat,this._center.lng-r)]}})}_getMidPoint(n,r){return vn.measure("Rectangle._getMidPoint",()=>{if(!n||!r||typeof n.lat!="number"||typeof n.lng!="number"||typeof r.lat!="number"||typeof r.lng!="number")throw new Error("Invalid points for midpoint calculation");return Wn.latLng((n.lat+r.lat)/2,(n.lng+r.lng)/2)})}getCenter(){return vn.measure("Rectangle.getCenter",()=>this._center)}setCenter(n){vn.measure("Rectangle.setCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties(),this.updateHelperPointPositions()})}getRotation(){return vn.measure("Rectangle.getRotation",()=>this._rotation)}setRotation(n,r=!1){vn.measure("Rectangle.setRotation",()=>{this._rotation=(n%360+360)%360,this._updatePolygonCoordinates(),r&&this.updateProperties(),this.updateHelperPointPositions(),this.fire("rotation:updated",{angle:this._rotation,corners:this.getRotatedCorners(),center:this._center})})}finalizeRotation(){vn.measure("Rectangle.finalizeRotation",()=>{this.updateProperties()})}getDimensions(){return vn.measure("Rectangle.getDimensions",()=>({width:this._width,height:this._height}))}setDimensions(n,r){vn.measure("Rectangle.setDimensions",()=>{console.log("[Rectangle][setDimensions] Début de la mise à jour des dimensions:",{oldWidth:this._width,oldHeight:this._height,newWidth:n,newHeight:r}),this._width=n,this._height=r,console.log("[Rectangle][setDimensions] Mise à jour des coordonnées du polygone"),this._updatePolygonCoordinates(),console.log("[Rectangle][setDimensions] Mise à jour des propriétés"),this.updateProperties(),console.log("[Rectangle][setDimensions] Émission de l'événement dimensions:updated"),this.fire("dimensions:updated",{width:this._width,height:this._height,corners:this.getRotatedCorners(),center:this._center}),this.updateHelperPointPositions()})}resizeFromCorner(n,r){vn.measure("Rectangle.resizeFromCorner",()=>{if(!(!this._isMapReady||!this._map))try{const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter(),x=n===0||n===3?-1:1,E=n===0||n===1?1:-1,A=Math.max(Math.abs(p*2)/m,1),k=Math.max(Math.abs(v*2)/m,1),D=A*m/2,$=k*m/2,Y=x*D*c-E*$*d,te=x*D*d+E*$*c,me=Wn.point(s.x-Y,s.y-te),pe=this._map.containerPointToLatLng(me),K=[Wn.point(me.x-D,me.y+$),Wn.point(me.x+D,me.y+$),Wn.point(me.x+D,me.y-$),Wn.point(me.x-D,me.y-$)].map(N=>{const B=N.x-me.x,V=N.y-me.y;return Wn.point(me.x+(B*c-V*d),me.y+(B*d+V*c))}).map(N=>this._map.containerPointToLatLng(N));this._width=A,this._height=k,this._center=pe,this.setLatLngs(K),this.fire("coordinates:updated",{corners:K,center:this._center,rotation:this._rotation})}catch(i){console.warn("Error in resizeFromCorner:",i)}})}resizeFromSide(n,r){vn.measure("Rectangle.resizeFromSide",()=>{if(!this._isMapReady||!this._map)return;const i=this._map.latLngToContainerPoint(this._center),s=this._map.latLngToContainerPoint(r),o=s.x-i.x,a=s.y-i.y,l=-this._rotation*Math.PI/180,c=Math.cos(l),d=Math.sin(l),p=o*c-a*d,v=o*d+a*c,m=this._getPixelsPerMeter();n%2===0?this._height=Math.abs(v*2)/m:this._width=Math.abs(p*2)/m,this._updatePolygonCoordinates(),this.updateProperties()})}moveFromCenter(n){vn.measure("Rectangle.moveFromCenter",()=>{this._center=n,this._updatePolygonCoordinates(),this.updateProperties()})}updateProperties(){vn.measure("Rectangle.updateProperties",()=>{var i,s,o;const n=this.getRotatedCorners(),r=((s=(i=this.properties)==null?void 0:i.style)==null?void 0:s.name)||"";this.properties={...this.properties,width:this._width,height:this._height,surface:this._width*this._height,perimeter:2*(this._width+this._height),center:this._center,corners:n,midPoints:this.getMidPoints(),rotation:this._rotation,style:{...this.options,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((o=this.options)==null?void 0:o.dashArray)||"",name:r}},this.fire("properties:updated",{shape:this,properties:this.properties,corners:n,midPoints:this.getMidPoints()})})}setName(n){vn.measure("Rectangle.setName",()=>{this.properties.style||(this.properties.style={}),this.properties.style.name=n,this.fire("properties:updated",{shape:this,properties:this.properties})})}getName(){return vn.measure("Rectangle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""})}generateHelperPoints(n,r="rgba(220, 38, 38, 0.5)",i="rgba(37, 99, 235, 0.5)"){vn.measure("Rectangle.generateHelperPoints",()=>{this.clearHelperPoints();const s=this.getRotatedCorners(),o=this.getMidPoints();this._helperPoints.corners=s.map(a=>Wn.circleMarker(a,{radius:5,color:r,fillColor:r,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-corner",pmIgnore:!0,interactive:!1}).addTo(n)),this._helperPoints.midPoints=o.map(a=>Wn.circleMarker(a,{radius:5,color:i,fillColor:i,fillOpacity:.6,weight:1,opacity:.8,className:"rectangle-helper-midpoint",pmIgnore:!0,interactive:!1}).addTo(n))})}clearHelperPoints(){vn.measure("Rectangle.clearHelperPoints",()=>{this._helperPoints.corners.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de coin:",r)}}),this._helperPoints.midPoints.forEach(n=>{if(n&&n.remove)try{n.remove()}catch(r){console.warn("Erreur lors de la suppression d'un point d'aide de milieu:",r)}}),this._helperPoints.corners=[],this._helperPoints.midPoints=[]})}updateHelperPointPositions(){vn.measure("Rectangle.updateHelperPointPositions",()=>{if(this._helperPoints.corners.length===0&&this._helperPoints.midPoints.length===0)return;const n=this.getRotatedCorners(),r=this.getMidPoints();n.forEach((i,s)=>{this._helperPoints.corners[s]&&this._helperPoints.corners[s].setLatLng(i)}),r.forEach((i,s)=>{this._helperPoints.midPoints[s]&&this._helperPoints.midPoints[s].setLatLng(i)})})}findClosestHelperPoint(n){return vn.measure("Rectangle.findClosestHelperPoint",()=>{const r=this.getRotatedCorners(),i=this.getMidPoints(),s=[...r,...i];if(s.length===0)return null;let o=s[0],a=n.distanceTo(o);for(let l=1;l<s.length;l++){const c=n.distanceTo(s[l]);c<a&&(a=c,o=s[l])}return o})}toggleHelperPoints(n,r,i,s){vn.measure("Rectangle.toggleHelperPoints",()=>{r&&n?this.generateHelperPoints(n,i,s):this.clearHelperPoints()})}containsPoint(n){return vn.measure("Rectangle.containsPoint",()=>{const r=this.getRotatedCorners();if(r.length!==4)return!1;let i=!1;for(let s=0,o=r.length-1;s<r.length;o=s++){const a=r[s].lng,l=r[s].lat,c=r[o].lng,d=r[o].lat;l>n.lat!=d>n.lat&&n.lng<(c-a)*(n.lat-l)/(d-l)+a&&(i=!i)}return i})}}var Ki=(t=>(t.PRIVATE="private",t.COMPANY="company",t.EMPLOYEE="employee",t.VISITOR="visitor",t))(Ki||{});const wf=jp("notes",()=>{const t=Lt([]),e=Lt([]),n=Zn(()=>N=>t.value.find(B=>B.id===N)),r=Zn(()=>N=>{const B=t.value.find(V=>V.id===N);return B?B.color:"#6B7280"}),i=Zn(()=>N=>e.value.filter(B=>B.columnId===N).sort((B,V)=>B.order-V.order)),s=Zn(()=>t.value.find(N=>N.isDefault)||t.value[0]),o=Zn(()=>[...t.value].sort((N,B)=>N.order-B.order)),a=Zn(()=>N=>{const B=da();if(!B.user)return!1;if(B.isAdmin)return!0;switch(N.accessLevel){case"private":return!0;case"company":return B.isAdmin||B.isEntreprise;case"employee":return B.isAdmin||B.isEntreprise||B.isSalarie;case"visitor":return B.isAdmin||B.isEntreprise||B.isSalarie||B.isVisiteur;default:return!1}}),l=Zn(()=>e.value.filter(N=>a.value(N))),c=Zn(()=>N=>l.value.filter(B=>B.columnId===N).sort((B,V)=>B.order-V.order));async function d(){console.log(`
[NotesStore][loadColumns] Initialisation des colonnes fixes...`);try{const N=[{id:"1",title:"Idées",color:"#8B5CF6",order:0,isDefault:!1},{id:"2",title:"À faire",color:"#F59E0B",order:1,isDefault:!0},{id:"3",title:"En cours",color:"#3B82F6",order:2,isDefault:!1},{id:"4",title:"Terminées",color:"#10B981",order:3,isDefault:!1},{id:"5",title:"Autres",color:"#6B7280",order:4,isDefault:!1}];t.value=N,console.log("[NotesStore][loadColumns] Colonnes fixes initialisées:",t.value)}catch(N){throw console.error("[NotesStore][loadColumns] Erreur:",N),N}}async function p(N){console.log(`
[NotesStore][addColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function v(N,B){console.log(`
[NotesStore][updateColumn] Mise à jour locale de la colonne:`,N,B);try{const V=t.value.findIndex(R=>R.id===N);V!==-1&&(t.value[V]={...t.value[V],...B},console.log("[NotesStore][updateColumn] État des colonnes après mise à jour:",t.value))}catch(V){throw console.error("[NotesStore][updateColumn] Erreur:",V),V}}async function m(N){console.log(`
[NotesStore][removeColumn] Fonction désactivée - Utilisation de colonnes fixes`)}async function x(N){console.log(`
[NotesStore][reorderColumns] FONCTION DÉSACTIVÉE - Le déplacement des colonnes n'est plus possible`)}function E(N){if(!N)return"private";switch(N.toLowerCase()){case"private":return"private";case"company":return"company";case"employee":return"employee";case"visitor":return"visitor";default:return console.warn(`[NotesStore] Niveau d'accès inconnu: ${N}, utilisation de PRIVATE par défaut`),"private"}}function A(N){if(!N.id)throw console.error("[NotesStore][addNote] Erreur: ID du backend manquant"),new Error("L'ID du backend est requis pour ajouter une note");const B=new Date().toISOString(),V=e.value.filter(W=>W.columnId===N.columnId),R=V.length>0?Math.max(...V.map(W=>W.order))+1:0,j=E(N.access_level);return console.log("[NotesStore][addNote] Ajout d'une note avec ID backend:",N.id,"et niveau d'accès:",j),e.value.push({...N,id:N.id,order:R,accessLevel:j,createdAt:B,updatedAt:B,comments:[],photos:[]}),N.id}function k(N,B){console.log(`
[NotesStore][updateNote] Mise à jour de la note:`,N,B);try{const V=e.value.findIndex(R=>R.id===N);V!==-1&&(B.color&&(B.style={...e.value[V].style,color:B.color,fillColor:B.color}),B.access_level&&(B.accessLevel=E(B.access_level),delete B.access_level),e.value[V]={...e.value[V],...B},console.log("[NotesStore][updateNote] Note mise à jour:",e.value[V]))}catch(V){throw console.error("[NotesStore][updateNote] Erreur:",V),V}}function D(N){e.value.findIndex(V=>V.id===N)!==-1?(console.log("[NotesStore][removeNote] Suppression de la note avec ID:",N),e.value=e.value.filter(V=>V.id!==N)):console.warn("[NotesStore][removeNote] Tentative de suppression d'une note inexistante avec ID:",N)}function $(N,B){const V=e.value.findIndex(R=>R.id===N);if(V!==-1){const R=e.value[V];if(R.columnId!==B){const W=e.value.filter(_e=>_e.columnId===B),X=W.length>0?Math.max(...W.map(_e=>_e.order))+1:0,oe={...R,columnId:B,order:X,updatedAt:new Date().toISOString()};e.value[V]=oe}else e.value[V]={...e.value[V],updatedAt:new Date().toISOString()}}}function Y(N,B){B.forEach((V,R)=>{const j=e.value.findIndex(W=>W.id===V&&W.columnId===N);j!==-1&&(e.value[j]={...e.value[j],order:R,updatedAt:new Date().toISOString()})})}function te(N){switch(N){case"private":return"Privé";case"company":return"Entreprise";case"employee":return"Salariés";case"visitor":return"Visiteurs";default:return"Inconnu"}}async function me(N,B){try{const V=da();if(!V.user)throw new Error("Vous devez être connecté pour ajouter un commentaire");if(!V.isEntreprise&&!V.isAdmin)throw new Error("Seules les entreprises peuvent ajouter des commentaires");if(!e.value.some(Ce=>Ce.id===N))throw new Error(`La note avec l'ID ${N} n'existe pas`);const W=(await Sa.addComment(N,B)).data,X=e.value.findIndex(Ce=>Ce.id===N);if(X===-1)return;const oe=e.value[X];oe.comments||(oe.comments=[]);const _e={id:W.id,text:W.text,createdAt:W.created_at,userId:W.user,userName:W.user_name,userRole:W.user_role};return oe.comments.push(_e),oe.updatedAt=new Date().toISOString(),e.value[X]={...oe},_e.id}catch(V){throw console.error("Erreur lors de l'ajout du commentaire:",V),V}}async function pe(N,B){try{const V=e.value.findIndex(W=>W.id===N);if(V===-1)throw new Error(`La note avec l'ID ${N} n'existe pas`);const R=e.value[V];if(!R.comments||R.comments.length===0)throw new Error("Aucun commentaire trouvé pour cette note");if(!R.comments.some(W=>W.id===B))throw new Error(`Le commentaire avec l'ID ${B} n'existe pas`);await Sa.deleteComment(N,B),R.comments=R.comments.filter(W=>W.id!==B),R.updatedAt=new Date().toISOString(),e.value[V]={...R}}catch(V){throw console.error("Erreur lors de la suppression du commentaire:",V),V}}async function I(N,B){try{if(B.id&&B.image){const V=e.value.findIndex(W=>W.id===N);if(V===-1)return;const R=e.value[V];R.photos||(R.photos=[]);const j={id:B.id,url:B.image,caption:B.caption,createdAt:B.created_at};return R.photos.push(j),R.updatedAt=new Date().toISOString(),e.value[V]={...R},j.id}else{const V=new FormData;V.append("image",B.url),B.caption&&V.append("caption",B.caption);const j=(await Sa.addPhoto(N,V)).data,W=e.value.findIndex(_e=>_e.id===N);if(W===-1)return;const X=e.value[W];X.photos||(X.photos=[]);const oe={id:j.id,url:j.image,caption:j.caption,createdAt:j.created_at};return X.photos.push(oe),X.updatedAt=new Date().toISOString(),e.value[W]={...X},oe.id}}catch(V){throw console.error("Erreur lors de l'ajout de la photo:",V),V}}async function z(N,B){try{await Sa.deletePhoto(N,B);const V=e.value.findIndex(W=>W.id===N);if(V===-1){console.error("[NotesStore] Note non trouvée pour la suppression de la photo");return}e.value[V].photos||(e.value[V].photos=[]);const R=e.value[V],j=(R.photos||[]).filter(W=>W.id!==B);e.value[V]={...R,photos:j,updatedAt:new Date().toISOString()},console.log("[NotesStore] Photo supprimée avec succès, photos restantes:",j.length)}catch(V){throw console.error("Erreur lors de la suppression de la photo:",V),V}}async function K(N,B,V){try{await Sa.updatePhoto(N,B,{caption:V});const R=e.value.findIndex(X=>X.id===N);if(R===-1||!e.value[R].photos)return;const j=e.value[R],W=j.photos.findIndex(X=>X.id===B);if(W===-1)return;j.photos[W].caption=V,j.updatedAt=new Date().toISOString(),e.value[R]={...j}}catch(R){throw console.error("Erreur lors de la mise à jour de la légende:",R),R}}return{columns:t,notes:e,getColumnById:n,getColumnColor:r,getNotesByColumn:i,getDefaultColumn:s,getSortedColumns:o,hasAccessToNote:a,getAccessibleNotes:l,getAccessibleNotesByColumn:c,getAccessLevelLabel:te,loadColumns:d,addColumn:p,updateColumn:v,removeColumn:m,reorderColumns:x,addNote:A,updateNote:k,removeNote:D,moveNote:$,reorderNotes:Y,addComment:me,removeComment:pe,addPhoto:I,removePhoto:z,updatePhoto:K}});class kh extends Vt.Marker{constructor(n,r={}){const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${r.color||"#2b6451"}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `,a={icon:Vt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]}),draggable:!1,autoPan:!0};super(n,a);Ze(this,"properties");Ze(this,"_planSaved",!1);Ze(this,"_isMoving",!1);this.properties={type:"Note",name:r.name||"Note géolocalisée",description:r.description||"",columnId:r.columnId||"1",accessLevel:r.accessLevel||Ki.PRIVATE,category:r.category||"forages",style:{color:r.color||"#2b6451",weight:r.weight||2,fillColor:r.fillColor||"#2b6451",fillOpacity:r.fillOpacity!==void 0?r.fillOpacity:.8,radius:r.radius||12},comments:[],photos:[],order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},console.log("[GeoNote][constructor] Note créée avec columnId:",this.properties.columnId),this.bindPopup(this.createPopupContent()),this.on("dblclick",this.onDoubleClick),window.addEventListener("geonote:updateStyle",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][updateStyle] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][updateStyle] Correspondance trouvée, mise à jour du style:",l.detail.style),this.setNoteStyle(l.detail.style),this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,...l.detail.style}),this.bindPopup(this.createPopupContent()))}),window.addEventListener("geonote:update",l=>{const c=l.detail.noteId,d=this._dbId||this.properties.id;console.log("[GeoNote][update] Événement reçu pour noteId:",c,"Comparaison avec ID backend:",d),c===d&&(console.log("[GeoNote][update] Correspondance trouvée, mise à jour des propriétés:",l.detail.properties),this.properties={...this.properties,name:l.detail.properties.name,description:l.detail.properties.description,columnId:l.detail.properties.columnId,accessLevel:l.detail.properties.accessLevel,style:l.detail.properties.style},this.setNoteStyle(l.detail.properties.style),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][update] Propriétés mises à jour:",this.properties))}),console.log("[GeoNote][constructor] Note créée:",{location:n,name:this.properties.name,type:this.properties.type,style:this.properties.style})}createPopupContent(){const n=document.createElement("div");n.className="geo-note-popup",n.style.display="flex",n.style.flexDirection="column";const r=document.createElement("div");r.className="geo-note-header",n.appendChild(r);const i=document.createElement("div");i.className="geo-note-title",i.textContent=this.properties.name,r.appendChild(i);const s=document.createElement("div");s.className="geo-note-badges",r.appendChild(s);const o=document.createElement("div");o.className="geo-note-badge",o.style.backgroundColor=this.getColumnColor(this.properties.columnId),o.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5z" />
        <path d="M11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
      </svg>
      ${this.getColumnLabel(this.properties.columnId)}
    `,s.appendChild(o);const a=document.createElement("div");if(a.className="geo-note-badge",a.style.backgroundColor=this.getAccessLevelColor(this.properties.accessLevel),a.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
        <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
      </svg>
      ${this.getAccessLevelLabel(this.properties.accessLevel)}
    `,s.appendChild(a),this.properties.description&&this.properties.description.trim()!==""){const p=document.createElement("div");p.className="geo-note-content",n.appendChild(p);const v=document.createElement("div");v.className="geo-note-description",v.textContent=this.properties.description,p.appendChild(v)}const l=document.createElement("div");l.className="geo-note-buttons",l.style.display="flex",l.style.width="100%",l.style.marginTop="auto",l.style.borderTop="1px solid #E5E7EB",n.appendChild(l);const c=document.createElement("button");c.className="geo-note-edit-button",c.style.flex="1",c.style.height="36px",c.style.border="none",c.style.borderRight="1px solid #E5E7EB",c.style.background="transparent",c.style.color="#4B5563",c.style.fontSize="11px",c.style.fontWeight="500",c.style.display="flex",c.style.alignItems="center",c.style.justifyContent="center",c.style.cursor="pointer",c.style.padding="0",c.style.margin="0",c.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z" />
      </svg>
      Éditer
    `,c.onclick=p=>{p.stopPropagation(),this.editNote()},l.appendChild(c);const d=document.createElement("button");return d.className="geo-note-open-button",d.style.flex="1",d.style.height="36px",d.style.border="none",d.style.background="transparent",d.style.color="#3B82F6",d.style.fontSize="11px",d.style.fontWeight="500",d.style.display="flex",d.style.alignItems="center",d.style.justifyContent="center",d.style.cursor="pointer",d.style.padding="0",d.style.margin="0",d.innerHTML=`
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-3 h-3 mr-1 inline-block align-text-bottom">
        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
      </svg>
      Itinéraire
    `,d.onclick=p=>{p.stopPropagation(),this.openInGoogleMaps()},l.appendChild(d),n}getColumnColor(n){return{1:"#8B5CF6",2:"#F59E0B",3:"#3B82F6",4:"#10B981",5:"#6B7280"}[n]||"#6B7280"}getColumnLabel(n){return{1:"Idées",2:"À faire",3:"En cours",4:"Terminées",5:"Autres"}[n]||"Colonne "+n}getAccessLevelLabel(n){switch(n){case Ki.PRIVATE:return"Privé";case Ki.COMPANY:return"Entreprise";case Ki.EMPLOYEE:return"Salariés";case Ki.VISITOR:return"Visiteurs";default:return"Inconnu"}}getAccessLevelColor(n){switch(n){case Ki.PRIVATE:return"#9CA3AF";case Ki.COMPANY:return"#EF4444";case Ki.EMPLOYEE:return"#F59E0B";case Ki.VISITOR:return"#10B981";default:return"#6B7280"}}onDoubleClick(n){Vt.DomEvent.stopPropagation(n),this.editNote()}editNote(){this.closePopup();const n=this._dbId||this.properties.id||this._leaflet_id;console.log(`[GeoNote][editNote] Édition de note - ID backend: ${this._dbId}, ID properties: ${this.properties.id}, ID Leaflet: ${this._leaflet_id}, ID utilisé: ${n}`);const r={id:n,title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},columnId:this.properties.columnId||"1",accessLevel:this.properties.accessLevel||"company",style:this.properties.style||{color:"#2b6451",weight:2,opacity:1,fillColor:"#2b6451",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:this.properties.comments||[],photos:this.properties.photos||[]};console.log("[GeoNote][editNote] Édition de note avec columnId:",r.columnId),console.log("[GeoNote] Émission de l'événement note:edit avec",r);const i=new CustomEvent("geonote:edit",{detail:{note:r,source:this}});window.dispatchEvent(i),this.fire("note:edit",{note:r,source:this})}openInGoogleMaps(){this.closePopup();const n=this.getLatLng().lat,r=this.getLatLng().lng,i=`https://www.google.com/maps/dir/?api=1&destination=${n},${r}`;window.open(i,"_blank")}updateProperties(){var o,a;this.properties.type="Note",this.properties.category||(this.properties.category="forages"),this.properties.accessLevel||(this.properties.accessLevel=Ki.PRIVATE);const n=(o=this.getElement())==null?void 0:o.querySelector(".geo-note-marker"),r=n?window.getComputedStyle(n).color:"#2b6451",i=((a=this.properties.style)==null?void 0:a.radius)||12,s=this.properties.style||{};this.properties.style={...s,color:r,weight:2,fillColor:r,fillOpacity:.8,radius:i,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category}}setNoteStyle(n){console.log("[GeoNote][setNoteStyle] Mise à jour du style:",n);const r=n.color||n.fillColor||"#2b6451",i=n.fillColor||n.color||"#2b6451";console.log("[GeoNote][setNoteStyle] Nouvelles couleurs - stroke:",r,"fill:",i);const s=`
      <div class="geo-note-marker">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="${i}" width="24" height="24">
          <path d="M12 22s-8-4.5-8-11.8A8 8 0 0 1 12 2a8 8 0 0 1 8 8.2c0 7.3-8 11.8-8 11.8z" />
          <circle cx="12" cy="10" r="3" fill="white" />
        </svg>
      </div>
    `,o=Vt.divIcon({html:s,className:"",iconSize:[24,36],iconAnchor:[12,36],popupAnchor:[0,-36]});this.setIcon(o);const a=n._accessLevel||n.accessLevel||this.properties.accessLevel,l=n.category||this.properties.category;this.properties&&this.properties.style&&(this.properties.style={...this.properties.style,color:r,weight:n.weight||this.properties.style.weight||2,fillColor:i,fillOpacity:n.fillOpacity!==void 0?n.fillOpacity:this.properties.style.fillOpacity||.8,radius:n.radius||this.properties.style.radius||12,_accessLevel:a,accessLevel:a,category:l}),a&&(this.properties.accessLevel=a),l&&(this.properties.category=l),this.refreshIconStyle()}refreshIconStyle(){const n=this.getElement();n&&(n.style.display="none",n.offsetHeight,n.style.display="")}toBackendFormat(n){this.updateProperties();const r=this.getLatLng(),s={...{...this.properties.style,radius:this.properties.style.radius||12},_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel},o=this.properties.columnId||"1";return console.log("[GeoNote][toBackendFormat] Sauvegarde de note avec columnId:",o),{id:n,type_forme:"Note",data:{location:{type:"Point",coordinates:[r.lng,r.lat]},name:this.properties.name,description:this.properties.description,columnId:o,accessLevel:this.properties.accessLevel,category:this.properties.category||"forages",style:s,comments:this.properties.comments||[],photos:this.properties.photos||[],order:this.properties.order||0,createdAt:this.properties.createdAt||new Date().toISOString(),updatedAt:new Date().toISOString()}}}updateFromBackendData(n){var l,c,d;this.properties.type="Note";const r=n.style?{...n.style,radius:n.style.radius||12}:this.properties.style,i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||this.properties.accessLevel||Ki.PRIVATE;console.log("[GeoNote][updateFromBackendData] Niveau d'accès récupéré:",i);const s=((d=n.style)==null?void 0:d.category)||n.category||this.properties.category||"forages";console.log("[GeoNote][updateFromBackendData] Catégorie récupérée:",s);const o=n.columnId||this.properties.columnId||"1";console.log("[GeoNote][updateFromBackendData] Mise à jour de note avec columnId:",o);const a={...r,_accessLevel:i,accessLevel:i,category:s};this.properties={...this.properties,name:n.name||this.properties.name,description:n.description||this.properties.description,columnId:o,accessLevel:i,category:s,style:a,comments:n.comments||this.properties.comments||[],photos:n.photos||this.properties.photos||[],order:n.order||this.properties.order||0,createdAt:n.createdAt||this.properties.createdAt,updatedAt:n.updatedAt||new Date().toISOString()},this.setNoteStyle(a),this.bindPopup(this.createPopupContent()),console.log("[GeoNote][updateFromBackendData] Note mise à jour:",{name:this.properties.name,type:this.properties.type,category:this.properties.category,accessLevel:this.properties.accessLevel,style:this.properties.style})}static fromBackendData(n){var l,c,d,p,v,m,x,E;let r;if(typeof n.location=="object"&&!Array.isArray(n.location)&&n.location.type==="Point"){const A=n.location.coordinates;console.log("[GeoNote][fromBackendData] Coordonnées GeoJSON reçues:",A),r=[A[1],A[0]]}else if(Array.isArray(n.location)&&n.location.length===2)r=n.location;else throw new Error("Les données de la note ne contiennent pas de position valide");console.log("[GeoNote][fromBackendData] Création d'une note à partir des données:",n),console.log("[GeoNote][fromBackendData] Position utilisée:",r);const i=((l=n.style)==null?void 0:l._accessLevel)||((c=n.style)==null?void 0:c.accessLevel)||n.accessLevel||Ki.PRIVATE;console.log("[GeoNote][fromBackendData] Niveau d'accès récupéré:",i,"Style:",n.style);const s=((d=n.style)==null?void 0:d.category)||n.category||"forages";console.log("[GeoNote][fromBackendData] Catégorie récupérée:",s),n.accessLevel=i,n.category=s;const o=n.columnId||"1";console.log("[GeoNote][fromBackendData] Création de note avec columnId:",o);const a=new kh(r,{name:n.name,description:n.description,columnId:o,accessLevel:i,category:n.category||"forages",color:(p=n.style)==null?void 0:p.color,weight:(v=n.style)==null?void 0:v.weight,fillColor:(m=n.style)==null?void 0:m.fillColor,fillOpacity:(x=n.style)==null?void 0:x.fillOpacity,radius:(E=n.style)==null?void 0:E.radius});return a.properties.type="Note",a.properties.comments=n.comments||[],a.properties.photos=n.photos||[],a.properties.order=n.order||0,a.properties.createdAt=n.createdAt||new Date().toISOString(),a.properties.updatedAt=n.updatedAt||new Date().toISOString(),n.style&&a.setNoteStyle(n.style),a.bindPopup(a.createPopupContent()),console.log("[GeoNote][fromBackendData] Note créée:",{location:r,name:a.properties.name,type:a.properties.type,category:a.properties.category,accessLevel:a.properties.accessLevel,style:a.properties.style}),a}async saveNote(n){if(this._planSaved)return this._dbId||0;console.log("[GeoNote][saveNote] Sauvegarde directe de la note via l'API");try{this.updateProperties();const r={...this.properties.style,_accessLevel:this.properties.accessLevel,accessLevel:this.properties.accessLevel,category:this.properties.category},i={title:this.properties.name,description:this.properties.description,location:{type:"Point",coordinates:[this.getLatLng().lng,this.getLatLng().lat]},column:this.properties.columnId||"1",access_level:this.properties.accessLevel||"company",style:r,category:this.properties.category||"forages",comments:this.properties.comments||[],photos:this.properties.photos||[]};n&&(i.plan=n),console.log("[GeoNote][saveNote] Données à envoyer:",i);let s;return this._dbId?(s=(await Sa.updateNote(this._dbId,i)).data,console.log("[GeoNote][saveNote] Note mise à jour avec succès:",s)):(s=(await Sa.createNote(i)).data,console.log("[GeoNote][saveNote] Note créée avec succès:",s),this._dbId=s.id,wf().addNote({...s,id:s.id,columnId:s.column,accessLevel:s.access_level})),this._planSaved=!0,s.id}catch(r){return console.error("[GeoNote][saveNote] Erreur lors de la sauvegarde de la note:",r),nu().error("Erreur lors de la sauvegarde de la note"),0}}triggerPlanSave(){const n=localStorage.getItem("lastPlanId");n?(console.log(`[GeoNote][triggerPlanSave] Sauvegarde de la note avec le plan ${n}`),this.saveNote(parseInt(n))):(console.log("[GeoNote][triggerPlanSave] Aucun plan courant, sauvegarde sans association"),this.saveNote());const r=new CustomEvent("geonote:savePlan");window.dispatchEvent(r)}resetPlanSaveState(){this._planSaved=!1}moveTo(n){this.setLatLng(n),this.fire("note:moved",{latlng:n,note:this}),this.bindPopup(this.createPopupContent()),this.triggerPlanSave()}startMoving(){this._isMoving=!0,this.closePopup(),this.fire("note:movestart",{latlng:this.getLatLng(),note:this})}finishMoving(){this._isMoving=!1,this.fire("note:moveend",{latlng:this.getLatLng(),note:this}),this.triggerPlanSave()}isMoving(){return this._isMoving}}function xz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function Lz(t){if(!t||typeof t!="object")return console.log("[DrawingStore] ElevationData invalide: pas un objet",{data:t}),!1;const e=Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2,n=typeof t.style=="object"&&t.style!==null,r=!t.elevationData||Array.isArray(t.elevationData)&&t.elevationData.every(i=>typeof i=="object"&&"distance"in i&&"elevation"in i);return e&&n&&r}function Sz(t){return t&&Array.isArray(t.points)&&t.points.length>0&&Array.isArray(t.points[0])&&t.points[0].length===2}function g5(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,A,k,D,$,Y,te,me,pe,I,z,K,N;if(console.log("[DrawingStore] Conversion de la forme en élément",{type:(e=t.properties)==null?void 0:e.type,name:(r=(n=t.properties)==null?void 0:n.style)==null?void 0:r.name,properties:t.properties}),((i=t.properties)==null?void 0:i.type)==="Note"){const B=t.getLatLng();return{type_forme:"Note",data:{points:[[B.lng,B.lat]],style:{color:((s=t.properties.style)==null?void 0:s.color)||"#2b6451",weight:((o=t.properties.style)==null?void 0:o.weight)||3,opacity:((a=t.properties.style)==null?void 0:a.opacity)||1,fillColor:((l=t.properties.style)==null?void 0:l.fillColor)||"#2b6451",fillOpacity:((c=t.properties.style)==null?void 0:c.fillOpacity)||.2,name:((d=t.properties.style)==null?void 0:d.name)||""}}}}if(t instanceof Sd||((p=t.properties)==null?void 0:p.type)==="ElevationLine")return{type_forme:"ElevationLine",data:{points:t.getLatLngs().map(R=>[R.lng,R.lat]),style:{color:((v=t.properties.style)==null?void 0:v.color)||"#2b6451",weight:((m=t.properties.style)==null?void 0:m.weight)||4,opacity:((x=t.properties.style)==null?void 0:x.opacity)||.8,name:((E=t.properties.style)==null?void 0:E.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",elevationData:t.properties.elevationData,minElevation:t.properties.minElevation,maxElevation:t.properties.maxElevation,elevationGain:t.properties.elevationGain,elevationLoss:t.properties.elevationLoss,averageSlope:t.properties.averageSlope,maxSlope:t.properties.maxSlope}};if(t instanceof cd||((A=t.properties)==null?void 0:A.type)==="Polygon")return{type_forme:"Polygon",data:{points:t.getLatLngs()[0].map(R=>[R.lng,R.lat]),style:{color:((k=t.properties.style)==null?void 0:k.color)||"#2b6451",weight:((D=t.properties.style)==null?void 0:D.weight)||3,opacity:(($=t.properties.style)==null?void 0:$.opacity)||1,fillColor:((Y=t.properties.style)==null?void 0:Y.fillColor)||"#2b6451",fillOpacity:((te=t.properties.style)==null?void 0:te.fillOpacity)||.2,name:((me=t.properties.style)==null?void 0:me.name)||""},category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor"}};if(t instanceof ea||((pe=t.properties)==null?void 0:pe.type)==="Line")return{type_forme:"Line",data:{points:t.getLatLngs().map(R=>[R.lng,R.lat]),category:t.properties.category||"forages",accessLevel:t.properties.accessLevel||"visitor",style:{color:((I=t.properties.style)==null?void 0:I.color)||"#2b6451",weight:((z=t.properties.style)==null?void 0:z.weight)||3,opacity:((K=t.properties.style)==null?void 0:K.opacity)||1,name:((N=t.properties.style)==null?void 0:N.name)||""}}};throw new Error("Type de forme non reconnu")}function Cz(t){var e,n,r,i,s,o,a,l,c,d,p,v,m,x,E,A,k,D,$,Y,te,me,pe,I,z,K,N,B,V,R,j,W,X,oe,_e,Ce,De,Z,G,re,he,ce,ve;switch(console.log("[DrawingStore] Conversion de l'élément stocké en forme",{element:t}),t.type_forme){case"Polygon":{const ee=t.data;if(!xz(ee))return console.error("[DrawingStore] Données invalides pour Polygon"),null;const J=ee.points.map(Ye=>Wn.latLng(Ye[1],Ye[0])),Oe=((e=ee.style)==null?void 0:e._accessLevel)||((n=ee.style)==null?void 0:n.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] Polygon - Niveau d'accès récupéré:",Oe,"Style:",ee.style),ee.accessLevel=Oe;const Te=new cd([J],{color:((r=ee.style)==null?void 0:r.color)||"#2b6451",weight:((i=ee.style)==null?void 0:i.weight)||3,opacity:((s=ee.style)==null?void 0:s.opacity)||1,fillColor:((o=ee.style)==null?void 0:o.fillColor)||"#2b6451",fillOpacity:((a=ee.style)==null?void 0:a.fillOpacity)||.2,dashArray:((l=ee.style)==null?void 0:l.dashArray)||"",name:((c=ee.style)==null?void 0:c.name)||"",category:ee.category||"forages",accessLevel:Oe});return Te.updateProperties(),Te}case"ElevationLine":{const ee=t.data;if(!Lz(ee))return console.error("[DrawingStore] Données invalides pour ElevationLine"),null;const J=ee.points.map(Ye=>Wn.latLng(Ye[1],Ye[0])),Oe=((d=ee.style)==null?void 0:d._accessLevel)||((p=ee.style)==null?void 0:p.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] ElevationLine - Niveau d'accès récupéré:",Oe,"Style:",ee.style),ee.accessLevel=Oe;const Te=new Sd(J,{color:((v=ee.style)==null?void 0:v.color)||"#2b6451",weight:((m=ee.style)==null?void 0:m.weight)||4,opacity:((x=ee.style)==null?void 0:x.opacity)||.8,name:((E=ee.style)==null?void 0:E.name)||"",category:ee.category||"forages",accessLevel:Oe});return Te.properties={type:"ElevationLine",category:ee.category||"forages",accessLevel:Oe,style:{...ee.style||{},name:((A=ee.style)==null?void 0:A.name)||""},elevationData:ee.elevationData,minElevation:ee.minElevation,maxElevation:ee.maxElevation,elevationGain:ee.elevationGain,elevationLoss:ee.elevationLoss,averageSlope:ee.averageSlope,maxSlope:ee.maxSlope,dataSource:"restored"},ee.elevationData&&Te.updateElevationProfile(),console.log("[DrawingStore] ElevationLine restored:",{points:J.length,hasElevationData:!!ee.elevationData,name:(k=ee.style)==null?void 0:k.name,properties:Te.properties}),Te}case"Line":{const ee=t.data;if(!Sz(ee))return console.error("[DrawingStore] Données invalides pour Ligne"),null;const J=ee.points.map(Ye=>Wn.latLng(Ye[1],Ye[0])),Oe=((D=ee.style)==null?void 0:D._accessLevel)||(($=ee.style)==null?void 0:$.accessLevel)||ee.accessLevel||"visitor";console.log("[DrawingStore] Line - Niveau d'accès récupéré:",Oe,"Style:",ee.style),ee.accessLevel=Oe;const Te=new ea(J,{...ee.style||{},name:((Y=ee.style)==null?void 0:Y.name)||"",category:ee.category||"forages",accessLevel:Oe});return Te.updateProperties(),Te}case"Rectangle":{const ee=t.data;if(console.log("[DrawingStore][convertStoredElementToShape] Restauration Rectangle:",{data:ee,bounds:ee.bounds,width:ee.width,height:ee.height,rotation:ee.rotation}),!ee.bounds)return console.error("[DrawingStore] Données de bounds manquantes pour Rectangle"),null;const J=new Wn.LatLngBounds(Wn.latLng(ee.bounds.southWest[1],ee.bounds.southWest[0]),Wn.latLng(ee.bounds.northEast[1],ee.bounds.northEast[0])),Oe=new za(J,{color:((te=ee.style)==null?void 0:te.color)||"#2b6451",weight:((me=ee.style)==null?void 0:me.weight)||3,opacity:((pe=ee.style)==null?void 0:pe.opacity)||1,fillColor:((I=ee.style)==null?void 0:I.fillColor)||"#2b6451",fillOpacity:((z=ee.style)==null?void 0:z.fillOpacity)||.2,dashArray:((K=ee.style)==null?void 0:K.dashArray)||"",name:((N=ee.style)==null?void 0:N.name)||"",width:ee.width,height:ee.height});return ee.rotation&&Oe.setRotation(ee.rotation),console.log("[DrawingStore][convertStoredElementToShape] Rectangle restauré:",{bounds:Oe.getBounds(),dimensions:Oe.getDimensions(),properties:Oe.properties}),Oe}case"Circle":{console.log("[DrawingStore] Traitement d'un Circle à partir de l'API",{id:t.id,data:t.data,hasName:((V=(B=t.data)==null?void 0:B.style)==null?void 0:V.name)!==void 0,name:(j=(R=t.data)==null?void 0:R.style)==null?void 0:j.name});const ee=t.data;if(!ee.center||!ee.radius)return console.error("[DrawingStore] Données invalides pour Circle"),null;const J=Wn.circle([ee.center[1],ee.center[0]],{color:((W=ee.style)==null?void 0:W.color)||"#2b6451",weight:((X=ee.style)==null?void 0:X.weight)||3,opacity:((oe=ee.style)==null?void 0:oe.opacity)||1,fillColor:((_e=ee.style)==null?void 0:_e.fillColor)||"#2b6451",fillOpacity:((Ce=ee.style)==null?void 0:Ce.fillOpacity)||.2,dashArray:((De=ee.style)==null?void 0:De.dashArray)||"",radius:ee.radius});return J.properties={type:"Circle",radius:ee.radius,diameter:ee.radius*2,surface:Math.PI*ee.radius*ee.radius,perimeter:2*Math.PI*ee.radius,style:{...ee.style||{},name:((Z=ee.style)==null?void 0:Z.name)||""}},console.log("[DrawingStore] Cercle créé:",{centerType:typeof ee.center,center:ee.center,radius:ee.radius,style:J.properties.style,name:J.properties.style.name}),J}case"Note":{console.log("[DrawingStore] Traitement d'une Note à partir de l'API",{id:t.id,data:t.data});const ee=t.data;if(!ee.location)return console.error("[DrawingStore] Données invalides pour Note"),null;try{const J={location:ee.location,name:ee.name||"Note géolocalisée",description:ee.description||"",columnId:ee.columnId||"en-cours",accessLevel:ee.accessLevel||"private",category:ee.category||"forages",style:{color:((G=ee.style)==null?void 0:G.color)||"#2b6451",weight:((re=ee.style)==null?void 0:re.weight)||2,fillColor:((he=ee.style)==null?void 0:he.fillColor)||"#2b6451",fillOpacity:((ce=ee.style)==null?void 0:ce.fillOpacity)||.8,radius:((ve=ee.style)==null?void 0:ve.radius)||12},comments:ee.comments||[],photos:ee.photos||[],order:ee.order||0,createdAt:ee.createdAt||new Date().toISOString(),updatedAt:ee.updatedAt||new Date().toISOString()};console.log("[DrawingStore] Données préparées pour la note:",J);const Oe=kh.fromBackendData(J);return Oe._dbId=t.id,console.log("[DrawingStore] Note créée:",{id:t.id,location:J.location,name:J.name,type:Oe.properties.type}),Oe}catch(J){return console.error("[DrawingStore] Erreur lors de la création de la Note:",J),null}}default:return console.warn("[DrawingStore] Type non géré pour la restauration:",t.type_forme),null}}const Tp=jp("drawing",{state:()=>({currentMapId:null,elements:[],selectedElement:null,unsavedChanges:!1,loading:!1,error:null,currentTool:"",filters:{accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}},currentStyle:{strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},lastUsedType:null,performanceMonitor:Vp()}),getters:{hasUnsavedChanges:t=>t.unsavedChanges,getCurrentElements:t=>t.elements,getSelectedElement:t=>t.selectedElement,getCurrentTool:t=>t.currentTool,getCurrentStyle:t=>t.currentStyle,getLastUsedType:t=>t.lastUsedType,getFilters:t=>t.filters,getFilteredElements:t=>{if(t.elements.length===0)return console.log("[DrawingStore][getFilteredElements] Aucun élément dans le store, retour d'un tableau vide"),[];console.log("[DrawingStore][getFilteredElements] Début du filtrage avec",{totalElements:t.elements.length,filters:JSON.stringify({accessLevels:t.filters.accessLevels,categories:t.filters.categories,shapeTypes:t.filters.shapeTypes})}),console.log("[DrawingStore][getFilteredElements] Éléments dans le store:",t.elements.map(n=>({id:n.id,type_forme:n.type_forme,data:n.data?JSON.stringify(n.data):null})));const e=t.elements.filter(n=>{var l,c;if(console.log(`[DrawingStore][getFilteredElements] Vérification de l'élément ${n.id} (${n.type_forme})`),!(n.type_forme in t.filters.shapeTypes?t.filters.shapeTypes[n.type_forme]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par type: ${n.type_forme} (non visible)`),!1;const i=((l=n.data)==null?void 0:l.category)||"default";if(!(i in t.filters.categories?t.filters.categories[i]:!0))return console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par catégorie: ${i} (non visible)`),!1;const o=((c=n.data)==null?void 0:c.accessLevel)||"visitor";let a=!0;return o==="company"?a=t.filters.accessLevels.company:o==="employee"?a=t.filters.accessLevels.employee:o==="visitor"&&(a=t.filters.accessLevels.visitor),a?(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} visible: type=${n.type_forme}, catégorie=${i}, accès=${o}`),!0):(console.log(`[DrawingStore][getFilteredElements] Élément ${n.id} filtré par niveau d'accès: ${o} (non visible)`),!1)});return console.log("[DrawingStore][getFilteredElements] Résultat du filtrage:",{total:t.elements.length,filtered:e.length,filteredIds:e.map(n=>n.id)}),e}},actions:{setCurrentPlan(t){window.dispatchEvent(new CustomEvent("clearControlPoints")),this.currentMapId=t,t===null&&this.clearElements(),this.selectedElement=null,this.unsavedChanges=!1,this.currentTool="",this.lastUsedType=null,this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2},this.filters={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}},clearCurrentPlan(){(this.currentMapId!==null||this.elements.length>0)&&(this.currentMapId=null,this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.loading=!1,this.error=null)},clearElements(){this.elements=[],this.selectedElement=null,this.unsavedChanges=!1,this.error=null},addElement(t){var n;const e=this.performanceMonitor.startMeasure("addElement","DrawingStore");try{if(console.log("[DrawingStore] Ajout d'un élément",{element:t,isLeafletLayer:t instanceof Wn.Layer,hasProperties:!!t.properties,properties:t.properties,type:(n=t.properties)==null?void 0:n.type}),t instanceof Wn.Layer&&t.properties){const r=this.performanceMonitor.measure("addElement_convert",()=>g5(t),"DrawingStore");console.log("[DrawingStore] Élément converti avant ajout",{original:t,converted:r,type:r.type_forme,data:r.data}),this.elements.push(r)}else!t.type_forme&&this.lastUsedType&&(t.type_forme=this.lastUsedType),this.elements.push(t);this.unsavedChanges=!0}finally{e()}},updateElement(t){const e=this.elements.findIndex(n=>n.id===t.id);if(e!==-1){const n=this.elements[e].type_forme;this.elements[e]={...t,type_forme:n},this.unsavedChanges=!0}},removeElement(t){const e=this.elements.findIndex(n=>n.id===t);e!==-1&&(this.elements.splice(e,1),this.unsavedChanges=!0)},selectElement(t){this.selectedElement=t},setCurrentTool(t){this.currentTool=t,["CERCLE","RECTANGLE","DEMI_CERCLE","LIGNE","TEXTE"].includes(t)&&(this.lastUsedType=t)},setCurrentStyle(t){if(!t||Object.keys(t).length===0){this.currentStyle={strokeStyle:"solid",strokeWidth:2,strokeColor:"#2563EB",fillColor:"#3B82F6",fillOpacity:.2};return}this.currentStyle={...this.currentStyle,...t}},updateFilters(t){if(console.log("[DrawingStore][updateFilters] Mise à jour des filtres:",JSON.stringify(t,null,2)),console.log("[DrawingStore][updateFilters] Filtres avant mise à jour:",JSON.stringify(this.filters,null,2)),t.accessLevels){const e={...this.filters.accessLevels};this.filters.accessLevels={...this.filters.accessLevels,...t.accessLevels},console.log("[DrawingStore][updateFilters] Niveaux d'accès mis à jour:",{avant:e,après:this.filters.accessLevels})}if(t.categories){const e={...this.filters.categories};this.filters.categories={...this.filters.categories,...t.categories},console.log("[DrawingStore][updateFilters] Catégories mises à jour:",{avant:e,après:this.filters.categories});const n=Object.keys(t.categories).filter(r=>e[r]!==this.filters.categories[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Catégories modifiées: ${n.join(", ")}`);const r=n.filter(i=>e[i]===!1&&this.filters.categories[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Catégories réactivées: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("categoriesReactivated",{detail:{categories:r}})))}}if(t.shapeTypes){const e={...this.filters.shapeTypes};this.filters.shapeTypes={...this.filters.shapeTypes,...t.shapeTypes},console.log("[DrawingStore][updateFilters] Types de formes mis à jour:",{avant:e,après:this.filters.shapeTypes});const n=Object.keys(t.shapeTypes).filter(r=>e[r]!==this.filters.shapeTypes[r]);if(n.length>0){console.log(`[DrawingStore][updateFilters] Types de formes modifiés: ${n.join(", ")}`);const r=n.filter(i=>e[i]===!1&&this.filters.shapeTypes[i]===!0);r.length>0&&(console.log(`[DrawingStore][updateFilters] Types de formes réactivés: ${r.join(", ")}`),window.dispatchEvent(new CustomEvent("shapeTypesReactivated",{detail:{shapeTypes:r}})))}}console.log("[DrawingStore][updateFilters] Filtres mis à jour:",JSON.stringify(this.filters,null,2)),console.log("[DrawingStore][updateFilters] Émission de l'event filtersChanged"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:this.filters}}))},async loadPlanElements(t){const e=this.performanceMonitor.startMeasure("loadPlanElements","DrawingStore");if(this.currentMapId===t&&this.elements.length>0)return console.log(`[DrawingStore] Plan ${t} déjà chargé avec ${this.elements.length} éléments`),e(),this.elements;this.loading=!0;try{console.log("[DrawingStore] Début du chargement du plan",{planId:t});const r=(await this.performanceMonitor.measureAsync("loadPlanElements_apiCall",()=>jn.get(`/plans/${t}/`),"DrawingStore")).data;return console.log("[DrawingStore] Données du plan reçues",{formes:r.formes,preferences:r.preferences}),r.formes&&Array.isArray(r.formes)&&r.formes.forEach((i,s)=>{var o,a,l;console.log(`[DrawingStore] Analyse détaillée forme ${s}:`,{id:i.id,type_forme:i.type_forme,hasData:!!i.data,dataKeys:i.data?Object.keys(i.data):[],name:(o=i.data)==null?void 0:o.name,hasName:i.data&&"name"in i.data,centerType:(a=i.data)!=null&&a.center?typeof i.data.center:"undefined",center:(l=i.data)==null?void 0:l.center})}),this.elements=r.formes.map(i=>{var s;if(console.log("[DrawingStore] Traitement de la forme stockée",{id:i.id,type_forme:i.type_forme,data:i.data}),i.type_forme)return console.log("[DrawingStore] Forme déjà au format élément",{type_forme:i.type_forme,data:i.data,hasName:i.data&&"name"in i.data,name:(s=i.data)==null?void 0:s.name}),{id:i.id,type_forme:i.type_forme,data:i.data||{}};try{const o=Cz(i);if(o)return console.log("[DrawingStore] Forme convertie avec succès",{originalType:i.type_forme,convertedType:o.type,properties:o.properties}),g5(o)}catch(o){console.error("[DrawingStore] Erreur lors de la conversion de la forme",{error:o,forme:i})}return console.warn("[DrawingStore] Utilisation de la forme sans conversion",{type_forme:i.type_forme,data:i.data}),i}),console.log(`[DrawingStore] Plan ${t} - Chargé ${this.elements.length} éléments`,{elements:this.elements.map(i=>({id:i.id,type_forme:i.type_forme}))}),this.currentMapId=t,this.unsavedChanges=!1,r.preferences&&(console.log("[DrawingStore] Chargement des préférences",r.preferences),r.preferences.currentTool&&this.setCurrentTool(r.preferences.currentTool),r.preferences.currentStyle&&(this.currentStyle={...this.currentStyle,...r.preferences.currentStyle}),r.preferences.lastUsedType&&(this.lastUsedType=r.preferences.lastUsedType)),this.elements}catch(n){throw console.error("[DrawingStore] Erreur lors du chargement des éléments:",n),this.error="Erreur lors du chargement des éléments du plan",n}finally{this.loading=!1,e()}},async saveToPlan(t,e){const n=this.performanceMonitor.startMeasure("saveToPlan","DrawingStore");this.loading=!0;try{const r=t||this.currentMapId;if(console.log("[DrawingStore][saveToPlan] Début de la sauvegarde",{targetPlanId:r,currentPlanId:this.currentMapId,elementsCount:this.elements.length,elementsToDelete:e==null?void 0:e.elementsToDelete}),!r)throw new Error("Aucun plan sélectionné pour la sauvegarde");const i=this.performanceMonitor.measure("saveToPlan_prepareElements",()=>this.elements.map(l=>({...l,type_forme:l.type_forme||this.lastUsedType})),"DrawingStore"),s=(e==null?void 0:e.elementsToDelete)||[],o=`/plans/${r}/save_with_elements/`,a=await this.performanceMonitor.measureAsync("saveToPlan_apiCall",()=>jn.post(o,{formes:i,connexions:[],annotations:[],elementsToDelete:s,preferences:{currentTool:this.currentTool,currentStyle:this.currentStyle,lastUsedType:this.lastUsedType}}),"DrawingStore");return this.elements=this.performanceMonitor.measure("saveToPlan_processResponse",()=>{const l=new Set(s);return a.data.formes.filter(c=>!l.has(c.id)).map(c=>({...c,type_forme:c.type_forme}))},"DrawingStore"),console.log("[DrawingStore][saveToPlan] Éléments après filtrage:",{totalElements:this.elements.length,elementsToDelete:s}),this.unsavedChanges=!1,a.data}catch(r){throw console.error("[DrawingStore][saveToPlan] ERREUR:",r),console.error("[DrawingStore][saveToPlan] Stack trace:",r instanceof Error?r.stack:"No stack trace"),this.error="Erreur lors de la sauvegarde du plan",r}finally{this.loading=!1,n()}}}}),Ez=jp("mapFilters",{state:()=>({filters:[],loading:!1,error:null,performanceMonitor:Vp()}),getters:{getFilterById:t=>e=>t.filters.find(n=>n.id===e),getFiltersByCategory:t=>e=>t.filters.filter(n=>n.category===e),getUniqueCategories:t=>{const e=new Set;return t.filters.forEach(n=>e.add(n.category)),Array.from(e)}},actions:{async initializeStore(){await this.fetchFilters()},async fetchFilters(){const t=this.performanceMonitor.startMeasure("fetchFilters","MapFilterStore"),e=nu();this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("fetchFilters_apiCall",()=>_0.getFilters(),"MapFilterStore");return this.filters=n.data,this.filters}catch(n){throw this.error="Erreur lors du chargement des filtres",e.error("Impossible de charger les filtres de carte"),console.error("[MapFilterStore] Erreur lors du chargement des filtres:",n),n}finally{this.loading=!1,t()}},async createFilter(t){const e=this.performanceMonitor.startMeasure("createFilter","MapFilterStore");this.loading=!0,this.error=null;try{const n=await this.performanceMonitor.measureAsync("createFilter_apiCall",()=>_0.createFilter(t),"MapFilterStore");return this.filters.push(n.data),console.log("[MapFilterStore] Filtre créé avec succès:",n.data),n.data}catch(n){throw this.error="Erreur lors de la création du filtre",console.error("[MapFilterStore] Erreur lors de la création du filtre:",n),n}finally{this.loading=!1,e()}},async updateFilter(t,e){const n=this.performanceMonitor.startMeasure("updateFilter","MapFilterStore");this.loading=!0,this.error=null;try{const r=await this.performanceMonitor.measureAsync("updateFilter_apiCall",()=>_0.updateFilter(t,e),"MapFilterStore"),i=this.filters.findIndex(s=>s.id===t);return i!==-1&&(this.filters[i]=r.data),console.log("[MapFilterStore] Filtre mis à jour avec succès:",r.data),r.data}catch(r){throw this.error="Erreur lors de la mise à jour du filtre",console.error("[MapFilterStore] Erreur lors de la mise à jour du filtre:",r),r}finally{this.loading=!1,n()}},async deleteFilter(t){const e=this.performanceMonitor.startMeasure("deleteFilter","MapFilterStore");this.loading=!0,this.error=null;try{return await this.performanceMonitor.measureAsync("deleteFilter_apiCall",()=>_0.deleteFilter(t),"MapFilterStore"),this.filters=this.filters.filter(n=>n.id!==t),console.log("[MapFilterStore] Filtre supprimé avec succès:",t),!0}catch(n){throw this.error="Erreur lors de la suppression du filtre",console.error("[MapFilterStore] Erreur lors de la suppression du filtre:",n),n}finally{this.loading=!1,e()}}}}),Vy=jp("irrigation",{state:()=>({plans:[],currentPlan:null,loading:!1,error:null,autoSaveInterval:null,unsavedChanges:!1,planHistory:[],performanceMonitor:Vp()}),getters:{getPlanById:t=>e=>t.plans.find(n=>n.id===e),hasUnsavedChanges:t=>t.unsavedChanges,getCurrentPlanHistory:t=>t.planHistory},actions:{async fetchPlans(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlans","IrrigationStore"),e=da();this.loading=!0;try{let i="/plans/";const s={};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlans_apiCall",()=>jn.get(i,{params:s}),"IrrigationStore");this.plans=o.data}catch(i){throw this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchPlansWithDetails(){var n,r;const t=this.performanceMonitor.startMeasure("fetchPlansWithDetails","IrrigationStore"),e=da();this.loading=!0;try{let i="/plans/";const s={include_details:!0};e.isSalarie?s.salarie=(n=e.user)==null?void 0:n.id:e.isVisiteur&&(s.visiteur=(r=e.user)==null?void 0:r.id);const o=await this.performanceMonitor.measureAsync("fetchPlansWithDetails_apiCall",()=>jn.get(i,{params:s}),"IrrigationStore"),a=this.performanceMonitor.measure("fetchPlansWithDetails_processResponse",()=>o.data.map(l=>({...l,entreprise:typeof l.entreprise=="object"?l.entreprise:null,salarie:typeof l.salarie=="object"?l.salarie:null,visiteur:typeof l.visiteur=="object"?l.visiteur:null})),"IrrigationStore");return this.plans=a,{data:a}}catch(i){throw console.error("[IrrigationStore] Error fetching plans:",i),this.error="Erreur lors du chargement des plans",i}finally{this.loading=!1,t()}},async fetchClientPlans(t){this.loading=!0;try{return(await b0.getVisiteurPlans(t)).data}catch(e){throw this.error="Erreur lors du chargement des plans du client",e}finally{this.loading=!1}},async createPlan(t){var r;const e=this.performanceMonitor.startMeasure("createPlan","IrrigationStore");this.clearCurrentPlan(),this.loading=!0;const n=nu();try{const i=da();((r=i.user)==null?void 0:r.user_type)==="visiteur"&&(t={...t,visiteur:i.user.id,salarie_id:i.user.enterprise_id,entreprise_id:i.user.enterprise_id});const s=this.performanceMonitor.measure("createPlan_formatData",()=>({...t,entreprise:t.entreprise?typeof t.entreprise=="object"&&t.entreprise&&"id"in t.entreprise?t.entreprise.id:Number(t.entreprise):null,salarie:t.salarie?typeof t.salarie=="object"&&t.salarie&&"id"in t.salarie?t.salarie.id:Number(t.salarie):null,visiteur:t.visiteur?typeof t.visiteur=="object"&&t.visiteur&&"id"in t.visiteur?t.visiteur.id:Number(t.visiteur):null}),"IrrigationStore"),o=await this.performanceMonitor.measureAsync("createPlan_apiCall",()=>b0.createPlan(s),"IrrigationStore");return this.plans.push(o.data),n.success(`Le plan "${o.data.nom}" a été créé avec succès`),o.data}catch(i){const s=i instanceof Error?i.message:String(i);throw console.error("Error creating plan:",s),this.error=s,n.error(`Erreur lors de la création du plan : ${s}`),i}finally{this.loading=!1,e()}},async createPlanForClient(t,e){this.clearCurrentPlan(),this.loading=!0;try{const n={...t,visiteur:e},r=await b0.createPlanForVisiteur(n);return this.plans.push(r.data),r.data}catch(n){const r=n instanceof Error?n.message:String(n);throw console.error("Error creating plan for client:",r),this.error="Erreur lors de la création du plan pour le client",n}finally{this.loading=!1}},startAutoSave(){this.autoSaveInterval||(this.autoSaveInterval=setInterval(async()=>{this.unsavedChanges&&this.currentPlan&&await this.savePlan(this.currentPlan.id)},3e4))},stopAutoSave(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},async savePlan(t){const e=this.performanceMonitor.startMeasure("savePlan","IrrigationStore");if(!this.unsavedChanges){console.log("[IrrigationStore][savePlan] Aucun changement à sauvegarder"),e();return}this.loading=!0;try{const n=await this.performanceMonitor.measureAsync("savePlan_apiCall",()=>{var r;return jn.patch(`/plans/${t}/`,{...this.currentPlan,version:((r=this.currentPlan)==null?void 0:r.version)||1})},"IrrigationStore");return this.performanceMonitor.measure("savePlan_updateState",()=>{var i;const r=this.plans.findIndex(s=>s.id===t);r!==-1&&(this.plans[r]=n.data),((i=this.currentPlan)==null?void 0:i.id)===t&&(this.currentPlan=n.data)},"IrrigationStore"),this.unsavedChanges=!1,n.data}catch(n){throw console.error("[IrrigationStore][savePlan] ERREUR:",n),this.error="Erreur lors de la sauvegarde du plan",n}finally{this.loading=!1,e()}},async updatePlanDetails(t,e){const n=this.performanceMonitor.startMeasure("updatePlanDetails","IrrigationStore"),r=nu();try{const i=await this.performanceMonitor.measureAsync("updatePlanDetails_apiCall",()=>{const{visiteur_id:s,salarie_id:o,entreprise_id:a,...l}=e,c={...l};return s!==void 0&&(c.visiteur_id=s),o!==void 0&&(c.salarie_id=o),a!==void 0&&(c.entreprise_id=a),jn.patch(`/plans/${t}/`,c)},"IrrigationStore");return this.performanceMonitor.measure("updatePlanDetails_updateState",()=>{this.currentPlan&&this.currentPlan.id===t&&(this.currentPlan={...this.currentPlan,...i.data});const s=this.plans.findIndex(o=>o.id===t);s!==-1&&(this.plans[s]={...this.plans[s],...i.data})},"IrrigationStore"),i.data}catch(i){throw console.error("Erreur lors de la mise à jour du plan:",i),r.error(`Erreur lors de la mise à jour du plan : ${i instanceof Error?i.message:String(i)}`),i}finally{n()}},async fetchPlanHistory(t){this.loading=!0;try{const e=await jn.get(`/plans/${t}/historique/`);return this.planHistory=e.data,e.data}catch(e){throw this.error="Erreur lors de la récupération de l'historique",e}finally{this.loading=!1}},async restorePlanVersion(t,e){var n;this.loading=!0;try{const r=await jn.post(`/plans/${t}/restaurer/`,{version_id:e});((n=this.currentPlan)==null?void 0:n.id)===t&&(this.currentPlan=r.data);const i=this.plans.findIndex(s=>s.id===t);return i!==-1&&(this.plans[i]=r.data),r.data}catch(r){throw this.error="Erreur lors de la restauration de la version",r}finally{this.loading=!1}},setCurrentPlan(t){this.currentPlan=t,this.startAutoSave()},clearCurrentPlan(){this.currentPlan=null,this.unsavedChanges=!1,this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null)},markUnsavedChanges(){this.unsavedChanges=!0},async deletePlan(t){var n;this.loading=!0;const e=nu();try{const r=this.plans.find(i=>i.id===t);await b0.deletePlan(t),this.plans=this.plans.filter(i=>i.id!==t),((n=this.currentPlan)==null?void 0:n.id)===t&&this.clearCurrentPlan(),e.success(`Le plan "${(r==null?void 0:r.nom)||""}" a été supprimé avec succès`)}catch(r){throw this.error="Erreur lors de la suppression du plan",e.error(`Erreur lors de la suppression du plan : ${r instanceof Error?r.message:String(r)}`),r}finally{this.loading=!1}}}}),Pz={class:"h-full flex flex-col bg-white"},Mz={class:"border-b border-gray-200"},kz={class:"flex -mb-px"},Az={class:"flex-1 overflow-y-auto"},Tz={key:0,class:"p-3"},Dz={class:"grid grid-cols-4 gap-1.5 mb-4"},Oz=["onClick","title"],Nz=["innerHTML"],Iz={key:1,class:"my-4 border-t border-gray-200"},Bz={key:2,class:"mt-4"},Rz={key:0,class:"mb-4"},Fz={class:"mb-4"},jz={class:"mb-4"},zz={class:"grid grid-cols-1 gap-4"},$z={key:0,class:"space-y-1"},Vz={class:"flex justify-between items-center"},Uz={class:"text-sm font-medium text-gray-500"},Hz={class:"flex justify-between items-center"},Wz={class:"text-sm font-medium text-gray-500"},Gz={class:"text-sm font-medium text-gray-500"},qz={class:"flex flex-col space-y-2 w-full"},Yz={class:"flex justify-between items-center"},Kz={class:"text-sm font-medium text-gray-500 ml-2"},Zz={class:"flex justify-between items-center"},Xz={class:"text-sm font-medium text-gray-500 ml-2"},Jz={class:"flex justify-between items-center"},Qz={class:"text-sm font-medium text-gray-500 ml-2"},e$={class:"flex justify-between items-center"},t$={class:"text-sm font-medium text-gray-500 ml-2"},n$={class:"flex justify-between items-center"},r$={class:"text-sm font-medium text-gray-500 ml-2"},i$={ref:"elevationProfileContainer",class:"elevation-profile-container w-full h-48 bg-gray-50 rounded border border-gray-200 relative mt-4"},s$={ref:"elevationCanvas"},o$={key:1,class:"p-3"},a$={class:"grid grid-cols-6 gap-2 mb-4"},l$=["onClick","title"],u$={key:0,class:"space-y-4"},c$={class:"flex items-center gap-4"},h$={class:"flex items-center gap-2"},d$={class:"flex items-center gap-4"},f$=["value"],p$={key:0,class:"flex items-center gap-4"},g$={class:"flex items-center gap-2"},m$={key:1,class:"space-y-4"},v$={class:"flex items-center gap-4"},y$={class:"flex items-center gap-2"},b$={class:"flex items-center gap-4"},_$={class:"flex items-center gap-2"},w$={key:2,class:"p-3 space-y-4"},x$={class:"space-y-2"},L$={class:"space-y-2"},S$={class:"space-y-1"},C$={class:"flex items-center"},E$={class:"flex items-center"},P$={class:"flex items-center"},M$={class:"flex items-center"},k$={class:"flex items-center"},A$={class:"flex items-center"},T$={key:0,class:"flex items-center"},D$=["onUpdate:modelValue"],O$={class:"ml-2 text-sm text-gray-700"},N$={key:0,class:"mt-2 pt-2 border-t border-gray-200"},I$={class:"flex space-x-2"},B$=["disabled"],R$={key:0,xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},F$={key:1,class:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j$={class:"space-y-2"},z$={class:"space-y-1"},$$={class:"flex items-center"},V$={class:"flex items-center"},U$={class:"flex items-center"},H$={class:"flex items-center"},W$={key:0,class:"p-3 border-t border-gray-200"},G$={class:"mt-3"},q$={class:"mb-4"},Y$={class:"grid grid-cols-2 gap-2"},K$={class:"grid grid-cols-2 gap-2"},Z$=$s({__name:"DrawingTools",props:{currentTool:{type:String,default:""},selectedShape:{type:Object,default:null},allLayers:{type:Array,default:()=>[]}},emits:["tool-change","style-update","properties-update","delete-shape","filter-change","close-drawer"],setup(t,{emit:e}){const n=t,r=Tp(),i=da(),s=Zn(()=>i.isAdmin),o=Zn(()=>i.isEntreprise),a=Ez(),l=Vy(),c=ru({name:""}),d=Lt(!1),p=Lt(["forages","clients","entrepots","livraisons","cultures","parcelles"]),v=[{type:"Polygon",label:"Polygone"},{type:"Line",label:"Ligne"},{type:"ElevationLine",label:"Profil altimétrique"},{type:"Note",label:"Note géolocalisée"}],m=Se=>{switch(Se){case"Polygon":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 5l16 0l0 14l-16 0l0 -14z"/></svg>';case"Line":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 20l16 -16"/></svg>';case"ElevationLine":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 20h18l-3-3l-4 4l-4-7l-4 4l-3-3"/></svg>';case"Note":return'<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 2l4 4m-6 0l2-2 4 4-2 2-4-4z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h8" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14h4" /></svg>';default:return""}},x=Lt("tools");Ri(x,(Se,de)=>{console.log("[DrawingTools][watch activeTab] Changement d'onglet:",{newTab:Se,oldTab:de}),Se==="filters"&&de!=="filters"&&(console.log("[DrawingTools][watch activeTab] Passage à l'onglet filtres"),console.log("[DrawingTools][watch activeTab] État actuel des filtres dans le store:",JSON.stringify({accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}},null,2)),console.log("[DrawingTools][watch activeTab] État actuel des filtres locaux:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),n.selectedShape&&(console.log("[DrawingTools][watch activeTab] Désélection de la forme actuelle lors du passage à l'onglet filtres"),ie("tool-change","")),setTimeout(()=>{ee()},0)),de==="filters"&&Se!=="filters"&&(console.log("[DrawingTools][watch activeTab] Sortie de l'onglet filtres, application des changements"),console.log("[DrawingTools][watch activeTab] État des filtres locaux avant application:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),ee())});const E=Lt({samplePoints:!0,circleSections:!0}),A=Lt("#2b6451"),k=Lt(2),D=Lt("solid"),$=Lt("#2b6451"),Y=Lt(.2),te=Lt(!0),me=Lt(""),pe=Lt("default"),I=Lt("visitor"),z=Lt({radius:4,color:"#2b6451",fillOpacity:.6,weight:2}),K=Lt({radius:6,color:"#EF4444",fillOpacity:.8,weight:2}),N=["#2b6451","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"],B=[{value:"solid",label:"Continu"},{value:"dashed",label:"Tirets"},{value:"dotted",label:"Pointillés"}],V=Lt("company"),R=ru({accessLevels:{company:!0,employee:!1,visitor:!1},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}}),j=Se=>{console.log(`[DrawingTools][updateAccessLevelFilter] Changement du niveau d'accès: ${Se}`),V.value=Se,Se==="company"?(R.accessLevels.company=!0,R.accessLevels.employee=!1,R.accessLevels.visitor=!1):Se==="employee"?(R.accessLevels.company=!1,R.accessLevels.employee=!0,R.accessLevels.visitor=!1):Se==="visitor"&&(R.accessLevels.company=!1,R.accessLevels.employee=!1,R.accessLevels.visitor=!0),ee()},W=Se=>{console.log(`[DrawingTools][updateAccessLevelFilterAndDeselect] Changement du niveau d'accès: ${Se}`),n.selectedShape&&(console.log("[DrawingTools][updateAccessLevelFilterAndDeselect] Désélection de la forme actuelle"),ie("tool-change","")),j(Se)};console.log("[DrawingTools] Initialisation des filtres:",JSON.stringify({local:{accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},store:{accessLevels:{...r.filters.accessLevels},categories:{...r.filters.categories},shapeTypes:{...r.filters.shapeTypes}}},null,2));const X=Zn(()=>n.selectedShape&&n.selectedShape.properties||null),oe=Se=>{E.value[Se]=!E.value[Se]},_e=Se=>{A.value=Se,$.value=Se,Ce({strokeColor:Se,fillColor:Se})},Ce=Se=>{n.selectedShape&&ie("style-update",Se)},De=()=>{n.selectedShape&&ie("properties-update",{name:me.value})},Z=()=>{n.selectedShape&&ie("properties-update",{category:pe.value})},G=()=>{n.selectedShape&&ie("properties-update",{accessLevel:I.value})},re=()=>{var Se;!n.selectedShape||((Se=X.value)==null?void 0:Se.type)!=="ElevationLine"||ie("style-update",{samplePointStyle:z.value})},he=()=>{var Se;!n.selectedShape||((Se=X.value)==null?void 0:Se.type)!=="ElevationLine"||ie("style-update",{minMaxPointStyle:K.value})},ce=()=>{console.log("[DrawingTools][resetFilters] Début de la réinitialisation des filtres"),console.log("[DrawingTools][resetFilters] État actuel des filtres:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2));const Se={accessLevels:{company:!0,employee:!0,visitor:!0},categories:{forages:!0,clients:!0,entrepots:!0,livraisons:!0,cultures:!0,parcelles:!0},shapeTypes:{Polygon:!0,Line:!0,ElevationLine:!0,Note:!0}};console.log("[DrawingTools][resetFilters] Nouveaux filtres à appliquer:",JSON.stringify(Se,null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres locaux"),R.accessLevels.company=!0,R.accessLevels.employee=!0,R.accessLevels.visitor=!0,R.categories.forages=!0,R.categories.clients=!0,R.categories.entrepots=!0,R.categories.livraisons=!0,R.categories.cultures=!0,R.categories.parcelles=!0,R.shapeTypes.Polygon=!0,R.shapeTypes.Line=!0,R.shapeTypes.ElevationLine=!0,R.shapeTypes.Note=!0,console.log("[DrawingTools][resetFilters] Filtres locaux après mise à jour:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2)),console.log("[DrawingTools][resetFilters] Mise à jour des filtres dans le store"),r.updateFilters(Se),console.log("[DrawingTools][resetFilters] Émission de l'event filter-change"),ie("filter-change",Se),console.log("[DrawingTools][resetFilters] Mise à jour forcée de l'affichage"),console.log("[DrawingTools][resetFilters] Filtres réinitialisés avec succès")},ve=()=>{console.log("[DrawingTools][resetFiltersAndDeselect] Début de la réinitialisation des filtres avec désélection"),Ye(),ce(),console.log("[DrawingTools][resetFiltersAndDeselect] Filtres réinitialisés et forme désélectionnée avec succès")},ee=()=>{const Se={...R.accessLevels},de={...R.categories},Xe={...R.shapeTypes};console.log("[DrawingTools][applyFilters] Application des filtres:",JSON.stringify({accessLevels:Se,categories:de,shapeTypes:Xe},null,2));const $e={accessLevels:Se,categories:de,shapeTypes:Xe};console.log("[DrawingTools][applyFilters] Envoi des filtres au store:",JSON.stringify($e,null,2)),r.updateFilters($e),console.log("[DrawingTools][applyFilters] Émission de l'event filter-change"),ie("filter-change",$e),setTimeout(()=>{console.log("[DrawingTools][applyFilters] Mise à jour forcée de l'affichage"),window.dispatchEvent(new CustomEvent("filtersChanged",{detail:{filters:$e}}))},0),console.log("[DrawingTools][applyFilters] Filtres appliqués avec succès")},J=Se=>`${Math.round(Se)} m`,Oe=Se=>Se>=1e4?`${(Se/1e4).toFixed(2)} ha`:`${Math.round(Se)} m²`,Te=Se=>`${Se.toFixed(1)}%`,Ye=()=>{n.selectedShape&&(console.log("[DrawingTools][deselectCurrentShape] Désélection de la forme actuelle"),ie("tool-change",""))};async function ge(){var Se,de;if(!(!c.name||d.value)){d.value=!0;try{const Xe=c.name.toLowerCase().replace(/\s+/g,"_"),$e=l.currentPlan;let Je=null;if($e!=null&&$e.entreprise_id?Je=$e.entreprise_id:$e!=null&&$e.entreprise&&typeof $e.entreprise=="object"&&"id"in $e.entreprise?Je=$e.entreprise.id:(Se=i.user)!=null&&Se.enterprise_id?Je=i.user.enterprise_id:i.isEntreprise&&((de=i.user)!=null&&de.id)&&(Je=i.user.id),!Je){console.error("[DrawingTools] Impossible de créer un filtre: ID d'entreprise non disponible");return}console.log("[DrawingTools] Création d'un filtre pour l'entreprise:",Je),await a.createFilter({name:c.name,category:Xe,entreprise:Je}),R.categories[Xe]||(R.categories[Xe]=!0,ie("filter-change",R)),c.name=""}catch(Xe){console.error("[DrawingTools] Erreur lors de la création du filtre:",Xe)}finally{d.value=!1}}}const Q=()=>{Ye(),x.value="filters"},ie=e;dm(()=>{var Se,de,Xe,$e,Je,He,Ge;if(n.selectedShape){console.log("[DrawingTools][watchEffect] Mise à jour des propriétés pour la forme sélectionnée:",{type:n.selectedShape.type,properties:n.selectedShape.properties,options:n.selectedShape.options,layer:(Se=n.selectedShape.layer)==null?void 0:Se._leaflet_id});const xt=n.selectedShape.options||{};A.value=xt.color||"#2b6451",k.value=xt.weight||3,D.value=xt.dashArray?"dashed":"solid",$.value=xt.fillColor||"#2b6451",Y.value=xt.fillOpacity||.2;const Et=n.selectedShape.type||((de=n.selectedShape.properties)==null?void 0:de.type)||"";te.value=Et!=="Line",console.log("[DrawingTools][watchEffect] Type de forme détecté:",Et),me.value=((Xe=n.selectedShape.properties)==null?void 0:Xe.name)||"",pe.value=(($e=n.selectedShape.properties)==null?void 0:$e.category)||"forages",I.value=((Je=n.selectedShape.properties)==null?void 0:Je.accessLevel)||"visitor",Et==="ElevationLine"&&((He=n.selectedShape.properties)!=null&&He.samplePointStyle&&(z.value={...n.selectedShape.properties.samplePointStyle}),(Ge=n.selectedShape.properties)!=null&&Ge.minMaxPointStyle&&(K.value={...n.selectedShape.properties.minMaxPointStyle})),console.log("[DrawingTools][watchEffect] Propriétés mises à jour avec succès")}}),go(()=>{console.log("[DrawingTools][onMounted] Initialisation des filtres depuis le store");const Se=r.filters;console.log("[DrawingTools][onMounted] Filtres du store:",JSON.stringify({accessLevels:{...Se.accessLevels},categories:{...Se.categories},shapeTypes:{...Se.shapeTypes}},null,2)),R.accessLevels.company=Se.accessLevels.company,R.accessLevels.employee=Se.accessLevels.employee,R.accessLevels.visitor=Se.accessLevels.visitor,R.categories.forages=Se.categories.forages,R.categories.clients=Se.categories.clients,R.categories.entrepots=Se.categories.entrepots,R.categories.livraisons=Se.categories.livraisons,R.categories.cultures=Se.categories.cultures,R.categories.parcelles=Se.categories.parcelles,R.shapeTypes.Polygon=Se.shapeTypes.Polygon,R.shapeTypes.Line=Se.shapeTypes.Line,R.shapeTypes.ElevationLine=Se.shapeTypes.ElevationLine,R.shapeTypes.Note=Se.shapeTypes.Note,console.log("[DrawingTools][onMounted] Filtres locaux après initialisation:",JSON.stringify({accessLevels:{...R.accessLevels},categories:{...R.categories},shapeTypes:{...R.shapeTypes}},null,2))}),Ri(R,(Se,de)=>{console.log("[DrawingTools][watch filters] Changement détecté:",{activeTab:x.value,newFilters:JSON.stringify({accessLevels:Se.accessLevels,categories:Se.categories,shapeTypes:Se.shapeTypes}),oldFilters:JSON.stringify({accessLevels:de.accessLevels,categories:de.categories,shapeTypes:de.shapeTypes})});const Xe=Object.keys(Se.accessLevels).filter(Ge=>de.accessLevels[Ge]!==Se.accessLevels[Ge]),$e=Object.keys(Se.categories).filter(Ge=>de.categories[Ge]!==Se.categories[Ge]),Je=Object.keys(Se.shapeTypes).filter(Ge=>de.shapeTypes[Ge]!==Se.shapeTypes[Ge]),He=Xe.length>0||$e.length>0||Je.length>0;console.log("[DrawingTools][watch filters] Différences détectées:",{accessLevelsDiff:Xe,categoriesDiff:$e,shapeTypesDiff:Je,hasChanges:He}),x.value==="filters"?(console.log("[DrawingTools][watch filters] Onglet filtres actif, application des filtres"),ee()):console.log("[DrawingTools][watch filters] Onglet filtres non actif, pas d'application automatique")},{deep:!0});const fe=Se=>{ie("tool-change",n.currentTool===Se?"":Se),window.innerWidth<768&&ie("close-drawer")};return(Se,de)=>{var Xe,$e,Je,He;return Be(),ze("div",Pz,[de[97]||(de[97]=C("div",{class:"p-3 bg-gray-50 border-b border-gray-200 flex justify-between items-center md:flex hidden"},[C("h3",{class:"text-sm font-semibold text-gray-700"},"Outils de dessin")],-1)),C("div",Mz,[C("nav",kz,[C("button",{onClick:de[0]||(de[0]=Ge=>x.value="tools"),class:Fi([x.value==="tools"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[45]||(de[45]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1),C("span",null,"Outils",-1)]),2),t.selectedShape&&((Xe=t.selectedShape.properties)==null?void 0:Xe.type)!=="Note"?(Be(),ze("button",{key:0,onClick:de[1]||(de[1]=Ge=>x.value="style"),class:Fi([x.value==="style"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[46]||(de[46]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})],-1),C("span",null,"Style",-1)]),2)):nn("",!0),C("button",{onClick:Q,class:Fi([x.value==="filters"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","flex-1 py-3 px-1 text-center border-b-2 font-medium text-sm"])},de[47]||(de[47]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mx-auto mb-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})],-1),C("span",null,"Filtres",-1)]),2)])]),C("div",Az,[x.value==="tools"?(Be(),ze("div",Tz,[C("div",Dz,[(Be(!0),ze(En,null,fr(v.filter(Ge=>Ge.type!=="delete"),Ge=>(Be(),ze("button",{key:Ge.type,class:Fi(["flex items-center justify-center p-2 rounded-md border",{"bg-blue-50 border-blue-300 text-blue-700 shadow-sm":t.currentTool===Ge.type}]),onClick:xt=>fe(Ge.type),title:Ge.label},[C("span",{class:"icon",innerHTML:m(Ge.type)},null,8,Nz)],10,Oz))),128))]),t.selectedShape?(Be(),ze("button",{key:0,class:Fi(["w-full mt-2 p-2 rounded-md border border-red-200 bg-red-50 text-red-600 hover:bg-red-100 flex items-center justify-center",{"bg-red-100":t.currentTool==="delete"}]),onClick:de[2]||(de[2]=Ge=>Se.$emit("delete-shape")),title:"Supprimer la forme"},de[48]||(de[48]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),C("span",{class:"text-sm"},"Supprimer",-1)]),2)):nn("",!0),t.selectedShape&&X.value?(Be(),ze("div",Iz)):nn("",!0),t.selectedShape&&X.value?(Be(),ze("div",Bz,[X.value.type!=="Note"?(Be(),ze("div",Rz,[de[49]||(de[49]=C("label",{for:"shapeName",class:"block text-sm font-medium text-gray-700 mb-1"},"Nom de la forme",-1)),kn(C("input",{type:"text",id:"shapeName","onUpdate:modelValue":de[3]||(de[3]=Ge=>me.value=Ge),onChange:De,placeholder:"Donnez un nom à cette forme",class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},null,544),[[jr,me.value]])])):nn("",!0),C("div",Fz,[de[51]||(de[51]=C("label",{for:"shapeCategory",class:"block text-sm font-medium text-gray-700 mb-1"},"Catégorie",-1)),kn(C("select",{id:"shapeCategory","onUpdate:modelValue":de[4]||(de[4]=Ge=>pe.value=Ge),onChange:Z,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},de[50]||(de[50]=[Dl('<option value="forages" data-v-87efb4c9>Forages</option><option value="clients" data-v-87efb4c9>Clients</option><option value="entrepots" data-v-87efb4c9>Entrepôts</option><option value="livraisons" data-v-87efb4c9>Lieux de livraison</option><option value="cultures" data-v-87efb4c9>Cultures</option><option value="parcelles" data-v-87efb4c9>Noms des parcelles</option><option value="default" data-v-87efb4c9>Autre</option>',7)]),544),[[rs,pe.value]])]),C("div",jz,[de[53]||(de[53]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700 mb-1"},"Niveau d'accès",-1)),de[54]||(de[54]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Définit qui peut voir cet élément sur la carte. ",-1)),kn(C("select",{id:"accessLevel","onUpdate:modelValue":de[5]||(de[5]=Ge=>I.value=Ge),onChange:G,class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500"},de[52]||(de[52]=[C("option",{value:"company"},"Entreprise uniquement",-1),C("option",{value:"employee"},"Entreprise et salariés",-1),C("option",{value:"visitor"},"Tous (visiteurs inclus)",-1)]),544),[[rs,I.value]])]),C("div",zz,[X.value.type==="Polygon"?(Be(),ze("div",$z,[C("div",Vz,[de[55]||(de[55]=C("span",{class:"text-sm font-semibold text-gray-700"},"Surface :",-1)),C("span",Uz,Dt(Oe(X.value.surface||0)),1)]),C("div",Hz,[de[56]||(de[56]=C("span",{class:"text-sm font-semibold text-gray-700"},"Périmètre :",-1)),C("span",Wz,Dt(J(X.value.perimeter||0)),1)])])):X.value.type==="Line"?(Be(),ze(En,{key:1},[de[57]||(de[57]=C("span",{class:"text-sm font-semibold text-gray-700"},"Longueur :",-1)),C("span",Gz,Dt(J(X.value.length||0)),1)],64)):X.value.type==="ElevationLine"?(Be(),ze(En,{key:2},[C("div",qz,[C("div",Yz,[de[58]||(de[58]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Distance totale :",-1)),C("span",Kz,Dt(J(X.value.length||0)),1)]),C("div",Zz,[de[59]||(de[59]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé + :",-1)),C("span",Xz,Dt(J(X.value.elevationGain||0)),1)]),C("div",Jz,[de[60]||(de[60]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Dénivelé - :",-1)),C("span",Qz,Dt(J(X.value.elevationLoss||0)),1)]),C("div",e$,[de[61]||(de[61]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente moy. :",-1)),C("span",t$,Dt(Te(X.value.averageSlope||0)),1)]),C("div",n$,[de[62]||(de[62]=C("span",{class:"text-sm font-semibold text-gray-700 whitespace-nowrap"},"Pente max :",-1)),C("span",r$,Dt(Te(X.value.maxSlope||0)),1)])]),C("div",i$,[C("canvas",s$,null,512)],512)],64)):nn("",!0)])])):nn("",!0)])):nn("",!0),x.value==="style"&&t.selectedShape&&(($e=t.selectedShape.properties)==null?void 0:$e.type)!=="Note"?(Be(),ze("div",o$,[C("div",a$,[(Be(),ze(En,null,fr(N,Ge=>C("button",{key:Ge,class:"w-8 h-8 rounded-full",style:eu({backgroundColor:Ge}),onClick:xt=>_e(Ge),title:Ge},null,12,l$)),64))]),((Je=X.value)==null?void 0:Je.type)!=="TextRectangle"?(Be(),ze("div",u$,[C("div",c$,[de[63]||(de[63]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",h$,[kn(C("input",{type:"color","onUpdate:modelValue":de[6]||(de[6]=Ge=>A.value=Ge),class:"w-16 h-8 rounded border",onChange:de[7]||(de[7]=Ge=>Ce({strokeColor:A.value})),title:"Couleur du contour"},null,544),[[jr,A.value]]),kn(C("input",{type:"range","onUpdate:modelValue":de[8]||(de[8]=Ge=>k.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:de[9]||(de[9]=Ge=>Ce({strokeWidth:k.value})),title:"Épaisseur du contour"},null,544),[[jr,k.value]])])]),C("div",d$,[de[64]||(de[64]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Style",-1)),kn(C("select",{"onUpdate:modelValue":de[10]||(de[10]=Ge=>D.value=Ge),class:"w-full rounded border",onChange:de[11]||(de[11]=Ge=>Ce({strokeStyle:D.value}))},[(Be(),ze(En,null,fr(B,Ge=>C("option",{key:Ge.value,value:Ge.value},Dt(Ge.label),9,f$)),64))],544),[[rs,D.value]])]),te.value?(Be(),ze("div",p$,[de[65]||(de[65]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",g$,[kn(C("input",{type:"color","onUpdate:modelValue":de[12]||(de[12]=Ge=>$.value=Ge),class:"w-16 h-8 rounded border",onChange:de[13]||(de[13]=Ge=>Ce({fillColor:$.value})),title:"Couleur de remplissage"},null,544),[[jr,$.value]]),kn(C("input",{type:"range","onUpdate:modelValue":de[14]||(de[14]=Ge=>Y.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:de[15]||(de[15]=Ge=>Ce({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[jr,Y.value]])])])):nn("",!0)])):nn("",!0),((He=X.value)==null?void 0:He.type)==="TextRectangle"?(Be(),ze("div",m$,[C("div",v$,[de[66]||(de[66]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Contour",-1)),C("div",y$,[kn(C("input",{type:"color","onUpdate:modelValue":de[16]||(de[16]=Ge=>A.value=Ge),class:"w-16 h-8 rounded border",onChange:de[17]||(de[17]=Ge=>Ce({strokeColor:A.value})),title:"Couleur du contour"},null,544),[[jr,A.value]]),kn(C("input",{type:"range","onUpdate:modelValue":de[18]||(de[18]=Ge=>k.value=Ge),min:"1",max:"10",class:"w-16 h-2 rounded-md",onChange:de[19]||(de[19]=Ge=>Ce({strokeWidth:k.value})),title:"Épaisseur du contour"},null,544),[[jr,k.value]])])]),C("div",b$,[de[67]||(de[67]=C("span",{class:"w-20 text-sm font-semibold text-gray-700"},"Remplir",-1)),C("div",_$,[kn(C("input",{type:"color","onUpdate:modelValue":de[20]||(de[20]=Ge=>$.value=Ge),class:"w-16 h-8 rounded border",onChange:de[21]||(de[21]=Ge=>Ce({fillColor:$.value})),title:"Couleur de remplissage"},null,544),[[jr,$.value]]),kn(C("input",{type:"range","onUpdate:modelValue":de[22]||(de[22]=Ge=>Y.value=Ge),min:"0",max:"1",step:"0.1",class:"w-16 h-2 rounded-md",onChange:de[23]||(de[23]=Ge=>Ce({fillOpacity:Y.value})),title:"Opacité du remplissage"},null,544),[[jr,Y.value]])])])])):nn("",!0)])):nn("",!0),x.value==="filters"?(Be(),ze("div",w$,[C("div",x$,[de[70]||(de[70]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Niveau d'accès",-1)),de[71]||(de[71]=C("div",{class:"p-2 bg-blue-50 rounded mb-2 text-xs text-blue-700"}," Sélectionnez votre niveau d'accès pour filtrer les éléments visibles sur la carte. ",-1)),C("div",null,[kn(C("select",{"onUpdate:modelValue":de[24]||(de[24]=Ge=>V.value=Ge),onChange:de[25]||(de[25]=Ge=>W(V.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"},de[68]||(de[68]=[C("option",{value:"company"},"Entreprise (accès à tout)",-1),C("option",{value:"employee"},"Salariés (accès niveau salariés et visiteurs)",-1),C("option",{value:"visitor"},"Visiteurs (accès niveau visiteurs uniquement)",-1)]),544),[[rs,V.value]]),de[69]||(de[69]=C("div",{class:"mt-2 text-xs text-gray-500"},[C("p",null,[C("strong",null,"Entreprise"),li(" : Vous verrez tous les éléments (entreprise, salariés, visiteurs)")]),C("p",null,[C("strong",null,"Salariés"),li(" : Vous verrez les éléments pour salariés et visiteurs")]),C("p",null,[C("strong",null,"Visiteurs"),li(" : Vous ne verrez que les éléments pour visiteurs")])],-1))])]),C("div",L$,[de[80]||(de[80]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Éléments",-1)),C("div",S$,[C("label",C$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[26]||(de[26]=Ge=>R.categories.forages=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.forages]]),de[72]||(de[72]=C("span",{class:"ml-2 text-sm text-gray-700"},"Forages",-1))]),C("label",E$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[27]||(de[27]=Ge=>R.categories.clients=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.clients]]),de[73]||(de[73]=C("span",{class:"ml-2 text-sm text-gray-700"},"Clients",-1))]),C("label",P$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[28]||(de[28]=Ge=>R.categories.entrepots=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.entrepots]]),de[74]||(de[74]=C("span",{class:"ml-2 text-sm text-gray-700"},"Entrepôts",-1))]),C("label",M$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[29]||(de[29]=Ge=>R.categories.livraisons=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.livraisons]]),de[75]||(de[75]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lieux de livraison",-1))]),C("label",k$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[30]||(de[30]=Ge=>R.categories.cultures=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.cultures]]),de[76]||(de[76]=C("span",{class:"ml-2 text-sm text-gray-700"},"Cultures",-1))]),C("label",A$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[31]||(de[31]=Ge=>R.categories.parcelles=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.categories.parcelles]]),de[77]||(de[77]=C("span",{class:"ml-2 text-sm text-gray-700"},"Noms des parcelles",-1))]),(Be(!0),ze(En,null,fr(R.categories,(Ge,xt)=>(Be(),ze(En,{key:xt},[p.value.includes(String(xt))?nn("",!0):(Be(),ze("label",T$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":Et=>R.categories[xt]=Et,onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,40,D$),[[Pl,R.categories[xt]]]),C("span",O$,Dt(xt),1)]))],64))),128)),s.value||o.value?(Be(),ze("div",N$,[C("div",I$,[kn(C("input",{type:"text","onUpdate:modelValue":de[32]||(de[32]=Ge=>c.name=Ge),placeholder:"Nouveau filtre...",class:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-primary-500 focus:border-primary-500"},null,512),[[jr,c.name]]),C("button",{onClick:ge,disabled:!c.name||d.value,class:"px-2 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(Be(),ze("svg",F$,de[79]||(de[79]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(Be(),ze("svg",R$,de[78]||(de[78]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])))],8,B$)])])):nn("",!0)])]),C("div",j$,[de[85]||(de[85]=C("h4",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wider"},"Types de formes",-1)),C("div",z$,[C("label",$$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[33]||(de[33]=Ge=>R.shapeTypes.Polygon=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.shapeTypes.Polygon]]),de[81]||(de[81]=C("span",{class:"ml-2 text-sm text-gray-700"},"Polygones",-1))]),C("label",V$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[34]||(de[34]=Ge=>R.shapeTypes.Line=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.shapeTypes.Line]]),de[82]||(de[82]=C("span",{class:"ml-2 text-sm text-gray-700"},"Lignes",-1))]),C("label",U$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[35]||(de[35]=Ge=>R.shapeTypes.ElevationLine=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.shapeTypes.ElevationLine]]),de[83]||(de[83]=C("span",{class:"ml-2 text-sm text-gray-700"},"Profils altimétriques",-1))]),C("label",H$,[kn(C("input",{type:"checkbox","onUpdate:modelValue":de[36]||(de[36]=Ge=>R.shapeTypes.Note=Ge),onChange:Ye,class:"rounded text-primary-600 focus:ring-primary-500 h-4 w-4"},null,544),[[Pl,R.shapeTypes.Note]]),de[84]||(de[84]=C("span",{class:"ml-2 text-sm text-gray-700"},"Notes",-1))])])]),C("div",{class:"pt-2"},[C("button",{onClick:ve,class:"w-full px-3 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 transition-colors"}," Réinitialiser ")])])):nn("",!0)]),t.selectedShape&&X.value&&X.value.type==="ElevationLine"?(Be(),ze("div",W$,[C("button",{class:"flex items-center justify-between w-full text-sm font-semibold text-gray-700",onClick:de[37]||(de[37]=Ge=>oe("samplePoints"))},[de[87]||(de[87]=C("span",null,"Points d'échantillonnage",-1)),(Be(),ze("svg",{class:Fi(["w-4 h-4",{"rotate-180":!E.value.samplePoints}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},de[86]||(de[86]=[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)]),2))]),kn(C("div",G$,[C("div",q$,[de[92]||(de[92]=C("h4",{class:"text-sm font-semibold mb-2"},"Points normaux",-1)),C("div",Y$,[C("div",null,[de[88]||(de[88]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(C("input",{type:"number","onUpdate:modelValue":de[38]||(de[38]=Ge=>z.value.radius=Ge),min:"2",max:"10",step:"1",class:"w-full px-2 py-1 border rounded",onChange:re},null,544),[[jr,z.value.radius]])]),C("div",null,[de[89]||(de[89]=C("label",{class:"text-xs text-gray-600"},"Couleur",-1)),kn(C("input",{type:"color","onUpdate:modelValue":de[39]||(de[39]=Ge=>z.value.color=Ge),class:"w-full h-8 px-1 border rounded",onChange:re},null,544),[[jr,z.value.color]])]),C("div",null,[de[90]||(de[90]=C("label",{class:"text-xs text-gray-600"},"Opacité",-1)),kn(C("input",{type:"range","onUpdate:modelValue":de[40]||(de[40]=Ge=>z.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:re},null,544),[[jr,z.value.fillOpacity]])]),C("div",null,[de[91]||(de[91]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(C("input",{type:"number","onUpdate:modelValue":de[41]||(de[41]=Ge=>z.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:re},null,544),[[jr,z.value.weight]])])])]),C("div",null,[de[96]||(de[96]=C("h4",{class:"text-sm font-semibold mb-2"},"Points min/max",-1)),C("div",K$,[C("div",null,[de[93]||(de[93]=C("label",{class:"text-xs text-gray-600"},"Taille",-1)),kn(C("input",{type:"number","onUpdate:modelValue":de[42]||(de[42]=Ge=>K.value.radius=Ge),min:"4",max:"12",step:"1",class:"w-full px-2 py-1 border rounded",onChange:he},null,544),[[jr,K.value.radius]])]),C("div",null,[de[94]||(de[94]=C("label",{class:"text-xs text-gray-600"},"Bordure",-1)),kn(C("input",{type:"number","onUpdate:modelValue":de[43]||(de[43]=Ge=>K.value.weight=Ge),min:"1",max:"5",step:"1",class:"w-full px-2 py-1 border rounded",onChange:he},null,544),[[jr,K.value.weight]])]),C("div",null,[de[95]||(de[95]=C("label",{class:"text-xs text-gray-600"},"Opacité",-1)),kn(C("input",{type:"range","onUpdate:modelValue":de[44]||(de[44]=Ge=>K.value.fillOpacity=Ge),min:"0",max:"1",step:"0.1",class:"w-full",onChange:he},null,544),[[jr,K.value.fillOpacity]])])])])],512),[[Ay,!E.value.samplePoints]])])):nn("",!0)])}}}),X$=jh(Z$,[["__scopeId","data-v-87efb4c9"]]),J$={class:"map-toolbar w-full"},Q$={class:"hidden md:flex items-center space-x-2"},eV={class:"dropdown"},tV={class:"dropdown-menu"},nV=["onClick"],rV={key:0,class:"border-l pl-2 flex-1"},iV={class:"flex items-center"},sV={class:"plan-info"},oV={class:"plan-name"},aV={key:0,class:"plan-description"},lV={class:"border-l pl-2 ml-auto"},uV={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},hV={key:"saving"},dV={key:"success",class:"save-success-text"},fV={key:"default"},pV={class:"md:hidden"},gV={class:"flex justify-between items-center"},mV={key:0,class:"truncate mx-2 text-sm font-medium"},vV={key:0,class:"mobile-menu mt-0 bg-white shadow-lg p-4 z-[1900] fixed left-0 right-0 w-full"},yV={class:"flex justify-between items-center mb-3 border-b pb-2"},bV={class:"flex flex-col space-y-4"},_V={key:0,class:"flex flex-col pb-3 border-b"},wV={class:"text-sm font-semibold text-gray-800"},xV={key:0,class:"text-xs text-gray-600 mt-1"},LV={class:"flex flex-col"},SV={class:"grid grid-cols-3 gap-2"},CV=["onClick"],EV={key:0,class:"animate-spin h-4 w-4 mr-2 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},PV={key:1,class:"h-4 w-4 mr-2 text-primary-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},MV={key:"saving"},kV={key:"success",class:"save-success-text"},AV={key:"default"},TV=$s({__name:"MapToolbar",props:{lastSave:{},planName:{},planDescription:{},saveStatus:{}},emits:["change-map-type","create-new-plan","load-plan","save-plan","adjust-view","generate-summary"],setup(t,{emit:e}){const n=e,r=t,i=Lt("Hybride"),s=Lt(!1),o=A=>{const k=A.currentTarget,D=k.nextElementSibling;if(D&&D.classList.contains("dropdown-menu")){const $=k.getBoundingClientRect();D.style.top=`${$.bottom}px`,D.style.left=`${$.left}px`}},a={Hybride:"Hybride",Cadastre:"Cadastre",IGN:"IGN"},l=Zn(()=>r.lastSave?new Date(r.lastSave).toLocaleString("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"Jamais"),c=A=>{i.value=A,n("change-map-type",A),E()},d=()=>{n("create-new-plan"),E()},p=()=>{n("load-plan"),E()},v=()=>{n("save-plan"),E()},m=()=>{n("adjust-view"),E()},x=()=>{n("generate-summary"),E()},E=()=>{s.value=!1};return(A,k)=>(Be(),ze("div",J$,[C("div",Q$,[C("div",eV,[C("button",{class:"btn-toolbar dropdown-toggle",onMouseover:o},[k[2]||(k[2]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M12 1.586l-4 4V17h8V5.586l-4-4zM2 17V9.276l4-3.638V17H2zM2 8.162V3h4.5L12 8.5V17H6V5.638L2 8.162z","clip-rule":"evenodd"})],-1)),C("span",null,Dt(a[i.value]),1)],32),C("div",tV,[(Be(),ze(En,null,fr(a,(D,$)=>C("button",{key:$,class:Fi(["dropdown-item",{active:$===i.value}]),onClick:Y=>c($)},Dt(D),11,nV)),64))])]),A.planName?(Be(),ze("div",rV,[C("div",iV,[C("div",sV,[C("h2",oV,Dt(A.planName),1),A.planDescription?(Be(),ze("p",aV,Dt(A.planDescription),1)):nn("",!0)])])])):nn("",!0),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:d,class:"btn-toolbar",title:"Nouveau plan"},k[3]||(k[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Nouveau",-1)])),C("button",{onClick:p,class:"btn-toolbar",title:"Charger un plan"},k[4]||(k[4]=[Dl('<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor" data-v-bcd65717><path fill-rule="evenodd" d="M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z" clip-rule="evenodd" data-v-bcd65717></path><path d="M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z" data-v-bcd65717></path><path fill-rule="evenodd" d="M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z" clip-rule="evenodd" data-v-bcd65717></path></svg><span class="hidden lg:inline ml-1" data-v-bcd65717>Charger</span>',2)])),C("button",{onClick:v,class:"btn-toolbar",title:"Enregistrer le plan"},k[5]||(k[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Enregistrer",-1)]))])]),C("div",{class:"border-l pl-2"},[C("div",{class:"flex items-center space-x-1"},[C("button",{onClick:m,class:"btn-toolbar",title:"Ajuster la vue"},k[6]||(k[6]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Ajuster",-1)])),C("button",{onClick:x,class:"btn-toolbar",title:"Générer une synthèse"},k[7]||(k[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),C("span",{class:"hidden lg:inline ml-1"},"Synthèse",-1)]))])]),C("div",lV,[C("div",{class:Fi(["text-xs hidden lg:flex items-center",{"text-gray-500":!A.saveStatus,"text-primary-600 font-medium":A.saveStatus==="success","text-blue-600 font-medium":A.saveStatus==="saving"}])},[A.saveStatus==="saving"?(Be(),ze("svg",uV,k[8]||(k[8]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),A.saveStatus==="success"?(Be(),ze("svg",cV,k[9]||(k[9]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),fi(Q2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[A.saveStatus==="saving"?(Be(),ze("span",hV," Sauvegarde en cours... ")):A.saveStatus==="success"?(Be(),ze("span",dV," Sauvegarde réussie ! ")):(Be(),ze("span",fV," Dernière modification : "+Dt(l.value),1))]),_:1})],2)])]),C("div",pV,[C("div",gV,[C("button",{onClick:k[0]||(k[0]=D=>s.value=!s.value),class:"p-2 rounded-md border bg-white shadow-sm"},k[10]||(k[10]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1)])),A.planName?(Be(),ze("div",mV,Dt(A.planName),1)):nn("",!0),C("div",{class:"flex space-x-2"},[C("button",{onClick:d,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[11]||(k[11]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1)])),C("button",{onClick:v,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[12]||(k[12]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M7.707 10.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V6h5a2 2 0 012 2v7a2 2 0 01-2 2H4a2 2 0 01-2-2V8a2 2 0 012-2h5v5.586l-1.293-1.293zM9 4a1 1 0 012 0v2H9V4z"})],-1)])),C("button",{onClick:m,class:"p-2 rounded-md border bg-white shadow-sm flex items-center justify-center"},k[13]||(k[13]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-600",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1)]))])]),s.value?(Be(),ze("div",vV,[C("div",yV,[k[15]||(k[15]=C("h3",{class:"text-base font-semibold text-gray-800"},"Menu",-1)),C("button",{onClick:k[1]||(k[1]=D=>s.value=!1),class:"p-1 rounded-full hover:bg-gray-100"},k[14]||(k[14]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",bV,[A.planName?(Be(),ze("div",_V,[C("h3",wV,Dt(A.planName),1),A.planDescription?(Be(),ze("p",xV,Dt(A.planDescription),1)):nn("",!0)])):nn("",!0),C("div",LV,[k[16]||(k[16]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Type de carte",-1)),C("div",SV,[(Be(),ze(En,null,fr(a,(D,$)=>C("button",{key:$,class:Fi(["px-3 py-2 text-sm rounded-md border shadow-sm",{"bg-blue-50 border-blue-300 text-blue-700 font-medium":$===i.value}]),onClick:Y=>c($)},Dt(D),11,CV)),64))])]),C("div",{class:"flex flex-col"},[k[20]||(k[20]=C("span",{class:"text-sm font-medium text-gray-700 mb-2"},"Outils de plan",-1)),C("div",{class:"grid grid-cols-3 gap-2"},[C("button",{onClick:d,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},k[17]||(k[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V8z","clip-rule":"evenodd"})],-1),li(" Nouveau ")])),C("button",{onClick:p,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},k[18]||(k[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z","clip-rule":"evenodd"}),C("path",{d:"M10 9a1 1 0 011-1h5a1 1 0 110 2h-5a1 1 0 01-1-1z"}),C("path",{"fill-rule":"evenodd",d:"M13 5a1 1 0 011 1v4a1 1 0 11-2 0V6a1 1 0 011-1z","clip-rule":"evenodd"})],-1),li(" Charger ")])),C("button",{onClick:x,class:"px-3 py-2 text-sm rounded-md border shadow-sm flex items-center justify-center bg-white"},k[19]||(k[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z","clip-rule":"evenodd"})],-1),li(" Synthèse ")]))])]),C("div",{class:Fi(["text-sm text-center pt-3 border-t flex items-center justify-center space-x-1 mt-2",{"text-gray-500":!A.saveStatus,"text-primary-600 font-medium":A.saveStatus==="success","text-blue-600 font-medium":A.saveStatus==="saving"}])},[A.saveStatus==="saving"?(Be(),ze("svg",EV,k[21]||(k[21]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),A.saveStatus==="success"?(Be(),ze("svg",PV,k[22]||(k[22]=[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)]))):nn("",!0),fi(Q2,{name:"fade-slide",mode:"out-in"},{default:Wu(()=>[A.saveStatus==="saving"?(Be(),ze("span",MV," Sauvegarde en cours... ")):A.saveStatus==="success"?(Be(),ze("span",kV," Sauvegarde réussie ! ")):(Be(),ze("span",AV," Dernière modification : "+Dt(l.value),1))]),_:1})],2)])])):nn("",!0)])]))}}),DV=jh(TV,[["__scopeId","data-v-bcd65717"]]),OV={class:"comment-thread"},NV={key:0,class:"space-y-3 mb-4"},IV={class:"flex justify-between items-start"},BV={class:"flex items-center"},RV={class:"font-medium text-sm text-gray-900"},FV={class:"flex items-center"},jV={class:"text-xs text-gray-500"},zV=["onClick"],$V={class:"mt-1 text-sm text-gray-700 whitespace-pre-wrap"},VV={key:1,class:"text-center text-sm text-gray-500 italic my-4"},UV={key:2,class:"mt-3"},HV={class:"flex justify-end mt-2"},WV=["disabled"],GV={key:3,class:"text-center text-sm text-gray-500 italic mt-2"},qV=$s({__name:"CommentThread",props:{noteId:{},comments:{}},emits:["update:comments","comment-added","comment-deleted"],setup(t,{emit:e}){const n=t;console.log("[CommentThread] Commentaires reçus initialement:",n.comments),Ri(()=>n.comments,E=>{console.log("[CommentThread] Commentaires mis à jour:",E)},{deep:!0});const r=e,i=da(),s=wf(),o=nu(),a=Lt(""),l=Zn(()=>i.isEntreprise||i.isAdmin);function c(E){return i.user&&E.userId===i.user.id||i.isAdmin}async function d(){var E;if(a.value.trim())try{await s.addComment(n.noteId,a.value.trim()),a.value="",o.success("Commentaire ajouté avec succès"),r("comment-added")}catch(A){if(console.error("Erreur lors de l'ajout du commentaire:",A),(E=A.response)!=null&&E.data){const k=A.response.data;k.note?o.error(`Erreur: ${k.note[0]}`):k.user?o.error(`Erreur: ${k.user[0]}`):k.text?o.error(`Erreur: ${k.text[0]}`):o.error("Erreur lors de l'ajout du commentaire")}else o.error("Erreur lors de l'ajout du commentaire")}}async function p(E){var A;if(confirm("Voulez-vous vraiment supprimer ce commentaire ?"))try{await s.removeComment(n.noteId,E),o.success("Commentaire supprimé"),r("comment-deleted")}catch(k){if(console.error("Erreur lors de la suppression du commentaire:",k),(A=k.response)!=null&&A.data){const D=k.response.data;D.detail?o.error(`Erreur: ${D.detail}`):o.error("Erreur lors de la suppression du commentaire")}else o.error("Erreur lors de la suppression du commentaire")}}function v(E){try{if(!E)return"Date inconnue";const A=new Date(E);return isNaN(A.getTime())?(console.warn(`Date invalide: ${E}`),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(A)}catch(A){return console.error(`Erreur lors du formatage de la date: ${E}`,A),"Date invalide"}}function m(E){switch(E){case"admin":return"bg-purple-100 text-purple-800";case"entreprise":return"bg-blue-100 text-blue-800";case"salarie":return"bg-green-100 text-green-800";case"visiteur":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}}function x(E){switch(E){case"admin":return"Admin";case"entreprise":return"Entreprise";case"salarie":return"Salarié";case"visiteur":return"Visiteur";default:return E}}return(E,A)=>(Be(),ze("div",OV,[E.comments&&E.comments.length>0?(Be(),ze("div",NV,[(Be(!0),ze(En,null,fr(E.comments,k=>(Be(),ze("div",{key:k.id,class:"bg-gray-50 rounded-lg p-3"},[C("div",IV,[C("div",BV,[C("div",RV,Dt(k.userName),1),C("span",{class:Fi(["ml-2 text-xs px-2 py-0.5 rounded-full",m(k.userRole)])},Dt(x(k.userRole)),3)]),C("div",FV,[C("span",jV,Dt(v(k.createdAt)),1),c(k)?(Be(),ze("button",{key:0,onClick:Bh(D=>p(k.id),["prevent"]),class:"ml-2 text-gray-400 hover:text-red-500"},A[1]||(A[1]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,zV)):nn("",!0)])]),C("p",$V,Dt(k.text),1)]))),128))])):(Be(),ze("div",VV," Aucun commentaire pour le moment ")),l.value?(Be(),ze("div",UV,[kn(C("textarea",{"onUpdate:modelValue":A[0]||(A[0]=k=>a.value=k),placeholder:"Ajouter un commentaire...",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",rows:"2"},null,512),[[jr,a.value]]),C("div",HV,[C("button",{type:"button",onClick:Bh(d,["prevent"]),disabled:!a.value.trim(),class:"px-3 py-1 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"}," Ajouter ",8,WV)])])):(Be(),ze("div",GV," Seuls les utilisateurs de l'entreprise peuvent ajouter des commentaires "))]))}}),YV={class:"photo-gallery"},KV={key:0,class:"grid grid-cols-2 gap-2 mb-4"},ZV=["src","onClick"],XV={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-200 rounded-lg flex items-center justify-center"},JV={class:"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex space-x-2"},QV=["onClick"],eU={key:1,class:"text-center text-sm text-gray-500 italic my-4"},tU={class:"flex space-x-2 mt-3"},nU={key:2,class:"mt-4 border border-gray-300 rounded-lg overflow-hidden bg-white"},rU={class:"relative bg-gray-900",style:{height:"300px"}},iU=["src"],sU={class:"p-3 bg-gray-50 border-t border-gray-300 flex justify-center"},oU={key:1,class:"flex space-x-3"},aU={key:3,class:"fixed inset-0 z-[3002] flex items-center justify-center p-4 bg-black bg-opacity-75"},lU={class:"relative max-w-3xl max-h-[90vh] bg-white rounded-lg overflow-hidden"},uU=["src"],cU=$s({__name:"PhotoGallery",props:{noteId:{},photos:{}},emits:["update:photos","photo-added","photo-deleted"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=nu(),o=Lt(null),a=Lt(null),l=Lt(null);let c=null;const d=Lt(!1),p=Lt(!1),v=Lt(null),m=Lt(null);function x(pe){v.value=pe,d.value=!0}async function E(pe){var I;if(confirm("Êtes-vous sûr de vouloir supprimer cette photo ?"))try{await i.removePhoto(n.noteId,pe),s.success("Photo supprimée"),r("photo-deleted"),d.value&&((I=v.value)==null?void 0:I.id)===pe&&(d.value=!1,v.value=null)}catch(z){console.error("Erreur lors de la suppression de la photo:",z),s.error("Erreur lors de la suppression de la photo")}}function A(){l.value&&l.value.click()}async function k(pe){const I=pe.target;if(!I.files||I.files.length===0)return;const z=I.files[0];if(!z.type.startsWith("image/")){s.error("Le fichier doit être une image");return}if(z.size>5*1024*1024){s.error("L'image est trop volumineuse (max 5MB)");return}try{const K=await D(z);await i.addPhoto(n.noteId,{url:K}),I.value="",s.success("Photo ajoutée"),r("photo-added")}catch(K){console.error("Erreur lors de l'ajout de la photo:",K),s.error("Erreur lors de l'ajout de la photo")}}function D(pe){return new Promise((I,z)=>{const K=new FileReader;K.onload=()=>I(K.result),K.onerror=z,K.readAsDataURL(pe)})}Ri(p,async pe=>{if(pe){m.value=null;try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("API de caméra non supportée sur ce navigateur");const I={video:{facingMode:"environment",width:{min:640,ideal:1280,max:1920},height:{min:480,ideal:720,max:1080}}};c=await navigator.mediaDevices.getUserMedia(I),o.value&&(o.value.srcObject=c,await new Promise(z=>{o.value.onloadedmetadata=()=>{o.value.play().then(z)}}))}catch(I){console.error("Erreur lors de l'accès à la caméra:",I);let z="Impossible d'accéder à la caméra";I.name==="NotAllowedError"?z="L'accès à la caméra a été refusé. Veuillez vérifier vos permissions.":I.name==="NotFoundError"?z="Aucune caméra n'a été trouvée sur votre appareil.":I.name==="NotSupportedError"&&(z="Votre navigateur ne supporte pas l'accès à la caméra."),s.error(z),p.value=!1}}else c&&(c.getTracks().forEach(I=>I.stop()),c=null)});function $(){if(!o.value||!a.value)return;const pe=o.value,I=a.value;I.width=pe.videoWidth,I.height=pe.videoHeight;const z=I.getContext("2d");z&&(z.drawImage(pe,0,0,I.width,I.height),m.value=I.toDataURL("image/jpeg"))}function Y(){m.value=null}async function te(){if(m.value)try{await i.addPhoto(n.noteId,{url:m.value}),p.value=!1,s.success("Photo ajoutée"),r("photo-added")}catch(pe){console.error("Erreur lors de l'ajout de la photo:",pe),s.error("Erreur lors de l'ajout de la photo")}}function me(){p.value=!1}return Ku(()=>{c&&(c.getTracks().forEach(pe=>pe.stop()),c=null)}),(pe,I)=>(Be(),ze("div",YV,[pe.photos&&pe.photos.length>0?(Be(),ze("div",KV,[(Be(!0),ze(En,null,fr(pe.photos,z=>(Be(),ze("div",{key:z.id,class:"relative group"},[C("img",{src:z.url,alt:"Photo",class:"w-full h-32 object-cover rounded-lg cursor-pointer",onClick:K=>x(z)},null,8,ZV),C("div",XV,[C("div",JV,[C("button",{onClick:Bh(K=>E(z.id),["stop","prevent"]),class:"p-1 bg-white rounded-full text-gray-700 hover:text-red-600",title:"Supprimer la photo"},I[2]||(I[2]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,QV)])])]))),128))])):(Be(),ze("div",eU," Aucune photo pour le moment ")),C("div",tU,[C("button",{type:"button",onClick:I[0]||(I[0]=z=>p.value=!0),class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},I[3]||(I[3]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})],-1),li(" Prendre une photo ")])),C("button",{type:"button",onClick:A,class:"flex-1 flex items-center justify-center px-3 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 cursor-pointer"},I[4]||(I[4]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),li(" Téléverser ")])),C("input",{id:"photo-upload",ref_key:"fileInput",ref:l,type:"file",accept:"image/*",class:"hidden",onChange:k},null,544)]),p.value?(Be(),ze("div",nU,[C("div",{class:"p-3 bg-gray-50 border-b border-gray-300 flex justify-between items-center"},[I[6]||(I[6]=C("h3",{class:"text-sm font-medium text-gray-700"},"Mode caméra",-1)),C("button",{type:"button",onClick:me,class:"text-gray-400 hover:text-gray-500"},I[5]||(I[5]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",rU,[m.value?(Be(),ze("img",{key:1,src:m.value,class:"w-full h-full object-contain",alt:"Captured"},null,8,iU)):(Be(),ze("video",{key:0,ref_key:"videoElement",ref:o,autoplay:"",class:"w-full h-full object-contain"},null,512)),C("canvas",{ref_key:"canvasElement",ref:a,class:"hidden"},null,512)]),C("div",sU,[m.value?(Be(),ze("div",oU,[C("button",{type:"button",onClick:Y,class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Reprendre "),C("button",{type:"button",onClick:te,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"}," Utiliser ")])):(Be(),ze("button",{key:0,type:"button",onClick:$,class:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-full w-12 h-12 flex items-center justify-center hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"},I[7]||(I[7]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})],-1)])))])])):nn("",!0),d.value?(Be(),ze("div",aU,[C("div",lU,[C("button",{type:"button",onClick:I[1]||(I[1]=z=>d.value=!1),class:"absolute top-2 right-2 z-10 p-1 bg-white rounded-full text-gray-700 hover:text-red-600 shadow-md"},I[8]||(I[8]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])),v.value?(Be(),ze("img",{key:0,src:v.value.url,alt:"Photo",class:"max-h-[80vh] max-w-full object-contain"},null,8,uU)):nn("",!0)])])):nn("",!0)]))}}),hU=jh(cU,[["__scopeId","data-v-f87156b4"]]),dU={class:"fixed z-[9999] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},fU={class:"flex items-center justify-center min-h-screen w-full"},pU={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-2xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},gU={class:"p-4 md:p-6 flex-1 overflow-y-auto"},mU={class:"flex justify-between items-center mb-4 border-b pb-4"},vU={class:"text-xl font-semibold text-gray-900"},yU={class:"mb-4 border-b border-gray-200"},bU={class:"flex space-x-4","aria-label":"Tabs"},_U={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},wU={key:0,class:"ml-1 px-2 py-0.5 text-xs rounded-full bg-primary-100 text-primary-800"},xU={key:0},LU={class:"mb-4"},SU={class:"mb-4"},CU={key:0,class:"mb-4 p-2 rounded bg-gray-50 flex items-center"},EU={class:"mb-4"},PU=["value"],MU={class:"mb-4"},kU=["value"],AU={class:"mb-4"},TU={class:"mt-1 flex space-x-2"},DU=["onClick"],OU={key:1,class:"mt-4"},NU={class:"hidden"},IU={key:2,class:"mt-4"},BE=$s({__name:"NoteEditModal",props:{note:{},isNewNote:{type:Boolean},location:{}},emits:["close","save"],setup(t,{emit:e}){const n=t,r=e,i=wf(),s=nu(),o=Lt("info"),a=window.console;Ri(o,async K=>{a.log("[NoteEditModal] Onglet actif changé:",K),K==="comments"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Commentaires sélectionné, commentaires actuels:",l.value.comments),await p(n.note.id)),K==="photos"&&n.note&&n.note.id&&(a.log("[NoteEditModal] Onglet Photos sélectionné, photos actuelles:",l.value.photos),await v(n.note.id))});const l=Lt({title:"",description:"",columnId:"",accessLevel:Ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[]});function c(K){return Array.isArray(K)?K:typeof K=="object"&&"type"in K&&"coordinates"in K?[K.coordinates[1],K.coordinates[0]]:(a.error("[NoteEditModal] Format de localisation non reconnu:",K),[0,0])}function d(K){if(!K)return new Date().toISOString();try{const N=new Date(K);return isNaN(N.getTime())?(a.warn("[NoteEditModal] Date invalide:",K),new Date().toISOString()):N.toISOString()}catch(N){return a.error("[NoteEditModal] Erreur lors de la création de la date:",N),new Date().toISOString()}}async function p(K){try{a.log(`[NoteEditModal] Chargement des commentaires pour la note ${K}`);const N=await Sa.getComments(K);a.log("[NoteEditModal] Commentaires reçus:",N.data);const B=N.data.map(V=>({id:V.id,text:V.text,createdAt:V.created_at,userId:V.user,userName:V.user_name,userRole:V.user_role}));return a.log("[NoteEditModal] Commentaires transformés:",B),n.note&&(i.updateNote(n.note.id,{comments:B}),l.value.comments=B,a.log("[NoteEditModal] Commentaires mis à jour dans le store et localement"),a.log("[NoteEditModal] editingNote.comments après mise à jour:",l.value.comments)),B}catch(N){return a.error("[NoteEditModal] Erreur lors du chargement des commentaires:",N),s.error("Erreur lors du chargement des commentaires"),[]}}async function v(K){try{a.log(`[NoteEditModal] Chargement des photos pour la note ${K}`);const N=await Sa.getPhotos(K);a.log("[NoteEditModal] Photos reçues:",N.data);const B=N.data.map(V=>({id:V.id,url:V.image,createdAt:V.created_at,caption:V.caption}));return n.note&&(i.updateNote(n.note.id,{photos:B}),l.value.photos=B,a.log("[NoteEditModal] Photos mises à jour dans le store et localement")),B}catch(N){return a.error("[NoteEditModal] Erreur lors du chargement des photos:",N),s.error("Erreur lors du chargement des photos"),[]}}go(async()=>{var K,N;if(a.log("[NoteEditModal] onMounted - props:",n),await i.loadColumns(),a.log("[NoteEditModal] Colonnes chargées:",i.columns),n.note){a.log("[NoteEditModal] Édition d'une note existante:",n.note);const B=JSON.parse(JSON.stringify(n.note));B.createdAt=d(B.createdAt),B.updatedAt=d(B.updatedAt),l.value=B,n.note.id&&(a.log("[NoteEditModal] Chargement des commentaires et photos..."),await Promise.all([p(n.note.id),v(n.note.id)]),a.log("[NoteEditModal] Après chargement - Commentaires:",((K=l.value.comments)==null?void 0:K.length)||0),a.log("[NoteEditModal] Après chargement - Photos:",((N=l.value.photos)==null?void 0:N.length)||0),setTimeout(()=>{a.log("[NoteEditModal] Compteurs après timeout - Commentaires:",x.value),a.log("[NoteEditModal] Compteurs après timeout - Photos:",E.value)},0))}else if(n.isNewNote){if(a.log("[NoteEditModal] Création d'une nouvelle note"),l.value={title:"Nouvelle note",description:"",columnId:i.getDefaultColumn.id||"1",accessLevel:Ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},comments:[],photos:[],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},n.location){a.log("[NoteEditModal] Ajout de la localisation:",n.location);const B=c(n.location);l.value.location=B}a.log("[NoteEditModal] Niveau d'accès initial:",l.value.accessLevel)}else a.error("[NoteEditModal] Erreur: Ni note existante ni nouvelle note");a.log("[NoteEditModal] editingNote.value après initialisation:",l.value)});const m=Zn(()=>i.getSortedColumns),x=Zn(()=>{var N;const K=((N=l.value.comments)==null?void 0:N.length)||0;return a.log("[NoteEditModal] Computed commentsCount recalculé:",K),K}),E=Zn(()=>{var N;const K=((N=l.value.photos)==null?void 0:N.length)||0;return a.log("[NoteEditModal] Computed photosCount recalculé:",K),K}),A=[{id:Ki.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ki.COMPANY,title:"Entreprise",description:"Visible par l'entreprise uniquement"},{id:Ki.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et les salariés"},{id:Ki.VISITOR,title:"Visiteurs",description:"Visible par tous"}],k=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#6B7280"],D=K=>{l.value.style?(l.value.style.color=K,l.value.style.fillColor=K):l.value.style={color:K,weight:2,opacity:1,fillColor:K,fillOpacity:.6,radius:8},l.value.color=K},$=()=>{var K,N,B,V,R,j,W,X,oe,_e,Ce;l.value={title:((K=n.note)==null?void 0:K.title)||"",description:((N=n.note)==null?void 0:N.description)||"",columnId:((B=n.note)==null?void 0:B.columnId)||"",accessLevel:((V=n.note)==null?void 0:V.accessLevel)||"private",style:((R=n.note)==null?void 0:R.style)||{color:((j=n.note)==null?void 0:j.color)||"#3B82F6",weight:2,opacity:1,fillColor:((W=n.note)==null?void 0:W.color)||"#3B82F6",fillOpacity:.6,radius:8},color:((X=n.note)==null?void 0:X.color)||"#3B82F6",location:n.location||((oe=n.note)==null?void 0:oe.location)||null,comments:((_e=n.note)==null?void 0:_e.comments)||[],photos:((Ce=n.note)==null?void 0:Ce.photos)||[]}};go(()=>{$()}),Ri(()=>n.note,()=>{$()},{deep:!0});function Y(){r("close")}async function te(){a.log("[NoteEditModal] Commentaire ajouté, le modal reste ouvert"),n.note&&n.note.id&&await p(n.note.id)}async function me(){a.log("[NoteEditModal] Photo ajoutée, le modal reste ouvert"),n.note&&n.note.id&&await v(n.note.id)}async function pe(){a.log("[NoteEditModal] Commentaire supprimé, mise à jour de la liste"),n.note&&n.note.id&&await p(n.note.id)}async function I(){a.log("[NoteEditModal] Photo supprimée, mise à jour de la liste"),n.note&&n.note.id&&await v(n.note.id)}async function z(){var K;try{const N={title:l.value.title,description:l.value.description,columnId:l.value.columnId,style:l.value.style,access_level:l.value.accessLevel,comments:l.value.comments||[],photos:l.value.photos||[]};l.value.location&&(N.location=Array.isArray(l.value.location)?{type:"Point",coordinates:[l.value.location[1],l.value.location[0]]}:l.value.location),a.log("[NoteEditModal] Données de note à sauvegarder:",N);let B;if((K=n.note)!=null&&K.id){B=(await Sa.updateNote(n.note.id,N)).data,i.updateNote(n.note.id,{...l.value,...B,accessLevel:l.value.accessLevel,style:l.value.style,updatedAt:new Date().toISOString()});const R=n.note.id,j=new CustomEvent("geonote:update",{detail:{noteId:R,properties:{name:l.value.title,description:l.value.description,columnId:l.value.columnId,accessLevel:l.value.accessLevel,style:l.value.style}}});window.dispatchEvent(j),s.success("Note mise à jour avec succès")}else{if(B=(await Sa.createNote(N)).data,!B.id)throw new Error("Le backend n'a pas fourni d'ID pour la nouvelle note");const R=i.getDefaultColumn,j={...N,id:B.id,columnId:N.columnId||R.id,accessLevel:l.value.accessLevel,style:N.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.2}};a.log("[NoteEditModal] Note à ajouter au store avec ID backend:",B.id),i.addNote(j),s.success("Note créée avec succès")}B&&(!B.comments&&l.value.comments&&(B.comments=l.value.comments),!B.photos&&l.value.photos&&(B.photos=l.value.photos)),r("save",B),r("close")}catch(N){a.error("[NoteEditModal] Erreur lors de la sauvegarde de la note:",N),s.error("Erreur lors de la sauvegarde de la note")}}return(K,N)=>{var B;return Be(),ze("div",dU,[C("div",fU,[N[17]||(N[17]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",pU,[C("form",{onSubmit:Bh(z,["prevent"]),class:"h-full md:h-auto flex flex-col"},[C("div",gU,[C("div",mU,[C("h3",vU,Dt((B=K.note)!=null&&B.id?"Modifier la note":"Nouvelle note"),1),C("button",{type:"button",onClick:Y,class:"text-gray-400 hover:text-gray-500"},N[7]||(N[7]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",yU,[C("nav",bU,[C("button",{type:"button",onClick:N[0]||(N[0]=V=>o.value="info"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="info"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])}," Informations ",2),C("button",{type:"button",onClick:N[1]||(N[1]=V=>o.value="comments"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="comments"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[N[8]||(N[8]=li(" Commentaires ")),x.value>0?(Be(),ze("span",_U,Dt(x.value),1)):nn("",!0)],2),C("button",{type:"button",onClick:N[2]||(N[2]=V=>o.value="photos"),class:Fi(["px-3 py-2 text-sm font-medium border-b-2 focus:outline-none",o.value==="photos"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[N[9]||(N[9]=li(" Photos ")),E.value>0?(Be(),ze("span",wU,Dt(E.value),1)):nn("",!0)],2)])]),o.value==="info"?(Be(),ze("div",xU,[C("div",LU,[N[10]||(N[10]=C("label",{for:"title",class:"block text-sm font-medium text-gray-700"},"Titre",-1)),kn(C("input",{type:"text",id:"title","onUpdate:modelValue":N[3]||(N[3]=V=>l.value.title=V),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[jr,l.value.title]])]),C("div",SU,[N[11]||(N[11]=C("label",{for:"description",class:"block text-sm font-medium text-gray-700"},"Description",-1)),kn(C("textarea",{id:"description","onUpdate:modelValue":N[4]||(N[4]=V=>l.value.description=V),rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[jr,l.value.description]])]),l.value.location?(Be(),ze("div",CU,N[12]||(N[12]=[C("div",{class:"text-primary-600 mr-2"},[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})])],-1),C("div",{class:"text-sm text-gray-600"}," Note géolocalisée ",-1)]))):nn("",!0),C("div",EU,[N[13]||(N[13]=C("label",{for:"column",class:"block text-sm font-medium text-gray-700"},"État",-1)),kn(C("select",{id:"column","onUpdate:modelValue":N[5]||(N[5]=V=>l.value.columnId=V),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Be(!0),ze(En,null,fr(m.value,V=>(Be(),ze("option",{key:V.id,value:V.id},Dt(V.title),9,PU))),128))],512),[[rs,l.value.columnId]])]),C("div",MU,[N[14]||(N[14]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),kn(C("select",{id:"accessLevel","onUpdate:modelValue":N[6]||(N[6]=V=>l.value.accessLevel=V),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[(Be(),ze(En,null,fr(A,V=>C("option",{key:V.id,value:V.id},Dt(V.title)+" - "+Dt(V.description),9,kU)),64))],512),[[rs,l.value.accessLevel]])]),C("div",AU,[N[15]||(N[15]=C("label",{class:"block text-sm font-medium text-gray-700"},"Couleur",-1)),C("div",TU,[(Be(),ze(En,null,fr(k,V=>C("div",{key:V,class:Fi(["w-8 h-8 rounded-full cursor-pointer border-2",{"border-gray-400":l.value.style.color!==V,"border-black":l.value.style.color===V}]),style:eu({backgroundColor:V}),onClick:R=>D(V)},null,14,DU)),64))])])])):o.value==="comments"?(Be(),ze("div",OU,[C("div",NU,Dt(a.log("[NoteEditModal] Commentaires passés au composant:",l.value.comments)),1),K.note?(Be(),Ol(qV,{key:0,noteId:K.note.id,comments:l.value.comments||[],onCommentAdded:te,onCommentDeleted:pe},null,8,["noteId","comments"])):nn("",!0)])):o.value==="photos"?(Be(),ze("div",IU,[K.note?(Be(),Ol(hU,{key:0,noteId:K.note.id,photos:l.value.photos||[],onPhotoAdded:me,onPhotoDeleted:I},null,8,["noteId","photos"])):nn("",!0)])):nn("",!0)]),C("div",{class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},[N[16]||(N[16]=C("button",{type:"submit",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-primary-600 text-base font-medium text-white hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:ml-3 sm:w-auto sm:text-sm"}," Enregistrer ",-1)),C("button",{onClick:Y,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Annuler ")])],32)])])])}}});(()=>{var On,tr;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,s=Object.prototype.hasOwnProperty,o=(h,g)=>()=>(g||h((g={exports:{}}).exports,g),g.exports),a=(h,g,_,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let M of r(g))!s.call(h,M)&&M!==_&&e(h,M,{get:()=>g[M],enumerable:!(S=n(g,M))||S.enumerable});return h},l=(h,g,_)=>(_=h!=null?t(i(h)):{},a(g||!h||!h.__esModule?e(_,"default",{value:h,enumerable:!0}):_,h)),c=o((h,g)=>{function _(){this.__data__=[],this.size=0}g.exports=_}),d=o((h,g)=>{function _(S,M){return S===M||S!==S&&M!==M}g.exports=_}),p=o((h,g)=>{var _=d();function S(M,U){for(var ne=M.length;ne--;)if(_(M[ne][0],U))return ne;return-1}g.exports=S}),v=o((h,g)=>{var _=p(),S=Array.prototype,M=S.splice;function U(ne){var ae=this.__data__,ye=_(ae,ne);if(ye<0)return!1;var Ee=ae.length-1;return ye==Ee?ae.pop():M.call(ae,ye,1),--this.size,!0}g.exports=U}),m=o((h,g)=>{var _=p();function S(M){var U=this.__data__,ne=_(U,M);return ne<0?void 0:U[ne][1]}g.exports=S}),x=o((h,g)=>{var _=p();function S(M){return _(this.__data__,M)>-1}g.exports=S}),E=o((h,g)=>{var _=p();function S(M,U){var ne=this.__data__,ae=_(ne,M);return ae<0?(++this.size,ne.push([M,U])):ne[ae][1]=U,this}g.exports=S}),A=o((h,g)=>{var _=c(),S=v(),M=m(),U=x(),ne=E();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=ne,g.exports=ae}),k=o((h,g)=>{var _=A();function S(){this.__data__=new _,this.size=0}g.exports=S}),D=o((h,g)=>{function _(S){var M=this.__data__,U=M.delete(S);return this.size=M.size,U}g.exports=_}),$=o((h,g)=>{function _(S){return this.__data__.get(S)}g.exports=_}),Y=o((h,g)=>{function _(S){return this.__data__.has(S)}g.exports=_}),te=o((h,g)=>{var _=typeof Ca=="object"&&Ca&&Ca.Object===Object&&Ca;g.exports=_}),me=o((h,g)=>{var _=te(),S=typeof self=="object"&&self&&self.Object===Object&&self,M=_||S||Function("return this")();g.exports=M}),pe=o((h,g)=>{var _=me(),S=_.Symbol;g.exports=S}),I=o((h,g)=>{var _=pe(),S=Object.prototype,M=S.hasOwnProperty,U=S.toString,ne=_?_.toStringTag:void 0;function ae(ye){var Ee=M.call(ye,ne),nt=ye[ne];try{ye[ne]=void 0;var qe=!0}catch{}var bt=U.call(ye);return qe&&(Ee?ye[ne]=nt:delete ye[ne]),bt}g.exports=ae}),z=o((h,g)=>{var _=Object.prototype,S=_.toString;function M(U){return S.call(U)}g.exports=M}),K=o((h,g)=>{var _=pe(),S=I(),M=z(),U="[object Null]",ne="[object Undefined]",ae=_?_.toStringTag:void 0;function ye(Ee){return Ee==null?Ee===void 0?ne:U:ae&&ae in Object(Ee)?S(Ee):M(Ee)}g.exports=ye}),N=o((h,g)=>{function _(S){var M=typeof S;return S!=null&&(M=="object"||M=="function")}g.exports=_}),B=o((h,g)=>{var _=K(),S=N(),M="[object AsyncFunction]",U="[object Function]",ne="[object GeneratorFunction]",ae="[object Proxy]";function ye(Ee){if(!S(Ee))return!1;var nt=_(Ee);return nt==U||nt==ne||nt==M||nt==ae}g.exports=ye}),V=o((h,g)=>{var _=me(),S=_["__core-js_shared__"];g.exports=S}),R=o((h,g)=>{var _=V(),S=function(){var U=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||"");return U?"Symbol(src)_1."+U:""}();function M(U){return!!S&&S in U}g.exports=M}),j=o((h,g)=>{var _=Function.prototype,S=_.toString;function M(U){if(U!=null){try{return S.call(U)}catch{}try{return U+""}catch{}}return""}g.exports=M}),W=o((h,g)=>{var _=B(),S=R(),M=N(),U=j(),ne=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,ye=Function.prototype,Ee=Object.prototype,nt=ye.toString,qe=Ee.hasOwnProperty,bt=RegExp("^"+nt.call(qe).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function It(tn){if(!M(tn)||S(tn))return!1;var wn=_(tn)?bt:ae;return wn.test(U(tn))}g.exports=It}),X=o((h,g)=>{function _(S,M){return S==null?void 0:S[M]}g.exports=_}),oe=o((h,g)=>{var _=W(),S=X();function M(U,ne){var ae=S(U,ne);return _(ae)?ae:void 0}g.exports=M}),_e=o((h,g)=>{var _=oe(),S=me(),M=_(S,"Map");g.exports=M}),Ce=o((h,g)=>{var _=oe(),S=_(Object,"create");g.exports=S}),De=o((h,g)=>{var _=Ce();function S(){this.__data__=_?_(null):{},this.size=0}g.exports=S}),Z=o((h,g)=>{function _(S){var M=this.has(S)&&delete this.__data__[S];return this.size-=M?1:0,M}g.exports=_}),G=o((h,g)=>{var _=Ce(),S="__lodash_hash_undefined__",M=Object.prototype,U=M.hasOwnProperty;function ne(ae){var ye=this.__data__;if(_){var Ee=ye[ae];return Ee===S?void 0:Ee}return U.call(ye,ae)?ye[ae]:void 0}g.exports=ne}),re=o((h,g)=>{var _=Ce(),S=Object.prototype,M=S.hasOwnProperty;function U(ne){var ae=this.__data__;return _?ae[ne]!==void 0:M.call(ae,ne)}g.exports=U}),he=o((h,g)=>{var _=Ce(),S="__lodash_hash_undefined__";function M(U,ne){var ae=this.__data__;return this.size+=this.has(U)?0:1,ae[U]=_&&ne===void 0?S:ne,this}g.exports=M}),ce=o((h,g)=>{var _=De(),S=Z(),M=G(),U=re(),ne=he();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=ne,g.exports=ae}),ve=o((h,g)=>{var _=ce(),S=A(),M=_e();function U(){this.size=0,this.__data__={hash:new _,map:new(M||S),string:new _}}g.exports=U}),ee=o((h,g)=>{function _(S){var M=typeof S;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?S!=="__proto__":S===null}g.exports=_}),J=o((h,g)=>{var _=ee();function S(M,U){var ne=M.__data__;return _(U)?ne[typeof U=="string"?"string":"hash"]:ne.map}g.exports=S}),Oe=o((h,g)=>{var _=J();function S(M){var U=_(this,M).delete(M);return this.size-=U?1:0,U}g.exports=S}),Te=o((h,g)=>{var _=J();function S(M){return _(this,M).get(M)}g.exports=S}),Ye=o((h,g)=>{var _=J();function S(M){return _(this,M).has(M)}g.exports=S}),ge=o((h,g)=>{var _=J();function S(M,U){var ne=_(this,M),ae=ne.size;return ne.set(M,U),this.size+=ne.size==ae?0:1,this}g.exports=S}),Q=o((h,g)=>{var _=ve(),S=Oe(),M=Te(),U=Ye(),ne=ge();function ae(ye){var Ee=-1,nt=ye==null?0:ye.length;for(this.clear();++Ee<nt;){var qe=ye[Ee];this.set(qe[0],qe[1])}}ae.prototype.clear=_,ae.prototype.delete=S,ae.prototype.get=M,ae.prototype.has=U,ae.prototype.set=ne,g.exports=ae}),ie=o((h,g)=>{var _=A(),S=_e(),M=Q(),U=200;function ne(ae,ye){var Ee=this.__data__;if(Ee instanceof _){var nt=Ee.__data__;if(!S||nt.length<U-1)return nt.push([ae,ye]),this.size=++Ee.size,this;Ee=this.__data__=new M(nt)}return Ee.set(ae,ye),this.size=Ee.size,this}g.exports=ne}),fe=o((h,g)=>{var _=A(),S=k(),M=D(),U=$(),ne=Y(),ae=ie();function ye(Ee){var nt=this.__data__=new _(Ee);this.size=nt.size}ye.prototype.clear=S,ye.prototype.delete=M,ye.prototype.get=U,ye.prototype.has=ne,ye.prototype.set=ae,g.exports=ye}),Se=o((h,g)=>{var _=oe(),S=function(){try{var M=_(Object,"defineProperty");return M({},"",{}),M}catch{}}();g.exports=S}),de=o((h,g)=>{var _=Se();function S(M,U,ne){U=="__proto__"&&_?_(M,U,{configurable:!0,enumerable:!0,value:ne,writable:!0}):M[U]=ne}g.exports=S}),Xe=o((h,g)=>{var _=de(),S=d();function M(U,ne,ae){(ae!==void 0&&!S(U[ne],ae)||ae===void 0&&!(ne in U))&&_(U,ne,ae)}g.exports=M}),$e=o((h,g)=>{function _(S){return function(M,U,ne){for(var ae=-1,ye=Object(M),Ee=ne(M),nt=Ee.length;nt--;){var qe=Ee[S?nt:++ae];if(U(ye[qe],qe,ye)===!1)break}return M}}g.exports=_}),Je=o((h,g)=>{var _=$e(),S=_();g.exports=S}),He=o((h,g)=>{var _=me(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof g=="object"&&g&&!g.nodeType&&g,U=M&&M.exports===S,ne=U?_.Buffer:void 0,ae=ne?ne.allocUnsafe:void 0;function ye(Ee,nt){if(nt)return Ee.slice();var qe=Ee.length,bt=ae?ae(qe):new Ee.constructor(qe);return Ee.copy(bt),bt}g.exports=ye}),Ge=o((h,g)=>{var _=me(),S=_.Uint8Array;g.exports=S}),xt=o((h,g)=>{var _=Ge();function S(M){var U=new M.constructor(M.byteLength);return new _(U).set(new _(M)),U}g.exports=S}),Et=o((h,g)=>{var _=xt();function S(M,U){var ne=U?_(M.buffer):M.buffer;return new M.constructor(ne,M.byteOffset,M.length)}g.exports=S}),Kt=o((h,g)=>{function _(S,M){var U=-1,ne=S.length;for(M||(M=Array(ne));++U<ne;)M[U]=S[U];return M}g.exports=_}),sn=o((h,g)=>{var _=N(),S=Object.create,M=function(){function U(){}return function(ne){if(!_(ne))return{};if(S)return S(ne);U.prototype=ne;var ae=new U;return U.prototype=void 0,ae}}();g.exports=M}),an=o((h,g)=>{function _(S,M){return function(U){return S(M(U))}}g.exports=_}),Qe=o((h,g)=>{var _=an(),S=_(Object.getPrototypeOf,Object);g.exports=S}),at=o((h,g)=>{var _=Object.prototype;function S(M){var U=M&&M.constructor,ne=typeof U=="function"&&U.prototype||_;return M===ne}g.exports=S}),it=o((h,g)=>{var _=sn(),S=Qe(),M=at();function U(ne){return typeof ne.constructor=="function"&&!M(ne)?_(S(ne)):{}}g.exports=U}),Bt=o((h,g)=>{function _(S){return S!=null&&typeof S=="object"}g.exports=_}),Qt=o((h,g)=>{var _=K(),S=Bt(),M="[object Arguments]";function U(ne){return S(ne)&&_(ne)==M}g.exports=U}),Tn=o((h,g)=>{var _=Qt(),S=Bt(),M=Object.prototype,U=M.hasOwnProperty,ne=M.propertyIsEnumerable,ae=_(function(){return arguments}())?_:function(ye){return S(ye)&&U.call(ye,"callee")&&!ne.call(ye,"callee")};g.exports=ae}),xn=o((h,g)=>{var _=Array.isArray;g.exports=_}),An=o((h,g)=>{var _=9007199254740991;function S(M){return typeof M=="number"&&M>-1&&M%1==0&&M<=_}g.exports=S}),Kn=o((h,g)=>{var _=B(),S=An();function M(U){return U!=null&&S(U.length)&&!_(U)}g.exports=M}),en=o((h,g)=>{var _=Kn(),S=Bt();function M(U){return S(U)&&_(U)}g.exports=M}),Ln=o((h,g)=>{function _(){return!1}g.exports=_}),Mn=o((h,g)=>{var _=me(),S=Ln(),M=typeof h=="object"&&h&&!h.nodeType&&h,U=M&&typeof g=="object"&&g&&!g.nodeType&&g,ne=U&&U.exports===M,ae=ne?_.Buffer:void 0,ye=ae?ae.isBuffer:void 0,Ee=ye||S;g.exports=Ee}),Hn=o((h,g)=>{var _=K(),S=Qe(),M=Bt(),U="[object Object]",ne=Function.prototype,ae=Object.prototype,ye=ne.toString,Ee=ae.hasOwnProperty,nt=ye.call(Object);function qe(bt){if(!M(bt)||_(bt)!=U)return!1;var It=S(bt);if(It===null)return!0;var tn=Ee.call(It,"constructor")&&It.constructor;return typeof tn=="function"&&tn instanceof tn&&ye.call(tn)==nt}g.exports=qe}),hr=o((h,g)=>{var _=K(),S=An(),M=Bt(),U="[object Arguments]",ne="[object Array]",ae="[object Boolean]",ye="[object Date]",Ee="[object Error]",nt="[object Function]",qe="[object Map]",bt="[object Number]",It="[object Object]",tn="[object RegExp]",wn="[object Set]",Pn="[object String]",dr="[object WeakMap]",tt="[object ArrayBuffer]",st="[object DataView]",pt="[object Float32Array]",zt="[object Float64Array]",St="[object Int8Array]",Rt="[object Int16Array]",be="[object Int32Array]",ke="[object Uint8Array]",je="[object Uint8ClampedArray]",Fe="[object Uint16Array]",Ue="[object Uint32Array]",We={};We[pt]=We[zt]=We[St]=We[Rt]=We[be]=We[ke]=We[je]=We[Fe]=We[Ue]=!0,We[U]=We[ne]=We[tt]=We[ae]=We[st]=We[ye]=We[Ee]=We[nt]=We[qe]=We[bt]=We[It]=We[tn]=We[wn]=We[Pn]=We[dr]=!1;function ct(ht){return M(ht)&&S(ht.length)&&!!We[_(ht)]}g.exports=ct}),vr=o((h,g)=>{function _(S){return function(M){return S(M)}}g.exports=_}),ir=o((h,g)=>{var _=te(),S=typeof h=="object"&&h&&!h.nodeType&&h,M=S&&typeof g=="object"&&g&&!g.nodeType&&g,U=M&&M.exports===S,ne=U&&_.process,ae=function(){try{var ye=M&&M.require&&M.require("util").types;return ye||ne&&ne.binding&&ne.binding("util")}catch{}}();g.exports=ae}),Vr=o((h,g)=>{var _=hr(),S=vr(),M=ir(),U=M&&M.isTypedArray,ne=U?S(U):_;g.exports=ne}),Vs=o((h,g)=>{function _(S,M){if(!(M==="constructor"&&typeof S[M]=="function")&&M!="__proto__")return S[M]}g.exports=_}),ft=o((h,g)=>{var _=de(),S=d(),M=Object.prototype,U=M.hasOwnProperty;function ne(ae,ye,Ee){var nt=ae[ye];(!(U.call(ae,ye)&&S(nt,Ee))||Ee===void 0&&!(ye in ae))&&_(ae,ye,Ee)}g.exports=ne}),rt=o((h,g)=>{var _=ft(),S=de();function M(U,ne,ae,ye){var Ee=!ae;ae||(ae={});for(var nt=-1,qe=ne.length;++nt<qe;){var bt=ne[nt],It=ye?ye(ae[bt],U[bt],bt,ae,U):void 0;It===void 0&&(It=U[bt]),Ee?S(ae,bt,It):_(ae,bt,It)}return ae}g.exports=M}),$t=o((h,g)=>{function _(S,M){for(var U=-1,ne=Array(S);++U<S;)ne[U]=M(U);return ne}g.exports=_}),Jt=o((h,g)=>{var _=9007199254740991,S=/^(?:0|[1-9]\d*)$/;function M(U,ne){var ae=typeof U;return ne=ne??_,!!ne&&(ae=="number"||ae!="symbol"&&S.test(U))&&U>-1&&U%1==0&&U<ne}g.exports=M}),Gn=o((h,g)=>{var _=$t(),S=Tn(),M=xn(),U=Mn(),ne=Jt(),ae=Vr(),ye=Object.prototype,Ee=ye.hasOwnProperty;function nt(qe,bt){var It=M(qe),tn=!It&&S(qe),wn=!It&&!tn&&U(qe),Pn=!It&&!tn&&!wn&&ae(qe),dr=It||tn||wn||Pn,tt=dr?_(qe.length,String):[],st=tt.length;for(var pt in qe)(bt||Ee.call(qe,pt))&&!(dr&&(pt=="length"||wn&&(pt=="offset"||pt=="parent")||Pn&&(pt=="buffer"||pt=="byteLength"||pt=="byteOffset")||ne(pt,st)))&&tt.push(pt);return tt}g.exports=nt}),Sn=o((h,g)=>{function _(S){var M=[];if(S!=null)for(var U in Object(S))M.push(U);return M}g.exports=_}),Ut=o((h,g)=>{var _=N(),S=at(),M=Sn(),U=Object.prototype,ne=U.hasOwnProperty;function ae(ye){if(!_(ye))return M(ye);var Ee=S(ye),nt=[];for(var qe in ye)qe=="constructor"&&(Ee||!ne.call(ye,qe))||nt.push(qe);return nt}g.exports=ae}),cn=o((h,g)=>{var _=Gn(),S=Ut(),M=Kn();function U(ne){return M(ne)?_(ne,!0):S(ne)}g.exports=U}),lt=o((h,g)=>{var _=rt(),S=cn();function M(U){return _(U,S(U))}g.exports=M}),qt=o((h,g)=>{var _=Xe(),S=He(),M=Et(),U=Kt(),ne=it(),ae=Tn(),ye=xn(),Ee=en(),nt=Mn(),qe=B(),bt=N(),It=Hn(),tn=Vr(),wn=Vs(),Pn=lt();function dr(tt,st,pt,zt,St,Rt,be){var ke=wn(tt,pt),je=wn(st,pt),Fe=be.get(je);if(Fe){_(tt,pt,Fe);return}var Ue=Rt?Rt(ke,je,pt+"",tt,st,be):void 0,We=Ue===void 0;if(We){var ct=ye(je),ht=!ct&&nt(je),vt=!ct&&!ht&&tn(je);Ue=je,ct||ht||vt?ye(ke)?Ue=ke:Ee(ke)?Ue=U(ke):ht?(We=!1,Ue=S(je,!0)):vt?(We=!1,Ue=M(je,!0)):Ue=[]:It(je)||ae(je)?(Ue=ke,ae(ke)?Ue=Pn(ke):(!bt(ke)||qe(ke))&&(Ue=ne(je))):We=!1}We&&(be.set(je,Ue),St(Ue,je,zt,Rt,be),be.delete(je)),_(tt,pt,Ue)}g.exports=dr}),Dn=o((h,g)=>{var _=fe(),S=Xe(),M=Je(),U=qt(),ne=N(),ae=cn(),ye=Vs();function Ee(nt,qe,bt,It,tn){nt!==qe&&M(qe,function(wn,Pn){if(tn||(tn=new _),ne(wn))U(nt,qe,Pn,bt,Ee,It,tn);else{var dr=It?It(ye(nt,Pn),wn,Pn+"",nt,qe,tn):void 0;dr===void 0&&(dr=wn),S(nt,Pn,dr)}},ae)}g.exports=Ee}),Ar=o((h,g)=>{function _(S){return S}g.exports=_}),Tt=o((h,g)=>{function _(S,M,U){switch(U.length){case 0:return S.call(M);case 1:return S.call(M,U[0]);case 2:return S.call(M,U[0],U[1]);case 3:return S.call(M,U[0],U[1],U[2])}return S.apply(M,U)}g.exports=_}),zn=o((h,g)=>{var _=Tt(),S=Math.max;function M(U,ne,ae){return ne=S(ne===void 0?U.length-1:ne,0),function(){for(var ye=arguments,Ee=-1,nt=S(ye.length-ne,0),qe=Array(nt);++Ee<nt;)qe[Ee]=ye[ne+Ee];Ee=-1;for(var bt=Array(ne+1);++Ee<ne;)bt[Ee]=ye[Ee];return bt[ne]=ae(qe),_(U,this,bt)}}g.exports=M}),sr=o((h,g)=>{function _(S){return function(){return S}}g.exports=_}),mi=o((h,g)=>{var _=sr(),S=Se(),M=Ar(),U=S?function(ne,ae){return S(ne,"toString",{configurable:!0,enumerable:!1,value:_(ae),writable:!0})}:M;g.exports=U}),Nr=o((h,g)=>{var _=800,S=16,M=Date.now;function U(ne){var ae=0,ye=0;return function(){var Ee=M(),nt=S-(Ee-ye);if(ye=Ee,nt>0){if(++ae>=_)return arguments[0]}else ae=0;return ne.apply(void 0,arguments)}}g.exports=U}),Rr=o((h,g)=>{var _=mi(),S=Nr(),M=S(_);g.exports=M}),yr=o((h,g)=>{var _=Ar(),S=zn(),M=Rr();function U(ne,ae){return M(S(ne,ae,_),ne+"")}g.exports=U}),ji=o((h,g)=>{var _=d(),S=Kn(),M=Jt(),U=N();function ne(ae,ye,Ee){if(!U(Ee))return!1;var nt=typeof ye;return(nt=="number"?S(Ee)&&M(ye,Ee.length):nt=="string"&&ye in Ee)?_(Ee[ye],ae):!1}g.exports=ne}),_r=o((h,g)=>{var _=yr(),S=ji();function M(U){return _(function(ne,ae){var ye=-1,Ee=ae.length,nt=Ee>1?ae[Ee-1]:void 0,qe=Ee>2?ae[2]:void 0;for(nt=U.length>3&&typeof nt=="function"?(Ee--,nt):void 0,qe&&S(ae[0],ae[1],qe)&&(nt=Ee<3?void 0:nt,Ee=1),ne=Object(ne);++ye<Ee;){var bt=ae[ye];bt&&U(ne,bt,ye,nt)}return ne})}g.exports=M}),Fr=o((h,g)=>{var _=Dn(),S=_r(),M=S(function(U,ne,ae){_(U,ne,ae)});g.exports=M}),Cr=o((h,g)=>{var _=K(),S=Bt(),M="[object Symbol]";function U(ne){return typeof ne=="symbol"||S(ne)&&_(ne)==M}g.exports=U}),un=o((h,g)=>{var _=xn(),S=Cr(),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/;function ne(ae,ye){if(_(ae))return!1;var Ee=typeof ae;return Ee=="number"||Ee=="symbol"||Ee=="boolean"||ae==null||S(ae)?!0:U.test(ae)||!M.test(ae)||ye!=null&&ae in Object(ye)}g.exports=ne}),qi=o((h,g)=>{var _=Q(),S="Expected a function";function M(U,ne){if(typeof U!="function"||ne!=null&&typeof ne!="function")throw new TypeError(S);var ae=function(){var ye=arguments,Ee=ne?ne.apply(this,ye):ye[0],nt=ae.cache;if(nt.has(Ee))return nt.get(Ee);var qe=U.apply(this,ye);return ae.cache=nt.set(Ee,qe)||nt,qe};return ae.cache=new(M.Cache||_),ae}M.Cache=_,g.exports=M}),Zi=o((h,g)=>{var _=qi(),S=500;function M(U){var ne=_(U,function(ye){return ae.size===S&&ae.clear(),ye}),ae=ne.cache;return ne}g.exports=M}),Vi=o((h,g)=>{var _=Zi(),S=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,U=_(function(ne){var ae=[];return ne.charCodeAt(0)===46&&ae.push(""),ne.replace(S,function(ye,Ee,nt,qe){ae.push(nt?qe.replace(M,"$1"):Ee||ye)}),ae});g.exports=U}),pi=o((h,g)=>{function _(S,M){for(var U=-1,ne=S==null?0:S.length,ae=Array(ne);++U<ne;)ae[U]=M(S[U],U,S);return ae}g.exports=_}),zr=o((h,g)=>{var _=pe(),S=pi(),M=xn(),U=Cr(),ne=_?_.prototype:void 0,ae=ne?ne.toString:void 0;function ye(Ee){if(typeof Ee=="string")return Ee;if(M(Ee))return S(Ee,ye)+"";if(U(Ee))return ae?ae.call(Ee):"";var nt=Ee+"";return nt=="0"&&1/Ee==-1/0?"-0":nt}g.exports=ye}),Jr=o((h,g)=>{var _=zr();function S(M){return M==null?"":_(M)}g.exports=S}),gr=o((h,g)=>{var _=xn(),S=un(),M=Vi(),U=Jr();function ne(ae,ye){return _(ae)?ae:S(ae,ye)?[ae]:M(U(ae))}g.exports=ne}),Ui=o((h,g)=>{var _=Cr();function S(M){if(typeof M=="string"||_(M))return M;var U=M+"";return U=="0"&&1/M==-1/0?"-0":U}g.exports=S}),qo=o((h,g)=>{var _=gr(),S=Ui();function M(U,ne){ne=_(ne,U);for(var ae=0,ye=ne.length;U!=null&&ae<ye;)U=U[S(ne[ae++])];return ae&&ae==ye?U:void 0}g.exports=M}),Is=o((h,g)=>{var _=qo();function S(M,U,ne){var ae=M==null?void 0:_(M,U);return ae===void 0?ne:ae}g.exports=S}),Yn=o((h,g)=>{(function(_,S){typeof h=="object"&&typeof g<"u"?g.exports=S():(_=_||self).RBush=S()})(h,function(){function _(tt,st,pt,zt,St){(function Rt(be,ke,je,Fe,Ue){for(;Fe>je;){if(Fe-je>600){var We=Fe-je+1,ct=ke-je+1,ht=Math.log(We),vt=.5*Math.exp(2*ht/3),Mt=.5*Math.sqrt(ht*vt*(We-vt)/We)*(ct-We/2<0?-1:1),kt=Math.max(je,Math.floor(ke-ct*vt/We+Mt)),hn=Math.min(Fe,Math.floor(ke+(We-ct)*vt/We+Mt));Rt(be,ke,kt,hn,Ue)}var Vn=be[ke],qn=je,nr=Fe;for(S(be,je,ke),Ue(be[Fe],Vn)>0&&S(be,je,Fe);qn<nr;){for(S(be,qn,nr),qn++,nr--;Ue(be[qn],Vn)<0;)qn++;for(;Ue(be[nr],Vn)>0;)nr--}Ue(be[je],Vn)===0?S(be,je,nr):S(be,++nr,Fe),nr<=ke&&(je=nr+1),ke<=nr&&(Fe=nr-1)}})(tt,st,pt||0,zt||tt.length-1,St||M)}function S(tt,st,pt){var zt=tt[st];tt[st]=tt[pt],tt[pt]=zt}function M(tt,st){return tt<st?-1:tt>st?1:0}var U=function(tt){tt===void 0&&(tt=9),this._maxEntries=Math.max(4,tt),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function ne(tt,st,pt){if(!pt)return st.indexOf(tt);for(var zt=0;zt<st.length;zt++)if(pt(tt,st[zt]))return zt;return-1}function ae(tt,st){ye(tt,0,tt.children.length,st,tt)}function ye(tt,st,pt,zt,St){St||(St=Pn(null)),St.minX=1/0,St.minY=1/0,St.maxX=-1/0,St.maxY=-1/0;for(var Rt=st;Rt<pt;Rt++){var be=tt.children[Rt];Ee(St,tt.leaf?zt(be):be)}return St}function Ee(tt,st){return tt.minX=Math.min(tt.minX,st.minX),tt.minY=Math.min(tt.minY,st.minY),tt.maxX=Math.max(tt.maxX,st.maxX),tt.maxY=Math.max(tt.maxY,st.maxY),tt}function nt(tt,st){return tt.minX-st.minX}function qe(tt,st){return tt.minY-st.minY}function bt(tt){return(tt.maxX-tt.minX)*(tt.maxY-tt.minY)}function It(tt){return tt.maxX-tt.minX+(tt.maxY-tt.minY)}function tn(tt,st){return tt.minX<=st.minX&&tt.minY<=st.minY&&st.maxX<=tt.maxX&&st.maxY<=tt.maxY}function wn(tt,st){return st.minX<=tt.maxX&&st.minY<=tt.maxY&&st.maxX>=tt.minX&&st.maxY>=tt.minY}function Pn(tt){return{children:tt,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function dr(tt,st,pt,zt,St){for(var Rt=[st,pt];Rt.length;)if(!((pt=Rt.pop())-(st=Rt.pop())<=zt)){var be=st+Math.ceil((pt-st)/zt/2)*zt;_(tt,be,st,pt,St),Rt.push(st,be,be,pt)}}return U.prototype.all=function(){return this._all(this.data,[])},U.prototype.search=function(tt){var st=this.data,pt=[];if(!wn(tt,st))return pt;for(var zt=this.toBBox,St=[];st;){for(var Rt=0;Rt<st.children.length;Rt++){var be=st.children[Rt],ke=st.leaf?zt(be):be;wn(tt,ke)&&(st.leaf?pt.push(be):tn(tt,ke)?this._all(be,pt):St.push(be))}st=St.pop()}return pt},U.prototype.collides=function(tt){var st=this.data;if(!wn(tt,st))return!1;for(var pt=[];st;){for(var zt=0;zt<st.children.length;zt++){var St=st.children[zt],Rt=st.leaf?this.toBBox(St):St;if(wn(tt,Rt)){if(st.leaf||tn(tt,Rt))return!0;pt.push(St)}}st=pt.pop()}return!1},U.prototype.load=function(tt){if(!tt||!tt.length)return this;if(tt.length<this._minEntries){for(var st=0;st<tt.length;st++)this.insert(tt[st]);return this}var pt=this._build(tt.slice(),0,tt.length-1,0);if(this.data.children.length)if(this.data.height===pt.height)this._splitRoot(this.data,pt);else{if(this.data.height<pt.height){var zt=this.data;this.data=pt,pt=zt}this._insert(pt,this.data.height-pt.height-1,!0)}else this.data=pt;return this},U.prototype.insert=function(tt){return tt&&this._insert(tt,this.data.height-1),this},U.prototype.clear=function(){return this.data=Pn([]),this},U.prototype.remove=function(tt,st){if(!tt)return this;for(var pt,zt,St,Rt=this.data,be=this.toBBox(tt),ke=[],je=[];Rt||ke.length;){if(Rt||(Rt=ke.pop(),zt=ke[ke.length-1],pt=je.pop(),St=!0),Rt.leaf){var Fe=ne(tt,Rt.children,st);if(Fe!==-1)return Rt.children.splice(Fe,1),ke.push(Rt),this._condense(ke),this}St||Rt.leaf||!tn(Rt,be)?zt?(pt++,Rt=zt.children[pt],St=!1):Rt=null:(ke.push(Rt),je.push(pt),pt=0,zt=Rt,Rt=Rt.children[0])}return this},U.prototype.toBBox=function(tt){return tt},U.prototype.compareMinX=function(tt,st){return tt.minX-st.minX},U.prototype.compareMinY=function(tt,st){return tt.minY-st.minY},U.prototype.toJSON=function(){return this.data},U.prototype.fromJSON=function(tt){return this.data=tt,this},U.prototype._all=function(tt,st){for(var pt=[];tt;)tt.leaf?st.push.apply(st,tt.children):pt.push.apply(pt,tt.children),tt=pt.pop();return st},U.prototype._build=function(tt,st,pt,zt){var St,Rt=pt-st+1,be=this._maxEntries;if(Rt<=be)return ae(St=Pn(tt.slice(st,pt+1)),this.toBBox),St;zt||(zt=Math.ceil(Math.log(Rt)/Math.log(be)),be=Math.ceil(Rt/Math.pow(be,zt-1))),(St=Pn([])).leaf=!1,St.height=zt;var ke=Math.ceil(Rt/be),je=ke*Math.ceil(Math.sqrt(be));dr(tt,st,pt,je,this.compareMinX);for(var Fe=st;Fe<=pt;Fe+=je){var Ue=Math.min(Fe+je-1,pt);dr(tt,Fe,Ue,ke,this.compareMinY);for(var We=Fe;We<=Ue;We+=ke){var ct=Math.min(We+ke-1,Ue);St.children.push(this._build(tt,We,ct,zt-1))}}return ae(St,this.toBBox),St},U.prototype._chooseSubtree=function(tt,st,pt,zt){for(;zt.push(st),!st.leaf&&zt.length-1!==pt;){for(var St=1/0,Rt=1/0,be=void 0,ke=0;ke<st.children.length;ke++){var je=st.children[ke],Fe=bt(je),Ue=(We=tt,ct=je,(Math.max(ct.maxX,We.maxX)-Math.min(ct.minX,We.minX))*(Math.max(ct.maxY,We.maxY)-Math.min(ct.minY,We.minY))-Fe);Ue<Rt?(Rt=Ue,St=Fe<St?Fe:St,be=je):Ue===Rt&&Fe<St&&(St=Fe,be=je)}st=be||st.children[0]}var We,ct;return st},U.prototype._insert=function(tt,st,pt){var zt=pt?tt:this.toBBox(tt),St=[],Rt=this._chooseSubtree(zt,this.data,st,St);for(Rt.children.push(tt),Ee(Rt,zt);st>=0&&St[st].children.length>this._maxEntries;)this._split(St,st),st--;this._adjustParentBBoxes(zt,St,st)},U.prototype._split=function(tt,st){var pt=tt[st],zt=pt.children.length,St=this._minEntries;this._chooseSplitAxis(pt,St,zt);var Rt=this._chooseSplitIndex(pt,St,zt),be=Pn(pt.children.splice(Rt,pt.children.length-Rt));be.height=pt.height,be.leaf=pt.leaf,ae(pt,this.toBBox),ae(be,this.toBBox),st?tt[st-1].children.push(be):this._splitRoot(pt,be)},U.prototype._splitRoot=function(tt,st){this.data=Pn([tt,st]),this.data.height=tt.height+1,this.data.leaf=!1,ae(this.data,this.toBBox)},U.prototype._chooseSplitIndex=function(tt,st,pt){for(var zt,St,Rt,be,ke,je,Fe,Ue=1/0,We=1/0,ct=st;ct<=pt-st;ct++){var ht=ye(tt,0,ct,this.toBBox),vt=ye(tt,ct,pt,this.toBBox),Mt=(St=ht,Rt=vt,be=void 0,ke=void 0,je=void 0,Fe=void 0,be=Math.max(St.minX,Rt.minX),ke=Math.max(St.minY,Rt.minY),je=Math.min(St.maxX,Rt.maxX),Fe=Math.min(St.maxY,Rt.maxY),Math.max(0,je-be)*Math.max(0,Fe-ke)),kt=bt(ht)+bt(vt);Mt<Ue?(Ue=Mt,zt=ct,We=kt<We?kt:We):Mt===Ue&&kt<We&&(We=kt,zt=ct)}return zt||pt-st},U.prototype._chooseSplitAxis=function(tt,st,pt){var zt=tt.leaf?this.compareMinX:nt,St=tt.leaf?this.compareMinY:qe;this._allDistMargin(tt,st,pt,zt)<this._allDistMargin(tt,st,pt,St)&&tt.children.sort(zt)},U.prototype._allDistMargin=function(tt,st,pt,zt){tt.children.sort(zt);for(var St=this.toBBox,Rt=ye(tt,0,st,St),be=ye(tt,pt-st,pt,St),ke=It(Rt)+It(be),je=st;je<pt-st;je++){var Fe=tt.children[je];Ee(Rt,tt.leaf?St(Fe):Fe),ke+=It(Rt)}for(var Ue=pt-st-1;Ue>=st;Ue--){var We=tt.children[Ue];Ee(be,tt.leaf?St(We):We),ke+=It(be)}return ke},U.prototype._adjustParentBBoxes=function(tt,st,pt){for(var zt=pt;zt>=0;zt--)Ee(st[zt],tt)},U.prototype._condense=function(tt){for(var st=tt.length-1,pt=void 0;st>=0;st--)tt[st].children.length===0?st>0?(pt=tt[st-1].children).splice(pt.indexOf(tt[st]),1):this.clear():ae(tt[st],this.toBBox)},U})}),dn=o(h=>{Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:h.earthRadius*100,centimetres:h.earthRadius*100,degrees:h.earthRadius/111325,feet:h.earthRadius*3.28084,inches:h.earthRadius*39.37,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:h.earthRadius*1e3,millimetres:h.earthRadius*1e3,nauticalmiles:h.earthRadius/1852,radians:1,yards:h.earthRadius*1.0936},h.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function g(Fe,Ue,We){We===void 0&&(We={});var ct={type:"Feature"};return(We.id===0||We.id)&&(ct.id=We.id),We.bbox&&(ct.bbox=We.bbox),ct.properties=Ue||{},ct.geometry=Fe,ct}h.feature=g;function _(Fe,Ue,We){switch(Fe){case"Point":return S(Ue).geometry;case"LineString":return ae(Ue).geometry;case"Polygon":return U(Ue).geometry;case"MultiPoint":return qe(Ue).geometry;case"MultiLineString":return nt(Ue).geometry;case"MultiPolygon":return bt(Ue).geometry;default:throw new Error(Fe+" is invalid")}}h.geometry=_;function S(Fe,Ue,We){if(We===void 0&&(We={}),!Fe)throw new Error("coordinates is required");if(!Array.isArray(Fe))throw new Error("coordinates must be an Array");if(Fe.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Rt(Fe[0])||!Rt(Fe[1]))throw new Error("coordinates must contain numbers");var ct={type:"Point",coordinates:Fe};return g(ct,Ue,We)}h.point=S;function M(Fe,Ue,We){return We===void 0&&(We={}),Ee(Fe.map(function(ct){return S(ct,Ue)}),We)}h.points=M;function U(Fe,Ue,We){We===void 0&&(We={});for(var ct=0,ht=Fe;ct<ht.length;ct++){var vt=ht[ct];if(vt.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Mt=0;Mt<vt[vt.length-1].length;Mt++)if(vt[vt.length-1][Mt]!==vt[0][Mt])throw new Error("First and last Position are not equivalent.")}var kt={type:"Polygon",coordinates:Fe};return g(kt,Ue,We)}h.polygon=U;function ne(Fe,Ue,We){return We===void 0&&(We={}),Ee(Fe.map(function(ct){return U(ct,Ue)}),We)}h.polygons=ne;function ae(Fe,Ue,We){if(We===void 0&&(We={}),Fe.length<2)throw new Error("coordinates must be an array of two or more positions");var ct={type:"LineString",coordinates:Fe};return g(ct,Ue,We)}h.lineString=ae;function ye(Fe,Ue,We){return We===void 0&&(We={}),Ee(Fe.map(function(ct){return ae(ct,Ue)}),We)}h.lineStrings=ye;function Ee(Fe,Ue){Ue===void 0&&(Ue={});var We={type:"FeatureCollection"};return Ue.id&&(We.id=Ue.id),Ue.bbox&&(We.bbox=Ue.bbox),We.features=Fe,We}h.featureCollection=Ee;function nt(Fe,Ue,We){We===void 0&&(We={});var ct={type:"MultiLineString",coordinates:Fe};return g(ct,Ue,We)}h.multiLineString=nt;function qe(Fe,Ue,We){We===void 0&&(We={});var ct={type:"MultiPoint",coordinates:Fe};return g(ct,Ue,We)}h.multiPoint=qe;function bt(Fe,Ue,We){We===void 0&&(We={});var ct={type:"MultiPolygon",coordinates:Fe};return g(ct,Ue,We)}h.multiPolygon=bt;function It(Fe,Ue,We){We===void 0&&(We={});var ct={type:"GeometryCollection",geometries:Fe};return g(ct,Ue,We)}h.geometryCollection=It;function tn(Fe,Ue){if(Ue===void 0&&(Ue=0),Ue&&!(Ue>=0))throw new Error("precision must be a positive number");var We=Math.pow(10,Ue||0);return Math.round(Fe*We)/We}h.round=tn;function wn(Fe,Ue){Ue===void 0&&(Ue="kilometers");var We=h.factors[Ue];if(!We)throw new Error(Ue+" units is invalid");return Fe*We}h.radiansToLength=wn;function Pn(Fe,Ue){Ue===void 0&&(Ue="kilometers");var We=h.factors[Ue];if(!We)throw new Error(Ue+" units is invalid");return Fe/We}h.lengthToRadians=Pn;function dr(Fe,Ue){return st(Pn(Fe,Ue))}h.lengthToDegrees=dr;function tt(Fe){var Ue=Fe%360;return Ue<0&&(Ue+=360),Ue}h.bearingToAzimuth=tt;function st(Fe){var Ue=Fe%(2*Math.PI);return Ue*180/Math.PI}h.radiansToDegrees=st;function pt(Fe){var Ue=Fe%360;return Ue*Math.PI/180}h.degreesToRadians=pt;function zt(Fe,Ue,We){if(Ue===void 0&&(Ue="kilometers"),We===void 0&&(We="kilometers"),!(Fe>=0))throw new Error("length must be a positive number");return wn(Pn(Fe,Ue),We)}h.convertLength=zt;function St(Fe,Ue,We){if(Ue===void 0&&(Ue="meters"),We===void 0&&(We="kilometers"),!(Fe>=0))throw new Error("area must be a positive number");var ct=h.areaFactors[Ue];if(!ct)throw new Error("invalid original units");var ht=h.areaFactors[We];if(!ht)throw new Error("invalid final units");return Fe/ct*ht}h.convertArea=St;function Rt(Fe){return!isNaN(Fe)&&Fe!==null&&!Array.isArray(Fe)}h.isNumber=Rt;function be(Fe){return!!Fe&&Fe.constructor===Object}h.isObject=be;function ke(Fe){if(!Fe)throw new Error("bbox is required");if(!Array.isArray(Fe))throw new Error("bbox must be an Array");if(Fe.length!==4&&Fe.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");Fe.forEach(function(Ue){if(!Rt(Ue))throw new Error("bbox must only contain numbers")})}h.validateBBox=ke;function je(Fe){if(!Fe)throw new Error("id is required");if(["string","number"].indexOf(typeof Fe)===-1)throw new Error("id must be a number or a string")}h.validateId=je}),as=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=dn();function _(st,pt,zt){if(st!==null)for(var St,Rt,be,ke,je,Fe,Ue,We=0,ct=0,ht,vt=st.type,Mt=vt==="FeatureCollection",kt=vt==="Feature",hn=Mt?st.features.length:1,Vn=0;Vn<hn;Vn++){Ue=Mt?st.features[Vn].geometry:kt?st.geometry:st,ht=Ue?Ue.type==="GeometryCollection":!1,je=ht?Ue.geometries.length:1;for(var qn=0;qn<je;qn++){var nr=0,_i=0;if(ke=ht?Ue.geometries[qn]:Ue,ke!==null){Fe=ke.coordinates;var Oi=ke.type;switch(We=zt&&(Oi==="Polygon"||Oi==="MultiPolygon")?1:0,Oi){case null:break;case"Point":if(pt(Fe,ct,Vn,nr,_i)===!1)return!1;ct++,nr++;break;case"LineString":case"MultiPoint":for(St=0;St<Fe.length;St++){if(pt(Fe[St],ct,Vn,nr,_i)===!1)return!1;ct++,Oi==="MultiPoint"&&nr++}Oi==="LineString"&&nr++;break;case"Polygon":case"MultiLineString":for(St=0;St<Fe.length;St++){for(Rt=0;Rt<Fe[St].length-We;Rt++){if(pt(Fe[St][Rt],ct,Vn,nr,_i)===!1)return!1;ct++}Oi==="MultiLineString"&&nr++,Oi==="Polygon"&&_i++}Oi==="Polygon"&&nr++;break;case"MultiPolygon":for(St=0;St<Fe.length;St++){for(_i=0,Rt=0;Rt<Fe[St].length;Rt++){for(be=0;be<Fe[St][Rt].length-We;be++){if(pt(Fe[St][Rt][be],ct,Vn,nr,_i)===!1)return!1;ct++}_i++}nr++}break;case"GeometryCollection":for(St=0;St<ke.geometries.length;St++)if(_(ke.geometries[St],pt,zt)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function S(st,pt,zt,St){var Rt=zt;return _(st,function(be,ke,je,Fe,Ue){ke===0&&zt===void 0?Rt=be:Rt=pt(Rt,be,ke,je,Fe,Ue)},St),Rt}function M(st,pt){var zt;switch(st.type){case"FeatureCollection":for(zt=0;zt<st.features.length&&pt(st.features[zt].properties,zt)!==!1;zt++);break;case"Feature":pt(st.properties,0);break}}function U(st,pt,zt){var St=zt;return M(st,function(Rt,be){be===0&&zt===void 0?St=Rt:St=pt(St,Rt,be)}),St}function ne(st,pt){if(st.type==="Feature")pt(st,0);else if(st.type==="FeatureCollection")for(var zt=0;zt<st.features.length&&pt(st.features[zt],zt)!==!1;zt++);}function ae(st,pt,zt){var St=zt;return ne(st,function(Rt,be){be===0&&zt===void 0?St=Rt:St=pt(St,Rt,be)}),St}function ye(st){var pt=[];return _(st,function(zt){pt.push(zt)}),pt}function Ee(st,pt){var zt,St,Rt,be,ke,je,Fe,Ue,We,ct,ht=0,vt=st.type==="FeatureCollection",Mt=st.type==="Feature",kt=vt?st.features.length:1;for(zt=0;zt<kt;zt++){for(je=vt?st.features[zt].geometry:Mt?st.geometry:st,Ue=vt?st.features[zt].properties:Mt?st.properties:{},We=vt?st.features[zt].bbox:Mt?st.bbox:void 0,ct=vt?st.features[zt].id:Mt?st.id:void 0,Fe=je?je.type==="GeometryCollection":!1,ke=Fe?je.geometries.length:1,Rt=0;Rt<ke;Rt++){if(be=Fe?je.geometries[Rt]:je,be===null){if(pt(null,ht,Ue,We,ct)===!1)return!1;continue}switch(be.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(pt(be,ht,Ue,We,ct)===!1)return!1;break}case"GeometryCollection":{for(St=0;St<be.geometries.length;St++)if(pt(be.geometries[St],ht,Ue,We,ct)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}ht++}}function nt(st,pt,zt){var St=zt;return Ee(st,function(Rt,be,ke,je,Fe){be===0&&zt===void 0?St=Rt:St=pt(St,Rt,be,ke,je,Fe)}),St}function qe(st,pt){Ee(st,function(zt,St,Rt,be,ke){var je=zt===null?null:zt.type;switch(je){case null:case"Point":case"LineString":case"Polygon":return pt(g.feature(zt,Rt,{bbox:be,id:ke}),St,0)===!1?!1:void 0}var Fe;switch(je){case"MultiPoint":Fe="Point";break;case"MultiLineString":Fe="LineString";break;case"MultiPolygon":Fe="Polygon";break}for(var Ue=0;Ue<zt.coordinates.length;Ue++){var We=zt.coordinates[Ue],ct={type:Fe,coordinates:We};if(pt(g.feature(ct,Rt),St,Ue)===!1)return!1}})}function bt(st,pt,zt){var St=zt;return qe(st,function(Rt,be,ke){be===0&&ke===0&&zt===void 0?St=Rt:St=pt(St,Rt,be,ke)}),St}function It(st,pt){qe(st,function(zt,St,Rt){var be=0;if(zt.geometry){var ke=zt.geometry.type;if(!(ke==="Point"||ke==="MultiPoint")){var je,Fe=0,Ue=0,We=0;if(_(zt,function(ct,ht,vt,Mt,kt){if(je===void 0||St>Fe||Mt>Ue||kt>We){je=ct,Fe=St,Ue=Mt,We=kt,be=0;return}var hn=g.lineString([je,ct],zt.properties);if(pt(hn,St,Rt,kt,be)===!1)return!1;be++,je=ct})===!1)return!1}}})}function tn(st,pt,zt){var St=zt,Rt=!1;return It(st,function(be,ke,je,Fe,Ue){Rt===!1&&zt===void 0?St=be:St=pt(St,be,ke,je,Fe,Ue),Rt=!0}),St}function wn(st,pt){if(!st)throw new Error("geojson is required");qe(st,function(zt,St,Rt){if(zt.geometry!==null){var be=zt.geometry.type,ke=zt.geometry.coordinates;switch(be){case"LineString":if(pt(zt,St,Rt,0,0)===!1)return!1;break;case"Polygon":for(var je=0;je<ke.length;je++)if(pt(g.lineString(ke[je],zt.properties),St,Rt,je)===!1)return!1;break}}})}function Pn(st,pt,zt){var St=zt;return wn(st,function(Rt,be,ke,je){be===0&&zt===void 0?St=Rt:St=pt(St,Rt,be,ke,je)}),St}function dr(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var zt=pt.featureIndex||0,St=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,be=pt.segmentIndex||0,ke=pt.properties,je;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,je=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,je=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=st;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":case"MultiPoint":return null;case"LineString":return be<0&&(be=Fe.length+be-1),g.lineString([Fe[be],Fe[be+1]],ke,pt);case"Polygon":return Rt<0&&(Rt=Fe.length+Rt),be<0&&(be=Fe[Rt].length+be-1),g.lineString([Fe[Rt][be],Fe[Rt][be+1]],ke,pt);case"MultiLineString":return St<0&&(St=Fe.length+St),be<0&&(be=Fe[St].length+be-1),g.lineString([Fe[St][be],Fe[St][be+1]],ke,pt);case"MultiPolygon":return St<0&&(St=Fe.length+St),Rt<0&&(Rt=Fe[St].length+Rt),be<0&&(be=Fe[St][Rt].length-be-1),g.lineString([Fe[St][Rt][be],Fe[St][Rt][be+1]],ke,pt)}throw new Error("geojson is invalid")}function tt(st,pt){if(pt=pt||{},!g.isObject(pt))throw new Error("options is invalid");var zt=pt.featureIndex||0,St=pt.multiFeatureIndex||0,Rt=pt.geometryIndex||0,be=pt.coordIndex||0,ke=pt.properties,je;switch(st.type){case"FeatureCollection":zt<0&&(zt=st.features.length+zt),ke=ke||st.features[zt].properties,je=st.features[zt].geometry;break;case"Feature":ke=ke||st.properties,je=st.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":je=st;break;default:throw new Error("geojson is invalid")}if(je===null)return null;var Fe=je.coordinates;switch(je.type){case"Point":return g.point(Fe,ke,pt);case"MultiPoint":return St<0&&(St=Fe.length+St),g.point(Fe[St],ke,pt);case"LineString":return be<0&&(be=Fe.length+be),g.point(Fe[be],ke,pt);case"Polygon":return Rt<0&&(Rt=Fe.length+Rt),be<0&&(be=Fe[Rt].length+be),g.point(Fe[Rt][be],ke,pt);case"MultiLineString":return St<0&&(St=Fe.length+St),be<0&&(be=Fe[St].length+be),g.point(Fe[St][be],ke,pt);case"MultiPolygon":return St<0&&(St=Fe.length+St),Rt<0&&(Rt=Fe[St].length+Rt),be<0&&(be=Fe[St][Rt].length-be),g.point(Fe[St][Rt][be],ke,pt)}throw new Error("geojson is invalid")}h.coordAll=ye,h.coordEach=_,h.coordReduce=S,h.featureEach=ne,h.featureReduce=ae,h.findPoint=tt,h.findSegment=dr,h.flattenEach=qe,h.flattenReduce=bt,h.geomEach=Ee,h.geomReduce=nt,h.lineEach=wn,h.lineReduce=Pn,h.propEach=M,h.propReduce=U,h.segmentEach=It,h.segmentReduce=tn}),xi=o(h=>{Object.defineProperty(h,"__esModule",{value:!0});var g=as();function _(S){var M=[1/0,1/0,-1/0,-1/0];return g.coordEach(S,function(U){M[0]>U[0]&&(M[0]=U[0]),M[1]>U[1]&&(M[1]=U[1]),M[2]<U[0]&&(M[2]=U[0]),M[3]<U[1]&&(M[3]=U[1])}),M}_.default=_,h.default=_}),ki=o((h,g)=>{var _=Yn(),S=dn(),M=as(),U=xi().default,ne=M.featureEach;M.coordEach,S.polygon;var ae=S.featureCollection;function ye(Ee){var nt=new _(Ee);return nt.insert=function(qe){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:U(qe),_.prototype.insert.call(this,qe)},nt.load=function(qe){var bt=[];return Array.isArray(qe)?qe.forEach(function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:U(It),bt.push(It)}):ne(qe,function(It){if(It.type!=="Feature")throw new Error("invalid features");It.bbox=It.bbox?It.bbox:U(It),bt.push(It)}),_.prototype.load.call(this,bt)},nt.remove=function(qe,bt){if(qe.type!=="Feature")throw new Error("invalid feature");return qe.bbox=qe.bbox?qe.bbox:U(qe),_.prototype.remove.call(this,qe,bt)},nt.clear=function(){return _.prototype.clear.call(this)},nt.search=function(qe){var bt=_.prototype.search.call(this,this.toBBox(qe));return ae(bt)},nt.collides=function(qe){return _.prototype.collides.call(this,this.toBBox(qe))},nt.all=function(){var qe=_.prototype.all.call(this);return ae(qe)},nt.toJSON=function(){return _.prototype.toJSON.call(this)},nt.fromJSON=function(qe){return _.prototype.fromJSON.call(this,qe)},nt.toBBox=function(qe){var bt;if(qe.bbox)bt=qe.bbox;else if(Array.isArray(qe)&&qe.length===4)bt=qe;else if(Array.isArray(qe)&&qe.length===6)bt=[qe[0],qe[1],qe[3],qe[4]];else if(qe.type==="Feature")bt=U(qe);else if(qe.type==="FeatureCollection")bt=U(qe);else throw new Error("invalid geojson");return{minX:bt[0],minY:bt[1],maxX:bt[2],maxY:bt[3]}},nt}g.exports=ye,g.exports.default=ye});Array.prototype.findIndex=Array.prototype.findIndex||function(h){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],M=0;M<_;M++)if(h.call(S,g[M],M,g))return M;return-1},Array.prototype.find=Array.prototype.find||function(h){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof h!="function")throw new TypeError("callback must be a function");for(var g=Object(this),_=g.length>>>0,S=arguments[1],M=0;M<_;M++){var U=g[M];if(h.call(S,U,M,g))return U}},typeof Object.assign!="function"&&(Object.assign=function(h){if(h==null)throw new TypeError("Cannot convert undefined or null to object");h=Object(h);for(var g=1;g<arguments.length;g++){var _=arguments[g];if(_!=null)for(var S in _)Object.prototype.hasOwnProperty.call(_,S)&&(h[S]=_[S])}return h}),function(h){h.forEach(function(g){g.hasOwnProperty("remove")||Object.defineProperty(g,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})}([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(h,g){if(this==null)throw new TypeError('"this" is null or not defined');var _=Object(this),S=_.length>>>0;if(S===0)return!1;var M=g|0,U=Math.max(M>=0?M:S-Math.abs(M),0);function ne(ae,ye){return ae===ye||typeof ae=="number"&&typeof ye=="number"&&isNaN(ae)&&isNaN(ye)}for(;U<S;){if(ne(_[U],h))return!0;U++}return!1}});var ls={version:"2.18.3"},lr=l(Fr()),Tr={tooltips:{placeMarker:"Click to place marker",firstVertex:"Click to place first vertex",continueLine:"Click to continue drawing",finishLine:"Click any existing marker to finish",finishPoly:"Click first marker to finish",finishRect:"Click to finish",startCircle:"Click to place circle center",finishCircle:"Click to finish circle",placeCircleMarker:"Click to place circle marker",placeText:"Click to place text",selectFirstLayerFor:"Select first layer for {action}",selectSecondLayerFor:"Select second layer for {action}"},actions:{finish:"Finish",cancel:"Cancel",removeLastVertex:"Remove Last Vertex"},buttonTitles:{drawMarkerButton:"Draw Marker",drawPolyButton:"Draw Polygons",drawLineButton:"Draw Polyline",drawCircleButton:"Draw Circle",drawRectButton:"Draw Rectangle",editButton:"Edit Layers",dragButton:"Drag Layers",cutButton:"Cut Layers",deleteButton:"Remove Layers",drawCircleMarkerButton:"Draw Circle Marker",snappingButton:"Snap dragged marker to other layers and vertices",pinningButton:"Pin shared vertices together",rotateButton:"Rotate Layers",drawTextButton:"Draw Text",scaleButton:"Scale Layers",autoTracingButton:"Auto trace Line",snapGuidesButton:"Show SnapGuides",unionButton:"Union layers",differenceButton:"Subtract layers"},measurements:{totalLength:"Length",segmentLength:"Segment length",area:"Area",radius:"Radius",perimeter:"Perimeter",height:"Height",width:"Width",coordinates:"Position",coordinatesMarker:"Position Marker"}},Ir={tooltips:{placeMarker:"Platziere den Marker mit Klick",firstVertex:"Platziere den ersten Marker mit Klick",continueLine:"Klicke, um weiter zu zeichnen",finishLine:"Beende mit Klick auf existierenden Marker",finishPoly:"Beende mit Klick auf ersten Marker",finishRect:"Beende mit Klick",startCircle:"Platziere das Kreiszentrum mit Klick",finishCircle:"Beende den Kreis mit Klick",placeCircleMarker:"Platziere den Kreismarker mit Klick",placeText:"Platziere den Text mit Klick"},actions:{finish:"Beenden",cancel:"Abbrechen",removeLastVertex:"Letzten Vertex löschen"},buttonTitles:{drawMarkerButton:"Marker zeichnen",drawPolyButton:"Polygon zeichnen",drawLineButton:"Polyline zeichnen",drawCircleButton:"Kreis zeichnen",drawRectButton:"Rechteck zeichnen",editButton:"Layer editieren",dragButton:"Layer bewegen",cutButton:"Layer schneiden",deleteButton:"Layer löschen",drawCircleMarkerButton:"Kreismarker zeichnen",snappingButton:"Bewegter Layer an andere Layer oder Vertexe einhacken",pinningButton:"Vertexe an der gleichen Position verknüpfen",rotateButton:"Layer drehen",drawTextButton:"Text zeichnen",scaleButton:"Layer skalieren",autoTracingButton:"Linie automatisch nachzeichen"},measurements:{totalLength:"Länge",segmentLength:"Segment Länge",area:"Fläche",radius:"Radius",perimeter:"Umfang",height:"Höhe",width:"Breite",coordinates:"Position",coordinatesMarker:"Position Marker"}},ps={tooltips:{placeMarker:"Clicca per posizionare un Marker",firstVertex:"Clicca per posizionare il primo vertice",continueLine:"Clicca per continuare a disegnare",finishLine:"Clicca qualsiasi marker esistente per terminare",finishPoly:"Clicca il primo marker per terminare",finishRect:"Clicca per terminare",startCircle:"Clicca per posizionare il punto centrale del cerchio",finishCircle:"Clicca per terminare il cerchio",placeCircleMarker:"Clicca per posizionare un Marker del cherchio"},actions:{finish:"Termina",cancel:"Annulla",removeLastVertex:"Rimuovi l'ultimo vertice"},buttonTitles:{drawMarkerButton:"Disegna Marker",drawPolyButton:"Disegna Poligoni",drawLineButton:"Disegna Polilinea",drawCircleButton:"Disegna Cerchio",drawRectButton:"Disegna Rettangolo",editButton:"Modifica Livelli",dragButton:"Sposta Livelli",cutButton:"Ritaglia Livelli",deleteButton:"Elimina Livelli",drawCircleMarkerButton:"Disegna Marker del Cerchio",snappingButton:"Snap ha trascinato il pennarello su altri strati e vertici",pinningButton:"Pin condiviso vertici insieme",rotateButton:"Ruota livello"}},ci={tooltips:{placeMarker:"Klik untuk menempatkan marker",firstVertex:"Klik untuk menempatkan vertex pertama",continueLine:"Klik untuk meneruskan digitasi",finishLine:"Klik pada sembarang marker yang ada untuk mengakhiri",finishPoly:"Klik marker pertama untuk mengakhiri",finishRect:"Klik untuk mengakhiri",startCircle:"Klik untuk menempatkan titik pusat lingkaran",finishCircle:"Klik untuk mengakhiri lingkaran",placeCircleMarker:"Klik untuk menempatkan penanda lingkarann"},actions:{finish:"Selesai",cancel:"Batal",removeLastVertex:"Hilangkan Vertex Terakhir"},buttonTitles:{drawMarkerButton:"Digitasi Marker",drawPolyButton:"Digitasi Polygon",drawLineButton:"Digitasi Polyline",drawCircleButton:"Digitasi Lingkaran",drawRectButton:"Digitasi Segi Empat",editButton:"Edit Layer",dragButton:"Geser Layer",cutButton:"Potong Layer",deleteButton:"Hilangkan Layer",drawCircleMarkerButton:"Digitasi Penanda Lingkaran",snappingButton:"Jepretkan penanda yang ditarik ke lapisan dan simpul lain",pinningButton:"Sematkan simpul bersama bersama",rotateButton:"Putar lapisan"}},Qs={tooltips:{placeMarker:"Adaugă un punct",firstVertex:"Apasă aici pentru a adăuga primul Vertex",continueLine:"Apasă aici pentru a continua desenul",finishLine:"Apasă pe orice obiect pentru a finisa desenul",finishPoly:"Apasă pe primul obiect pentru a finisa",finishRect:"Apasă pentru a finisa",startCircle:"Apasă pentru a desena un cerc",finishCircle:"Apasă pentru a finisa un cerc",placeCircleMarker:"Adaugă un punct"},actions:{finish:"Termină",cancel:"Anulează",removeLastVertex:"Șterge ultimul Vertex"},buttonTitles:{drawMarkerButton:"Adaugă o bulină",drawPolyButton:"Desenează un poligon",drawLineButton:"Desenează o linie",drawCircleButton:"Desenează un cerc",drawRectButton:"Desenează un dreptunghi",editButton:"Editează straturile",dragButton:"Mută straturile",cutButton:"Taie straturile",deleteButton:"Șterge straturile",drawCircleMarkerButton:"Desenează marcatorul cercului",snappingButton:"Fixați marcatorul glisat pe alte straturi și vârfuri",pinningButton:"Fixați vârfurile partajate împreună",rotateButton:"Rotiți stratul"}},si={tooltips:{placeMarker:"Нажмите, чтобы нанести маркер",firstVertex:"Нажмите, чтобы нанести первый объект",continueLine:"Нажмите, чтобы продолжить рисование",finishLine:"Нажмите любой существующий маркер для завершения",finishPoly:"Выберите первую точку, чтобы закончить",finishRect:"Нажмите, чтобы закончить",startCircle:"Нажмите, чтобы добавить центр круга",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Нажмите, чтобы нанести круговой маркер"},actions:{finish:"Завершить",cancel:"Отменить",removeLastVertex:"Отменить последнее действие"},buttonTitles:{drawMarkerButton:"Добавить маркер",drawPolyButton:"Рисовать полигон",drawLineButton:"Рисовать кривую",drawCircleButton:"Рисовать круг",drawRectButton:"Рисовать прямоугольник",editButton:"Редактировать слой",dragButton:"Перенести слой",cutButton:"Вырезать слой",deleteButton:"Удалить слой",drawCircleMarkerButton:"Добавить круговой маркер",snappingButton:"Привязать перетаскиваемый маркер к другим слоям и вершинам",pinningButton:"Связать общие точки вместе",rotateButton:"Поворот слоя"}},Cn={tooltips:{placeMarker:"Presiona para colocar un marcador",firstVertex:"Presiona para colocar el primer vértice",continueLine:"Presiona para continuar dibujando",finishLine:"Presiona cualquier marcador existente para finalizar",finishPoly:"Presiona el primer marcador para finalizar",finishRect:"Presiona para finalizar",startCircle:"Presiona para colocar el centro del círculo",finishCircle:"Presiona para finalizar el círculo",placeCircleMarker:"Presiona para colocar un marcador de círculo"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Eliminar último vértice"},buttonTitles:{drawMarkerButton:"Dibujar Marcador",drawPolyButton:"Dibujar Polígono",drawLineButton:"Dibujar Línea",drawCircleButton:"Dibujar Círculo",drawRectButton:"Dibujar Rectángulo",editButton:"Editar Capas",dragButton:"Arrastrar Capas",cutButton:"Cortar Capas",deleteButton:"Eliminar Capas",drawCircleMarkerButton:"Dibujar Marcador de Círculo",snappingButton:"El marcador de Snap arrastrado a otras capas y vértices",pinningButton:"Fijar juntos los vértices compartidos",rotateButton:"Rotar capa"}},rn={tooltips:{placeMarker:"Klik om een marker te plaatsen",firstVertex:"Klik om het eerste punt te plaatsen",continueLine:"Klik om te blijven tekenen",finishLine:"Klik op een bestaand punt om te beëindigen",finishPoly:"Klik op het eerst punt om te beëindigen",finishRect:"Klik om te beëindigen",startCircle:"Klik om het middelpunt te plaatsen",finishCircle:"Klik om de cirkel te beëindigen",placeCircleMarker:"Klik om een marker te plaatsen"},actions:{finish:"Bewaar",cancel:"Annuleer",removeLastVertex:"Verwijder laatste punt"},buttonTitles:{drawMarkerButton:"Plaats Marker",drawPolyButton:"Teken een vlak",drawLineButton:"Teken een lijn",drawCircleButton:"Teken een cirkel",drawRectButton:"Teken een vierkant",editButton:"Bewerk",dragButton:"Verplaats",cutButton:"Knip",deleteButton:"Verwijder",drawCircleMarkerButton:"Plaats Marker",snappingButton:"Snap gesleepte marker naar andere lagen en hoekpunten",pinningButton:"Speld gedeelde hoekpunten samen",rotateButton:"Laag roteren"}},Br={tooltips:{placeMarker:"Cliquez pour placer un marqueur",firstVertex:"Cliquez pour placer le premier sommet",continueLine:"Cliquez pour continuer à dessiner",finishLine:"Cliquez sur n'importe quel marqueur pour terminer",finishPoly:"Cliquez sur le premier marqueur pour terminer",finishRect:"Cliquez pour terminer",startCircle:"Cliquez pour placer le centre du cercle",finishCircle:"Cliquez pour finir le cercle",placeCircleMarker:"Cliquez pour placer le marqueur circulaire"},actions:{finish:"Terminer",cancel:"Annuler",removeLastVertex:"Retirer le dernier sommet"},buttonTitles:{drawMarkerButton:"Placer des marqueurs",drawPolyButton:"Dessiner des polygones",drawLineButton:"Dessiner des polylignes",drawCircleButton:"Dessiner un cercle",drawRectButton:"Dessiner un rectangle",editButton:"Éditer des calques",dragButton:"Déplacer des calques",cutButton:"Couper des calques",deleteButton:"Supprimer des calques",drawCircleMarkerButton:"Dessiner un marqueur circulaire",snappingButton:"Glisser le marqueur vers d'autres couches et sommets",pinningButton:"Épingler ensemble les sommets partagés",rotateButton:"Tourner des calques"}},ms={tooltips:{placeMarker:"单击放置标记",firstVertex:"单击放置首个顶点",continueLine:"单击继续绘制",finishLine:"单击任何存在的标记以完成",finishPoly:"单击第一个标记以完成",finishRect:"单击完成",startCircle:"单击放置圆心",finishCircle:"单击完成圆形",placeCircleMarker:"点击放置圆形标记"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最后的顶点"},buttonTitles:{drawMarkerButton:"绘制标记",drawPolyButton:"绘制多边形",drawLineButton:"绘制线段",drawCircleButton:"绘制圆形",drawRectButton:"绘制长方形",editButton:"编辑图层",dragButton:"拖拽图层",cutButton:"剪切图层",deleteButton:"删除图层",drawCircleMarkerButton:"画圆圈标记",snappingButton:"将拖动的标记捕捉到其他图层和顶点",pinningButton:"将共享顶点固定在一起",rotateButton:"旋转图层"}},us={tooltips:{placeMarker:"單擊放置標記",firstVertex:"單擊放置第一個頂點",continueLine:"單擊繼續繪製",finishLine:"單擊任何存在的標記以完成",finishPoly:"單擊第一個標記以完成",finishRect:"單擊完成",startCircle:"單擊放置圓心",finishCircle:"單擊完成圓形",placeCircleMarker:"點擊放置圓形標記"},actions:{finish:"完成",cancel:"取消",removeLastVertex:"移除最後一個頂點"},buttonTitles:{drawMarkerButton:"放置標記",drawPolyButton:"繪製多邊形",drawLineButton:"繪製線段",drawCircleButton:"繪製圓形",drawRectButton:"繪製方形",editButton:"編輯圖形",dragButton:"移動圖形",cutButton:"裁切圖形",deleteButton:"刪除圖形",drawCircleMarkerButton:"畫圓圈標記",snappingButton:"將拖動的標記對齊到其他圖層和頂點",pinningButton:"將共享頂點固定在一起",rotateButton:"旋轉圖形"}},fa={tooltips:{placeMarker:"Clique para posicionar o marcador",firstVertex:"Clique para posicionar o primeiro vértice",continueLine:"Clique para continuar desenhando",finishLine:"Clique em qualquer marcador existente para finalizar",finishPoly:"Clique no primeiro marcador para finalizar",finishRect:"Clique para finalizar",startCircle:"Clique para posicionar o centro do círculo",finishCircle:"Clique para finalizar o círculo",placeCircleMarker:"Clique para posicionar o marcador circular",placeText:"Clique para inserir texto"},actions:{finish:"Finalizar",cancel:"Cancelar",removeLastVertex:"Remover último vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Linha Poligonal",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Recortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices compartilhados",rotateButton:"Rotacionar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Redimensionar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},pa={tooltips:{placeMarker:"Clique para colocar marcador",firstVertex:"Clique para colocar primeiro vértice",continueLine:"Clique para continuar a desenhar",finishLine:"Clique num marcador existente para terminar",finishPoly:"Clique no primeiro marcador para terminar",finishRect:"Clique para terminar",startCircle:"Clique para colocar o centro do círculo",finishCircle:"Clique para terminar o círculo",placeCircleMarker:"Clique para colocar marcador de círculo",placeText:"Clique para colocar texto"},actions:{finish:"Terminar",cancel:"Cancelar",removeLastVertex:"Remover Último Vértice"},buttonTitles:{drawMarkerButton:"Desenhar Marcador",drawPolyButton:"Desenhar Polígonos",drawLineButton:"Desenhar Polilinha",drawCircleButton:"Desenhar Círculo",drawRectButton:"Desenhar Retângulo",editButton:"Editar Camadas",dragButton:"Arrastar Camadas",cutButton:"Cortar Camadas",deleteButton:"Remover Camadas",drawCircleMarkerButton:"Desenhar Marcador de Círculo",snappingButton:"Ajustar marcador arrastado a outras camadas e vértices",pinningButton:"Unir vértices partilhados",rotateButton:"Rodar Camadas",drawTextButton:"Desenhar Texto",scaleButton:"Escalar Camadas",autoTracingButton:"Traçado Automático de Linha"},measurements:{totalLength:"Comprimento",segmentLength:"Comprimento do Segmento",area:"Área",radius:"Raio",perimeter:"Perímetro",height:"Altura",width:"Largura",coordinates:"Posição",coordinatesMarker:"Marcador de Posição"}},ga={tooltips:{placeMarker:"Kliknij, aby umieścić znacznik",firstVertex:"Kliknij, aby umieścić pierwszy wierzchołek",continueLine:"Kliknij, aby kontynuować rysowanie",finishLine:"Kliknij dowolny istniejący znacznik, aby zakończyć",finishPoly:"Kliknij pierwszy znacznik, aby zakończyć",finishRect:"Kliknij, aby zakończyć",startCircle:"Kliknij, aby umieścić środek okręgu",finishCircle:"Kliknij, aby zakończyć okrąg",placeCircleMarker:"Kliknij, aby umieścić znacznik okręgu",placeText:"Kliknij, aby umieścić tekst"},actions:{finish:"Zakończ",cancel:"Anuluj",removeLastVertex:"Usuń ostatni wierzchołek"},buttonTitles:{drawMarkerButton:"Rysuj znacznik",drawPolyButton:"Rysuj wielokąt",drawLineButton:"Rysuj linię",drawCircleButton:"Rysuj okrąg",drawRectButton:"Rysuj prostokąt",editButton:"Edytuj warstwy",dragButton:"Przeciągnij warstwy",cutButton:"Wytnij warstwy",deleteButton:"Usuń warstwy",drawCircleMarkerButton:"Rysuj znacznik okrągły",snappingButton:"Przyciągnij przenoszony znacznik do innych warstw i wierzchołków",pinningButton:"Przypnij wspólne wierzchołki razem",rotateButton:"Obróć warstwy",drawTextButton:"Rysuj tekst",scaleButton:"Skaluj warstwy",autoTracingButton:"Automatyczne śledzenie linii"},measurements:{totalLength:"Długość",segmentLength:"Długość odcinka",area:"Obszar",radius:"Promień",perimeter:"Obwód",height:"Wysokość",width:"Szerokość",coordinates:"Pozycja",coordinatesMarker:"Znacznik pozycji"}},To={tooltips:{placeMarker:"Klicka för att placera markör",firstVertex:"Klicka för att placera första hörnet",continueLine:"Klicka för att fortsätta rita",finishLine:"Klicka på en existerande punkt för att slutföra",finishPoly:"Klicka på den första punkten för att slutföra",finishRect:"Klicka för att slutföra",startCircle:"Klicka för att placera cirkelns centrum",finishCircle:"Klicka för att slutföra cirkeln",placeCircleMarker:"Klicka för att placera cirkelmarkör"},actions:{finish:"Slutför",cancel:"Avbryt",removeLastVertex:"Ta bort sista hörnet"},buttonTitles:{drawMarkerButton:"Rita Markör",drawPolyButton:"Rita Polygoner",drawLineButton:"Rita Linje",drawCircleButton:"Rita Cirkel",drawRectButton:"Rita Rektangel",editButton:"Redigera Lager",dragButton:"Dra Lager",cutButton:"Klipp i Lager",deleteButton:"Ta bort Lager",drawCircleMarkerButton:"Rita Cirkelmarkör",snappingButton:"Snäpp dra markören till andra lager och hörn",pinningButton:"Fäst delade hörn tillsammans",rotateButton:"Rotera lagret"}},Qr={tooltips:{placeMarker:"Κάντε κλικ για να τοποθετήσετε Δείκτη",firstVertex:"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο",continueLine:"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε",finishLine:"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί",finishPoly:"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε",finishRect:"Κάντε κλικ για να τελειώσετε",startCircle:"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου",finishCircle:"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο",placeCircleMarker:"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},actions:{finish:"Τέλος",cancel:"Ακύρωση",removeLastVertex:"Κατάργηση τελευταίου σημείου"},buttonTitles:{drawMarkerButton:"Σχεδίαση Δείκτη",drawPolyButton:"Σχεδίαση Πολυγώνου",drawLineButton:"Σχεδίαση Γραμμής",drawCircleButton:"Σχεδίαση Κύκλου",drawRectButton:"Σχεδίαση Ορθογωνίου",editButton:"Επεξεργασία Επιπέδων",dragButton:"Μεταφορά Επιπέδων",cutButton:"Αποκοπή Επιπέδων",deleteButton:"Κατάργηση Επιπέδων",drawCircleMarkerButton:"Σχεδίαση Κυκλικού Δείκτη",snappingButton:"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές",pinningButton:"Περικοπή κοινών κορυφών μαζί",rotateButton:"Περιστρέψτε το στρώμα"}},na={tooltips:{placeMarker:"Kattintson a jelölő elhelyezéséhez",firstVertex:"Kattintson az első pont elhelyezéséhez",continueLine:"Kattintson a következő pont elhelyezéséhez",finishLine:"A befejezéshez kattintson egy meglévő pontra",finishPoly:"A befejezéshez kattintson az első pontra",finishRect:"Kattintson a befejezéshez",startCircle:"Kattintson a kör középpontjának elhelyezéséhez",finishCircle:"Kattintson a kör befejezéséhez",placeCircleMarker:"Kattintson a körjelölő elhelyezéséhez"},actions:{finish:"Befejezés",cancel:"Mégse",removeLastVertex:"Utolsó pont eltávolítása"},buttonTitles:{drawMarkerButton:"Jelölő rajzolása",drawPolyButton:"Poligon rajzolása",drawLineButton:"Vonal rajzolása",drawCircleButton:"Kör rajzolása",drawRectButton:"Négyzet rajzolása",editButton:"Elemek szerkesztése",dragButton:"Elemek mozgatása",cutButton:"Elemek vágása",deleteButton:"Elemek törlése",drawCircleMarkerButton:"Kör jelölő rajzolása",snappingButton:"Kapcsolja a jelöltőt másik elemhez vagy ponthoz",pinningButton:"Közös pontok összekötése",rotateButton:"Fólia elforgatása"}},Bs={tooltips:{placeMarker:"Tryk for at placere en markør",firstVertex:"Tryk for at placere det første punkt",continueLine:"Tryk for at fortsætte linjen",finishLine:"Tryk på et eksisterende punkt for at afslutte",finishPoly:"Tryk på det første punkt for at afslutte",finishRect:"Tryk for at afslutte",startCircle:"Tryk for at placere cirklens center",finishCircle:"Tryk for at afslutte cirklen",placeCircleMarker:"Tryk for at placere en cirkelmarkør"},actions:{finish:"Afslut",cancel:"Afbryd",removeLastVertex:"Fjern sidste punkt"},buttonTitles:{drawMarkerButton:"Placer markør",drawPolyButton:"Tegn polygon",drawLineButton:"Tegn linje",drawCircleButton:"Tegn cirkel",drawRectButton:"Tegn firkant",editButton:"Rediger",dragButton:"Træk",cutButton:"Klip",deleteButton:"Fjern",drawCircleMarkerButton:"Tegn cirkelmarkør",snappingButton:"Fastgør trukket markør til andre elementer",pinningButton:"Sammenlæg delte elementer",rotateButton:"Roter laget"}},zi={tooltips:{placeMarker:"Klikk for å plassere punkt",firstVertex:"Klikk for å plassere første punkt",continueLine:"Klikk for å tegne videre",finishLine:"Klikk på et eksisterende punkt for å fullføre",finishPoly:"Klikk første punkt for å fullføre",finishRect:"Klikk for å fullføre",startCircle:"Klikk for å sette sirkel midtpunkt",finishCircle:"Klikk for å fullføre sirkel",placeCircleMarker:"Klikk for å plassere sirkel",placeText:"Klikk for å plassere tekst"},actions:{finish:"Fullfør",cancel:"Kanseller",removeLastVertex:"Fjern forrige punkt"},buttonTitles:{drawMarkerButton:"Tegn punkt",drawPolyButton:"Tegn flate",drawLineButton:"Tegn linje",drawCircleButton:"Tegn sirkel",drawRectButton:"Tegn rektangel",editButton:"Rediger objekter",dragButton:"Dra objekter",cutButton:"Kutt objekter",deleteButton:"Fjern objekter",drawCircleMarkerButton:"Tegn sirkel-punkt",snappingButton:"Fest dratt punkt til andre objekter og punkt",pinningButton:"Pin delte punkter sammen",rotateButton:"Rotér objekter",drawTextButton:"Tegn tekst",scaleButton:"Skalér objekter",autoTracingButton:"Automatisk sporing av linje"},measurements:{totalLength:"Lengde",segmentLength:"Segmentlengde",area:"Område",radius:"Radius",perimeter:"Omriss",height:"Høyde",width:"Bredde",coordinates:"Posisjon",coordinatesMarker:"Posisjonsmarkør"}},ra={tooltips:{placeMarker:"کلیک برای جانمایی نشان",firstVertex:"کلیک برای رسم اولین رأس",continueLine:"کلیک برای ادامه رسم",finishLine:"کلیک روی هر نشان موجود برای پایان",finishPoly:"کلیک روی اولین نشان برای پایان",finishRect:"کلیک برای پایان",startCircle:"کلیک برای رسم مرکز دایره",finishCircle:"کلیک برای پایان رسم دایره",placeCircleMarker:"کلیک برای رسم نشان دایره",placeText:"کلیک برای نوشتن متن"},actions:{finish:"پایان",cancel:"لفو",removeLastVertex:"حذف آخرین رأس"},buttonTitles:{drawMarkerButton:"درج نشان",drawPolyButton:"رسم چندضلعی",drawLineButton:"رسم خط",drawCircleButton:"رسم دایره",drawRectButton:"رسم چهارضلعی",editButton:"ویرایش لایه‌ها",dragButton:"جابجایی لایه‌ها",cutButton:"برش لایه‌ها",deleteButton:"حذف لایه‌ها",drawCircleMarkerButton:"رسم نشان دایره",snappingButton:"نشانگر را به لایه‌ها و رئوس دیگر بکشید",pinningButton:"رئوس مشترک را با هم پین کنید",rotateButton:"چرخش لایه",drawTextButton:"رسم متن",scaleButton:"مقیاس‌گذاری",autoTracingButton:"ردیاب خودکار"},measurements:{totalLength:"طول",segmentLength:"طول بخش",area:"ناحیه",radius:"شعاع",perimeter:"محیط",height:"ارتفاع",width:"عرض",coordinates:"موقعیت",coordinatesMarker:"موقعیت نشان"}},pl={tooltips:{placeMarker:"Натисніть, щоб нанести маркер",firstVertex:"Натисніть, щоб нанести першу вершину",continueLine:"Натисніть, щоб продовжити малювати",finishLine:"Натисніть будь-який існуючий маркер для завершення",finishPoly:"Виберіть перший маркер, щоб завершити",finishRect:"Натисніть, щоб завершити",startCircle:"Натисніть, щоб додати центр кола",finishCircle:"Натисніть, щоб завершити коло",placeCircleMarker:"Натисніть, щоб нанести круговий маркер"},actions:{finish:"Завершити",cancel:"Відмінити",removeLastVertex:"Видалити попередню вершину"},buttonTitles:{drawMarkerButton:"Малювати маркер",drawPolyButton:"Малювати полігон",drawLineButton:"Малювати криву",drawCircleButton:"Малювати коло",drawRectButton:"Малювати прямокутник",editButton:"Редагувати шари",dragButton:"Перенести шари",cutButton:"Вирізати шари",deleteButton:"Видалити шари",drawCircleMarkerButton:"Малювати круговий маркер",snappingButton:"Прив’язати перетягнутий маркер до інших шарів та вершин",pinningButton:"Зв'язати спільні вершини разом",rotateButton:"Повернути шар"}},mr={tooltips:{placeMarker:"İşaretçi yerleştirmek için tıklayın",firstVertex:"İlk tepe noktasını yerleştirmek için tıklayın",continueLine:"Çizime devam etmek için tıklayın",finishLine:"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın",finishPoly:"Bitirmek için ilk işaretçiyi tıklayın",finishRect:"Bitirmek için tıklayın",startCircle:"Daire merkezine yerleştirmek için tıklayın",finishCircle:"Daireyi bitirmek için tıklayın",placeCircleMarker:"Daire işaretçisi yerleştirmek için tıklayın"},actions:{finish:"Bitir",cancel:"İptal",removeLastVertex:"Son köşeyi kaldır"},buttonTitles:{drawMarkerButton:"Çizim İşaretçisi",drawPolyButton:"Çokgenler çiz",drawLineButton:"Çoklu çizgi çiz",drawCircleButton:"Çember çiz",drawRectButton:"Dikdörtgen çiz",editButton:"Katmanları düzenle",dragButton:"Katmanları sürükle",cutButton:"Katmanları kes",deleteButton:"Katmanları kaldır",drawCircleMarkerButton:"Daire işaretçisi çiz",snappingButton:"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır",pinningButton:"Paylaşılan köşeleri birbirine sabitle",rotateButton:"Katmanı döndür"}},wr={tooltips:{placeMarker:"Kliknutím vytvoříte značku",firstVertex:"Kliknutím vytvoříte první objekt",continueLine:"Kliknutím pokračujte v kreslení",finishLine:"Kliknutí na libovolnou existující značku pro dokončení",finishPoly:"Vyberte první bod pro dokončení",finishRect:"Klikněte pro dokončení",startCircle:"Kliknutím přidejte střed kruhu",finishCircle:"Нажмите, чтобы задать радиус",placeCircleMarker:"Kliknutím nastavte poloměr"},actions:{finish:"Dokončit",cancel:"Zrušit",removeLastVertex:"Zrušit poslední akci"},buttonTitles:{drawMarkerButton:"Přidat značku",drawPolyButton:"Nakreslit polygon",drawLineButton:"Nakreslit křivku",drawCircleButton:"Nakreslit kruh",drawRectButton:"Nakreslit obdélník",editButton:"Upravit vrstvu",dragButton:"Přeneste vrstvu",cutButton:"Vyjmout vrstvu",deleteButton:"Smazat vrstvu",drawCircleMarkerButton:"Přidat kruhovou značku",snappingButton:"Navázat tažnou značku k dalším vrstvám a vrcholům",pinningButton:"Spojit společné body dohromady",rotateButton:"Otočte vrstvu"}},mo={tooltips:{placeMarker:"クリックしてマーカーを配置",firstVertex:"クリックして最初の頂点を配置",continueLine:"クリックして描画を続ける",finishLine:"任意のマーカーをクリックして終了",finishPoly:"最初のマーカーをクリックして終了",finishRect:"クリックして終了",startCircle:"クリックして円の中心を配置",finishCircle:"クリックして円の描画を終了",placeCircleMarker:"クリックして円マーカーを配置",placeText:"クリックしてテキストを配置"},actions:{finish:"終了",cancel:"キャンセル",removeLastVertex:"最後の頂点を削除"},buttonTitles:{drawMarkerButton:"マーカーを描画",drawPolyButton:"ポリゴンを描画",drawLineButton:"折れ線を描画",drawCircleButton:"円を描画",drawRectButton:"矩形を描画",editButton:"レイヤーを編集",dragButton:"レイヤーをドラッグ",cutButton:"レイヤーを切り取り",deleteButton:"レイヤーを削除",drawCircleMarkerButton:"円マーカーを描画",snappingButton:"ドラッグしたマーカーを他のレイヤーや頂点にスナップする",pinningButton:"共有する頂点を同時に動かす",rotateButton:"レイヤーを回転",drawTextButton:"テキストを描画"}},Ur={tooltips:{placeMarker:"Klikkaa asettaaksesi merkin",firstVertex:"Klikkaa asettaakseni ensimmäisen osuuden",continueLine:"Klikkaa jatkaaksesi piirtämistä",finishLine:"Klikkaa olemassa olevaa merkkiä lopettaaksesi",finishPoly:"Klikkaa ensimmäistä merkkiä lopettaaksesi",finishRect:"Klikkaa lopettaaksesi",startCircle:"Klikkaa asettaaksesi ympyrän keskipisteen",finishCircle:"Klikkaa lopettaaksesi ympyrän",placeCircleMarker:"Klikkaa asettaaksesi ympyrämerkin",placeText:"Klikkaa asettaaksesi tekstin"},actions:{finish:"Valmis",cancel:"Peruuta",removeLastVertex:"Poista viimeinen osuus"},buttonTitles:{drawMarkerButton:"Piirrä merkkejä",drawPolyButton:"Piirrä monikulmioita",drawLineButton:"Piirrä viivoja",drawCircleButton:"Piirrä ympyrä",drawRectButton:"Piirrä neliskulmioita",editButton:"Muokkaa",dragButton:"Siirrä",cutButton:"Leikkaa",deleteButton:"Poista",drawCircleMarkerButton:"Piirrä ympyrämerkki",snappingButton:"Kiinnitä siirrettävä merkki toisiin muotoihin",pinningButton:"Kiinnitä jaetut muodot yhteen",rotateButton:"Käännä",drawTextButton:"Piirrä tekstiä"}},gl={tooltips:{placeMarker:"마커 위치를 클릭하세요",firstVertex:"첫번째 꼭지점 위치을 클릭하세요",continueLine:"계속 그리려면 클릭하세요",finishLine:"끝내려면 기존 마커를 클릭하세요",finishPoly:"끝내려면 처음 마커를 클릭하세요",finishRect:"끝내려면 클릭하세요",startCircle:"원의 중심이 될 위치를 클릭하세요",finishCircle:"원을 끝내려면 클릭하세요",placeCircleMarker:"원 마커 위치를 클릭하세요",placeText:"텍스트 위치를 클릭하세요"},actions:{finish:"끝내기",cancel:"취소",removeLastVertex:"마지막 꼭지점 제거"},buttonTitles:{drawMarkerButton:"마커 그리기",drawPolyButton:"다각형 그리기",drawLineButton:"다각선 그리기",drawCircleButton:"원 그리기",drawRectButton:"직사각형 그리기",editButton:"레이어 편집하기",dragButton:"레이어 끌기",cutButton:"레이어 자르기",deleteButton:"레이어 제거하기",drawCircleMarkerButton:"원 마커 그리기",snappingButton:"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기",pinningButton:"공유 꼭지점을 함께 찍기",rotateButton:"레이어 회전하기",drawTextButton:"텍스트 그리기"}},Va={tooltips:{placeMarker:"Маркерди жайгаштыруу үчүн басыңыз",firstVertex:"Биринчи чокуну жайгаштырууну үчүн басыңыз",continueLine:"Сүрөт тартууну улантуу үчүн басыңыз",finishLine:"Аяктоо үчүн учурдагы маркерди басыңыз",finishPoly:"Бүтүрүү үчүн биринчи маркерди басыңыз",finishRect:"Бүтүрүү үчүн басыңыз",startCircle:"Айлананын борборун жайгаштырууну үчүн басыңыз",finishCircle:"Айлананы бүтүрүү үчүн басыңыз",placeCircleMarker:"Тегерек маркерди жайгаштыруу үчүн басыңыз",placeText:"Текстти жайгаштыруу үчүн басыңыз"},actions:{finish:"Аягы",cancel:"Жок кылуу",removeLastVertex:"Акыркы чокуну өчүрүү"},buttonTitles:{drawMarkerButton:"Маркерди чизуу",drawPolyButton:"Полигон чизуу",drawLineButton:"Полилиния чизуу",drawCircleButton:"Дайынды чизуу",drawRectButton:"Прямоугольник чизуу",editButton:"Слоопту түзөтүү",dragButton:"Слоопту карап сүйлөү",cutButton:"Слооптун башын кесүү",deleteButton:"Слооптун өчүрүү",drawCircleMarkerButton:"Дайынды маркерди чизуу",snappingButton:"Башка слооптордун жана вертекстердин арасына чекилдөө",pinningButton:"Бөлүшкөн вертекстерди бирге тутуштуруу",rotateButton:"Слооптун өзгөртүү",drawTextButton:"Текст чизуу",scaleButton:"Слооптун өлчөмүн өзгөртүү",autoTracingButton:"Автоматтык тизмеги чизуу"},measurements:{totalLength:"Узундук",segmentLength:"Сегмент узундугу",area:"Аймак",radius:"Радиус",perimeter:"Периметр",height:"Диаметр",width:"Кенчилик",coordinates:"Координаттар",coordinatesMarker:"Маркердин координаттары"}},vi=pa,Es={en:Tr,de:Ir,it:ps,id:ci,ro:Qs,ru:si,es:Cn,nl:rn,fr:Br,pt:vi,pt_br:fa,pt_pt:pa,zh:ms,zh_tw:us,pl:ga,sv:To,el:Qr,hu:na,da:Bs,no:zi,fa:ra,ua:pl,tr:mr,cz:wr,ja:mo,fi:Ur,ko:gl,ky:Va},vs={_globalEditModeEnabled:!1,enableGlobalEditMode(h){let g={...h};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(_=>{this._isRelevantForEdit(_)&&_.pm.enable(g)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayersEdit={},this.map.on("layeradd",this._layerAddedEdit,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.disable()}),this.map.off("layeradd",this._layerAddedEdit,this),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(h=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(h)},handleLayerAdditionInGlobalEditMode(){let h=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let g in h){let _=h[g];this._isRelevantForEdit(_)&&_.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:h}){this._addedLayersEdit[L.stamp(h)]=h},_isRelevantForEdit(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowEditing}},Ju=vs,su={_globalDragModeEnabled:!1,enableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},h.forEach(g=>{this._isRelevantForDrag(g)&&g.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let h=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,h.forEach(g=>{g.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let h=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let g in h){let _=h[g];this._isRelevantForDrag(_)&&_.pm.enableLayerDrag()}},_layerAddedDrag({layer:h}){this._addedLayersDrag[L.stamp(h)]=h},_isRelevantForDrag(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.draggable}},Lr=su,Yr={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(h=>{this._isRelevantForRemoval(h)&&(h.pm.enabled()&&h.pm.disable(),h.on("click",this.removeLayer,this))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this)),this._addedLayersRemoval={},this.map.on("layeradd",this._layerAddedRemoval,this),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(h=>{h.off("click",this.removeLayer,this)}),this.map.off("layeradd",this._layerAddedRemoval,this),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(h){let g=h.target;this._isRelevantForRemoval(g)&&!g.pm.dragging()&&(g.removeFrom(this.map.pm._getContainingLayer()),g.remove(),g instanceof L.LayerGroup?(this._fireRemoveLayerGroup(g),this._fireRemoveLayerGroup(this.map,g)):(g.pm._fireRemove(g),g.pm._fireRemove(this.map,g)))},_isRelevantForRemoval(h){return h.pm&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let h=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&(_.pm.enabled()&&_.pm.disable(),_.on("click",this.removeLayer,this))}},_layerAddedRemoval({layer:h}){this._addedLayersRemoval[L.stamp(h)]=h}},ml=Yr,Mc={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{this._isRelevantForRotate(h)&&h.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this)),this._addedLayersRotate={},this.map.on("layeradd",this._layerAddedRotate,this),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(h=>h instanceof L.Polyline).forEach(h=>{h.pm.disableRotate()}),this.map.off("layeradd",this._layerAddedRotate,this),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(h){return h.pm&&h instanceof L.Polyline&&!(h instanceof L.LayerGroup)&&(!L.PM.optIn&&!h.options.pmIgnore||L.PM.optIn&&h.options.pmIgnore===!1)&&!h._pmTempLayer&&h.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let h=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let g in h){let _=h[g];this._isRelevantForRemoval(_)&&_.pm.enableRotate()}},_layerAddedRotate({layer:h}){this._addedLayersRotate[L.stamp(h)]=h}},ou=Mc,Pu=l(Fr()),Nl={_fireDrawStart(h="Draw",g={}){this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},h,g)},_fireDrawEnd(h="Draw",g={}){this.__fire(this._map,"pm:drawend",{shape:this._shape},h,g)},_fireCreate(h,g="Draw",_={}){this.__fire(this._map,"pm:create",{shape:this._shape,marker:h,layer:h},g,_)},_fireCenterPlaced(h="Draw",g={}){let _=h==="Draw"?this._layer:void 0,S=h!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:_,layer:S,latlng:this._layer.getLatLng()},h,g)},_fireCut(h,g,_,S="Draw",M={}){this.__fire(h,"pm:cut",{shape:this._shape,layer:g,originalLayer:_},S,M)},_fireEdit(h=this._layer,g="Edit",_={}){this.__fire(h,"pm:edit",{layer:this._layer,shape:this.getShape()},g,_)},_fireEnable(h="Edit",g={}){this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDisable(h="Edit",g={}){this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},h,g)},_fireUpdate(h="Edit",g={}){this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},h,g)},_fireMarkerDragStart(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDrag(h,g=void 0,_="Edit",S={}){this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g},_,S)},_fireMarkerDragEnd(h,g=void 0,_=void 0,S="Edit",M={}){this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:h,shape:this.getShape(),indexPath:g,intersectionReset:_},S,M)},_fireDragStart(h="Edit",g={}){this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},h,g)},_fireDrag(h,g="Edit",_={}){this.__fire(this._layer,"pm:drag",{...h,shape:this.getShape()},g,_)},_fireDragEnd(h="Edit",g={}){this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragEnable(h="Edit",g={}){this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},h,g)},_fireDragDisable(h="Edit",g={}){this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},h,g)},_fireRemove(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:this.getShape()},_,S)},_fireVertexAdded(h,g,_,S="Edit",M={}){this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:h,indexPath:g,latlng:_,shape:this.getShape()},S,M)},_fireVertexRemoved(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:h,indexPath:g,shape:this.getShape()},_,S)},_fireVertexClick(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireIntersect(h,g=this._layer,_="Edit",S={}){this.__fire(g,"pm:intersect",{layer:this._layer,intersection:h,shape:this.getShape()},_,S)},_fireLayerReset(h,g,_="Edit",S={}){this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:h,indexPath:g,shape:this.getShape()},_,S)},_fireChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:h,shape:this.getShape()},g,_)},_fireTextChange(h,g="Edit",_={}){this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:h,shape:this.getShape()},g,_)},_fireTextFocus(h="Edit",g={}){this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},h,g)},_fireTextBlur(h="Edit",g={}){this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},h,g)},_fireSnapDrag(h,g,_="Snapping",S={}){this.__fire(h,"pm:snapdrag",g,_,S)},_fireSnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:snap",g,_,S)},_fireUnsnap(h,g,_="Snapping",S={}){this.__fire(h,"pm:unsnap",g,_,S)},_fireRotationEnable(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},_,S)},_fireRotationDisable(h,g="Rotation",_={}){this.__fire(h,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},g,_)},_fireRotationStart(h,g,_="Rotation",S={}){this.__fire(h,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:g},_,S)},_fireRotation(h,g,_,S=this._rotationLayer,M="Rotation",U={}){this.__fire(h,"pm:rotate",{layer:S,helpLayer:this._layer,startAngle:this._startAngle,angle:S.pm.getAngle(),angleDiff:g,oldLatLngs:_,newLatLngs:S.getLatLngs()},M,U)},_fireRotationEnd(h,g,_,S="Rotation",M={}){this.__fire(h,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:g,angle:this._rotationLayer.pm.getAngle(),originLatLngs:_,newLatLngs:this._rotationLayer.getLatLngs()},S,M)},_fireActionClick(h,g,_,S="Toolbar",M={}){this.__fire(this._map,"pm:actionclick",{text:h.text,action:h,btnName:g,button:_},S,M)},_fireButtonClick(h,g,_="Toolbar",S={}){this.__fire(this._map,"pm:buttonclick",{btnName:h,button:g},_,S)},_fireLangChange(h,g,_,S,M="Global",U={}){this.__fire(this.map,"pm:langchange",{oldLang:h,activeLang:g,fallback:_,translations:S},M,U)},_fireGlobalDragModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalEditModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalRemovalModeToggled(h,g="Global",_={}){this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:h,map:this.map},g,_)},_fireGlobalCutModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},h,g)},_fireGlobalDrawModeToggled(h="Global",g={}){this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},h,g)},_fireGlobalRotateModeToggled(h="Global",g={}){this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},h,g)},_fireRemoveLayerGroup(h,g=h,_="Edit",S={}){this.__fire(h,"pm:remove",{layer:g,shape:void 0},_,S)},_fireKeyeventEvent(h,g,_,S="Global",M={}){this.__fire(this.map,"pm:keyevent",{event:h,eventType:g,focusOn:_},S,M)},__fire(h,g,_,S,M={}){_=(0,Pu.default)(_,M,{source:S}),L.PM.Utils._fireEvent(h,g,_)}},au=Nl,Mu=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(h){this.map=h,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this),h.once("unload",this._unbindKeyListenerEvents,this)},_unbindKeyListenerEvents(){L.DomEvent.off(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.off(window,"blur",this._onBlur,this)},_onKeyListener(h){let g="document";this.map.getContainer().contains(h.target)&&(g="map");let _={event:h,eventType:h.type,focusOn:g};this._lastEvents[h.type]=_,this._lastEvents.current=_,this.map.pm._fireKeyeventEvent(h,h.type,g)},_onBlur(h){h.altKey=!1;let g={event:h,eventType:h.type,focusOn:"document"};this._lastEvents[h.type]=g,this._lastEvents.current=g},getLastKeyEvent(h="current"){return this._lastEvents[h]},isShiftKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.shiftKey},isAltKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.altKey},isCtrlKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.ctrlKey},isMetaKeyPressed(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.metaKey},getPressedKey(){var h;return(h=this._lastEvents.current)==null?void 0:h.event.key}}),ei=Mu,ys=l(Is());function ur(h){let g=L.PM.activeLang;return(0,ys.default)(Es[g],h)||(0,ys.default)(Es.en,h)||h}function bs(h){for(let g=0;g<h.length;g+=1){let _=h[g];if(Array.isArray(_)){if(bs(_))return!0}else if(_!=null&&_!=="")return!0}return!1}function Il(h){return h.reduce((g,_)=>{if(_.length!==0){let S=Array.isArray(_)?Il(_):_;Array.isArray(S)?S.length!==0&&g.push(S):g.push(S)}return g},[])}function Ua(h,g,_){let S={a:L.CRS.Earth.R,b:63567523142e-4,f:.0033528106647474805},{a:M,b:U,f:ne}=S,ae=h.lng,ye=h.lat,Ee=_,nt=Math.PI,qe=g*nt/180,bt=Math.sin(qe),It=Math.cos(qe),tn=(1-ne)*Math.tan(ye*nt/180),wn=1/Math.sqrt(1+tn*tn),Pn=tn*wn,dr=Math.atan2(tn,It),tt=wn*bt,st=1-tt*tt,pt=st*(M*M-U*U)/(U*U),zt=1+pt/16384*(4096+pt*(-768+pt*(320-175*pt))),St=pt/1024*(256+pt*(-128+pt*(74-47*pt))),Rt=Ee/(U*zt),be=2*Math.PI,ke,je,Fe;for(;Math.abs(Rt-be)>1e-12;){ke=Math.cos(2*dr+Rt),je=Math.sin(Rt),Fe=Math.cos(Rt);let hn=St*je*(ke+St/4*(Fe*(-1+2*ke*ke)-St/6*ke*(-3+4*je*je)*(-3+4*ke*ke)));be=Rt,Rt=Ee/(U*zt)+hn}let Ue=Pn*je-wn*Fe*It,We=Math.atan2(Pn*Fe+wn*je*It,(1-ne)*Math.sqrt(tt*tt+Ue*Ue)),ct=Math.atan2(je*bt,wn*Fe-Pn*je*It),ht=ne/16*st*(4+ne*(4-3*st)),vt=ct-(1-ht)*ne*tt*(Rt+ht*je*(ke+ht*Fe*(-1+2*ke*ke))),Mt=ae+vt*180/nt,kt=We*180/nt;return L.latLng(Mt,kt)}function Xi(h,g,_,S,M=!0){let U,ne,ae,ye=[];for(let Ee=0;Ee<_;Ee+=1){if(M)U=Ee*360/_+S,ne=Ua(h,U,g),ae=L.latLng(ne.lng,ne.lat);else{let nt=h.lat+Math.cos(2*Ee*Math.PI/_)*g,qe=h.lng+Math.sin(2*Ee*Math.PI/_)*g;ae=L.latLng(nt,qe)}ye.push(ae)}return ye}function ku(h,g,_){g=(g+360)%360;let S=Math.PI/180,M=180/Math.PI,{R:U}=L.CRS.Earth,ne=h.lng*S,ae=h.lat*S,ye=g*S,Ee=Math.sin(ae),nt=Math.cos(ae),qe=Math.cos(_/U),bt=Math.sin(_/U),It=Math.asin(Ee*qe+nt*bt*Math.cos(ye)),tn=ne+Math.atan2(Math.sin(ye)*bt*nt,qe-Ee*Math.sin(It));tn*=M;let wn=tn-360,Pn=tn<-180?tn+360:tn;return tn=tn>180?wn:Pn,L.latLng([It*M,tn])}function Pa(h,g,_){let S=h.latLngToContainerPoint(g),M=h.latLngToContainerPoint(_),U=Math.atan2(M.y-S.y,M.x-S.x)*180/Math.PI+90;return U+=U<0?360:0,U}function lu(h,g,_,S){let M=Pa(h,g,_);return ku(g,M,S)}function uu(h,g,_="asc"){if(!g||Object.keys(g).length===0)return(ye,Ee)=>ye-Ee;let S=Object.keys(g),M,U=S.length-1,ne={};for(;U>=0;)M=S[U],ne[M.toLowerCase()]=g[M],U-=1;function ae(ye){if(ye instanceof L.Marker)return"Marker";if(ye instanceof L.Circle)return"Circle";if(ye instanceof L.CircleMarker)return"CircleMarker";if(ye instanceof L.Rectangle)return"Rectangle";if(ye instanceof L.Polygon)return"Polygon";if(ye instanceof L.Polyline)return"Line"}return(ye,Ee)=>{let nt,qe;if(nt=ae(ye.layer).toLowerCase(),qe=ae(Ee.layer).toLowerCase(),!nt||!qe)return 0;let bt=nt in ne?ne[nt]:Number.MAX_SAFE_INTEGER,It=qe in ne?ne[qe]:Number.MAX_SAFE_INTEGER,tn=0;return bt<It?tn=-1:bt>It&&(tn=1),_==="desc"?tn*-1:tn}}function ia(h,g=h.getLatLngs()){return h instanceof L.Polygon?L.polygon(g).getLatLngs():L.polyline(g).getLatLngs()}function cu(h,g){var _,S,M,U;if((S=(_=g.options.crs)==null?void 0:_.projection)!=null&&S.MAX_LATITUDE){let ne=(U=(M=g.options.crs)==null?void 0:M.projection)==null?void 0:U.MAX_LATITUDE;h.lat=Math.max(Math.min(ne,h.lat),-ne)}return h}function Li(h){return h.options.renderer||h._map&&(h._map._getPaneRenderer(h.options.pane)||h._map.options.renderer||h._map._renderer)||h._renderer}var kc=L.Class.extend({includes:[Ju,Lr,ml,ou,au],initialize(h){this.map=h,this.Draw=new L.PM.Draw(h),this.Toolbar=new L.PM.Toolbar(h),this.Keyboard=ei(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(h)},setLang(h="en",g,_="en"){if(h=h.trim().toLowerCase(),!/^[a-z]{2}$/.test(h)){let M=h.replace(/[-_\s]/g,"-").replace(/^(\w{2})$/,"$1-").match(/([a-z]{2})-?([a-z]{2})?/);if(M){let U=[`${M[1]}_${M[2]}`,`${M[1]}`];for(let ne of U)if(Es[ne]){h=ne;break}}}let S=L.PM.activeLang;g&&(Es[h]=(0,lr.default)(Es[_],g)),L.PM.activeLang=h,this.map.pm.Toolbar.reinit(),this._fireLangChange(S,h,_,Es[h])},addControls(h){this.Toolbar.addControls(h)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(h="Polygon",g){h==="Poly"&&(h="Polygon"),this.Draw.enable(h,g)},disableDraw(h="Polygon"){h==="Poly"&&(h="Polygon"),this.Draw.disable(h)},setPathOptions(h,g={}){let _=g.ignoreShapes||[],S=g.merge||!1;this.map.pm.Draw.shapes.forEach(M=>{_.indexOf(M)===-1&&this.map.pm.Draw[M].setPathOptions(h,S)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(h){let g=(0,lr.default)(this.globalOptions,h);g.editable&&(g.resizeableCircleMarker=g.editable,delete g.editable);let _=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!g.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),_=!0);let S=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!g.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),S=!0),this.map.pm.Draw.shapes.forEach(M=>{this.map.pm.Draw[M].setOptions(g)}),_&&this.map.pm.Draw.CircleMarker.enable(),S&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(M=>{M.pm.setOptions(g)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=g,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(h=>{h.pm.enabled()&&h.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(h){return this.Draw.Cut.enable(h)},toggleGlobalCutMode(h){return this.Draw.Cut.toggle(h)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(h=!1){let g=L.PM.Utils.findLayers(this.map);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},getGeomanDrawLayers(h=!1){let g=L.PM.Utils.findLayers(this.map).filter(S=>S._drawnByGeoman===!0);if(!h)return g;let _=L.featureGroup();return _._pmTempLayer=!0,g.forEach(S=>{_.addLayer(S)}),_},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(h){this._touchEventCounter===0&&(L.DomEvent.on(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(h){this._touchEventCounter===1&&(L.DomEvent.off(h,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(h,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(h){Li(this.map)._onMouseMove(this._createMouseEvent("mousemove",h))},_canvasTouchClick(h){let g="";h.type==="touchstart"||h.type==="pointerdown"?g="mousedown":(h.type==="touchend"||h.type==="pointerup"||h.type==="touchcancel"||h.type==="pointercancel")&&(g="mouseup"),g&&Li(this.map)._onClick(this._createMouseEvent(g,h))},_createMouseEvent(h,g){let _,S=g.touches[0]||g.changedTouches[0];try{_=new MouseEvent(h,{bubbles:g.bubbles,cancelable:g.cancelable,view:g.view,detail:S.detail,screenX:S.screenX,screenY:S.screenY,clientX:S.clientX,clientY:S.clientY,ctrlKey:g.ctrlKey,altKey:g.altKey,shiftKey:g.shiftKey,metaKey:g.metaKey,button:g.button,relatedTarget:g.relatedTarget})}catch{_=document.createEvent("MouseEvents"),_.initMouseEvent(h,g.bubbles,g.cancelable,g.view,S.detail,S.screenX,S.screenY,S.clientX,S.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,g.button,g.relatedTarget)}return _}}),Us=kc,ma=L.Control.extend({includes:[au],options:{position:"topleft",disableByOtherButtons:!0},initialize(h){this._button=L.Util.extend({},this.options,h)},onAdd(h){return this._map=h,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let h=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),h?h.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(h){return typeof h=="boolean"?this._button.toggleStatus=h:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(h){h&&h.preventDefault(),!this._button.disabled&&(this._button.onClick(h,{button:this,event:h}),this._clicked(h),this._button.afterClick(h,{button:this,event:h}))},_makeButton(h){let g=this.options.position.indexOf("right")>-1?"pos-right":"",_=L.DomUtil.create("div",`button-container  ${g}`,this._container);h.title&&_.setAttribute("title",h.title);let S=L.DomUtil.create("a","leaflet-buttons-control-button",_);S.setAttribute("role","button"),S.setAttribute("tabindex","0"),S.href="#";let M=L.DomUtil.create("div",`leaflet-pm-actions-container ${g}`,_),U=h.actions,ne={cancel:{text:ur("actions.cancel"),title:ur("actions.cancel"),onClick(){this._triggerClick()}},finishMode:{text:ur("actions.finish"),title:ur("actions.finish"),onClick(){this._triggerClick()}},removeLastVertex:{text:ur("actions.removeLastVertex"),title:ur("actions.removeLastVertex"),onClick(){this._map.pm.Draw[h.jsClass]._removeLastVertex()}},finish:{text:ur("actions.finish"),title:ur("actions.finish"),onClick(ye){this._map.pm.Draw[h.jsClass]._finishShape(ye)}}};h._preparedActions=U.map(ye=>{let Ee=typeof ye=="string"?ye:ye.name,nt;if(ne[Ee])nt=ne[Ee];else if(ye.text)nt=ye;else return nt;let qe=L.DomUtil.create("a",`leaflet-pm-action ${g} action-${Ee}`,M);if(qe.setAttribute("role","button"),qe.setAttribute("tabindex","0"),qe.href="#",nt.title&&(qe.title=nt.title),qe.innerHTML=nt.text,L.DomEvent.disableClickPropagation(qe),L.DomEvent.on(qe,"click",L.DomEvent.stop),nt._node=qe,!h.disabled&&nt.onClick){let bt=It=>{It.preventDefault();let tn="",{buttons:wn}=this._map.pm.Toolbar;for(let Pn in wn)if(wn[Pn]._button===h){tn=Pn;break}this._fireActionClick(nt,tn,h)};L.DomEvent.addListener(qe,"click",bt,this),L.DomEvent.addListener(qe,"click",nt.onClick,this),L.DomEvent.addListener(qe,"click",()=>this._updateActiveAction(h))}return nt}),this._updateActiveAction(h),h.toggleStatus&&L.DomUtil.addClass(_,"active");let ae=L.DomUtil.create("div","control-icon",S);return h.iconUrl&&ae.setAttribute("src",h.iconUrl),h.className&&L.DomUtil.addClass(ae,h.className),L.DomEvent.disableClickPropagation(S),L.DomEvent.on(S,"click",L.DomEvent.stop),h.disabled||(L.DomEvent.addListener(S,"click",this._onBtnClick,this),L.DomEvent.addListener(S,"click",this._triggerClick,this)),h.disabled&&(L.DomUtil.addClass(S,"pm-disabled"),S.setAttribute("aria-disabled","true")),_},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")):(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let h="",{buttons:g}=this._map.pm.Toolbar;for(let _ in g)if(g[_]._button===this._button){h=_;break}this._fireButtonClick(h,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let h="pm-disabled",g=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(g,h),g.setAttribute("aria-disabled","true")):(L.DomUtil.removeClass(g,h),g.setAttribute("aria-disabled","false"))},_updateActiveAction(h){var g;(g=h._preparedActions)==null||g.forEach(_=>{_!=null&&_._node&&(_.isActive&&_.isActive.call(this)?L.DomUtil.addClass(_._node,"active-action"):L.DomUtil.removeClass(_._node,"active-action"))})}}),hu=ma;L.Control.PMButton=hu;var va=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize(h){this.customButtons=[],this.options.positions={draw:"",edit:"",options:"",custom:""},this.init(h)},reinit(){let h=this.isVisible;this.removeControls(),this._defineButtons(),h&&this.addControls()},init(h){this.map=h,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer(h){let g=`${h}Container`;return this[g]||(this[g]=L.DomUtil.create("div",`leaflet-pm-toolbar leaflet-pm-${h} leaflet-bar leaflet-control`)),this[g]},getButtons(){return this.buttons},addControls(h=this.options){typeof h.editPolygon<"u"&&(h.editMode=h.editPolygon),typeof h.deleteLayer<"u"&&(h.removalMode=h.deleteLayer),L.Util.setOptions(this,h),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let h=this.getButtons(),g={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(let _ in h){let S=h[_];L.Util.setOptions(S,{className:g.geomanIcons[_]})}},removeControls(){let h=this.getButtons();for(let g in h)h[g].remove();this.isVisible=!1},toggleControls(h=this.options){this.isVisible?this.removeControls():this.addControls(h)},_addButton(h,g){return this.buttons[h]=g,this.options[h]=!!this.options[h]||!1,this.buttons[h]},triggerClickOnToggledButtons(h){for(let g in this.buttons){let _=this.buttons[g];_._button.disableByOtherButtons&&_!==h&&_.toggled()&&_._triggerClick()}},toggleButton(h,g,_=!0){h==="editPolygon"&&(h="editMode"),h==="deleteLayer"&&(h="removalMode");let S=h;return _&&this.triggerClickOnToggledButtons(this.buttons[S]),this.buttons[S]?this.buttons[S].toggle(g):!1},_defineButtons(){let h={className:"control-icon leaflet-pm-icon-marker",title:ur("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:ur("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},_={className:"control-icon leaflet-pm-icon-polyline",title:ur("buttonTitles.drawLineButton"),jsClass:"Line",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},S={title:ur("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},M={title:ur("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},U={title:ur("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},ne={title:ur("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ae={title:ur("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},ye={title:ur("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},Ee={title:ur("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},nt={title:ur("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},qe={className:"control-icon leaflet-pm-icon-text",title:ur("buttonTitles.drawTextButton"),jsClass:"Text",onClick:()=>{},afterClick:(bt,It)=>{this.map.pm.Draw[It.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(h)),this._addButton("drawPolyline",new L.Control.PMButton(_)),this._addButton("drawRectangle",new L.Control.PMButton(U)),this._addButton("drawPolygon",new L.Control.PMButton(g)),this._addButton("drawCircle",new L.Control.PMButton(S)),this._addButton("drawCircleMarker",new L.Control.PMButton(M)),this._addButton("drawText",new L.Control.PMButton(qe)),this._addButton("editMode",new L.Control.PMButton(ne)),this._addButton("dragMode",new L.Control.PMButton(ae)),this._addButton("cutPolygon",new L.Control.PMButton(ye)),this._addButton("removalMode",new L.Control.PMButton(Ee)),this._addButton("rotateMode",new L.Control.PMButton(nt))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let h=this.getButtons(),g=[];this.options.drawControls===!1&&(g=g.concat(Object.keys(h).filter(_=>!h[_]._button.tool))),this.options.editControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="edit"))),this.options.optionsControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="options"))),this.options.customControls===!1&&(g=g.concat(Object.keys(h).filter(_=>h[_]._button.tool==="custom")));for(let _ in h)if(this.options[_]&&g.indexOf(_)===-1){let S=h[_]._button.tool;S||(S="draw"),h[_].setPosition(this._getBtnPosition(S)),h[_].addTo(this.map)}},_getBtnPosition(h){return this.options.positions&&this.options.positions[h]?this.options.positions[h]:this.options.position},setBlockPosition(h,g){this.options.positions[h]=g,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(h,g){if(g)typeof g!="object"&&(g={name:g});else throw new TypeError("Button has no name");let _=this._btnNameMapping(h);if(!g.name)throw new TypeError("Button has no name");if(this.buttons[g.name])throw new TypeError("Button with this name already exists");let S=this.map.pm.Draw.createNewDrawInstance(g.name,_);g={...this.buttons[_]._button,...g};let M=this.createCustomControl(g);return{drawInstance:S,control:M}},createCustomControl(h){if(!h.name)throw new TypeError("Button has no name");if(this.buttons[h.name])throw new TypeError("Button with this name already exists");h.onClick||(h.onClick=()=>{}),h.afterClick||(h.afterClick=()=>{}),h.toggle!==!1&&(h.toggle=!0),h.block&&(h.block=h.block.toLowerCase()),(!h.block||h.block==="draw")&&(h.block=""),h.className?h.className.indexOf("control-icon")===-1&&(h.className=`control-icon ${h.className}`):h.className="control-icon";let g={tool:h.block,className:h.className,title:h.title||"",jsClass:h.name,onClick:h.onClick,afterClick:h.afterClick,doToggle:h.toggle,toggleStatus:!1,disableOtherButtons:h.disableOtherButtons??!0,disableByOtherButtons:h.disableByOtherButtons??!0,cssToggle:h.toggle,position:this.options.position,actions:h.actions||[],disabled:!!h.disabled};this.options[h.name]!==!1&&(this.options[h.name]=!0);let _=this._addButton(h.name,new L.Control.PMButton(g));return this.changeControlOrder(),_},controlExists(h){return!!this.getButton(h)},getButton(h){return this.getButtons()[h]},getButtonsInBlock(h){let g={};if(h)for(let _ in this.getButtons()){let S=this.getButtons()[_];(S._button.tool===h||h==="draw"&&!S._button.tool)&&(g[_]=S)}return g},changeControlOrder(h=[]){let g=this._shapeMapping(),_=[];h.forEach(U=>{g[U]?_.push(g[U]):_.push(U)});let S=this.getButtons(),M={};_.forEach(U=>{S[U]&&(M[U]=S[U])}),Object.keys(S).filter(U=>!S[U]._button.tool||S[U]._button.tool==="draw").forEach(U=>{_.indexOf(U)===-1&&(M[U]=S[U])}),Object.keys(S).filter(U=>S[U]._button.tool==="edit").forEach(U=>{_.indexOf(U)===-1&&(M[U]=S[U])}),Object.keys(S).filter(U=>S[U]._button.tool==="options").forEach(U=>{_.indexOf(U)===-1&&(M[U]=S[U])}),Object.keys(S).filter(U=>S[U]._button.tool==="custom").forEach(U=>{_.indexOf(U)===-1&&(M[U]=S[U])}),Object.keys(S).forEach(U=>{_.indexOf(U)===-1&&(M[U]=S[U])}),this.map.pm.Toolbar.buttons=M,this._showHideButtons()},getControlOrder(){let h=this.getButtons(),g=[];for(let _ in h)g.push(_);return g},changeActionsOfControl(h,g){let _=this._btnNameMapping(h);if(!_)throw new TypeError("No name passed");if(!g)throw new TypeError("No actions passed");if(!this.buttons[_])throw new TypeError("Button with this name not exists");this.buttons[_]._button.actions=g,this.changeControlOrder()},setButtonDisabled(h,g){let _=this._btnNameMapping(h);g?this.buttons[_].disable():this.buttons[_].enable()},_shapeMapping(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping(h){let g=this._shapeMapping();return g[h]?g[h]:h}}),Bl=va,Rl=l(Fr()),Si={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents(h){h.forEach(g=>{if(Array.isArray(g)){this._assignEvents(g);return}g.off("drag",this._handleSnapping,this),g.on("drag",this._handleSnapping,this),g.off("dragend",this._cleanupSnapping,this),g.on("dragend",this._cleanupSnapping,this)})},_cleanupSnapping(h){if(h){let g=h.target;g._snapped=!1}delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("layerremove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(g=>{g.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(h){var ae,ye,Ee;let g=h.target;if(g._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),((ae=h==null?void 0:h.originalEvent)==null?void 0:ae.altKey)||((Ee=(ye=this._map)==null?void 0:ye.pm)==null?void 0:Ee.Keyboard.isAltKeyPressed())||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;let _=this._calcClosestLayer(g.getLatLng(),this._snapList);if(Object.keys(_).length===0)return!1;let S=_.layer instanceof L.Marker||_.layer instanceof L.CircleMarker||!this.options.snapSegment,M;S?M=_.latlng:M=this._checkPrioritiySnapping(_);let U=this.options.snapDistance,ne={marker:g,shape:this._shape,snapLatLng:M,segment:_.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:_.layer,distance:_.distance};if(this._fireSnapDrag(ne.marker,ne),this._fireSnapDrag(this._layer,ne),_.distance<U){g._orgLatLng=g.getLatLng(),g.setLatLng(M),g._snapped=!0,g._snapInfo=ne;let nt=()=>{this._snapLatLng=M,this._fireSnap(g,ne),this._fireSnap(this._layer,ne)},qe=this._snapLatLng||{},bt=M||{};(qe.lat!==bt.lat||qe.lng!==bt.lng)&&nt()}else this._snapLatLng&&(this._unsnap(ne),g._snapped=!1,g._snapInfo=void 0,this._fireUnsnap(ne.marker,ne),this._fireUnsnap(this._layer,ne));return!0},_createSnapList(){let h=[],g=[],_=this._map;_.off("layerremove",this._handleSnapLayerRemoval,this),_.on("layerremove",this._handleSnapLayerRemoval,this),_.eachLayer(S=>{if((S instanceof L.Polyline||S instanceof L.Marker||S instanceof L.CircleMarker||S instanceof L.ImageOverlay)&&S.options.snapIgnore!==!0){if(S.options.snapIgnore===void 0&&(!L.PM.optIn&&S.options.pmIgnore===!0||L.PM.optIn&&S.options.pmIgnore!==!1))return;(S instanceof L.Circle||S instanceof L.CircleMarker)&&S.pm&&S.pm._hiddenPolyCircle?h.push(S.pm._hiddenPolyCircle):S instanceof L.ImageOverlay&&(S=L.rectangle(S.getBounds())),h.push(S);let M=L.polyline([],{color:"red",pmIgnore:!0});M._pmTempLayer=!0,g.push(M),(S instanceof L.Circle||S instanceof L.CircleMarker)&&g.push(M)}}),h=h.filter(S=>this._layer!==S),h=h.filter(S=>S._latlng||S._latlngs&&bs(S._latlngs)),h=h.filter(S=>!S._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let S=L.polyline([],{color:"red",pmIgnore:!0});S._pmTempLayer=!0,g.push(S)}),this._snapList=h.concat(this._otherSnapLayers)):this._snapList=h,this.debugIndicatorLines=g},_handleSnapLayerRemoval({layer:h}){if(!h._leaflet_id)return;let g=this._snapList.findIndex(_=>_._leaflet_id===h._leaflet_id);g>-1&&this._snapList.splice(g,1)},_calcClosestLayer(h,g){return this._calcClosestLayers(h,g,1)[0]},_calcClosestLayers(h,g,_=1){let S=[],M={};g.forEach((ne,ae)=>{var Ee;if(ne._parentCopy&&ne._parentCopy===this._layer||((Ee=ne.getLatLngs)==null?void 0:Ee.call(ne).flat(5).length)<2)return;let ye=this._calcLayerDistances(h,ne);if(ye.distance=Math.floor(ye.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[ae]){let nt=L.polyline([],{color:"red",pmIgnore:!0});nt._pmTempLayer=!0,this.debugIndicatorLines[ae]=nt}this.debugIndicatorLines[ae].setLatLngs([h,ye.latlng])}_===1&&(M.distance===void 0||ye.distance-5<=M.distance)?(ye.distance+5<M.distance&&(S=[]),M=ye,M.layer=ne,S.push(M)):_!==1&&(M={},M=ye,M.layer=ne,S.push(M))}),_!==1&&(S=S.sort((ne,ae)=>ne.distance-ae.distance)),_===-1&&(_=S.length);let U=this._getClosestLayerByPriority(S,_);return L.Util.isArray(U)?U:[U]},_calcLayerDistances(h,g){let _=this._map,S=g instanceof L.Marker||g instanceof L.CircleMarker,M=g instanceof L.Polygon,U=h;if(S){let ne=g.getLatLng();return{latlng:{...ne},distance:this._getDistance(_,ne,U)}}return this._calcLatLngDistances(U,g.getLatLngs(),_,M)},_calcLatLngDistances(h,g,_,S=!1){let M,U,ne,ae=ye=>{ye.forEach((Ee,nt)=>{if(Array.isArray(Ee)){ae(Ee);return}if(this.options.snapSegment){let qe=Ee,bt;S?bt=nt+1===ye.length?0:nt+1:bt=nt+1===ye.length?void 0:nt+1;let It=ye[bt];if(It){let tn=this._getDistanceToSegment(_,h,qe,It);(U===void 0||tn<U)&&(U=tn,ne=[qe,It])}}else{let qe=this._getDistance(_,h,Ee);(U===void 0||qe<U)&&(U=qe,M=Ee)}})};return ae(g),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(_,h,ne[0],ne[1])},segment:ne,distance:U}:{latlng:M,distance:U}},_getClosestLayerByPriority(h,g=1){h=h.sort((ne,ae)=>ne._leaflet_id-ae._leaflet_id);let _=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],S=this._map.pm.globalOptions.snappingOrder||[],M=0,U={};return S.concat(_).forEach(ne=>{U[ne]||(M+=1,U[ne]=M)}),h.sort(uu("instanceofShape",U)),g===1?h[0]||{}:h.slice(0,g)},_checkPrioritiySnapping(h){let g=this._map,_=h.segment[0],S=h.segment[1],M=h.latlng,U=M;if(this.options.snapVertex){let ne=this._getDistance(g,_,M),ae=this._getDistance(g,S,M),ye=ne<ae?_:S,Ee=ne<ae?ne:ae;if(this.options.snapMiddle){let qe=L.PM.Utils.calcMiddleLatLng(g,_,S),bt=this._getDistance(g,qe,M);bt<ne&&bt<ae&&(ye=qe,Ee=bt)}let nt=this.options.snapDistance;Ee<nt&&(U=ye)}return{...U}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(h,g,_,S){let M=h.getMaxZoom();M===1/0&&(M=h.getZoom());let U=h.project(g,M),ne=h.project(_,M),ae=h.project(S,M),ye=L.LineUtil.closestPointOnSegment(U,ne,ae);return h.unproject(ye,M)},_getDistanceToSegment(h,g,_,S){let M=h.latLngToContainerPoint(g),U=h.latLngToContainerPoint(_),ne=h.latLngToContainerPoint(S);return L.LineUtil.pointToSegmentDistance(M,U,ne)},_getDistance(h,g,_){return h.latLngToContainerPoint(g).distanceTo(h.latLngToContainerPoint(_))}},Yo=Si,Ha=L.Class.extend({includes:[Yo,au],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(h){L.Util.setOptions(this,h),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(h){let g=new L.Icon.Default;g.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=g,this._map=h,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(_=>{this[_]=new L.PM.Draw[_](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(h,g=!1){g?this.options.pathOptions=(0,Rl.default)(this.options.pathOptions,h):this.options.pathOptions=h},getShapes(){return this.shapes},getShape(){return this._shape},enable(h,g){if(!h)throw new Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(",")}`);this.disable(),this[h].enable(g)},disable(){this.shapes.forEach(h=>{this[h].disable()})},addControls(){this.shapes.forEach(h=>{this[h].addButton()})},getActiveShape(){let h;return this.shapes.forEach(g=>{this[g]._enabled&&(h=g)}),h},_setGlobalDrawMode(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let h=[];this._map.eachLayer(g=>{(g instanceof L.Polyline||g instanceof L.Marker||g instanceof L.Circle||g instanceof L.CircleMarker||g instanceof L.ImageOverlay)&&(g._pmTempLayer||h.push(g))}),this._enabled?h.forEach(g=>{L.PM.Utils.disablePopup(g)}):h.forEach(g=>{L.PM.Utils.enablePopup(g)})},createNewDrawInstance(h,g){let _=this._getShapeFromBtnName(g);if(this[h])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[_])throw new TypeError(`There is no class L.PM.Draw.${_}`);return this[h]=new L.PM.Draw[_](this._map),this[h].toolbarButtonName=h,this[h]._shape=h,this.shapes.push(h),this[g]&&this[h].setOptions(this[g].options),this[h].setOptions(this[h].options),this[h]},_getShapeFromBtnName(h){let g={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return g[h]?g[h]:this[h]?this[h]._shape:h},_finishLayer(h){h.pm&&(h.pm.setOptions(this.options),h.pm._shape=this._shape,h.pm._map=this._map),this._addDrawnLayerProp(h)},_addDrawnLayerProp(h){h._drawnByGeoman=!0},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}}),_s=Ha;_s.Marker=_s.extend({initialize(h){this._map=h,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(g=>{this.isRelevantMarker(g)&&g.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},isRelevantMarker(h){return h instanceof L.Marker&&h.pm&&!h._pmTempLayer&&!h.pm._initTextMarker},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker(h){if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new L.Marker(g,this.options.markerStyle);this._setPane(_,"markerPane"),this._finishLayer(_),_.pm||(_.options.draggable=!1),_.addTo(this._map.pm._getContainingLayer()),_.pm&&this.options.markerEditable?_.pm.enable():_.dragging&&_.dragging.disable(),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){var h,g;(h=this.options.markerStyle)!=null&&h.icon&&((g=this._hintMarker)==null||g.setIcon(this.options.markerStyle.icon))}});var F=63710088e-1,we={centimeters:F*100,centimetres:F*100,degrees:F/111325,feet:F*3.28084,inches:F*39.37,kilometers:F/1e3,kilometres:F/1e3,meters:F,metres:F,miles:F/1609.344,millimeters:F*1e3,millimetres:F*1e3,nauticalmiles:F/1852,radians:1,yards:F*1.0936};function et(h,g,_){_===void 0&&(_={});var S={type:"Feature"};return(_.id===0||_.id)&&(S.id=_.id),_.bbox&&(S.bbox=_.bbox),S.properties=g||{},S.geometry=h,S}function dt(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("coordinates is required");if(!Array.isArray(h))throw new Error("coordinates must be an Array");if(h.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!br(h[0])||!br(h[1]))throw new Error("coordinates must contain numbers");var S={type:"Point",coordinates:h};return et(S,g,_)}function Pt(h,g,_){if(_===void 0&&(_={}),h.length<2)throw new Error("coordinates must be an array of two or more positions");var S={type:"LineString",coordinates:h};return et(S,g,_)}function Ht(h,g){g===void 0&&(g={});var _={type:"FeatureCollection"};return g.id&&(_.id=g.id),g.bbox&&(_.bbox=g.bbox),_.features=h,_}function mn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h*_}function Bn(h,g){g===void 0&&(g="kilometers");var _=we[g];if(!_)throw new Error(g+" units is invalid");return h/_}function $n(h){var g=h%(2*Math.PI);return g*180/Math.PI}function or(h){var g=h%360;return g*Math.PI/180}function br(h){return!isNaN(h)&&h!==null&&!Array.isArray(h)}function Hr(h){var g,_,S={type:"FeatureCollection",features:[]};if(h.type==="Feature"?_=h.geometry:_=h,_.type==="LineString")g=[_.coordinates];else if(_.type==="MultiLineString")g=_.coordinates;else if(_.type==="MultiPolygon")g=[].concat.apply([],_.coordinates);else if(_.type==="Polygon")g=_.coordinates;else throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");return g.forEach(function(M){g.forEach(function(U){for(var ne=0;ne<M.length-1;ne++)for(var ae=ne;ae<U.length-1;ae++)if(!(M===U&&(Math.abs(ne-ae)===1||ne===0&&ae===M.length-2&&M[ne][0]===M[M.length-1][0]&&M[ne][1]===M[M.length-1][1]))){var ye=Yi(M[ne][0],M[ne][1],M[ne+1][0],M[ne+1][1],U[ae][0],U[ae][1],U[ae+1][0],U[ae+1][1]);ye&&S.features.push(dt([ye[0],ye[1]]))}})}),S}function Yi(h,g,_,S,M,U,ne,ae){var ye,Ee,nt,qe,bt,It={x:null,y:null,onLine1:!1,onLine2:!1};return ye=(ae-U)*(_-h)-(ne-M)*(S-g),ye===0?It.x!==null&&It.y!==null?It:!1:(Ee=g-U,nt=h-M,qe=(ne-M)*Ee-(ae-U)*nt,bt=(_-h)*Ee-(S-g)*nt,Ee=qe/ye,nt=bt/ye,It.x=h+Ee*(_-h),It.y=g+Ee*(S-g),Ee>=0&&Ee<=1&&(It.onLine1=!0),nt>=0&&nt<=1&&(It.onLine2=!0),It.onLine1&&It.onLine2?[It.x,It.y]:!1)}_s.Line=_s.extend({initialize(h){this._map=h,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintLine(){let h=this._layer.getLatLngs();if(h.length>0){let g=h[h.length-1];this._hintline.setLatLngs([g,this._hintMarker.getLatLng()])}},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let g=this._layer._defaultShape().slice();g.push(this._hintMarker.getLatLng()),this._change(g)},hasSelfIntersection(){return Hr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(h,g){let _=L.polyline(this._layer.getLatLngs());h&&(g||(g=this._hintMarker.getLatLng()),_.addLatLng(g));let S=Hr(_.toGeoJSON(15));this._doesSelfIntersect=S.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:"#f00000ff"}),this._fireIntersect(S,this._map,"Draw")):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(h){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,h.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._layer.getLatLngs(),S=_[_.length-1];if(g.equals(_[0])||_.length>0&&g.equals(S)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:g,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(g);let M=this._createMarker(g);this._setTooltipText(),this._setHintLineAfterNewVertex(g),this._fireVertexAdded(M,void 0,g,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(h)},_setHintLineAfterNewVertex(h){this._hintline.setLatLngs([h,h])},_removeLastVertex(){let h=this._markers;if(h.length<=1){this.disable();return}let g=this._layer.getLatLngs(),_=h[h.length-1],{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(h,_);h.pop(),this._layerGroup.removeLayer(_);let M=h[h.length-1],U=g.indexOf(M.getLatLng());g=g.slice(0,U+1),this._layer.setLatLngs(g),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(_,S,"Draw"),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=1)return;let g=L.polyline(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this.options.snappable&&this._cleanupSnapping();let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),g.on("click",this._finishShape,this),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=1?g=ur("tooltips.continueLine"):g=ur("tooltips.finishLine"),this._hintMarker.setTooltipContent(g)},_change(h){this._fireChange(h,"Draw")},setStyle(){var h,g;(h=this._layer)==null||h.setStyle(this.options.templineStyle),(g=this._hintline)==null||g.setStyle(this.options.hintlineStyle)}}),_s.Polygon=_s.Line.extend({initialize(h){this._map=h,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable(h){L.PM.Draw.Line.prototype.enable.call(this,h),this._layer.pm._shape="Polygon"},_createMarker(h){let g=new L.Marker(h,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this._layerGroup.addLayer(g),this._markers.push(g),this._layer.getLatLngs().flat().length===1?(g.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(g)-1,this.options.snappable&&this._cleanupSnapping()):g.on("click",()=>1),g},_setTooltipText(){let{length:h}=this._layer.getLatLngs().flat(),g="";h<=2?g=ur("tooltips.continueLine"):g=ur("tooltips.finishPoly"),this._hintMarker.setTooltipContent(g)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);this._setPane(g,"layerPane"),this._finishLayer(g),g.addTo(this._map.pm._getContainingLayer()),this._fireCreate(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))}}),_s.Rectangle=_s.extend({initialize(h){this._map=h,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable(h){if(L.Util.setOptions(this,h),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let g=0;g<2;g+=1){let _=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(_,"vertexPane"),_._pmTempLayer=!0,this._layerGroup.addLayer(_),this._styleMarkers.push(_)}}this._map.getContainer().classList.add("geoman-draw-cursor"),this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeStartingMarkers(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(g),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(_=>{L.DomUtil.addClass(_._icon,"visible"),_.setLatLng(g)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(ur("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin(){let h=this._startMarker.getLatLng();h&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([h,h]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}let g=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(g,"Draw")},_syncRectangleSize(){let h=cu(this._startMarker.getLatLng(),this._map),g=cu(this._hintMarker.getLatLng(),this._map),_=L.PM.Utils._getRotatedRectangle(h,g,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(_),this.options.cursorMarker&&this._styleMarkers){let S=[];_.forEach(M=>{!M.equals(h,1e-8)&&!M.equals(g,1e-8)&&S.push(M)}),S.forEach((M,U)=>{try{this._styleMarkers[U].setLatLng(M)}catch{}})}},_findCorners(){let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.options.rectangleAngle||0,this._map)},_finishShape(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||_.equals(g))return;let S=L.rectangle([_,g],this.options.pathOptions);if(this.options.rectangleAngle){let U=L.PM.Utils._getRotatedRectangle(_,g,this.options.rectangleAngle||0,this._map);S.setLatLngs(U),S.pm&&S.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(S,"layerPane"),this._finishLayer(S),S.addTo(this._map.pm._getContainingLayer()),this._fireCreate(S);let M=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(M))},setStyle(){var h;(h=this._layer)==null||h.setStyle(this.options.pathOptions)}}),_s.CircleMarker=_s.extend({initialize(h){this._map=h,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._defaultRadius=10},enable(h){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add("geoman-draw-cursor"),this.options[this._editableOption]){let g={};L.extend(g,this.options.templineStyle),g.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),g),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this)}else this._map.on("click",this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove("geoman-draw-cursor"),this.options[this._editableOption]?(this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(h=>{this.isRelevantMarker(h)&&h.pm.disable()})},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_placeCenterMarker(h){this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let g=this._hintMarker.getLatLng();this._centerMarker.setLatLng(g),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let h=this._centerMarker.getLatLng();h&&(this._layer.setLatLng(h),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(ur("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([h,g])},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let _=h;_.target=this._hintMarker,this._handleSnapping(_)}this._handleHintMarkerSnapping();let g=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(g,"Draw")},isRelevantMarker(h){return h instanceof L.CircleMarker&&!(h instanceof L.Circle)&&h.pm&&!h._pmTempLayer},_createMarker(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!h.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng(),_=new this._BaseCircleClass(g,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(_,"layerPane"),this._finishLayer(_),_.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(_),this._fireCreate(_),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(h){h.pm&&this.options.markerEditable&&h.pm.enable()},_finishShape(h){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._centerMarker.getLatLng(),_=this._defaultRadius;if(this.options[this._editableOption]){let ne=this._hintMarker.getLatLng();_=this._distanceCalculation(g,ne),this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?_=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(_=this.options[this._maxRadiusOption])}let S={...this.options.pathOptions,radius:_},M=new this._BaseCircleClass(g,S);this._setPane(M,"layerPane"),this._finishLayer(M),M.addTo(this._map.pm._getContainingLayer()),M.pm&&M.pm._updateHiddenPolyCircle(),this._fireCreate(M);let U=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(U))},_getNewDestinationOfHintMarker(){let h=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return h;let g=this._centerMarker.getLatLng(),_=this._distanceCalculation(g,h);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?h=lu(this._map,g,h,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(h=lu(this._map,g,h,this._getMaxDistanceInMeter()))}return h},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._hintMarker.getLatLng(),_=this._distanceCalculation(h,g);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._hintMarker.setLatLng(this._hintMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng))}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){var g,_;let h={};L.extend(h,this.options.templineStyle),this.options[this._editableOption]&&(h.radius=0),(g=this._layer)==null||g.setStyle(h),(_=this._hintline)==null||_.setStyle(this.options.hintlineStyle)},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))}}),_s.Circle=_s.CircleMarker.extend({initialize(h){this._map=h,this._shape="Circle",this.toolbarButtonName="drawCircle",this._BaseCircleClass=L.Circle,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(h,g){return this._map.distance(h,g)}});function yi(h){if(!h)throw new Error("coord is required");if(!Array.isArray(h)){if(h.type==="Feature"&&h.geometry!==null&&h.geometry.type==="Point")return h.geometry.coordinates;if(h.type==="Point")return h.coordinates}if(Array.isArray(h)&&h.length>=2&&!Array.isArray(h[0])&&!Array.isArray(h[1]))return h;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Ci(h){if(Array.isArray(h))return h;if(h.type==="Feature"){if(h.geometry!==null)return h.geometry.coordinates}else if(h.coordinates)return h.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function ws(h){return h.type==="Feature"?h.geometry:h}function Ps(h,g){return h.type==="FeatureCollection"?"FeatureCollection":h.type==="GeometryCollection"?"GeometryCollection":h.type==="Feature"&&h.geometry!==null?h.geometry.type:h.type}function Ko(h,g,_){if(h!==null)for(var S,M,U,ne,ae,ye,Ee,nt=0,qe=0,bt,It=h.type,tn=It==="FeatureCollection",wn=It==="Feature",Pn=tn?h.features.length:1,dr=0;dr<Pn;dr++){Ee=tn?h.features[dr].geometry:wn?h.geometry:h,bt=Ee?Ee.type==="GeometryCollection":!1,ae=bt?Ee.geometries.length:1;for(var tt=0;tt<ae;tt++){var st=0,pt=0;if(ne=bt?Ee.geometries[tt]:Ee,ne!==null){ye=ne.coordinates;var zt=ne.type;switch(nt=0,zt){case null:break;case"Point":if(g(ye,qe,dr,st,pt)===!1)return!1;qe++,st++;break;case"LineString":case"MultiPoint":for(S=0;S<ye.length;S++){if(g(ye[S],qe,dr,st,pt)===!1)return!1;qe++,zt==="MultiPoint"&&st++}zt==="LineString"&&st++;break;case"Polygon":case"MultiLineString":for(S=0;S<ye.length;S++){for(M=0;M<ye[S].length-nt;M++){if(g(ye[S][M],qe,dr,st,pt)===!1)return!1;qe++}zt==="MultiLineString"&&st++,zt==="Polygon"&&pt++}zt==="Polygon"&&st++;break;case"MultiPolygon":for(S=0;S<ye.length;S++){for(pt=0,M=0;M<ye[S].length;M++){for(U=0;U<ye[S][M].length-nt;U++){if(g(ye[S][M][U],qe,dr,st,pt)===!1)return!1;qe++}pt++}st++}break;case"GeometryCollection":for(S=0;S<ne.geometries.length;S++)if(Ko(ne.geometries[S],g)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Wr(h,g){if(h.type==="Feature")g(h,0);else if(h.type==="FeatureCollection")for(var _=0;_<h.features.length&&g(h.features[_],_)!==!1;_++);}function eo(h,g,_){var S=_;return Wr(h,function(M,U){U===0&&_===void 0?S=M:S=g(S,M,U)}),S}function Fl(h,g){var _,S,M,U,ne,ae,ye,Ee,nt,qe,bt=0,It=h.type==="FeatureCollection",tn=h.type==="Feature",wn=It?h.features.length:1;for(_=0;_<wn;_++){for(ae=It?h.features[_].geometry:tn?h.geometry:h,Ee=It?h.features[_].properties:tn?h.properties:{},nt=It?h.features[_].bbox:tn?h.bbox:void 0,qe=It?h.features[_].id:tn?h.id:void 0,ye=ae?ae.type==="GeometryCollection":!1,ne=ye?ae.geometries.length:1,M=0;M<ne;M++){if(U=ye?ae.geometries[M]:ae,U===null){if(g(null,bt,Ee,nt,qe)===!1)return!1;continue}switch(U.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(g(U,bt,Ee,nt,qe)===!1)return!1;break}case"GeometryCollection":{for(S=0;S<U.geometries.length;S++)if(g(U.geometries[S],bt,Ee,nt,qe)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}bt++}}function vo(h,g){Fl(h,function(_,S,M,U,ne){var ae=_===null?null:_.type;switch(ae){case null:case"Point":case"LineString":case"Polygon":return g(et(_,M,{bbox:U,id:ne}),S,0)===!1?!1:void 0}var ye;switch(ae){case"MultiPoint":ye="Point";break;case"MultiLineString":ye="LineString";break;case"MultiPolygon":ye="Polygon";break}for(var Ee=0;Ee<_.coordinates.length;Ee++){var nt=_.coordinates[Ee],qe={type:ye,coordinates:nt};if(g(et(qe,M),S,Ee)===!1)return!1}})}function Au(h){if(!h)throw new Error("geojson is required");var g=[];return vo(h,function(_){Ma(_,g)}),Ht(g)}function Ma(h,g){var _=[],S=h.geometry;if(S!==null){switch(S.type){case"Polygon":_=Ci(S);break;case"LineString":_=[Ci(S)]}_.forEach(function(M){var U=Qu(M,h.properties);U.forEach(function(ne){ne.id=g.length,g.push(ne)})})}}function Qu(h,g){var _=[];return h.reduce(function(S,M){var U=Pt([S,M],g);return U.bbox=vl(S,M),_.push(U),M}),_}function vl(h,g){var _=h[0],S=h[1],M=g[0],U=g[1],ne=_<M?_:M,ae=S<U?S:U,ye=_>M?_:M,Ee=S>U?S:U;return[ne,ae,ye,Ee]}var yl=Au,Ms=l(ki(),1);function ka(h,g){var _={},S=[];if(h.type==="LineString"&&(h=et(h)),g.type==="LineString"&&(g=et(g)),h.type==="Feature"&&g.type==="Feature"&&h.geometry!==null&&g.geometry!==null&&h.geometry.type==="LineString"&&g.geometry.type==="LineString"&&h.geometry.coordinates.length===2&&g.geometry.coordinates.length===2){var M=Zo(h,g);return M&&S.push(M),Ht(S)}var U=(0,Ms.default)();return U.load(yl(g)),Wr(yl(h),function(ne){Wr(U.search(ne),function(ae){var ye=Zo(ne,ae);if(ye){var Ee=Ci(ye).join(",");_[Ee]||(_[Ee]=!0,S.push(ye))}})}),Ht(S)}function Zo(h,g){var _=Ci(h),S=Ci(g);if(_.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(S.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var M=_[0][0],U=_[0][1],ne=_[1][0],ae=_[1][1],ye=S[0][0],Ee=S[0][1],nt=S[1][0],qe=S[1][1],bt=(qe-Ee)*(ne-M)-(nt-ye)*(ae-U),It=(nt-ye)*(U-Ee)-(qe-Ee)*(M-ye),tn=(ne-M)*(U-Ee)-(ae-U)*(M-ye);if(bt===0)return null;var wn=It/bt,Pn=tn/bt;if(wn>=0&&wn<=1&&Pn>=0&&Pn<=1){var dr=M+wn*(ne-M),tt=U+wn*(ae-U);return dt([dr,tt])}return null}var Do=ka,jl=l(ki(),1);function to(h,g,_){_===void 0&&(_={});var S=yi(h),M=yi(g),U=or(M[1]-S[1]),ne=or(M[0]-S[0]),ae=or(S[1]),ye=or(M[1]),Ee=Math.pow(Math.sin(U/2),2)+Math.pow(Math.sin(ne/2),2)*Math.cos(ae)*Math.cos(ye);return mn(2*Math.atan2(Math.sqrt(Ee),Math.sqrt(1-Ee)),_.units)}var yo=to;function bo(h){var g=h[0],_=h[1],S=h[2],M=h[3],U=yo(h.slice(0,2),[S,_]),ne=yo(h.slice(0,2),[g,M]);if(U>=ne){var ae=(_+M)/2;return[g,ae-(S-g)/2,S,ae+(S-g)/2]}else{var ye=(g+S)/2;return[ye-(M-_)/2,_,ye+(M-_)/2,M]}}var Ac=bo;function Rs(h){var g=[1/0,1/0,-1/0,-1/0];return Ko(h,function(_){g[0]>_[0]&&(g[0]=_[0]),g[1]>_[1]&&(g[1]=_[1]),g[2]<_[0]&&(g[2]=_[0]),g[3]<_[1]&&(g[3]=_[1])}),g}Rs.default=Rs;var Wa=Rs;function no(h,g){g===void 0&&(g={});var _=g.precision,S=g.coordinates,M=g.mutate;if(_=_==null||isNaN(_)?6:_,S=S==null||isNaN(S)?3:S,!h)throw new Error("<geojson> is required");if(typeof _!="number")throw new Error("<precision> must be a number");if(typeof S!="number")throw new Error("<coordinates> must be a number");(M===!1||M===void 0)&&(h=JSON.parse(JSON.stringify(h)));var U=Math.pow(10,_);return Ko(h,function(ne){ro(ne,U,S)}),h}function ro(h,g,_){h.length>_&&h.splice(_,h.length);for(var S=0;S<h.length;S++)h[S]=Math.round(h[S]*g)/g;return h}var Ga=no;function qa(h,g,_){if(_===void 0&&(_={}),_.final===!0)return io(h,g);var S=yi(h),M=yi(g),U=or(S[0]),ne=or(M[0]),ae=or(S[1]),ye=or(M[1]),Ee=Math.sin(ne-U)*Math.cos(ye),nt=Math.cos(ae)*Math.sin(ye)-Math.sin(ae)*Math.cos(ye)*Math.cos(ne-U);return $n(Math.atan2(Ee,nt))}function io(h,g){var _=qa(g,h);return _=(_+180)%360,_}function Hs(h,g,_,S){S===void 0&&(S={});var M=yi(h),U=or(M[0]),ne=or(M[1]),ae=or(_),ye=Bn(g,S.units),Ee=Math.asin(Math.sin(ne)*Math.cos(ye)+Math.cos(ne)*Math.sin(ye)*Math.cos(ae)),nt=U+Math.atan2(Math.sin(ae)*Math.sin(ye)*Math.cos(ne),Math.cos(ye)-Math.sin(ne)*Math.sin(Ee)),qe=$n(nt),bt=$n(Ee);return dt([qe,bt],S.properties)}function Aa(h,g,_){_===void 0&&(_={});var S=dt([1/0,1/0],{dist:1/0}),M=0;return vo(h,function(U){for(var ne=Ci(U),ae=0;ae<ne.length-1;ae++){var ye=dt(ne[ae]);ye.properties.dist=yo(g,ye,_);var Ee=dt(ne[ae+1]);Ee.properties.dist=yo(g,Ee,_);var nt=yo(ye,Ee,_),qe=Math.max(ye.properties.dist,Ee.properties.dist),bt=qa(ye,Ee),It=Hs(g,qe,bt+90,_),tn=Hs(g,qe,bt-90,_),wn=Do(Pt([It.geometry.coordinates,tn.geometry.coordinates]),Pt([ye.geometry.coordinates,Ee.geometry.coordinates])),Pn=null;wn.features.length>0&&(Pn=wn.features[0],Pn.properties.dist=yo(g,Pn,_),Pn.properties.location=M+yo(ye,Pn,_)),ye.properties.dist<S.properties.dist&&(S=ye,S.properties.index=ae,S.properties.location=M),Ee.properties.dist<S.properties.dist&&(S=Ee,S.properties.index=ae+1,S.properties.location=M+nt),Pn&&Pn.properties.dist<S.properties.dist&&(S=Pn,S.properties.index=ae),M+=nt}}),S}var Xo=Aa;function so(h,g){if(!h)throw new Error("line is required");if(!g)throw new Error("splitter is required");var _=Ps(h),S=Ps(g);if(_!=="LineString")throw new Error("line must be LineString");if(S==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(S==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var M=Ga(g,{precision:7});switch(S){case"Point":return Yt(h,M);case"MultiPoint":return wt(h,M);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return wt(h,Do(h,M))}}function wt(h,g){var _=[],S=(0,jl.default)();return vo(g,function(M){if(_.forEach(function(ae,ye){ae.id=ye}),!_.length)_=Yt(h,M).features,_.forEach(function(ae){ae.bbox||(ae.bbox=Ac(Wa(ae)))}),S.load(Ht(_));else{var U=S.search(M);if(U.features.length){var ne=Nt(M,U);_=_.filter(function(ae){return ae.id!==ne.id}),S.remove(ne),Wr(Yt(ne,M),function(ae){_.push(ae),S.insert(ae)})}}}),Ht(_)}function Yt(h,g){var _=[],S=Ci(h)[0],M=Ci(h)[h.geometry.coordinates.length-1];if(Nn(S,yi(g))||Nn(M,yi(g)))return Ht([h]);var U=(0,jl.default)(),ne=yl(h);U.load(ne);var ae=U.search(g);if(!ae.features.length)return Ht([h]);var ye=Nt(g,ae),Ee=[S],nt=eo(ne,function(qe,bt,It){var tn=Ci(bt)[1],wn=yi(g);return It===ye.id?(qe.push(wn),_.push(Pt(qe)),Nn(wn,tn)?[wn]:[wn,tn]):(qe.push(tn),qe)},Ee);return nt.length>1&&_.push(Pt(nt)),Ht(_)}function Nt(h,g){if(!g.features.length)throw new Error("lines must contain features");if(g.features.length===1)return g.features[0];var _,S=1/0;return Wr(g,function(M){var U=Xo(M,h),ne=U.properties.dist;ne<S&&(_=M,S=ne)}),_}function Nn(h,g){return h[0]===g[0]&&h[1]===g[1]}var Jn=so;function xr(h,g,_){if(_===void 0&&(_={}),!h)throw new Error("point is required");if(!g)throw new Error("polygon is required");var S=yi(h),M=ws(g),U=M.type,ne=g.bbox,ae=M.coordinates;if(ne&&Ei(S,ne)===!1)return!1;U==="Polygon"&&(ae=[ae]);for(var ye=!1,Ee=0;Ee<ae.length&&!ye;Ee++)if(Ji(S,ae[Ee][0],_.ignoreBoundary)){for(var nt=!1,qe=1;qe<ae[Ee].length&&!nt;)Ji(S,ae[Ee][qe],!_.ignoreBoundary)&&(nt=!0),qe++;nt||(ye=!0)}return ye}function Ji(h,g,_){var S=!1;g[0][0]===g[g.length-1][0]&&g[0][1]===g[g.length-1][1]&&(g=g.slice(0,g.length-1));for(var M=0,U=g.length-1;M<g.length;U=M++){var ne=g[M][0],ae=g[M][1],ye=g[U][0],Ee=g[U][1],nt=h[1]*(ne-ye)+ae*(ye-h[0])+Ee*(h[0]-ne)===0&&(ne-h[0])*(ye-h[0])<=0&&(ae-h[1])*(Ee-h[1])<=0;if(nt)return!_;var qe=ae>h[1]!=Ee>h[1]&&h[0]<(ye-ne)*(h[1]-ae)/(Ee-ae)+ne;qe&&(S=!S)}return S}function Ei(h,g){return g[0]<=h[0]&&g[1]<=h[1]&&g[2]>=h[0]&&g[3]>=h[1]}function du(h,g,_){_===void 0&&(_={});for(var S=yi(h),M=Ci(g),U=0;U<M.length-1;U++){var ne=!1;if(_.ignoreEndVertices&&(U===0&&(ne="start"),U===M.length-2&&(ne="end"),U===0&&U+1===M.length-1&&(ne="both")),_o(M[U],M[U+1],S,ne,typeof _.epsilon>"u"?null:_.epsilon))return!0}return!1}function _o(h,g,_,S,M){var U=_[0],ne=_[1],ae=h[0],ye=h[1],Ee=g[0],nt=g[1],qe=_[0]-ae,bt=_[1]-ye,It=Ee-ae,tn=nt-ye,wn=qe*tn-bt*It;if(M!==null){if(Math.abs(wn)>M)return!1}else if(wn!==0)return!1;if(S){if(S==="start")return Math.abs(It)>=Math.abs(tn)?It>0?ae<U&&U<=Ee:Ee<=U&&U<ae:tn>0?ye<ne&&ne<=nt:nt<=ne&&ne<ye;if(S==="end")return Math.abs(It)>=Math.abs(tn)?It>0?ae<=U&&U<Ee:Ee<U&&U<=ae:tn>0?ye<=ne&&ne<nt:nt<ne&&ne<=ye;if(S==="both")return Math.abs(It)>=Math.abs(tn)?It>0?ae<U&&U<Ee:Ee<U&&U<ae:tn>0?ye<ne&&ne<nt:nt<ne&&ne<ye}else return Math.abs(It)>=Math.abs(tn)?It>0?ae<=U&&U<=Ee:Ee<=U&&U<=ae:tn>0?ye<=ne&&ne<=nt:nt<=ne&&ne<=ye;return!1}var Qi=du;function Ta(h,g){var _=ws(h),S=ws(g),M=_.type,U=S.type,ne=_.coordinates,ae=S.coordinates;switch(M){case"Point":switch(U){case"Point":return Di(ne,ae);default:throw new Error("feature2 "+U+" geometry not supported")}case"MultiPoint":switch(U){case"Point":return Ya(_,S);case"MultiPoint":return Da(_,S);default:throw new Error("feature2 "+U+" geometry not supported")}case"LineString":switch(U){case"Point":return Qi(S,_,{ignoreEndVertices:!0});case"LineString":return ti(_,S);case"MultiPoint":return Oa(_,S);default:throw new Error("feature2 "+U+" geometry not supported")}case"Polygon":switch(U){case"Point":return xr(S,_,{ignoreBoundary:!0});case"LineString":return ya(_,S);case"Polygon":return Ws(_,S);case"MultiPoint":return Na(_,S);default:throw new Error("feature2 "+U+" geometry not supported")}default:throw new Error("feature1 "+M+" geometry not supported")}}function Ya(h,g){var _,S=!1;for(_=0;_<h.coordinates.length;_++)if(Di(h.coordinates[_],g.coordinates)){S=!0;break}return S}function Da(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){for(var M=S[_],U=!1,ne=0,ae=h.coordinates;ne<ae.length;ne++){var ye=ae[ne];if(Di(M,ye)){U=!0;break}}if(!U)return!1}return!0}function Oa(h,g){for(var _=!1,S=0,M=g.coordinates;S<M.length;S++){var U=M[S];if(Qi(U,h,{ignoreEndVertices:!0})&&(_=!0),!Qi(U,h))return!1}return!!_}function Na(h,g){for(var _=0,S=g.coordinates;_<S.length;_++){var M=S[_];if(!xr(M,h,{ignoreBoundary:!0}))return!1}return!0}function ti(h,g){for(var _=!1,S=0,M=g.coordinates;S<M.length;S++){var U=M[S];if(Qi({type:"Point",coordinates:U},h,{ignoreEndVertices:!0})&&(_=!0),!Qi({type:"Point",coordinates:U},h,{ignoreEndVertices:!1}))return!1}return _}function ya(h,g){var _=!1,S=0,M=Wa(h),U=Wa(g);if(!Pi(M,U))return!1;for(S;S<g.coordinates.length-1;S++){var ne=xs(g.coordinates[S],g.coordinates[S+1]);if(xr({type:"Point",coordinates:ne},h,{ignoreBoundary:!0})){_=!0;break}}return _}function Ws(h,g){if(h.type==="Feature"&&h.geometry===null||g.type==="Feature"&&g.geometry===null)return!1;var _=Wa(h),S=Wa(g);if(!Pi(_,S))return!1;for(var M=ws(g).coordinates,U=0,ne=M;U<ne.length;U++)for(var ae=ne[U],ye=0,Ee=ae;ye<Ee.length;ye++){var nt=Ee[ye];if(!xr(nt,h))return!1}return!0}function Pi(h,g){return!(h[0]>g[0]||h[2]<g[2]||h[1]>g[1]||h[3]<g[3])}function Di(h,g){return h[0]===g[0]&&h[1]===g[1]}function xs(h,g){return[(h[0]+g[0])/2,(h[1]+g[1])/2]}var Hi=l(Is()),Jo=h=>()=>h,Oo=h=>{let g=h?(_,S)=>S.minus(_).abs().isLessThanOrEqualTo(h):Jo(!1);return(_,S)=>g(_,S)?0:_.comparedTo(S)};function sa(h){let g=h?(_,S,M,U,ne)=>_.exponentiatedBy(2).isLessThanOrEqualTo(U.minus(S).exponentiatedBy(2).plus(ne.minus(M).exponentiatedBy(2)).times(h)):Jo(!1);return(_,S,M)=>{let U=_.x,ne=_.y,ae=M.x,ye=M.y,Ee=ne.minus(ye).times(S.x.minus(ae)).minus(U.minus(ae).times(S.y.minus(ye)));return g(Ee,U,ne,ae,ye)?0:Ee.comparedTo(0)}}var ec=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ia=Math.ceil,ks=Math.floor,$i="[BigNumber Error] ",oo=$i+"Number primitive has more than 15 significant digits: ",No=1e14,pr=14,Ka=9007199254740991,Za=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],ba=1e7,wo=1e9;function ih(h){var g,_,S,M=tt.prototype={constructor:tt,toString:null,valueOf:null},U=new tt(1),ne=20,ae=4,ye=-7,Ee=21,nt=-1e7,qe=1e7,bt=!1,It=1,tn=0,wn={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},Pn="0123456789abcdefghijklmnopqrstuvwxyz",dr=!0;function tt(be,ke){var je,Fe,Ue,We,ct,ht,vt,Mt,kt=this;if(!(kt instanceof tt))return new tt(be,ke);if(ke==null){if(be&&be._isBigNumber===!0){kt.s=be.s,!be.c||be.e>qe?kt.c=kt.e=null:be.e<nt?kt.c=[kt.e=0]:(kt.e=be.e,kt.c=be.c.slice());return}if((ht=typeof be=="number")&&be*0==0){if(kt.s=1/be<0?(be=-be,-1):1,be===~~be){for(We=0,ct=be;ct>=10;ct/=10,We++);We>qe?kt.c=kt.e=null:(kt.e=We,kt.c=[be]);return}Mt=String(be)}else{if(!ec.test(Mt=String(be)))return S(kt,Mt,ht);kt.s=Mt.charCodeAt(0)==45?(Mt=Mt.slice(1),-1):1}(We=Mt.indexOf("."))>-1&&(Mt=Mt.replace(".","")),(ct=Mt.search(/e/i))>0?(We<0&&(We=ct),We+=+Mt.slice(ct+1),Mt=Mt.substring(0,ct)):We<0&&(We=Mt.length)}else{if(u(ke,2,Pn.length,"Base"),ke==10&&dr)return kt=new tt(be),St(kt,ne+kt.e+1,ae);if(Mt=String(be),ht=typeof be=="number"){if(be*0!=0)return S(kt,Mt,ht,ke);if(kt.s=1/be<0?(Mt=Mt.slice(1),-1):1,tt.DEBUG&&Mt.replace(/^0\.0*|\./,"").length>15)throw Error(oo+be)}else kt.s=Mt.charCodeAt(0)===45?(Mt=Mt.slice(1),-1):1;for(je=Pn.slice(0,ke),We=ct=0,vt=Mt.length;ct<vt;ct++)if(je.indexOf(Fe=Mt.charAt(ct))<0){if(Fe=="."){if(ct>We){We=vt;continue}}else if(!Ue&&(Mt==Mt.toUpperCase()&&(Mt=Mt.toLowerCase())||Mt==Mt.toLowerCase()&&(Mt=Mt.toUpperCase()))){Ue=!0,ct=-1,We=0;continue}return S(kt,String(be),ht,ke)}ht=!1,Mt=_(Mt,ke,10,kt.s),(We=Mt.indexOf("."))>-1?Mt=Mt.replace(".",""):We=Mt.length}for(ct=0;Mt.charCodeAt(ct)===48;ct++);for(vt=Mt.length;Mt.charCodeAt(--vt)===48;);if(Mt=Mt.slice(ct,++vt)){if(vt-=ct,ht&&tt.DEBUG&&vt>15&&(be>Ka||be!==ks(be)))throw Error(oo+kt.s*be);if((We=We-ct-1)>qe)kt.c=kt.e=null;else if(We<nt)kt.c=[kt.e=0];else{if(kt.e=We,kt.c=[],ct=(We+1)%pr,We<0&&(ct+=pr),ct<vt){for(ct&&kt.c.push(+Mt.slice(0,ct)),vt-=pr;ct<vt;)kt.c.push(+Mt.slice(ct,ct+=pr));ct=pr-(Mt=Mt.slice(ct)).length}else ct-=vt;for(;ct--;Mt+="0");kt.c.push(+Mt)}}else kt.c=[kt.e=0]}tt.clone=ih,tt.ROUND_UP=0,tt.ROUND_DOWN=1,tt.ROUND_CEIL=2,tt.ROUND_FLOOR=3,tt.ROUND_HALF_UP=4,tt.ROUND_HALF_DOWN=5,tt.ROUND_HALF_EVEN=6,tt.ROUND_HALF_CEIL=7,tt.ROUND_HALF_FLOOR=8,tt.EUCLID=9,tt.config=tt.set=function(be){var ke,je;if(be!=null)if(typeof be=="object"){if(be.hasOwnProperty(ke="DECIMAL_PLACES")&&(je=be[ke],u(je,0,wo,ke),ne=je),be.hasOwnProperty(ke="ROUNDING_MODE")&&(je=be[ke],u(je,0,8,ke),ae=je),be.hasOwnProperty(ke="EXPONENTIAL_AT")&&(je=be[ke],je&&je.pop?(u(je[0],-1e9,0,ke),u(je[1],0,wo,ke),ye=je[0],Ee=je[1]):(u(je,-1e9,wo,ke),ye=-(Ee=je<0?-je:je))),be.hasOwnProperty(ke="RANGE"))if(je=be[ke],je&&je.pop)u(je[0],-1e9,-1,ke),u(je[1],1,wo,ke),nt=je[0],qe=je[1];else if(u(je,-1e9,wo,ke),je)nt=-(qe=je<0?-je:je);else throw Error($i+ke+" cannot be zero: "+je);if(be.hasOwnProperty(ke="CRYPTO"))if(je=be[ke],je===!!je)if(je)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))bt=je;else throw bt=!je,Error($i+"crypto unavailable");else bt=je;else throw Error($i+ke+" not true or false: "+je);if(be.hasOwnProperty(ke="MODULO_MODE")&&(je=be[ke],u(je,0,9,ke),It=je),be.hasOwnProperty(ke="POW_PRECISION")&&(je=be[ke],u(je,0,wo,ke),tn=je),be.hasOwnProperty(ke="FORMAT"))if(je=be[ke],typeof je=="object")wn=je;else throw Error($i+ke+" not an object: "+je);if(be.hasOwnProperty(ke="ALPHABET"))if(je=be[ke],typeof je=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(je))dr=je.slice(0,10)=="0123456789",Pn=je;else throw Error($i+ke+" invalid: "+je)}else throw Error($i+"Object expected: "+be);return{DECIMAL_PLACES:ne,ROUNDING_MODE:ae,EXPONENTIAL_AT:[ye,Ee],RANGE:[nt,qe],CRYPTO:bt,MODULO_MODE:It,POW_PRECISION:tn,FORMAT:wn,ALPHABET:Pn}},tt.isBigNumber=function(be){if(!be||be._isBigNumber!==!0)return!1;if(!tt.DEBUG)return!0;var ke,je,Fe=be.c,Ue=be.e,We=be.s;e:if({}.toString.call(Fe)=="[object Array]"){if((We===1||We===-1)&&Ue>=-1e9&&Ue<=wo&&Ue===ks(Ue)){if(Fe[0]===0){if(Ue===0&&Fe.length===1)return!0;break e}if(ke=(Ue+1)%pr,ke<1&&(ke+=pr),String(Fe[0]).length==ke){for(ke=0;ke<Fe.length;ke++)if(je=Fe[ke],je<0||je>=No||je!==ks(je))break e;if(je!==0)return!0}}}else if(Fe===null&&Ue===null&&(We===null||We===1||We===-1))return!0;throw Error($i+"Invalid BigNumber: "+be)},tt.maximum=tt.max=function(){return pt(arguments,-1)},tt.minimum=tt.min=function(){return pt(arguments,1)},tt.random=function(){var be=9007199254740992,ke=Math.random()*be&2097151?function(){return ks(Math.random()*be)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(je){var Fe,Ue,We,ct,ht,vt=0,Mt=[],kt=new tt(U);if(je==null?je=ne:u(je,0,wo),ct=Ia(je/pr),bt)if(crypto.getRandomValues){for(Fe=crypto.getRandomValues(new Uint32Array(ct*=2));vt<ct;)ht=Fe[vt]*131072+(Fe[vt+1]>>>11),ht>=9e15?(Ue=crypto.getRandomValues(new Uint32Array(2)),Fe[vt]=Ue[0],Fe[vt+1]=Ue[1]):(Mt.push(ht%1e14),vt+=2);vt=ct/2}else if(crypto.randomBytes){for(Fe=crypto.randomBytes(ct*=7);vt<ct;)ht=(Fe[vt]&31)*281474976710656+Fe[vt+1]*1099511627776+Fe[vt+2]*4294967296+Fe[vt+3]*16777216+(Fe[vt+4]<<16)+(Fe[vt+5]<<8)+Fe[vt+6],ht>=9e15?crypto.randomBytes(7).copy(Fe,vt):(Mt.push(ht%1e14),vt+=7);vt=ct/7}else throw bt=!1,Error($i+"crypto unavailable");if(!bt)for(;vt<ct;)ht=ke(),ht<9e15&&(Mt[vt++]=ht%1e14);for(ct=Mt[--vt],je%=pr,ct&&je&&(ht=Za[pr-je],Mt[vt]=ks(ct/ht)*ht);Mt[vt]===0;Mt.pop(),vt--);if(vt<0)Mt=[We=0];else{for(We=-1;Mt[0]===0;Mt.splice(0,1),We-=pr);for(vt=1,ht=Mt[0];ht>=10;ht/=10,vt++);vt<pr&&(We-=pr-vt)}return kt.e=We,kt.c=Mt,kt}}(),tt.sum=function(){for(var be=1,ke=arguments,je=new tt(ke[0]);be<ke.length;)je=je.plus(ke[be++]);return je},_=function(){var be="0123456789";function ke(je,Fe,Ue,We){for(var ct,ht=[0],vt,Mt=0,kt=je.length;Mt<kt;){for(vt=ht.length;vt--;ht[vt]*=Fe);for(ht[0]+=We.indexOf(je.charAt(Mt++)),ct=0;ct<ht.length;ct++)ht[ct]>Ue-1&&(ht[ct+1]==null&&(ht[ct+1]=0),ht[ct+1]+=ht[ct]/Ue|0,ht[ct]%=Ue)}return ht.reverse()}return function(je,Fe,Ue,We,ct){var ht,vt,Mt,kt,hn,Vn,qn,nr,_i=je.indexOf("."),Oi=ne,ni=ae;for(_i>=0&&(kt=tn,tn=0,je=je.replace(".",""),nr=new tt(Fe),Vn=nr.pow(je.length-_i),tn=kt,nr.c=ke(H(qs(Vn.c),Vn.e,"0"),10,Ue,be),nr.e=nr.c.length),qn=ke(je,Fe,Ue,ct?(ht=Pn,be):(ht=be,Pn)),Mt=kt=qn.length;qn[--kt]==0;qn.pop());if(!qn[0])return ht.charAt(0);if(_i<0?--Mt:(Vn.c=qn,Vn.e=Mt,Vn.s=We,Vn=g(Vn,nr,Oi,ni,Ue),qn=Vn.c,hn=Vn.r,Mt=Vn.e),vt=Mt+Oi+1,_i=qn[vt],kt=Ue/2,hn=hn||vt<0||qn[vt+1]!=null,hn=ni<4?(_i!=null||hn)&&(ni==0||ni==(Vn.s<0?3:2)):_i>kt||_i==kt&&(ni==4||hn||ni==6&&qn[vt-1]&1||ni==(Vn.s<0?8:7)),vt<1||!qn[0])je=hn?H(ht.charAt(1),-Oi,ht.charAt(0)):ht.charAt(0);else{if(qn.length=vt,hn)for(--Ue;++qn[--vt]>Ue;)qn[vt]=0,vt||(++Mt,qn=[1].concat(qn));for(kt=qn.length;!qn[--kt];);for(_i=0,je="";_i<=kt;je+=ht.charAt(qn[_i++]));je=H(je,Mt,ht.charAt(0))}return je}}(),g=function(){function be(Fe,Ue,We){var ct,ht,vt,Mt,kt=0,hn=Fe.length,Vn=Ue%ba,qn=Ue/ba|0;for(Fe=Fe.slice();hn--;)vt=Fe[hn]%ba,Mt=Fe[hn]/ba|0,ct=qn*vt+Mt*Vn,ht=Vn*vt+ct%ba*ba+kt,kt=(ht/We|0)+(ct/ba|0)+qn*Mt,Fe[hn]=ht%We;return kt&&(Fe=[kt].concat(Fe)),Fe}function ke(Fe,Ue,We,ct){var ht,vt;if(We!=ct)vt=We>ct?1:-1;else for(ht=vt=0;ht<We;ht++)if(Fe[ht]!=Ue[ht]){vt=Fe[ht]>Ue[ht]?1:-1;break}return vt}function je(Fe,Ue,We,ct){for(var ht=0;We--;)Fe[We]-=ht,ht=Fe[We]<Ue[We]?1:0,Fe[We]=ht*ct+Fe[We]-Ue[We];for(;!Fe[0]&&Fe.length>1;Fe.splice(0,1));}return function(Fe,Ue,We,ct,ht){var vt,Mt,kt,hn,Vn,qn,nr,_i,Oi,ni,Wi,Ro,nc,Ra,Id,_l,Dc,Fa=Fe.s==Ue.s?1:-1,lo=Fe.c,Ls=Ue.c;if(!lo||!lo[0]||!Ls||!Ls[0])return new tt(!Fe.s||!Ue.s||(lo?Ls&&lo[0]==Ls[0]:!Ls)?NaN:lo&&lo[0]==0||!Ls?Fa*0:Fa/0);for(_i=new tt(Fa),Oi=_i.c=[],Mt=Fe.e-Ue.e,Fa=We+Mt+1,ht||(ht=No,Mt=Gs(Fe.e/pr)-Gs(Ue.e/pr),Fa=Fa/pr|0),kt=0;Ls[kt]==(lo[kt]||0);kt++);if(Ls[kt]>(lo[kt]||0)&&Mt--,Fa<0)Oi.push(1),hn=!0;else{for(Ra=lo.length,_l=Ls.length,kt=0,Fa+=2,Vn=ks(ht/(Ls[0]+1)),Vn>1&&(Ls=be(Ls,Vn,ht),lo=be(lo,Vn,ht),_l=Ls.length,Ra=lo.length),nc=_l,ni=lo.slice(0,_l),Wi=ni.length;Wi<_l;ni[Wi++]=0);Dc=Ls.slice(),Dc=[0].concat(Dc),Id=Ls[0],Ls[1]>=ht/2&&Id++;do{if(Vn=0,vt=ke(Ls,ni,_l,Wi),vt<0){if(Ro=ni[0],_l!=Wi&&(Ro=Ro*ht+(ni[1]||0)),Vn=ks(Ro/Id),Vn>1)for(Vn>=ht&&(Vn=ht-1),qn=be(Ls,Vn,ht),nr=qn.length,Wi=ni.length;ke(qn,ni,nr,Wi)==1;)Vn--,je(qn,_l<nr?Dc:Ls,nr,ht),nr=qn.length,vt=1;else Vn==0&&(vt=Vn=1),qn=Ls.slice(),nr=qn.length;if(nr<Wi&&(qn=[0].concat(qn)),je(ni,qn,Wi,ht),Wi=ni.length,vt==-1)for(;ke(Ls,ni,_l,Wi)<1;)Vn++,je(ni,_l<Wi?Dc:Ls,Wi,ht),Wi=ni.length}else vt===0&&(Vn++,ni=[0]);Oi[kt++]=Vn,ni[0]?ni[Wi++]=lo[nc]||0:(ni=[lo[nc]],Wi=1)}while((nc++<Ra||ni[0]!=null)&&Fa--);hn=ni[0]!=null,Oi[0]||Oi.splice(0,1)}if(ht==No){for(kt=1,Fa=Oi[0];Fa>=10;Fa/=10,kt++);St(_i,We+(_i.e=kt+Mt*pr-1)+1,ct,hn)}else _i.e=Mt,_i.r=+hn;return _i}}();function st(be,ke,je,Fe){var Ue,We,ct,ht,vt;if(je==null?je=ae:u(je,0,8),!be.c)return be.toString();if(Ue=be.c[0],ct=be.e,ke==null)vt=qs(be.c),vt=Fe==1||Fe==2&&(ct<=ye||ct>=Ee)?P(vt,ct):H(vt,ct,"0");else if(be=St(new tt(be),ke,je),We=be.e,vt=qs(be.c),ht=vt.length,Fe==1||Fe==2&&(ke<=We||We<=ye)){for(;ht<ke;vt+="0",ht++);vt=P(vt,We)}else if(ke-=ct,vt=H(vt,We,"0"),We+1>ht){if(--ke>0)for(vt+=".";ke--;vt+="0");}else if(ke+=We-ht,ke>0)for(We+1==ht&&(vt+=".");ke--;vt+="0");return be.s<0&&Ue?"-"+vt:vt}function pt(be,ke){for(var je,Fe,Ue=1,We=new tt(be[0]);Ue<be.length;Ue++)Fe=new tt(be[Ue]),(!Fe.s||(je=_a(We,Fe))===ke||je===0&&We.s===ke)&&(We=Fe);return We}function zt(be,ke,je){for(var Fe=1,Ue=ke.length;!ke[--Ue];ke.pop());for(Ue=ke[0];Ue>=10;Ue/=10,Fe++);return(je=Fe+je*pr-1)>qe?be.c=be.e=null:je<nt?be.c=[be.e=0]:(be.e=je,be.c=ke),be}S=function(){var be=/^(-?)0([xbo])(?=\w[\w.]*$)/i,ke=/^([^.]+)\.$/,je=/^\.([^.]+)$/,Fe=/^-?(Infinity|NaN)$/,Ue=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(We,ct,ht,vt){var Mt,kt=ht?ct:ct.replace(Ue,"");if(Fe.test(kt))We.s=isNaN(kt)?null:kt<0?-1:1;else{if(!ht&&(kt=kt.replace(be,function(hn,Vn,qn){return Mt=(qn=qn.toLowerCase())=="x"?16:qn=="b"?2:8,!vt||vt==Mt?Vn:hn}),vt&&(Mt=vt,kt=kt.replace(ke,"$1").replace(je,"0.$1")),ct!=kt))return new tt(kt,Mt);if(tt.DEBUG)throw Error($i+"Not a"+(vt?" base "+vt:"")+" number: "+ct);We.s=null}We.c=We.e=null}}();function St(be,ke,je,Fe){var Ue,We,ct,ht,vt,Mt,kt,hn=be.c,Vn=Za;if(hn){e:{for(Ue=1,ht=hn[0];ht>=10;ht/=10,Ue++);if(We=ke-Ue,We<0)We+=pr,ct=ke,vt=hn[Mt=0],kt=ks(vt/Vn[Ue-ct-1]%10);else if(Mt=Ia((We+1)/pr),Mt>=hn.length)if(Fe){for(;hn.length<=Mt;hn.push(0));vt=kt=0,Ue=1,We%=pr,ct=We-pr+1}else break e;else{for(vt=ht=hn[Mt],Ue=1;ht>=10;ht/=10,Ue++);We%=pr,ct=We-pr+Ue,kt=ct<0?0:ks(vt/Vn[Ue-ct-1]%10)}if(Fe=Fe||ke<0||hn[Mt+1]!=null||(ct<0?vt:vt%Vn[Ue-ct-1]),Fe=je<4?(kt||Fe)&&(je==0||je==(be.s<0?3:2)):kt>5||kt==5&&(je==4||Fe||je==6&&(We>0?ct>0?vt/Vn[Ue-ct]:0:hn[Mt-1])%10&1||je==(be.s<0?8:7)),ke<1||!hn[0])return hn.length=0,Fe?(ke-=be.e+1,hn[0]=Vn[(pr-ke%pr)%pr],be.e=-ke||0):hn[0]=be.e=0,be;if(We==0?(hn.length=Mt,ht=1,Mt--):(hn.length=Mt+1,ht=Vn[pr-We],hn[Mt]=ct>0?ks(vt/Vn[Ue-ct]%Vn[ct])*ht:0),Fe)for(;;)if(Mt==0){for(We=1,ct=hn[0];ct>=10;ct/=10,We++);for(ct=hn[0]+=ht,ht=1;ct>=10;ct/=10,ht++);We!=ht&&(be.e++,hn[0]==No&&(hn[0]=1));break}else{if(hn[Mt]+=ht,hn[Mt]!=No)break;hn[Mt--]=0,ht=1}for(We=hn.length;hn[--We]===0;hn.pop());}be.e>qe?be.c=be.e=null:be.e<nt&&(be.c=[be.e=0])}return be}function Rt(be){var ke,je=be.e;return je===null?be.toString():(ke=qs(be.c),ke=je<=ye||je>=Ee?P(ke,je):H(ke,je,"0"),be.s<0?"-"+ke:ke)}return M.absoluteValue=M.abs=function(){var be=new tt(this);return be.s<0&&(be.s=1),be},M.comparedTo=function(be,ke){return _a(this,new tt(be,ke))},M.decimalPlaces=M.dp=function(be,ke){var je,Fe,Ue,We=this;if(be!=null)return u(be,0,wo),ke==null?ke=ae:u(ke,0,8),St(new tt(We),be+We.e+1,ke);if(!(je=We.c))return null;if(Fe=((Ue=je.length-1)-Gs(this.e/pr))*pr,Ue=je[Ue])for(;Ue%10==0;Ue/=10,Fe--);return Fe<0&&(Fe=0),Fe},M.dividedBy=M.div=function(be,ke){return g(this,new tt(be,ke),ne,ae)},M.dividedToIntegerBy=M.idiv=function(be,ke){return g(this,new tt(be,ke),0,1)},M.exponentiatedBy=M.pow=function(be,ke){var je,Fe,Ue,We,ct,ht,vt,Mt,kt,hn=this;if(be=new tt(be),be.c&&!be.isInteger())throw Error($i+"Exponent not an integer: "+Rt(be));if(ke!=null&&(ke=new tt(ke)),ht=be.e>14,!hn.c||!hn.c[0]||hn.c[0]==1&&!hn.e&&hn.c.length==1||!be.c||!be.c[0])return kt=new tt(Math.pow(+Rt(hn),ht?be.s*(2-y(be)):+Rt(be))),ke?kt.mod(ke):kt;if(vt=be.s<0,ke){if(ke.c?!ke.c[0]:!ke.s)return new tt(NaN);Fe=!vt&&hn.isInteger()&&ke.isInteger(),Fe&&(hn=hn.mod(ke))}else{if(be.e>9&&(hn.e>0||hn.e<-1||(hn.e==0?hn.c[0]>1||ht&&hn.c[1]>=24e7:hn.c[0]<8e13||ht&&hn.c[0]<=9999975e7)))return We=hn.s<0&&y(be)?-0:0,hn.e>-1&&(We=1/We),new tt(vt?1/We:We);tn&&(We=Ia(tn/pr+2))}for(ht?(je=new tt(.5),vt&&(be.s=1),Mt=y(be)):(Ue=Math.abs(+Rt(be)),Mt=Ue%2),kt=new tt(U);;){if(Mt){if(kt=kt.times(hn),!kt.c)break;We?kt.c.length>We&&(kt.c.length=We):Fe&&(kt=kt.mod(ke))}if(Ue){if(Ue=ks(Ue/2),Ue===0)break;Mt=Ue%2}else if(be=be.times(je),St(be,be.e+1,1),be.e>14)Mt=y(be);else{if(Ue=+Rt(be),Ue===0)break;Mt=Ue%2}hn=hn.times(hn),We?hn.c&&hn.c.length>We&&(hn.c.length=We):Fe&&(hn=hn.mod(ke))}return Fe?kt:(vt&&(kt=U.div(kt)),ke?kt.mod(ke):We?St(kt,tn,ae,ct):kt)},M.integerValue=function(be){var ke=new tt(this);return be==null?be=ae:u(be,0,8),St(ke,ke.e+1,be)},M.isEqualTo=M.eq=function(be,ke){return _a(this,new tt(be,ke))===0},M.isFinite=function(){return!!this.c},M.isGreaterThan=M.gt=function(be,ke){return _a(this,new tt(be,ke))>0},M.isGreaterThanOrEqualTo=M.gte=function(be,ke){return(ke=_a(this,new tt(be,ke)))===1||ke===0},M.isInteger=function(){return!!this.c&&Gs(this.e/pr)>this.c.length-2},M.isLessThan=M.lt=function(be,ke){return _a(this,new tt(be,ke))<0},M.isLessThanOrEqualTo=M.lte=function(be,ke){return(ke=_a(this,new tt(be,ke)))===-1||ke===0},M.isNaN=function(){return!this.s},M.isNegative=function(){return this.s<0},M.isPositive=function(){return this.s>0},M.isZero=function(){return!!this.c&&this.c[0]==0},M.minus=function(be,ke){var je,Fe,Ue,We,ct=this,ht=ct.s;if(be=new tt(be,ke),ke=be.s,!ht||!ke)return new tt(NaN);if(ht!=ke)return be.s=-ke,ct.plus(be);var vt=ct.e/pr,Mt=be.e/pr,kt=ct.c,hn=be.c;if(!vt||!Mt){if(!kt||!hn)return kt?(be.s=-ke,be):new tt(hn?ct:NaN);if(!kt[0]||!hn[0])return hn[0]?(be.s=-ke,be):new tt(kt[0]?ct:ae==3?-0:0)}if(vt=Gs(vt),Mt=Gs(Mt),kt=kt.slice(),ht=vt-Mt){for((We=ht<0)?(ht=-ht,Ue=kt):(Mt=vt,Ue=hn),Ue.reverse(),ke=ht;ke--;Ue.push(0));Ue.reverse()}else for(Fe=(We=(ht=kt.length)<(ke=hn.length))?ht:ke,ht=ke=0;ke<Fe;ke++)if(kt[ke]!=hn[ke]){We=kt[ke]<hn[ke];break}if(We&&(Ue=kt,kt=hn,hn=Ue,be.s=-be.s),ke=(Fe=hn.length)-(je=kt.length),ke>0)for(;ke--;kt[je++]=0);for(ke=No-1;Fe>ht;){if(kt[--Fe]<hn[Fe]){for(je=Fe;je&&!kt[--je];kt[je]=ke);--kt[je],kt[Fe]+=No}kt[Fe]-=hn[Fe]}for(;kt[0]==0;kt.splice(0,1),--Mt);return kt[0]?zt(be,kt,Mt):(be.s=ae==3?-1:1,be.c=[be.e=0],be)},M.modulo=M.mod=function(be,ke){var je,Fe,Ue=this;return be=new tt(be,ke),!Ue.c||!be.s||be.c&&!be.c[0]?new tt(NaN):!be.c||Ue.c&&!Ue.c[0]?new tt(Ue):(It==9?(Fe=be.s,be.s=1,je=g(Ue,be,0,3),be.s=Fe,je.s*=Fe):je=g(Ue,be,0,It),be=Ue.minus(je.times(be)),!be.c[0]&&It==1&&(be.s=Ue.s),be)},M.multipliedBy=M.times=function(be,ke){var je,Fe,Ue,We,ct,ht,vt,Mt,kt,hn,Vn,qn,nr,_i,Oi,ni=this,Wi=ni.c,Ro=(be=new tt(be,ke)).c;if(!Wi||!Ro||!Wi[0]||!Ro[0])return!ni.s||!be.s||Wi&&!Wi[0]&&!Ro||Ro&&!Ro[0]&&!Wi?be.c=be.e=be.s=null:(be.s*=ni.s,!Wi||!Ro?be.c=be.e=null:(be.c=[0],be.e=0)),be;for(Fe=Gs(ni.e/pr)+Gs(be.e/pr),be.s*=ni.s,vt=Wi.length,hn=Ro.length,vt<hn&&(nr=Wi,Wi=Ro,Ro=nr,Ue=vt,vt=hn,hn=Ue),Ue=vt+hn,nr=[];Ue--;nr.push(0));for(_i=No,Oi=ba,Ue=hn;--Ue>=0;){for(je=0,Vn=Ro[Ue]%Oi,qn=Ro[Ue]/Oi|0,ct=vt,We=Ue+ct;We>Ue;)Mt=Wi[--ct]%Oi,kt=Wi[ct]/Oi|0,ht=qn*Mt+kt*Vn,Mt=Vn*Mt+ht%Oi*Oi+nr[We]+je,je=(Mt/_i|0)+(ht/Oi|0)+qn*kt,nr[We--]=Mt%_i;nr[We]=je}return je?++Fe:nr.splice(0,1),zt(be,nr,Fe)},M.negated=function(){var be=new tt(this);return be.s=-be.s||null,be},M.plus=function(be,ke){var je,Fe=this,Ue=Fe.s;if(be=new tt(be,ke),ke=be.s,!Ue||!ke)return new tt(NaN);if(Ue!=ke)return be.s=-ke,Fe.minus(be);var We=Fe.e/pr,ct=be.e/pr,ht=Fe.c,vt=be.c;if(!We||!ct){if(!ht||!vt)return new tt(Ue/0);if(!ht[0]||!vt[0])return vt[0]?be:new tt(ht[0]?Fe:Ue*0)}if(We=Gs(We),ct=Gs(ct),ht=ht.slice(),Ue=We-ct){for(Ue>0?(ct=We,je=vt):(Ue=-Ue,je=ht),je.reverse();Ue--;je.push(0));je.reverse()}for(Ue=ht.length,ke=vt.length,Ue-ke<0&&(je=vt,vt=ht,ht=je,ke=Ue),Ue=0;ke;)Ue=(ht[--ke]=ht[ke]+vt[ke]+Ue)/No|0,ht[ke]=No===ht[ke]?0:ht[ke]%No;return Ue&&(ht=[Ue].concat(ht),++ct),zt(be,ht,ct)},M.precision=M.sd=function(be,ke){var je,Fe,Ue,We=this;if(be!=null&&be!==!!be)return u(be,1,wo),ke==null?ke=ae:u(ke,0,8),St(new tt(We),be,ke);if(!(je=We.c))return null;if(Ue=je.length-1,Fe=Ue*pr+1,Ue=je[Ue]){for(;Ue%10==0;Ue/=10,Fe--);for(Ue=je[0];Ue>=10;Ue/=10,Fe++);}return be&&We.e+1>Fe&&(Fe=We.e+1),Fe},M.shiftedBy=function(be){return u(be,-9007199254740991,Ka),this.times("1e"+be)},M.squareRoot=M.sqrt=function(){var be,ke,je,Fe,Ue,We=this,ct=We.c,ht=We.s,vt=We.e,Mt=ne+4,kt=new tt("0.5");if(ht!==1||!ct||!ct[0])return new tt(!ht||ht<0&&(!ct||ct[0])?NaN:ct?We:1/0);if(ht=Math.sqrt(+Rt(We)),ht==0||ht==1/0?(ke=qs(ct),(ke.length+vt)%2==0&&(ke+="0"),ht=Math.sqrt(+ke),vt=Gs((vt+1)/2)-(vt<0||vt%2),ht==1/0?ke="5e"+vt:(ke=ht.toExponential(),ke=ke.slice(0,ke.indexOf("e")+1)+vt),je=new tt(ke)):je=new tt(ht+""),je.c[0]){for(vt=je.e,ht=vt+Mt,ht<3&&(ht=0);;)if(Ue=je,je=kt.times(Ue.plus(g(We,Ue,Mt,1))),qs(Ue.c).slice(0,ht)===(ke=qs(je.c)).slice(0,ht))if(je.e<vt&&--ht,ke=ke.slice(ht-3,ht+1),ke=="9999"||!Fe&&ke=="4999"){if(!Fe&&(St(Ue,Ue.e+ne+2,0),Ue.times(Ue).eq(We))){je=Ue;break}Mt+=4,ht+=4,Fe=1}else{(!+ke||!+ke.slice(1)&&ke.charAt(0)=="5")&&(St(je,je.e+ne+2,1),be=!je.times(je).eq(We));break}}return St(je,je.e+ne+1,ae,be)},M.toExponential=function(be,ke){return be!=null&&(u(be,0,wo),be++),st(this,be,ke,1)},M.toFixed=function(be,ke){return be!=null&&(u(be,0,wo),be=be+this.e+1),st(this,be,ke)},M.toFormat=function(be,ke,je){var Fe,Ue=this;if(je==null)be!=null&&ke&&typeof ke=="object"?(je=ke,ke=null):be&&typeof be=="object"?(je=be,be=ke=null):je=wn;else if(typeof je!="object")throw Error($i+"Argument not an object: "+je);if(Fe=Ue.toFixed(be,ke),Ue.c){var We,ct=Fe.split("."),ht=+je.groupSize,vt=+je.secondaryGroupSize,Mt=je.groupSeparator||"",kt=ct[0],hn=ct[1],Vn=Ue.s<0,qn=Vn?kt.slice(1):kt,nr=qn.length;if(vt&&(We=ht,ht=vt,vt=We,nr-=We),ht>0&&nr>0){for(We=nr%ht||ht,kt=qn.substr(0,We);We<nr;We+=ht)kt+=Mt+qn.substr(We,ht);vt>0&&(kt+=Mt+qn.slice(We)),Vn&&(kt="-"+kt)}Fe=hn?kt+(je.decimalSeparator||"")+((vt=+je.fractionGroupSize)?hn.replace(new RegExp("\\d{"+vt+"}\\B","g"),"$&"+(je.fractionGroupSeparator||"")):hn):kt}return(je.prefix||"")+Fe+(je.suffix||"")},M.toFraction=function(be){var ke,je,Fe,Ue,We,ct,ht,vt,Mt,kt,hn,Vn,qn=this,nr=qn.c;if(be!=null&&(ht=new tt(be),!ht.isInteger()&&(ht.c||ht.s!==1)||ht.lt(U)))throw Error($i+"Argument "+(ht.isInteger()?"out of range: ":"not an integer: ")+Rt(ht));if(!nr)return new tt(qn);for(ke=new tt(U),Mt=je=new tt(U),Fe=vt=new tt(U),Vn=qs(nr),We=ke.e=Vn.length-qn.e-1,ke.c[0]=Za[(ct=We%pr)<0?pr+ct:ct],be=!be||ht.comparedTo(ke)>0?We>0?ke:Mt:ht,ct=qe,qe=1/0,ht=new tt(Vn),vt.c[0]=0;kt=g(ht,ke,0,1),Ue=je.plus(kt.times(Fe)),Ue.comparedTo(be)!=1;)je=Fe,Fe=Ue,Mt=vt.plus(kt.times(Ue=Mt)),vt=Ue,ke=ht.minus(kt.times(Ue=ke)),ht=Ue;return Ue=g(be.minus(je),Fe,0,1),vt=vt.plus(Ue.times(Mt)),je=je.plus(Ue.times(Fe)),vt.s=Mt.s=qn.s,We=We*2,hn=g(Mt,Fe,We,ae).minus(qn).abs().comparedTo(g(vt,je,We,ae).minus(qn).abs())<1?[Mt,Fe]:[vt,je],qe=ct,hn},M.toNumber=function(){return+Rt(this)},M.toPrecision=function(be,ke){return be!=null&&u(be,1,wo),st(this,be,ke,2)},M.toString=function(be){var ke,je=this,Fe=je.s,Ue=je.e;return Ue===null?Fe?(ke="Infinity",Fe<0&&(ke="-"+ke)):ke="NaN":(be==null?ke=Ue<=ye||Ue>=Ee?P(qs(je.c),Ue):H(qs(je.c),Ue,"0"):be===10&&dr?(je=St(new tt(je),ne+Ue+1,ae),ke=H(qs(je.c),je.e,"0")):(u(be,2,Pn.length,"Base"),ke=_(H(qs(je.c),Ue,"0"),10,be,Fe,!0)),Fe<0&&je.c[0]&&(ke="-"+ke)),ke},M.valueOf=M.toJSON=function(){return Rt(this)},M._isBigNumber=!0,M[Symbol.toStringTag]="BigNumber",M[Symbol.for("nodejs.util.inspect.custom")]=M.valueOf,h!=null&&tt.set(h),tt}function Gs(h){var g=h|0;return h>0||h===g?g:g-1}function qs(h){for(var g,_,S=1,M=h.length,U=h[0]+"";S<M;){for(g=h[S++]+"",_=pr-g.length;_--;g="0"+g);U+=g}for(M=U.length;U.charCodeAt(--M)===48;);return U.slice(0,M+1||1)}function _a(h,g){var _,S,M=h.c,U=g.c,ne=h.s,ae=g.s,ye=h.e,Ee=g.e;if(!ne||!ae)return null;if(_=M&&!M[0],S=U&&!U[0],_||S)return _?S?0:-ae:ne;if(ne!=ae)return ne;if(_=ne<0,S=ye==Ee,!M||!U)return S?0:!M^_?1:-1;if(!S)return ye>Ee^_?1:-1;for(ae=(ye=M.length)<(Ee=U.length)?ye:Ee,ne=0;ne<ae;ne++)if(M[ne]!=U[ne])return M[ne]>U[ne]^_?1:-1;return ye==Ee?0:ye>Ee^_?1:-1}function u(h,g,_,S){if(h<g||h>_||h!==ks(h))throw Error($i+(S||"Argument")+(typeof h=="number"?h<g||h>_?" out of range: ":" not an integer: ":" not a primitive number: ")+String(h))}function y(h){var g=h.c.length-1;return Gs(h.e/pr)==g&&h.c[g]%2!=0}function P(h,g){return(h.length>1?h.charAt(0)+"."+h.slice(1):h)+(g<0?"e":"e+")+g}function H(h,g,_){var S,M;if(g<0){for(M=_+".";++g;M+=_);h=M+h}else if(S=h.length,++g>S){for(M=_,g-=S;--g;M+=_);h+=M}else g<S&&(h=h.slice(0,g)+"."+h.slice(g));return h}var le=ih(),Pe=le,ut=class{constructor(h){Ze(this,"key");Ze(this,"left",null);Ze(this,"right",null);this.key=h}},Ot=class extends ut{constructor(h){super(h)}},Wt=class{constructor(){Ze(this,"size",0);Ze(this,"modificationCount",0);Ze(this,"splayCount",0)}splay(h){let g=this.root;if(g==null)return this.compare(h,h),-1;let _=null,S=null,M=null,U=null,ne=g,ae=this.compare,ye;for(;;)if(ye=ae(ne.key,h),ye>0){let Ee=ne.left;if(Ee==null||(ye=ae(Ee.key,h),ye>0&&(ne.left=Ee.right,Ee.right=ne,ne=Ee,Ee=ne.left,Ee==null)))break;_==null?S=ne:_.left=ne,_=ne,ne=Ee}else if(ye<0){let Ee=ne.right;if(Ee==null||(ye=ae(Ee.key,h),ye<0&&(ne.right=Ee.left,Ee.left=ne,ne=Ee,Ee=ne.right,Ee==null)))break;M==null?U=ne:M.right=ne,M=ne,ne=Ee}else break;return M!=null&&(M.right=ne.left,ne.left=U),_!=null&&(_.left=ne.right,ne.right=S),this.root!==ne&&(this.root=ne,this.splayCount++),ye}splayMin(h){let g=h,_=g.left;for(;_!=null;){let S=_;g.left=S.right,S.right=g,g=S,_=g.left}return g}splayMax(h){let g=h,_=g.right;for(;_!=null;){let S=_;g.right=S.left,S.left=g,g=S,_=g.right}return g}_delete(h){if(this.root==null||this.splay(h)!=0)return null;let g=this.root,_=g,S=g.left;if(this.size--,S==null)this.root=g.right;else{let M=g.right;g=this.splayMax(S),g.right=M,this.root=g}return this.modificationCount++,_}addNewRoot(h,g){this.size++,this.modificationCount++;let _=this.root;if(_==null){this.root=h;return}g<0?(h.left=_,h.right=_.right,_.right=null):(h.right=_,h.left=_.left,_.left=null),this.root=h}_first(){let h=this.root;return h==null?null:(this.root=this.splayMin(h),this.root)}_last(){let h=this.root;return h==null?null:(this.root=this.splayMax(h),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(h){return this.validKey(h)&&this.splay(h)==0}defaultCompare(){return(h,g)=>h<g?-1:h>g?1:0}wrap(){return{getRoot:()=>this.root,setRoot:h=>{this.root=h},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:h=>{this.splayCount=h},splay:h=>this.splay(h),has:h=>this.has(h)}}},fn=class Lg extends Wt{constructor(_,S){super();Ze(this,"root",null);Ze(this,"compare");Ze(this,"validKey");Ze(this,On,"[object Set]");this.compare=_??this.defaultCompare(),this.validKey=S??(M=>M!=null&&M!=null)}delete(_){return this.validKey(_)?this._delete(_)!=null:!1}deleteAll(_){for(let S of _)this.delete(S)}forEach(_){let S=this[Symbol.iterator](),M;for(;M=S.next(),!M.done;)_(M.value,M.value,this)}add(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Ot(_),S),this}addAndReturn(_){let S=this.splay(_);return S!=0&&this.addNewRoot(new Ot(_),S),this.root.key}addAll(_){for(let S of _)this.add(S)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw"Bad state: No element";if(this.size>1)throw"Bad state: Too many element";return this.root.key}first(){if(this.size==0)throw"Bad state: No element";return this._first().key}last(){if(this.size==0)throw"Bad state: No element";return this._last().key}lastBefore(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)<0)return this.root.key;let S=this.root.left;if(S==null)return null;let M=S.right;for(;M!=null;)S=M,M=S.right;return S.key}firstAfter(_){if(_==null)throw"Invalid arguments(s)";if(this.root==null)return null;if(this.splay(_)>0)return this.root.key;let S=this.root.right;if(S==null)return null;let M=S.left;for(;M!=null;)S=M,M=S.left;return S.key}retainAll(_){let S=new Lg(this.compare,this.validKey),M=this.modificationCount;for(let U of _){if(M!=this.modificationCount)throw"Concurrent modification during iteration.";this.validKey(U)&&this.splay(U)==0&&S.add(this.root.key)}S.size!=this.size&&(this.root=S.root,this.size=S.size,this.modificationCount++)}lookup(_){return!this.validKey(_)||this.splay(_)!=0?null:this.root.key}intersection(_){let S=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)&&S.add(M);return S}difference(_){let S=new Lg(this.compare,this.validKey);for(let M of this)_.has(M)||S.add(M);return S}union(_){let S=this.clone();return S.addAll(_),S}clone(){let _=new Lg(this.compare,this.validKey);return _.size=this.size,_.root=this.copyNode(this.root),_}copyNode(_){if(_==null)return null;function S(U,ne){let ae,ye;do{if(ae=U.left,ye=U.right,ae!=null){let Ee=new Ot(ae.key);ne.left=Ee,S(ae,Ee)}if(ye!=null){let Ee=new Ot(ye.key);ne.right=Ee,U=ye,ne=Ee}}while(ye!=null)}let M=new Ot(_.key);return S(_,M),M}toSet(){return this.clone()}entries(){return new $r(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[(tr=Symbol.iterator,On=Symbol.toStringTag,tr)](){return new er(this.wrap())}},Rn=class{constructor(h){Ze(this,"tree");Ze(this,"path",new Array);Ze(this,"modificationCount",null);Ze(this,"splayCount");this.tree=h,this.splayCount=h.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let h=this.path[this.path.length-1];return this.getValue(h)}rebuildPath(h){this.path.splice(0,this.path.length),this.tree.splay(h),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(h){for(;h!=null;)this.path.push(h),h=h.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let _=this.tree.getRoot();for(;_!=null;)this.path.push(_),_=_.left;return this.path.length>0}throw"Concurrent modification during iteration."}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let h=this.path[this.path.length-1],g=h.right;if(g!=null){for(;g!=null;)this.path.push(g),g=g.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===h;)h=this.path.pop();return this.path.length>0}},er=class extends Rn{getValue(h){return h.key}},$r=class extends Rn{getValue(h){return[h.key,h.key]}},As=h=>h,cs=h=>{if(h){let g=new fn(Oo(h)),_=new fn(Oo(h)),S=(U,ne)=>ne.addAndReturn(U),M=U=>({x:S(U.x,g),y:S(U.y,_)});return M({x:new Pe(0),y:new Pe(0)}),M}return As},Ys=h=>({set:g=>{es=Ys(g)},reset:()=>Ys(h),compare:Oo(h),snap:cs(h),orient:sa(h)}),es=Ys(),Io=(h,g)=>h.ll.x.isLessThanOrEqualTo(g.x)&&g.x.isLessThanOrEqualTo(h.ur.x)&&h.ll.y.isLessThanOrEqualTo(g.y)&&g.y.isLessThanOrEqualTo(h.ur.y),sh=(h,g)=>{if(g.ur.x.isLessThan(h.ll.x)||h.ur.x.isLessThan(g.ll.x)||g.ur.y.isLessThan(h.ll.y)||h.ur.y.isLessThan(g.ll.y))return null;let _=h.ll.x.isLessThan(g.ll.x)?g.ll.x:h.ll.x,S=h.ur.x.isLessThan(g.ur.x)?h.ur.x:g.ur.x,M=h.ll.y.isLessThan(g.ll.y)?g.ll.y:h.ll.y,U=h.ur.y.isLessThan(g.ur.y)?h.ur.y:g.ur.y;return{ll:{x:_,y:M},ur:{x:S,y:U}}},Ba=(h,g)=>h.x.times(g.y).minus(h.y.times(g.x)),wa=(h,g)=>h.x.times(g.x).plus(h.y.times(g.y)),oa=h=>wa(h,h).sqrt(),Od=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return Ba(M,S).div(oa(M)).div(oa(S))},Tu=(h,g,_)=>{let S={x:g.x.minus(h.x),y:g.y.minus(h.y)},M={x:_.x.minus(h.x),y:_.y.minus(h.y)};return wa(M,S).div(oa(M)).div(oa(S))},bi=(h,g,_)=>g.y.isZero()?null:{x:h.x.plus(g.x.div(g.y).times(_.minus(h.y))),y:_},ao=(h,g,_)=>g.x.isZero()?null:{x:_,y:h.y.plus(g.y.div(g.x).times(_.minus(h.x)))},Ie=(h,g,_,S)=>{if(g.x.isZero())return ao(_,S,h.x);if(S.x.isZero())return ao(h,g,_.x);if(g.y.isZero())return bi(_,S,h.y);if(S.y.isZero())return bi(h,g,_.y);let M=Ba(g,S);if(M.isZero())return null;let U={x:_.x.minus(h.x),y:_.y.minus(h.y)},ne=Ba(U,g).div(M),ae=Ba(U,S).div(M),ye=h.x.plus(ae.times(g.x)),Ee=_.x.plus(ne.times(S.x)),nt=h.y.plus(ae.times(g.y)),qe=_.y.plus(ne.times(S.y)),bt=ye.plus(Ee).div(2),It=nt.plus(qe).div(2);return{x:bt,y:It}},Bo=class RE{constructor(g,_){Ze(this,"point");Ze(this,"isLeft");Ze(this,"segment");Ze(this,"otherSE");Ze(this,"consumedBy");g.events===void 0?g.events=[this]:g.events.push(this),this.point=g,this.isLeft=_}static compare(g,_){let S=RE.comparePoints(g.point,_.point);return S!==0?S:(g.point!==_.point&&g.link(_),g.isLeft!==_.isLeft?g.isLeft?1:-1:Ks.compare(g.segment,_.segment))}static comparePoints(g,_){return g.x.isLessThan(_.x)?-1:g.x.isGreaterThan(_.x)?1:g.y.isLessThan(_.y)?-1:g.y.isGreaterThan(_.y)?1:0}link(g){if(g.point===this.point)throw new Error("Tried to link already linked events");let _=g.point.events;for(let S=0,M=_.length;S<M;S++){let U=_[S];this.point.events.push(U),U.point=this.point}this.checkForConsuming()}checkForConsuming(){let g=this.point.events.length;for(let _=0;_<g;_++){let S=this.point.events[_];if(S.segment.consumedBy===void 0)for(let M=_+1;M<g;M++){let U=this.point.events[M];U.consumedBy===void 0&&S.otherSE.point.events===U.otherSE.point.events&&S.segment.consume(U.segment)}}}getAvailableLinkedEvents(){let g=[];for(let _=0,S=this.point.events.length;_<S;_++){let M=this.point.events[_];M!==this&&!M.segment.ringOut&&M.segment.isInResult()&&g.push(M)}return g}getLeftmostComparator(g){let _=new Map,S=M=>{let U=M.otherSE;_.set(M,{sine:Od(this.point,g.point,U.point),cosine:Tu(this.point,g.point,U.point)})};return(M,U)=>{_.has(M)||S(M),_.has(U)||S(U);let{sine:ne,cosine:ae}=_.get(M),{sine:ye,cosine:Ee}=_.get(U);return ne.isGreaterThanOrEqualTo(0)&&ye.isGreaterThanOrEqualTo(0)?ae.isLessThan(Ee)?1:ae.isGreaterThan(Ee)?-1:0:ne.isLessThan(0)&&ye.isLessThan(0)?ae.isLessThan(Ee)?-1:ae.isGreaterThan(Ee)?1:0:ye.isLessThan(ne)?-1:ye.isGreaterThan(ne)?1:0}}},tc=0,Ks=class sv{constructor(g,_,S,M){Ze(this,"id");Ze(this,"leftSE");Ze(this,"rightSE");Ze(this,"rings");Ze(this,"windings");Ze(this,"ringOut");Ze(this,"consumedBy");Ze(this,"prev");Ze(this,"_prevInResult");Ze(this,"_beforeState");Ze(this,"_afterState");Ze(this,"_isInResult");this.id=++tc,this.leftSE=g,g.segment=this,g.otherSE=_,this.rightSE=_,_.segment=this,_.otherSE=g,this.rings=S,this.windings=M}static compare(g,_){let S=g.leftSE.point.x,M=_.leftSE.point.x,U=g.rightSE.point.x,ne=_.rightSE.point.x;if(ne.isLessThan(S))return 1;if(U.isLessThan(M))return-1;let ae=g.leftSE.point.y,ye=_.leftSE.point.y,Ee=g.rightSE.point.y,nt=_.rightSE.point.y;if(S.isLessThan(M)){if(ye.isLessThan(ae)&&ye.isLessThan(Ee))return 1;if(ye.isGreaterThan(ae)&&ye.isGreaterThan(Ee))return-1;let qe=g.comparePoint(_.leftSE.point);if(qe<0)return 1;if(qe>0)return-1;let bt=_.comparePoint(g.rightSE.point);return bt!==0?bt:-1}if(S.isGreaterThan(M)){if(ae.isLessThan(ye)&&ae.isLessThan(nt))return-1;if(ae.isGreaterThan(ye)&&ae.isGreaterThan(nt))return 1;let qe=_.comparePoint(g.leftSE.point);if(qe!==0)return qe;let bt=g.comparePoint(_.rightSE.point);return bt<0?1:bt>0?-1:1}if(ae.isLessThan(ye))return-1;if(ae.isGreaterThan(ye))return 1;if(U.isLessThan(ne)){let qe=_.comparePoint(g.rightSE.point);if(qe!==0)return qe}if(U.isGreaterThan(ne)){let qe=g.comparePoint(_.rightSE.point);if(qe<0)return 1;if(qe>0)return-1}if(!U.eq(ne)){let qe=Ee.minus(ae),bt=U.minus(S),It=nt.minus(ye),tn=ne.minus(M);if(qe.isGreaterThan(bt)&&It.isLessThan(tn))return 1;if(qe.isLessThan(bt)&&It.isGreaterThan(tn))return-1}return U.isGreaterThan(ne)?1:U.isLessThan(ne)||Ee.isLessThan(nt)?-1:Ee.isGreaterThan(nt)?1:g.id<_.id?-1:g.id>_.id?1:0}static fromRing(g,_,S){let M,U,ne,ae=Bo.comparePoints(g,_);if(ae<0)M=g,U=_,ne=1;else if(ae>0)M=_,U=g,ne=-1;else throw new Error(`Tried to create degenerate segment at [${g.x}, ${g.y}]`);let ye=new Bo(M,!0),Ee=new Bo(U,!1);return new sv(ye,Ee,[S],[ne])}replaceRightSE(g){this.rightSE=g,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let g=this.leftSE.point.y,_=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:g.isLessThan(_)?g:_},ur:{x:this.rightSE.point.x,y:g.isGreaterThan(_)?g:_}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(g){return g.x.eq(this.leftSE.point.x)&&g.y.eq(this.leftSE.point.y)||g.x.eq(this.rightSE.point.x)&&g.y.eq(this.rightSE.point.y)}comparePoint(g){return es.orient(this.leftSE.point,g,this.rightSE.point)}getIntersection(g){let _=this.bbox(),S=g.bbox(),M=sh(_,S);if(M===null)return null;let U=this.leftSE.point,ne=this.rightSE.point,ae=g.leftSE.point,ye=g.rightSE.point,Ee=Io(_,ae)&&this.comparePoint(ae)===0,nt=Io(S,U)&&g.comparePoint(U)===0,qe=Io(_,ye)&&this.comparePoint(ye)===0,bt=Io(S,ne)&&g.comparePoint(ne)===0;if(nt&&Ee)return bt&&!qe?ne:!bt&&qe?ye:null;if(nt)return qe&&U.x.eq(ye.x)&&U.y.eq(ye.y)?null:U;if(Ee)return bt&&ne.x.eq(ae.x)&&ne.y.eq(ae.y)?null:ae;if(bt&&qe)return null;if(bt)return ne;if(qe)return ye;let It=Ie(U,this.vector(),ae,g.vector());return It===null||!Io(M,It)?null:es.snap(It)}split(g){let _=[],S=g.events!==void 0,M=new Bo(g,!0),U=new Bo(g,!1),ne=this.rightSE;this.replaceRightSE(U),_.push(U),_.push(M);let ae=new sv(M,ne,this.rings.slice(),this.windings.slice());return Bo.comparePoints(ae.leftSE.point,ae.rightSE.point)>0&&ae.swapEvents(),Bo.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),S&&(M.checkForConsuming(),U.checkForConsuming()),_}swapEvents(){let g=this.rightSE;this.rightSE=this.leftSE,this.leftSE=g,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let _=0,S=this.windings.length;_<S;_++)this.windings[_]*=-1}consume(g){let _=this,S=g;for(;_.consumedBy;)_=_.consumedBy;for(;S.consumedBy;)S=S.consumedBy;let M=sv.compare(_,S);if(M!==0){if(M>0){let U=_;_=S,S=U}if(_.prev===S){let U=_;_=S,S=U}for(let U=0,ne=S.rings.length;U<ne;U++){let ae=S.rings[U],ye=S.windings[U],Ee=_.rings.indexOf(ae);Ee===-1?(_.rings.push(ae),_.windings.push(ye)):_.windings[Ee]+=ye}S.rings=null,S.windings=null,S.consumedBy=_,S.leftSE.consumedBy=_.leftSE,S.rightSE.consumedBy=_.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{let g=this.prev.consumedBy||this.prev;this._beforeState=g.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let g=this.beforeState();this._afterState={rings:g.rings.slice(0),windings:g.windings.slice(0),multiPolys:[]};let _=this._afterState.rings,S=this._afterState.windings,M=this._afterState.multiPolys;for(let ae=0,ye=this.rings.length;ae<ye;ae++){let Ee=this.rings[ae],nt=this.windings[ae],qe=_.indexOf(Ee);qe===-1?(_.push(Ee),S.push(nt)):S[qe]+=nt}let U=[],ne=[];for(let ae=0,ye=_.length;ae<ye;ae++){if(S[ae]===0)continue;let Ee=_[ae],nt=Ee.poly;if(ne.indexOf(nt)===-1)if(Ee.isExterior)U.push(nt);else{ne.indexOf(nt)===-1&&ne.push(nt);let qe=U.indexOf(Ee.poly);qe!==-1&&U.splice(qe,1)}}for(let ae=0,ye=U.length;ae<ye;ae++){let Ee=U[ae].multiPoly;M.indexOf(Ee)===-1&&M.push(Ee)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let g=this.beforeState().multiPolys,_=this.afterState().multiPolys;switch(Hh.type){case"union":{let S=g.length===0,M=_.length===0;this._isInResult=S!==M;break}case"intersection":{let S,M;g.length<_.length?(S=g.length,M=_.length):(S=_.length,M=g.length),this._isInResult=M===Hh.numMultiPolys&&S<M;break}case"xor":{let S=Math.abs(g.length-_.length);this._isInResult=S%2===1;break}case"difference":{let S=M=>M.length===1&&M[0].isSubject;this._isInResult=S(g)!==S(_);break}}return this._isInResult}},Gr=class{constructor(h,g,_){Ze(this,"poly");Ze(this,"isExterior");Ze(this,"segments");Ze(this,"bbox");if(!Array.isArray(h)||h.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=g,this.isExterior=_,this.segments=[],typeof h[0][0]!="number"||typeof h[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let S=es.snap({x:new Pe(h[0][0]),y:new Pe(h[0][1])});this.bbox={ll:{x:S.x,y:S.y},ur:{x:S.x,y:S.y}};let M=S;for(let U=1,ne=h.length;U<ne;U++){if(typeof h[U][0]!="number"||typeof h[U][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let ae=es.snap({x:new Pe(h[U][0]),y:new Pe(h[U][1])});ae.x.eq(M.x)&&ae.y.eq(M.y)||(this.segments.push(Ks.fromRing(M,ae,this)),ae.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=ae.x),ae.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=ae.y),ae.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=ae.x),ae.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=ae.y),M=ae)}(!S.x.eq(M.x)||!S.y.eq(M.y))&&this.segments.push(Ks.fromRing(M,S,this))}getSweepEvents(){let h=[];for(let g=0,_=this.segments.length;g<_;g++){let S=this.segments[g];h.push(S.leftSE),h.push(S.rightSE)}return h}},Vh=class{constructor(h,g){Ze(this,"multiPoly");Ze(this,"exteriorRing");Ze(this,"interiorRings");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Gr(h[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let _=1,S=h.length;_<S;_++){let M=new Gr(h[_],this,!1);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.interiorRings.push(M)}this.multiPoly=g}getSweepEvents(){let h=this.exteriorRing.getSweepEvents();for(let g=0,_=this.interiorRings.length;g<_;g++){let S=this.interiorRings[g].getSweepEvents();for(let M=0,U=S.length;M<U;M++)h.push(S[M])}return h}},Af=class{constructor(h,g){Ze(this,"isSubject");Ze(this,"polys");Ze(this,"bbox");if(!Array.isArray(h))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof h[0][0][0]=="number"&&(h=[h])}catch{}this.polys=[],this.bbox={ll:{x:new Pe(Number.POSITIVE_INFINITY),y:new Pe(Number.POSITIVE_INFINITY)},ur:{x:new Pe(Number.NEGATIVE_INFINITY),y:new Pe(Number.NEGATIVE_INFINITY)}};for(let _=0,S=h.length;_<S;_++){let M=new Vh(h[_],this);M.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=M.bbox.ll.x),M.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=M.bbox.ll.y),M.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=M.bbox.ur.x),M.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=M.bbox.ur.y),this.polys.push(M)}this.isSubject=g}getSweepEvents(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getSweepEvents();for(let M=0,U=S.length;M<U;M++)h.push(S[M])}return h}},Uh=class Sb{constructor(g){Ze(this,"events");Ze(this,"poly");Ze(this,"_isExteriorRing");Ze(this,"_enclosingRing");this.events=g;for(let _=0,S=g.length;_<S;_++)g[_].segment.ringOut=this;this.poly=null}static factory(g){let _=[];for(let S=0,M=g.length;S<M;S++){let U=g[S];if(!U.isInResult()||U.ringOut)continue;let ne=null,ae=U.leftSE,ye=U.rightSE,Ee=[ae],nt=ae.point,qe=[];for(;ne=ae,ae=ye,Ee.push(ae),ae.point!==nt;)for(;;){let bt=ae.getAvailableLinkedEvents();if(bt.length===0){let wn=Ee[0].point,Pn=Ee[Ee.length-1].point;throw new Error(`Unable to complete output ring starting at [${wn.x}, ${wn.y}]. Last matching segment found ends at [${Pn.x}, ${Pn.y}].`)}if(bt.length===1){ye=bt[0].otherSE;break}let It=null;for(let wn=0,Pn=qe.length;wn<Pn;wn++)if(qe[wn].point===ae.point){It=wn;break}if(It!==null){let wn=qe.splice(It)[0],Pn=Ee.splice(wn.index);Pn.unshift(Pn[0].otherSE),_.push(new Sb(Pn.reverse()));continue}qe.push({index:Ee.length,point:ae.point});let tn=ae.getLeftmostComparator(ne);ye=bt.sort(tn)[0].otherSE;break}_.push(new Sb(Ee))}return _}getGeom(){let g=this.events[0].point,_=[g];for(let Ee=1,nt=this.events.length-1;Ee<nt;Ee++){let qe=this.events[Ee].point,bt=this.events[Ee+1].point;es.orient(qe,g,bt)!==0&&(_.push(qe),g=qe)}if(_.length===1)return null;let S=_[0],M=_[1];es.orient(S,g,M)===0&&_.shift(),_.push(_[0]);let U=this.isExteriorRing()?1:-1,ne=this.isExteriorRing()?0:_.length-1,ae=this.isExteriorRing()?_.length:-1,ye=[];for(let Ee=ne;Ee!=ae;Ee+=U)ye.push([_[Ee].x.toNumber(),_[Ee].y.toNumber()]);return ye}isExteriorRing(){if(this._isExteriorRing===void 0){let g=this.enclosingRing();this._isExteriorRing=g?!g.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){var M,U;let g=this.events[0];for(let ne=1,ae=this.events.length;ne<ae;ne++){let ye=this.events[ne];Bo.compare(g,ye)>0&&(g=ye)}let _=g.segment.prevInResult(),S=_?_.prevInResult():null;for(;;){if(!_)return null;if(!S)return _.ringOut;if(S.ringOut!==_.ringOut)return((M=S.ringOut)==null?void 0:M.enclosingRing())!==_.ringOut?_.ringOut:(U=_.ringOut)==null?void 0:U.enclosingRing();_=S.prevInResult(),S=_?_.prevInResult():null}}},bl=class{constructor(h){Ze(this,"exteriorRing");Ze(this,"interiorRings");this.exteriorRing=h,h.poly=this,this.interiorRings=[]}addInterior(h){this.interiorRings.push(h),h.poly=this}getGeom(){let h=this.exteriorRing.getGeom();if(h===null)return null;let g=[h];for(let _=0,S=this.interiorRings.length;_<S;_++){let M=this.interiorRings[_].getGeom();M!==null&&g.push(M)}return g}},oh=class{constructor(h){Ze(this,"rings");Ze(this,"polys");this.rings=h,this.polys=this._composePolys(h)}getGeom(){let h=[];for(let g=0,_=this.polys.length;g<_;g++){let S=this.polys[g].getGeom();S!==null&&h.push(S)}return h}_composePolys(h){var _;let g=[];for(let S=0,M=h.length;S<M;S++){let U=h[S];if(!U.poly)if(U.isExteriorRing())g.push(new bl(U));else{let ne=U.enclosingRing();ne!=null&&ne.poly||g.push(new bl(ne)),(_=ne==null?void 0:ne.poly)==null||_.addInterior(U)}}return g}},Nd=class{constructor(h,g=Ks.compare){Ze(this,"queue");Ze(this,"tree");Ze(this,"segments");this.queue=h,this.tree=new fn(g),this.segments=[]}process(h){let g=h.segment,_=[];if(h.consumedBy)return h.isLeft?this.queue.delete(h.otherSE):this.tree.delete(g),_;h.isLeft&&this.tree.add(g);let S=g,M=g;do S=this.tree.lastBefore(S);while(S!=null&&S.consumedBy!=null);do M=this.tree.firstAfter(M);while(M!=null&&M.consumedBy!=null);if(h.isLeft){let U=null;if(S){let ae=S.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(U=ae),!S.isAnEndpoint(ae))){let ye=this._splitSafely(S,ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}let ne=null;if(M){let ae=M.getIntersection(g);if(ae!==null&&(g.isAnEndpoint(ae)||(ne=ae),!M.isAnEndpoint(ae))){let ye=this._splitSafely(M,ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}}if(U!==null||ne!==null){let ae=null;U===null?ae=ne:ne===null?ae=U:ae=Bo.comparePoints(U,ne)<=0?U:ne,this.queue.delete(g.rightSE),_.push(g.rightSE);let ye=g.split(ae);for(let Ee=0,nt=ye.length;Ee<nt;Ee++)_.push(ye[Ee])}_.length>0?(this.tree.delete(g),_.push(h)):(this.segments.push(g),g.prev=S)}else{if(S&&M){let U=S.getIntersection(M);if(U!==null){if(!S.isAnEndpoint(U)){let ne=this._splitSafely(S,U);for(let ae=0,ye=ne.length;ae<ye;ae++)_.push(ne[ae])}if(!M.isAnEndpoint(U)){let ne=this._splitSafely(M,U);for(let ae=0,ye=ne.length;ae<ye;ae++)_.push(ne[ae])}}}this.tree.delete(g)}return _}_splitSafely(h,g){this.tree.delete(h);let _=h.rightSE;this.queue.delete(_);let S=h.split(g);return S.push(_),h.consumedBy===void 0&&this.tree.add(h),S}},Up=class{constructor(){Ze(this,"type");Ze(this,"numMultiPolys")}run(h,g,_){Tc.type=h;let S=[new Af(g,!0)];for(let ye=0,Ee=_.length;ye<Ee;ye++)S.push(new Af(_[ye],!1));if(Tc.numMultiPolys=S.length,Tc.type==="difference"){let ye=S[0],Ee=1;for(;Ee<S.length;)sh(S[Ee].bbox,ye.bbox)!==null?Ee++:S.splice(Ee,1)}if(Tc.type==="intersection")for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye];for(let qe=ye+1,bt=S.length;qe<bt;qe++)if(sh(nt.bbox,S[qe].bbox)===null)return[]}let M=new fn(Bo.compare);for(let ye=0,Ee=S.length;ye<Ee;ye++){let nt=S[ye].getSweepEvents();for(let qe=0,bt=nt.length;qe<bt;qe++)M.add(nt[qe])}let U=new Nd(M),ne=null;for(M.size!=0&&(ne=M.first(),M.delete(ne));ne;){let ye=U.process(ne);for(let Ee=0,nt=ye.length;Ee<nt;Ee++){let qe=ye[Ee];qe.consumedBy===void 0&&M.add(qe)}M.size!=0?(ne=M.first(),M.delete(ne)):ne=null}es.reset();let ae=Uh.factory(U.segments);return new oh(ae).getGeom()}},Tc=new Up,Hh=Tc,fu=(h,...g)=>Hh.run("intersection",h,g),Hp=(h,...g)=>Hh.run("difference",h,g);es.set;function Wh(h){let g={type:"Feature"};return g.geometry=h,g}function Gh(h){return h.type==="Feature"?h.geometry:h}function Tf(h){return h&&h.geometry&&h.geometry.coordinates?h.geometry.coordinates:h}function Df(h){return Wh({type:"LineString",coordinates:h})}function Xa(h){return Wh({type:"MultiLineString",coordinates:h})}function Of(h){return Wh({type:"Polygon",coordinates:h})}function Nf(h){return Wh({type:"MultiPolygon",coordinates:h})}function If(h,g){let _=Gh(h),S=Gh(g),M=fu(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function w(h,g){let _=Gh(h),S=Gh(g),M=Hp(_.coordinates,S.coordinates);return M.length===0?null:M.length===1?Of(M[0]):Nf(M)}function T(h){return Array.isArray(h)?1+T(h[0]):-1}function q(h){h instanceof L.Polyline&&(h=h.toGeoJSON(15));let g=Tf(h),_=T(g),S=[];return _>1?g.forEach(M=>{S.push(Df(M))}):S.push(h),S}function ue(h){let g=[];return h.eachLayer(_=>{g.push(Tf(_.toGeoJSON(15)))}),Xa(g)}_s.Cut=_s.Polygon.extend({initialize(h){this._map=h,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let h=this._layer.getLatLngs();if(h.length<=2)return;let g=L.polygon(h,this.options.pathOptions);g._latlngInfos=this._layer._latlngInfo,this.cut(g),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:S,originalLayer:M})=>{this._fireCut(M,S,M),this._fireCut(this._map,S,M),M.pm._fireEdit()}),this._editedLayers=[];let _=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(_))},cut(h){let g=this._map._layers,_=h._latlngInfos||[];Object.keys(g).map(S=>g[S]).filter(S=>S.pm).filter(S=>!S._pmTempLayer).filter(S=>!L.PM.optIn&&!S.options.pmIgnore||L.PM.optIn&&S.options.pmIgnore===!1).filter(S=>S instanceof L.Polyline).filter(S=>S!==h).filter(S=>S.pm.options.allowCutting).filter(S=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(S)>-1:!0).filter(S=>!this._layerGroup.hasLayer(S)).filter(S=>{try{let M=!!Do(h.toGeoJSON(15),S.toGeoJSON(15)).features.length>0;return M||S instanceof L.Polyline&&!(S instanceof L.Polygon)?M:!!If(h.toGeoJSON(15),S.toGeoJSON(15))}catch{return S instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}}).forEach(S=>{let M;if(S instanceof L.Polygon){M=L.polygon(S.getLatLngs());let ye=M.getLatLngs();_.forEach(Ee=>{if(Ee&&Ee.snapInfo){let{latlng:nt}=Ee,qe=this._calcClosestLayer(nt,[M]);if(qe&&qe.segment&&qe.distance<this.options.snapDistance){let{segment:bt}=qe;if(bt&&bt.length===2){let{indexPath:It,parentPath:tn,newIndex:wn}=L.PM.Utils._getIndexFromSegment(ye,bt);(It.length>1?(0,Hi.default)(ye,tn):ye).splice(wn,0,nt)}}}})}else M=S;let U=this._cutLayer(h,M),ne=L.geoJSON(U,S.options);ne.getLayers().length===1&&([ne]=ne.getLayers()),this._setPane(ne,"layerPane");let ae=ne.addTo(this._map.pm._getContainingLayer());if(ae.pm.enable(S.pm.options),ae.pm.disable(),S._pmTempLayer=!0,h._pmTempLayer=!0,S.remove(),S.removeFrom(this._map.pm._getContainingLayer()),h.remove(),h.removeFrom(this._map.pm._getContainingLayer()),ae.getLayers&&ae.getLayers().length===0&&this._map.pm.removeLayer({target:ae}),ae instanceof L.LayerGroup?(ae.eachLayer(ye=>{this._addDrawnLayerProp(ye)}),this._addDrawnLayerProp(ae)):this._addDrawnLayerProp(ae),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let ye=this.options.layersToCut.indexOf(S);ye>-1&&this.options.layersToCut.splice(ye,1)}this._editedLayers.push({layer:ae,originalLayer:S})})},_cutLayer(h,g){let _=L.geoJSON(),S;if(g instanceof L.Polygon)S=w(g.toGeoJSON(15),h.toGeoJSON(15));else{let M=q(g);M.forEach(U=>{let ne=Jn(U,h.toGeoJSON(15)),ae;ne&&ne.features.length>0?ae=L.geoJSON(ne):ae=L.geoJSON(U),ae.getLayers().forEach(ye=>{Ta(h.toGeoJSON(15),ye.toGeoJSON(15))||ye.addTo(_)})}),M.length>1?S=ue(_):S=_.toGeoJSON(15)}return S},_change:L.Util.falseFn}),_s.Text=_s.extend({initialize(h){this._map=h,this._shape="Text",this.toolbarButtonName="drawText"},enable(h){L.Util.setOptions(this,h),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(ur("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._map.getContainer().classList.add("geoman-draw-cursor"),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){var h;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),(h=this._hintMarker)==null||h.remove(),this._map.getContainer().classList.remove("geoman-draw-cursor"),this._map.off("mousemove",this._syncHintMarker,this),this._map.off("mousemove",this._showHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(h){this.enabled()?this.disable():this.enable(h)},_syncHintMarker(h){if(this._hintMarker.setLatLng(h.latlng),this.options.snappable){let g=h;g.target=this._hintMarker,this._handleSnapping(g)}},_createMarker(h){var M,U,ne,ae;if(!h.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(h.latlng);let g=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(M=this.options.textOptions)==null?void 0:M.className){let ye=this.options.textOptions.className.split(" ");this.textArea.classList.add(...ye)}let _=this._createTextIcon(this.textArea),S=new L.Marker(g,{textMarker:!0,_textMarkerOverPM:!0,icon:_});if(this._setPane(S,"markerPane"),this._finishLayer(S),S.pm||(S.options.draggable=!1),S.addTo(this._map.pm._getContainingLayer()),S.pm){S.pm.textArea=this.textArea,L.setOptions(S.pm,{removeIfEmpty:((U=this.options.textOptions)==null?void 0:U.removeIfEmpty)??!0});let ye=((ne=this.options.textOptions)==null?void 0:ne.focusAfterDraw)??!0;S.pm._createTextMarker(ye),(ae=this.options.textOptions)!=null&&ae.text&&S.pm.setText(this.options.textOptions.text)}this._fireCreate(S),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once("mousemove",this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(h){this.enable(),this._hintMarker.setLatLng(h.latlng)},_createTextArea(){let h=document.createElement("textarea");return h.readOnly=!0,h.classList.add("pm-textarea","pm-disabled"),h},_createTextIcon(h){return L.divIcon({className:"pm-text-marker",html:h})}});var xe={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Li(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(h)):L.DomEvent.on(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,Li(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let h=this._getDOMElem();h&&(Li(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(h)):L.DomEvent.off(h,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseDown(_),!1},_simulateMouseMoveEvent(h){let g=h.touches?h.touches[0]:h,_={originalEvent:g,target:this._layer};return _.containerPoint=this._map.mouseEventToContainerPoint(g),_.latlng=this._map.containerPointToLatLng(_.containerPoint),this._dragMixinOnMouseMove(_),!1},_simulateMouseUpEvent(h){let g={originalEvent:h.touches?h.touches[0]:h,target:this._layer};return h.type.indexOf("touch")===-1&&(g.containerPoint=this._map.mouseEventToContainerPoint(h),g.latlng=this._map.containerPointToLatLng(g.containerPoint)),this._dragMixinOnMouseUp(g),!1},_dragMixinOnMouseDown(h){if(h.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(h);let g=h._fromLayerSync,_=this._syncLayers("_dragMixinOnMouseDown",h);if(this._layer instanceof L.Marker&&(this.options.snappable&&!g&&!_?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let S="resizeableCircleMarker";this._layer instanceof L.Circle&&(S="resizeableCircle"),this.options.snappable&&!g&&!_?this._layer.pm.options[S]||this._initSnappableMarkersDrag():this._layer.pm.options[S]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=h.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(h){this._overwriteEventIfItComesFromMarker(h);let g=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",h),this._dragging||(this._dragging=!0,L.DomUtil.addClass(g,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=h.latlng),this._onLayerDrag(h),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(h){let g=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",h),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,g&&L.DomUtil.removeClass(g,"leaflet-pm-dragging"),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(h){let{latlng:g}=h,_={lat:g.lat-this._tempDragCoord.lat,lng:g.lng-this._tempDragCoord.lng},S=M=>M.map(U=>{if(Array.isArray(U))return S(U);let ne={lat:U.lat+_.lat,lng:U.lng+_.lng};return(U.alt||U.alt===0)&&(ne.alt=U.alt),ne});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let M=S([this._layer.getLatLng()]);this._layer.setLatLng(M[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let M=this._layer.getLatLng();this._layer._snapped&&(M=this._layer._orgLatLng);let U=S([M]);this._layer.setLatLng(U[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){let M=S([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(M),this._fireChange(this._layer.getBounds(),"Edit")}else{let M=S(this._layer.getLatLngs());this._layer.setLatLngs(M),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=g,h.layer=this._layer,this._fireDrag(h)},addDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.addClass(h,"leaflet-pm-draggable")},removeDraggingClass(){let h=this._getDOMElem();h&&L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_getDOMElem(){let h=null;return this._layer._path?h=this._layer._path:this._layer._renderer&&this._layer._renderer._container?h=this._layer._renderer._container:this._layer._image?h=this._layer._image:this._layer._icon&&(h=this._layer._icon),h},_overwriteEventIfItComesFromMarker(h){h.target.getLatLng&&(!h.target._radius||h.target._radius<=10)&&(h.containerPoint=this._map.mouseEventToContainerPoint(h.originalEvent),h.latlng=this._map.containerPointToLatLng(h.containerPoint))},_syncLayers(h,g){if(this.enabled())return!1;if(!g._fromLayerSync&&this._layer===g.target&&this.options.syncLayersOnDrag){g._fromLayerSync=!0;let _=[];if(L.Util.isArray(this.options.syncLayersOnDrag))_=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(S=>{S instanceof L.LayerGroup&&(_=_.concat(S.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let S in this._parentLayerGroup){let M=this._parentLayerGroup[S];M.pm&&(_=M.pm.getLayers(!0))}return L.Util.isArray(_)&&_.length>0&&(_=_.filter(S=>!!S.pm).filter(S=>!!S.pm.options.draggable),_.forEach(S=>{S!==this._layer&&S.pm[h]&&(S._snapped=!1,S.pm[h](g))})),_.length>0}return!1},_stopDOMImageDrag(h){return h.preventDefault(),!1}},Me=xe,Ae=l(Is());function Ne(h,g,_,S){return _.unproject(g.transform(_.project(h,S)),S)}function Re(h,g,_){let S=_.getMaxZoom();if(S===1/0&&(S=_.getZoom()),L.Util.isArray(h)){let M=[];return h.forEach(U=>{M.push(Re(U,g,_))}),M}return h instanceof L.LatLng?Ne(h,g,_,S):null}function Ke(h,g){g instanceof L.Layer&&(g=g.getLatLng());let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.project(g,_)}function gt(h,g){let _=h.getMaxZoom();return _===1/0&&(_=h.getZoom()),h.unproject(g,_)}var Ft={_onRotateStart(h){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=Ke(this._map,this._rotationOriginLatLng),this._rotationStartPoint=Ke(this._map,h.target.getLatLng()),this._initialRotateLatLng=ia(this._layer),this._startAngle=this.getAngle();let g=ia(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,g),this._fireRotationStart(this._map,g)},_onRotate(h){let g=Ke(this._map,h.target.getLatLng()),_=this._rotationStartPoint,S=this._rotationOriginPoint,M=Math.atan2(g.y-S.y,g.x-S.x)-Math.atan2(_.y-S.y,_.x-S.x);this._layer.setLatLngs(this._rotateLayer(M,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let U=this;function ne(nt,qe=[],bt=-1){if(bt>-1&&qe.push(bt),L.Util.isArray(nt[0]))nt.forEach((It,tn)=>ne(It,qe.slice(),tn));else{let It=qe.length>0?(0,Ae.default)(U._markers,qe):U._markers[0];nt.forEach((tn,wn)=>{It[wn].setLatLng(tn)})}}ne(this._layer.getLatLngs());let ae=ia(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(M,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let ye=M*180/Math.PI;ye=ye<0?ye+360:ye;let Ee=ye+this._startAngle;this._setAngle(Ee),this._rotationLayer.pm._setAngle(Ee),this._fireRotation(this._rotationLayer,ye,ae),this._fireRotation(this._map,ye,ae),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd(){let h=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let g=ia(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=ia(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,h,g),this._fireRotationEnd(this._map,h,g),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(h,g,_,S,M){let U=Ke(M,_);return this._matrix=S.clone().rotate(h,U).flip(),Re(g,this._matrix,M)},_setAngle(h){h=h<0?h+360:h,this._angle=h%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let h=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),g=h.getCenter();return h.removeFrom(this._layer._map),g},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Pa(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h={fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0};this._rotatePoly=L.polygon(this._layer.getLatLngs(),h),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=ia(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(h){let g=this.getAngle(),_=this._layer.getLatLngs(),S=h*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(S,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+h),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(S,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let M=this.getAngle()-g;M=M<0?M+360:M,this._startAngle=g,this._fireRotation(this._layer,M,_,this._layer),this._fireRotation(this._map||this._layer._map,M,_,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle(h){let g=h-this.getAngle();this.rotateLayer(g)},getAngle(){return this._angle||0},setInitAngle(h){this._setAngle(h)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(h){this._rotationCenter=h,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(h)}},jt=Ft,Ct=L.Class.extend({includes:[Me,Yo,jt,au],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(h){L.Util.setOptions(this,h)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(h,g){g==="layerPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":g==="vertexPane"?h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":g==="markerPane"&&(h.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(h,g){let _=g.target,S={layer:this._layer,marker:_,event:g},M="";return h==="move"?M="moveVertexValidation":h==="add"?M="addVertexValidation":h==="remove"&&(M="removeVertexValidation"),this.options[M]&&typeof this.options[M]=="function"&&!this.options[M](S)?(h==="move"&&(_._cancelDragEventChain=_.getLatLng()),!1):(_._cancelDragEventChain=null,!0)},_vertexValidationDrag(h){return h._cancelDragEventChain?(h._latlng=h._cancelDragEventChain,h.update(),!1):!0},_vertexValidationDragEnd(h){return h._cancelDragEventChain?(h._cancelDragEventChain=null,!1):!0}}),Zt=Ct;Zt.LayerGroup=L.Class.extend({initialize(h){this._layerGroup=h,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(S=>this._initLayer(S));let g=S=>{if(S.layer._pmTempLayer)return;this._layers=this.getLayers();let M=this._layers.filter(U=>!U.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in U.pm._parentLayerGroup));M.forEach(U=>{this._initLayer(U)}),M.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())};this._layerGroup.on("layeradd",L.Util.throttle(g,100,this),this),this._layerGroup.on("layerremove",S=>{this._removeLayerFromGroup(S.target)},this);let _=S=>{S.target._pmTempLayer||(this._layers=this.getLayers())};this._layerGroup.on("layerremove",L.Util.throttle(_,100,this),this)},enable(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.enable(h,g)):_.pm.enable(h)})},disable(h=[]){h.length===0&&(this._layers=this.getLayers()),this._layers.forEach(g=>{g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1&&(h.push(g._leaflet_id),g.pm.disable(h)):g.pm.disable()})},enabled(h=[]){return h.length===0&&(this._layers=this.getLayers()),!!this._layers.find(g=>g instanceof L.LayerGroup?h.indexOf(g._leaflet_id)===-1?(h.push(g._leaflet_id),g.pm.enabled(h)):!1:g.pm.enabled())},toggleEdit(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this._options=h,this._layers.forEach(_=>{_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.toggleEdit(h,g)):_.pm.toggleEdit(h)})},_initLayer(h){let g=L.Util.stamp(this._layerGroup);h.pm._parentLayerGroup||(h.pm._parentLayerGroup={}),h.pm._parentLayerGroup[g]=this._layerGroup},_removeLayerFromGroup(h){if(h.pm&&h.pm._layerGroup){let g=L.Util.stamp(this._layerGroup);delete h.pm._layerGroup[g]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(h=>h.pm.dragging()):!1},getOptions(){return this.options},_getMap(){var h;return this._map||((h=this._layers.find(g=>!!g._map))==null?void 0:h._map)||null},getLayers(h=!1,g=!0,_=!0,S=[]){let M=[];return h?this._layerGroup.getLayers().forEach(U=>{M.push(U),U instanceof L.LayerGroup&&S.indexOf(U._leaflet_id)===-1&&(S.push(U._leaflet_id),M=M.concat(U.pm.getLayers(!0,!0,!0,S)))}):M=this._layerGroup.getLayers(),_&&(M=M.filter(U=>!(U instanceof L.LayerGroup))),g&&(M=M.filter(U=>!!U.pm),M=M.filter(U=>!U._pmTempLayer),M=M.filter(U=>!L.PM.optIn&&!U.options.pmIgnore||L.PM.optIn&&U.options.pmIgnore===!1)),M},setOptions(h,g=[]){g.length===0&&(this._layers=this.getLayers()),this.options=h,this._layers.forEach(_=>{_.pm&&(_ instanceof L.LayerGroup?g.indexOf(_._leaflet_id)===-1&&(g.push(_._leaflet_id),_.pm.setOptions(h,g)):_.pm.setOptions(h))})}}),Zt.Marker=Zt.extend({_shape:"Marker",initialize(h){this._layer=h,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable(h={draggable:!0}){if(L.Util.setOptions(this,h),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker(h){let g=h.target;g.remove(),this._fireRemove(g),this._fireRemove(this._map,g)},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)}});var Gt=l(Is()),mt={filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this._layer.on("remove",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache(){let h=[...this._markerGroup.getLayers(),...this.markerCache];this.markerCache=h.filter((g,_,S)=>S.indexOf(g)===_)},_removeFromCache(h){let g=this.markerCache.indexOf(h);g>-1&&this.markerCache.splice(g,1)},renderLimits(h){this.markerCache.forEach(g=>{h.includes(g)?this._markerGroup.addLayer(g):this._markerGroup.removeLayer(g)})},applyLimitFilters({latlng:h={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let g=[...this._filterClosestMarkers(h)];this.renderLimits(g)},_filterClosestMarkers(h){let g=[...this.markerCache],_=this.options.limitMarkersToCount;return _===-1?g:(g.sort((S,M)=>{let U=S._latlng.distanceTo(h),ne=M._latlng.distanceTo(h);return U-ne}),g.filter((S,M)=>_>-1?M<_:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(h){this._preventRenderMarkers=!!h}},_t=mt;Zt.Line=Zt.extend({includes:[_t],_shape:"Line",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(h){return this.enabled()?this.disable():this.enable(h),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let h=this._map,g=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(h),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let _=S=>{if(Array.isArray(S[0]))return S.map(_,this);let M=S.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&S.map((U,ne)=>{let ae=this.isPolygon()?(ne+1)%S.length:ne+1;return this._createMiddleMarker(M[ne],M[ae])}),M};this._markers=_(g),this.filterMarkerGroup(),h.addLayer(this._markerGroup)},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._pmTempLayer=!0,this.options.rotate?(g.on("dragstart",this._onRotateStart,this),g.on("drag",this._onRotate,this),g.on("dragend",this._onRotateEnd,this)):(g.on("click",this._onVertexClick,this),g.on("dragstart",this._onMarkerDragStart,this),g.on("move",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||g.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(g),g},_createMiddleMarker(h,g){if(!h||!g)return!1;let _=L.PM.Utils.calcMiddleLatLng(this._map,h.getLatLng(),g.getLatLng()),S=this._createMarker(_),M=L.divIcon({className:"marker-icon marker-icon-middle"});return S.setIcon(M),S.leftM=h,S.rightM=g,h._middleMarkerNext=S,g._middleMarkerPrev=S,S.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),S.on("movestart",this._onMiddleMarkerMoveStart,this),S},_onMiddleMarkerClick(h){let g=h.target;if(!this._vertexValidation("add",h))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMoveStart(h){let g=h.target;if(g.on("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidation("add",h)){g.on("move",this._onMiddleMarkerMovePrevent,this);return}g._dragging=!0,this._addMarker(g,g.leftM,g.rightM)},_onMiddleMarkerMovePrevent(h){let g=h.target;this._vertexValidationDrag(g)},_onMiddleMarkerMoveEnd(h){let g=h.target;if(g.off("move",this._onMiddleMarkerMovePrevent,this),g.off("moveend",this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(g))return;let _=L.divIcon({className:"marker-icon"});g.setIcon(_),setTimeout(()=>{delete g._dragging},100)},_addMarker(h,g,_){h.off("movestart",this._onMiddleMarkerMoveStart,this),h.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let S=h.getLatLng(),M=this._layer._latlngs;delete h.leftM,delete h.rightM;let{indexPath:U,index:ne,parentPath:ae}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),ye=U.length>1?(0,Gt.default)(M,ae):M,Ee=U.length>1?(0,Gt.default)(this._markers,ae):this._markers;ye.splice(ne+1,0,S),Ee.splice(ne+1,0,h),this._layer.setLatLngs(M),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(g,h),this._createMiddleMarker(h,_)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(h,L.PM.Utils.findDeepMarkerIndex(this._markers,h).indexPath,S),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return Hr(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(h){let g=this._layer,_,S;if(this.options.allowSelfIntersection?_=!1:(S=Hr(this._layer.toGeoJSON(15)),_=S.features.length>0),_){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return _;h?this._flashLayer():(g.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(S)}else g.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return _},_flashLayer(){this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(h,g){h.forEach(_=>{Array.isArray(_)?this._updateDisabledMarkerStyle(_,g):_._icon&&(g&&!this._checkMarkerAllowedToDrag(_)?L.DomUtil.addClass(_._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(_._icon,"vertexmarker-disabled"))})},_removeMarker(h){let g=h.target;if(!this._vertexValidation("remove",h))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=ia(this._layer,this._layer.getLatLngs()));let _=this._layer.getLatLngs(),{indexPath:S,index:M,parentPath:U}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!S)return;let ne=S.length>1?(0,Gt.default)(_,U):_,ae=S.length>1?(0,Gt.default)(this._markers,U):this._markers,ye=U[U.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!ye&&(ne.length<=2||this.isPolygon()&&ne.length<=3)){this._flashLayer();return}ne.splice(M,1),this._layer.setLatLngs(_),this.isPolygon()&&ne.length<=2&&ne.splice(0,ne.length);let Ee=!1;if(ne.length<=1&&(ne.splice(0,ne.length),U.length>1&&S.length>1&&(_=Il(_)),this._layer.setLatLngs(_),this._initMarkers(),Ee=!0),bs(_)||this._layer.remove(),_=Il(_),this._layer.setLatLngs(_),this._markers=Il(this._markers),!Ee&&(ae=S.length>1?(0,Gt.default)(this._markers,U):this._markers,g._middleMarkerPrev&&(this._markerGroup.removeLayer(g._middleMarkerPrev),this._removeFromCache(g._middleMarkerPrev)),g._middleMarkerNext&&(this._markerGroup.removeLayer(g._middleMarkerNext),this._removeFromCache(g._middleMarkerNext)),this._markerGroup.removeLayer(g),this._removeFromCache(g),ae)){let nt,qe;if(this.isPolygon()?(nt=(M+1)%ae.length,qe=(M+(ae.length-1))%ae.length):(qe=M-1<0?void 0:M-1,nt=M+1>=ae.length?void 0:M+1),nt!==qe){let bt=ae[qe],It=ae[nt];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(bt,It)}ae.splice(M,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(g,S),this._fireChange(this._layer.getLatLngs(),"Edit")},updatePolygonCoordsFromMarkerDrag(h){let g=this._layer.getLatLngs(),_=h.getLatLng(),{indexPath:S,index:M,parentPath:U}=L.PM.Utils.findDeepMarkerIndex(this._markers,h);(S.length>1?(0,Gt.default)(g,U):g).splice(M,1,_),this._layer.setLatLngs(g)},_getNeighborMarkers(h){let{indexPath:g,index:_,parentPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,h),M=g.length>1?(0,Gt.default)(this._markers,S):this._markers,U=(_+1)%M.length,ne=(_+(M.length-1))%M.length,ae=M[ne],ye=M[U];return{prevMarker:ae,nextMarker:ye}},_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),U=Do(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Do(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return h.getLatLng()===this._markers[0][0].getLatLng()?ne+=1:h.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(U+=1),!(U<=2&&ne<=2)},_onMarkerDragStart(h){let g=h.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),!this._vertexValidation("move",h))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,_),this.options.allowSelfIntersection||(this._coordsBeforeEdit=ia(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(g):this._markerAllowedToDrag=null},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g))return;let{indexPath:_,index:S,parentPath:M}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);if(!_)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(g);let U=_.length>1?(0,Gt.default)(this._markers,M):this._markers,ne=(S+1)%U.length,ae=(S+(U.length-1))%U.length,ye=g.getLatLng(),Ee=U[ae].getLatLng(),nt=U[ne].getLatLng();if(g._middleMarkerNext){let qe=L.PM.Utils.calcMiddleLatLng(this._map,ye,nt);g._middleMarkerNext.setLatLng(qe)}if(g._middleMarkerPrev){let qe=L.PM.Utils.calcMiddleLatLng(this._map,ye,Ee);g._middleMarkerPrev.setLatLng(qe)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g),S=!this.options.allowSelfIntersection&&this.hasSelfIntersection();S&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(S=!1);let M=!this.options.allowSelfIntersection&&S;if(this._fireMarkerDragEnd(h,_,M),M){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(h,_);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_onVertexClick(h){let g=h.target;if(g._dragging)return;let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireVertexClick(h,_)}}),Zt.Polygon=Zt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag(h){let{prevMarker:g,nextMarker:_}=this._getNeighborMarkers(h),S=L.polyline([g.getLatLng(),h.getLatLng()]),M=L.polyline([h.getLatLng(),_.getLatLng()]),U=Do(this._layer.toGeoJSON(15),S.toGeoJSON(15)).features.length,ne=Do(this._layer.toGeoJSON(15),M.toGeoJSON(15)).features.length;return!(U<=2&&ne<=2)}}),Zt.Rectangle=Zt.Polygon.extend({_shape:"Rectangle",_initMarkers(){let h=this._map,g=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,h.addLayer(this._markerGroup),this._markers=[],this._markers[0]=g.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((_,S)=>{let M=this._cornerMarkers.find(U=>U._index===S);M&&M.setLatLng(_)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(h,g){let _=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(_,"vertexPane"),_._origLatLng=h,_._index=g,_._pmTempLayer=!0,_.on("click",this._onVertexClick,this),this._markerGroup.addLayer(_),_},_addMarkerEvents(){this._markers[0].forEach(h=>{h.on("dragstart",this._onMarkerDragStart,this),h.on("drag",this._onMarkerDrag,this),h.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||h.on("contextmenu",this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(h){if(!this._vertexValidation("move",h))return;let g=h.target,_=this._cornerMarkers;g._oppositeCornerLatLng=_.find(M=>M._index===(g._index+2)%4).getLatLng(),g._snapped=!1;let{indexPath:S}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragStart(h,S)},_onMarkerDrag(h){let g=h.target;if(!this._vertexValidationDrag(g)||g._index===void 0)return;this._adjustRectangleForMarkerMove(g);let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDrag(h,_),this._fireChange(this._layer.getLatLngs(),"Edit")},_onMarkerDragEnd(h){let g=h.target;if(!this._vertexValidationDragEnd(g))return;this._cornerMarkers.forEach(S=>{delete S._oppositeCornerLatLng});let{indexPath:_}=L.PM.Utils.findDeepMarkerIndex(this._markers,g);this._fireMarkerDragEnd(h,_),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")},_adjustRectangleForMarkerMove(h){L.extend(h._origLatLng,h._latlng);let g=L.PM.Utils._getRotatedRectangle(h.getLatLng(),h._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(g),this._adjustAllMarkers(h),this._layer.redraw()},_adjustAllMarkers(h){let g=this._layer.getLatLngs()[0];if(g&&g.length!==4&&g.length>0)g.forEach((_,S)=>{this._cornerMarkers[S].setLatLng(_)}),this._cornerMarkers.slice(g.length).forEach(_=>{_.setLatLng(g[0])});else if(!g||!g.length)console.error("The layer has no LatLngs");else{let _=g.findIndex(S=>h.getLatLng().equals(S));_>-1?(this._cornerMarkers[(h._index+1)%4].setLatLng(g[(_+1)%4]),this._cornerMarkers[(h._index+2)%4].setLatLng(g[(_+2)%4]),this._cornerMarkers[(h._index+3)%4].setLatLng(g[(_+3)%4])):this._cornerMarkers.forEach(S=>{S.setLatLng(g[S._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Pa(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let h=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(h[0],h[2],this.getAngle(),this._map||this)}}),Zt.CircleMarker=Zt.extend({_shape:"CircleMarker",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircleMarker",this._maxRadiusOption="maxRadiusCircleMarker",this._editableOption="resizeableCircleMarker",this._updateHiddenPolyCircle()},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||(this._map=this._layer._map),this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off("move",this._syncMarkers,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off("remove",this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off("contextmenu",this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on("move",this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers(){let h=this._map;this._helperLayers&&(this._helperLayers.removeFrom(h),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(h);let g=this._layer.getLatLng(),_=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._centerMarker=this._createCenterMarker(g),this._outerMarker=this._createOuterMarker(S),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(h,g){let _=this._map.project(h),S=L.point(_.x+g,_.y);return this._map.unproject(S)},_createHintLine(h,g){let _=h.getLatLng(),S=g.getLatLng();this._hintline=L.polyline([_,S],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(h){let g=this._createMarker(h);return this.options.draggable?(L.DomUtil.addClass(g._icon,"leaflet-pm-draggable"),g.on("move",this._moveCircle,this)):g.dragging.disable(),g},_createOuterMarker(h){let g=this._createMarker(h);return g.on("drag",this._resizeCircle,this),g},_createMarker(h){let g=new L.Marker(h,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(g,"vertexPane"),g._origLatLng=h,g._pmTempLayer=!0,g.on("dragstart",this._onMarkerDragStart,this),g.on("drag",this._onMarkerDrag,this),g.on("dragend",this._onMarkerDragEnd,this),g.on("click",this._onVertexClick,this),this._helperLayers.addLayer(g),g},_moveCircle(h){if(h.target._cancelDragEventChain)return;let g=this._centerMarker.getLatLng();this._layer.setLatLng(g);let _=this._layer._radius,S=this._getLatLngOnCircle(g,_);this._outerMarker._latlng=S,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers(){let h=this._layer.getLatLng(),g=this._layer._radius,_=this._getLatLngOnCircle(h,g);this._outerMarker.setLatLng(_),this._centerMarker.setLatLng(h),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(_),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng();this._hintline.setLatLngs([h,g])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(h){this._vertexValidation("move",h)&&this._fireMarkerDragStart(h)},_onMarkerDrag(h){let g=h.target;g instanceof L.Marker&&!this._vertexValidationDrag(g)||this._fireMarkerDrag(h)},_onMarkerDragEnd(h){this._extedingMarkerDragEnd();let g=h.target;this._vertexValidationDragEnd(g)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(h))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle(){let h=this._layer._map||this._map;if(h){let g=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),h,this._layer.getLatLng()),_=L.circle(this._layer.getLatLng(),this._layer.options);_.setRadius(g);let S=h&&h.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(_,200,!S).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(_,200,!S),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);return this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?g=lu(this._map,h,g,this._getMinDistanceInMeter(h)):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&(g=lu(this._map,h,g,this._getMaxDistanceInMeter(h))),g},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let h=this._centerMarker.getLatLng(),g=this._outerMarker.getLatLng(),_=this._distanceCalculation(h,g);this.options[this._minRadiusOption]&&_<this.options[this._minRadiusOption]?this._outerMarker.setLatLng(this._outerMarker._orgLatLng):this.options[this._maxRadiusOption]&&_>this.options[this._maxRadiusOption]&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(h,g){return this._map.project(h).distanceTo(this._map.project(g))},_getMinDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,h)},_getMaxDistanceInMeter(h){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,h)},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.Circle=Zt.CircleMarker.extend({_shape:"Circle",initialize(h){this._layer=h,this._enabled=!1,this._minRadiusOption="minRadiusCircle",this._maxRadiusOption="maxRadiusCircle",this._editableOption="resizeableCircle",this._updateHiddenPolyCircle()},enable(h){L.PM.Edit.CircleMarker.prototype.enable.call(this,h||{})},_extendingEnable(){},_extendingDisable(){this._layer.off("remove",this.disable,this);let h=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(h,"leaflet-pm-draggable")},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let h=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!h).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!h),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(h,g){return this._map.distance(h,g)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(h){h.target._dragging||this._fireVertexClick(h,void 0)}}),Zt.ImageOverlay=Zt.extend({_shape:"ImageOverlay",initialize(h){this._layer=h,this._enabled=!1},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},enabled(){return this._enabled},enable(h={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,h),this._map=this._layer._map,!!this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let h=this._layer.getBounds(),g=h.getNorthWest(),_=h.getNorthEast(),S=h.getSouthEast(),M=h.getSouthWest();return[g,_,S,M]}}),Zt.Text=Zt.extend({_shape:"Text",initialize(h){this._layer=h,this._enabled=!1},enable(h){if(L.Util.setOptions(this,h),!!this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");let h=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),h.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(h){this.enabled()?this.disable():this.enable(h)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let h=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,h.off("pm:drag",this._handleSnapping,this),h.on("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.on("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this),h.on("pm:dragstart",this._unsnap,this)},_disableSnapping(){let h=this._layer;h.off("pm:drag",this._handleSnapping,this),h.off("pm:dragend",this._cleanupSnapping,this),h.off("pm:dragstart",this._unsnap,this)},_autoResize(){this.textArea.style.height="1px",this.textArea.style.width="1px";let h=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,g=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${h}px`,this.textArea.style.width=`${g}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&L.DomEvent.on(document,"click",this._documentClick,this)},100)},_documentClick(h){h.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(h={}){let g=this._hasFocus;this._hasFocus=h.type==="focus",!g!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(h){h&&(this.textArea.value=h),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let g=this.options.className.split(" ");this.textArea.classList.add(...g)}let h=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(h),this._layer.once("add",this._createTextMarker,this)},_createTextMarker(h=!1){this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),h===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(h){h.preventDefault()}});var on=function(h,g,_,S,M,U){this._matrix=[h,g,_,S,M,U]};on.init=()=>new L.PM.Matrix(1,0,0,1,0,0),on.prototype={transform(h){return this._transform(h.clone())},_transform(h){let g=this._matrix,{x:_,y:S}=h;return h.x=g[0]*_+g[1]*S+g[4],h.y=g[2]*_+g[3]*S+g[5],h},untransform(h){let g=this._matrix;return new L.Point((h.x/g[0]-g[4])/g[0],(h.y/g[2]-g[5])/g[2])},clone(){let h=this._matrix;return new L.PM.Matrix(h[0],h[1],h[2],h[3],h[4],h[5])},translate(h){if(h===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let g,_;return typeof h=="number"?(g=h,_=h):(g=h.x,_=h.y),this._add(1,0,0,1,g,_)},scale(h,g){if(h===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let _,S;return g=g||L.point(0,0),typeof h=="number"?(_=h,S=h):(_=h.x,S=h.y),this._add(_,0,0,S,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},rotate(h,g){let _=Math.cos(h),S=Math.sin(h);return g=g||new L.Point(0,0),this._add(_,S,-S,_,g.x,g.y)._add(1,0,0,1,-g.x,-g.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(h,g,_,S,M,U){let ne=[[],[],[]],ae=this._matrix,ye=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]],Ee=[[h,_,M],[g,S,U],[0,0,1]],nt;h&&h instanceof L.PM.Matrix&&(ae=h._matrix,Ee=[[ae[0],ae[2],ae[4]],[ae[1],ae[3],ae[5]],[0,0,1]]);for(let qe=0;qe<3;qe+=1)for(let bt=0;bt<3;bt+=1){nt=0;for(let It=0;It<3;It+=1)nt+=ye[qe][It]*Ee[It][bt];ne[qe][bt]=nt}return this._matrix=[ne[0][0],ne[1][0],ne[0][1],ne[1][1],ne[0][2],ne[1][2]],this}};var yn=on,ln={calcMiddleLatLng(h,g,_){let S=h.project(g),M=h.project(_);return h.unproject(S._add(M)._divideBy(2))},findLayers(h){let g=[];return h.eachLayer(_=>{(_ instanceof L.Polyline||_ instanceof L.Marker||_ instanceof L.Circle||_ instanceof L.CircleMarker||_ instanceof L.ImageOverlay)&&g.push(_)}),g=g.filter(_=>!!_.pm),g=g.filter(_=>!_._pmTempLayer),g=g.filter(_=>!L.PM.optIn&&!_.options.pmIgnore||L.PM.optIn&&_.options.pmIgnore===!1),g},circleToPolygon(h,g=60,_=!0){let S=h.getLatLng(),M=h.getRadius(),U=Xi(S,M,g,0,_),ne=[];for(let ae=0;ae<U.length;ae+=1){let ye=[U[ae].lat,U[ae].lng];ne.push(ye)}return L.polygon(ne,h.options)},disablePopup(h){h.getPopup()&&(h._tempPopupCopy=h.getPopup(),h.unbindPopup())},enablePopup(h){h._tempPopupCopy&&(h.bindPopup(h._tempPopupCopy),delete h._tempPopupCopy)},_fireEvent(h,g,_,S=!1){h.fire(g,_,S);let{groups:M}=this.getAllParentGroups(h);M.forEach(U=>{U.fire(g,_,S)})},getAllParentGroups(h){let g=[],_=[],S=M=>{for(let U in M._eventParents)if(g.indexOf(U)===-1){g.push(U);let ne=M._eventParents[U];_.push(ne),S(ne)}};return!h._pmLastGroupFetch||!h._pmLastGroupFetch.time||new Date().getTime()-h._pmLastGroupFetch.time>1e3?(S(h),h._pmLastGroupFetch={time:new Date().getTime(),groups:_,groupIds:g},{groupIds:g,groups:_}):{groups:h._pmLastGroupFetch.groups,groupIds:h._pmLastGroupFetch.groupIds}},createGeodesicPolygon:Xi,getTranslation:ur,findDeepCoordIndex(h,g,_=!0){let S,M=ne=>(ae,ye)=>{let Ee=ne.concat(ye);if(_){if(ae.lat&&ae.lat===g.lat&&ae.lng===g.lng)return S=Ee,!0}else if(ae.lat&&L.latLng(ae).equals(g))return S=Ee,!0;return Array.isArray(ae)&&ae.some(M(Ee))};h.some(M([]));let U={};return S&&(U={indexPath:S,index:S[S.length-1],parentPath:S.slice(0,S.length-1)}),U},findDeepMarkerIndex(h,g){let _,S=U=>(ne,ae)=>{let ye=U.concat(ae);return ne._leaflet_id===g._leaflet_id?(_=ye,!0):Array.isArray(ne)&&ne.some(S(ye))};h.some(S([]));let M={};return _&&(M={indexPath:_,index:_[_.length-1],parentPath:_.slice(0,_.length-1)}),M},_getIndexFromSegment(h,g){if(g&&g.length===2){let _=this.findDeepCoordIndex(h,g[0]),S=this.findDeepCoordIndex(h,g[1]),M=Math.max(_.index,S.index);return(_.index===0||S.index===0)&&M!==1&&(M+=1),{indexA:_,indexB:S,newIndex:M,indexPath:_.indexPath,parentPath:_.parentPath}}return null},_getRotatedRectangle(h,g,_,S){let M=Ke(S,h),U=Ke(S,g),ne=_*Math.PI/180,ae=Math.cos(ne),ye=Math.sin(ne),Ee=(U.x-M.x)*ae+(U.y-M.y)*ye,nt=(U.y-M.y)*ae-(U.x-M.x)*ye,qe=Ee*ae+M.x,bt=Ee*ye+M.y,It=-nt*ye+M.x,tn=nt*ae+M.y,wn=gt(S,M),Pn=gt(S,{x:qe,y:bt}),dr=gt(S,U),tt=gt(S,{x:It,y:tn});return[wn,Pn,dr,tt]},pxRadiusToMeterRadius(h,g,_){let S=g.project(_),M=L.point(S.x+h,S.y);return g.distance(g.unproject(M),_)}},In=ln;L.PM=L.PM||{version:ls.version,Map:Us,Toolbar:Bl,Draw:_s,Edit:Zt,Utils:In,Matrix:yn,activeLang:"en",optIn:!1,initialize(h){this.addInitHooks(h)},setOptIn(h){this.optIn=!!h},addInitHooks(){function h(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(h);function g(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(g);function _(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(_);function S(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(S);function M(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(M);function U(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(U);function ne(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(ne);function ae(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(ae);function ye(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(ye)},reInitLayer(h){h instanceof L.LayerGroup&&h.eachLayer(g=>{this.reInitLayer(g)}),h.pm||L.PM.optIn&&h.options.pmIgnore!==!1||h.options.pmIgnore||(h instanceof L.Map?h.pm=new L.PM.Map(h):h instanceof L.Marker?h.options.textMarker?(h.pm=new L.PM.Edit.Text(h),h.pm._initTextMarker(),h.pm._createTextMarker(!1)):h.pm=new L.PM.Edit.Marker(h):h instanceof L.Circle?h.pm=new L.PM.Edit.Circle(h):h instanceof L.CircleMarker?h.pm=new L.PM.Edit.CircleMarker(h):h instanceof L.Rectangle?h.pm=new L.PM.Edit.Rectangle(h):h instanceof L.Polygon?h.pm=new L.PM.Edit.Polygon(h):h instanceof L.Polyline?h.pm=new L.PM.Edit.Line(h):h instanceof L.LayerGroup?h.pm=new L.PM.Edit.LayerGroup(h):h instanceof L.ImageOverlay&&(h.pm=new L.PM.Edit.ImageOverlay(h)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick(h){let g=this._map.mouseEventToLayerPoint(h),_,S;for(let M=this._drawFirst;M;M=M.next)_=M.layer,_.options.interactive&&_._containsPoint(g)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(_))&&(S=_);S&&(L.DomEvent.fakeStop(h),this._fireEvent([S],h))}}),L.PM.initialize()})();class op extends Wn.Circle{constructor(n,r){const i=r.radius||10;super(n,i,r);Ze(this,"properties");Ze(this,"angleCache",new Map);Ze(this,"lastCenter");Ze(this,"lastCenterCosLat");Ze(this,"_pendingNameUpdate",!1);Ze(this,"_nameUpdateTimeout",null);vn.measure("Circle.constructor.init",()=>{this.properties={type:"Circle",style:{name:r.name||""}},requestAnimationFrame(()=>{this.updateProperties()}),this.on("add",()=>{requestAnimationFrame(()=>{this.updateProperties()})})},"Circle")}updateProperties(){vn.measure("Circle.updateProperties",()=>{var a,l,c,d;const n=this.getRadius(),r=this.getLatLng(),i=((l=(a=this.properties)==null?void 0:a.style)==null?void 0:l.name)||"",s=((c=this.properties)==null?void 0:c.style)||{},o={type:"Circle",radius:n,diameter:n*2,surface:Math.PI*Math.pow(n,2),perimeter:2*Math.PI*n,center:{lat:r.lat,lng:r.lng},style:{...s,color:this.options.color||"#2b6451",weight:this.options.weight||3,opacity:this.options.opacity||1,fillColor:this.options.fillColor||"#2b6451",fillOpacity:this.options.fillOpacity||.2,dashArray:((d=this.options)==null?void 0:d.dashArray)||"",name:i}};JSON.stringify(this.properties)!==JSON.stringify(o)&&(this.properties=o,this.fire("properties:updated",{shape:this,properties:this.properties}))},"Circle")}setName(n){vn.measure("Circle.setName",()=>{var r,i;((i=(r=this.properties)==null?void 0:r.style)==null?void 0:i.name)!==n&&(this.properties.style||(this.properties.style={}),this.properties.style.name=n,!this._pendingNameUpdate&&(this._pendingNameUpdate=!0,this._nameUpdateTimeout&&clearTimeout(this._nameUpdateTimeout),this._nameUpdateTimeout=setTimeout(()=>{this._pendingNameUpdate=!1,this._nameUpdateTimeout=null,this.fire("properties:updated",{shape:this,properties:this.properties})},100)))},"Circle")}getName(){return vn.measure("Circle.getName",()=>{var n,r;return((r=(n=this.properties)==null?void 0:n.style)==null?void 0:r.name)||""},"Circle")}setRadius(n){return vn.measure("Circle.setRadius",()=>(super.setRadius(n),this.updateProperties(),this),"Circle")}setLatLng(n){return vn.measure("Circle.setLatLng",()=>(super.setLatLng(n),this.updateProperties(),this),"Circle")}calculatePointOnCircle(n){return vn.measure("Circle.calculatePointOnCircle",()=>{const r=this.getLatLng(),i=this.getRadius();let s=this.angleCache.get(n);if(!s){const o=n*Math.PI/180;s={sin:Math.sin(o),cos:Math.cos(o)},this.angleCache.set(n,s)}return(!this.lastCenter||!this.lastCenter.equals(r))&&(this.lastCenter=r,this.lastCenterCosLat=Math.cos(r.lat*Math.PI/180)),Wn.latLng(r.lat+i/111319.9*s.sin,r.lng+i/(111319.9*this.lastCenterCosLat)*s.cos)},"Circle")}getCardinalPoints(){return vn.measure("Circle.getCardinalPoints",()=>[0,45,90,135,180,225,270,315].map(n=>this.calculatePointOnCircle(n)),"Circle")}calculateAngleFromPoint(n){return vn.measure("Circle.calculateAngleFromPoint",()=>{const r=this.getLatLng(),i=n.lng-r.lng,s=n.lat-r.lat;let o=Math.atan2(s,i)*180/Math.PI;return o<0&&(o+=360),o},"Circle")}resizeFromControlPoint(n){vn.measure("Circle.resizeFromControlPoint",()=>{const i=this.getLatLng().distanceTo(n);i>0&&super.setRadius(i)},"Circle")}clearCache(){this.angleCache.clear(),this.lastCenter=void 0,this.lastCenterCosLat=void 0}}const Yv=(t,e)=>{if(!t||typeof t!="string"||!t.startsWith("#"))return`rgba(0, 0, 0, ${e})`;const n=parseInt(t.slice(1,3),16),r=parseInt(t.slice(3,5),16),i=parseInt(t.slice(5,7),16);return`rgba(${n}, ${r}, ${i}, ${e})`},m5=(t,e)=>{t.style.fontSize=e.fontSize,t.style.color=e.color,t.style.backgroundColor=Yv(e.backgroundColor,e.backgroundOpacity),e.hasBorder?t.style.border=`${e.borderWidth} solid ${Yv(e.borderColor,e.borderOpacity)}`:t.style.border="none",t.style.padding=e.padding,t.style.borderRadius=e.borderRadius},Wl=t=>{document.querySelectorAll(".drawing-help-message").forEach(r=>r.remove());const n=Vt.DomUtil.create("div","drawing-help-message");return n.innerHTML=t,n.style.cssText=`
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 8px 16px;
    border-radius: 4px;
    font-size: 14px;
    z-index: 2000;
    pointer-events: none;
    text-align: center;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
  `,document.body.appendChild(n),n};function v5(t,e,n){const r=156543.03392*Math.cos(e*Math.PI/180)/Math.pow(2,n);return t/r}const ts=(t,e="m",n="")=>{let r,i;return e==="m²"?t>=1e4?(r=(t/1e4).toFixed(2),i="ha"):(r=t.toFixed(2),i="m²"):e==="m"?t>=1e3?(r=(t/1e3).toFixed(2),i="km"):(r=t.toFixed(2),i="m"):(r=t.toFixed(2),i=e),n?`${n}: ${r} ${i}`:`${r} ${i}`},BU=t=>({...t,clientX:t.clientX,clientY:t.clientY,button:t.button||0,buttons:t.buttons||0,altKey:t.altKey||!1}),RU=(t,e)=>{let n;return function(...r){window.clearTimeout(n),n=window.setTimeout(()=>t.apply(this,r),e)}},qd=(t,e)=>{let n=0;return function(...r){const i=Date.now();if(!(i-n<e))return n=i,t.apply(this,r)}};function FU(){const t=Lt(null),e=Lt(null),n=Lt(null),r=Lt(null),i=Lt(""),s=Lt(null),o=Lt(!1),a=Lt(null);window.addEventListener("clearControlPoints",()=>{s.value=null,n.value&&n.value.clearLayers(),r.value&&r.value.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(G=>G.remove()),document.querySelectorAll(".drawing-help-message").forEach(G=>G.remove())}),Ku(()=>{window.removeEventListener("clearControlPoints",()=>{}),t.value&&(t.value.remove(),t.value=null)});const l=(G,re="Double-cliquez pour éditer")=>{const he={fontSize:"14px",color:"#000000",backgroundColor:"#FFFFFF",backgroundOpacity:1,borderColor:"#000000",borderWidth:"1px",borderOpacity:1,padding:"5px 10px",borderRadius:"3px",hasBorder:!0,rotation:0,physicalSize:2},ce=(Se,de)=>{var He;const Xe=((He=t.value)==null?void 0:He.getZoom())||14,$e=G.lat,Je=v5(de.physicalSize,$e,Xe);return`<div class="text-container" style="width:${Je}px;height:${Je}px;transform:rotate(${de.rotation}deg)">
        <div class="text-annotation" style="font-size:${Je*.2}px;color:${de.color};background-color:${Yv(de.backgroundColor,de.backgroundOpacity)};border:${de.hasBorder?de.borderWidth+" solid "+Yv(de.borderColor,de.borderOpacity):"none"};padding:${de.padding};border-radius:${de.borderRadius}">${Se}</div>
        <div class="text-controls"><div class="control-button rotate"></div><div class="control-button move"></div></div>
      </div>`},ve=()=>{if(!t.value)return;const Se=J.getIcon(),de={html:ce(J.properties.text,J.properties.style),className:Se.options.className};J.setIcon(Vt.divIcon(de))},ee=Vt.divIcon({html:ce(re,he),className:"text-container",iconSize:[40,40],iconAnchor:[20,20]}),J=Vt.marker(G,{icon:ee,draggable:!1,pmIgnore:!0});J.properties={type:"text",text:re,style:{...he}},t.value&&(t.value.on("zoomend",ve),J.on("remove",()=>{var Se;(Se=t.value)==null||Se.off("zoomend",ve)})),ve();let Oe=!1,Te=!1,Ye=0,ge=0;const Q=Se=>{if(!t.value)return;const de=Se.target;if(de.classList.contains("rotate")){Oe=!0;const Xe=J.getLatLng(),$e=t.value.mouseEventToLatLng(Se);Ye=Math.atan2($e.lat-Xe.lat,$e.lng-Xe.lng)*180/Math.PI,ge=J.properties.style.rotation||0}else de.classList.contains("move")&&(Te=!0);document.addEventListener("mousemove",ie),document.addEventListener("mouseup",fe)},ie=Se=>{if(!(!Te||!t.value)){if(Oe){const de=J.getLatLng(),Xe=t.value.mouseEventToLatLng(Se),$e=Math.atan2(Xe.lat-de.lat,Xe.lng-de.lng)*180/Math.PI,Je=(ge+($e-Ye))%360;J.properties.style.rotation=Je;const He=J.getIcon(),Ge={html:ce(J.properties.text,J.properties.style),className:He.options.className};J.setIcon(Vt.divIcon(Ge))}else if(Te){const de=BU(Se),Xe=t.value.mouseEventToLatLng(de);J.setLatLng(Xe)}}},fe=()=>{Oe=!1,Te=!1,document.removeEventListener("mousemove",ie),document.removeEventListener("mouseup",fe)};return J.on("add",()=>{const Se=J.getElement();Se&&Se.querySelectorAll(".control-button").forEach(Xe=>{Xe.addEventListener("mousedown",Q)})}),J.on("remove",()=>{const Se=J.getElement();Se&&Se.querySelectorAll(".control-button").forEach(Xe=>{Xe.removeEventListener("mousedown",Q)})}),J.on("dblclick",Se=>{var Ge;Vt.DomEvent.stopPropagation(Se);const de=(Ge=J.getElement())==null?void 0:Ge.querySelector(".text-annotation");if(!de)return;de.contentEditable="true",de.focus(),de.classList.add("editing");const Xe=window.getSelection(),$e=document.createRange();$e.selectNodeContents(de),Xe==null||Xe.removeAllRanges(),Xe==null||Xe.addRange($e);const Je=()=>{de.contentEditable="false",de.classList.remove("editing");const xt=de.innerText.trim();if(xt){J.properties.text=xt;const Et=J.getIcon(),Kt={html:ce(xt,J.properties.style),className:Et.options.className};J.setIcon(Vt.divIcon(Kt))}de.removeEventListener("blur",Je),de.removeEventListener("keydown",He)},He=xt=>{xt.key==="Enter"&&!xt.shiftKey&&(xt.preventDefault(),Je())};de.addEventListener("blur",Je),de.addEventListener("keydown",He)}),J},c=(G,re)=>{const he=Vt.DomUtil.create("div","measure-tooltip");if(he.innerHTML=re,he.style.cssText=`
      position: fixed;
      background-color: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 12px;
      z-index: 2000;
      pointer-events: none;
      white-space: pre-line;
    `,document.body.appendChild(he),t.value){const ce=t.value.latLngToContainerPoint(G);he.style.left=`${ce.x+10}px`,he.style.top=`${ce.y-25}px`}return he},d=qd((G,re,he)=>{if(G&&(G.innerHTML=he,t.value)){const ce=t.value.latLngToContainerPoint(re);G.style.left=`${ce.x+10}px`,G.style.top=`${ce.y-25}px`}},100),p=(G,re,he)=>{G.on("mouseover",()=>{const ce=c(G.getLatLng(),he());G.measureDiv=ce}),G.on("mousemove",ce=>{G.measureDiv&&t.value&&d(G.measureDiv,ce.latlng,he())}),G.on("mouseout",()=>{G.measureDiv&&(G.measureDiv.remove(),G.measureDiv=void 0)})};let v=[];const m=()=>{var G;v.cleanup&&v.cleanup(),n.value&&n.value.clearLayers(),v=[],(G=r.value)==null||G.clearLayers(),document.querySelectorAll(".measure-tooltip").forEach(re=>re.remove()),e.value&&e.value.getLayers().forEach(re=>{re instanceof za&&re.clearHelperPoints()})},x=(G,re="#2563EB")=>{const he=Vt.circleMarker(G,{radius:6,color:re,fillColor:re,fillOpacity:1,weight:2,className:"control-point",pmIgnore:!0});return n.value&&n.value.addLayer(he),he},E=(G,re)=>{var ce,ve,ee,J,Oe,Te;console.log("Input layer:",{type:re,instanceof:{Circle:G instanceof Vt.Circle,Rectangle:G instanceof Vt.Rectangle,Polygon:G instanceof Vt.Polygon,Polyline:G instanceof Vt.Polyline,ElevationLine:G instanceof Sd,Line:G instanceof ea},options:G.options});const he={type:re,style:G.options||{}};try{if(G instanceof Vt.Circle){const Ye=G.getRadius();he.radius=Ye,he.diameter=Ye*2,he.surface=Math.PI*Math.pow(Ye,2),he.perimeter=2*Math.PI*Ye,he.center=G.getLatLng()}else if(G instanceof Vt.Rectangle){const Ye=G.getBounds(),ge=Ye.getNorthEast(),Q=Ye.getSouthWest(),ie=Hu([[Q.lng,Q.lat],[ge.lng,Q.lat]]),fe=Hu([[Q.lng,Q.lat],[Q.lng,ge.lat]]),Se=Gd(ie,{units:"meters"}),de=Gd(fe,{units:"meters"});he.width=Se,he.height=de,he.surface=Se*de,he.perimeter=2*(Se+de),he.dimensions={width:Se,height:de}}else if(G instanceof Vt.Polygon)try{const ge=G.getLatLngs()[0].map(ie=>[ie.lng,ie.lat]);ge.push(ge[0]);const Q=Uu([ge]);he.surface=Rc(Q),he.perimeter=Gd(Hu(ge),{units:"meters"})}catch(Ye){console.error("Erreur lors du calcul des propriétés du polygone",Ye)}else if(G instanceof Vt.Polyline&&!(G instanceof Vt.Polygon))try{const Ye=G.getLatLngs();let ge=0;for(let Q=1;Q<Ye.length;Q++)ge+=Ye[Q].distanceTo(Ye[Q-1]);he.length=ge}catch(Ye){console.error("Erreur lors du calcul de la longueur de la ligne",Ye)}he.style={...he.style,color:((ce=G.options)==null?void 0:ce.color)||"#3388ff",weight:((ve=G.options)==null?void 0:ve.weight)||3,opacity:((ee=G.options)==null?void 0:ee.opacity)||1,fillColor:((J=G.options)==null?void 0:J.fillColor)||"#3388ff",fillOpacity:((Oe=G.options)==null?void 0:Oe.fillOpacity)||.2,dashArray:((Te=G.options)==null?void 0:Te.dashArray)||""}}catch(Ye){console.error("Error calculating shape properties:",Ye)}return he},A=(G,re=2)=>{var J;if(!t.value){console.warn("Map is not available for text size update");return}const he=t.value.getZoom(),ce=G.getLatLng().lat,ve=v5(re,ce,he),ee=(J=G.getElement())==null?void 0:J.querySelector(".text-annotation");ee&&(G.properties.style.fontSize=`${ve}px`,G.properties.physicalWidth=re,G.properties.physicalHeight=re,m5(ee,G.properties.style))},k=(G,re,he)=>{const ce=Vt.map(G).setView(re,he);t.value=ce,Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:5}).addTo(ce);const ve=new Vt.FeatureGroup;return ve.addTo(ce),e.value=ve,n.value=Vt.featureGroup().addTo(ce),r.value=Vt.featureGroup().addTo(ce),ce.pm.setGlobalOptions({snappable:!0,snapDistance:20,allowSelfIntersection:!1,preventMarkerRemoval:!0,syncLayersOnDrag:!0,layerGroup:ve,snapLayers:[ve,r.value],templineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6},hintlineStyle:{color:"#3388ff",weight:2,opacity:.7,dashArray:"6,6",radius:6}}),ce.on("pm:drawstart",ee=>{o.value=!0,ee.shape==="Circle"&&i.value==="Semicircle"&&(ce.getContainer().style.cursor="crosshair")}),ce.on("pm:drawend",()=>{o.value=!1,ce.getContainer().style.cursor="",s.value&&Wl("Cliquez sur la forme pour afficher les points de contrôle")}),ce.on("pm:create",De),ve.on("click",ee=>{var Oe,Te,Ye,ge,Q,ie,fe,Se,de,Xe,$e,Je,He,Ge,xt;Vt.DomEvent.stopPropagation(ee);const J=ee.layer;if(J.name&&!((Oe=J.properties)!=null&&Oe.name)?(J.properties||(J.properties={}),J.properties.name=J.name):(Te=J.properties)!=null&&Te.name&&!J.name&&(J.name=J.properties.name),console.log("[featureGroup click] État du nom:",{directName:J.name,propertiesName:(Ye=J.properties)==null?void 0:Ye.name,fullProperties:J.properties}),(ge=r.value)==null||ge.clearLayers(),m(),s.value=J,J instanceof op)z(J);else if(J instanceof Vt.Circle){console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(J,"name"),directName:J.name,propertiesName:(Q=J.properties)==null?void 0:Q.name,styleNameBeforeTransfer:(fe=(ie=J.properties)==null?void 0:ie.style)==null?void 0:fe.name,nameIsEnumerable:Object.keys(J).includes("name"),allProperties:Object.keys(J.properties||{}),_dbId:J._dbId});const Et=J.name,Kt=(Se=J.properties)==null?void 0:Se.name,sn=(Xe=(de=J.properties)==null?void 0:de.style)==null?void 0:Xe.name,an=J._dbId,Qe=new op(J.getLatLng(),{...J.options,radius:J.getRadius()});J.properties?Qe.properties={...J.properties||{}}:Qe.updateProperties();const at=Et||Kt||sn;at&&(Qe.properties.name=at,Qe.properties.style||(Qe.properties.style={}),Qe.properties.style.name=at,Qe.name=at),an&&(Qe._dbId=an),console.log("[useMapDrawing] Cercle après conversion:",{name:Qe.name,propertiesName:Qe.properties.name,stylePropertyName:($e=Qe.properties.style)==null?void 0:$e.name,allProperties:Object.keys(Qe.properties||{})}),(Je=e.value)==null||Je.removeLayer(J),(He=e.value)==null||He.addLayer(Qe),s.value=Qe,z(Qe)}else if(J instanceof za)K(J);else if(J instanceof Vt.Rectangle){const Et=new za(J.getBounds(),{...J.options});Et.updateProperties(),(Ge=e.value)==null||Ge.removeLayer(J),(xt=e.value)==null||xt.addLayer(Et),s.value=Et,K(Et)}else J instanceof Vt.Polygon?B(J):J instanceof ea||J instanceof Vt.Polyline?N(J):J instanceof kh&&V(J)}),ce.on("pm:edit",ee=>{var Oe,Te,Ye;console.log("[pm:edit] Début",{layer:ee.layer,currentProperties:ee.layer.properties});const J=ee.layer;if(J){const ge=((Oe=J.properties)==null?void 0:Oe.type)||"unknown";if(pe(J,ge),console.log("[pm:edit] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value}),J instanceof op)z(J);else if(J instanceof za)K(J);else if(J instanceof Vt.Rectangle){const Q=new za(J.getBounds(),{...J.options});Q.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Ye=e.value)==null||Ye.addLayer(Q),s.value=Q,K(Q)}else J instanceof Vt.Polygon?B(J):J instanceof ea?(J.updateProperties(),pe(J,"Line"),N(J)):J instanceof Vt.Polyline?N(J):J instanceof kh&&(J.updateProperties(),V(J))}}),ce.on("pm:dragstart",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Wl("Déplacez la forme à l'endroit souhaité")}),ce.on("pm:dragend",ee=>{var Oe,Te,Ye;console.log("[pm:dragend] Début",{layer:ee.layer,currentProperties:ee.layer.properties});const J=ee.layer;if(J){const ge=((Oe=J.properties)==null?void 0:Oe.type)||"unknown";if(J instanceof Vt.Rectangle&&!(J instanceof za)){const Q=new za(J.getBounds(),{...J.options});Q.updateProperties(),(Te=e.value)==null||Te.removeLayer(J),(Ye=e.value)==null||Ye.addLayer(Q),s.value=Q,K(Q)}else J instanceof ea?(J.updateProperties(),pe(J,"Line"),N(J)):pe(J,ge);console.log("[pm:dragend] Après updateLayerProperties",{updatedProperties:J.properties,selectedShape:s.value})}setTimeout(()=>{Wl("Cliquez sur la forme pour afficher les points de contrôle")},100)}),ce.on("pm:remove",()=>{var ee;(ee=document.querySelector(".drawing-help-message"))==null||ee.remove()}),ce.on("pm:select",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()),Wl("Utilisez les points de contrôle pour modifier la forme")}),ce.on("pm:unselect",()=>{document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove())}),ce.on("zoomstart",()=>{s.value&&(m(),s.value=null,document.querySelectorAll(".drawing-help-message").forEach(ee=>ee.remove()))}),ce},D=()=>{if(!(!t.value||!e.value||!e.value.getLayers().length))try{const G=e.value.getBounds();if(G.isValid()){const re={zoomAnimation:t.value.options.zoomAnimation,fadeAnimation:t.value.options.fadeAnimation,markerZoomAnimation:t.value.options.markerZoomAnimation};t.value.options.zoomAnimation=!1,t.value.options.fadeAnimation=!1,t.value.options.markerZoomAnimation=!1,t.value.fitBounds(G,{padding:[50,50],maxZoom:18,animate:!1,duration:0,noMoveStart:!0}),t.value.invalidateSize({animate:!1,pan:!1}),setTimeout(()=>{try{t.value.options.fadeAnimation=re.fadeAnimation,setTimeout(()=>{try{t.value.options.zoomAnimation=re.zoomAnimation,t.value.options.markerZoomAnimation=re.markerZoomAnimation}catch(he){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",he)}},500)}catch(he){console.warn("[useMapDrawing] Erreur lors de la restauration des animations:",he)}},500)}}catch(G){if(console.warn("[useMapDrawing] Error adjusting view:",G),t.value)try{t.value.options.zoomAnimation=!0,t.value.options.fadeAnimation=!0,t.value.options.markerZoomAnimation=!0,t.value.invalidateSize({animate:!1,pan:!1})}catch(re){console.error("[useMapDrawing] Erreur lors de la restauration après échec:",re)}}},$=G=>{var he;if(!t.value)return;document.querySelectorAll(".drawing-help-message").forEach(ce=>ce.remove());try{const ce=t.value.pm;ce.globalEditModeEnabled()&&ce.disableGlobalEditMode(),ce.globalRemovalModeEnabled()&&ce.disableGlobalRemovalMode(),ce.disableDraw(),m(),(he=r.value)==null||he.clearLayers()}catch(ce){console.error("Error disabling modes:",ce)}if(i.value=G,!G){m();return}let re=G;switch(G){case"Note":re="GeoNote";break;case"Polygon":re="Polygon";break;case"Line":re="Line";break;case"ElevationLine":re="ElevationLine";break;default:re=G}G=re,Z(),setTimeout(()=>{var ce,ve,ee,J,Oe,Te,Ye,ge,Q,ie,fe,Se,de;try{switch(G){case"Polygon":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(ce=t.value)==null||ce.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(ve=t.value)==null||ve.off("pm:create"),(ee=t.value)==null||ee.on("pm:create",$e=>{var Je,He,Ge;if($e.shape==="Polygon"&&$e.layer){const xt=$e.layer.getLatLngs()[0];(Je=t.value)==null||Je.removeLayer($e.layer),(He=e.value)!=null&&He.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Et=new cd(xt,{color:"#3B82F6",weight:3,fillColor:"#3B82F6",fillOpacity:.2});e.value&&(e.value.addLayer(Et),s.value=Et,Et.updateProperties()),(Ge=t.value)==null||Ge.pm.disableDraw(),Z()}});break;case"Circle":e.value&&e.value.getLayers().filter(Je=>Je instanceof za).forEach(Je=>{Je.toggleHelperPoints(t.value,!0,"#DC2626","#2563EB")}),t.value.pm.setGlobalOptions({snapDistance:15,snapSegment:!0,snapVertices:!0,snapLayers:[e.value,r.value],snapMiddle:!0,snapIntersections:!0}),Wl("Positionnez le centre du cercle. Points bleus : milieu des côtés, Points rouges : sommets, Point vert : centre"),t.value.pm.enableDraw("Circle",{finishOn:"mouseup",continueDrawing:!1});break;case"Rectangle":Wl("Cliquez et maintenez pour dessiner un rectangle, relâchez pour terminer"),(J=t.value)==null||J.pm.enableDraw("Rectangle",{finishOn:"mouseup"});break;case"Polygon":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer le polygone"),(Oe=t.value)==null||Oe.pm.enableDraw("Polygon",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20});break;case"Line":Wl("Cliquez pour ajouter des points, double-cliquez pour terminer la ligne"),(Te=t.value)==null||Te.pm.enableDraw("Line",{finishOn:"dblclick",continueDrawing:!1,snapMiddle:!0,snapDistance:20}),(Ye=t.value)==null||Ye.off("pm:create"),(ge=t.value)==null||ge.on("pm:create",$e=>{var Je,He,Ge;if($e.shape==="Line"&&$e.layer){const xt=$e.layer.getLatLngs();(Je=t.value)==null||Je.removeLayer($e.layer),(He=e.value)!=null&&He.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Et=new ea(xt,{color:"#3B82F6",weight:3,opacity:.8});e.value&&(e.value.addLayer(Et),s.value=Et,Et.updateProperties()),(Ge=t.value)==null||Ge.pm.disableDraw(),Z()}});break;case"Text":if(Wl("Cliquez pour ajouter du texte, double-cliquez pour éditer"),t.value){const $e=Je=>{if(!t.value||!e.value)return;const He=l(Je.latlng);e.value.addLayer(He),s.value=He,t.value.off("click",$e),$("")};t.value.on("click",$e)}break;case"GeoNote":if(Wl("Cliquez pour ajouter une note géolocalisée, double-cliquez pour éditer"),t.value){const $e=async Je=>{if(!(!t.value||!e.value))try{const He=Tp(),Ge=new kh(Je.latlng,{color:"#3B82F6",name:"Note géolocalisée",description:"",columnId:"1"});e.value.addLayer(Ge),s.value=Ge,Ge.updateProperties();try{const xt=He.currentMapId||void 0,Et=await Ge.saveNote(xt);console.log(`[useMapDrawing] Note sauvegardée avec succès, ID backend: ${Et}`);const Kt=Ge._leaflet_id;console.log(`[useMapDrawing] ID Leaflet: ${Kt}, ID backend: ${Et}`),window.dispatchEvent(new CustomEvent("note:created",{detail:{geoNote:Ge,leafletId:Kt,backendId:Et}})),Ge.openPopup()}catch(xt){console.error("[useMapDrawing] Erreur lors de la sauvegarde de la note:",xt),Mh(async()=>{const{useNotificationStore:Et}=await Promise.resolve().then(()=>QB);return{useNotificationStore:Et}},void 0).then(({useNotificationStore:Et})=>{Et().error("Erreur lors de la création de la note")})}t.value.off("click",$e),$("")}catch(He){console.error("[useMapDrawing] Erreur lors de la création de la note:",He),t.value.off("click",$e),$("")}};t.value.on("click",$e)}break;case"delete":Wl("Cliquez sur une forme pour la supprimer"),(Q=t.value)==null||Q.pm.enableGlobalRemovalMode();break;case"ElevationLine":Wl("Cliquez et maintenez pour tracer le profil altimétrique"),(ie=t.value)==null||ie.pm.enableDraw("Line",{finishOn:"mouseup",continueDrawing:!1,allowSelfIntersection:!1,templineStyle:{color:"#FF4500",weight:4,opacity:.8}}),(fe=t.value)==null||fe.pm.setGlobalOptions({continueDrawing:!1,finishOn:"mouseup",preventMarkerRemoval:!0,preventVertexEdit:!0,preventMarkerEdit:!0}),(Se=t.value)==null||Se.off("pm:create"),(de=t.value)==null||de.on("pm:create",async $e=>{var Je,He,Ge;if($e.shape==="Line"&&$e.layer){const xt=$e.layer.getLatLngs();(Je=t.value)==null||Je.removeLayer($e.layer),(He=e.value)!=null&&He.hasLayer($e.layer)&&e.value.removeLayer($e.layer);const Et=new Sd(xt,{color:"#FF4500",weight:4,opacity:.8,interactive:!1,pmIgnore:!0});if(e.value){e.value.addLayer(Et),s.value=Et,await Et.updateElevationProfile();const Kt=E(Et,"ElevationLine");Object.assign(Et.properties,{...Kt,...Et.properties,type:"ElevationLine",elevationData:Et.getElevationData()}),s.value=null,la(()=>{s.value=Et})}(Ge=t.value)==null||Ge.pm.disableDraw(),i.value="",Z()}});break}}catch(Xe){console.error("[setDrawingTool] Erreur lors de la configuration de l'outil:",Xe)}},100)},Y=G=>{var he;if(!s.value)return;const re=s.value;if(re.properties=re.properties||{},re.properties.style=re.properties.style||{},re.properties.style={...re.properties.style,...G},re.properties.type==="text"){const ce=re.properties._textLayer,ve=(he=ce==null?void 0:ce.getElement())==null?void 0:he.querySelector(".text-annotation");ve&&m5(ve,re.properties.style);const ee={color:G.borderColor||re.properties.style.borderColor,weight:parseInt(G.borderWidth||re.properties.style.borderWidth),opacity:G.borderOpacity??re.properties.style.borderOpacity};"setStyle"in re&&re.setStyle(ee)}else if(re.properties.type==="TextRectangle")console.log("[updateShapeStyle] TextRectangle supprimé selon les exigences");else{const ce={};G.fillColor&&(ce.fillColor=G.fillColor),G.fillOpacity!==void 0&&(ce.fillOpacity=G.fillOpacity),G.strokeColor&&(ce.color=G.strokeColor),G.strokeOpacity!==void 0&&(ce.opacity=G.strokeOpacity),G.strokeWidth!==void 0&&(ce.weight=G.strokeWidth),G.dashArray&&(ce.dashArray=G.dashArray),"setStyle"in re&&re.setStyle(ce)}},te=G=>{var J,Oe,Te,Ye,ge;if(!s.value){console.warn("[useMapDrawing] Cannot update properties: no shape selected");return}console.log("[useMapDrawing] Updating shape properties",{before:s.value.properties,newProps:G,layerType:(J=s.value.properties)==null?void 0:J.type,beforeName:s.value.name,beforePropertiesName:(Oe=s.value.properties)==null?void 0:Oe.name,beforeCategory:(Te=s.value.properties)==null?void 0:Te.category,nameIsDirectProperty:"name"in s.value,dbId:s.value._dbId}),s.value.properties||(s.value.properties={});const re=s.value.properties.type;console.log(`[useMapDrawing] Type actuel de la forme: ${re}`),s.value.properties.category||(s.value.properties.category="forages"),s.value.properties.accessLevel||(s.value.properties.accessLevel="visitor"),s.value._dbId||(s.value._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[useMapDrawing] Assigned temporary dbId: ${s.value._dbId}`));const he=s.value.properties.type;console.log(`[useMapDrawing] Type original avant mise à jour: ${he}`);const ce=s.value.properties.category;console.log(`[useMapDrawing] Catégorie existante: ${ce}`);const ve="category"in G&&G.category!==ce;if(Object.keys(G).forEach(Q=>{Q==="type"&&he?console.log(`[useMapDrawing] Préservation du type original: ${he}`):s.value.properties[Q]=G[Q],Q==="name"&&(console.log(`[useMapDrawing] Setting name "${G[Q]}" directly on layer`),s.value.name=G[Q]),Q==="category"&&console.log(`[useMapDrawing] Mise à jour de la catégorie: ${ce} -> ${G[Q]}`)}),he&&(s.value.properties.type=he),ce&&!ve&&(console.log(`[useMapDrawing] Restauration de la catégorie originale: ${ce}`),s.value.properties.category=ce),s.value._dbId&&ve){const Q=Tp(),ie=Q.elements.find(fe=>fe.id===s.value._dbId);if(ie){console.log(`[useMapDrawing] Mise à jour de la catégorie dans le store: ${s.value.properties.category} pour l'élément ${s.value._dbId}`);const fe=ie;fe.data||(fe.data={}),fe.data.category=s.value.properties.category,Q.$patch({unsavedChanges:!0})}}const ee=new CustomEvent("shape:propertiesUpdated",{detail:{shape:s.value,properties:s.value.properties,categoryUpdated:ve}});if(window.dispatchEvent(ee),console.log("[useMapDrawing] Updated shape properties",{after:s.value.properties,name:s.value.name,propertiesName:(Ye=s.value.properties)==null?void 0:Ye.name,allLayerKeys:Object.keys(s.value),allPropertiesKeys:Object.keys(s.value.properties||{})}),((ge=s.value.properties)==null?void 0:ge.type)==="Circle"){const Q=s.value,ie=Q.getRadius();Q.properties.radius=ie,Q.properties.diameter=ie*2,Q.properties.surface=Math.PI*ie*ie,Q.properties.perimeter=2*Math.PI*ie,G.name&&(console.log(`[useMapDrawing] Ensuring circle name "${G.name}" is set in multiple places`),Q.properties.name=G.name,Q.properties.style.name=G.name,Q.name=G.name,console.log("[useMapDrawing] Circle name verification:",{circleDirectName:Q.name,circlePropertiesName:Q.properties.name,nameIsEnumerable:Object.keys(Q).includes("name"),propertiesNameIsEnumerable:Object.keys(Q.properties).includes("name")}))}},me=G=>{console.log("[forceShapeUpdate] Début",{currentProperties:G.properties,selectedShapeRef:s.value}),s.value=null,la(()=>{s.value=G,console.log("[forceShapeUpdate] Après mise à jour",{selectedShape:s.value,properties:s.value.properties})})},pe=(G,re)=>{console.log("[updateLayerProperties] Début",{layer:G,shapeType:re,currentProperties:G.properties}),RU((ce,ve)=>{const ee=E(ce,ve);console.log("[updateLayerProperties] Nouvelles propriétés calculées",{newProperties:ee}),ce.properties={...ee},me(ce),ce.fire("properties:updated",{shape:ce,properties:ce.properties}),console.log("[updateLayerProperties] Fin",{finalProperties:ce.properties,selectedShape:s.value})},100)(G,re)},I=(G,re)=>Vt.latLng((G.lat+re.lat)/2,(G.lng+re.lng)/2),z=G=>{if(!t.value||!e.value)return;m();const re=G.getLatLng(),he=G.getRadius(),ce=x(re,"#059669");v.push(ce),p(ce,G,()=>[ts(he,"m","Rayon"),ts(he*2,"m","Diamètre"),ts(Math.PI*Math.pow(he,2),"m²","Surface")].join("<br>"));const ve=[],ee=[0,45,90,135,180,225,270,315];ee.forEach(J=>{const Oe=G.calculatePointOnCircle(J),Te=x(Oe,"#2563EB");ve.push(Te),v.push(Te),p(Te,G,()=>ts(he,"m","Rayon")),Te.on("mousedown",Ye=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Ye),t.value.dragging.disable();let ge=!0;const Q=fe=>{ge&&(G.resizeFromControlPoint(fe.latlng),ve.forEach((Se,de)=>{const Xe=G.calculatePointOnCircle(ee[de]);Se.setLatLng(Xe)}),ce.setLatLng(G.getLatLng()),Te.measureDiv&&(Te.measureDiv.innerHTML=ts(G.getRadius(),"m","Rayon")))},ie=()=>{ge=!1,t.value&&(t.value.off("mousemove",Q),document.removeEventListener("mouseup",ie),t.value.dragging.enable(),G.updateProperties(),s.value=null,la(()=>{s.value=G}),pe(G,"Circle"))};t.value.on("mousemove",Q),document.addEventListener("mouseup",ie)})}),ce.on("mousedown",J=>{if(!t.value)return;Vt.DomEvent.stopPropagation(J),t.value.dragging.disable();let Oe=!0;const Te=G.getLatLng(),Ye=J.latlng,ge=ie=>{if(!Oe)return;const fe=ie.latlng.lng-Ye.lng,Se=ie.latlng.lat-Ye.lat,de=Vt.latLng(Te.lat+Se,Te.lng+fe);Vt.Circle.prototype.setLatLng.call(G,de),ce.setLatLng(de),ve.forEach((Xe,$e)=>{const Je=G.calculatePointOnCircle(ee[$e]);Xe.setLatLng(Je)}),ce.measureDiv&&(ce.measureDiv.innerHTML=[ts(G.getRadius(),"m","Rayon"),ts(G.getRadius()*2,"m","Diamètre"),ts(Math.PI*Math.pow(G.getRadius(),2),"m²","Surface")].join("<br>"))},Q=()=>{Oe=!1,t.value&&(t.value.off("mousemove",ge),document.removeEventListener("mouseup",Q),t.value.dragging.enable(),G.updateProperties(),s.value=null,la(()=>{s.value=G}),pe(G,"Circle"))};t.value.on("mousemove",ge),document.addEventListener("mouseup",Q)}),G.on("circle:resized",()=>{pe(G,"Circle")}),s.value=G},K=G=>{var ge;if(!t.value||!e.value)return;if(!(G instanceof za)){console.warn("La couche n'est pas une instance de Rectangle");return}const re=G;m();const he=re.getCenter(),ce=re.getRotatedCorners(),ve=re.getMidPoints(),ee=x(he,"#059669");v.push(ee),p(ee,re,()=>{const{width:Q,height:ie}=re.getDimensions(),fe=Q*ie,Se=re.getRotation();return[ts(Q,"m","Largeur"),ts(ie,"m","Hauteur"),ts(fe,"m²","Surface"),`Rotation: ${Se.toFixed(1)}°`].join("<br>")});const J=x(Vt.latLng(he.lat+(ce[0].lat-he.lat)*1.2,he.lng+(ce[0].lng-he.lng)*1.2),"#F97316");v.push(J);const Oe=Vt.polyline([he,J.getLatLng()],{color:"#F97316",weight:1,opacity:.6,dashArray:"4",pmIgnore:!0});(ge=n.value)==null||ge.addLayer(Oe);const Te=ce.map(Q=>{const ie=x(Q,"#DC2626");return v.push(ie),p(ie,re,()=>{const{width:fe,height:Se}=re.getDimensions();return[ts(fe,"m","Largeur"),ts(Se,"m","Hauteur")].join("<br>")}),ie}),Ye=ve.map((Q,ie)=>{const fe=x(Q,"#2b6451");return v.push(fe),p(fe,re,()=>{const{width:Se,height:de}=re.getDimensions(),Xe=ie%2===0?Se:de;return[ts(Xe,"m","Longueur du côté"),ts(Xe/2,"m","Distance au coin")].join("<br>")}),fe});ee.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let ie=!0;const fe=de=>{if(!ie)return;re.moveFromCenter(de.latlng);const Xe=re.getRotatedCorners(),$e=re.getMidPoints();Te.forEach((He,Ge)=>He.setLatLng(Xe[Ge])),Ye.forEach((He,Ge)=>He.setLatLng($e[Ge])),ee.setLatLng(de.latlng);const Je=Vt.latLng(de.latlng.lat+(Xe[0].lat-de.latlng.lat)*1.2,de.latlng.lng+(Xe[0].lng-de.latlng.lng)*1.2);J.setLatLng(Je),Oe.setLatLngs([de.latlng,Je])},Se=()=>{ie=!1,t.value&&(t.value.off("mousemove",fe),document.removeEventListener("mouseup",Se),t.value.dragging.enable(),re.updateProperties(),s.value=null,la(()=>{s.value=re}))};t.value.on("mousemove",fe),document.addEventListener("mouseup",Se)}),J.on("mousedown",Q=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Q),t.value.dragging.disable();let ie=!1;const fe=Q.latlng,Se=re.getRotation(),de=re.getCenter(),Xe=fe.lng-de.lng,$e=fe.lat-de.lat,Je=Math.atan2($e,Xe)*180/Math.PI;v.forEach(xt=>{xt!==J&&(xt.setStyle({opacity:0,fillOpacity:0}),xt.measureDiv&&(xt.measureDiv.style.display="none"))});const He=qd(xt=>{ie||(ie=!0);const Et=xt.latlng.lng-de.lng,Kt=xt.latlng.lat-de.lat;let an=Math.atan2(Kt,Et)*180/Math.PI-Je,Qe=(Se+an)%360;Qe<0&&(Qe+=360),re.setRotation(Qe,!1),J.setLatLng(xt.latlng),Oe.setLatLngs([de,xt.latlng])},16),Ge=()=>{t.value&&(t.value.off("mousemove",He),document.removeEventListener("mouseup",Ge),t.value.dragging.enable(),ie&&re.finalizeRotation(),s.value=null,la(()=>{s.value=re,m(),K(re)}))};t.value.on("mousemove",He),document.addEventListener("mouseup",Ge)}),re.on("coordinates:updated",Q=>{const{corners:ie,center:fe}=Q,Se=re.getMidPoints();Te.forEach((Xe,$e)=>Xe.setLatLng(ie[$e])),Ye.forEach((Xe,$e)=>Xe.setLatLng(Se[$e])),ee.setLatLng(fe);const de=Vt.latLng(fe.lat+(ie[0].lat-fe.lat)*1.2,fe.lng+(ie[0].lng-fe.lng)*1.2);J.setLatLng(de),Oe.setLatLngs([fe,de])})},N=G=>{if(!t.value||!e.value)return;m();const re=G.getLatLngs();if(!re||re.length===0){console.warn("Pas de points pour la ligne");return}let he=null;if(G instanceof ea){const ce=G.getCenter();he=x(ce,"#059669"),v.push(he),p(he,G,()=>{const ve=G.getLength()||0;return ts(ve,"m","Longueur totale")}),he.on("mousedown",ve=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ve),t.value.dragging.disable();let ee=!0;const J=G.getLatLngs().map(Q=>Vt.latLng(Q.lat,Q.lng)),Oe=ve.latlng;G instanceof ea&&(G.off("move:end"),G.off("vertex:moved"),G.off("latlngs:updated"),G.off("properties:updated")),v.forEach((Q,ie)=>{ie>0&&(Q.setStyle({opacity:0,fillOpacity:0}),Q.measureDiv&&(Q.measureDiv.style.display="none"))});const Ye=qd(Q=>{if(!ee)return;const ie=Q.latlng.lng-Oe.lng,fe=Q.latlng.lat-Oe.lat,Se=J.map(de=>Vt.latLng(de.lat+fe,de.lng+ie));Vt.Polyline.prototype.setLatLngs.call(G,Se),he==null||he.setLatLng(Q.latlng)},16),ge=()=>{if(ee=!1,!!t.value){if(t.value.off("mousemove",Ye),document.removeEventListener("mouseup",ge),t.value.dragging.enable(),G instanceof ea){const Q=()=>{m(),N(G)};G.on("move:end",Q),G.on("vertex:moved",Q),G.on("latlngs:updated",Q),G.on("properties:updated",Q),G.updateProperties(),pe(G,"Line")}m(),N(G)}};t.value.on("mousemove",Ye),document.addEventListener("mouseup",ge)})}if(re.forEach((ce,ve)=>{const ee=x(ce,"#DC2626");v.push(ee),p(ee,G,()=>{if(G instanceof ea){const J=G.getLength()||0,Oe=G.getLengthToVertex(ve);return[ts(Oe,"m","Distance depuis le début"),ts(J,"m","Longueur totale")].join("<br>")}return""}),ee.on("mousedown",J=>{if(!t.value)return;Vt.DomEvent.stopPropagation(J),t.value.dragging.disable();let Oe=!0;G instanceof ea&&(G.off("move:end"),G.off("vertex:moved"),G.off("latlngs:updated"),G.off("properties:updated")),v.forEach((ge,Q)=>{Q!==ve+1&&(ge.setStyle({opacity:0,fillOpacity:0}),ge.measureDiv&&(ge.measureDiv.style.display="none"))});const Te=qd(ge=>{if(!Oe)return;const Q=G.getLatLngs();Q[ve]=ge.latlng,Vt.Polyline.prototype.setLatLngs.call(G,Q),ee.setLatLng(ge.latlng)},16),Ye=()=>{if(Oe=!1,!!t.value){if(t.value.off("mousemove",Te),document.removeEventListener("mouseup",Ye),t.value.dragging.enable(),G instanceof ea){const ge=()=>{m(),N(G)};G.on("move:end",ge),G.on("vertex:moved",ge),G.on("latlngs:updated",ge),G.on("properties:updated",ge),G.updateProperties(),pe(G,"Line")}m(),N(G)}};t.value.on("mousemove",Te),document.addEventListener("mouseup",Ye)})}),re.length>=2)for(let ce=0;ce<re.length-1;ce++){const ve=re[ce],ee=re[ce+1],J=Vt.latLng((ve.lat+ee.lat)/2,(ve.lng+ee.lng)/2),Oe=x(J,"#2b6451");v.push(Oe),p(Oe,G,()=>{if(G instanceof ea){const Te=G.getSegmentLengthAt(ce),Ye=G.getLength()||0,ge=G.getLengthToVertex(ce)+Te/2;return[ts(Te,"m","Longueur du segment"),ts(Te/2,"m","Demi-segment"),ts(ge,"m","Distance depuis le début"),ts(Ye,"m","Longueur totale")].join("<br>")}return""})}if(G instanceof ea){const ce=()=>{m(),N(G)};G.on("move:start",()=>{v.forEach((ve,ee)=>{ee>0&&(ve.setStyle({opacity:0,fillOpacity:0}),ve.measureDiv&&(ve.measureDiv.style.display="none"))})}),G.on("move:end",ce),G.on("vertex:moved",ce),G.on("latlngs:updated",ce),G.on("properties:updated",ce),v.cleanup=()=>{G.off("move:start",()=>{}),G.off("move:end",ce),G.off("vertex:moved",ce),G.off("latlngs:updated",ce),G.off("properties:updated",ce)}}},B=G=>{if(!t.value||!e.value)return;m();const re=G.getLatLngs()[0],he=re.map(Ye=>[Ye.lng,Ye.lat]);he.push(he[0]);const ce=Uu([he]),ve=Rc(ce),ee=re.reduce((Ye,ge,Q)=>{const ie=re[(Q+1)%re.length];return Ye+ge.distanceTo(ie)},0);let J;if(typeof G.getCenter=="function")try{J=G.getCenter()}catch(Ye){console.warn("Erreur lors de la récupération du centre du polygone via getCenter(), utilisation de la méthode alternative",Ye);const ge=Wg(ce);J=Vt.latLng(ge.geometry.coordinates[1],ge.geometry.coordinates[0])}else{const Ye=Wg(ce);J=Vt.latLng(Ye.geometry.coordinates[1],Ye.geometry.coordinates[0])}const Oe=x(J,"#059669");v.push(Oe),p(Oe,G,()=>[ts(ee,"m","Périmètre"),ts(ve,"m²","Surface")].join("<br>")),Oe.on("mousedown",Ye=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Ye),t.value.dragging.disable();let ge=!0;const Q=Ye.latlng,ie=[...re];v.forEach((Xe,$e)=>{$e>0&&Xe.setStyle({opacity:0,fillOpacity:0})});const fe=qd(Xe=>{if(!ge)return;const $e=Xe.latlng.lng-Q.lng,Je=Xe.latlng.lat-Q.lat,He=ie.map(Ge=>Vt.latLng(Ge.lat+Je,Ge.lng+$e));Vt.Polygon.prototype.setLatLngs.call(G,[He]),Oe.setLatLng(Xe.latlng)},16),Se=Xe=>{ge&&fe(Xe)},de=()=>{if(ge=!1,!!t.value){if(t.value.off("mousemove",Se),document.removeEventListener("mouseup",de),t.value.dragging.enable(),G.properties){const Xe=G.getLatLngs()[0],$e=Xe.map(He=>[He.lng,He.lat]);$e.push($e[0]);const Je=Uu([$e]);G.properties.area=Rc(Je),G.properties.perimeter=Xe.reduce((He,Ge,xt)=>{const Et=Xe[(xt+1)%Xe.length];return He+Ge.distanceTo(Et)},0),G.properties.surface=G.properties.area}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",Se),document.addEventListener("mouseup",de)}),re.forEach((Ye,ge)=>{const Q=x(Ye,"#DC2626");v.push(Q),p(Q,G,()=>{const ie=re[(ge-1+re.length)%re.length],fe=re[(ge+1)%re.length],Se=Ye.distanceTo(ie),de=Ye.distanceTo(fe);return[ts(Se,"m","Distance au point précédent"),ts(de,"m","Distance au point suivant"),ts(ee,"m","Périmètre total"),ts(ve,"m²","Surface")].join("<br>")}),Q.on("mousedown",ie=>{if(Vt.DomEvent.stopPropagation(ie),!t.value)return;t.value.dragging.disable();let fe=!0;Oe&&(Oe.setStyle({opacity:0,fillOpacity:0}),Oe.measureDiv&&(Oe.measureDiv.style.display="none"));const Se=qd($e=>{if(!fe)return;re[ge]=$e.latlng,Vt.Polygon.prototype.setLatLngs.call(G,[re]),Q.setLatLng($e.latlng);const Je=v.slice(re.length+1),He=(ge-1+re.length)%re.length,Ge=Je[He];if(Ge){const Et=re[He],Kt=re[ge],sn=Vt.latLng((Et.lat+Kt.lat)/2,(Et.lng+Kt.lng)/2);Ge.setLatLng(sn)}const xt=Je[ge];if(xt){const Et=re[ge],Kt=re[(ge+1)%re.length],sn=Vt.latLng((Et.lat+Kt.lat)/2,(Et.lng+Kt.lng)/2);xt.setLatLng(sn)}},16),de=$e=>{fe&&Se($e)},Xe=()=>{if(fe=!1,!!t.value){if(t.value.off("mousemove",de),document.removeEventListener("mouseup",Xe),t.value.dragging.enable(),G.properties){const $e=G.getLatLngs()[0].map(He=>[He.lng,He.lat]);$e.push($e[0]);const Je=Uu([$e]);G.properties.area=Rc(Je),G.properties.perimeter=re.reduce((He,Ge,xt)=>{const Et=re[(xt+1)%re.length];return He+Ge.distanceTo(Et)},0),G.properties.surface=G.properties.area}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",de),document.addEventListener("mouseup",Xe)})}),(()=>{const Ye=G.getLatLngs()[0];v.slice(Ye.length+1).forEach(Q=>{n.value&&n.value.removeLayer(Q)}),v=v.slice(0,Ye.length+1);const ge=new Array(Ye.length);for(let Q=0;Q<Ye.length;Q++){const ie=Ye[Q],fe=Ye[(Q+1)%Ye.length];ge[Q]=I(ie,fe)}ge.forEach((Q,ie)=>{const fe=x(Q,"#2b6451");v.push(fe),p(fe,G,()=>{const Se=Ye[ie],de=Ye[(ie+1)%Ye.length],Xe=Se.distanceTo(de);return[ts(Xe,"m","Longueur du segment"),ts(ee,"m","Périmètre total"),ts(ve,"m²","Surface")].join("<br>")}),fe.on("mousedown",Se=>{if(!t.value)return;Vt.DomEvent.stopPropagation(Se),t.value.dragging.disable();let de=!0;const Xe=ie;Oe&&(Oe.setStyle({opacity:0,fillOpacity:0}),Oe.measureDiv&&(Oe.measureDiv.style.display="none"));const $e=[...G.getLatLngs()[0]];$e.splice((Xe+1)%$e.length,0,Q),G.setLatLngs([$e]),m(),B(G);const Je=Xe+1,He=1+Je,Ge=Je<v.length-1?v[He]:null;if(Ge){const xt=Kt=>{if(!de)return;const sn=G.getLatLngs()[0];sn[Je]=Kt.latlng,G.setLatLngs([sn]),Ge.setLatLng(Kt.latlng);const an=v.slice(1+sn.length),Qe=(Je-1+sn.length)%sn.length,at=Je;if(an[Qe]){const it=sn[Qe],Bt=sn[Je],Qt=Vt.latLng((it.lat+Bt.lat)/2,(it.lng+Bt.lng)/2);an[Qe].setLatLng(Qt)}if(an[at]){const it=sn[Je],Bt=sn[(Je+1)%sn.length],Qt=Vt.latLng((it.lat+Bt.lat)/2,(it.lng+Bt.lng)/2);an[at].setLatLng(Qt)}},Et=()=>{if(de=!1,!!t.value){if(t.value.off("mousemove",xt),document.removeEventListener("mouseup",Et),t.value.dragging.enable(),G.properties){const Kt=G.getLatLngs()[0].map(an=>[an.lng,an.lat]);Kt.push(Kt[0]);const sn=Uu([Kt]);G.properties.area=Rc(sn),G.properties.perimeter=G.getLatLngs()[0].reduce((an,Qe,at,it)=>{const Bt=it[(at+1)%it.length];return an+Qe.distanceTo(Bt)},0)}m(),B(G),s.value=null,la(()=>{s.value=G})}};t.value.on("mousemove",xt),document.addEventListener("mouseup",Et)}else t.value.dragging.enable(),m(),B(G)})})})()},V=G=>{if(!t.value||!e.value)return;m();const re=G.getLatLng(),he=x(re,"#059669");v.push(he),p(he,G,()=>`Position: ${re.lat.toFixed(6)}, ${re.lng.toFixed(6)}`),he.on("mousedown",ce=>{if(!t.value)return;Vt.DomEvent.stopPropagation(ce),t.value.dragging.disable(),G.startMoving();let ve=!0;const J=qd(Te=>{ve&&(he.setLatLng(Te.latlng),G.setLatLng(Te.latlng))},16),Oe=()=>{t.value&&(t.value.off("mousemove",J),document.removeEventListener("mouseup",Oe),t.value.dragging.enable(),ve=!1,G.finishMoving(),G.updateProperties(),s.value=null,la(()=>{s.value=G,m(),V(G)}))};t.value.on("mousemove",J),document.addEventListener("mouseup",Oe)}),s.value=G},R=G=>{if(!(!t.value||!r.value)){console.log("[generateTempControlPoints] Génération des points temporaires pour",{layerType:G.constructor.name,properties:G.properties}),r.value.clearLayers();try{if(G instanceof za)G.generateHelperPoints(t.value);else if(G instanceof op){if("getLatLng"in G&&typeof G.getLatLng=="function"){const re=G.getLatLng();if(re){const he=Vt.circleMarker(re,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}}}else if(G instanceof kh){const re=G.getLatLng();if(re){const he=Vt.circleMarker(re,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(he)}}else if(G instanceof cd||G instanceof Vt.Polygon){let re=[];if("getLatLngs"in G){const ce=G.getLatLngs();if(Array.isArray(ce)&&ce.length>0){const ve=ce[0];Array.isArray(ve)?re=ve:ve instanceof Vt.LatLng&&(re=ce)}}let he=null;if(G instanceof cd&&typeof G.getCenter=="function")he=G.getCenter();else if(re.length>0){const ce=re.map(J=>[J.lng,J.lat]);ce.push(ce[0]);const ve=Uu([ce]),ee=Wg(ve);he=Vt.latLng(ee.geometry.coordinates[1],ee.geometry.coordinates[0])}if(he){const ce=Vt.circleMarker(he,{radius:5,color:"#059669",fillColor:"#059669",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ce)}re.forEach(ce=>{if(ce){const ve=Vt.circleMarker(ce,{radius:5,color:"#DC2626",fillColor:"#DC2626",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(ve)}});for(let ce=0;ce<re.length;ce++){const ve=re[ce],ee=re[(ce+1)%re.length];if(ve&&ee){const J=Vt.latLng((ve.lat+ee.lat)/2,(ve.lng+ee.lng)/2),Oe=Vt.circleMarker(J,{radius:5,color:"#2563EB",fillColor:"#2563EB",fillOpacity:.7,weight:2,className:"temp-control-point",pmIgnore:!0});r.value.addLayer(Oe)}}}console.log("[generateTempControlPoints] Points temporaires générés",{count:r.value.getLayers().length})}catch(re){console.error("[generateTempControlPoints] Erreur lors de la génération des points temporaires:",re)}}},j=G=>{console.log("Nombre total de couches:",G.length);const re=G.filter(J=>{var Ye;if(!J)return!1;let Oe=0,Te={width:0,height:0};if(J instanceof Vt.Circle){Oe=Math.PI*Math.pow(J.getRadius(),2);const ge=J.getRadius();console.log(`
Forme détectée: Circle`),console.log(`- Surface propre: ${Oe.toFixed(2)} m²`),console.log(`- Rayon: ${ge.toFixed(2)} m`),console.log("- Angle: Cercle complet (360°)")}else if(J instanceof za||J instanceof Vt.Rectangle){const ge=J.getBounds(),Q=ge.getSouthWest(),ie=ge.getNorthEast(),fe=Hu([[Q.lng,Q.lat],[ie.lng,Q.lat]]),Se=Hu([[Q.lng,Q.lat],[Q.lng,ie.lat]]);Te.width=Gd(fe,{units:"meters"}),Te.height=Gd(Se,{units:"meters"}),Oe=Te.width*Te.height,console.log(`
Forme détectée: Rectangle`),console.log(`- Surface propre: ${Oe.toFixed(2)} m²`),console.log(`- Largeur: ${Te.width.toFixed(2)} m`),console.log(`- Hauteur: ${Te.height.toFixed(2)} m`)}else if(((Ye=J.properties)==null?void 0:Ye.type)==="Semicircle"){const ge=J.getStartAngle(),Q=J.getStopAngle(),ie=(Q-ge+360)%360,fe=J.getRadius();Oe=Math.PI*Math.pow(fe,2)*ie/360,console.log(`
Forme détectée: Semicircle`),console.log(`- Surface propre: ${Oe.toFixed(2)} m²`),console.log(`- Rayon: ${fe.toFixed(2)} m`),console.log(`- Angle de début: ${ge.toFixed(2)}°`),console.log(`- Angle de fin: ${Q.toFixed(2)}°`),console.log(`- Angle d'ouverture: ${ie.toFixed(2)}°`)}return Oe>0});if(re.length===0)return 0;const he=new Set,ce=[];for(const J of re)if(!he.has(J)){const Oe=oe(re,J);Oe.length>0&&(ce.push(Oe),Oe.forEach(Te=>he.add(Te)))}console.log(`
Nombre de groupes de formes connectées: ${ce.length}`);const ve=ce.map((J,Oe)=>{console.log(`
Calcul pour le groupe ${Oe+1} (${J.length} formes):`);const Te=J.map(fe=>{var Se,de,Xe;try{let $e;if(fe instanceof Vt.Circle){const Je=fe.getLatLng(),He=fe.getRadius();$e=Zj([Je.lng,Je.lat],He/1e3,{units:"kilometers",steps:256});const Ge=Rc($e),xt=((Se=fe.properties)==null?void 0:Se.surface)||0;return console.log(`
Conversion Cercle -> GeoJSON`),console.log(`- Rayon: ${He.toFixed(2)}m`),console.log(`- Surface propriété: ${xt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${Ge.toFixed(2)}m²`),$e}else if(fe instanceof za||fe instanceof Vt.Rectangle){const Je=fe.getBounds(),He=Je.getSouthWest(),Ge=Je.getNorthEast(),xt=Vt.latLng(Ge.lat,He.lng),Et=Vt.latLng(He.lat,Ge.lng),Kt=[[He.lng,He.lat],[Et.lng,Et.lat],[Ge.lng,Ge.lat],[xt.lng,xt.lat],[He.lng,He.lat]];$e=Uu([Kt]);const sn=Rc($e),an=Hu([[He.lng,He.lat],[Ge.lng,He.lat]]),Qe=Hu([[He.lng,He.lat],[He.lng,Ge.lat]]),at=Gd(an,{units:"meters"}),it=Gd(Qe,{units:"meters"}),Bt=at*it;return console.log(`
Conversion Rectangle -> GeoJSON`),console.log(`- Largeur: ${at.toFixed(2)}m`),console.log(`- Hauteur: ${it.toFixed(2)}m`),console.log(`- Surface théorique: ${Bt.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${sn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(Bt-sn).toFixed(2)}m² (${(Math.abs(Bt-sn)/Bt*100).toFixed(2)}%)`),$e}else if(((de=fe.properties)==null?void 0:de.type)==="Semicircle"){const Je=fe.getCenter(),He=fe.getRadius(),Ge=fe.getStartAngle(),xt=fe.getStopAngle(),Et=[],Kt=64;Et.push([Je.lng,Je.lat]);for(let Qe=0;Qe<=Kt;Qe++){const it=(Ge+(xt-Ge+360)%360*Qe/Kt)*Math.PI/180,Bt=He*Math.cos(it),Tn=He*Math.sin(it)/111319.9,xn=Bt/(111319.9*Math.cos(Je.lat*Math.PI/180));Et.push([Je.lng+xn,Je.lat+Tn])}Et.push([Je.lng,Je.lat]),$e=Uu([Et]);const sn=Rc($e),an=((Xe=fe.properties)==null?void 0:Xe.surface)||0;return console.log(`
Conversion Semicircle -> GeoJSON`),console.log(`- Rayon: ${He.toFixed(2)}m`),console.log(`- Surface propriété: ${an.toFixed(2)}m²`),console.log(`- Surface GeoJSON: ${sn.toFixed(2)}m²`),console.log(`- Différence: ${Math.abs(an-sn).toFixed(2)}m² (${(Math.abs(an-sn)/an*100).toFixed(2)}%)`),$e}return null}catch($e){return console.error("[useMapDrawing] Erreur lors de la conversion en GeoJSON:",$e),null}}).filter(fe=>fe!==null);if(Te.length===0)return 0;const Ye=Te.map(fe=>{const Se=Rc(fe);return console.log(`Surface individuelle: ${Se.toFixed(2)}m²`),Se});let ge=0;for(let fe=0;fe<Te.length;fe++)for(let Se=fe+1;Se<Te.length;Se++)try{const de=Bj([Te[fe],Te[Se]]),Xe=vz(de);if(Xe){const $e=Rc(Xe);ge+=$e,console.log(`Intersection entre formes ${fe+1} et ${Se+1}: ${$e.toFixed(2)}m²`)}}catch(de){console.error(`Erreur lors du calcul d'intersection entre les formes ${fe+1} et ${Se+1}:`,de)}const Q=Ye.reduce((fe,Se)=>fe+Se,0),ie=Q-ge;return console.log(`
Calcul de la surface d'irrigation pour le groupe ${Oe+1}:`),console.log(`- Surface totale (somme): ${Q.toFixed(2)}m²`),console.log(`- Surface d'intersection: ${ge.toFixed(2)}m²`),console.log(`- Surface d'irrigation finale: ${ie.toFixed(2)}m²`),ie}),ee=Math.max(...ve);return console.log(`
Surface d'irrigation maximale parmi les groupes: ${ee.toFixed(2)}m²`),ee},W=()=>{a.value&&(t.value.removeLayer(a.value),a.value=null)},X=(G,re)=>{if(!t.value)return;W();const he=re?oe(G,re):G;if(a.value||(a.value=Vt.layerGroup().addTo(t.value)),he.forEach(ce=>{var ee;const ve=(ee=ce.properties)==null?void 0:ee.type;if(ve==="Circle"||ve==="Semicircle"){const J=ce.getLatLng(),Oe=ce.getRadius(),Te=Vt.circle(J,{radius:Oe,fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),Ye=Vt.circle(J,{radius:Oe,fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(Ye),a.value.addLayer(Te))}else if(ve==="Rectangle"||ve==="Polygon"){const J=ce.getLatLngs(),Oe=Vt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.1,stroke:!0,color:"#3B82F6",weight:1,opacity:.8,dashArray:"5, 5",interactive:!1,renderer:Vt.canvas({padding:.5})}),Te=Vt.polygon(J,{fillColor:"#3B82F6",fillOpacity:.05,stroke:!1,interactive:!1,renderer:Vt.canvas({padding:.5})});a.value&&(a.value.addLayer(Te),a.value.addLayer(Oe))}}),re&&he.length>1&&t.value){const ce=Vt.latLngBounds([]);he.forEach(J=>{J.getBounds?ce.extend(J.getBounds()):J.getLatLng&&ce.extend(J.getLatLng())});const ve=ce.getCenter(),ee=Vt.tooltip({permanent:!0,direction:"center",className:"connected-group-tooltip"}).setContent("<div>Groupe connecté</div>").setLatLng(ve);a.value&&a.value.addLayer(Vt.marker(ve,{opacity:0,interactive:!1}).bindTooltip(ee).openTooltip())}},oe=(G,re)=>{if(!re)return[];const he=new Set,ce=[re],ve=[re];for(re._leaflet_id!==void 0&&he.add(re._leaflet_id);ce.length>0;){const ee=ce.shift();for(const J of G){if(J===ee||he.has(J._leaflet_id))continue;_e(ee,J)&&(ve.push(J),ce.push(J),he.add(J._leaflet_id))}}return ve},_e=(G,re)=>{let he=null,ce=null;if(G.getBounds&&typeof G.getBounds=="function")he=G.getBounds();else if(G.getLatLng&&G.getRadius){const ve=G.getLatLng(),ee=G.getRadius();he=Vt.latLngBounds([ve.lat-ee/111e3,ve.lng-ee/(111e3*Math.cos(ve.lat*Math.PI/180))],[ve.lat+ee/111e3,ve.lng+ee/(111e3*Math.cos(ve.lat*Math.PI/180))])}if(re.getBounds&&typeof re.getBounds=="function")ce=re.getBounds();else if(re.getLatLng&&re.getRadius){const ve=re.getLatLng(),ee=re.getRadius();ce=Vt.latLngBounds([ve.lat-ee/111e3,ve.lng-ee/(111e3*Math.cos(ve.lat*Math.PI/180))],[ve.lat+ee/111e3,ve.lng+ee/(111e3*Math.cos(ve.lat*Math.PI/180))])}return!(!he||!ce||!he.intersects(ce))},Ce=(G,re)=>{var ce;const he=oe(G,re);return he.length===1&&(ce=re.properties)!=null&&ce.surface?re.properties.surface:j(he)},De=G=>{var ce,ve,ee,J,Oe,Te,Ye,ge,Q;const re=G.layer;(ce=e.value)==null||ce.addLayer(re);let he="unknown";if(re instanceof Vt.Circle?he=i.value==="Semicircle"?"Semicircle":"Circle":re instanceof Vt.Rectangle?he="Rectangle":re instanceof Vt.Polygon?he="Polygon":re instanceof Vt.Polyline&&!(re instanceof Vt.Polygon)&&(he="Line"),re.properties=E(re,he),re.properties||(re.properties={}),re.properties.category||(re.properties.category="forages"),re.properties.accessLevel||(re.properties.accessLevel="visitor"),re._dbId=Date.now()+Math.floor(Math.random()*1e3),s.value=re,console.log("[useMapDrawing] Input layer:",{type:he,instanceof:{Circle:re instanceof Vt.Circle,Rectangle:re instanceof Vt.Rectangle,Polygon:re instanceof Vt.Polygon,Polyline:re instanceof Vt.Polyline},options:re.options,properties:re.properties,_dbId:re._dbId}),window.dispatchEvent(new CustomEvent("shape:created",{detail:{shape:re,type:he,properties:re.properties}})),re.on("mouseover",()=>{console.log("[mouseover] Survol de la forme",{type:he,isSelected:s.value===re}),(!s.value||s.value!==re)&&R(re)}),re.on("mouseout",()=>{var ie;console.log("[mouseout] Sortie de la forme",{type:he,isSelected:s.value===re}),(!s.value||s.value!==re)&&((ie=r.value)==null||ie.clearLayers())}),he==="Semicircle")console.log("Conversion en demi-cercle désactivée selon les exigences");else if(he==="Circle"){(ve=e.value)==null||ve.removeLayer(re);const ie=new op(re.getLatLng(),{radius:re.getRadius(),...re.options});ie.properties={...E(ie,"Circle"),type:"Circle"},Object.defineProperty(ie,"name",{value:ie.properties.name,writable:!0,enumerable:!0,configurable:!0}),console.log("[useMapDrawing] Création du cercle personnalisé:",{propertyDescriptor:Object.getOwnPropertyDescriptor(ie,"name"),directName:ie.name,propertiesName:ie.properties.name,nameIsEnumerable:Object.keys(ie).includes("name"),allProperties:Object.keys(ie.properties),allKeys:Object.keys(ie)}),(ee=e.value)==null||ee.addLayer(ie),s.value=ie,z(ie)}else if(he==="Rectangle"){(J=e.value)==null||J.removeLayer(re);const ie=new za(re.getBounds(),{...re.options});ie.updateProperties(),(Oe=e.value)==null||Oe.addLayer(ie),s.value=ie,K(ie)}else if(re instanceof Vt.Polygon){const ie=re.getLatLngs()[0],fe=new cd([ie],{...re.options});fe.updateProperties(),(Te=e.value)==null||Te.removeLayer(re),(Ye=e.value)==null||Ye.addLayer(fe),s.value=fe,B(fe)}else if(re instanceof ea)N(re);else if(re instanceof Vt.Polyline&&!(re instanceof Vt.Polygon)){const ie=re.getLatLngs(),fe=new ea(ie,{...re.options});fe.updateProperties(),(ge=e.value)==null||ge.removeLayer(re),(Q=e.value)==null||Q.addLayer(fe),s.value=fe,N(fe)}Wl("Cliquez sur la forme pour afficher les points de contrôle")},Z=()=>{t.value&&(t.value.off("pm:create"),t.value.on("pm:create",De))};return{map:t,featureGroup:e,controlPointsGroup:n,tempControlPointsGroup:r,currentTool:i,selectedShape:s,isDrawing:o,initMap:k,setDrawingTool:$,updateShapeStyle:Y,updateShapeProperties:te,updateTextFixedSize:A,adjustView:D,clearActiveControlPoints:m,calculateTotalCoverageArea:j,showCoverageOverlay:X,hideCoverageOverlay:W,calculateConnectedCoverageArea:Ce,getConnectedShapes:oe}}function jU(){const{isEnabled:t,startMeasure:e}=Vp(),n=Lt(null),r=Lt(""),i=Lt("Hybride"),s=Lt(null),o=e("createBaseMaps","useMapState"),a={Hybride:Vt.layerGroup([Vt.tileLayer("/osm_tiles/{z}/{x}/{y}.png",{attribution:"© OpenStreetMap contributors",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:19,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6}),Vt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"© Esri",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:20,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0,opacity:.6})]),Cadastre:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=CADASTRALPARCELS.PARCELLAIRE_EXPRESS&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Cadastre - Carte © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0}),IGN:Vt.tileLayer("https://data.geopf.fr/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2&STYLE=normal&FORMAT=image/png&TILEMATRIXSET=PM&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}",{attribution:"Carte IGN © IGN/Geoportail",maxZoom:19,updateWhenZooming:!1,updateWhenIdle:!0,noWrap:!0,keepBuffer:4,maxNativeZoom:18,tileSize:256,zoomOffset:0,bounds:Vt.latLngBounds(Vt.latLng(41.333,-5.566),Vt.latLng(51.089,9.555)),crossOrigin:!0,detectRetina:!0})};o();const l=vn.createPerformanceTracker(v=>{vn.measure("initMap:setOptions",()=>{n.value=v,v.options.zoomSnap=.25,v.options.zoomDelta=.25,v.options.wheelPxPerZoomLevel=100,v.options.zoomAnimation=!0,v.options.fadeAnimation=!0,v.options.markerZoomAnimation=!0,v.options.minZoom=2,v.options.maxZoom=19,v.options.scrollWheelZoom=!0,v.options.doubleClickZoom=!0;const m=Vt.latLngBounds(Vt.latLng(-90,-180),Vt.latLng(90,180));v.setMaxBounds(m),v.options.maxBoundsViscosity=1,v.options.trackResize=!0;let x=null;v.getZoom(),v.on("zoomstart",()=>{v.getZoom(),v.options.zoomAnimation=!1,v.options.markerZoomAnimation=!1}),v.on("zoomend",()=>{x&&clearTimeout(x),x=setTimeout(()=>{setTimeout(()=>{v.options.zoomAnimation=!0,v.options.markerZoomAnimation=!0,v.invalidateSize({animate:!1,pan:!1});const A=v.getBounds(),k=v.options.maxBounds;k&&!A.intersects(k)&&v.panInsideBounds(k,{animate:!1})},250)},250)});const E=v._zoomAnimation;E&&(v._zoomAnimation=function(A){try{this._animatingZoom||E.call(this,A)}catch{console.warn("Animation de zoom interrompue, restauration de la vue..."),this._resetView(this.getCenter(),this.getZoom())}})},"useMapState"),vn.measure("initMap:addInitialLayer",()=>{v&&v.whenReady(()=>{const m=i.value;if(a[m]){if(console.log(`Initialisation de la couche de base: ${m}`),s.value&&v.hasLayer(s.value))try{v.removeLayer(s.value),console.log("Couche active précédente supprimée")}catch(x){console.warn("Erreur lors de la suppression de la couche active précédente:",x)}s.value=a[m];try{s.value.addTo(v),console.log(`Couche ${m} ajoutée à la carte`)}catch(x){console.error(`Erreur lors de l'ajout de la couche ${m}:`,x)}}else console.warn(`Couche de base non disponible: ${m}`)})},"useMapState"),v.on("baselayerchange",m=>{const x=e("baselayerchange","useMapState",{layer:m.name});i.value=m.name,s.value=m.layer,x()}),t.value&&(v.on("movestart",()=>{e("mapMove","useMapState",{startCenter:v.getCenter()})}),v.on("moveend",()=>{e("mapMoveEnd","useMapState",{endCenter:v.getCenter()})()}),v.on("tileloadstart",()=>{e("tileLoad","useMapState")}),v.on("tileload",()=>{e("tileLoadEnd","useMapState")()}))},"initMap","useMapState"),c=vn.createAsyncPerformanceTracker(async v=>{if(!n.value||!a[v]){console.warn(`Impossible de changer la carte de base: ${n.value?"type de carte non disponible":"carte non initialisée"}`);return}try{if(i.value===v)return;console.log(`Changement de carte: ${i.value} -> ${v}`);const m=n.value,x=m.getCenter(),E=m.getZoom();m.options.zoomAnimation=!1,m.options.fadeAnimation=!1,m.options.markerZoomAnimation=!1;const A=a[v];if(s.value&&m.hasLayer(s.value))try{m.removeLayer(s.value),console.log(`Couche précédente ${i.value} supprimée`)}catch(k){console.warn("Erreur lors de la suppression de la couche active:",k)}try{A instanceof Vt.LayerGroup,A.addTo(m),console.log(`Nouvelle couche ${v} ajoutée`)}catch(k){console.error("Erreur lors de l'ajout de la nouvelle couche:",k);try{m.hasLayer(A)&&m.removeLayer(A),A.addTo(m),console.log(`Récupération: couche ${v} réajoutée`)}catch(D){throw console.error("Échec de la récupération:",D),new Error("Impossible d'ajouter la nouvelle couche")}}s.value=A,i.value=v;try{m.setView(x,E,{animate:!1,duration:0,noMoveStart:!0}),console.log(`Vue réinitialisée: centre=${x}, zoom=${E}`)}catch(k){console.warn("Erreur lors de la réinitialisation de la vue:",k)}try{m.invalidateSize({animate:!1,pan:!1})}catch(k){console.warn("Erreur lors du rafraîchissement de la carte:",k)}setTimeout(()=>{m.options.zoomAnimation=!0,m.options.fadeAnimation=!0,m.options.markerZoomAnimation=!0,console.log("Animations restaurées")},500)}catch(m){if(console.error("Erreur lors du changement de carte de base:",m),n.value)try{const x=n.value;x.eachLayer(A=>{(A instanceof Vt.TileLayer||A instanceof Vt.LayerGroup)&&x.removeLayer(A)});const E=a[v];E.addTo(x),s.value=E,i.value=v,x.options.zoomAnimation=!0,x.options.fadeAnimation=!0,x.options.markerZoomAnimation=!0,x.invalidateSize({animate:!1,pan:!1}),console.log("Récupération effectuée après erreur")}catch(x){console.error("Erreur lors de la récupération après échec:",x)}}},"changeBaseMap","useMapState"),d=vn.createAsyncPerformanceTracker(async()=>{if(!(!n.value||!r.value))try{const v=await vn.measureAsync("searchLocation:fetchData",async()=>await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(r.value)}`),"useMapState"),m=await vn.measureAsync("searchLocation:parseResponse",async()=>await v.json(),"useMapState");m&&m.length>0&&vn.measure("searchLocation:updateView",()=>{const{lat:x,lon:E}=m[0];n.value.setView([x,E],13,{animate:i.value!=="Cadastre"})},"useMapState")}catch(v){console.error("Erreur lors de la recherche de localisation:",v)}},"searchLocation","useMapState");return{map:n,searchQuery:r,currentBaseMap:i,baseMaps:a,initMap:l,searchLocation:d,changeBaseMap:c,cleanup:()=>{const v=e("cleanup","useMapState");n.value&&(n.value.remove(),n.value=null),s.value&&(s.value=null),v()},isPerformanceEnabled:t}}const zU={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[3001] overflow-y-auto"},$U={class:"bg-white w-full h-full md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 relative overflow-y-auto"},VU={class:"p-4 md:p-6 pt-0 overflow-y-auto max-h-[calc(100vh-80px)] md:max-h-[calc(90vh-80px)]"},UU={key:0,class:"mb-4"},HU={key:0,class:"animate-pulse"},WU=["value"],GU={key:1,class:"mb-4"},qU={key:0,class:"animate-pulse"},YU=["disabled"],KU={value:null},ZU=["value"],XU={key:2,class:"mb-4"},JU={key:0,class:"animate-pulse"},QU=["disabled"],eH={value:null},tH=["value"],nH={class:"mb-4"},rH={class:"mb-6"},iH={class:"flex justify-end space-x-3"},sH=["disabled"],oH={key:0},aH={key:1},FE=$s({__name:"NewPlanModal",props:{modelValue:{type:Boolean}},emits:["update:modelValue","created","salarieSelected","visiteurSelected"],setup(t,{expose:e,emit:n}){function r(V){return V?typeof V=="object"?V.id:V:null}function i(V){if(V===null)throw new Error("Invalid ID");return V}const s=t,o=n,a=da(),l=Vy(),c=Tp(),d=Lt(!1),p=Lt(null),v=Lt([]),m=Lt([]),x=Lt([]),E=Lt(null),A=Lt(null),k=Lt(!1),D=Lt(!1),$=Lt(!1),Y=Lt({nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),te=Zn(()=>{var V,R,j;return((V=a.user)==null?void 0:V.user_type)==="admin"?Y.value.nom.trim()&&Y.value.entreprise&&Y.value.salarie:((R=a.user)==null?void 0:R.user_type)==="entreprise"?Y.value.nom.trim()&&Y.value.salarie:(((j=a.user)==null?void 0:j.user_type)==="salarie",Y.value.nom.trim())});Ri(()=>Y.value.entreprise,async V=>{if(!s.modelValue)return;Y.value.salarie=null,Y.value.visiteur=null,m.value=[];const R=r(V);console.log("[NewPlanModal] Entreprise sélectionnée:",R),R?await me(R):v.value=[]}),Ri(()=>Y.value.salarie,async V=>{if(!s.modelValue)return;Y.value.visiteur=null;const R=r(V);R?await pe(R):m.value=[]}),Ri(()=>s.modelValue,V=>{var R,j,W;V?((R=a.user)==null?void 0:R.user_type)==="admin"?N():((j=a.user)==null?void 0:j.user_type)==="entreprise"?me(a.user.id):((W=a.user)==null?void 0:W.user_type)==="salarie"&&pe(a.user.id):(Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,A.value=null,m.value=[],v.value=[],x.value=[],p.value=null)});async function me(V){k.value=!0;try{console.log("[NewPlanModal] Chargement des salaries pour entreprise:",V);const R=await Ml.getUsers({role:"SALARIE",entreprise:V});console.log("[NewPlanModal] Réponse salaries:",R.data),v.value=R.data}catch(R){console.error("[NewPlanModal] Error loading salaries:",R),v.value=[]}finally{k.value=!1}}async function pe(V){D.value=!0;try{const R=await Ml.getUsers({role:"VISITEUR",salarie:V});m.value=R.data}catch(R){console.error("[NewPlanModal] Error loading visiteurs:",R),m.value=[]}finally{D.value=!1}}async function I(V){s.modelValue&&(E.value=V,Y.value.salarie=V.id,await pe(V.id),o("salarieSelected",V))}function z(V){s.modelValue&&(A.value=V,Y.value.visiteur=V.id,o("visiteurSelected",V))}function K(){o("update:modelValue",!1),Y.value={nom:"",description:"",entreprise:null,salarie:null,visiteur:null},E.value=null,A.value=null,m.value=[],p.value=null}async function N(){$.value=!0;try{const V=await a.fetchEnterprises();x.value=V}catch(V){console.error("[NewPlanModal] Error loading entreprises:",V),x.value=[]}finally{$.value=!1}}async function B(){var V,R;p.value=null,d.value=!0;try{const j={nom:Y.value.nom.trim(),description:Y.value.description.trim()},W=a.user;if(!W)throw new Error("User not found");if(W.user_type==="admin"){if(!Y.value.entreprise||!Y.value.salarie)throw new Error("Missing required fields");j.entreprise=i(r(Y.value.entreprise)),j.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(j.visiteur=Y.value.visiteur)}else if(W.user_type==="entreprise"){if(!Y.value.salarie)throw new Error("Missing required fields");j.entreprise=W.id,j.salarie=i(r(Y.value.salarie)),Y.value.visiteur&&(j.visiteur=Y.value.visiteur)}else if(W.user_type==="salarie"){if(!W.entreprise)throw new Error("Missing required fields");j.entreprise=W.entreprise.id,j.salarie=W.id,Y.value.visiteur&&(j.visiteur=Y.value.visiteur)}else if(W.user_type==="visiteur"){if(!W.entreprise||!W.salarie)throw new Error("Missing required fields");j.entreprise=W.entreprise.id,j.salarie=W.salarie.id,j.visiteur=W.id}console.log("Données du plan à créer:",j),l.clearCurrentPlan(),c.setCurrentPlan(null);const X=await l.createPlan(j);o("created",X.id),K()}catch(j){console.error("[NewPlanModal] Error creating plan:",j),console.error("Response data:",(V=j.response)==null?void 0:V.data);let W="Une erreur est survenue lors de la création du plan";(R=j.response)!=null&&R.data&&(typeof j.response.data=="object"?W=Object.entries(j.response.data).map(([X,oe])=>Array.isArray(oe)?`${X}: ${oe.join(", ")}`:`${X}: ${oe}`).join(`
`):typeof j.response.data=="string"&&(W=j.response.data)),p.value=W}finally{d.value=!1}}return e({salaries:v,visiteurs:m,selectedSalarie:E,selectedVisiteur:A,loadSalaries:me,loadVisiteurs:pe,selectSalarie:I,selectVisiteur:z}),(V,R)=>{var j,W,X,oe;return V.modelValue?(Be(),ze("div",zU,[C("div",$U,[C("div",{class:"flex justify-between items-center mb-4 sticky top-0 bg-white p-4 md:p-6 pb-4 border-b z-10"},[R[6]||(R[6]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Créer un nouveau plan",-1)),C("button",{onClick:K,class:"text-gray-400 hover:text-gray-500"},R[5]||(R[5]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",VU,[Xn(a).isAdmin?(Be(),ze("div",UU,[R[9]||(R[9]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Entreprise",-1)),$.value?(Be(),ze("div",HU,R[7]||(R[7]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Be(),ze("select",{key:1,"onUpdate:modelValue":R[0]||(R[0]=_e=>Y.value.entreprise=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"},[R[8]||(R[8]=C("option",{value:null},"Sélectionnez une entreprise",-1)),(Be(!0),ze(En,null,fr(x.value,_e=>(Be(),ze("option",{key:_e.id,value:_e.id},Dt(Xn(xu)(_e)),9,WU))),128))],512)),[[rs,Y.value.entreprise]])])):nn("",!0),((j=Xn(a).user)==null?void 0:j.user_type)==="admin"||((W=Xn(a).user)==null?void 0:W.user_type)==="entreprise"?(Be(),ze("div",GU,[R[11]||(R[11]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Salarie",-1)),k.value?(Be(),ze("div",qU,R[10]||(R[10]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Be(),ze("select",{key:1,id:"edit-salarie","onUpdate:modelValue":R[1]||(R[1]=_e=>Y.value.salarie=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:Xn(a).isAdmin&&!Y.value.entreprise},[C("option",KU,Dt(v.value.length?"Sélectionnez un salarie":"Aucun salarie disponible"),1),(Be(!0),ze(En,null,fr(v.value,_e=>(Be(),ze("option",{key:_e.id,value:_e.id},Dt(Xn(xu)(_e)),9,ZU))),128))],8,YU)),[[rs,Y.value.salarie]])])):nn("",!0),((X=Xn(a).user)==null?void 0:X.user_type)!=="visiteur"?(Be(),ze("div",XU,[R[13]||(R[13]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Visiteur",-1)),D.value?(Be(),ze("div",JU,R[12]||(R[12]=[C("div",{class:"h-10 bg-gray-200 rounded"},null,-1)]))):kn((Be(),ze("select",{key:1,id:"edit-visiteur","onUpdate:modelValue":R[2]||(R[2]=_e=>Y.value.visiteur=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!m.value.length||((oe=Xn(a).user)==null?void 0:oe.user_type)!=="salarie"&&!Y.value.salarie},[C("option",eH,Dt(m.value.length?"Sélectionnez un visiteur":"Aucun visiteur disponible"),1),(Be(!0),ze(En,null,fr(m.value,_e=>(Be(),ze("option",{key:_e.id,value:_e.id},Dt(Xn(xu)(_e)),9,tH))),128))],8,QU)),[[rs,Y.value.visiteur]])])):nn("",!0),C("div",nH,[R[14]||(R[14]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Nom du plan",-1)),kn(C("input",{id:"edit-nom","onUpdate:modelValue":R[3]||(R[3]=_e=>Y.value.nom=_e),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Entrez le nom du plan"},null,512),[[jr,Y.value.nom]])]),C("div",rH,[R[15]||(R[15]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),kn(C("textarea",{id:"edit-description","onUpdate:modelValue":R[4]||(R[4]=_e=>Y.value.description=_e),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",rows:"3",placeholder:"Entrez une description (optionnel)"},null,512),[[jr,Y.value.description]])]),C("div",iH,[C("button",{onClick:K,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500"}," Annuler "),C("button",{onClick:B,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500",disabled:!te.value||d.value},[d.value?(Be(),ze("span",oH,"Création en cours...")):(Be(),ze("span",aH,"Créer"))],8,sH)])])])])):nn("",!0)}}});function fs(t){"@babel/helpers - typeof";return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fs(t)}var ul=Uint8Array,Lu=Uint16Array,V_=Int32Array,Uy=new ul([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hy=new ul([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Cb=new ul([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jE=function(t,e){for(var n=new Lu(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new V_(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},zE=jE(Uy,2),$E=zE.b,Eb=zE.r;$E[28]=258,Eb[258]=28;var VE=jE(Hy,0),lH=VE.b,y5=VE.r,Pb=new Lu(32768);for(var Fs=0;Fs<32768;++Fs){var Jh=(Fs&43690)>>1|(Fs&21845)<<1;Jh=(Jh&52428)>>2|(Jh&13107)<<2,Jh=(Jh&61680)>>4|(Jh&3855)<<4,Pb[Fs]=((Jh&65280)>>8|(Jh&255)<<8)>>1}var Xc=function(t,e,n){for(var r=t.length,i=0,s=new Lu(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new Lu(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new Lu(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var c=i<<4|t[i],d=e-t[i],p=o[t[i]-1]++<<d,v=p|(1<<d)-1;p<=v;++p)a[Pb[p]>>l]=c}else for(a=new Lu(r),i=0;i<r;++i)t[i]&&(a[i]=Pb[o[t[i]-1]++]>>15-t[i]);return a},Cd=new ul(288);for(var Fs=0;Fs<144;++Fs)Cd[Fs]=8;for(var Fs=144;Fs<256;++Fs)Cd[Fs]=9;for(var Fs=256;Fs<280;++Fs)Cd[Fs]=7;for(var Fs=280;Fs<288;++Fs)Cd[Fs]=8;var ym=new ul(32);for(var Fs=0;Fs<32;++Fs)ym[Fs]=5;var uH=Xc(Cd,9,0),cH=Xc(Cd,9,1),hH=Xc(ym,5,0),dH=Xc(ym,5,1),t2=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cc=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},n2=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},U_=function(t){return(t+7)/8|0},UE=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new ul(t.subarray(e,n))},fH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],gc=function(t,e,n){var r=new Error(e||fH[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,gc),!n)throw r;return r},pH=function(t,e,n,r){var i=t.length,s=0;if(!i||e.f&&!e.l)return n||new ul(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new ul(i*3));var c=function(Te){var Ye=n.length;if(Te>Ye){var ge=new ul(Math.max(Ye*2,Te));ge.set(n),n=ge}},d=e.f||0,p=e.p||0,v=e.b||0,m=e.l,x=e.d,E=e.m,A=e.n,k=i*8;do{if(!m){d=cc(t,p,1);var D=cc(t,p+1,3);if(p+=3,D)if(D==1)m=cH,x=dH,E=9,A=5;else if(D==2){var me=cc(t,p,31)+257,pe=cc(t,p+10,15)+4,I=me+cc(t,p+5,31)+1;p+=14;for(var z=new ul(I),K=new ul(19),N=0;N<pe;++N)K[Cb[N]]=cc(t,p+N*3,7);p+=pe*3;for(var B=t2(K),V=(1<<B)-1,R=Xc(K,B,1),N=0;N<I;){var j=R[cc(t,p,V)];p+=j&15;var $=j>>4;if($<16)z[N++]=$;else{var W=0,X=0;for($==16?(X=3+cc(t,p,3),p+=2,W=z[N-1]):$==17?(X=3+cc(t,p,7),p+=3):$==18&&(X=11+cc(t,p,127),p+=7);X--;)z[N++]=W}}var oe=z.subarray(0,me),_e=z.subarray(me);E=t2(oe),A=t2(_e),m=Xc(oe,E,1),x=Xc(_e,A,1)}else gc(1);else{var $=U_(p)+4,Y=t[$-4]|t[$-3]<<8,te=$+Y;if(te>i){l&&gc(0);break}a&&c(v+Y),n.set(t.subarray($,te),v),e.b=v+=Y,e.p=p=te*8,e.f=d;continue}if(p>k){l&&gc(0);break}}a&&c(v+131072);for(var Ce=(1<<E)-1,De=(1<<A)-1,Z=p;;Z=p){var W=m[n2(t,p)&Ce],G=W>>4;if(p+=W&15,p>k){l&&gc(0);break}if(W||gc(2),G<256)n[v++]=G;else if(G==256){Z=p,m=null;break}else{var re=G-254;if(G>264){var N=G-257,he=Uy[N];re=cc(t,p,(1<<he)-1)+$E[N],p+=he}var ce=x[n2(t,p)&De],ve=ce>>4;ce||gc(3),p+=ce&15;var _e=lH[ve];if(ve>3){var he=Hy[ve];_e+=n2(t,p)&(1<<he)-1,p+=he}if(p>k){l&&gc(0);break}a&&c(v+131072);var ee=v+re;if(v<_e){var J=s-_e,Oe=Math.min(_e,ee);for(J+v<0&&gc(3);v<Oe;++v)n[v]=r[J+v]}for(;v<ee;++v)n[v]=n[v-_e]}}e.l=m,e.p=Z,e.b=v,e.f=d,m&&(d=1,e.m=E,e.d=x,e.n=A)}while(!d);return v!=n.length&&o?UE(n,0,v):n.subarray(0,v)},bh=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},sg=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},r2=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:WE,l:0};if(i==1){var o=new ul(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(te,me){return te.f-me.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,d=1,p=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};d!=i-1;)a=n[n[c].f<n[p].f?c++:p++],l=n[c!=d&&n[c].f<n[p].f?c++:p++],n[d++]={s:-1,f:a.f+l.f,l:a,r:l};for(var v=s[0].s,r=1;r<i;++r)s[r].s>v&&(v=s[r].s);var m=new Lu(v+1),x=Mb(n[d-1],m,0);if(x>e){var r=0,E=0,A=x-e,k=1<<A;for(s.sort(function(me,pe){return m[pe.s]-m[me.s]||me.f-pe.f});r<i;++r){var D=s[r].s;if(m[D]>e)E+=k-(1<<x-m[D]),m[D]=e;else break}for(E>>=A;E>0;){var $=s[r].s;m[$]<e?E-=1<<e-m[$]++-1:++r}for(;r>=0&&E;--r){var Y=s[r].s;m[Y]==e&&(--m[Y],++E)}x=e}return{t:new ul(m),l:x}},Mb=function(t,e,n){return t.s==-1?Math.max(Mb(t.l,e,n+1),Mb(t.r,e,n+1)):e[t.s]=n},b5=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Lu(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},og=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},HE=function(t,e,n){var r=n.length,i=U_(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},_5=function(t,e,n,r,i,s,o,a,l,c,d){bh(e,d++,n),++i[256];for(var p=r2(i,15),v=p.t,m=p.l,x=r2(s,15),E=x.t,A=x.l,k=b5(v),D=k.c,$=k.n,Y=b5(E),te=Y.c,me=Y.n,pe=new Lu(19),I=0;I<D.length;++I)++pe[D[I]&31];for(var I=0;I<te.length;++I)++pe[te[I]&31];for(var z=r2(pe,7),K=z.t,N=z.l,B=19;B>4&&!K[Cb[B-1]];--B);var V=c+5<<3,R=og(i,Cd)+og(s,ym)+o,j=og(i,v)+og(s,E)+o+14+3*B+og(pe,K)+2*pe[16]+3*pe[17]+7*pe[18];if(l>=0&&V<=R&&V<=j)return HE(e,d,t.subarray(l,l+c));var W,X,oe,_e;if(bh(e,d,1+(j<R)),d+=2,j<R){W=Xc(v,m,0),X=v,oe=Xc(E,A,0),_e=E;var Ce=Xc(K,N,0);bh(e,d,$-257),bh(e,d+5,me-1),bh(e,d+10,B-4),d+=14;for(var I=0;I<B;++I)bh(e,d+3*I,K[Cb[I]]);d+=3*B;for(var De=[D,te],Z=0;Z<2;++Z)for(var G=De[Z],I=0;I<G.length;++I){var re=G[I]&31;bh(e,d,Ce[re]),d+=K[re],re>15&&(bh(e,d,G[I]>>5&127),d+=G[I]>>12)}}else W=uH,X=Cd,oe=hH,_e=ym;for(var I=0;I<a;++I){var he=r[I];if(he>255){var re=he>>18&31;sg(e,d,W[re+257]),d+=X[re+257],re>7&&(bh(e,d,he>>23&31),d+=Uy[re]);var ce=he&31;sg(e,d,oe[ce]),d+=_e[ce],ce>3&&(sg(e,d,he>>5&8191),d+=Hy[ce])}else sg(e,d,W[he]),d+=X[he]}return sg(e,d,W[256]),d+X[256]},gH=new V_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),WE=new ul(0),mH=function(t,e,n,r,i,s){var o=s.z||t.length,a=new ul(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),c=s.l,d=(s.r||0)&7;if(e){d&&(l[0]=s.r>>3);for(var p=gH[e-1],v=p>>13,m=p&8191,x=(1<<n)-1,E=s.p||new Lu(32768),A=s.h||new Lu(x+1),k=Math.ceil(n/3),D=2*k,$=function(Q){return(t[Q]^t[Q+1]<<k^t[Q+2]<<D)&x},Y=new V_(25e3),te=new Lu(288),me=new Lu(32),pe=0,I=0,z=s.i||0,K=0,N=s.w||0,B=0;z+2<o;++z){var V=$(z),R=z&32767,j=A[V];if(E[R]=j,A[V]=R,N<=z){var W=o-z;if((pe>7e3||K>24576)&&(W>423||!c)){d=_5(t,l,0,Y,te,me,I,K,B,z-B,d),K=pe=I=0,B=z;for(var X=0;X<286;++X)te[X]=0;for(var X=0;X<30;++X)me[X]=0}var oe=2,_e=0,Ce=m,De=R-j&32767;if(W>2&&V==$(z-De))for(var Z=Math.min(v,W)-1,G=Math.min(32767,z),re=Math.min(258,W);De<=G&&--Ce&&R!=j;){if(t[z+oe]==t[z+oe-De]){for(var he=0;he<re&&t[z+he]==t[z+he-De];++he);if(he>oe){if(oe=he,_e=De,he>Z)break;for(var ce=Math.min(De,he-2),ve=0,X=0;X<ce;++X){var ee=z-De+X&32767,J=E[ee],Oe=ee-J&32767;Oe>ve&&(ve=Oe,j=ee)}}}R=j,j=E[R],De+=R-j&32767}if(_e){Y[K++]=268435456|Eb[oe]<<18|y5[_e];var Te=Eb[oe]&31,Ye=y5[_e]&31;I+=Uy[Te]+Hy[Ye],++te[257+Te],++me[Ye],N=z+oe,++pe}else Y[K++]=t[z],++te[t[z]]}}for(z=Math.max(z,N);z<o;++z)Y[K++]=t[z],++te[t[z]];d=_5(t,l,c,Y,te,me,I,K,B,z-B,d),c||(s.r=d&7|l[d/8|0]<<3,d-=7,s.h=A,s.p=E,s.i=z,s.w=N)}else{for(var z=s.w||0;z<o+c;z+=65535){var ge=z+65535;ge>=o&&(l[d/8|0]=c,ge=o),d=HE(l,d+1,t.subarray(z,ge))}s.i=o}return UE(a,0,r+U_(d)+i)},GE=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},vH=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new ul(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return mH(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},qE=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},yH=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=GE();i.p(e.dictionary),qE(t,2,i.d())}},bH=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&gc(6,"invalid zlib data"),(t[1]>>5&1)==1&&gc(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function kb(t,e){e||(e={});var n=GE();n.p(t);var r=vH(t,e,e.dictionary?6:2,4);return yH(r,e),qE(r,r.length-4,n.d()),r}function _H(t,e){return pH(t.subarray(bH(t),-4),{i:2},e,e)}var wH=typeof TextDecoder<"u"&&new TextDecoder,xH=0;try{wH.decode(WE,{stream:!0}),xH=1}catch{}var Or=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i2(){Or.console&&typeof Or.console.log=="function"&&Or.console.log.apply(Or.console,arguments)}var Ss={log:i2,warn:function(t){Or.console&&(typeof Or.console.warn=="function"?Or.console.warn.apply(Or.console,arguments):i2.call(null,arguments))},error:function(t){Or.console&&(typeof Or.console.error=="function"?Or.console.error.apply(Or.console,arguments):i2(t))}};function s2(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){ef(r.response,e,n)},r.onerror=function(){Ss.error("could not download file")},r.send()}function w5(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function L0(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Gg,Ab,ef=Or.saveAs||((typeof window>"u"?"undefined":fs(window))!=="object"||window!==Or?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Or.URL||Or.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?w5(i.href)?s2(t,e,n):L0(i,i.target="_blank"):L0(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){L0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(w5(t))s2(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){L0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:fs(s)!=="object"&&(Ss.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return s2(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Or.HTMLElement)||Or.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":fs(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var d=a.result;d=o?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=d:location=d,r=null},a.readAsDataURL(t)}else{var l=Or.URL||Or.webkitURL,c=l.createObjectURL(t);r?r.location=c:location.href=c,r=null,setTimeout(function(){l.revokeObjectURL(c)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function YE(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),c=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),"#"+a+l+c}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function o2(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=el(n,r,i,s,e[0],7,-680876936),s=el(s,n,r,i,e[1],12,-389564586),i=el(i,s,n,r,e[2],17,606105819),r=el(r,i,s,n,e[3],22,-1044525330),n=el(n,r,i,s,e[4],7,-176418897),s=el(s,n,r,i,e[5],12,1200080426),i=el(i,s,n,r,e[6],17,-1473231341),r=el(r,i,s,n,e[7],22,-45705983),n=el(n,r,i,s,e[8],7,1770035416),s=el(s,n,r,i,e[9],12,-1958414417),i=el(i,s,n,r,e[10],17,-42063),r=el(r,i,s,n,e[11],22,-1990404162),n=el(n,r,i,s,e[12],7,1804603682),s=el(s,n,r,i,e[13],12,-40341101),i=el(i,s,n,r,e[14],17,-1502002290),n=tl(n,r=el(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=tl(s,n,r,i,e[6],9,-1069501632),i=tl(i,s,n,r,e[11],14,643717713),r=tl(r,i,s,n,e[0],20,-373897302),n=tl(n,r,i,s,e[5],5,-701558691),s=tl(s,n,r,i,e[10],9,38016083),i=tl(i,s,n,r,e[15],14,-660478335),r=tl(r,i,s,n,e[4],20,-405537848),n=tl(n,r,i,s,e[9],5,568446438),s=tl(s,n,r,i,e[14],9,-1019803690),i=tl(i,s,n,r,e[3],14,-187363961),r=tl(r,i,s,n,e[8],20,1163531501),n=tl(n,r,i,s,e[13],5,-1444681467),s=tl(s,n,r,i,e[2],9,-51403784),i=tl(i,s,n,r,e[7],14,1735328473),n=nl(n,r=tl(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=nl(s,n,r,i,e[8],11,-2022574463),i=nl(i,s,n,r,e[11],16,1839030562),r=nl(r,i,s,n,e[14],23,-35309556),n=nl(n,r,i,s,e[1],4,-1530992060),s=nl(s,n,r,i,e[4],11,1272893353),i=nl(i,s,n,r,e[7],16,-155497632),r=nl(r,i,s,n,e[10],23,-1094730640),n=nl(n,r,i,s,e[13],4,681279174),s=nl(s,n,r,i,e[0],11,-358537222),i=nl(i,s,n,r,e[3],16,-722521979),r=nl(r,i,s,n,e[6],23,76029189),n=nl(n,r,i,s,e[9],4,-640364487),s=nl(s,n,r,i,e[12],11,-421815835),i=nl(i,s,n,r,e[15],16,530742520),n=rl(n,r=nl(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=rl(s,n,r,i,e[7],10,1126891415),i=rl(i,s,n,r,e[14],15,-1416354905),r=rl(r,i,s,n,e[5],21,-57434055),n=rl(n,r,i,s,e[12],6,1700485571),s=rl(s,n,r,i,e[3],10,-1894986606),i=rl(i,s,n,r,e[10],15,-1051523),r=rl(r,i,s,n,e[1],21,-2054922799),n=rl(n,r,i,s,e[8],6,1873313359),s=rl(s,n,r,i,e[15],10,-30611744),i=rl(i,s,n,r,e[6],15,-1560198380),r=rl(r,i,s,n,e[13],21,1309151649),n=rl(n,r,i,s,e[4],6,-145523070),s=rl(s,n,r,i,e[11],10,-1120210379),i=rl(i,s,n,r,e[2],15,718787259),r=rl(r,i,s,n,e[9],21,-343485551),t[0]=hd(n,t[0]),t[1]=hd(r,t[1]),t[2]=hd(i,t[2]),t[3]=hd(s,t[3])}function Wy(t,e,n,r,i,s){return e=hd(hd(e,t),hd(r,s)),hd(e<<i|e>>>32-i,n)}function el(t,e,n,r,i,s,o){return Wy(e&n|~e&r,t,e,i,s,o)}function tl(t,e,n,r,i,s,o){return Wy(e&r|n&~r,t,e,i,s,o)}function nl(t,e,n,r,i,s,o){return Wy(e^n^r,t,e,i,s,o)}function rl(t,e,n,r,i,s,o){return Wy(n^(e|~r),t,e,i,s,o)}function KE(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)o2(r,LH(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(o2(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,o2(r,i),r}function LH(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Gg=Or.atob.bind(Or),Ab=Or.btoa.bind(Or);var x5="0123456789abcdef".split("");function SH(t){for(var e="",n=0;n<4;n++)e+=x5[t>>8*n+4&15]+x5[t>>8*n&15];return e}function CH(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Tb(t){return KE(t).map(CH).join("")}var EH=function(t){for(var e=0;e<t.length;e++)t[e]=SH(t[e]);return t.join("")}(KE("hello"))!="5d41402abc4b2a76b9719d911017c592";function hd(t,e){if(EH){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function Db(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var d=a[l];c=(c+d+o.charCodeAt(l))%256,a[l]=a[c],a[c]=d}n=t,r=a}else a=r;var p=e.length,v=0,m=0,x="";for(l=0;l<p;l++)m=(m+(d=a[v=(v+1)%256]))%256,a[v]=a[m],a[m]=d,o=a[(a[v]+a[m])%256],x+=String.fromCharCode(e.charCodeAt(l)^o);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var L5={print:4,modify:8,copy:16,"annot-forms":32};function ap(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(L5.perm!==void 0)throw new Error("Invalid permission: "+a);i+=L5[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Tb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=Db(this.encryptionKey,this.padding)}function lp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function S5(t){if(fs(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Or.console&&Ss.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Kv(t){if(!(this instanceof Kv))return new Kv(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function ZE(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function of(t,e,n,r,i){if(!(this instanceof of))return new of(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,ZE.call(this,r,i)}function hp(t,e,n,r,i){if(!(this instanceof hp))return new hp(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,ZE.call(this,r,i)}function Mr(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",d=null;fs(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(d=t.encryption||null)!==null&&(d.userPassword=d.userPassword||"",d.ownerPassword=d.ownerPassword||"",d.userPermissions=d.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var p=t.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=S5;var x="1.3",E=m.__private__.getPdfVersion=function(){return x};m.__private__.setPdfVersion=function(F){x=F};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return A};var k=m.__private__.getPageFormat=function(F){return A[F]};i=i||"a4";var D={COMPAT:"compat",ADVANCED:"advanced"},$=D.COMPAT;function Y(){this.saveGraphicsState(),fe(new Jt(it,0,0,-it,0,Ha()*it).toString()+" cm"),this.setFontSize(this.getFontSize()/it),c="n",$=D.ADVANCED}function te(){this.restoreGraphicsState(),c="S",$=D.COMPAT}var me=m.__private__.combineFontStyleAndFontWeight=function(F,we){if(F=="bold"&&we=="normal"||F=="bold"&&we==400||F=="normal"&&we=="italic"||F=="bold"&&we=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return we&&(F=we==400||we==="normal"?F==="italic"?"italic":"normal":we!=700&&we!=="bold"||F!=="normal"?(we==700?"bold":we)+""+F:"bold"),F};m.advancedAPI=function(F){var we=$===D.COMPAT;return we&&Y.call(this),typeof F!="function"||(F(this),we&&te.call(this)),this},m.compatAPI=function(F){var we=$===D.ADVANCED;return we&&te.call(this),typeof F!="function"||(F(this),we&&Y.call(this)),this},m.isAdvancedAPI=function(){return $===D.ADVANCED};var pe,I=function(F){if($!==D.ADVANCED)throw new Error(F+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=m.roundToPrecision=m.__private__.roundToPrecision=function(F,we){var et=e||we;if(isNaN(F)||isNaN(et))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return F.toFixed(et).replace(/0+$/,"")};pe=m.hpf=m.__private__.hpf=typeof l=="number"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return z(F,l)}:l==="smart"?function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return z(F,F>-1&&F<1?16:5)}:function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.hpf");return z(F,16)};var K=m.f2=m.__private__.f2=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f2");return z(F,2)},N=m.__private__.f3=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.f3");return z(F,3)},B=m.scale=m.__private__.scale=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.scale");return $===D.COMPAT?F*it:$===D.ADVANCED?F:void 0},V=function(F){return $===D.COMPAT?Ha()-F:$===D.ADVANCED?F:void 0},R=function(F){return B(V(F))};m.__private__.setPrecision=m.setPrecision=function(F){typeof parseInt(F,10)=="number"&&(e=parseInt(F,10))};var j,W="00000000000000000000000000000000",X=m.__private__.getFileId=function(){return W},oe=m.__private__.setFileId=function(F){return W=F!==void 0&&/^[a-fA-F0-9]{32}$/.test(F)?F.toUpperCase():W.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),d!==null&&(zi=new ap(d.userPermissions,d.userPassword,d.ownerPassword,W)),W};m.setFileId=function(F){return oe(F),this},m.getFileId=function(){return X()};var _e=m.__private__.convertDateToPDFDate=function(F){var we=F.getTimezoneOffset(),et=we<0?"+":"-",dt=Math.floor(Math.abs(we/60)),Pt=Math.abs(we%60),Ht=[et,re(dt),"'",re(Pt),"'"].join("");return["D:",F.getFullYear(),re(F.getMonth()+1),re(F.getDate()),re(F.getHours()),re(F.getMinutes()),re(F.getSeconds()),Ht].join("")},Ce=m.__private__.convertPDFDateToDate=function(F){var we=parseInt(F.substr(2,4),10),et=parseInt(F.substr(6,2),10)-1,dt=parseInt(F.substr(8,2),10),Pt=parseInt(F.substr(10,2),10),Ht=parseInt(F.substr(12,2),10),mn=parseInt(F.substr(14,2),10);return new Date(we,et,dt,Pt,Ht,mn,0)},De=m.__private__.setCreationDate=function(F){var we;if(F===void 0&&(F=new Date),F instanceof Date)we=_e(F);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(F))throw new Error("Invalid argument passed to jsPDF.setCreationDate");we=F}return j=we},Z=m.__private__.getCreationDate=function(F){var we=j;return F==="jsDate"&&(we=Ce(j)),we};m.setCreationDate=function(F){return De(F),this},m.getCreationDate=function(F){return Z(F)};var G,re=m.__private__.padd2=function(F){return("0"+parseInt(F)).slice(-2)},he=m.__private__.padd2Hex=function(F){return("00"+(F=F.toString())).substr(F.length)},ce=0,ve=[],ee=[],J=0,Oe=[],Te=[],Ye=!1,ge=ee,Q=function(){ce=0,J=0,ee=[],ve=[],Oe=[],Ar=lt(),Tt=lt()};m.__private__.setCustomOutputDestination=function(F){Ye=!0,ge=F};var ie=function(F){Ye||(ge=F)};m.__private__.resetCustomOutputDestination=function(){Ye=!1,ge=ee};var fe=m.__private__.out=function(F){return F=F.toString(),J+=F.length+1,ge.push(F),ge},Se=m.__private__.write=function(F){return fe(arguments.length===1?F.toString():Array.prototype.join.call(arguments," "))},de=m.__private__.getArrayBuffer=function(F){for(var we=F.length,et=new ArrayBuffer(we),dt=new Uint8Array(et);we--;)dt[we]=F.charCodeAt(we);return et},Xe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Xe};var $e=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(F){return $e=$===D.ADVANCED?F/it:F,this};var Je,He=m.__private__.getFontSize=m.getFontSize=function(){return $===D.COMPAT?$e:$e*it},Ge=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(F){return Ge=F,this},m.__private__.getR2L=m.getR2L=function(){return Ge};var xt,Et=m.__private__.setZoomMode=function(F){var we=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(F))Je=F;else if(isNaN(F)){if(we.indexOf(F)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+F+'" is not recognized.');Je=F}else Je=parseInt(F,10)};m.__private__.getZoomMode=function(){return Je};var Kt,sn=m.__private__.setPageMode=function(F){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(F)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+F+'" is not recognized.');xt=F};m.__private__.getPageMode=function(){return xt};var an=m.__private__.setLayoutMode=function(F){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(F)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+F+'" is not recognized.');Kt=F};m.__private__.getLayoutMode=function(){return Kt},m.__private__.setDisplayMode=m.setDisplayMode=function(F,we,et){return Et(F),an(we),sn(et),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(F){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[F]},m.__private__.getDocumentProperties=function(){return Qe},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(F){for(var we in Qe)Qe.hasOwnProperty(we)&&F[we]&&(Qe[we]=F[we]);return this},m.__private__.setDocumentProperty=function(F,we){if(Object.keys(Qe).indexOf(F)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[F]=we};var at,it,Bt,Qt,Tn,xn={},An={},Kn=[],en={},Ln={},Mn={},Hn={},hr=null,vr=0,ir=[],Vr=new S5(m),Vs=t.hotfixes||[],ft={},rt={},$t=[],Jt=function F(we,et,dt,Pt,Ht,mn){if(!(this instanceof F))return new F(we,et,dt,Pt,Ht,mn);isNaN(we)&&(we=1),isNaN(et)&&(et=0),isNaN(dt)&&(dt=0),isNaN(Pt)&&(Pt=1),isNaN(Ht)&&(Ht=0),isNaN(mn)&&(mn=0),this._matrix=[we,et,dt,Pt,Ht,mn]};Object.defineProperty(Jt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Jt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Jt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Jt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Jt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Jt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Jt.prototype,"a",{get:function(){return this._matrix[0]},set:function(F){this._matrix[0]=F}}),Object.defineProperty(Jt.prototype,"b",{get:function(){return this._matrix[1]},set:function(F){this._matrix[1]=F}}),Object.defineProperty(Jt.prototype,"c",{get:function(){return this._matrix[2]},set:function(F){this._matrix[2]=F}}),Object.defineProperty(Jt.prototype,"d",{get:function(){return this._matrix[3]},set:function(F){this._matrix[3]=F}}),Object.defineProperty(Jt.prototype,"e",{get:function(){return this._matrix[4]},set:function(F){this._matrix[4]=F}}),Object.defineProperty(Jt.prototype,"f",{get:function(){return this._matrix[5]},set:function(F){this._matrix[5]=F}}),Object.defineProperty(Jt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Jt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Jt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Jt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Jt.prototype.join=function(F){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pe).join(F)},Jt.prototype.multiply=function(F){var we=F.sx*this.sx+F.shy*this.shx,et=F.sx*this.shy+F.shy*this.sy,dt=F.shx*this.sx+F.sy*this.shx,Pt=F.shx*this.shy+F.sy*this.sy,Ht=F.tx*this.sx+F.ty*this.shx+this.tx,mn=F.tx*this.shy+F.ty*this.sy+this.ty;return new Jt(we,et,dt,Pt,Ht,mn)},Jt.prototype.decompose=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Ht=this.ty,mn=Math.sqrt(F*F+we*we),Bn=(F/=mn)*et+(we/=mn)*dt;et-=F*Bn,dt-=we*Bn;var $n=Math.sqrt(et*et+dt*dt);return Bn/=$n,F*(dt/=$n)<we*(et/=$n)&&(F=-F,we=-we,Bn=-Bn,mn=-mn),{scale:new Jt(mn,0,0,$n,0,0),translate:new Jt(1,0,0,1,Pt,Ht),rotate:new Jt(F,we,-we,F,0,0),skew:new Jt(1,0,Bn,1,0,0)}},Jt.prototype.toString=function(F){return this.join(" ")},Jt.prototype.inversed=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Ht=this.ty,mn=1/(F*dt-we*et),Bn=dt*mn,$n=-we*mn,or=-et*mn,br=F*mn;return new Jt(Bn,$n,or,br,-Bn*Pt-or*Ht,-$n*Pt-br*Ht)},Jt.prototype.applyToPoint=function(F){var we=F.x*this.sx+F.y*this.shx+this.tx,et=F.x*this.shy+F.y*this.sy+this.ty;return new Us(we,et)},Jt.prototype.applyToRectangle=function(F){var we=this.applyToPoint(F),et=this.applyToPoint(new Us(F.x+F.w,F.y+F.h));return new ma(we.x,we.y,et.x-we.x,et.y-we.y)},Jt.prototype.clone=function(){var F=this.sx,we=this.shy,et=this.shx,dt=this.sy,Pt=this.tx,Ht=this.ty;return new Jt(F,we,et,dt,Pt,Ht)},m.Matrix=Jt;var Gn=m.matrixMult=function(F,we){return we.multiply(F)},Sn=new Jt(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Sn;var Ut=function(F,we){if(!Ln[F]){var et=(we instanceof of?"Sh":"P")+(Object.keys(en).length+1).toString(10);we.id=et,Ln[F]=et,en[et]=we,Vr.publish("addPattern",we)}};m.ShadingPattern=of,m.TilingPattern=hp,m.addShadingPattern=function(F,we){return I("addShadingPattern()"),Ut(F,we),this},m.beginTilingPattern=function(F){I("beginTilingPattern()"),va(F.boundingBox[0],F.boundingBox[1],F.boundingBox[2]-F.boundingBox[0],F.boundingBox[3]-F.boundingBox[1],F.matrix)},m.endTilingPattern=function(F,we){I("endTilingPattern()"),we.stream=Te[G].join(`
`),Ut(F,we),Vr.publish("endTilingPattern",we),$t.pop().restore()};var cn=m.__private__.newObject=function(){var F=lt();return qt(F,!0),F},lt=m.__private__.newObjectDeferred=function(){return ce++,ve[ce]=function(){return J},ce},qt=function(F,we){return we=typeof we=="boolean"&&we,ve[F]=J,we&&fe(F+" 0 obj"),F},Dn=m.__private__.newAdditionalObject=function(){var F={objId:lt(),content:""};return Oe.push(F),F},Ar=lt(),Tt=lt(),zn=m.__private__.decodeColorString=function(F){var we=F.split(" ");if(we.length!==2||we[1]!=="g"&&we[1]!=="G")we.length===5&&(we[4]==="k"||we[4]==="K")&&(we=[(1-we[0])*(1-we[3]),(1-we[1])*(1-we[3]),(1-we[2])*(1-we[3]),"r"]);else{var et=parseFloat(we[0]);we=[et,et,et,"r"]}for(var dt="#",Pt=0;Pt<3;Pt++)dt+=("0"+Math.floor(255*parseFloat(we[Pt])).toString(16)).slice(-2);return dt},sr=m.__private__.encodeColorString=function(F){var we;typeof F=="string"&&(F={ch1:F});var et=F.ch1,dt=F.ch2,Pt=F.ch3,Ht=F.ch4,mn=F.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof et=="string"&&et.charAt(0)!=="#"){var Bn=new YE(et);if(Bn.ok)et=Bn.toHex();else if(!/^\d*\.?\d*$/.test(et))throw new Error('Invalid color "'+et+'" passed to jsPDF.encodeColorString.')}if(typeof et=="string"&&/^#[0-9A-Fa-f]{3}$/.test(et)&&(et="#"+et[1]+et[1]+et[2]+et[2]+et[3]+et[3]),typeof et=="string"&&/^#[0-9A-Fa-f]{6}$/.test(et)){var $n=parseInt(et.substr(1),16);et=$n>>16&255,dt=$n>>8&255,Pt=255&$n}if(dt===void 0||Ht===void 0&&et===dt&&dt===Pt)if(typeof et=="string")we=et+" "+mn[0];else switch(F.precision){case 2:we=K(et/255)+" "+mn[0];break;case 3:default:we=N(et/255)+" "+mn[0]}else if(Ht===void 0||fs(Ht)==="object"){if(Ht&&!isNaN(Ht.a)&&Ht.a===0)return we=["1.","1.","1.",mn[1]].join(" ");if(typeof et=="string")we=[et,dt,Pt,mn[1]].join(" ");else switch(F.precision){case 2:we=[K(et/255),K(dt/255),K(Pt/255),mn[1]].join(" ");break;default:case 3:we=[N(et/255),N(dt/255),N(Pt/255),mn[1]].join(" ")}}else if(typeof et=="string")we=[et,dt,Pt,Ht,mn[2]].join(" ");else switch(F.precision){case 2:we=[K(et),K(dt),K(Pt),K(Ht),mn[2]].join(" ");break;case 3:default:we=[N(et),N(dt),N(Pt),N(Ht),mn[2]].join(" ")}return we},mi=m.__private__.getFilters=function(){return o},Nr=m.__private__.putStream=function(F){var we=(F=F||{}).data||"",et=F.filters||mi(),dt=F.alreadyAppliedFilters||[],Pt=F.addLength1||!1,Ht=we.length,mn=F.objectId,Bn=function(ws){return ws};if(d!==null&&mn===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");d!==null&&(Bn=zi.encryptor(mn,0));var $n={};et===!0&&(et=["FlateEncode"]);var or=F.additionalKeyValues||[],br=($n=Mr.API.processDataByFilters!==void 0?Mr.API.processDataByFilters(we,et):{data:we,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if($n.data.length!==0&&(or.push({key:"Length",value:$n.data.length}),Pt===!0&&or.push({key:"Length1",value:Ht})),br.length!=0)if(br.split("/").length-1==1)or.push({key:"Filter",value:br});else{or.push({key:"Filter",value:"["+br+"]"});for(var Hr=0;Hr<or.length;Hr+=1)if(or[Hr].key==="DecodeParms"){for(var Yi=[],yi=0;yi<$n.reverseChain.split("/").length-1;yi+=1)Yi.push("null");Yi.push(or[Hr].value),or[Hr].value="["+Yi.join(" ")+"]"}}fe("<<");for(var Ci=0;Ci<or.length;Ci++)fe("/"+or[Ci].key+" "+or[Ci].value);fe(">>"),$n.data.length!==0&&(fe("stream"),fe(Bn($n.data)),fe("endstream"))},Rr=m.__private__.putPage=function(F){var we=F.number,et=F.data,dt=F.objId,Pt=F.contentsObjId;qt(dt,!0),fe("<</Type /Page"),fe("/Parent "+F.rootDictionaryObjId+" 0 R"),fe("/Resources "+F.resourceDictionaryObjId+" 0 R"),fe("/MediaBox ["+parseFloat(pe(F.mediaBox.bottomLeftX))+" "+parseFloat(pe(F.mediaBox.bottomLeftY))+" "+pe(F.mediaBox.topRightX)+" "+pe(F.mediaBox.topRightY)+"]"),F.cropBox!==null&&fe("/CropBox ["+pe(F.cropBox.bottomLeftX)+" "+pe(F.cropBox.bottomLeftY)+" "+pe(F.cropBox.topRightX)+" "+pe(F.cropBox.topRightY)+"]"),F.bleedBox!==null&&fe("/BleedBox ["+pe(F.bleedBox.bottomLeftX)+" "+pe(F.bleedBox.bottomLeftY)+" "+pe(F.bleedBox.topRightX)+" "+pe(F.bleedBox.topRightY)+"]"),F.trimBox!==null&&fe("/TrimBox ["+pe(F.trimBox.bottomLeftX)+" "+pe(F.trimBox.bottomLeftY)+" "+pe(F.trimBox.topRightX)+" "+pe(F.trimBox.topRightY)+"]"),F.artBox!==null&&fe("/ArtBox ["+pe(F.artBox.bottomLeftX)+" "+pe(F.artBox.bottomLeftY)+" "+pe(F.artBox.topRightX)+" "+pe(F.artBox.topRightY)+"]"),typeof F.userUnit=="number"&&F.userUnit!==1&&fe("/UserUnit "+F.userUnit),Vr.publish("putPage",{objId:dt,pageContext:ir[we],pageNumber:we,page:et}),fe("/Contents "+Pt+" 0 R"),fe(">>"),fe("endobj");var Ht=et.join(`
`);return $===D.ADVANCED&&(Ht+=`
Q`),qt(Pt,!0),Nr({data:Ht,filters:mi(),objectId:Pt}),fe("endobj"),dt},yr=m.__private__.putPages=function(){var F,we,et=[];for(F=1;F<=vr;F++)ir[F].objId=lt(),ir[F].contentsObjId=lt();for(F=1;F<=vr;F++)et.push(Rr({number:F,data:Te[F],objId:ir[F].objId,contentsObjId:ir[F].contentsObjId,mediaBox:ir[F].mediaBox,cropBox:ir[F].cropBox,bleedBox:ir[F].bleedBox,trimBox:ir[F].trimBox,artBox:ir[F].artBox,userUnit:ir[F].userUnit,rootDictionaryObjId:Ar,resourceDictionaryObjId:Tt}));qt(Ar,!0),fe("<</Type /Pages");var dt="/Kids [";for(we=0;we<vr;we++)dt+=et[we]+" 0 R ";fe(dt+"]"),fe("/Count "+vr),fe(">>"),fe("endobj"),Vr.publish("postPutPages")},ji=function(F){Vr.publish("putFont",{font:F,out:fe,newObject:cn,putStream:Nr}),F.isAlreadyPutted!==!0&&(F.objectNumber=cn(),fe("<<"),fe("/Type /Font"),fe("/BaseFont /"+lp(F.postScriptName)),fe("/Subtype /Type1"),typeof F.encoding=="string"&&fe("/Encoding /"+F.encoding),fe("/FirstChar 32"),fe("/LastChar 255"),fe(">>"),fe("endobj"))},_r=function(){for(var F in xn)xn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&ji(xn[F])},Fr=function(F){F.objectNumber=cn();var we=[];we.push({key:"Type",value:"/XObject"}),we.push({key:"Subtype",value:"/Form"}),we.push({key:"BBox",value:"["+[pe(F.x),pe(F.y),pe(F.x+F.width),pe(F.y+F.height)].join(" ")+"]"}),we.push({key:"Matrix",value:"["+F.matrix.toString()+"]"});var et=F.pages[1].join(`
`);Nr({data:et,additionalKeyValues:we,objectId:F.objectNumber}),fe("endobj")},Cr=function(){for(var F in ft)ft.hasOwnProperty(F)&&Fr(ft[F])},un=function(F,we){var et,dt=[],Pt=1/(we-1);for(et=0;et<1;et+=Pt)dt.push(et);if(dt.push(1),F[0].offset!=0){var Ht={offset:0,color:F[0].color};F.unshift(Ht)}if(F[F.length-1].offset!=1){var mn={offset:1,color:F[F.length-1].color};F.push(mn)}for(var Bn="",$n=0,or=0;or<dt.length;or++){for(et=dt[or];et>F[$n+1].offset;)$n++;var br=F[$n].offset,Hr=(et-br)/(F[$n+1].offset-br),Yi=F[$n].color,yi=F[$n+1].color;Bn+=he(Math.round((1-Hr)*Yi[0]+Hr*yi[0]).toString(16))+he(Math.round((1-Hr)*Yi[1]+Hr*yi[1]).toString(16))+he(Math.round((1-Hr)*Yi[2]+Hr*yi[2]).toString(16))}return Bn.trim()},qi=function(F,we){we||(we=21);var et=cn(),dt=un(F.colors,we),Pt=[];Pt.push({key:"FunctionType",value:"0"}),Pt.push({key:"Domain",value:"[0.0 1.0]"}),Pt.push({key:"Size",value:"["+we+"]"}),Pt.push({key:"BitsPerSample",value:"8"}),Pt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Pt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Nr({data:dt,additionalKeyValues:Pt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:et}),fe("endobj"),F.objectNumber=cn(),fe("<< /ShadingType "+F.type),fe("/ColorSpace /DeviceRGB");var Ht="/Coords ["+pe(parseFloat(F.coords[0]))+" "+pe(parseFloat(F.coords[1]))+" ";F.type===2?Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3])):Ht+=pe(parseFloat(F.coords[2]))+" "+pe(parseFloat(F.coords[3]))+" "+pe(parseFloat(F.coords[4]))+" "+pe(parseFloat(F.coords[5])),fe(Ht+="]"),F.matrix&&fe("/Matrix ["+F.matrix.toString()+"]"),fe("/Function "+et+" 0 R"),fe("/Extend [true true]"),fe(">>"),fe("endobj")},Zi=function(F,we){var et=lt(),dt=cn();we.push({resourcesOid:et,objectOid:dt}),F.objectNumber=dt;var Pt=[];Pt.push({key:"Type",value:"/Pattern"}),Pt.push({key:"PatternType",value:"1"}),Pt.push({key:"PaintType",value:"1"}),Pt.push({key:"TilingType",value:"1"}),Pt.push({key:"BBox",value:"["+F.boundingBox.map(pe).join(" ")+"]"}),Pt.push({key:"XStep",value:pe(F.xStep)}),Pt.push({key:"YStep",value:pe(F.yStep)}),Pt.push({key:"Resources",value:et+" 0 R"}),F.matrix&&Pt.push({key:"Matrix",value:"["+F.matrix.toString()+"]"}),Nr({data:F.stream,additionalKeyValues:Pt,objectId:F.objectNumber}),fe("endobj")},Vi=function(F){var we;for(we in en)en.hasOwnProperty(we)&&(en[we]instanceof of?qi(en[we]):en[we]instanceof hp&&Zi(en[we],F))},pi=function(F){for(var we in F.objectNumber=cn(),fe("<<"),F)switch(we){case"opacity":fe("/ca "+K(F[we]));break;case"stroke-opacity":fe("/CA "+K(F[we]))}fe(">>"),fe("endobj")},zr=function(){var F;for(F in Mn)Mn.hasOwnProperty(F)&&pi(Mn[F])},Jr=function(){for(var F in fe("/XObject <<"),ft)ft.hasOwnProperty(F)&&ft[F].objectNumber>=0&&fe("/"+F+" "+ft[F].objectNumber+" 0 R");Vr.publish("putXobjectDict"),fe(">>")},gr=function(){zi.oid=cn(),fe("<<"),fe("/Filter /Standard"),fe("/V "+zi.v),fe("/R "+zi.r),fe("/U <"+zi.toHexString(zi.U)+">"),fe("/O <"+zi.toHexString(zi.O)+">"),fe("/P "+zi.P),fe(">>"),fe("endobj")},Ui=function(){for(var F in fe("/Font <<"),xn)xn.hasOwnProperty(F)&&(p===!1||p===!0&&v.hasOwnProperty(F))&&fe("/"+F+" "+xn[F].objectNumber+" 0 R");fe(">>")},qo=function(){if(Object.keys(en).length>0){for(var F in fe("/Shading <<"),en)en.hasOwnProperty(F)&&en[F]instanceof of&&en[F].objectNumber>=0&&fe("/"+F+" "+en[F].objectNumber+" 0 R");Vr.publish("putShadingPatternDict"),fe(">>")}},Is=function(F){if(Object.keys(en).length>0){for(var we in fe("/Pattern <<"),en)en.hasOwnProperty(we)&&en[we]instanceof m.TilingPattern&&en[we].objectNumber>=0&&en[we].objectNumber<F&&fe("/"+we+" "+en[we].objectNumber+" 0 R");Vr.publish("putTilingPatternDict"),fe(">>")}},Yn=function(){if(Object.keys(Mn).length>0){var F;for(F in fe("/ExtGState <<"),Mn)Mn.hasOwnProperty(F)&&Mn[F].objectNumber>=0&&fe("/"+F+" "+Mn[F].objectNumber+" 0 R");Vr.publish("putGStateDict"),fe(">>")}},dn=function(F){qt(F.resourcesOid,!0),fe("<<"),fe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ui(),qo(),Is(F.objectOid),Yn(),Jr(),fe(">>"),fe("endobj")},as=function(){var F=[];_r(),zr(),Cr(),Vi(F),Vr.publish("putResources"),F.forEach(dn),dn({resourcesOid:Tt,objectOid:Number.MAX_SAFE_INTEGER}),Vr.publish("postPutResources")},xi=function(){Vr.publish("putAdditionalObjects");for(var F=0;F<Oe.length;F++){var we=Oe[F];qt(we.objId,!0),fe(we.content),fe("endobj")}Vr.publish("postPutAdditionalObjects")},ki=function(F){An[F.fontName]=An[F.fontName]||{},An[F.fontName][F.fontStyle]=F.id},ls=function(F,we,et,dt,Pt){var Ht={id:"F"+(Object.keys(xn).length+1).toString(10),postScriptName:F,fontName:we,fontStyle:et,encoding:dt,isStandardFont:Pt||!1,metadata:{}};return Vr.publish("addFont",{font:Ht,instance:this}),xn[Ht.id]=Ht,ki(Ht),Ht.id},lr=function(F){for(var we=0,et=Xe.length;we<et;we++){var dt=ls.call(this,F[we][0],F[we][1],F[we][2],Xe[we][3],!0);p===!1&&(v[dt]=!0);var Pt=F[we][0].split("-");ki({id:dt,fontName:Pt[0],fontStyle:Pt[1]||""})}Vr.publish("addFonts",{fonts:xn,dictionary:An})},Tr=function(F){return F.foo=function(){try{return F.apply(this,arguments)}catch(dt){var we=dt.stack||"";~we.indexOf(" at ")&&(we=we.split(" at ")[1]);var et="Error in function "+we.split(`
`)[0].split("<")[0]+": "+dt.message;if(!Or.console)throw new Error(et);Or.console.error(et,dt),Or.alert&&alert(et)}},F.foo.bar=F,F.foo},Ir=function(F,we){var et,dt,Pt,Ht,mn,Bn,$n,or,br;if(Pt=(we=we||{}).sourceEncoding||"Unicode",mn=we.outputEncoding,(we.autoencode||mn)&&xn[at].metadata&&xn[at].metadata[Pt]&&xn[at].metadata[Pt].encoding&&(Ht=xn[at].metadata[Pt].encoding,!mn&&xn[at].encoding&&(mn=xn[at].encoding),!mn&&Ht.codePages&&(mn=Ht.codePages[0]),typeof mn=="string"&&(mn=Ht[mn]),mn)){for($n=!1,Bn=[],et=0,dt=F.length;et<dt;et++)(or=mn[F.charCodeAt(et)])?Bn.push(String.fromCharCode(or)):Bn.push(F[et]),Bn[et].charCodeAt(0)>>8&&($n=!0);F=Bn.join("")}for(et=F.length;$n===void 0&&et!==0;)F.charCodeAt(et-1)>>8&&($n=!0),et--;if(!$n)return F;for(Bn=we.noBOM?[]:[254,255],et=0,dt=F.length;et<dt;et++){if((br=(or=F.charCodeAt(et))>>8)>>8)throw new Error("Character at position "+et+" of string '"+F+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Bn.push(br),Bn.push(or-(br<<8))}return String.fromCharCode.apply(void 0,Bn)},ps=m.__private__.pdfEscape=m.pdfEscape=function(F,we){return Ir(F,we).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ci=m.__private__.beginPage=function(F){Te[++vr]=[],ir[vr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(F[0]),topRightY:Number(F[1])}},Cn(vr),ie(Te[G])},Qs=function(F,we){var et,dt,Pt;switch(n=we||n,typeof F=="string"&&(et=k(F.toLowerCase()),Array.isArray(et)&&(dt=et[0],Pt=et[1])),Array.isArray(F)&&(dt=F[0]*it,Pt=F[1]*it),isNaN(dt)&&(dt=i[0],Pt=i[1]),(dt>14400||Pt>14400)&&(Ss.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),Pt=Math.min(14400,Pt)),i=[dt,Pt],n.substr(0,1)){case"l":Pt>dt&&(i=[Pt,dt]);break;case"p":dt>Pt&&(i=[Pt,dt])}ci(i),au(Pu),fe(Xi),cu!==0&&fe(cu+" J"),Li!==0&&fe(Li+" j"),Vr.publish("addPage",{pageNumber:vr})},si=function(F){F>0&&F<=vr&&(Te.splice(F,1),ir.splice(F,1),vr--,G>vr&&(G=vr),this.setPage(G))},Cn=function(F){F>0&&F<=vr&&(G=F)},rn=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Te.length-1},Br=function(F,we,et){var dt,Pt=void 0;return et=et||{},F=F!==void 0?F:xn[at].fontName,we=we!==void 0?we:xn[at].fontStyle,dt=F.toLowerCase(),An[dt]!==void 0&&An[dt][we]!==void 0?Pt=An[dt][we]:An[F]!==void 0&&An[F][we]!==void 0?Pt=An[F][we]:et.disableWarning===!1&&Ss.warn("Unable to look up font label for font '"+F+"', '"+we+"'. Refer to getFontList() for available fonts."),Pt||et.noFallback||(Pt=An.times[we])==null&&(Pt=An.times.normal),Pt},ms=m.__private__.putInfo=function(){var F=cn(),we=function(dt){return dt};for(var et in d!==null&&(we=zi.encryptor(F,0)),fe("<<"),fe("/Producer ("+ps(we("jsPDF "+Mr.version))+")"),Qe)Qe.hasOwnProperty(et)&&Qe[et]&&fe("/"+et.substr(0,1).toUpperCase()+et.substr(1)+" ("+ps(we(Qe[et]))+")");fe("/CreationDate ("+ps(we(j))+")"),fe(">>"),fe("endobj")},us=m.__private__.putCatalog=function(F){var we=(F=F||{}).rootDictionaryObjId||Ar;switch(cn(),fe("<<"),fe("/Type /Catalog"),fe("/Pages "+we+" 0 R"),Je||(Je="fullwidth"),Je){case"fullwidth":fe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":fe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":fe("/OpenAction [3 0 R /Fit]");break;case"original":fe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var et=""+Je;et.substr(et.length-1)==="%"&&(Je=parseInt(Je)/100),typeof Je=="number"&&fe("/OpenAction [3 0 R /XYZ null null "+K(Je)+"]")}switch(Kt||(Kt="continuous"),Kt){case"continuous":fe("/PageLayout /OneColumn");break;case"single":fe("/PageLayout /SinglePage");break;case"two":case"twoleft":fe("/PageLayout /TwoColumnLeft");break;case"tworight":fe("/PageLayout /TwoColumnRight")}xt&&fe("/PageMode /"+xt),Vr.publish("putCatalog"),fe(">>"),fe("endobj")},fa=m.__private__.putTrailer=function(){fe("trailer"),fe("<<"),fe("/Size "+(ce+1)),fe("/Root "+ce+" 0 R"),fe("/Info "+(ce-1)+" 0 R"),d!==null&&fe("/Encrypt "+zi.oid+" 0 R"),fe("/ID [ <"+W+"> <"+W+"> ]"),fe(">>")},pa=m.__private__.putHeader=function(){fe("%PDF-"+x),fe("%ºß¬à")},ga=m.__private__.putXRef=function(){var F="0000000000";fe("xref"),fe("0 "+(ce+1)),fe("0000000000 65535 f ");for(var we=1;we<=ce;we++)typeof ve[we]=="function"?fe((F+ve[we]()).slice(-10)+" 00000 n "):ve[we]!==void 0?fe((F+ve[we]).slice(-10)+" 00000 n "):fe("0000000000 00000 n ")},To=m.__private__.buildDocument=function(){Q(),ie(ee),Vr.publish("buildDocument"),pa(),yr(),xi(),as(),d!==null&&gr(),ms(),us();var F=J;return ga(),fa(),fe("startxref"),fe(""+F),fe("%%EOF"),ie(Te[G]),ee.join(`
`)},Qr=m.__private__.getBlob=function(F){return new Blob([de(F)],{type:"application/pdf"})},na=m.output=m.__private__.output=Tr(function(F,we){switch(typeof(we=we||{})=="string"?we={filename:we}:we.filename=we.filename||"generated.pdf",F){case void 0:return To();case"save":m.save(we.filename);break;case"arraybuffer":return de(To());case"blob":return Qr(To());case"bloburi":case"bloburl":if(Or.URL!==void 0&&typeof Or.URL.createObjectURL=="function")return Or.URL&&Or.URL.createObjectURL(Qr(To()))||void 0;Ss.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var et="",dt=To();try{et=Ab(dt)}catch{et=Ab(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+we.filename+";base64,"+et;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Or)==="[object Window]"){var Pt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ht=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';we.pdfObjectUrl&&(Pt=we.pdfObjectUrl,Ht="");var mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Pt+'"'+Ht+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(we)+");<\/script></body></html>",Bn=Or.open();return Bn!==null&&Bn.document.write(mn),Bn}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Or)==="[object Window]"){var $n='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(we.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+we.filename+'" width="500px" height="400px" /></body></html>',or=Or.open();if(or!==null){or.document.write($n);var br=this;or.document.documentElement.querySelector("#pdfViewer").onload=function(){or.document.title=we.filename,or.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(br.output("bloburl"))}}return or}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Or)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Hr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",we)+'"></iframe></body></html>',Yi=Or.open();if(Yi!==null&&(Yi.document.write(Hr),Yi.document.title=we.filename),Yi||typeof safari>"u")return Yi;break;case"datauri":case"dataurl":return Or.document.location.href=this.output("datauristring",we);default:return null}}),Bs=function(F){return Array.isArray(Vs)===!0&&Vs.indexOf(F)>-1};switch(r){case"pt":it=1;break;case"mm":it=72/25.4;break;case"cm":it=72/2.54;break;case"in":it=72;break;case"px":it=Bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":it=12;break;case"ex":it=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);it=r}var zi=null;De(),oe();var ra=function(F){return d!==null?zi.encryptor(F,0):function(we){return we}},pl=m.__private__.getPageInfo=m.getPageInfo=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ir[F].objId,pageNumber:F,pageContext:ir[F]}},mr=m.__private__.getPageInfoByObjId=function(F){if(isNaN(F)||F%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var we in ir)if(ir[we].objId===F)break;return pl(we)},wr=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:ir[G].objId,pageNumber:G,pageContext:ir[G]}};m.addPage=function(){return Qs.apply(this,arguments),this},m.setPage=function(){return Cn.apply(this,arguments),ie.call(this,Te[G]),this},m.insertPage=function(F){return this.addPage(),this.movePage(G,F),this},m.movePage=function(F,we){var et,dt;if(F>we){et=Te[F],dt=ir[F];for(var Pt=F;Pt>we;Pt--)Te[Pt]=Te[Pt-1],ir[Pt]=ir[Pt-1];Te[we]=et,ir[we]=dt,this.setPage(we)}else if(F<we){et=Te[F],dt=ir[F];for(var Ht=F;Ht<we;Ht++)Te[Ht]=Te[Ht+1],ir[Ht]=ir[Ht+1];Te[we]=et,ir[we]=dt,this.setPage(we)}return this},m.deletePage=function(){return si.apply(this,arguments),this},m.__private__.text=m.text=function(F,we,et,dt,Pt){var Ht,mn,Bn,$n,or,br,Hr,Yi,yi,Ci=(dt=dt||{}).scope||this;if(typeof F=="number"&&typeof we=="number"&&(typeof et=="string"||Array.isArray(et))){var ws=et;et=we,we=F,F=ws}if(arguments[3]instanceof Jt?(I("The transform parameter of text() with a Matrix value"),yi=Pt):(Bn=arguments[4],$n=arguments[5],fs(Hr=arguments[3])==="object"&&Hr!==null||(typeof Bn=="string"&&($n=Bn,Bn=null),typeof Hr=="string"&&($n=Hr,Hr=null),typeof Hr=="number"&&(Bn=Hr,Hr=null),dt={flags:Hr,angle:Bn,align:$n})),isNaN(we)||isNaN(et)||F==null)throw new Error("Invalid arguments passed to jsPDF.text");if(F.length===0)return Ci;var Ps="",Ko=!1,Wr=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:ou,eo=Ci.internal.scaleFactor;function Fl(Pi){return Pi=Pi.split("	").join(Array(dt.TabLen||9).join(" ")),ps(Pi,Hr)}function vo(Pi){for(var Di,xs=Pi.concat(),Hi=[],Jo=xs.length;Jo--;)typeof(Di=xs.shift())=="string"?Hi.push(Di):Array.isArray(Pi)&&(Di.length===1||Di[1]===void 0&&Di[2]===void 0)?Hi.push(Di[0]):Hi.push([Di[0],Di[1],Di[2]]);return Hi}function Au(Pi,Di){var xs;if(typeof Pi=="string")xs=Di(Pi)[0];else if(Array.isArray(Pi)){for(var Hi,Jo,Oo=Pi.concat(),sa=[],ec=Oo.length;ec--;)typeof(Hi=Oo.shift())=="string"?sa.push(Di(Hi)[0]):Array.isArray(Hi)&&typeof Hi[0]=="string"&&(Jo=Di(Hi[0],Hi[1],Hi[2]),sa.push([Jo[0],Jo[1],Jo[2]]));xs=sa}return xs}var Ma=!1,Qu=!0;if(typeof F=="string")Ma=!0;else if(Array.isArray(F)){var vl=F.concat();mn=[];for(var yl,Ms=vl.length;Ms--;)(typeof(yl=vl.shift())!="string"||Array.isArray(yl)&&typeof yl[0]!="string")&&(Qu=!1);Ma=Qu}if(Ma===!1)throw new Error('Type of text must be string or Array. "'+F+'" is not recognized.');typeof F=="string"&&(F=F.match(/[\r?\n]/)?F.split(/\r\n|\r|\n/g):[F]);var ka=$e/Ci.internal.scaleFactor,Zo=ka*(Wr-1);switch(dt.baseline){case"bottom":et-=Zo;break;case"top":et+=ka-Zo;break;case"hanging":et+=ka-2*Zo;break;case"middle":et+=ka/2-Zo}if((br=dt.maxWidth||0)>0&&(typeof F=="string"?F=Ci.splitTextToSize(F,br):Object.prototype.toString.call(F)==="[object Array]"&&(F=F.reduce(function(Pi,Di){return Pi.concat(Ci.splitTextToSize(Di,br))},[]))),Ht={text:F,x:we,y:et,options:dt,mutex:{pdfEscape:ps,activeFontKey:at,fonts:xn,activeFontSize:$e}},Vr.publish("preProcessText",Ht),F=Ht.text,Bn=(dt=Ht.options).angle,!(yi instanceof Jt)&&Bn&&typeof Bn=="number"){Bn*=Math.PI/180,dt.rotationDirection===0&&(Bn=-Bn),$===D.ADVANCED&&(Bn=-Bn);var Do=Math.cos(Bn),jl=Math.sin(Bn);yi=new Jt(Do,jl,-jl,Do,0,0)}else Bn&&Bn instanceof Jt&&(yi=Bn);$!==D.ADVANCED||yi||(yi=Sn),(or=dt.charSpace||uu)!==void 0&&(Ps+=pe(B(or))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Yi=dt.horizontalScale)!==void 0&&(Ps+=pe(100*Yi)+` Tz
`),dt.lang;var to=-1,yo=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,bo=Ci.internal.getCurrentPageInfo().pageContext;switch(yo){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Ac=bo.usedRenderingMode!==void 0?bo.usedRenderingMode:-1;to!==-1?Ps+=to+` Tr
`:Ac!==-1&&(Ps+=`0 Tr
`),to!==-1&&(bo.usedRenderingMode=to),$n=dt.align||"left";var Rs,Wa=$e*Wr,no=Ci.internal.pageSize.getWidth(),ro=xn[at];or=dt.charSpace||uu,br=dt.maxWidth||0,Hr=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var Ga=[],qa=function(Pi){return Ci.getStringUnitWidth(Pi,{font:ro,charSpace:or,fontSize:$e,doKerning:!1})*$e/eo};if(Object.prototype.toString.call(F)==="[object Array]"){var io;mn=vo(F),$n!=="left"&&(Rs=mn.map(qa));var Hs,Aa=0;if($n==="right"){we-=Rs[0],F=[],Ms=mn.length;for(var Xo=0;Xo<Ms;Xo++)Xo===0?(Hs=ur(we),io=bs(et)):(Hs=B(Aa-Rs[Xo]),io=-Wa),F.push([mn[Xo],Hs,io]),Aa=Rs[Xo]}else if($n==="center"){we-=Rs[0]/2,F=[],Ms=mn.length;for(var so=0;so<Ms;so++)so===0?(Hs=ur(we),io=bs(et)):(Hs=B((Aa-Rs[so])/2),io=-Wa),F.push([mn[so],Hs,io]),Aa=Rs[so]}else if($n==="left"){F=[],Ms=mn.length;for(var wt=0;wt<Ms;wt++)F.push(mn[wt])}else if($n==="justify"&&ro.encoding==="Identity-H"){F=[],Ms=mn.length,br=br!==0?br:no;for(var Yt=0,Nt=0;Nt<Ms;Nt++)if(io=Nt===0?bs(et):-Wa,Hs=Nt===0?ur(we):Yt,Nt<Ms-1){var Nn=B((br-Rs[Nt])/(mn[Nt].split(" ").length-1)),Jn=mn[Nt].split(" ");F.push([Jn[0]+" ",Hs,io]),Yt=0;for(var xr=1;xr<Jn.length;xr++){var Ji=(qa(Jn[xr-1]+" "+Jn[xr])-qa(Jn[xr]))*eo+Nn;xr==Jn.length-1?F.push([Jn[xr],Ji,0]):F.push([Jn[xr]+" ",Ji,0]),Yt-=Ji}}else F.push([mn[Nt],Hs,io]);F.push(["",Yt,0])}else{if($n!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(F=[],Ms=mn.length,br=br!==0?br:no,Nt=0;Nt<Ms;Nt++)io=Nt===0?bs(et):-Wa,Hs=Nt===0?ur(we):0,Nt<Ms-1?Ga.push(pe(B((br-Rs[Nt])/(mn[Nt].split(" ").length-1)))):Ga.push(0),F.push([mn[Nt],Hs,io])}}var Ei=typeof dt.R2L=="boolean"?dt.R2L:Ge;Ei===!0&&(F=Au(F,function(Pi,Di,xs){return[Pi.split("").reverse().join(""),Di,xs]})),Ht={text:F,x:we,y:et,options:dt,mutex:{pdfEscape:ps,activeFontKey:at,fonts:xn,activeFontSize:$e}},Vr.publish("postProcessText",Ht),F=Ht.text,Ko=Ht.mutex.isHex||!1;var du=xn[at].encoding;du!=="WinAnsiEncoding"&&du!=="StandardEncoding"||(F=Au(F,function(Pi,Di,xs){return[Fl(Pi),Di,xs]})),mn=vo(F),F=[];for(var _o,Qi,Ta,Ya=0,Da=1,Oa=Array.isArray(mn[0])?Da:Ya,Na="",ti=function(Pi,Di,xs){var Hi="";return xs instanceof Jt?(xs=typeof dt.angle=="number"?Gn(xs,new Jt(1,0,0,1,Pi,Di)):Gn(new Jt(1,0,0,1,Pi,Di),xs),$===D.ADVANCED&&(xs=Gn(new Jt(1,0,0,-1,0,0),xs)),Hi=xs.join(" ")+` Tm
`):Hi=pe(Pi)+" "+pe(Di)+` Td
`,Hi},ya=0;ya<mn.length;ya++){switch(Na="",Oa){case Da:Ta=(Ko?"<":"(")+mn[ya][0]+(Ko?">":")"),_o=parseFloat(mn[ya][1]),Qi=parseFloat(mn[ya][2]);break;case Ya:Ta=(Ko?"<":"(")+mn[ya]+(Ko?">":")"),_o=ur(we),Qi=bs(et)}Ga!==void 0&&Ga[ya]!==void 0&&(Na=Ga[ya]+` Tw
`),ya===0?F.push(Na+ti(_o,Qi,yi)+Ta):Oa===Ya?F.push(Na+Ta):Oa===Da&&F.push(Na+ti(_o,Qi,yi)+Ta)}F=Oa===Ya?F.join(` Tj
T* `):F.join(` Tj
`),F+=` Tj
`;var Ws=`BT
/`;return Ws+=at+" "+$e+` Tf
`,Ws+=pe($e*Wr)+` TL
`,Ws+=Pa+`
`,Ws+=Ps,Ws+=F,fe(Ws+="ET"),v[at]=!0,Ci};var mo=m.__private__.clip=m.clip=function(F){return fe(F==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return mo("evenodd")},m.__private__.discardPath=m.discardPath=function(){return fe("n"),this};var Ur=m.__private__.isValidStyle=function(F){var we=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(F)!==-1&&(we=!0),we};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(F){return Ur(F)&&(c=F),this};var gl=m.__private__.getStyle=m.getStyle=function(F){var we=c;switch(F){case"D":case"S":we="S";break;case"F":we="f";break;case"FD":case"DF":we="B";break;case"f":case"f*":case"B":case"B*":we=F}return we},Va=m.close=function(){return fe("h"),this};m.stroke=function(){return fe("S"),this},m.fill=function(F){return vi("f",F),this},m.fillEvenOdd=function(F){return vi("f*",F),this},m.fillStroke=function(F){return vi("B",F),this},m.fillStrokeEvenOdd=function(F){return vi("B*",F),this};var vi=function(F,we){fs(we)==="object"?Ju(we,F):fe(F)},Es=function(F){F===null||$===D.ADVANCED&&F===void 0||(F=gl(F),fe(F))};function vs(F,we,et,dt,Pt){var Ht=new hp(we||this.boundingBox,et||this.xStep,dt||this.yStep,this.gState,Pt||this.matrix);Ht.stream=this.stream;var mn=F+"$$"+this.cloneIndex+++"$$";return Ut(mn,Ht),Ht}var Ju=function(F,we){var et=Ln[F.key],dt=en[et];if(dt instanceof of)fe("q"),fe(su(we)),dt.gState&&m.setGState(dt.gState),fe(F.matrix.toString()+" cm"),fe("/"+et+" sh"),fe("Q");else if(dt instanceof hp){var Pt=new Jt(1,0,0,-1,0,Ha());F.matrix&&(Pt=Pt.multiply(F.matrix||Sn),et=vs.call(dt,F.key,F.boundingBox,F.xStep,F.yStep,Pt).id),fe("q"),fe("/Pattern cs"),fe("/"+et+" scn"),dt.gState&&m.setGState(dt.gState),fe(we),fe("Q")}},su=function(F){switch(F){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Lr=m.moveTo=function(F,we){return fe(pe(B(F))+" "+pe(R(we))+" m"),this},Yr=m.lineTo=function(F,we){return fe(pe(B(F))+" "+pe(R(we))+" l"),this},ml=m.curveTo=function(F,we,et,dt,Pt,Ht){return fe([pe(B(F)),pe(R(we)),pe(B(et)),pe(R(dt)),pe(B(Pt)),pe(R(Ht)),"c"].join(" ")),this};m.__private__.line=m.line=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Ur(Pt))throw new Error("Invalid arguments passed to jsPDF.line");return $===D.COMPAT?this.lines([[et-F,dt-we]],F,we,[1,1],Pt||"S"):this.lines([[et-F,dt-we]],F,we,[1,1]).stroke()},m.__private__.lines=m.lines=function(F,we,et,dt,Pt,Ht){var mn,Bn,$n,or,br,Hr,Yi,yi,Ci,ws,Ps,Ko;if(typeof F=="number"&&(Ko=et,et=we,we=F,F=Ko),dt=dt||[1,1],Ht=Ht||!1,isNaN(we)||isNaN(et)||!Array.isArray(F)||!Array.isArray(dt)||!Ur(Pt)||typeof Ht!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lr(we,et),mn=dt[0],Bn=dt[1],or=F.length,ws=we,Ps=et,$n=0;$n<or;$n++)(br=F[$n]).length===2?(ws=br[0]*mn+ws,Ps=br[1]*Bn+Ps,Yr(ws,Ps)):(Hr=br[0]*mn+ws,Yi=br[1]*Bn+Ps,yi=br[2]*mn+ws,Ci=br[3]*Bn+Ps,ws=br[4]*mn+ws,Ps=br[5]*Bn+Ps,ml(Hr,Yi,yi,Ci,ws,Ps));return Ht&&Va(),Es(Pt),this},m.path=function(F){for(var we=0;we<F.length;we++){var et=F[we],dt=et.c;switch(et.op){case"m":Lr(dt[0],dt[1]);break;case"l":Yr(dt[0],dt[1]);break;case"c":ml.apply(this,dt);break;case"h":Va()}}return this},m.__private__.rect=m.rect=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Ur(Pt))throw new Error("Invalid arguments passed to jsPDF.rect");return $===D.COMPAT&&(dt=-dt),fe([pe(B(F)),pe(R(we)),pe(B(et)),pe(B(dt)),"re"].join(" ")),Es(Pt),this},m.__private__.triangle=m.triangle=function(F,we,et,dt,Pt,Ht,mn){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||isNaN(Pt)||isNaN(Ht)||!Ur(mn))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[et-F,dt-we],[Pt-et,Ht-dt],[F-Pt,we-Ht]],F,we,[1,1],mn,!0),this},m.__private__.roundedRect=m.roundedRect=function(F,we,et,dt,Pt,Ht,mn){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||isNaN(Pt)||isNaN(Ht)||!Ur(mn))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Bn=4/3*(Math.SQRT2-1);return Pt=Math.min(Pt,.5*et),Ht=Math.min(Ht,.5*dt),this.lines([[et-2*Pt,0],[Pt*Bn,0,Pt,Ht-Ht*Bn,Pt,Ht],[0,dt-2*Ht],[0,Ht*Bn,-Pt*Bn,Ht,-Pt,Ht],[2*Pt-et,0],[-Pt*Bn,0,-Pt,-Ht*Bn,-Pt,-Ht],[0,2*Ht-dt],[0,-Ht*Bn,Pt*Bn,-Ht,Pt,-Ht]],F+Pt,we,[1,1],mn,!0),this},m.__private__.ellipse=m.ellipse=function(F,we,et,dt,Pt){if(isNaN(F)||isNaN(we)||isNaN(et)||isNaN(dt)||!Ur(Pt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ht=4/3*(Math.SQRT2-1)*et,mn=4/3*(Math.SQRT2-1)*dt;return Lr(F+et,we),ml(F+et,we-mn,F+Ht,we-dt,F,we-dt),ml(F-Ht,we-dt,F-et,we-mn,F-et,we),ml(F-et,we+mn,F-Ht,we+dt,F,we+dt),ml(F+Ht,we+dt,F+et,we+mn,F+et,we),Es(Pt),this},m.__private__.circle=m.circle=function(F,we,et,dt){if(isNaN(F)||isNaN(we)||isNaN(et)||!Ur(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(F,we,et,et,dt)},m.setFont=function(F,we,et){return et&&(we=me(we,et)),at=Br(F,we,{disableWarning:!1}),this};var Mc=m.__private__.getFont=m.getFont=function(){return xn[Br.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var F,we,et={};for(F in An)if(An.hasOwnProperty(F))for(we in et[F]=[],An[F])An[F].hasOwnProperty(we)&&et[F].push(we);return et},m.addFont=function(F,we,et,dt,Pt){var Ht=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ht.indexOf(arguments[3])!==-1?Pt=arguments[3]:arguments[3]&&Ht.indexOf(arguments[3])==-1&&(et=me(et,dt)),Pt=Pt||"Identity-H",ls.call(this,F,we,et,Pt)};var ou,Pu=t.lineWidth||.200025,Nl=m.__private__.getLineWidth=m.getLineWidth=function(){return Pu},au=m.__private__.setLineWidth=m.setLineWidth=function(F){return Pu=F,fe(pe(B(F))+" w"),this};m.__private__.setLineDash=Mr.API.setLineDash=Mr.API.setLineDashPattern=function(F,we){if(F=F||[],we=we||0,isNaN(we)||!Array.isArray(F))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return F=F.map(function(et){return pe(B(et))}).join(" "),we=pe(B(we)),fe("["+F+"] "+we+" d"),this};var Mu=m.__private__.getLineHeight=m.getLineHeight=function(){return $e*ou};m.__private__.getLineHeight=m.getLineHeight=function(){return $e*ou};var ei=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(F){return typeof(F=F||1.15)=="number"&&(ou=F),this},ys=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ou};ei(t.lineHeight);var ur=m.__private__.getHorizontalCoordinate=function(F){return B(F)},bs=m.__private__.getVerticalCoordinate=function(F){return $===D.ADVANCED?F:ir[G].mediaBox.topRightY-ir[G].mediaBox.bottomLeftY-B(F)},Il=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(F){return pe(ur(F))},Ua=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(F){return pe(bs(F))},Xi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return zn(Xi)},m.__private__.setStrokeColor=m.setDrawColor=function(F,we,et,dt){return Xi=sr({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"draw",precision:2}),fe(Xi),this};var ku=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return zn(ku)},m.__private__.setFillColor=m.setFillColor=function(F,we,et,dt){return ku=sr({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"fill",precision:2}),fe(ku),this};var Pa=t.textColor||"0 g",lu=m.__private__.getTextColor=m.getTextColor=function(){return zn(Pa)};m.__private__.setTextColor=m.setTextColor=function(F,we,et,dt){return Pa=sr({ch1:F,ch2:we,ch3:et,ch4:dt,pdfColorType:"text",precision:3}),this};var uu=t.charSpace,ia=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(uu||0)};m.__private__.setCharSpace=m.setCharSpace=function(F){if(isNaN(F))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return uu=F,this};var cu=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(F){var we=m.CapJoinStyles[F];if(we===void 0)throw new Error("Line cap style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cu=we,fe(we+" J"),this};var Li=0;m.__private__.setLineJoin=m.setLineJoin=function(F){var we=m.CapJoinStyles[F];if(we===void 0)throw new Error("Line join style of '"+F+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Li=we,fe(we+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(F){if(F=F||0,isNaN(F))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return fe(pe(B(F))+" M"),this},m.GState=Kv,m.setGState=function(F){(F=typeof F=="string"?Mn[Hn[F]]:kc(null,F)).equals(hr)||(fe("/"+F.id+" gs"),hr=F)};var kc=function(F,we){if(!F||!Hn[F]){var et=!1;for(var dt in Mn)if(Mn.hasOwnProperty(dt)&&Mn[dt].equals(we)){et=!0;break}if(et)we=Mn[dt];else{var Pt="GS"+(Object.keys(Mn).length+1).toString(10);Mn[Pt]=we,we.id=Pt}return F&&(Hn[F]=we.id),Vr.publish("addGState",we),we}};m.addGState=function(F,we){return kc(F,we),this},m.saveGraphicsState=function(){return fe("q"),Kn.push({key:at,size:$e,color:Pa}),this},m.restoreGraphicsState=function(){fe("Q");var F=Kn.pop();return at=F.key,$e=F.size,Pa=F.color,hr=null,this},m.setCurrentTransformationMatrix=function(F){return fe(F.toString()+" cm"),this},m.comment=function(F){return fe("#"+F),this};var Us=function(F,we){var et=F||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return et},set:function(Ht){isNaN(Ht)||(et=parseFloat(Ht))}});var dt=we||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function(Ht){isNaN(Ht)||(dt=parseFloat(Ht))}});var Pt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Pt},set:function(Ht){Pt=Ht.toString()}}),this},ma=function(F,we,et,dt){Us.call(this,F,we),this.type="rect";var Pt=et||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Pt},set:function(mn){isNaN(mn)||(Pt=parseFloat(mn))}});var Ht=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ht},set:function(mn){isNaN(mn)||(Ht=parseFloat(mn))}}),this},hu=function(){this.page=vr,this.currentPage=G,this.pages=Te.slice(0),this.pagesContext=ir.slice(0),this.x=Bt,this.y=Qt,this.matrix=Tn,this.width=Si(G),this.height=Ha(G),this.outputDestination=ge,this.id="",this.objectNumber=-1};hu.prototype.restore=function(){vr=this.page,G=this.currentPage,ir=this.pagesContext,Te=this.pages,Bt=this.x,Qt=this.y,Tn=this.matrix,Yo(G,this.width),_s(G,this.height),ge=this.outputDestination};var va=function(F,we,et,dt,Pt){$t.push(new hu),vr=G=0,Te=[],Bt=F,Qt=we,Tn=Pt,ci([et,dt])},Bl=function(F){if(rt[F])$t.pop().restore();else{var we=new hu,et="Xo"+(Object.keys(ft).length+1).toString(10);we.id=et,rt[F]=et,ft[et]=we,Vr.publish("addFormObject",we),$t.pop().restore()}};for(var Rl in m.beginFormObject=function(F,we,et,dt,Pt){return va(F,we,et,dt,Pt),this},m.endFormObject=function(F){return Bl(F),this},m.doFormObject=function(F,we){var et=ft[rt[F]];return fe("q"),fe(we.toString()+" cm"),fe("/"+et.id+" Do"),fe("Q"),this},m.getFormObject=function(F){var we=ft[rt[F]];return{x:we.x,y:we.y,width:we.width,height:we.height,matrix:we.matrix}},m.save=function(F,we){return F=F||"generated.pdf",(we=we||{}).returnPromise=we.returnPromise||!1,we.returnPromise===!1?(ef(Qr(To()),F),typeof ef.unload=="function"&&Or.setTimeout&&setTimeout(ef.unload,911),this):new Promise(function(et,dt){try{var Pt=ef(Qr(To()),F);typeof ef.unload=="function"&&Or.setTimeout&&setTimeout(ef.unload,911),et(Pt)}catch(Ht){dt(Ht.message)}})},Mr.API)Mr.API.hasOwnProperty(Rl)&&(Rl==="events"&&Mr.API.events.length?function(F,we){var et,dt,Pt;for(Pt=we.length-1;Pt!==-1;Pt--)et=we[Pt][0],dt=we[Pt][1],F.subscribe.apply(F,[et].concat(typeof dt=="function"?[dt]:dt))}(Vr,Mr.API.events):m[Rl]=Mr.API[Rl]);var Si=m.getPageWidth=function(F){return(ir[F=F||G].mediaBox.topRightX-ir[F].mediaBox.bottomLeftX)/it},Yo=m.setPageWidth=function(F,we){ir[F].mediaBox.topRightX=we*it+ir[F].mediaBox.bottomLeftX},Ha=m.getPageHeight=function(F){return(ir[F=F||G].mediaBox.topRightY-ir[F].mediaBox.bottomLeftY)/it},_s=m.setPageHeight=function(F,we){ir[F].mediaBox.topRightY=we*it+ir[F].mediaBox.bottomLeftY};return m.internal={pdfEscape:ps,getStyle:gl,getFont:Mc,getFontSize:He,getCharSpace:ia,getTextColor:lu,getLineHeight:Mu,getLineHeightFactor:ys,getLineWidth:Nl,write:Se,getHorizontalCoordinate:ur,getVerticalCoordinate:bs,getCoordinateString:Il,getVerticalCoordinateString:Ua,collections:{},newObject:cn,newAdditionalObject:Dn,newObjectDeferred:lt,newObjectDeferredBegin:qt,getFilters:mi,putStream:Nr,events:Vr,scaleFactor:it,pageSize:{getWidth:function(){return Si(G)},setWidth:function(F){Yo(G,F)},getHeight:function(){return Ha(G)},setHeight:function(F){_s(G,F)}},encryptionOptions:d,encryption:zi,getEncryptor:ra,output:na,getNumberOfPages:rn,pages:Te,out:fe,f2:K,f3:N,getPageInfo:pl,getPageInfoByObjId:mr,getCurrentPageInfo:wr,getPDFVersion:E,Point:Us,Rectangle:ma,Matrix:Jt,hasHotfix:Bs},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Si(G)},set:function(F){Yo(G,F)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ha(G)},set:function(F){_s(G,F)},enumerable:!0,configurable:!0}),lr.call(m,Xe),at="F1",Qs(i,n),Vr.publish("initialized"),m}ap.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},ap.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ap.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},ap.prototype.processOwnerPassword=function(t,e){return Db(Tb(e).substr(0,5),t)},ap.prototype.encryptor=function(t,e){var n=Tb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return Db(n,r)}},Kv.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||fs(t)!==fs(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},Mr.API={events:[]},Mr.version="2.5.2";var Co=Mr.API,H_=1,Ef=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Kf=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(t){return t.toFixed(2)},Qh=function(t){return t.toFixed(5)};Co.__acroform__={};var iu=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},C5=function(t){return t*H_},jc=function(t){var e=new JE,n=Qn.internal.getHeight(t)||0,r=Qn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Zr(r)),Number(Zr(n))],e},PH=Co.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},MH=Co.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},kH=Co.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},zo=Co.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return kH(t,e-1)},$o=Co.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return PH(t,e-1)},Vo=Co.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return MH(t,e-1)},AH=Co.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Zr(l.lowerLeft_X)),Number(Zr(l.lowerLeft_Y)),Number(Zr(l.upperRight_X)),Number(Zr(l.upperRight_Y))]},TH=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=Ob(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Zr(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=jc(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},Ob=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var s=n,o=Qn.internal.getHeight(t)||0;o=o<0?-o:o;var a=Qn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(N,B,V){if(N+1<i.length){var R=B+" "+i[N+1][0];return S0(R,t,V).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var c,d,p=S0("3",t,s).height,v=t.multiline?o-s:(o-p)/2,m=v+=2,x=0,E=0,A=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+S0(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var k="",D=0,$=0;$<i.length;$++)if(i.hasOwnProperty($)){var Y=!1;if(i[$].length!==1&&A!==i[$].length-1){if((p+2)*(D+2)+2>o)continue e;k+=i[$][A],Y=!0,E=$,$--}else{k=(k+=i[$][A]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var te=parseInt($),me=l(te,k,s),pe=$>=i.length-1;if(me&&!pe){k+=" ",A=0;continue}if(me||pe){if(pe)E=te;else if(t.multiline&&(p+2)*(D+2)+2>o)continue e}else{if(!t.multiline||(p+2)*(D+2)+2>o)continue e;E=te}}for(var I="",z=x;z<=E;z++){var K=i[z];if(t.multiline){if(z===E){I+=K[A]+" ",A=(A+1)%K.length;continue}if(z===x){I+=K[K.length-1]+" ";continue}}I+=K[0]+" "}switch(I=I.substr(I.length-1)==" "?I.substr(0,I.length-1):I,d=S0(I,t,s).width,t.textAlign){case"right":c=a-d-2;break;case"center":c=(a-d)/2;break;case"left":default:c=2}e+=Zr(c)+" "+Zr(m)+` Td
`,e+="("+Ef(I)+`) Tj
`,e+=-Zr(c)+` 0 Td
`,m=-(s+2),d=0,x=Y?E:E+1,D++,k=""}break}return r.text=e,r.fontSize=s,r},S0=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},DH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},OH=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},NH=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),fs(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},IH=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Ec.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(DH)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");H_=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new QE,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&OH(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],c=a.Rect;if(a.Rect&&(a.Rect=AH(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Qn.createDefaultAppearanceStream(a),fs(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=c,a.hasAppearanceStream&&!a.appearanceStreamContent){var d=TH(a);l.push({key:"AP",value:"<</N "+d+">>"}),i.internal.acroformPlugin.xForms.push(d)}if(a.appearanceStreamContent){var p="";for(var v in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(v)){var m=a.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var x=m[o];typeof x=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=m)=="function"&&(x=x.call(i,a)),p+="/"+o+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);p+=">>"}l.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&NH(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},XE=Co.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),fs(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+Ef(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},a2=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+Ef(r(t))+")"},Kc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Kc.prototype.toString=function(){return this.objId+" 0 R"},Kc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Kc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:XE(i,this.objId,this.scope)}):i instanceof Kc?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var JE=function(){Kc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};iu(JE,Kc);var QE=function(){Kc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Ef(n(t))+")"}},set:function(n){t=n}})};iu(QE,Kc);var Ec=function t(){Kc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');e=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!zo(e,3)},set:function(k){k?this.F=$o(e,3):this.F=Vo(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');n=k}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(k){r=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(k){r[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(k){r[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(k){r[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(k){r[3]=k}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zv)return;s="FieldObject"+t.FieldNum++}var k=function(D){return D};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Ef(k(s))+")"},set:function(k){s=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(k){s=k}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(k){o=k}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(k){l=k}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return c===void 0?50/H_:c},set:function(k){c=k}});var d="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return d},set:function(k){d=k}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Zv||this instanceof pf))return a2(p,this.objId,this.scope)},set:function(k){k=k.toString(),p=k}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof La?v:a2(v,this.objId,this.scope)},set:function(k){k=k.toString(),v=this instanceof La?k:k.substr(0,1)==="("?Kf(k.substr(1,k.length-2)):Kf(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Kf(v.substr(1,v.length-1)):v},set:function(k){k=k.toString(),v=this instanceof La?"/"+k:k}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof La?m:a2(m,this.objId,this.scope)},set:function(k){k=k.toString(),m=this instanceof La?k:k.substr(0,1)==="("?Kf(k.substr(1,k.length-2)):Kf(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof La?Kf(m.substr(1,m.length-1)):m},set:function(k){k=k.toString(),m=this instanceof La?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,E=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return E},set:function(k){k=!!k,E=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(k){x=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,1)},set:function(k){k?this.Ff=$o(this.Ff,1):this.Ff=Vo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,2)},set:function(k){k?this.Ff=$o(this.Ff,2):this.Ff=Vo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,3)},set:function(k){k?this.Ff=$o(this.Ff,3):this.Ff=Vo(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');A=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(A){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:A=2;break;case"center":case 1:A=1;break;case"left":case 0:default:A=0}}})};iu(Ec,Kc);var bp=function(){Ec.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return XE(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,c=[];l=o.exec(s);)c.push(l[a]);return c}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,18)},set:function(n){n?this.Ff=$o(this.Ff,18):this.Ff=Vo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=$o(this.Ff,19):this.Ff=Vo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,20)},set:function(n){n?(this.Ff=$o(this.Ff,20),e.sort()):this.Ff=Vo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,22)},set:function(n){n?this.Ff=$o(this.Ff,22):this.Ff=Vo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(n){n?this.Ff=$o(this.Ff,23):this.Ff=Vo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,27)},set:function(n){n?this.Ff=$o(this.Ff,27):this.Ff=Vo(this.Ff,27)}}),this.hasAppearanceStream=!1};iu(bp,Ec);var _p=function(){bp.call(this),this.fontName="helvetica",this.combo=!1};iu(_p,bp);var wp=function(){_p.call(this),this.combo=!0};iu(wp,_p);var ov=function(){wp.call(this),this.edit=!0};iu(ov,wp);var La=function(){Ec.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,15)},set:function(n){n?this.Ff=$o(this.Ff,15):this.Ff=Vo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,16)},set:function(n){n?this.Ff=$o(this.Ff,16):this.Ff=Vo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,17)},set:function(n){n?this.Ff=$o(this.Ff,17):this.Ff=Vo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(n){n?this.Ff=$o(this.Ff,26):this.Ff=Vo(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Ef(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){fs(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};iu(La,Ec);var av=function(){La.call(this),this.pushButton=!0};iu(av,La);var xp=function(){La.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};iu(xp,La);var Zv=function(){var t,e;Ec.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+Ef(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){fs(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};iu(Zv,Ec),xp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},xp.prototype.createOption=function(t){var e=new Zv;return e.Parent=this,e.optionName=t,this.Kids.push(e),BH.call(this.scope,e),e};var lv=function(){La.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qn.CheckBox.createAppearanceStream()};iu(lv,La);var pf=function(){Ec.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,13)},set:function(e){e?this.Ff=$o(this.Ff,13):this.Ff=Vo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,21)},set:function(e){e?this.Ff=$o(this.Ff,21):this.Ff=Vo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,23)},set:function(e){e?this.Ff=$o(this.Ff,23):this.Ff=Vo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,24)},set:function(e){e?this.Ff=$o(this.Ff,24):this.Ff=Vo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,25)},set:function(e){e?this.Ff=$o(this.Ff,25):this.Ff=Vo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,26)},set:function(e){e?this.Ff=$o(this.Ff,26):this.Ff=Vo(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};iu(pf,Ec);var uv=function(){pf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!zo(this.Ff,14)},set:function(t){t?this.Ff=$o(this.Ff,14):this.Ff=Vo(this.Ff,14)}}),this.password=!0};iu(uv,pf);var Qn={CheckBox:{createAppearanceStream:function(){return{N:{On:Qn.CheckBox.YesNormal},D:{On:Qn.CheckBox.YesPushDown,Off:Qn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=Ob(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Zr(Qn.internal.getWidth(t))+" "+Zr(Qn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Zr(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=Qn.internal.getHeight(t),o=Qn.internal.getWidth(t),a=Ob(t,t.caption);return i.push("1 g"),i.push("0 0 "+Zr(o)+" "+Zr(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Zr(o-1)+" "+Zr(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Zr(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(Qn.internal.getWidth(t))+" "+Zr(Qn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:Qn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=Qn.RadioButton.Circle.YesNormal,e.D[t]=Qn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Qn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qn.internal.Bezier_C).toFixed(5)),o=Number((r*Qn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.getWidth(t)<=Qn.internal.getHeight(t)?Qn.internal.getWidth(t)/4:Qn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Qh(Qn.internal.getWidth(t)/2)+" "+Qh(Qn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:Qn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=Qn.RadioButton.Cross.YesNormal,e.D[t]=Qn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=jc(t);e.scope=t.scope;var n=[],r=Qn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Zr(Qn.internal.getWidth(t)-2)+" "+Zr(Qn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),n.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),n.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),n.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=Qn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(Qn.internal.getWidth(t))+" "+Zr(Qn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Zr(Qn.internal.getWidth(t)-2)+" "+Zr(Qn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(n.x1.x)+" "+Zr(n.x1.y)+" m"),r.push(Zr(n.x2.x)+" "+Zr(n.x2.y)+" l"),r.push(Zr(n.x4.x)+" "+Zr(n.x4.y)+" m"),r.push(Zr(n.x3.x)+" "+Zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=jc(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(Qn.internal.getWidth(t))+" "+Zr(Qn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};Qn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=Qn.internal.getWidth(t),n=Qn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},Qn.internal.getWidth=function(t){var e=0;return fs(t)==="object"&&(e=C5(t.Rect[2])),e},Qn.internal.getHeight=function(t){var e=0;return fs(t)==="object"&&(e=C5(t.Rect[3])),e};var BH=Co.addField=function(t){if(IH(this,t),!(t instanceof Ec))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Co.AcroFormChoiceField=bp,Co.AcroFormListBox=_p,Co.AcroFormComboBox=wp,Co.AcroFormEditBox=ov,Co.AcroFormButton=La,Co.AcroFormPushButton=av,Co.AcroFormRadioButton=xp,Co.AcroFormCheckBox=lv,Co.AcroFormTextField=pf,Co.AcroFormPasswordField=uv,Co.AcroFormAppearance=Qn,Co.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:La,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:Qn},Mr.AcroForm={ChoiceField:bp,ListBox:_p,ComboBox:wp,EditBox:ov,Button:La,PushButton:av,RadioButton:xp,CheckBox:lv,TextField:pf,PasswordField:uv,Appearance:Qn};Mr.AcroForm;function eP(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(N,B){var V,R,j,W,X,oe=e;if((B=B||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(me(N))for(X in n)for(j=n[X],V=0;V<j.length;V+=1){for(W=!0,R=0;R<j[V].length;R+=1)if(j[V][R]!==void 0&&j[V][R]!==N[R]){W=!1;break}if(W===!0){oe=X;break}}else for(X in n)for(j=n[X],V=0;V<j.length;V+=1){for(W=!0,R=0;R<j[V].length;R+=1)if(j[V][R]!==void 0&&j[V][R]!==N.charCodeAt(R)){W=!1;break}if(W===!0){oe=X;break}}return oe===e&&B!==e&&(oe=B),oe},i=function N(B){for(var V=this.internal.write,R=this.internal.putStream,j=(0,this.internal.getFilters)();j.indexOf("FlateEncode")!==-1;)j.splice(j.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var W=[];if(W.push({key:"Type",value:"/XObject"}),W.push({key:"Subtype",value:"/Image"}),W.push({key:"Width",value:B.width}),W.push({key:"Height",value:B.height}),B.colorSpace===A.INDEXED?W.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(W.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===A.DEVICE_CMYK&&W.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),W.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&W.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var X="",oe=0,_e=B.transparency.length;oe<_e;oe++)X+=B.transparency[oe]+" "+B.transparency[oe]+" ";W.push({key:"Mask",value:"["+X+"]"})}B.sMask!==void 0&&W.push({key:"SMask",value:B.objectId+1+" 0 R"});var Ce=B.filter!==void 0?["/"+B.filter]:void 0;if(R({data:B.data,additionalKeyValues:W,alreadyAppliedFilters:Ce,objectId:B.objectId}),V("endobj"),"sMask"in B&&B.sMask!==void 0){var De="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,Z={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:De,data:B.sMask};"filter"in B&&(Z.filter=B.filter),N.call(this,Z)}if(B.colorSpace===A.INDEXED){var G=this.internal.newObject();R({data:I(new Uint8Array(B.palette)),objectId:G}),V("endobj")}},s=function(){var N=this.internal.collections.addImage_images;for(var B in N)i.call(this,N[B])},o=function(){var N,B=this.internal.collections.addImage_images,V=this.internal.write;for(var R in B)V("/I"+(N=B[R]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},c=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(N){return typeof t["process"+N.toUpperCase()]=="function"},p=function(N){return fs(N)==="object"&&N.nodeType===1},v=function(N,B){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var V=""+N.getAttribute("src");if(V.indexOf("data:image/")===0)return Gg(unescape(V).split("base64,").pop());var R=t.loadFile(V,!0);if(R!==void 0)return R}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var j;switch(B){case"PNG":j="image/png";break;case"WEBP":j="image/webp";break;case"JPEG":case"JPG":default:j="image/jpeg"}return Gg(N.toDataURL(j,1).split("base64,").pop())}},m=function(N){var B=this.internal.collections.addImage_images;if(B){for(var V in B)if(N===B[V].alias)return B[V]}},x=function(N,B,V){return N||B||(N=-96,B=-96),N<0&&(N=-1*V.width*72/N/this.internal.scaleFactor),B<0&&(B=-1*V.height*72/B/this.internal.scaleFactor),N===0&&(N=B*V.width/V.height),B===0&&(B=N*V.height/V.width),[N,B]},E=function(N,B,V,R,j,W){var X=x.call(this,V,R,j),oe=this.internal.getCoordinateString,_e=this.internal.getVerticalCoordinateString,Ce=l.call(this);if(V=X[0],R=X[1],Ce[j.index]=j,W){W*=Math.PI/180;var De=Math.cos(W),Z=Math.sin(W),G=function(he){return he.toFixed(4)},re=[G(De),G(Z),G(-1*Z),G(De),0,0,"cm"]}this.internal.write("q"),W?(this.internal.write([1,"0","0",1,oe(N),_e(B+R),"cm"].join(" ")),this.internal.write(re.join(" ")),this.internal.write([oe(V),"0","0",oe(R),"0","0","cm"].join(" "))):this.internal.write([oe(V),"0","0",oe(R),oe(N),_e(B+R),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+j.index+" Do"),this.internal.write("Q")},A=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},D=t.__addimage__.sHashCode=function(N){var B,V,R=0;if(typeof N=="string")for(V=N.length,B=0;B<V;B++)R=(R<<5)-R+N.charCodeAt(B),R|=0;else if(me(N))for(V=N.byteLength/2,B=0;B<V;B++)R=(R<<5)-R+N[B],R|=0;return R},$=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var B=!0;return N.length===0&&(B=!1),N.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(B=!1),B},Y=t.__addimage__.extractImageFromDataUrl=function(N){var B=(N=N||"").split("base64,"),V=null;if(B.length===2){var R=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(B[0]);Array.isArray(R)&&(V={mimeType:R[1],charset:R[2],data:B[1]})}return V},te=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(N){return te()&&N instanceof ArrayBuffer};var me=t.__addimage__.isArrayBufferView=function(N){return te()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},pe=t.__addimage__.binaryStringToUint8Array=function(N){for(var B=N.length,V=new Uint8Array(B),R=0;R<B;R++)V[R]=N.charCodeAt(R);return V},I=t.__addimage__.arrayBufferToBinaryString=function(N){for(var B="",V=me(N)?N:new Uint8Array(N),R=0;R<V.length;R+=8192)B+=String.fromCharCode.apply(null,V.subarray(R,R+8192));return B};t.addImage=function(){var N,B,V,R,j,W,X,oe,_e;if(typeof arguments[1]=="number"?(B=e,V=arguments[1],R=arguments[2],j=arguments[3],W=arguments[4],X=arguments[5],oe=arguments[6],_e=arguments[7]):(B=arguments[1],V=arguments[2],R=arguments[3],j=arguments[4],W=arguments[5],X=arguments[6],oe=arguments[7],_e=arguments[8]),fs(N=arguments[0])==="object"&&!p(N)&&"imageData"in N){var Ce=N;N=Ce.imageData,B=Ce.format||B||e,V=Ce.x||V||0,R=Ce.y||R||0,j=Ce.w||Ce.width||j,W=Ce.h||Ce.height||W,X=Ce.alias||X,oe=Ce.compression||oe,_e=Ce.rotation||Ce.angle||_e}var De=this.internal.getFilters();if(oe===void 0&&De.indexOf("FlateEncode")!==-1&&(oe="SLOW"),isNaN(V)||isNaN(R))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var Z=z.call(this,N,B,X,oe);return E.call(this,V,R,j,W,Z,_e),this};var z=function(N,B,V,R){var j,W,X;if(typeof N=="string"&&r(N)===e){N=unescape(N);var oe=K(N,!1);(oe!==""||(oe=t.loadFile(N,!0))!==void 0)&&(N=oe)}if(p(N)&&(N=v(N,B)),B=r(N,B),!d(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((X=V)==null||X.length===0)&&(V=function(_e){return typeof _e=="string"||me(_e)?D(_e):me(_e.data)?D(_e.data):null}(N)),(j=m.call(this,V))||(te()&&(N instanceof Uint8Array||B==="RGBA"||(W=N,N=pe(N))),j=this["process"+B.toUpperCase()](N,c.call(this),V,function(_e){return _e&&typeof _e=="string"&&(_e=_e.toUpperCase()),_e in t.image_compression?_e:k.NONE}(R),W)),!j)throw new Error("An unknown error occurred whilst processing the image.");return j},K=t.__addimage__.convertBase64ToBinaryString=function(N,B){var V;B=typeof B!="boolean"||B;var R,j="";if(typeof N=="string"){R=(V=Y(N))!==null?V.data:N;try{j=Gg(R)}catch(W){if(B)throw $(R)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+W.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return j};t.getImageProperties=function(N){var B,V,R="";if(p(N)&&(N=v(N)),typeof N=="string"&&r(N)===e&&((R=K(N,!1))===""&&(R=t.loadFile(N)||""),N=R),V=r(N),!d(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!te()||N instanceof Uint8Array||(N=pe(N)),!(B=this["process"+V.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=V,B}})(Mr.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};Mr.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),c=n.pageContext.annotations,d=!1,p=0;p<c.length&&!d;p++)switch((r=c[p]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(d=!0);break;case"reference":case"text":case"freetext":d=!0}if(d!=0){this.internal.write("/Annots [");for(var v=0;v<c.length;v++){r=c[v];var m=this.internal.pdfEscape,x=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var E=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(E.objId),D=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(k(r.contents))+")",s+=" /Popup "+A.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(k(D))+") >>",E.content=s;var $=E.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+$,r.open&&(s+=" /Open true"),s+=" >>",A.content=s,this.internal.write(E.objId,"0 R",A.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var Y=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Y+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var te=this.annotations._nameMap[r.options.name];r.options.pageNumber=te.page,r.options.top=te.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var me=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+me+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:c(r),w:l(n+i),h:c(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),c=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var d=this.splitTextToSize(n,a).length;o=Math.ceil(c*d)}else a=l,o=c;return this.text(n,r,i,s),i+=.2*c,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-c,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Mr.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(E){return e[E.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(E){return typeof E=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(E)},a=t.__arabicParser__.isArabicEndLetter=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(E){return o(E)&&i.indexOf(E.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length>=3};var d=t.__arabicParser__.arabicLetterHasMedialForm=function(E){return o(E)&&s(E)&&e[E.charCodeAt(0)].length==4},p=t.__arabicParser__.resolveLigatures=function(E){var A=0,k=n,D="",$=0;for(A=0;A<E.length;A+=1)k[E.charCodeAt(A)]!==void 0?($++,typeof(k=k[E.charCodeAt(A)])=="number"&&(D+=String.fromCharCode(k),k=n,$=0),A===E.length-1&&(k=n,D+=E.charAt(A-($-1)),A-=$-1,$=0)):(k=n,D+=E.charAt(A-$),A-=$,$=0);return D};t.__arabicParser__.isArabicDiacritic=function(E){return E!==void 0&&r[E.charCodeAt(0)]!==void 0};var v=t.__arabicParser__.getCorrectForm=function(E,A,k){return o(E)?s(E)===!1?-1:!c(E)||!o(A)&&!o(k)||!o(k)&&a(A)||a(E)&&!o(A)||a(E)&&l(A)||a(E)&&a(A)?0:d(E)&&o(A)&&!a(A)&&o(k)&&c(k)?3:a(E)||!o(k)?1:2:-1},m=function(E){var A=0,k=0,D=0,$="",Y="",te="",me=(E=E||"").split("\\s+"),pe=[];for(A=0;A<me.length;A+=1){for(pe.push(""),k=0;k<me[A].length;k+=1)$=me[A][k],Y=me[A][k-1],te=me[A][k+1],o($)?(D=v($,Y,te),pe[A]+=D!==-1?String.fromCharCode(e[$.charCodeAt(0)][D]):$):pe[A]+=$;pe[A]=p(pe[A])}return pe.join(" ")},x=t.__arabicParser__.processArabic=t.processArabic=function(){var E,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(A)){var D=0;for(k=[],D=0;D<A.length;D+=1)Array.isArray(A[D])?k.push([m(A[D][0]),A[D][1],A[D][2]]):k.push([m(A[D])]);E=k}else E=m(A);return typeof arguments[0]=="string"?E:(arguments[0].text=E,arguments[0])};t.events.push(["preProcessText",x])}(Mr.API),Mr.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Mr.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(E){l=E}});var c=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return c},set:function(E){c=E}});var d=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return d},set:function(E){d=E}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(E){p=E}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(E){v=E}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(E){m=E}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(E){x=E}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,c){r.call(this);var d=(c=c||{}).fontSize||this.getFontSize(),p=c.font||this.getFont(),v=c.scaleFactor||this.internal.scaleFactor,m=0,x=0,E=0,A=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var k=c.maxWidth;k>0?typeof l=="string"?l=this.splitTextToSize(l,k):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function($,Y){return $.concat(A.splitTextToSize(Y,k))},[])):l=Array.isArray(l)?l:[l];for(var D=0;D<l.length;D++)m<(E=this.getStringUnitWidth(l[D],{font:p})*d)&&(m=E);return m!==0&&(x=l.length),{w:m/=v,h:Math.max((x*d*this.getLineHeightFactor()-d*(this.getLineHeightFactor()-1))/v,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var c=this.internal.__cell__.lastCell,d=this.internal.__cell__.padding,p=this.internal.__cell__.margins||e,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return c.lineNumber!==void 0&&(c.lineNumber===l.lineNumber?(l.x=(c.x||0)+(c.width||0),l.y=c.y||0):c.y+c.height+l.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=p.top,m&&v&&(this.printHeaderRow(l.lineNumber,!0),l.y+=v[0].height)):l.y=c.y+c.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-d,l.y+d,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+d,{align:"center",baseline:"top",maxWidth:l.width-d-d}):this.text(l.text,l.x+d,l.y+d,{align:"left",baseline:"top",maxWidth:l.width-d-d})),this.internal.__cell__.lastCell=l,this};t.table=function(l,c,d,p,v){if(r.call(this),!d)throw new Error("No data for PDF table.");var m,x,E,A,k=[],D=[],$=[],Y={},te={},me=[],pe=[],I=(v=v||{}).autoSize||!1,z=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,N=v.margins||Object.assign({width:this.getPageWidth()},e),B=typeof v.padding=="number"?v.padding:3,V=v.headerBackgroundColor||"#c8c8c8",R=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=z,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=R,this.setFontSize(K),p==null)D=k=Object.keys(d[0]),$=k.map(function(){return"left"});else if(Array.isArray(p)&&fs(p[0])==="object")for(k=p.map(function(Ce){return Ce.name}),D=p.map(function(Ce){return Ce.prompt||Ce.name||""}),$=p.map(function(Ce){return Ce.align||"left"}),m=0;m<p.length;m+=1)te[p[m].name]=p[m].width*(19.049976/25.4);else Array.isArray(p)&&typeof p[0]=="string"&&(D=k=p,$=k.map(function(){return"left"}));if(I||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<k.length;m+=1){for(Y[A=k[m]]=d.map(function(Ce){return Ce[A]}),this.setFont(void 0,"bold"),me.push(this.getTextDimensions(D[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=Y[A],this.setFont(void 0,"normal"),E=0;E<x.length;E+=1)me.push(this.getTextDimensions(x[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);te[A]=Math.max.apply(null,me)+B+B,me=[]}if(z){var j={};for(m=0;m<k.length;m+=1)j[k[m]]={},j[k[m]].text=D[m],j[k[m]].align=$[m];var W=a.call(this,j,te);pe=k.map(function(Ce){return new s(l,c,te[Ce],W,j[Ce].text,void 0,j[Ce].align)}),this.setTableHeaderRow(pe),this.printHeaderRow(1,!1)}var X=p.reduce(function(Ce,De){return Ce[De.name]=De.align,Ce},{});for(m=0;m<d.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:d[m]},this);var oe=a.call(this,d[m],te);for(E=0;E<k.length;E+=1){var _e=d[m][k[E]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:E,data:_e},this),o.call(this,new s(l,c,te[k[E]],oe,_e,m+2,X[k[E]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=c,this};var a=function(l,c){var d=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(l).map(function(m){var x=l[m];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,c[m]-d-d)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+d+d},this).reduce(function(m,x){return Math.max(m,x)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,c){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var d;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){d=this.internal.__cell__.tableHeaderRow[m].clone(),c&&(d.y=this.internal.__cell__.margins.top||0,v.push(d)),d.lineNumber=l;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,d),this.setTextColor(x)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),n=!1}}(Mr.API);var tP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},nP=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nb=eP(nP),rP=[100,200,300,400,500,600,700,800,900],RH=eP(rP);function Ib(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return tP[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof Nb[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function E5(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var FH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M5(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function jH(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},FH,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=Ib(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+M5(s)+"' and default family '"+r+"'.");if(o=function(l,c){if(c[l])return c[l];var d=Nb[l],p=d<=Nb.normal?-1:1,v=E5(c,nP,d,p);if(!v)throw new Error("Could not find a matching font-stretch value for "+l);return v}(s.stretch,o),o=function(l,c){if(c[l])return c[l];for(var d=tP[l],p=0;p<d.length;++p)if(c[d[p]])return c[d[p]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,c){if(c[l])return c[l];if(l===400&&c[500])return c[500];if(l===500&&c[400])return c[400];var d=RH[l],p=E5(c,rP,d,l<400?-1:1);if(!p)throw new Error("Could not find a matching font-weight for value "+l);return p}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M5(s)+"'.");return o}function k5(t){return t.trimLeft()}function zH(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function $H(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var C0,A5,T5,l2=["times"];(function(t){var e,n,r,i,s,o,a,l,c,d=function(Z){return Z=Z||{},this.isStrokeTransparent=Z.isStrokeTransparent||!1,this.strokeOpacity=Z.strokeOpacity||1,this.strokeStyle=Z.strokeStyle||"#000000",this.fillStyle=Z.fillStyle||"#000000",this.isFillTransparent=Z.isFillTransparent||!1,this.fillOpacity=Z.fillOpacity||1,this.font=Z.font||"10px sans-serif",this.textBaseline=Z.textBaseline||"alphabetic",this.textAlign=Z.textAlign||"left",this.lineWidth=Z.lineWidth||1,this.lineJoin=Z.lineJoin||"miter",this.lineCap=Z.lineCap||"butt",this.path=Z.path||[],this.transform=Z.transform!==void 0?Z.transform.clone():new l,this.globalCompositeOperation=Z.globalCompositeOperation||"normal",this.globalAlpha=Z.globalAlpha||1,this.clip_path=Z.clip_path||[],this.currentPoint=Z.currentPoint||new o,this.miterLimit=Z.miterLimit||10,this.lastPoint=Z.lastPoint||new o,this.lineDashOffset=Z.lineDashOffset||0,this.lineDash=Z.lineDash||[],this.margin=Z.margin||[0,0,0,0],this.prevPageLastElemOffset=Z.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Z.ignoreClearRect!="boolean"||Z.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new p(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new d}]);var p=function(Z){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=Z;Object.defineProperty(this,"pdf",{get:function(){return G}});var re=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return re},set:function(ie){re=!!ie}});var he=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return he},set:function(ie){he=!!ie}});var ce=0;Object.defineProperty(this,"posX",{get:function(){return ce},set:function(ie){isNaN(ie)||(ce=ie)}});var ve=0;Object.defineProperty(this,"posY",{get:function(){return ve},set:function(ie){isNaN(ie)||(ve=ie)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(ie){var fe;typeof ie=="number"?fe=[ie,ie,ie,ie]:((fe=new Array(4))[0]=ie[0],fe[1]=ie.length>=2?ie[1]:fe[0],fe[2]=ie.length>=3?ie[2]:fe[0],fe[3]=ie.length>=4?ie[3]:fe[1]),c.margin=fe}});var ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ee},set:function(ie){ee=ie}});var J=0;Object.defineProperty(this,"lastBreak",{get:function(){return J},set:function(ie){J=ie}});var Oe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Oe},set:function(ie){Oe=ie}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(ie){ie instanceof d&&(c=ie)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(ie){c.path=ie}});var Te=[];Object.defineProperty(this,"ctxStack",{get:function(){return Te},set:function(ie){Te=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var fe;fe=v(ie),this.ctx.fillStyle=fe.style,this.ctx.isFillTransparent=fe.a===0,this.ctx.fillOpacity=fe.a,this.pdf.setFillColor(fe.r,fe.g,fe.b,{a:fe.a}),this.pdf.setTextColor(fe.r,fe.g,fe.b,{a:fe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var fe=v(ie);this.ctx.strokeStyle=fe.style,this.ctx.isStrokeTransparent=fe.a===0,this.ctx.strokeOpacity=fe.a,fe.a===0?this.pdf.setDrawColor(255,255,255):(fe.a,this.pdf.setDrawColor(fe.r,fe.g,fe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var Ye=null;function ge(ie,fe){if(Ye===null){var Se=function(de){var Xe=[];return Object.keys(de).forEach(function($e){de[$e].forEach(function(Je){var He=null;switch(Je){case"bold":He={family:$e,weight:"bold"};break;case"italic":He={family:$e,style:"italic"};break;case"bolditalic":He={family:$e,weight:"bold",style:"italic"};break;case"":case"normal":He={family:$e}}He!==null&&(He.ref={name:$e,style:Je},Xe.push(He))})}),Xe}(ie.getFontList());Ye=function(de){for(var Xe={},$e=0;$e<de.length;++$e){var Je=Ib(de[$e]),He=Je.family,Ge=Je.stretch,xt=Je.style,Et=Je.weight;Xe[He]=Xe[He]||{},Xe[He][Ge]=Xe[He][Ge]||{},Xe[He][Ge][xt]=Xe[He][Ge][xt]||{},Xe[He][Ge][xt][Et]=Je}return Xe}(Se.concat(fe))}return Ye}var Q=null;Object.defineProperty(this,"fontFaces",{get:function(){return Q},set:function(ie){Ye=null,Q=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var fe;if(this.ctx.font=ie,(fe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ie))!==null){var Se=fe[1],de=(fe[2],fe[3]),Xe=fe[4],$e=(fe[5],fe[6]),Je=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(Je==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:Je==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var He=function(Qe){var at,it,Bt=[],Qt=Qe.trim();if(Qt==="")return l2;if(Qt in P5)return[P5[Qt]];for(;Qt!=="";){switch(it=null,at=(Qt=k5(Qt)).charAt(0)){case'"':case"'":it=zH(Qt.substring(1),at);break;default:it=$H(Qt)}if(it===null||(Bt.push(it[0]),(Qt=k5(it[1]))!==""&&Qt.charAt(0)!==","))return l2;Qt=Qt.replace(/^,/,"")}return Bt}($e);if(this.fontFaces){var Ge=jH(ge(this.pdf,this.fontFaces),He.map(function(Qe){return{family:Qe,stretch:"normal",weight:de,style:Se}}));this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var xt="";(de==="bold"||parseInt(de,10)>=700||Se==="bold")&&(xt="bold"),Se==="italic"&&(xt+="italic"),xt.length===0&&(xt="normal");for(var Et="",Kt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},sn=0;sn<He.length;sn++){if(this.pdf.internal.getFont(He[sn],xt,{noFallback:!0,disableWarning:!0})!==void 0){Et=He[sn];break}if(xt==="bolditalic"&&this.pdf.internal.getFont(He[sn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Et=He[sn],xt="bold";else if(this.pdf.internal.getFont(He[sn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Et=He[sn],xt="normal";break}}if(Et===""){for(var an=0;an<He.length;an++)if(Kt[He[an]]){Et=Kt[He[an]];break}}Et=Et===""?"Times":Et,this.pdf.setFont(Et,xt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,De.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,De.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};p.prototype.setLineDash=function(Z){this.lineDash=Z},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){Y.call(this,"fill",!1)},p.prototype.stroke=function(){Y.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ss.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var re=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"mt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(Z,G)},p.prototype.closePath=function(){var Z=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&fs(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){Z=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.lineTo=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ss.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var re=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"lt",x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Y.call(this,null,!0)},p.prototype.quadraticCurveTo=function(Z,G,re,he){if(isNaN(re)||isNaN(he)||isNaN(Z)||isNaN(G))throw Ss.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ce=this.ctx.transform.applyToPoint(new o(re,he)),ve=this.ctx.transform.applyToPoint(new o(Z,G));this.path.push({type:"qct",x1:ve.x,y1:ve.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},p.prototype.bezierCurveTo=function(Z,G,re,he,ce,ve){if(isNaN(ce)||isNaN(ve)||isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he))throw Ss.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ee=this.ctx.transform.applyToPoint(new o(ce,ve)),J=this.ctx.transform.applyToPoint(new o(Z,G)),Oe=this.ctx.transform.applyToPoint(new o(re,he));this.path.push({type:"bct",x1:J.x,y1:J.y,x2:Oe.x,y2:Oe.y,x:ee.x,y:ee.y}),this.ctx.lastPoint=new o(ee.x,ee.y)},p.prototype.arc=function(Z,G,re,he,ce,ve){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he)||isNaN(ce))throw Ss.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ve=!!ve,!this.ctx.transform.isIdentity){var ee=this.ctx.transform.applyToPoint(new o(Z,G));Z=ee.x,G=ee.y;var J=this.ctx.transform.applyToPoint(new o(0,re)),Oe=this.ctx.transform.applyToPoint(new o(0,0));re=Math.sqrt(Math.pow(J.x-Oe.x,2)+Math.pow(J.y-Oe.y,2))}Math.abs(ce-he)>=2*Math.PI&&(he=0,ce=2*Math.PI),this.path.push({type:"arc",x:Z,y:G,radius:re,startAngle:he,endAngle:ce,counterclockwise:ve})},p.prototype.arcTo=function(Z,G,re,he,ce){throw new Error("arcTo not implemented.")},p.prototype.rect=function(Z,G,re,he){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he))throw Ss.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Z,G),this.lineTo(Z+re,G),this.lineTo(Z+re,G+he),this.lineTo(Z,G+he),this.lineTo(Z,G),this.lineTo(Z+re,G),this.lineTo(Z,G)},p.prototype.fillRect=function(Z,G,re,he){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he))throw Ss.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ce={};this.lineCap!=="butt"&&(ce.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ce.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Z,G,re,he),this.fill(),ce.hasOwnProperty("lineCap")&&(this.lineCap=ce.lineCap),ce.hasOwnProperty("lineJoin")&&(this.lineJoin=ce.lineJoin)}},p.prototype.strokeRect=function(Z,G,re,he){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he))throw Ss.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(Z,G,re,he),this.stroke())},p.prototype.clearRect=function(Z,G,re,he){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he))throw Ss.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Z,G,re,he))},p.prototype.save=function(Z){Z=typeof Z!="boolean"||Z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),Z){this.ctx.fontSize=this.pdf.internal.getFontSize();var he=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=he}},p.prototype.restore=function(Z){Z=typeof Z!="boolean"||Z;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,re=0;re<this.pdf.internal.getNumberOfPages();re++)this.pdf.setPage(re+1),this.pdf.internal.out("Q");this.pdf.setPage(G),Z&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(Z){var G,re,he,ce;if(Z.isCanvasGradient===!0&&(Z=Z.getColor()),!Z)return{r:0,g:0,b:0,a:0,style:Z};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Z))G=0,re=0,he=0,ce=0;else{var ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Z);if(ve!==null)G=parseInt(ve[1]),re=parseInt(ve[2]),he=parseInt(ve[3]),ce=1;else if((ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Z))!==null)G=parseInt(ve[1]),re=parseInt(ve[2]),he=parseInt(ve[3]),ce=parseFloat(ve[4]);else{if(ce=1,typeof Z=="string"&&Z.charAt(0)!=="#"){var ee=new YE(Z);Z=ee.ok?ee.toHex():"#000000"}Z.length===4?(G=Z.substring(1,2),G+=G,re=Z.substring(2,3),re+=re,he=Z.substring(3,4),he+=he):(G=Z.substring(1,3),re=Z.substring(3,5),he=Z.substring(5,7)),G=parseInt(G,16),re=parseInt(re,16),he=parseInt(he,16)}}return{r:G,g:re,b:he,a:ce,style:Z}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(Z,G,re,he){if(isNaN(G)||isNaN(re)||typeof Z!="string")throw Ss.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(he=isNaN(he)?void 0:he,!m.call(this)){var ce=oe(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:Z,x:G,y:re,scale:ve,angle:ce,align:this.textAlign,maxWidth:he})}},p.prototype.strokeText=function(Z,G,re,he){if(isNaN(G)||isNaN(re)||typeof Z!="string")throw Ss.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){he=isNaN(he)?void 0:he;var ce=oe(this.ctx.transform.rotation),ve=this.ctx.transform.scaleX;B.call(this,{text:Z,x:G,y:re,scale:ve,renderingMode:"stroke",angle:ce,align:this.textAlign,maxWidth:he})}},p.prototype.measureText=function(Z){if(typeof Z!="string")throw Ss.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,re=this.pdf.internal.scaleFactor,he=G.internal.getFontSize(),ce=G.getStringUnitWidth(Z)*he/G.internal.scaleFactor,ve=function(ee){var J=(ee=ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return J}}),this};return new ve({width:ce*=Math.round(96*re/72*1e4)/1e4})},p.prototype.scale=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ss.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var re=new l(Z,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(re)},p.prototype.rotate=function(Z){if(isNaN(Z))throw Ss.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(Z),Math.sin(Z),-Math.sin(Z),Math.cos(Z),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},p.prototype.translate=function(Z,G){if(isNaN(Z)||isNaN(G))throw Ss.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var re=new l(1,0,0,1,Z,G);this.ctx.transform=this.ctx.transform.multiply(re)},p.prototype.transform=function(Z,G,re,he,ce,ve){if(isNaN(Z)||isNaN(G)||isNaN(re)||isNaN(he)||isNaN(ce)||isNaN(ve))throw Ss.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ee=new l(Z,G,re,he,ce,ve);this.ctx.transform=this.ctx.transform.multiply(ee)},p.prototype.setTransform=function(Z,G,re,he,ce,ve){Z=isNaN(Z)?1:Z,G=isNaN(G)?0:G,re=isNaN(re)?0:re,he=isNaN(he)?1:he,ce=isNaN(ce)?0:ce,ve=isNaN(ve)?0:ve,this.ctx.transform=new l(Z,G,re,he,ce,ve)};var E=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(Z,G,re,he,ce,ve,ee,J,Oe){var Te=this.pdf.getImageProperties(Z),Ye=1,ge=1,Q=1,ie=1;he!==void 0&&J!==void 0&&(Q=J/he,ie=Oe/ce,Ye=Te.width/he*J/he,ge=Te.height/ce*Oe/ce),ve===void 0&&(ve=G,ee=re,G=0,re=0),he!==void 0&&J===void 0&&(J=he,Oe=ce),he===void 0&&J===void 0&&(J=Te.width,Oe=Te.height);for(var fe,Se=this.ctx.transform.decompose(),de=oe(Se.rotate.shx),Xe=new l,$e=(Xe=(Xe=(Xe=Xe.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale)).applyToRectangle(new a(ve-G*Q,ee-re*ie,he*Ye,ce*ge)),Je=A.call(this,$e),He=[],Ge=0;Ge<Je.length;Ge+=1)He.indexOf(Je[Ge])===-1&&He.push(Je[Ge]);if($(He),this.autoPaging)for(var xt=He[0],Et=He[He.length-1],Kt=xt;Kt<Et+1;Kt++){this.pdf.setPage(Kt);var sn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],an=Kt===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],at=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],it=Kt===1?0:Qe+(Kt-2)*at;if(this.ctx.clip_path.length!==0){var Bt=this.path;fe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(fe,this.posX+this.margin[3],-it+an+this.ctx.prevPageLastElemOffset),te.call(this,"fill",!0),this.path=Bt}var Qt=JSON.parse(JSON.stringify($e));Qt=D([Qt],this.posX+this.margin[3],-it+an+this.ctx.prevPageLastElemOffset)[0];var Tn=(Kt>xt||Kt<Et)&&E.call(this);Tn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],sn,at,null).clip().discardPath()),this.pdf.addImage(Z,"JPEG",Qt.x,Qt.y,Qt.w,Qt.h,null,null,de),Tn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Z,"JPEG",$e.x,$e.y,$e.w,$e.h,null,null,de)};var A=function(Z,G,re){var he=[];G=G||this.pdf.internal.pageSize.width,re=re||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ce=this.posY+this.ctx.prevPageLastElemOffset;switch(Z.type){default:case"mt":case"lt":he.push(Math.floor((Z.y+ce)/re)+1);break;case"arc":he.push(Math.floor((Z.y+ce-Z.radius)/re)+1),he.push(Math.floor((Z.y+ce+Z.radius)/re)+1);break;case"qct":var ve=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x,Z.y);he.push(Math.floor((ve.y+ce)/re)+1),he.push(Math.floor((ve.y+ve.h+ce)/re)+1);break;case"bct":var ee=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Z.x1,Z.y1,Z.x2,Z.y2,Z.x,Z.y);he.push(Math.floor((ee.y+ce)/re)+1),he.push(Math.floor((ee.y+ee.h+ce)/re)+1);break;case"rect":he.push(Math.floor((Z.y+ce)/re)+1),he.push(Math.floor((Z.y+Z.h+ce)/re)+1)}for(var J=0;J<he.length;J+=1)for(;this.pdf.internal.getNumberOfPages()<he[J];)k.call(this);return he},k=function(){var Z=this.fillStyle,G=this.strokeStyle,re=this.font,he=this.lineCap,ce=this.lineWidth,ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=Z,this.strokeStyle=G,this.font=re,this.lineCap=he,this.lineWidth=ce,this.lineJoin=ve},D=function(Z,G,re){for(var he=0;he<Z.length;he++)switch(Z[he].type){case"bct":Z[he].x2+=G,Z[he].y2+=re;case"qct":Z[he].x1+=G,Z[he].y1+=re;case"mt":case"lt":case"arc":default:Z[he].x+=G,Z[he].y+=re}return Z},$=function(Z){return Z.sort(function(G,re){return G-re})},Y=function(Z,G){for(var re,he,ce=this.fillStyle,ve=this.strokeStyle,ee=this.lineCap,J=this.lineWidth,Oe=Math.abs(J*this.ctx.transform.scaleX),Te=this.lineJoin,Ye=JSON.parse(JSON.stringify(this.path)),ge=JSON.parse(JSON.stringify(this.path)),Q=[],ie=0;ie<ge.length;ie++)if(ge[ie].x!==void 0)for(var fe=A.call(this,ge[ie]),Se=0;Se<fe.length;Se+=1)Q.indexOf(fe[Se])===-1&&Q.push(fe[Se]);for(var de=0;de<Q.length;de++)for(;this.pdf.internal.getNumberOfPages()<Q[de];)k.call(this);if($(Q),this.autoPaging)for(var Xe=Q[0],$e=Q[Q.length-1],Je=Xe;Je<$e+1;Je++){this.pdf.setPage(Je),this.fillStyle=ce,this.strokeStyle=ve,this.lineCap=ee,this.lineWidth=Oe,this.lineJoin=Te;var He=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ge=Je===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Kt=Je===1?0:xt+(Je-2)*Et;if(this.ctx.clip_path.length!==0){var sn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(re,this.posX+this.margin[3],-Kt+Ge+this.ctx.prevPageLastElemOffset),te.call(this,Z,!0),this.path=sn}if(he=JSON.parse(JSON.stringify(Ye)),this.path=D(he,this.posX+this.margin[3],-Kt+Ge+this.ctx.prevPageLastElemOffset),G===!1||Je===0){var an=(Je>Xe||Je<$e)&&E.call(this);an&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],He,Et,null).clip().discardPath()),te.call(this,Z,G),an&&this.pdf.restoreGraphicsState()}this.lineWidth=J}else this.lineWidth=Oe,te.call(this,Z,G),this.lineWidth=J;this.path=Ye},te=function(Z,G){if((Z!=="stroke"||G||!x.call(this))&&(Z==="stroke"||G||!m.call(this))){for(var re,he,ce=[],ve=this.path,ee=0;ee<ve.length;ee++){var J=ve[ee];switch(J.type){case"begin":ce.push({begin:!0});break;case"close":ce.push({close:!0});break;case"mt":ce.push({start:J,deltas:[],abs:[]});break;case"lt":var Oe=ce.length;if(ve[ee-1]&&!isNaN(ve[ee-1].x)&&(re=[J.x-ve[ee-1].x,J.y-ve[ee-1].y],Oe>0)){for(;Oe>=0;Oe--)if(ce[Oe-1].close!==!0&&ce[Oe-1].begin!==!0){ce[Oe-1].deltas.push(re),ce[Oe-1].abs.push(J);break}}break;case"bct":re=[J.x1-ve[ee-1].x,J.y1-ve[ee-1].y,J.x2-ve[ee-1].x,J.y2-ve[ee-1].y,J.x-ve[ee-1].x,J.y-ve[ee-1].y],ce[ce.length-1].deltas.push(re);break;case"qct":var Te=ve[ee-1].x+2/3*(J.x1-ve[ee-1].x),Ye=ve[ee-1].y+2/3*(J.y1-ve[ee-1].y),ge=J.x+2/3*(J.x1-J.x),Q=J.y+2/3*(J.y1-J.y),ie=J.x,fe=J.y;re=[Te-ve[ee-1].x,Ye-ve[ee-1].y,ge-ve[ee-1].x,Q-ve[ee-1].y,ie-ve[ee-1].x,fe-ve[ee-1].y],ce[ce.length-1].deltas.push(re);break;case"arc":ce.push({deltas:[],abs:[],arc:!0}),Array.isArray(ce[ce.length-1].abs)&&ce[ce.length-1].abs.push(J)}}he=G?null:Z==="stroke"?"stroke":"fill";for(var Se=!1,de=0;de<ce.length;de++)if(ce[de].arc)for(var Xe=ce[de].abs,$e=0;$e<Xe.length;$e++){var Je=Xe[$e];Je.type==="arc"?I.call(this,Je.x,Je.y,Je.radius,Je.startAngle,Je.endAngle,Je.counterclockwise,void 0,G,!Se):V.call(this,Je.x,Je.y),Se=!0}else if(ce[de].close===!0)this.pdf.internal.out("h"),Se=!1;else if(ce[de].begin!==!0){var He=ce[de].start.x,Ge=ce[de].start.y;R.call(this,ce[de].deltas,He,Ge),Se=!0}he&&z.call(this,he),G&&K.call(this)}},me=function(Z){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,re=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Z-re;case"top":return Z+G-re;case"hanging":return Z+G-2*re;case"middle":return Z+G/2-re;case"ideographic":return Z;case"alphabetic":default:return Z}},pe=function(Z){return Z+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var Z=function(){};return Z.colorStops=[],Z.addColorStop=function(G,re){this.colorStops.push([G,re])},Z.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Z.isCanvasGradient=!0,Z},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var I=function(Z,G,re,he,ce,ve,ee,J,Oe){for(var Te=W.call(this,re,he,ce,ve),Ye=0;Ye<Te.length;Ye++){var ge=Te[Ye];Ye===0&&(Oe?N.call(this,ge.x1+Z,ge.y1+G):V.call(this,ge.x1+Z,ge.y1+G)),j.call(this,Z,G,ge.x2,ge.y2,ge.x3,ge.y3,ge.x4,ge.y4)}J?K.call(this):z.call(this,ee)},z=function(Z){switch(Z){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(Z,G){this.pdf.internal.out(n(Z)+" "+r(G)+" m")},B=function(Z){var G;switch(Z.align){case"right":case"end":G="right";break;case"center":G="center";break;case"left":case"start":default:G="left"}var re=this.pdf.getTextDimensions(Z.text),he=me.call(this,Z.y),ce=pe.call(this,he)-re.h,ve=this.ctx.transform.applyToPoint(new o(Z.x,he)),ee=this.ctx.transform.decompose(),J=new l;J=(J=(J=J.multiply(ee.translate)).multiply(ee.skew)).multiply(ee.scale);for(var Oe,Te,Ye,ge=this.ctx.transform.applyToRectangle(new a(Z.x,he,re.w,re.h)),Q=J.applyToRectangle(new a(Z.x,ce,re.w,re.h)),ie=A.call(this,Q),fe=[],Se=0;Se<ie.length;Se+=1)fe.indexOf(ie[Se])===-1&&fe.push(ie[Se]);if($(fe),this.autoPaging)for(var de=fe[0],Xe=fe[fe.length-1],$e=de;$e<Xe+1;$e++){this.pdf.setPage($e);var Je=$e===1?this.posY+this.margin[0]:this.margin[0],He=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[2],xt=Ge-this.margin[0],Et=this.pdf.internal.pageSize.width-this.margin[1],Kt=Et-this.margin[3],sn=$e===1?0:He+($e-2)*xt;if(this.ctx.clip_path.length!==0){var an=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=D(Oe,this.posX+this.margin[3],-1*sn+Je),te.call(this,"fill",!0),this.path=an}var Qe=D([JSON.parse(JSON.stringify(Q))],this.posX+this.margin[3],-sn+Je+this.ctx.prevPageLastElemOffset)[0];Z.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*Z.scale),Ye=this.lineWidth,this.lineWidth=Ye*Z.scale);var at=this.autoPaging!=="text";if(at||Qe.y+Qe.h<=Ge){if(at||Qe.y>=Je&&Qe.x<=Et){var it=at?Z.text:this.pdf.splitTextToSize(Z.text,Z.maxWidth||Et-Qe.x)[0],Bt=D([JSON.parse(JSON.stringify(ge))],this.posX+this.margin[3],-sn+Je+this.ctx.prevPageLastElemOffset)[0],Qt=at&&($e>de||$e<Xe)&&E.call(this);Qt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Kt,xt,null).clip().discardPath()),this.pdf.text(it,Bt.x,Bt.y,{angle:Z.angle,align:G,renderingMode:Z.renderingMode}),Qt&&this.pdf.restoreGraphicsState()}}else Qe.y<Ge&&(this.ctx.prevPageLastElemOffset+=Ge-Qe.y);Z.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Ye)}else Z.scale>=.01&&(Te=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Te*Z.scale),Ye=this.lineWidth,this.lineWidth=Ye*Z.scale),this.pdf.text(Z.text,ve.x+this.posX,ve.y+this.posY,{angle:Z.angle,align:G,renderingMode:Z.renderingMode,maxWidth:Z.maxWidth}),Z.scale>=.01&&(this.pdf.setFontSize(Te),this.lineWidth=Ye)},V=function(Z,G,re,he){re=re||0,he=he||0,this.pdf.internal.out(n(Z+re)+" "+r(G+he)+" l")},R=function(Z,G,re){return this.pdf.lines(Z,G,re,null,null)},j=function(Z,G,re,he,ce,ve,ee,J){this.pdf.internal.out([e(i(re+Z)),e(s(he+G)),e(i(ce+Z)),e(s(ve+G)),e(i(ee+Z)),e(s(J+G)),"c"].join(" "))},W=function(Z,G,re,he){for(var ce=2*Math.PI,ve=Math.PI/2;G>re;)G-=ce;var ee=Math.abs(re-G);ee<ce&&he&&(ee=ce-ee);for(var J=[],Oe=he?-1:1,Te=G;ee>1e-5;){var Ye=Te+Oe*Math.min(ee,ve);J.push(X.call(this,Z,Te,Ye)),ee-=Math.abs(Ye-Te),Te=Ye}return J},X=function(Z,G,re){var he=(re-G)/2,ce=Z*Math.cos(he),ve=Z*Math.sin(he),ee=ce,J=-ve,Oe=ee*ee+J*J,Te=Oe+ee*ce+J*ve,Ye=4/3*(Math.sqrt(2*Oe*Te)-Te)/(ee*ve-J*ce),ge=ee-Ye*J,Q=J+Ye*ee,ie=ge,fe=-Q,Se=he+G,de=Math.cos(Se),Xe=Math.sin(Se);return{x1:Z*Math.cos(G),y1:Z*Math.sin(G),x2:ge*de-Q*Xe,y2:ge*Xe+Q*de,x3:ie*de-fe*Xe,y3:ie*Xe+fe*de,x4:Z*Math.cos(re),y4:Z*Math.sin(re)}},oe=function(Z){return 180*Z/Math.PI},_e=function(Z,G,re,he,ce,ve){var ee=Z+.5*(re-Z),J=G+.5*(he-G),Oe=ce+.5*(re-ce),Te=ve+.5*(he-ve),Ye=Math.min(Z,ce,ee,Oe),ge=Math.max(Z,ce,ee,Oe),Q=Math.min(G,ve,J,Te),ie=Math.max(G,ve,J,Te);return new a(Ye,Q,ge-Ye,ie-Q)},Ce=function(Z,G,re,he,ce,ve,ee,J){var Oe,Te,Ye,ge,Q,ie,fe,Se,de,Xe,$e,Je,He,Ge,xt=re-Z,Et=he-G,Kt=ce-re,sn=ve-he,an=ee-ce,Qe=J-ve;for(Te=0;Te<41;Te++)de=(fe=(Ye=Z+(Oe=Te/40)*xt)+Oe*((Q=re+Oe*Kt)-Ye))+Oe*(Q+Oe*(ce+Oe*an-Q)-fe),Xe=(Se=(ge=G+Oe*Et)+Oe*((ie=he+Oe*sn)-ge))+Oe*(ie+Oe*(ve+Oe*Qe-ie)-Se),Te==0?($e=de,Je=Xe,He=de,Ge=Xe):($e=Math.min($e,de),Je=Math.min(Je,Xe),He=Math.max(He,de),Ge=Math.max(Ge,Xe));return new a(Math.round($e),Math.round(Je),Math.round(He-$e),Math.round(Ge-Je))},De=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Z,G,re=(Z=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:Z,lineDashOffset:G}));this.prevLineDash!==re&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=re)}}})(Mr.API),function(t){var e=function(s){var o,a,l,c,d,p,v,m,x,E;for(a=[],l=0,c=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;c>l;l+=4)(d=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(p=(d=((d=((d=((d=(d-(E=d%85))/85)-(x=d%85))/85)-(m=d%85))/85)-(v=d%85))/85)%85,a.push(p+33,v+33,m+33,x+33,E+33)):a.push(122);return function(A,k){for(var D=k;D>0;D--)A.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,c,d,p=String,v="length",m=255,x="charCodeAt",E="slice",A="replace";for(s[E](-2),s=s[E](0,-2)[A](/\s/g,"")[A]("z","!!!!!"),l=[],c=0,d=(s+=o="uuuuu"[E](s[v]%5||5))[v];d>c;c+=5)a=52200625*(s[x](c)-33)+614125*(s[x](c+1)-33)+7225*(s[x](c+2)-33)+85*(s[x](c+3)-33)+(s[x](c+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(k,D){for(var $=D;$>0;$--)k.pop()}(l,o[v]),p.fromCharCode.apply(p,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=kb(o)).reduce(function(l,c){return l+String.fromCharCode(c)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",c=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),c.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),c.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),c.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">",c.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),c.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:c.reverse().join(" ")}}}(Mr.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,c,d){var p=new XMLHttpRequest,v=0,m=function(x){var E=x.length,A=[],k=String.fromCharCode;for(v=0;v<E;v+=1)A.push(k(255&x.charCodeAt(v)));return A.join("")};if(p.open("GET",l,!c),p.overrideMimeType("text/plain; charset=x-user-defined"),c===!1&&(p.onload=function(){p.status===200?d(m(this.responseText)):d(void 0)}),p.send(null),c&&p.status===200)return m(p.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(Mr.API),function(t){function e(){return(Or.html2canvas?Promise.resolve(Or.html2canvas):Mh(()=>import("./html2canvas.esm.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Or.DOMPurify?Promise.resolve(Or.DOMPurify):Mh(()=>import("./purify.es.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=fs(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var c in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[c]=a.style[c];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),c=o.convert(Promise.resolve(),l);return c=(c=c.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(c,d){for(var p=c.nodeType===3?document.createTextNode(c.nodeValue):c.cloneNode(!1),v=c.firstChild;v;v=v.nextSibling)d!==!0&&v.nodeType===1&&v.nodeName==="SCRIPT"||p.appendChild(l(v,d));return c.nodeType===1&&(c.nodeName==="CANVAS"?(p.width=c.width,p.height=c.height,p.getContext("2d").drawImage(c,0,0)):c.nodeName!=="TEXTAREA"&&c.nodeName!=="SELECT"||(p.value=c.value),p.addEventListener("load",function(){p.scrollTop=c.scrollTop,p.scrollLeft=c.scrollLeft},!0)),p}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,c=this.opt.fontFaces,d=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,p=Object.assign({async:!0,allowTaint:!0,scale:d,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete p.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=c,c)for(var v=0;v<c.length;++v){var m=c[v],x=m.src.find(function(E){return E.format==="truetype"});x&&l.addFont(x.url,m.ref.name,m.ref.style)}return p.windowHeight=p.windowHeight||0,p.windowHeight=p.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):p.windowHeight,l.context2d.save(!0),a(this.prop.container,p)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,c){return Math.floor(l*c/72*96)}return this.then(function(){(o=o||Mr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,c){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),c!=null&&(this.progress.stack=c),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,c){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,c?this.progress.stack.concat(c):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(c,d){return l.updateProgress(null,null,1,[c]),Promise.prototype.then.call(this,function(p){return l.updateProgress(null,c),p}).then(c,d).then(function(p){return l.updateProgress(1),p})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var c=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),d=l.call(c,o,a);return s.convert(d,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Mr.getPageSize=function(o,a,l){if(fs(o)==="object"){var c=o;o=c.orientation,a=c.unit||a,l=c.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var d,p=(""+l).toLowerCase(),v={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":d=1;break;case"mm":d=72/25.4;break;case"cm":d=72/2.54;break;case"in":d=72;break;case"px":d=.75;break;case"pc":case"em":d=12;break;case"ex":d=6;break;default:throw"Invalid unit: "+a}var m,x=0,E=0;if(v.hasOwnProperty(p))x=v[p][1]/d,E=v[p][0]/d;else try{x=l[1],E=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",E>x&&(m=E,E=x,x=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",x>E&&(m=E,E=x,x=m)}return{width:E,height:x,unit:a,k:d,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Ib):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(Mr.API),Mr.API.addJS=function(t){return T5=t,this.internal.events.subscribe("postPutResources",function(){C0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(C0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),A5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+T5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){C0!==void 0&&A5!==void 0&&this.internal.out("/Names <</JavaScript "+C0+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var c=this.internal.pages.length,d=[];for(s=0;s<c;s++){var p=n.internal.newObject();d.push(p);var v=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<d.length;s++)n.internal.write("(page_"+(s+1)+")"+d[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+m+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var c=0;c<r.children.length;c++)this.renderItems(r.children[c])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Mr.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,c=this.decode.DCT_DECODE,d=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),x=p.length,E={width:0,height:0,numcomponents:1},A=4;A<x;A+=2){if(A+=m,e.indexOf(p.charCodeAt(A+1))!==-1){v=256*p.charCodeAt(A+5)+p.charCodeAt(A+6),E={width:256*p.charCodeAt(A+7)+p.charCodeAt(A+8),height:v,numcomponents:p.charCodeAt(A+9)};break}m=256*p.charCodeAt(A+2)+p.charCodeAt(A+3)}return E}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}d={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:c,index:r,alias:i}}return d}}(Mr.API);var Zf,E0,D5,O5,N5,VH=function(){var t,e,n;function r(s){var o,a,l,c,d,p,v,m,x,E,A,k,D,$;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},p=null;;){switch(o=this.readUInt32(),x=(function(){var Y,te;for(te=[],Y=0;Y<4;++Y)te.push(String.fromCharCode(this.data[this.pos++]));return te}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":p&&this.animation.frames.push(p),this.pos+=4,p={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},d=this.readUInt16(),c=this.readUInt16()||100,p.delay=1e3*d/c,p.disposeOp=this.data[this.pos++],p.blendOp=this.data[this.pos++],p.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,o-=4),s=(p!=null?p.data:void 0)||this.imgData,k=0;0<=o?k<o:k>o;0<=o?++k:--k)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((E=l-this.transparency.indexed.length)>0)for(D=0;0<=E?D<E:D>E;0<=E?++D:--D)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":v=(A=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,A.slice(0,v)),this.text[m]=String.fromCharCode.apply(String,A.slice(v+1));break;case"IEND":return p&&this.animation.frames.push(p),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=($=this.colorType)===4||$===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,c=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function d(p,v,m,x){var E,A,k,D,$,Y,te,me,pe,I,z,K,N,B,V,R,j,W,X,oe,_e,Ce=Math.ceil((c.width-p)/m),De=Math.ceil((c.height-v)/x),Z=c.width==Ce&&c.height==De;for(B=o*Ce,K=Z?a:new Uint8Array(B*De),Y=s.length,N=0,A=0;N<De&&l<Y;){switch(s[l++]){case 0:for(D=j=0;j<B;D=j+=1)K[A++]=s[l++];break;case 1:for(D=W=0;W<B;D=W+=1)E=s[l++],$=D<o?0:K[A-o],K[A++]=(E+$)%256;break;case 2:for(D=X=0;X<B;D=X+=1)E=s[l++],k=(D-D%o)/o,V=N&&K[(N-1)*B+k*o+D%o],K[A++]=(V+E)%256;break;case 3:for(D=oe=0;oe<B;D=oe+=1)E=s[l++],k=(D-D%o)/o,$=D<o?0:K[A-o],V=N&&K[(N-1)*B+k*o+D%o],K[A++]=(E+Math.floor(($+V)/2))%256;break;case 4:for(D=_e=0;_e<B;D=_e+=1)E=s[l++],k=(D-D%o)/o,$=D<o?0:K[A-o],N===0?V=R=0:(V=K[(N-1)*B+k*o+D%o],R=k&&K[(N-1)*B+(k-1)*o+D%o]),te=$+V-R,me=Math.abs(te-$),I=Math.abs(te-V),z=Math.abs(te-R),pe=me<=I&&me<=z?$:I<=z?V:R,K[A++]=(E+pe)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!Z){var G=((v+N*x)*c.width+p)*o,re=N*B;for(D=0;D<Ce;D+=1){for(var he=0;he<o;he+=1)a[G++]=K[re++];G+=(m-1)*o}}N++}}return s=_H(s),c.interlaceMethod==1?(d(0,0,8,8),d(4,0,8,8),d(0,4,4,8),d(2,0,4,4),d(0,2,2,4),d(1,0,2,2),d(0,1,1,2)):d(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,c,d,p,v,m;for(a=this.palette,d=this.transparency.indexed||[],c=new Uint8Array((d.length||0)+a.length),l=0,s=0,o=p=0,v=a.length;p<v;o=p+=3)c[l++]=a[o],c[l++]=a[o+1],c[l++]=a[o+2],c[l++]=(m=d[s++])!=null?m:255;return c},r.prototype.copyToImageData=function(s,o){var a,l,c,d,p,v,m,x,E,A,k;if(l=this.colors,E=null,a=this.hasAlphaChannel,this.palette.length&&(E=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),l=4,a=!0),x=(c=s.data||s).length,p=E||o,d=v=0,l===1)for(;d<x;)m=E?4*o[d/4]:v,A=p[m++],c[d++]=A,c[d++]=A,c[d++]=A,c[d++]=a?p[m++]:255,v=m;else for(;d<x;)m=E?4*o[d/4]:v,c[d++]=p[m++],c[d++]=p[m++],c[d++]=p[m++],c[d++]=a?p[m++]:255,v=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Or)==="[object Window]"){try{e=Or.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,c,d,p,v,m;if(this.animation){for(m=[],a=d=0,p=(v=this.animation.frames).length;d<p;a=++d)o=v[a],l=s.createImageData(o.width,o.height),c=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,c),o.imageData=l,m.push(o.image=t(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,c;return a=(l=this.animation.frames)[o],c=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(c!=null?c.disposeOp:void 0)===1?s.clearRect(c.xOffset,c.yOffset,c.width,c.height):(c!=null?c.disposeOp:void 0)===2&&s.putImageData(c.imageData,c.xOffset,c.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,c,d,p,v=this;return a=0,p=this.animation,c=p.numFrames,l=p.frames,d=p.numPlays,(o=function(){var m,x;if(m=a++%c,x=l[m],v.renderFrame(s,m),c>1&&a/c<d)return v.animation._timeout=setTimeout(o,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function UH(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,d=[],p=0,v=null,m=0,x=null;for(this.width=n,this.height=r;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,x=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var E=t[e++];p=t[e++]|t[e++]<<8,v=t[e++],!(1&E)&&(v=null),m=E>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var A=t[e++]|t[e++]<<8,k=t[e++]|t[e++]<<8,D=t[e++]|t[e++]<<8,$=t[e++]|t[e++]<<8,Y=t[e++],te=Y>>6&1,me=1<<(7&Y)+1,pe=a,I=l,z=!1;Y>>7&&(z=!0,pe=e,I=me,e+=3*me);var K=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}d.push({x:A,y:k,width:D,height:$,has_local_palette:z,palette_offset:pe,palette_size:I,data_offset:K,data_length:e-K,transparent_index:v,interlaced:!!te,delay:p,disposal:m});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return d.length},this.loopCount=function(){return x},this.frameInfo=function(B){if(B<0||B>=d.length)throw new Error("Frame index out of range.");return d[B]},this.decodeAndBlitFrameBGRA=function(B,V){var R=this.frameInfo(B),j=R.width*R.height,W=new Uint8Array(j);I5(t,R.data_offset,W,j);var X=R.palette_offset,oe=R.transparent_index;oe===null&&(oe=256);var _e=R.width,Ce=n-_e,De=_e,Z=4*(R.y*n+R.x),G=4*((R.y+R.height)*n+R.x),re=Z,he=4*Ce;R.interlaced===!0&&(he+=4*n*7);for(var ce=8,ve=0,ee=W.length;ve<ee;++ve){var J=W[ve];if(De===0&&(De=_e,(re+=he)>=G&&(he=4*Ce+4*n*(ce-1),re=Z+(_e+Ce)*(ce<<1),ce>>=1)),J===oe)re+=4;else{var Oe=t[X+3*J],Te=t[X+3*J+1],Ye=t[X+3*J+2];V[re++]=Ye,V[re++]=Te,V[re++]=Oe,V[re++]=255}--De}},this.decodeAndBlitFrameRGBA=function(B,V){var R=this.frameInfo(B),j=R.width*R.height,W=new Uint8Array(j);I5(t,R.data_offset,W,j);var X=R.palette_offset,oe=R.transparent_index;oe===null&&(oe=256);var _e=R.width,Ce=n-_e,De=_e,Z=4*(R.y*n+R.x),G=4*((R.y+R.height)*n+R.x),re=Z,he=4*Ce;R.interlaced===!0&&(he+=4*n*7);for(var ce=8,ve=0,ee=W.length;ve<ee;++ve){var J=W[ve];if(De===0&&(De=_e,(re+=he)>=G&&(he=4*Ce+4*n*(ce-1),re=Z+(_e+Ce)*(ce<<1),ce>>=1)),J===oe)re+=4;else{var Oe=t[X+3*J],Te=t[X+3*J+1],Ye=t[X+3*J+2];V[re++]=Oe,V[re++]=Te,V[re++]=Ye,V[re++]=255}--De}}}function I5(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,c=(1<<l)-1,d=0,p=0,v=0,m=t[e++],x=new Int32Array(4096),E=null;;){for(;d<16&&m!==0;)p|=t[e++]<<d,d+=8,m===1?m=t[e++]:--m;if(d<l)break;var A=p&c;if(p>>=l,d-=l,A!==s){if(A===o)break;for(var k=A<a?A:E,D=0,$=k;$>s;)$=x[$]>>8,++D;var Y=$;if(v+D+(k!==A?1:0)>r)return void Ss.log("Warning, gif stream longer than expected.");n[v++]=Y;var te=v+=D;for(k!==A&&(n[v++]=Y),$=k;D--;)$=x[$],n[--te]=255&$,$>>=8;E!==null&&a<4096&&(x[a++]=E<<8|Y,a>=c+1&&l<12&&(++l,c=c<<1|1)),E=A}else a=o+1,c=(1<<(l=i+1))-1,E=null}return v!==r&&Ss.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function u2(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),d=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),x=new Array(64),E=[],A=0,k=7,D=new Array(64),$=new Array(64),Y=new Array(64),te=new Array(256),me=new Array(2048),pe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],I=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],j=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function W(Z,G){for(var re=0,he=0,ce=new Array,ve=1;ve<=16;ve++){for(var ee=1;ee<=Z[ve];ee++)ce[G[he]]=[],ce[G[he]][0]=re,ce[G[he]][1]=ve,he++,re++;re*=2}return ce}function X(Z){for(var G=Z[0],re=Z[1]-1;re>=0;)G&1<<re&&(A|=1<<k),re--,--k<0&&(A==255?(oe(255),oe(0)):oe(A),k=7,A=0)}function oe(Z){E.push(Z)}function _e(Z){oe(Z>>8&255),oe(255&Z)}function Ce(Z,G,re,he,ce){for(var ve,ee=ce[0],J=ce[240],Oe=function(Xe,$e){var Je,He,Ge,xt,Et,Kt,sn,an,Qe,at,it=0;for(Qe=0;Qe<8;++Qe){Je=Xe[it],He=Xe[it+1],Ge=Xe[it+2],xt=Xe[it+3],Et=Xe[it+4],Kt=Xe[it+5],sn=Xe[it+6];var Bt=Je+(an=Xe[it+7]),Qt=Je-an,Tn=He+sn,xn=He-sn,An=Ge+Kt,Kn=Ge-Kt,en=xt+Et,Ln=xt-Et,Mn=Bt+en,Hn=Bt-en,hr=Tn+An,vr=Tn-An;Xe[it]=Mn+hr,Xe[it+4]=Mn-hr;var ir=.707106781*(vr+Hn);Xe[it+2]=Hn+ir,Xe[it+6]=Hn-ir;var Vr=.382683433*((Mn=Ln+Kn)-(vr=xn+Qt)),Vs=.5411961*Mn+Vr,ft=1.306562965*vr+Vr,rt=.707106781*(hr=Kn+xn),$t=Qt+rt,Jt=Qt-rt;Xe[it+5]=Jt+Vs,Xe[it+3]=Jt-Vs,Xe[it+1]=$t+ft,Xe[it+7]=$t-ft,it+=8}for(it=0,Qe=0;Qe<8;++Qe){Je=Xe[it],He=Xe[it+8],Ge=Xe[it+16],xt=Xe[it+24],Et=Xe[it+32],Kt=Xe[it+40],sn=Xe[it+48];var Gn=Je+(an=Xe[it+56]),Sn=Je-an,Ut=He+sn,cn=He-sn,lt=Ge+Kt,qt=Ge-Kt,Dn=xt+Et,Ar=xt-Et,Tt=Gn+Dn,zn=Gn-Dn,sr=Ut+lt,mi=Ut-lt;Xe[it]=Tt+sr,Xe[it+32]=Tt-sr;var Nr=.707106781*(mi+zn);Xe[it+16]=zn+Nr,Xe[it+48]=zn-Nr;var Rr=.382683433*((Tt=Ar+qt)-(mi=cn+Sn)),yr=.5411961*Tt+Rr,ji=1.306562965*mi+Rr,_r=.707106781*(sr=qt+cn),Fr=Sn+_r,Cr=Sn-_r;Xe[it+40]=Cr+yr,Xe[it+24]=Cr-yr,Xe[it+8]=Fr+ji,Xe[it+56]=Fr-ji,it++}for(Qe=0;Qe<64;++Qe)at=Xe[Qe]*$e[Qe],m[Qe]=at>0?at+.5|0:at-.5|0;return m}(Z,G),Te=0;Te<64;++Te)x[pe[Te]]=Oe[Te];var Ye=x[0]-re;re=x[0],Ye==0?X(he[0]):(X(he[v[ve=32767+Ye]]),X(p[ve]));for(var ge=63;ge>0&&x[ge]==0;)ge--;if(ge==0)return X(ee),re;for(var Q,ie=1;ie<=ge;){for(var fe=ie;x[ie]==0&&ie<=ge;)++ie;var Se=ie-fe;if(Se>=16){Q=Se>>4;for(var de=1;de<=Q;++de)X(J);Se&=15}ve=32767+x[ie],X(ce[(Se<<4)+v[ve]]),X(p[ve]),ie++}return ge!=63&&X(ee),re}function De(Z){Z=Math.min(Math.max(Z,1),100),s!=Z&&(function(G){for(var re=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],he=0;he<64;he++){var ce=o((re[he]*G+50)/100);ce=Math.min(Math.max(ce,1),255),a[pe[he]]=ce}for(var ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ee=0;ee<64;ee++){var J=o((ve[ee]*G+50)/100);J=Math.min(Math.max(J,1),255),l[pe[ee]]=J}for(var Oe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Te=0,Ye=0;Ye<8;Ye++)for(var ge=0;ge<8;ge++)c[Te]=1/(a[pe[Te]]*Oe[Ye]*Oe[ge]*8),d[Te]=1/(l[pe[Te]]*Oe[Ye]*Oe[ge]*8),Te++}(Z<50?Math.floor(5e3/Z):Math.floor(200-2*Z)),s=Z)}this.encode=function(Z,G){G&&De(G),E=new Array,A=0,k=7,_e(65496),_e(65504),_e(16),oe(74),oe(70),oe(73),oe(70),oe(0),oe(1),oe(1),oe(0),_e(1),_e(1),oe(0),oe(0),function(){_e(65499),_e(132),oe(0);for(var He=0;He<64;He++)oe(a[He]);oe(1);for(var Ge=0;Ge<64;Ge++)oe(l[Ge])}(),function(He,Ge){_e(65472),_e(17),oe(8),_e(Ge),_e(He),oe(3),oe(1),oe(17),oe(0),oe(2),oe(17),oe(1),oe(3),oe(17),oe(1)}(Z.width,Z.height),function(){_e(65476),_e(418),oe(0);for(var He=0;He<16;He++)oe(I[He+1]);for(var Ge=0;Ge<=11;Ge++)oe(z[Ge]);oe(16);for(var xt=0;xt<16;xt++)oe(K[xt+1]);for(var Et=0;Et<=161;Et++)oe(N[Et]);oe(1);for(var Kt=0;Kt<16;Kt++)oe(B[Kt+1]);for(var sn=0;sn<=11;sn++)oe(V[sn]);oe(17);for(var an=0;an<16;an++)oe(R[an+1]);for(var Qe=0;Qe<=161;Qe++)oe(j[Qe])}(),_e(65498),_e(12),oe(3),oe(1),oe(0),oe(2),oe(17),oe(3),oe(17),oe(0),oe(63),oe(0);var re=0,he=0,ce=0;A=0,k=7,this.encode.displayName="_encode_";for(var ve,ee,J,Oe,Te,Ye,ge,Q,ie,fe=Z.data,Se=Z.width,de=Z.height,Xe=4*Se,$e=0;$e<de;){for(ve=0;ve<Xe;){for(Te=Xe*$e+ve,ge=-1,Q=0,ie=0;ie<64;ie++)Ye=Te+(Q=ie>>3)*Xe+(ge=4*(7&ie)),$e+Q>=de&&(Ye-=Xe*($e+1+Q-de)),ve+ge>=Xe&&(Ye-=ve+ge-Xe+4),ee=fe[Ye++],J=fe[Ye++],Oe=fe[Ye++],D[ie]=(me[ee]+me[J+256>>0]+me[Oe+512>>0]>>16)-128,$[ie]=(me[ee+768>>0]+me[J+1024>>0]+me[Oe+1280>>0]>>16)-128,Y[ie]=(me[ee+1280>>0]+me[J+1536>>0]+me[Oe+1792>>0]>>16)-128;re=Ce(D,c,re,e,r),he=Ce($,d,he,n,i),ce=Ce(Y,d,ce,n,i),ve+=32}$e+=8}if(k>=0){var Je=[];Je[1]=k+1,Je[0]=(1<<k+1)-1,X(Je)}return _e(65497),new Uint8Array(E)},t=t||50,function(){for(var Z=String.fromCharCode,G=0;G<256;G++)te[G]=Z(G)}(),e=W(I,z),n=W(B,V),r=W(K,N),i=W(R,j),function(){for(var Z=1,G=2,re=1;re<=15;re++){for(var he=Z;he<G;he++)v[32767+he]=re,p[32767+he]=[],p[32767+he][1]=re,p[32767+he][0]=he;for(var ce=-(G-1);ce<=-Z;ce++)v[32767+ce]=re,p[32767+ce]=[],p[32767+ce][1]=re,p[32767+ce][0]=G-1+ce;Z<<=1,G<<=1}}(),function(){for(var Z=0;Z<256;Z++)me[Z]=19595*Z,me[Z+256>>0]=38470*Z,me[Z+512>>0]=7471*Z+32768,me[Z+768>>0]=-11059*Z,me[Z+1024>>0]=-21709*Z,me[Z+1280>>0]=32768*Z+8421375,me[Z+1536>>0]=-27439*Z,me[Z+1792>>0]=-5329*Z}(),De(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hc(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function B5(t){function e(I){if(!I)throw Error("assert :P")}function n(I,z,K){for(var N=0;4>N;N++)if(I[z+N]!=K.charCodeAt(N))return!0;return!1}function r(I,z,K,N,B){for(var V=0;V<B;V++)I[z+V]=K[N+V]}function i(I,z,K,N){for(var B=0;B<N;B++)I[z+B]=K}function s(I){return new Int32Array(I)}function o(I,z){for(var K=[],N=0;N<I;N++)K.push(new z);return K}function a(I,z){var K=[];return function N(B,V,R){for(var j=R[V],W=0;W<j&&(B.push(R.length>V+1?[]:new z),!(R.length<V+1));W++)N(B[W],V+1,R)}(K,0,I),K}var l=function(){var I=this;function z(w,T){for(var q=1<<T-1>>>0;w&q;)q>>>=1;return q?(w&q-1)+q:w}function K(w,T,q,ue,xe){e(!(ue%q));do w[T+(ue-=q)]=xe;while(0<ue)}function N(w,T,q,ue,xe){if(e(2328>=xe),512>=xe)var Me=s(512);else if((Me=s(xe))==null)return 0;return function(Ae,Ne,Re,Ke,gt,Ft){var jt,Ct,Zt=Ne,Gt=1<<Re,mt=s(16),_t=s(16);for(e(gt!=0),e(Ke!=null),e(Ae!=null),e(0<Re),Ct=0;Ct<gt;++Ct){if(15<Ke[Ct])return 0;++mt[Ke[Ct]]}if(mt[0]==gt)return 0;for(_t[1]=0,jt=1;15>jt;++jt){if(mt[jt]>1<<jt)return 0;_t[jt+1]=_t[jt]+mt[jt]}for(Ct=0;Ct<gt;++Ct)jt=Ke[Ct],0<Ke[Ct]&&(Ft[_t[jt]++]=Ct);if(_t[15]==1)return(Ke=new B).g=0,Ke.value=Ft[0],K(Ae,Zt,1,Gt,Ke),Gt;var on,yn=-1,ln=Gt-1,In=0,On=1,tr=1,h=1<<Re;for(Ct=0,jt=1,gt=2;jt<=Re;++jt,gt<<=1){if(On+=tr<<=1,0>(tr-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt])(Ke=new B).g=jt,Ke.value=Ft[Ct++],K(Ae,Zt+In,gt,h,Ke),In=z(In,jt)}for(jt=Re+1,gt=2;15>=jt;++jt,gt<<=1){if(On+=tr<<=1,0>(tr-=mt[jt]))return 0;for(;0<mt[jt];--mt[jt]){if(Ke=new B,(In&ln)!=yn){for(Zt+=h,on=1<<(yn=jt)-Re;15>yn&&!(0>=(on-=mt[yn]));)++yn,on<<=1;Gt+=h=1<<(on=yn-Re),Ae[Ne+(yn=In&ln)].g=on+Re,Ae[Ne+yn].value=Zt-Ne-yn}Ke.g=jt-Re,Ke.value=Ft[Ct++],K(Ae,Zt+(In>>Re),gt,h,Ke),In=z(In,jt)}}return On!=2*_t[15]-1?0:Gt}(w,T,q,ue,xe,Me)}function B(){this.value=this.g=0}function V(){this.value=this.g=0}function R(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ms,V)}function j(w,T,q,ue){e(w!=null),e(T!=null),e(2147483648>ue),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=T,w.pa=q,w.Jd=T,w.Yc=q+ue,w.Zc=4<=ue?q+ue-4+1:q,ve(w)}function W(w,T){for(var q=0;0<T--;)q|=J(w,128)<<T;return q}function X(w,T){var q=W(w,T);return ee(w)?-q:q}function oe(w,T,q,ue){var xe,Me=0;for(e(w!=null),e(T!=null),e(4294967288>ue),w.Sb=ue,w.Ra=0,w.u=0,w.h=0,4<ue&&(ue=4),xe=0;xe<ue;++xe)Me+=T[q+xe]<<8*xe;w.Ra=Me,w.bb=ue,w.oa=T,w.pa=q}function _e(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<Do-8>>>0,++w.bb,w.u-=8;re(w)&&(w.h=1,w.u=0)}function Ce(w,T){if(e(0<=T),!w.h&&T<=Zo){var q=G(w)&ka[T];return w.u+=T,_e(w),q}return w.h=1,w.u=0}function De(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Z(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function G(w){return w.Ra>>>(w.u&Do-1)>>>0}function re(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>Do}function he(w,T){w.u=T,w.h=re(w)}function ce(w){w.u>=jl&&(e(w.u>=jl),_e(w))}function ve(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function ee(w){return W(w,1)}function J(w,T){var q=w.Ca;0>w.b&&ve(w);var ue=w.b,xe=q*T>>>8,Me=(w.I>>>ue>xe)+0;for(Me?(q-=xe,w.I-=xe+1<<ue>>>0):q=xe+1,ue=q,xe=0;256<=ue;)xe+=8,ue>>=8;return ue=7^xe+to[ue],w.b-=ue,w.Ca=(q<<ue)-1,Me}function Oe(w,T,q){w[T+0]=q>>24&255,w[T+1]=q>>16&255,w[T+2]=q>>8&255,w[T+3]=q>>0&255}function Te(w,T){return w[T+0]<<0|w[T+1]<<8}function Ye(w,T){return Te(w,T)|w[T+2]<<16}function ge(w,T){return Te(w,T)|Te(w,T+2)<<16}function Q(w,T){var q=1<<T;return e(w!=null),e(0<T),w.X=s(q),w.X==null?0:(w.Mb=32-T,w.Xa=T,1)}function ie(w,T){e(w!=null),e(T!=null),e(w.Xa==T.Xa),r(T.X,0,w.X,0,1<<T.Xa)}function fe(){this.X=[],this.Xa=this.Mb=0}function Se(w,T,q,ue){e(q!=null),e(ue!=null);var xe=q[0],Me=ue[0];return xe==0&&(xe=(w*Me+T/2)/T),Me==0&&(Me=(T*xe+w/2)/w),0>=xe||0>=Me?0:(q[0]=xe,ue[0]=Me,1)}function de(w,T){return w+(1<<T)-1>>>T}function Xe(w,T){return((4278255360&w)+(4278255360&T)>>>0&4278255360)+((16711935&w)+(16711935&T)>>>0&16711935)>>>0}function $e(w,T){I[T]=function(q,ue,xe,Me,Ae,Ne,Re){var Ke;for(Ke=0;Ke<Ae;++Ke){var gt=I[w](Ne[Re+Ke-1],xe,Me+Ke);Ne[Re+Ke]=Xe(q[ue+Ke],gt)}}}function Je(){this.ud=this.hd=this.jd=0}function He(w,T){return((4278124286&(w^T))>>>1)+(w&T)>>>0}function Ge(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function xt(w,T){return Ge(w+(w-T+.5>>1))}function Et(w,T,q){return Math.abs(T-q)-Math.abs(w-q)}function Kt(w,T,q,ue,xe,Me,Ae){for(ue=Me[Ae-1],q=0;q<xe;++q)Me[Ae+q]=ue=Xe(w[T+q],ue)}function sn(w,T,q,ue,xe){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+Me],Ne=Ae>>8&255,Re=16711935&(Re=(Re=16711935&Ae)+((Ne<<16)+Ne));ue[xe+Me]=(4278255360&Ae)+Re>>>0}}function an(w,T){T.jd=w>>0&255,T.hd=w>>8&255,T.ud=w>>16&255}function Qe(w,T,q,ue,xe,Me){var Ae;for(Ae=0;Ae<ue;++Ae){var Ne=T[q+Ae],Re=Ne>>>8,Ke=Ne,gt=255&(gt=(gt=Ne>>>16)+((w.jd<<24>>24)*(Re<<24>>24)>>>5));Ke=255&(Ke=(Ke=Ke+((w.hd<<24>>24)*(Re<<24>>24)>>>5))+((w.ud<<24>>24)*(gt<<24>>24)>>>5)),xe[Me+Ae]=(4278255360&Ne)+(gt<<16)+Ke}}function at(w,T,q,ue,xe){I[T]=function(Me,Ae,Ne,Re,Ke,gt,Ft,jt,Ct){for(Re=Ft;Re<jt;++Re)for(Ft=0;Ft<Ct;++Ft)Ke[gt++]=xe(Ne[ue(Me[Ae++])])},I[w]=function(Me,Ae,Ne,Re,Ke,gt,Ft){var jt=8>>Me.b,Ct=Me.Ea,Zt=Me.K[0],Gt=Me.w;if(8>jt)for(Me=(1<<Me.b)-1,Gt=(1<<jt)-1;Ae<Ne;++Ae){var mt,_t=0;for(mt=0;mt<Ct;++mt)mt&Me||(_t=ue(Re[Ke++])),gt[Ft++]=xe(Zt[_t&Gt]),_t>>=jt}else I["VP8LMapColor"+q](Re,Ke,Zt,Gt,gt,Ft,Ae,Ne,Ct)}}function it(w,T,q,ue,xe){for(q=T+q;T<q;){var Me=w[T++];ue[xe++]=Me>>16&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>0&255}}function Bt(w,T,q,ue,xe){for(q=T+q;T<q;){var Me=w[T++];ue[xe++]=Me>>16&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>0&255,ue[xe++]=Me>>24&255}}function Qt(w,T,q,ue,xe){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&240|Ae>>12&15,Ae=Ae>>0&240|Ae>>28&15;ue[xe++]=Me,ue[xe++]=Ae}}function Tn(w,T,q,ue,xe){for(q=T+q;T<q;){var Me=(Ae=w[T++])>>16&248|Ae>>13&7,Ae=Ae>>5&224|Ae>>3&31;ue[xe++]=Me,ue[xe++]=Ae}}function xn(w,T,q,ue,xe){for(q=T+q;T<q;){var Me=w[T++];ue[xe++]=Me>>0&255,ue[xe++]=Me>>8&255,ue[xe++]=Me>>16&255}}function An(w,T,q,ue,xe,Me){if(Me==0)for(q=T+q;T<q;)Oe(ue,((Me=w[T++])[0]>>24|Me[1]>>8&65280|Me[2]<<8&16711680|Me[3]<<24)>>>0),xe+=32;else r(ue,xe,w,T,q)}function Kn(w,T){I[T][0]=I[w+"0"],I[T][1]=I[w+"1"],I[T][2]=I[w+"2"],I[T][3]=I[w+"3"],I[T][4]=I[w+"4"],I[T][5]=I[w+"5"],I[T][6]=I[w+"6"],I[T][7]=I[w+"7"],I[T][8]=I[w+"8"],I[T][9]=I[w+"9"],I[T][10]=I[w+"10"],I[T][11]=I[w+"11"],I[T][12]=I[w+"12"],I[T][13]=I[w+"13"],I[T][14]=I[w+"0"],I[T][15]=I[w+"0"]}function en(w){return w==Gs||w==qs||w==_a||w==u}function Ln(){this.eb=[],this.size=this.A=this.fb=0}function Mn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Hn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ln,this.f.kb=new Mn,this.sd=null}function hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function vr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ir(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Vr(w,T){var q=w.T,ue=T.ba.f.RGBA,xe=ue.eb,Me=ue.fb+w.ka*ue.A,Ae=ao[T.ba.S],Ne=w.y,Re=w.O,Ke=w.f,gt=w.N,Ft=w.ea,jt=w.W,Ct=T.cc,Zt=T.dc,Gt=T.Mc,mt=T.Nc,_t=w.ka,on=w.ka+w.T,yn=w.U,ln=yn+1>>1;for(_t==0?Ae(Ne,Re,null,null,Ke,gt,Ft,jt,Ke,gt,Ft,jt,xe,Me,null,null,yn):(Ae(T.ec,T.fc,Ne,Re,Ct,Zt,Gt,mt,Ke,gt,Ft,jt,xe,Me-ue.A,xe,Me,yn),++q);_t+2<on;_t+=2)Ct=Ke,Zt=gt,Gt=Ft,mt=jt,gt+=w.Rc,jt+=w.Rc,Me+=2*ue.A,Ae(Ne,(Re+=2*w.fa)-w.fa,Ne,Re,Ct,Zt,Gt,mt,Ke,gt,Ft,jt,xe,Me-ue.A,xe,Me,yn);return Re+=w.fa,w.j+on<w.o?(r(T.ec,T.fc,Ne,Re,yn),r(T.cc,T.dc,Ke,gt,ln),r(T.Mc,T.Nc,Ft,jt,ln),q--):1&on||Ae(Ne,Re,null,null,Ke,gt,Ft,jt,Ke,gt,Ft,jt,xe,Me+ue.A,null,null,yn),q}function Vs(w,T,q){var ue=w.F,xe=[w.J];if(ue!=null){var Me=w.U,Ae=T.ba.S,Ne=Ae==ba||Ae==_a;T=T.ba.f.RGBA;var Re=[0],Ke=w.ka;Re[0]=w.T,w.Kb&&(Ke==0?--Re[0]:(--Ke,xe[0]-=w.width),w.j+w.ka+w.T==w.o&&(Re[0]=w.o-w.j-Ke));var gt=T.eb;Ke=T.fb+Ke*T.A,w=Di(ue,xe[0],w.width,Me,Re,gt,Ke+(Ne?0:3),T.A),e(q==Re),w&&en(Ae)&&Ws(gt,Ke,Ne,Me,Re,T.A)}return 0}function ft(w){var T=w.ma,q=T.ba.S,ue=11>q,xe=q==pr||q==Za||q==ba||q==wo||q==12||en(q);if(T.memory=null,T.Ib=null,T.Jb=null,T.Nd=null,!Qu(T.Oa,w,xe?11:12))return 0;if(xe&&en(q)&&mn(),w.da)alert("todo:use_scaling");else{if(ue){if(T.Ib=ir,w.Kb){if(q=w.U+1>>1,T.memory=s(w.U+2*q),T.memory==null)return 0;T.ec=T.memory,T.fc=0,T.cc=T.ec,T.dc=T.fc+w.U,T.Mc=T.cc,T.Nc=T.dc+q,T.Ib=Vr,mn()}}else alert("todo:EmitYUV");xe&&(T.Jb=Vs,ue&&Pt())}if(ue&&!Tc){for(w=0;256>w;++w)Hh[w]=89858*(w-128)+bl>>Uh,Wh[w]=-22014*(w-128)+bl,Hp[w]=-45773*(w-128),fu[w]=113618*(w-128)+bl>>Uh;for(w=oh;w<Nd;++w)T=76283*(w-16)+bl>>Uh,Gh[w-oh]=Wr(T,255),Tf[w-oh]=Wr(T+8>>4,15);Tc=1}return 1}function rt(w){var T=w.ma,q=w.U,ue=w.T;return e(!(1&w.ka)),0>=q||0>=ue?0:(q=T.Ib(w,T),T.Jb!=null&&T.Jb(w,T,q),T.Dc+=q,1)}function $t(w){w.ma.memory=null}function Jt(w,T,q,ue){return Ce(w,8)!=47?0:(T[0]=Ce(w,14)+1,q[0]=Ce(w,14)+1,ue[0]=Ce(w,1),Ce(w,3)!=0?0:!w.h)}function Gn(w,T){if(4>w)return w+1;var q=w-2>>1;return(2+(1&w)<<q)+Ce(T,q)+1}function Sn(w,T){return 120<T?T-120:1<=(q=((q=ut[T-1])>>4)*w+(8-(15&q)))?q:1;var q}function Ut(w,T,q){var ue=G(q),xe=w[T+=255&ue].g-8;return 0<xe&&(he(q,q.u+8),ue=G(q),T+=w[T].value,T+=ue&(1<<xe)-1),he(q,q.u+w[T].g),w[T].value}function cn(w,T,q){return q.g+=w.g,q.value+=w.value<<T>>>0,e(8>=q.g),w.g}function lt(w,T,q){var ue=w.xc;return e((T=ue==0?0:w.vc[w.md*(q>>ue)+(T>>ue)])<w.Wb),w.Ya[T]}function qt(w,T,q,ue){var xe=w.ab,Me=w.c*T,Ae=w.C;T=Ae+T;var Ne=q,Re=ue;for(ue=w.Ta,q=w.Ua;0<xe--;){var Ke=w.gc[xe],gt=Ae,Ft=T,jt=Ne,Ct=Re,Zt=(Re=ue,Ne=q,Ke.Ea);switch(e(gt<Ft),e(Ft<=Ke.nc),Ke.hc){case 2:Ac(jt,Ct,(Ft-gt)*Zt,Re,Ne);break;case 0:var Gt=gt,mt=Ft,_t=Re,on=Ne,yn=(h=Ke).Ea;Gt==0&&(yo(jt,Ct,null,null,1,_t,on),Kt(jt,Ct+1,0,0,yn-1,_t,on+1),Ct+=yn,on+=yn,++Gt);for(var ln=1<<h.b,In=ln-1,On=de(yn,h.b),tr=h.K,h=h.w+(Gt>>h.b)*On;Gt<mt;){var g=tr,_=h,S=1;for(bo(jt,Ct,_t,on-yn,1,_t,on);S<yn;){var M=(S&~In)+ln;M>yn&&(M=yn),(0,Ga[g[_++]>>8&15])(jt,Ct+ +S,_t,on+S-yn,M-S,_t,on+S),S=M}Ct+=yn,on+=yn,++Gt&In||(h+=On)}Ft!=Ke.nc&&r(Re,Ne-Zt,Re,Ne+(Ft-gt-1)*Zt,Zt);break;case 1:for(Zt=jt,mt=Ct,yn=(jt=Ke.Ea)-(on=jt&~(_t=(Ct=1<<Ke.b)-1)),Gt=de(jt,Ke.b),ln=Ke.K,Ke=Ke.w+(gt>>Ke.b)*Gt;gt<Ft;){for(In=ln,On=Ke,tr=new Je,h=mt+on,g=mt+jt;mt<h;)an(In[On++],tr),qa(tr,Zt,mt,Ct,Re,Ne),mt+=Ct,Ne+=Ct;mt<g&&(an(In[On++],tr),qa(tr,Zt,mt,yn,Re,Ne),mt+=yn,Ne+=yn),++gt&_t||(Ke+=Gt)}break;case 3:if(jt==Re&&Ct==Ne&&0<Ke.b){for(mt=Re,jt=Zt=Ne+(Ft-gt)*Zt-(on=(Ft-gt)*de(Ke.Ea,Ke.b)),Ct=Re,_t=Ne,Gt=[],on=(yn=on)-1;0<=on;--on)Gt[on]=Ct[_t+on];for(on=yn-1;0<=on;--on)mt[jt+on]=Gt[on];Rs(Ke,gt,Ft,Re,Zt,Re,Ne)}else Rs(Ke,gt,Ft,jt,Ct,Re,Ne)}Ne=ue,Re=q}Re!=q&&r(ue,q,Ne,Re,Me)}function Dn(w,T){var q=w.V,ue=w.Ba+w.c*w.C,xe=T-w.C;if(e(T<=w.l.o),e(16>=xe),0<xe){var Me=w.l,Ae=w.Ta,Ne=w.Ua,Re=Me.width;if(qt(w,xe,q,ue),xe=Ne=[Ne],e((q=w.C)<(ue=T)),e(Me.v<Me.va),ue>Me.o&&(ue=Me.o),q<Me.j){var Ke=Me.j-q;q=Me.j,xe[0]+=Ke*Re}if(q>=ue?q=0:(xe[0]+=4*Me.v,Me.ka=q-Me.j,Me.U=Me.va-Me.v,Me.T=ue-q,q=1),q){if(Ne=Ne[0],11>(q=w.ca).S){var gt=q.f.RGBA,Ft=(ue=q.S,xe=Me.U,Me=Me.T,Ke=gt.eb,gt.A),jt=Me;for(gt=gt.fb+w.Ma*gt.A;0<jt--;){var Ct=Ae,Zt=Ne,Gt=xe,mt=Ke,_t=gt;switch(ue){case No:io(Ct,Zt,Gt,mt,_t);break;case pr:Hs(Ct,Zt,Gt,mt,_t);break;case Gs:Hs(Ct,Zt,Gt,mt,_t),Ws(mt,_t,0,Gt,1,0);break;case Ka:so(Ct,Zt,Gt,mt,_t);break;case Za:An(Ct,Zt,Gt,mt,_t,1);break;case qs:An(Ct,Zt,Gt,mt,_t,1),Ws(mt,_t,0,Gt,1,0);break;case ba:An(Ct,Zt,Gt,mt,_t,0);break;case _a:An(Ct,Zt,Gt,mt,_t,0),Ws(mt,_t,1,Gt,1,0);break;case wo:Aa(Ct,Zt,Gt,mt,_t);break;case u:Aa(Ct,Zt,Gt,mt,_t),Pi(mt,_t,Gt,1,0);break;case ih:Xo(Ct,Zt,Gt,mt,_t);break;default:e(0)}Ne+=Re,gt+=Ft}w.Ma+=Me}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=q.height)}}w.C=T,e(w.C<=w.i)}function Ar(w){var T;if(0<w.ua)return 0;for(T=0;T<w.Wb;++T){var q=w.Ya[T].G,ue=w.Ya[T].H;if(0<q[1][ue[1]+0].g||0<q[2][ue[2]+0].g||0<q[3][ue[3]+0].g)return 0}return 1}function Tt(w,T,q,ue,xe,Me){if(w.Z!=0){var Ae=w.qd,Ne=w.rd;for(e(bi[w.Z]!=null);T<q;++T)bi[w.Z](Ae,Ne,ue,xe,ue,xe,Me),Ae=ue,Ne=xe,xe+=Me;w.qd=Ae,w.rd=Ne}}function zn(w,T){var q=w.l.ma,ue=q.Z==0||q.Z==1?w.l.j:w.C;if(ue=w.C<ue?ue:w.C,e(T<=w.l.o),T>ue){var xe=w.l.width,Me=q.ca,Ae=q.tb+xe*ue,Ne=w.V,Re=w.Ba+w.c*ue,Ke=w.gc;e(w.ab==1),e(Ke[0].hc==3),no(Ke[0],ue,T,Ne,Re,Me,Ae),Tt(q,ue,T,Me,Ae,xe)}w.C=w.Ma=T}function sr(w,T,q,ue,xe,Me,Ae){var Ne=w.$/ue,Re=w.$%ue,Ke=w.m,gt=w.s,Ft=q+w.$,jt=Ft;xe=q+ue*xe;var Ct=q+ue*Me,Zt=280+gt.ua,Gt=w.Pb?Ne:16777216,mt=0<gt.ua?gt.Wa:null,_t=gt.wc,on=Ft<Ct?lt(gt,Re,Ne):null;e(w.C<Me),e(Ct<=xe);var yn=!1;e:for(;;){for(;yn||Ft<Ct;){var ln=0;if(Ne>=Gt){var In=Ft-q;e((Gt=w).Pb),Gt.wd=Gt.m,Gt.xd=In,0<Gt.s.ua&&ie(Gt.s.Wa,Gt.s.vb),Gt=Ne+Wt}if(Re&_t||(on=lt(gt,Re,Ne)),e(on!=null),on.Qb&&(T[Ft]=on.qb,yn=!0),!yn)if(ce(Ke),on.jc){ln=Ke,In=T;var On=Ft,tr=on.pd[G(ln)&Ms-1];e(on.jc),256>tr.g?(he(ln,ln.u+tr.g),In[On]=tr.value,ln=0):(he(ln,ln.u+tr.g-256),e(256<=tr.value),ln=tr.value),ln==0&&(yn=!0)}else ln=Ut(on.G[0],on.H[0],Ke);if(Ke.h)break;if(yn||256>ln){if(!yn)if(on.nd)T[Ft]=(on.qb|ln<<8)>>>0;else{if(ce(Ke),yn=Ut(on.G[1],on.H[1],Ke),ce(Ke),In=Ut(on.G[2],on.H[2],Ke),On=Ut(on.G[3],on.H[3],Ke),Ke.h)break;T[Ft]=(On<<24|yn<<16|ln<<8|In)>>>0}if(yn=!1,++Ft,++Re>=ue&&(Re=0,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne),mt!=null))for(;jt<Ft;)ln=T[jt++],mt.X[(506832829*ln&4294967295)>>>mt.Mb]=ln}else if(280>ln){if(ln=Gn(ln-256,Ke),In=Ut(on.G[4],on.H[4],Ke),ce(Ke),In=Sn(ue,In=Gn(In,Ke)),Ke.h)break;if(Ft-q<In||xe-Ft<ln)break e;for(On=0;On<ln;++On)T[Ft+On]=T[Ft+On-In];for(Ft+=ln,Re+=ln;Re>=ue;)Re-=ue,++Ne,Ae!=null&&Ne<=Me&&!(Ne%16)&&Ae(w,Ne);if(e(Ft<=xe),Re&_t&&(on=lt(gt,Re,Ne)),mt!=null)for(;jt<Ft;)ln=T[jt++],mt.X[(506832829*ln&4294967295)>>>mt.Mb]=ln}else{if(!(ln<Zt))break e;for(yn=ln-280,e(mt!=null);jt<Ft;)ln=T[jt++],mt.X[(506832829*ln&4294967295)>>>mt.Mb]=ln;ln=Ft,e(!(yn>>>(In=mt).Xa)),T[ln]=In.X[yn],yn=!0}yn||e(Ke.h==re(Ke))}if(w.Pb&&Ke.h&&Ft<xe)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&ie(w.s.vb,w.s.Wa);else{if(Ke.h)break e;Ae!=null&&Ae(w,Ne>Me?Me:Ne),w.a=0,w.$=Ft-q}return 1}return w.a=3,0}function mi(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var T=w.Wa;T!=null&&(T.X=null),w.vb=null,e(w!=null)}function Nr(){var w=new Bl;return w==null?null:(w.a=0,w.xb=Tu,Kn("Predictor","VP8LPredictors"),Kn("Predictor","VP8LPredictors_C"),Kn("PredictorAdd","VP8LPredictorsAdd"),Kn("PredictorAdd","VP8LPredictorsAdd_C"),Ac=sn,qa=Qe,io=it,Hs=Bt,Aa=Qt,Xo=Tn,so=xn,I.VP8LMapColor32b=Wa,I.VP8LMapColor8b=ro,w)}function Rr(w,T,q,ue,xe){var Me=1,Ae=[w],Ne=[T],Re=ue.m,Ke=ue.s,gt=null,Ft=0;e:for(;;){if(q)for(;Me&&Ce(Re,1);){var jt=Ae,Ct=Ne,Zt=ue,Gt=1,mt=Zt.m,_t=Zt.gc[Zt.ab],on=Ce(mt,2);if(Zt.Oc&1<<on)Me=0;else{switch(Zt.Oc|=1<<on,_t.hc=on,_t.Ea=jt[0],_t.nc=Ct[0],_t.K=[null],++Zt.ab,e(4>=Zt.ab),on){case 0:case 1:_t.b=Ce(mt,3)+2,Gt=Rr(de(_t.Ea,_t.b),de(_t.nc,_t.b),0,Zt,_t.K),_t.K=_t.K[0];break;case 3:var yn,ln=Ce(mt,8)+1,In=16<ln?0:4<ln?1:2<ln?2:3;if(jt[0]=de(_t.Ea,In),_t.b=In,yn=Gt=Rr(ln,1,0,Zt,_t.K)){var On,tr=ln,h=_t,g=1<<(8>>h.b),_=s(g);if(_==null)yn=0;else{var S=h.K[0],M=h.w;for(_[0]=h.K[0][0],On=1;On<1*tr;++On)_[On]=Xe(S[M+On],_[On-1]);for(;On<4*g;++On)_[On]=0;h.K[0]=null,h.K[0]=_,yn=1}}Gt=yn;break;case 2:break;default:e(0)}Me=Gt}}if(Ae=Ae[0],Ne=Ne[0],Me&&Ce(Re,1)&&!(Me=1<=(Ft=Ce(Re,4))&&11>=Ft)){ue.a=3;break e}var U;if(U=Me)t:{var ne,ae,ye,Ee=ue,nt=Ae,qe=Ne,bt=Ft,It=q,tn=Ee.m,wn=Ee.s,Pn=[null],dr=1,tt=0,st=Ot[bt];n:for(;;){if(It&&Ce(tn,1)){var pt=Ce(tn,3)+2,zt=de(nt,pt),St=de(qe,pt),Rt=zt*St;if(!Rr(zt,St,0,Ee,Pn))break n;for(Pn=Pn[0],wn.xc=pt,ne=0;ne<Rt;++ne){var be=Pn[ne]>>8&65535;Pn[ne]=be,be>=dr&&(dr=be+1)}}if(tn.h)break n;for(ae=0;5>ae;++ae){var ke=H[ae];!ae&&0<bt&&(ke+=1<<bt),tt<ke&&(tt=ke)}var je=o(dr*st,B),Fe=dr,Ue=o(Fe,R);if(Ue==null)var We=null;else e(65536>=Fe),We=Ue;var ct=s(tt);if(We==null||ct==null||je==null){Ee.a=1;break n}var ht=je;for(ne=ye=0;ne<dr;++ne){var vt=We[ne],Mt=vt.G,kt=vt.H,hn=0,Vn=1,qn=0;for(ae=0;5>ae;++ae){ke=H[ae],Mt[ae]=ht,kt[ae]=ye,!ae&&0<bt&&(ke+=1<<bt);i:{var nr,_i=ke,Oi=Ee,ni=ct,Wi=ht,Ro=ye,nc=0,Ra=Oi.m,Id=Ce(Ra,1);if(i(ni,0,0,_i),Id){var _l=Ce(Ra,1)+1,Dc=Ce(Ra,1),Fa=Ce(Ra,Dc==0?1:8);ni[Fa]=1,_l==2&&(ni[Fa=Ce(Ra,8)]=1);var lo=1}else{var Ls=s(19),Bf=Ce(Ra,4)+4;if(19<Bf){Oi.a=3;var Bd=0;break i}for(nr=0;nr<Bf;++nr)Ls[Pe[nr]]=Ce(Ra,3);var Rd=void 0,Fd=void 0,Rf=Oi,hi=Ls,Ff=_i,Vm=ni,ah=0,rc=Rf.m,Um=8,Hm=o(128,B);r:for(;N(Hm,0,7,hi,19);){if(Ce(rc,1)){var zl=2+2*Ce(rc,3);if((Rd=2+Ce(rc,zl))>Ff)break r}else Rd=Ff;for(Fd=0;Fd<Ff&&Rd--;){ce(rc);var Wm=Hm[0+(127&G(rc))];he(rc,rc.u+Wm.g);var ic=Wm.value;if(16>ic)Vm[Fd++]=ic,ic!=0&&(Um=ic);else{var Wp=ic==16,Gp=ic-16,Gm=P[Gp],Ja=Ce(rc,y[Gp])+Gm;if(Fd+Ja>Ff)break r;for(var Oc=Wp?Um:0;0<Ja--;)Vm[Fd++]=Oc}}ah=1;break r}ah||(Rf.a=3),lo=ah}(lo=lo&&!Ra.h)&&(nc=N(Wi,Ro,8,ni,_i)),lo&&nc!=0?Bd=nc:(Oi.a=3,Bd=0)}if(Bd==0)break n;if(Vn&&le[ae]==1&&(Vn=ht[ye].g==0),hn+=ht[ye].g,ye+=Bd,3>=ae){var lh,jf=ct[0];for(lh=1;lh<ke;++lh)ct[lh]>jf&&(jf=ct[lh]);qn+=jf}}if(vt.nd=Vn,vt.Qb=0,Vn&&(vt.qb=(Mt[3][kt[3]+0].value<<24|Mt[1][kt[1]+0].value<<16|Mt[2][kt[2]+0].value)>>>0,hn==0&&256>Mt[0][kt[0]+0].value&&(vt.Qb=1,vt.qb+=Mt[0][kt[0]+0].value<<8)),vt.jc=!vt.Qb&&6>qn,vt.jc){var uh,Du=vt;for(uh=0;uh<Ms;++uh){var Ou=uh,sc=Du.pd[Ou],qh=Du.G[0][Du.H[0]+Ou];256<=qh.value?(sc.g=qh.g+256,sc.value=qh.value):(sc.g=0,sc.value=0,Ou>>=cn(qh,8,sc),Ou>>=cn(Du.G[1][Du.H[1]+Ou],16,sc),Ou>>=cn(Du.G[2][Du.H[2]+Ou],0,sc),cn(Du.G[3][Du.H[3]+Ou],24,sc))}}}wn.vc=Pn,wn.Wb=dr,wn.Ya=We,wn.yc=je,U=1;break t}U=0}if(!(Me=U)){ue.a=3;break e}if(0<Ft){if(Ke.ua=1<<Ft,!Q(Ke.Wa,Ft)){ue.a=1,Me=0;break e}}else Ke.ua=0;var jd=ue,oc=Ae,e1=Ne,Nu=jd.s,zf=Nu.xc;if(jd.c=oc,jd.i=e1,Nu.md=de(oc,zf),Nu.wc=zf==0?-1:(1<<zf)-1,q){ue.xb=Od;break e}if((gt=s(Ae*Ne))==null){ue.a=1,Me=0;break e}Me=(Me=sr(ue,gt,0,Ae,Ne,Ne,null))&&!Re.h;break e}return Me?(xe!=null?xe[0]=gt:(e(gt==null),e(q)),ue.$=0,q||mi(Ke)):mi(Ke),Me}function yr(w,T){var q=w.c*w.i,ue=q+T+16*T;return e(w.c<=T),w.V=s(ue),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+q+T,1)}function ji(w,T){var q=w.C,ue=T-q,xe=w.V,Me=w.Ba+w.c*q;for(e(T<=w.l.o);0<ue;){var Ae=16<ue?16:ue,Ne=w.l.ma,Re=w.l.width,Ke=Re*Ae,gt=Ne.ca,Ft=Ne.tb+Re*q,jt=w.Ta,Ct=w.Ua;qt(w,Ae,xe,Me),xs(jt,Ct,gt,Ft,Ke),Tt(Ne,q,q+Ae,gt,Ft,Re),ue-=Ae,xe+=Ae*w.c,q+=Ae}e(q==T),w.C=w.Ma=T}function _r(){this.ub=this.yd=this.td=this.Rb=0}function Fr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Cr(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function un(){this.Yb=function(){var w=[];return function T(q,ue,xe){for(var Me=xe[ue],Ae=0;Ae<Me&&(q.push(xe.length>ue+1?[]:0),!(xe.length<ue+1));Ae++)T(q[Ae],ue+1,xe)}(w,0,[3,11]),w}()}function qi(){this.jb=s(3),this.Wc=a([4,8],un),this.Xc=a([4,17],un)}function Zi(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Vi(){this.ld=this.La=this.dd=this.tc=0}function pi(){this.Na=this.la=0}function zr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Jr(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gr(){this.uc=this.M=this.Nb=0,this.wa=Array(new Vi),this.Y=0,this.ya=Array(new Jr),this.aa=0,this.l=new Is}function Ui(){this.y=s(16),this.f=s(8),this.ea=s(8)}function qo(){this.cb=this.a=0,this.sc="",this.m=new De,this.Od=new _r,this.Kc=new Fr,this.ed=new Zi,this.Qa=new Cr,this.Ic=this.$c=this.Aa=0,this.D=new gr,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,De),this.ia=0,this.pb=o(4,zr),this.Pa=new qi,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ui),this.Hd=0,this.rb=Array(new pi),this.sb=0,this.wa=Array(new Vi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Jr),this.L=this.aa=0,this.gd=a([4,2],Vi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Is(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Yn(){var w=new qo;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,er||(er=ki)),w}function dn(w,T,q){return w.a==0&&(w.a=T,w.sc=q,w.cb=0),0}function as(w,T,q){return 3<=q&&w[T+0]==157&&w[T+1]==1&&w[T+2]==42}function xi(w,T){if(w==null)return 0;if(w.a=0,w.sc="OK",T==null)return dn(w,2,"null VP8Io passed to VP8GetHeaders()");var q=T.data,ue=T.w,xe=T.ha;if(4>xe)return dn(w,7,"Truncated header.");var Me=q[ue+0]|q[ue+1]<<8|q[ue+2]<<16,Ae=w.Od;if(Ae.Rb=!(1&Me),Ae.td=Me>>1&7,Ae.yd=Me>>4&1,Ae.ub=Me>>5,3<Ae.td)return dn(w,3,"Incorrect keyframe parameters.");if(!Ae.yd)return dn(w,4,"Frame not displayable.");ue+=3,xe-=3;var Ne=w.Kc;if(Ae.Rb){if(7>xe)return dn(w,7,"cannot parse picture header");if(!as(q,ue,xe))return dn(w,3,"Bad code word");Ne.c=16383&(q[ue+4]<<8|q[ue+3]),Ne.Td=q[ue+4]>>6,Ne.i=16383&(q[ue+6]<<8|q[ue+5]),Ne.Ud=q[ue+6]>>6,ue+=7,xe-=7,w.za=Ne.c+15>>4,w.Ub=Ne.i+15>>4,T.width=Ne.c,T.height=Ne.i,T.Da=0,T.j=0,T.v=0,T.va=T.width,T.o=T.height,T.da=0,T.ib=T.width,T.hb=T.height,T.U=T.width,T.T=T.height,i((Me=w.Pa).jb,0,255,Me.jb.length),e((Me=w.Qa)!=null),Me.Cb=0,Me.Bb=0,Me.Fb=1,i(Me.Zb,0,0,Me.Zb.length),i(Me.Lb,0,0,Me.Lb)}if(Ae.ub>xe)return dn(w,7,"bad partition length");j(Me=w.m,q,ue,Ae.ub),ue+=Ae.ub,xe-=Ae.ub,Ae.Rb&&(Ne.Ld=ee(Me),Ne.Kd=ee(Me)),Ne=w.Qa;var Re,Ke=w.Pa;if(e(Me!=null),e(Ne!=null),Ne.Cb=ee(Me),Ne.Cb){if(Ne.Bb=ee(Me),ee(Me)){for(Ne.Fb=ee(Me),Re=0;4>Re;++Re)Ne.Zb[Re]=ee(Me)?X(Me,7):0;for(Re=0;4>Re;++Re)Ne.Lb[Re]=ee(Me)?X(Me,6):0}if(Ne.Bb)for(Re=0;3>Re;++Re)Ke.jb[Re]=ee(Me)?W(Me,8):255}else Ne.Bb=0;if(Me.Ka)return dn(w,3,"cannot parse segment header");if((Ne=w.ed).zd=ee(Me),Ne.Tb=W(Me,6),Ne.wb=W(Me,3),Ne.Pc=ee(Me),Ne.Pc&&ee(Me)){for(Ke=0;4>Ke;++Ke)ee(Me)&&(Ne.vd[Ke]=X(Me,6));for(Ke=0;4>Ke;++Ke)ee(Me)&&(Ne.od[Ke]=X(Me,6))}if(w.L=Ne.Tb==0?0:Ne.zd?1:2,Me.Ka)return dn(w,3,"cannot parse filter header");var gt=xe;if(xe=Re=ue,ue=Re+gt,Ne=gt,w.Xb=(1<<W(w.m,2))-1,gt<3*(Ke=w.Xb))q=7;else{for(Re+=3*Ke,Ne-=3*Ke,gt=0;gt<Ke;++gt){var Ft=q[xe+0]|q[xe+1]<<8|q[xe+2]<<16;Ft>Ne&&(Ft=Ne),j(w.Jc[+gt],q,Re,Ft),Re+=Ft,Ne-=Ft,xe+=3}j(w.Jc[+Ke],q,Re,Ne),q=Re<ue?0:5}if(q!=0)return dn(w,q,"cannot parse partitions");for(q=W(Re=w.m,7),xe=ee(Re)?X(Re,4):0,ue=ee(Re)?X(Re,4):0,Ne=ee(Re)?X(Re,4):0,Ke=ee(Re)?X(Re,4):0,Re=ee(Re)?X(Re,4):0,gt=w.Qa,Ft=0;4>Ft;++Ft){if(gt.Cb){var jt=gt.Zb[Ft];gt.Fb||(jt+=q)}else{if(0<Ft){w.pb[Ft]=w.pb[0];continue}jt=q}var Ct=w.pb[Ft];Ct.Sc[0]=fn[Wr(jt+xe,127)],Ct.Sc[1]=Rn[Wr(jt+0,127)],Ct.Eb[0]=2*fn[Wr(jt+ue,127)],Ct.Eb[1]=101581*Rn[Wr(jt+Ne,127)]>>16,8>Ct.Eb[1]&&(Ct.Eb[1]=8),Ct.Qc[0]=fn[Wr(jt+Ke,117)],Ct.Qc[1]=Rn[Wr(jt+Re,127)],Ct.lc=jt+Re}if(!Ae.Rb)return dn(w,4,"Not a key frame.");for(ee(Me),Ae=w.Pa,q=0;4>q;++q){for(xe=0;8>xe;++xe)for(ue=0;3>ue;++ue)for(Ne=0;11>Ne;++Ne)Ke=J(Me,Io[q][xe][ue][Ne])?W(Me,8):Ys[q][xe][ue][Ne],Ae.Wc[q][xe].Yb[ue][Ne]=Ke;for(xe=0;17>xe;++xe)Ae.Xc[q][xe]=Ae.Wc[q][sh[xe]]}return w.kc=ee(Me),w.kc&&(w.Bd=W(Me,8)),w.cb=1}function ki(w,T,q,ue,xe,Me,Ae){var Ne=T[xe].Yb[q];for(q=0;16>xe;++xe){if(!J(w,Ne[q+0]))return xe;for(;!J(w,Ne[q+1]);)if(Ne=T[++xe].Yb[0],q=0,xe==16)return 16;var Re=T[xe+1].Yb;if(J(w,Ne[q+2])){var Ke=w,gt=0;if(J(Ke,(jt=Ne)[(Ft=q)+3]))if(J(Ke,jt[Ft+6])){for(Ne=0,Ft=2*(gt=J(Ke,jt[Ft+8]))+(jt=J(Ke,jt[Ft+9+gt])),gt=0,jt=$r[Ft];jt[Ne];++Ne)gt+=gt+J(Ke,jt[Ne]);gt+=3+(8<<Ft)}else J(Ke,jt[Ft+7])?(gt=7+2*J(Ke,165),gt+=J(Ke,145)):gt=5+J(Ke,159);else gt=J(Ke,jt[Ft+4])?3+J(Ke,jt[Ft+5]):2;Ne=Re[2]}else gt=1,Ne=Re[1];Re=Ae+As[xe],0>(Ke=w).b&&ve(Ke);var Ft,jt=Ke.b,Ct=(Ft=Ke.Ca>>1)-(Ke.I>>jt)>>31;--Ke.b,Ke.Ca+=Ct,Ke.Ca|=1,Ke.I-=(Ft+1&Ct)<<jt,Me[Re]=((gt^Ct)-Ct)*ue[(0<xe)+0]}return 16}function ls(w){var T=w.rb[w.sb-1];T.la=0,T.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function lr(w,T){if(w==null)return 0;if(T==null)return dn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!xi(w,T))return 0;if(e(w.cb),T.ac==null||T.ac(T)){T.ob&&(w.L=0);var q=Xa[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=T.v-q>>4,w.zb=T.j-q>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=T.o+15+q>>4,w.Hb=T.va+15+q>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var ue=w.ed;for(q=0;4>q;++q){var xe;if(w.Qa.Cb){var Me=w.Qa.Lb[q];w.Qa.Fb||(Me+=ue.Tb)}else Me=ue.Tb;for(xe=0;1>=xe;++xe){var Ae=w.gd[q][xe],Ne=Me;if(ue.Pc&&(Ne+=ue.vd[0],xe&&(Ne+=ue.od[0])),0<(Ne=0>Ne?0:63<Ne?63:Ne)){var Re=Ne;0<ue.wb&&(Re=4<ue.wb?Re>>2:Re>>1)>9-ue.wb&&(Re=9-ue.wb),1>Re&&(Re=1),Ae.dd=Re,Ae.tc=2*Ne+Re,Ae.ld=40<=Ne?2:15<=Ne?1:0}else Ae.tc=0;Ae.La=xe}}}q=0}else dn(w,6,"Frame setup failed"),q=w.a;if(q=q==0){if(q){w.$c=0,0<w.Aa||(w.Ic=Nf);e:{q=w.Ic,ue=4*(Re=w.za);var Ke=32*Re,gt=Re+1,Ft=0<w.L?Re*(0<w.Aa?2:1):0,jt=(w.Aa==2?2:1)*Re;if((Ae=ue+832+(xe=3*(16*q+Xa[w.L])/2*Ke)+(Me=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=Ae)q=0;else{if(Ae>w.Vb){if(w.Vb=0,w.Ec=s(Ae),w.Fc=0,w.Ec==null){q=dn(w,1,"no memory during frame initialization.");break e}w.Vb=Ae}Ae=w.Ec,Ne=w.Fc,w.Ac=Ae,w.Bc=Ne,Ne+=ue,w.Gd=o(Ke,Ui),w.Hd=0,w.rb=o(gt+1,pi),w.sb=1,w.wa=Ft?o(Ft,Vi):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=Re),e(!0),w.oc=Ae,w.pc=Ne,Ne+=832,w.ya=o(jt,Jr),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=Re),w.R=16*Re,w.B=8*Re,Re=(Ke=Xa[w.L])*w.R,Ke=Ke/2*w.B,w.sa=Ae,w.ta=Ne+Re,w.qa=w.sa,w.ra=w.ta+16*q*w.R+Ke,w.Ha=w.qa,w.Ia=w.ra+8*q*w.B+Ke,w.$c=0,Ne+=xe,w.mb=Me?Ae:null,w.nb=Me?Ne:null,e(Ne+Me<=w.Fc+w.Vb),ls(w),i(w.Ac,w.Bc,0,ue),q=1}}if(q){if(T.ka=0,T.y=w.sa,T.O=w.ta,T.f=w.qa,T.N=w.ra,T.ea=w.Ha,T.Vd=w.Ia,T.fa=w.R,T.Rc=w.B,T.F=null,T.J=0,!ec){for(q=-255;255>=q;++q)Hi[255+q]=0>q?-q:q;for(q=-1020;1020>=q;++q)Jo[1020+q]=-128>q?-128:127<q?127:q;for(q=-112;112>=q;++q)Oo[112+q]=-16>q?-16:15<q?15:q;for(q=-255;510>=q;++q)sa[255+q]=0>q?0:255<q?255:q;ec=1}wt=ms,Yt=si,Nn=Cn,Jn=rn,xr=Br,Nt=Qs,Ji=ku,Ei=Pa,du=ia,_o=cu,Qi=lu,Ta=uu,Ya=Li,Da=kc,Oa=ys,Na=ur,ti=bs,ya=Il,wa[0]=Ur,wa[1]=fa,wa[2]=wr,wa[3]=mo,wa[4]=gl,wa[5]=vi,wa[6]=Va,wa[7]=Es,wa[8]=Ju,wa[9]=vs,Ba[0]=Bs,Ba[1]=ga,Ba[2]=To,Ba[3]=Qr,Ba[4]=zi,Ba[5]=ra,Ba[6]=pl,oa[0]=ml,oa[1]=pa,oa[2]=su,oa[3]=Lr,oa[4]=ou,oa[5]=Mc,oa[6]=Pu,q=1}else q=0}q&&(q=function(Ct,Zt){for(Ct.M=0;Ct.M<Ct.Va;++Ct.M){var Gt,mt=Ct.Jc[Ct.M&Ct.Xb],_t=Ct.m,on=Ct;for(Gt=0;Gt<on.za;++Gt){var yn=_t,ln=on,In=ln.Ac,On=ln.Bc+4*Gt,tr=ln.zc,h=ln.ya[ln.aa+Gt];if(ln.Qa.Bb?h.$b=J(yn,ln.Pa.jb[0])?2+J(yn,ln.Pa.jb[2]):J(yn,ln.Pa.jb[1]):h.$b=0,ln.kc&&(h.Ad=J(yn,ln.Bd)),h.Za=!J(yn,145)+0,h.Za){var g=h.Ob,_=0;for(ln=0;4>ln;++ln){var S,M=tr[0+ln];for(S=0;4>S;++S){M=es[In[On+S]][M];for(var U=cs[J(yn,M[0])];0<U;)U=cs[2*U+J(yn,M[U])];M=-U,In[On+S]=M}r(g,_,In,On,4),_+=4,tr[0+ln]=M}}else M=J(yn,156)?J(yn,128)?1:3:J(yn,163)?2:0,h.Ob[0]=M,i(In,On,M,4),i(tr,0,M,4);h.Dd=J(yn,142)?J(yn,114)?J(yn,183)?1:3:2:0}if(on.m.Ka)return dn(Ct,7,"Premature end-of-partition0 encountered.");for(;Ct.ja<Ct.za;++Ct.ja){if(on=mt,yn=(_t=Ct).rb[_t.sb-1],In=_t.rb[_t.sb+_t.ja],Gt=_t.ya[_t.aa+_t.ja],On=_t.kc?Gt.Ad:0)yn.la=In.la=0,Gt.Za||(yn.Na=In.Na=0),Gt.Hc=0,Gt.Gc=0,Gt.ia=0;else{var ne,ae;if(yn=In,In=on,On=_t.Pa.Xc,tr=_t.ya[_t.aa+_t.ja],h=_t.pb[tr.$b],ln=tr.ad,g=0,_=_t.rb[_t.sb-1],M=S=0,i(ln,g,0,384),tr.Za)var ye=0,Ee=On[3];else{U=s(16);var nt=yn.Na+_.Na;if(nt=er(In,On[1],nt,h.Eb,0,U,0),yn.Na=_.Na=(0<nt)+0,1<nt)wt(U,0,ln,g);else{var qe=U[0]+3>>3;for(U=0;256>U;U+=16)ln[g+U]=qe}ye=1,Ee=On[0]}var bt=15&yn.la,It=15&_.la;for(U=0;4>U;++U){var tn=1&It;for(qe=ae=0;4>qe;++qe)bt=bt>>1|(tn=(nt=er(In,Ee,nt=tn+(1&bt),h.Sc,ye,ln,g))>ye)<<7,ae=ae<<2|(3<nt?3:1<nt?2:ln[g+0]!=0),g+=16;bt>>=4,It=It>>1|tn<<7,S=(S<<8|ae)>>>0}for(Ee=bt,ye=It>>4,ne=0;4>ne;ne+=2){for(ae=0,bt=yn.la>>4+ne,It=_.la>>4+ne,U=0;2>U;++U){for(tn=1&It,qe=0;2>qe;++qe)nt=tn+(1&bt),bt=bt>>1|(tn=0<(nt=er(In,On[2],nt,h.Qc,0,ln,g)))<<3,ae=ae<<2|(3<nt?3:1<nt?2:ln[g+0]!=0),g+=16;bt>>=2,It=It>>1|tn<<5}M|=ae<<4*ne,Ee|=bt<<4<<ne,ye|=(240&It)<<ne}yn.la=Ee,_.la=ye,tr.Hc=S,tr.Gc=M,tr.ia=43690&M?0:h.ia,On=!(S|M)}if(0<_t.L&&(_t.wa[_t.Y+_t.ja]=_t.gd[Gt.$b][Gt.Za],_t.wa[_t.Y+_t.ja].La|=!On),on.Ka)return dn(Ct,7,"Premature end-of-file encountered.")}if(ls(Ct),_t=Zt,on=1,Gt=(mt=Ct).D,yn=0<mt.L&&mt.M>=mt.zb&&mt.M<=mt.Va,mt.Aa==0)e:{if(Gt.M=mt.M,Gt.uc=yn,Au(mt,Gt),on=1,Gt=(ae=mt.D).Nb,yn=(M=Xa[mt.L])*mt.R,In=M/2*mt.B,U=16*Gt*mt.R,qe=8*Gt*mt.B,On=mt.sa,tr=mt.ta-yn+U,h=mt.qa,ln=mt.ra-In+qe,g=mt.Ha,_=mt.Ia-In+qe,It=(bt=ae.M)==0,S=bt>=mt.Va-1,mt.Aa==2&&Au(mt,ae),ae.uc)for(tn=(nt=mt).D.M,e(nt.D.uc),ae=nt.yb;ae<nt.Hb;++ae){ye=ae,Ee=tn;var wn=(Pn=(ke=nt).D).Nb;ne=ke.R;var Pn=Pn.wa[Pn.Y+ye],dr=ke.sa,tt=ke.ta+16*wn*ne+16*ye,st=Pn.dd,pt=Pn.tc;if(pt!=0)if(e(3<=pt),ke.L==1)0<ye&&Na(dr,tt,ne,pt+4),Pn.La&&ya(dr,tt,ne,pt),0<Ee&&Oa(dr,tt,ne,pt+4),Pn.La&&ti(dr,tt,ne,pt);else{var zt=ke.B,St=ke.qa,Rt=ke.ra+8*wn*zt+8*ye,be=ke.Ha,ke=ke.Ia+8*wn*zt+8*ye;wn=Pn.ld,0<ye&&(Ei(dr,tt,ne,pt+4,st,wn),_o(St,Rt,be,ke,zt,pt+4,st,wn)),Pn.La&&(Ta(dr,tt,ne,pt,st,wn),Da(St,Rt,be,ke,zt,pt,st,wn)),0<Ee&&(Ji(dr,tt,ne,pt+4,st,wn),du(St,Rt,be,ke,zt,pt+4,st,wn)),Pn.La&&(Qi(dr,tt,ne,pt,st,wn),Ya(St,Rt,be,ke,zt,pt,st,wn))}}if(mt.ia&&alert("todo:DitherRow"),_t.put!=null){if(ae=16*bt,bt=16*(bt+1),It?(_t.y=mt.sa,_t.O=mt.ta+U,_t.f=mt.qa,_t.N=mt.ra+qe,_t.ea=mt.Ha,_t.W=mt.Ia+qe):(ae-=M,_t.y=On,_t.O=tr,_t.f=h,_t.N=ln,_t.ea=g,_t.W=_),S||(bt-=M),bt>_t.o&&(bt=_t.o),_t.F=null,_t.J=null,mt.Fa!=null&&0<mt.Fa.length&&ae<bt&&(_t.J=_s(mt,_t,ae,bt-ae),_t.F=mt.mb,_t.F==null&&_t.F.length==0)){on=dn(mt,3,"Could not decode alpha data.");break e}ae<_t.j&&(M=_t.j-ae,ae=_t.j,e(!(1&M)),_t.O+=mt.R*M,_t.N+=mt.B*(M>>1),_t.W+=mt.B*(M>>1),_t.F!=null&&(_t.J+=_t.width*M)),ae<bt&&(_t.O+=_t.v,_t.N+=_t.v>>1,_t.W+=_t.v>>1,_t.F!=null&&(_t.J+=_t.v),_t.ka=ae-_t.j,_t.U=_t.va-_t.v,_t.T=bt-ae,on=_t.put(_t))}Gt+1!=mt.Ic||S||(r(mt.sa,mt.ta-yn,On,tr+16*mt.R,yn),r(mt.qa,mt.ra-In,h,ln+8*mt.B,In),r(mt.Ha,mt.Ia-In,g,_+8*mt.B,In))}if(!on)return dn(Ct,6,"Output aborted.")}return 1}(w,T)),T.bc!=null&&T.bc(T),q&=1}return q?(w.cb=0,q):0}function Tr(w,T,q,ue,xe){xe=w[T+q+32*ue]+(xe>>3),w[T+q+32*ue]=-256&xe?0>xe?0:255:xe}function Ir(w,T,q,ue,xe,Me){Tr(w,T,0,q,ue+xe),Tr(w,T,1,q,ue+Me),Tr(w,T,2,q,ue-Me),Tr(w,T,3,q,ue-xe)}function ps(w){return(20091*w>>16)+w}function ci(w,T,q,ue){var xe,Me=0,Ae=s(16);for(xe=0;4>xe;++xe){var Ne=w[T+0]+w[T+8],Re=w[T+0]-w[T+8],Ke=(35468*w[T+4]>>16)-ps(w[T+12]),gt=ps(w[T+4])+(35468*w[T+12]>>16);Ae[Me+0]=Ne+gt,Ae[Me+1]=Re+Ke,Ae[Me+2]=Re-Ke,Ae[Me+3]=Ne-gt,Me+=4,T++}for(xe=Me=0;4>xe;++xe)Ne=(w=Ae[Me+0]+4)+Ae[Me+8],Re=w-Ae[Me+8],Ke=(35468*Ae[Me+4]>>16)-ps(Ae[Me+12]),Tr(q,ue,0,0,Ne+(gt=ps(Ae[Me+4])+(35468*Ae[Me+12]>>16))),Tr(q,ue,1,0,Re+Ke),Tr(q,ue,2,0,Re-Ke),Tr(q,ue,3,0,Ne-gt),Me++,ue+=32}function Qs(w,T,q,ue){var xe=w[T+0]+4,Me=35468*w[T+4]>>16,Ae=ps(w[T+4]),Ne=35468*w[T+1]>>16;Ir(q,ue,0,xe+Ae,w=ps(w[T+1]),Ne),Ir(q,ue,1,xe+Me,w,Ne),Ir(q,ue,2,xe-Me,w,Ne),Ir(q,ue,3,xe-Ae,w,Ne)}function si(w,T,q,ue,xe){ci(w,T,q,ue),xe&&ci(w,T+16,q,ue+4)}function Cn(w,T,q,ue){Yt(w,T+0,q,ue,1),Yt(w,T+32,q,ue+128,1)}function rn(w,T,q,ue){var xe;for(w=w[T+0]+4,xe=0;4>xe;++xe)for(T=0;4>T;++T)Tr(q,ue,T,xe,w)}function Br(w,T,q,ue){w[T+0]&&Jn(w,T+0,q,ue),w[T+16]&&Jn(w,T+16,q,ue+4),w[T+32]&&Jn(w,T+32,q,ue+128),w[T+48]&&Jn(w,T+48,q,ue+128+4)}function ms(w,T,q,ue){var xe,Me=s(16);for(xe=0;4>xe;++xe){var Ae=w[T+0+xe]+w[T+12+xe],Ne=w[T+4+xe]+w[T+8+xe],Re=w[T+4+xe]-w[T+8+xe],Ke=w[T+0+xe]-w[T+12+xe];Me[0+xe]=Ae+Ne,Me[8+xe]=Ae-Ne,Me[4+xe]=Ke+Re,Me[12+xe]=Ke-Re}for(xe=0;4>xe;++xe)Ae=(w=Me[0+4*xe]+3)+Me[3+4*xe],Ne=Me[1+4*xe]+Me[2+4*xe],Re=Me[1+4*xe]-Me[2+4*xe],Ke=w-Me[3+4*xe],q[ue+0]=Ae+Ne>>3,q[ue+16]=Ke+Re>>3,q[ue+32]=Ae-Ne>>3,q[ue+48]=Ke-Re>>3,ue+=64}function us(w,T,q){var ue,xe=T-32,Me=$i,Ae=255-w[xe-1];for(ue=0;ue<q;++ue){var Ne,Re=Me,Ke=Ae+w[T-1];for(Ne=0;Ne<q;++Ne)w[T+Ne]=Re[Ke+w[xe+Ne]];T+=32}}function fa(w,T){us(w,T,4)}function pa(w,T){us(w,T,8)}function ga(w,T){us(w,T,16)}function To(w,T){var q;for(q=0;16>q;++q)r(w,T+32*q,w,T-32,16)}function Qr(w,T){var q;for(q=16;0<q;--q)i(w,T,w[T-1],16),T+=32}function na(w,T,q){var ue;for(ue=0;16>ue;++ue)i(T,q+32*ue,w,16)}function Bs(w,T){var q,ue=16;for(q=0;16>q;++q)ue+=w[T-1+32*q]+w[T+q-32];na(ue>>5,w,T)}function zi(w,T){var q,ue=8;for(q=0;16>q;++q)ue+=w[T-1+32*q];na(ue>>4,w,T)}function ra(w,T){var q,ue=8;for(q=0;16>q;++q)ue+=w[T+q-32];na(ue>>4,w,T)}function pl(w,T){na(128,w,T)}function mr(w,T,q){return w+2*T+q+2>>2}function wr(w,T){var q,ue=T-32;for(ue=new Uint8Array([mr(w[ue-1],w[ue+0],w[ue+1]),mr(w[ue+0],w[ue+1],w[ue+2]),mr(w[ue+1],w[ue+2],w[ue+3]),mr(w[ue+2],w[ue+3],w[ue+4])]),q=0;4>q;++q)r(w,T+32*q,ue,0,ue.length)}function mo(w,T){var q=w[T-1],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96];Oe(w,T+0,16843009*mr(w[T-1-32],q,ue)),Oe(w,T+32,16843009*mr(q,ue,xe)),Oe(w,T+64,16843009*mr(ue,xe,Me)),Oe(w,T+96,16843009*mr(xe,Me,Me))}function Ur(w,T){var q,ue=4;for(q=0;4>q;++q)ue+=w[T+q-32]+w[T-1+32*q];for(ue>>=3,q=0;4>q;++q)i(w,T+32*q,ue,4)}function gl(w,T){var q=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Re=w[T+2-32],Ke=w[T+3-32];w[T+0+96]=mr(ue,xe,w[T-1+96]),w[T+1+96]=w[T+0+64]=mr(q,ue,xe),w[T+2+96]=w[T+1+64]=w[T+0+32]=mr(Me,q,ue),w[T+3+96]=w[T+2+64]=w[T+1+32]=w[T+0+0]=mr(Ae,Me,q),w[T+3+64]=w[T+2+32]=w[T+1+0]=mr(Ne,Ae,Me),w[T+3+32]=w[T+2+0]=mr(Re,Ne,Ae),w[T+3+0]=mr(Ke,Re,Ne)}function Va(w,T){var q=w[T+1-32],ue=w[T+2-32],xe=w[T+3-32],Me=w[T+4-32],Ae=w[T+5-32],Ne=w[T+6-32],Re=w[T+7-32];w[T+0+0]=mr(w[T+0-32],q,ue),w[T+1+0]=w[T+0+32]=mr(q,ue,xe),w[T+2+0]=w[T+1+32]=w[T+0+64]=mr(ue,xe,Me),w[T+3+0]=w[T+2+32]=w[T+1+64]=w[T+0+96]=mr(xe,Me,Ae),w[T+3+32]=w[T+2+64]=w[T+1+96]=mr(Me,Ae,Ne),w[T+3+64]=w[T+2+96]=mr(Ae,Ne,Re),w[T+3+96]=mr(Ne,Re,Re)}function vi(w,T){var q=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1-32],Ae=w[T+0-32],Ne=w[T+1-32],Re=w[T+2-32],Ke=w[T+3-32];w[T+0+0]=w[T+1+64]=Me+Ae+1>>1,w[T+1+0]=w[T+2+64]=Ae+Ne+1>>1,w[T+2+0]=w[T+3+64]=Ne+Re+1>>1,w[T+3+0]=Re+Ke+1>>1,w[T+0+96]=mr(xe,ue,q),w[T+0+64]=mr(ue,q,Me),w[T+0+32]=w[T+1+96]=mr(q,Me,Ae),w[T+1+32]=w[T+2+96]=mr(Me,Ae,Ne),w[T+2+32]=w[T+3+96]=mr(Ae,Ne,Re),w[T+3+32]=mr(Ne,Re,Ke)}function Es(w,T){var q=w[T+0-32],ue=w[T+1-32],xe=w[T+2-32],Me=w[T+3-32],Ae=w[T+4-32],Ne=w[T+5-32],Re=w[T+6-32],Ke=w[T+7-32];w[T+0+0]=q+ue+1>>1,w[T+1+0]=w[T+0+64]=ue+xe+1>>1,w[T+2+0]=w[T+1+64]=xe+Me+1>>1,w[T+3+0]=w[T+2+64]=Me+Ae+1>>1,w[T+0+32]=mr(q,ue,xe),w[T+1+32]=w[T+0+96]=mr(ue,xe,Me),w[T+2+32]=w[T+1+96]=mr(xe,Me,Ae),w[T+3+32]=w[T+2+96]=mr(Me,Ae,Ne),w[T+3+64]=mr(Ae,Ne,Re),w[T+3+96]=mr(Ne,Re,Ke)}function vs(w,T){var q=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96];w[T+0+0]=q+ue+1>>1,w[T+2+0]=w[T+0+32]=ue+xe+1>>1,w[T+2+32]=w[T+0+64]=xe+Me+1>>1,w[T+1+0]=mr(q,ue,xe),w[T+3+0]=w[T+1+32]=mr(ue,xe,Me),w[T+3+32]=w[T+1+64]=mr(xe,Me,Me),w[T+3+64]=w[T+2+64]=w[T+0+96]=w[T+1+96]=w[T+2+96]=w[T+3+96]=Me}function Ju(w,T){var q=w[T-1+0],ue=w[T-1+32],xe=w[T-1+64],Me=w[T-1+96],Ae=w[T-1-32],Ne=w[T+0-32],Re=w[T+1-32],Ke=w[T+2-32];w[T+0+0]=w[T+2+32]=q+Ae+1>>1,w[T+0+32]=w[T+2+64]=ue+q+1>>1,w[T+0+64]=w[T+2+96]=xe+ue+1>>1,w[T+0+96]=Me+xe+1>>1,w[T+3+0]=mr(Ne,Re,Ke),w[T+2+0]=mr(Ae,Ne,Re),w[T+1+0]=w[T+3+32]=mr(q,Ae,Ne),w[T+1+32]=w[T+3+64]=mr(ue,q,Ae),w[T+1+64]=w[T+3+96]=mr(xe,ue,q),w[T+1+96]=mr(Me,xe,ue)}function su(w,T){var q;for(q=0;8>q;++q)r(w,T+32*q,w,T-32,8)}function Lr(w,T){var q;for(q=0;8>q;++q)i(w,T,w[T-1],8),T+=32}function Yr(w,T,q){var ue;for(ue=0;8>ue;++ue)i(T,q+32*ue,w,8)}function ml(w,T){var q,ue=8;for(q=0;8>q;++q)ue+=w[T+q-32]+w[T-1+32*q];Yr(ue>>4,w,T)}function Mc(w,T){var q,ue=4;for(q=0;8>q;++q)ue+=w[T+q-32];Yr(ue>>3,w,T)}function ou(w,T){var q,ue=4;for(q=0;8>q;++q)ue+=w[T-1+32*q];Yr(ue>>3,w,T)}function Pu(w,T){Yr(128,w,T)}function Nl(w,T,q){var ue=w[T-q],xe=w[T+0],Me=3*(xe-ue)+Ia[1020+w[T-2*q]-w[T+q]],Ae=ks[112+(Me+4>>3)];w[T-q]=$i[255+ue+ks[112+(Me+3>>3)]],w[T+0]=$i[255+xe-Ae]}function au(w,T,q,ue){var xe=w[T+0],Me=w[T+q];return oo[255+w[T-2*q]-w[T-q]]>ue||oo[255+Me-xe]>ue}function Mu(w,T,q,ue){return 4*oo[255+w[T-q]-w[T+0]]+oo[255+w[T-2*q]-w[T+q]]<=ue}function ei(w,T,q,ue,xe){var Me=w[T-3*q],Ae=w[T-2*q],Ne=w[T-q],Re=w[T+0],Ke=w[T+q],gt=w[T+2*q],Ft=w[T+3*q];return 4*oo[255+Ne-Re]+oo[255+Ae-Ke]>ue?0:oo[255+w[T-4*q]-Me]<=xe&&oo[255+Me-Ae]<=xe&&oo[255+Ae-Ne]<=xe&&oo[255+Ft-gt]<=xe&&oo[255+gt-Ke]<=xe&&oo[255+Ke-Re]<=xe}function ys(w,T,q,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Mu(w,T+ue,q,xe)&&Nl(w,T+ue,q)}function ur(w,T,q,ue){var xe=2*ue+1;for(ue=0;16>ue;++ue)Mu(w,T+ue*q,1,xe)&&Nl(w,T+ue*q,1)}function bs(w,T,q,ue){var xe;for(xe=3;0<xe;--xe)ys(w,T+=4*q,q,ue)}function Il(w,T,q,ue){var xe;for(xe=3;0<xe;--xe)ur(w,T+=4,q,ue)}function Ua(w,T,q,ue,xe,Me,Ae,Ne){for(Me=2*Me+1;0<xe--;){if(ei(w,T,q,Me,Ae))if(au(w,T,q,Ne))Nl(w,T,q);else{var Re=w,Ke=T,gt=q,Ft=Re[Ke-2*gt],jt=Re[Ke-gt],Ct=Re[Ke+0],Zt=Re[Ke+gt],Gt=Re[Ke+2*gt],mt=27*(on=Ia[1020+3*(Ct-jt)+Ia[1020+Ft-Zt]])+63>>7,_t=18*on+63>>7,on=9*on+63>>7;Re[Ke-3*gt]=$i[255+Re[Ke-3*gt]+on],Re[Ke-2*gt]=$i[255+Ft+_t],Re[Ke-gt]=$i[255+jt+mt],Re[Ke+0]=$i[255+Ct-mt],Re[Ke+gt]=$i[255+Zt-_t],Re[Ke+2*gt]=$i[255+Gt-on]}T+=ue}}function Xi(w,T,q,ue,xe,Me,Ae,Ne){for(Me=2*Me+1;0<xe--;){if(ei(w,T,q,Me,Ae))if(au(w,T,q,Ne))Nl(w,T,q);else{var Re=w,Ke=T,gt=q,Ft=Re[Ke-gt],jt=Re[Ke+0],Ct=Re[Ke+gt],Zt=ks[112+((Gt=3*(jt-Ft))+4>>3)],Gt=ks[112+(Gt+3>>3)],mt=Zt+1>>1;Re[Ke-2*gt]=$i[255+Re[Ke-2*gt]+mt],Re[Ke-gt]=$i[255+Ft+Gt],Re[Ke+0]=$i[255+jt-Zt],Re[Ke+gt]=$i[255+Ct-mt]}T+=ue}}function ku(w,T,q,ue,xe,Me){Ua(w,T,q,1,16,ue,xe,Me)}function Pa(w,T,q,ue,xe,Me){Ua(w,T,1,q,16,ue,xe,Me)}function lu(w,T,q,ue,xe,Me){var Ae;for(Ae=3;0<Ae;--Ae)Xi(w,T+=4*q,q,1,16,ue,xe,Me)}function uu(w,T,q,ue,xe,Me){var Ae;for(Ae=3;0<Ae;--Ae)Xi(w,T+=4,1,q,16,ue,xe,Me)}function ia(w,T,q,ue,xe,Me,Ae,Ne){Ua(w,T,xe,1,8,Me,Ae,Ne),Ua(q,ue,xe,1,8,Me,Ae,Ne)}function cu(w,T,q,ue,xe,Me,Ae,Ne){Ua(w,T,1,xe,8,Me,Ae,Ne),Ua(q,ue,1,xe,8,Me,Ae,Ne)}function Li(w,T,q,ue,xe,Me,Ae,Ne){Xi(w,T+4*xe,xe,1,8,Me,Ae,Ne),Xi(q,ue+4*xe,xe,1,8,Me,Ae,Ne)}function kc(w,T,q,ue,xe,Me,Ae,Ne){Xi(w,T+4,1,xe,8,Me,Ae,Ne),Xi(q,ue+4,1,xe,8,Me,Ae,Ne)}function Us(){this.ba=new Hn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new vr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ma(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function hu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function va(){this.ua=0,this.Wa=new fe,this.vb=new fe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new R,this.yc=new B}function Bl(){this.xb=this.a=0,this.l=new Is,this.ca=new Hn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Z,this.Pb=0,this.wd=new Z,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new va,this.ab=0,this.gc=o(4,hu),this.Oc=0}function Rl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Is,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Si(w,T,q,ue,xe,Me,Ae){for(w=w==null?0:w[T+0],T=0;T<Ae;++T)xe[Me+T]=w+q[ue+T]&255,w=xe[Me+T]}function Yo(w,T,q,ue,xe,Me,Ae){var Ne;if(w==null)Si(null,null,q,ue,xe,Me,Ae);else for(Ne=0;Ne<Ae;++Ne)xe[Me+Ne]=w[T+Ne]+q[ue+Ne]&255}function Ha(w,T,q,ue,xe,Me,Ae){if(w==null)Si(null,null,q,ue,xe,Me,Ae);else{var Ne,Re=w[T+0],Ke=Re,gt=Re;for(Ne=0;Ne<Ae;++Ne)Ke=gt+(Re=w[T+Ne])-Ke,gt=q[ue+Ne]+(-256&Ke?0>Ke?0:255:Ke)&255,Ke=Re,xe[Me+Ne]=gt}}function _s(w,T,q,ue){var xe=T.width,Me=T.o;if(e(w!=null&&T!=null),0>q||0>=ue||q+ue>Me)return null;if(!w.Cc){if(w.ga==null){var Ae;if(w.ga=new Rl,(Ae=w.ga==null)||(Ae=T.width*T.o,e(w.Gb.length==0),w.Gb=s(Ae),w.Uc=0,w.Gb==null?Ae=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,Ae=1),Ae=!Ae),!Ae){Ae=w.ga;var Ne=w.Fa,Re=w.P,Ke=w.qc,gt=w.mb,Ft=w.nb,jt=Re+1,Ct=Ke-1,Zt=Ae.l;if(e(Ne!=null&&gt!=null&&T!=null),bi[0]=null,bi[1]=Si,bi[2]=Yo,bi[3]=Ha,Ae.ca=gt,Ae.tb=Ft,Ae.c=T.width,Ae.i=T.height,e(0<Ae.c&&0<Ae.i),1>=Ke)T=0;else if(Ae.$a=Ne[Re+0]>>0&3,Ae.Z=Ne[Re+0]>>2&3,Ae.Lc=Ne[Re+0]>>4&3,Re=Ne[Re+0]>>6&3,0>Ae.$a||1<Ae.$a||4<=Ae.Z||1<Ae.Lc||Re)T=0;else if(Zt.put=rt,Zt.ac=ft,Zt.bc=$t,Zt.ma=Ae,Zt.width=T.width,Zt.height=T.height,Zt.Da=T.Da,Zt.v=T.v,Zt.va=T.va,Zt.j=T.j,Zt.o=T.o,Ae.$a)e:{e(Ae.$a==1),T=Nr();t:for(;;){if(T==null){T=0;break e}if(e(Ae!=null),Ae.mc=T,T.c=Ae.c,T.i=Ae.i,T.l=Ae.l,T.l.ma=Ae,T.l.width=Ae.c,T.l.height=Ae.i,T.a=0,oe(T.m,Ne,jt,Ct),!Rr(Ae.c,Ae.i,1,T,null)||(T.ab==1&&T.gc[0].hc==3&&Ar(T.s)?(Ae.ic=1,Ne=T.c*T.i,T.Ta=null,T.Ua=0,T.V=s(Ne),T.Ba=0,T.V==null?(T.a=1,T=0):T=1):(Ae.ic=0,T=yr(T,Ae.c)),!T))break t;T=1;break e}Ae.mc=null,T=0}else T=Ct>=Ae.c*Ae.i;Ae=!T}if(Ae)return null;w.ga.Lc!=1?w.Ga=0:ue=Me-q}e(w.ga!=null),e(q+ue<=Me);e:{if(T=(Ne=w.ga).c,Me=Ne.l.o,Ne.$a==0){if(jt=w.rc,Ct=w.Vc,Zt=w.Fa,Re=w.P+1+q*T,Ke=w.mb,gt=w.nb+q*T,e(Re<=w.P+w.qc),Ne.Z!=0)for(e(bi[Ne.Z]!=null),Ae=0;Ae<ue;++Ae)bi[Ne.Z](jt,Ct,Zt,Re,Ke,gt,T),jt=Ke,Ct=gt,gt+=T,Re+=T;else for(Ae=0;Ae<ue;++Ae)r(Ke,gt,Zt,Re,T),jt=Ke,Ct=gt,gt+=T,Re+=T;w.rc=jt,w.Vc=Ct}else{if(e(Ne.mc!=null),T=q+ue,e((Ae=Ne.mc)!=null),e(T<=Ae.i),Ae.C>=T)T=1;else if(Ne.ic||Pt(),Ne.ic){Ne=Ae.V,jt=Ae.Ba,Ct=Ae.c;var Gt=Ae.i,mt=(Zt=1,Re=Ae.$/Ct,Ke=Ae.$%Ct,gt=Ae.m,Ft=Ae.s,Ae.$),_t=Ct*Gt,on=Ct*T,yn=Ft.wc,ln=mt<on?lt(Ft,Ke,Re):null;e(mt<=_t),e(T<=Gt),e(Ar(Ft));t:for(;;){for(;!gt.h&&mt<on;){if(Ke&yn||(ln=lt(Ft,Ke,Re)),e(ln!=null),ce(gt),256>(Gt=Ut(ln.G[0],ln.H[0],gt)))Ne[jt+mt]=Gt,++mt,++Ke>=Ct&&(Ke=0,++Re<=T&&!(Re%16)&&zn(Ae,Re));else{if(!(280>Gt)){Zt=0;break t}Gt=Gn(Gt-256,gt);var In,On=Ut(ln.G[4],ln.H[4],gt);if(ce(gt),!(mt>=(On=Sn(Ct,On=Gn(On,gt)))&&_t-mt>=Gt)){Zt=0;break t}for(In=0;In<Gt;++In)Ne[jt+mt+In]=Ne[jt+mt+In-On];for(mt+=Gt,Ke+=Gt;Ke>=Ct;)Ke-=Ct,++Re<=T&&!(Re%16)&&zn(Ae,Re);mt<on&&Ke&yn&&(ln=lt(Ft,Ke,Re))}e(gt.h==re(gt))}zn(Ae,Re>T?T:Re);break t}!Zt||gt.h&&mt<_t?(Zt=0,Ae.a=gt.h?5:3):Ae.$=mt,T=Zt}else T=sr(Ae,Ae.V,Ae.Ba,Ae.c,Ae.i,T,ji);if(!T){ue=0;break e}}q+ue>=Me&&(w.Cc=1),ue=1}if(!ue)return null;if(w.Cc&&((ue=w.ga)!=null&&(ue.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+q*xe}function F(w,T,q,ue,xe,Me){for(;0<xe--;){var Ae,Ne=w,Re=T+(q?1:0),Ke=w,gt=T+(q?0:3);for(Ae=0;Ae<ue;++Ae){var Ft=Ke[gt+4*Ae];Ft!=255&&(Ft*=32897,Ne[Re+4*Ae+0]=Ne[Re+4*Ae+0]*Ft>>23,Ne[Re+4*Ae+1]=Ne[Re+4*Ae+1]*Ft>>23,Ne[Re+4*Ae+2]=Ne[Re+4*Ae+2]*Ft>>23)}T+=Me}}function we(w,T,q,ue,xe){for(;0<ue--;){var Me;for(Me=0;Me<q;++Me){var Ae=w[T+2*Me+0],Ne=15&(Ke=w[T+2*Me+1]),Re=4369*Ne,Ke=(240&Ke|Ke>>4)*Re>>16;w[T+2*Me+0]=(240&Ae|Ae>>4)*Re>>16&240|(15&Ae|Ae<<4)*Re>>16>>4&15,w[T+2*Me+1]=240&Ke|Ne}T+=xe}}function et(w,T,q,ue,xe,Me,Ae,Ne){var Re,Ke,gt=255;for(Ke=0;Ke<xe;++Ke){for(Re=0;Re<ue;++Re){var Ft=w[T+Re];Me[Ae+4*Re]=Ft,gt&=Ft}T+=q,Ae+=Ne}return gt!=255}function dt(w,T,q,ue,xe){var Me;for(Me=0;Me<xe;++Me)q[ue+Me]=w[T+Me]>>8}function Pt(){Ws=F,Pi=we,Di=et,xs=dt}function Ht(w,T,q){I[w]=function(ue,xe,Me,Ae,Ne,Re,Ke,gt,Ft,jt,Ct,Zt,Gt,mt,_t,on,yn){var ln,In=yn-1>>1,On=Ne[Re+0]|Ke[gt+0]<<16,tr=Ft[jt+0]|Ct[Zt+0]<<16;e(ue!=null);var h=3*On+tr+131074>>2;for(T(ue[xe+0],255&h,h>>16,Gt,mt),Me!=null&&(h=3*tr+On+131074>>2,T(Me[Ae+0],255&h,h>>16,_t,on)),ln=1;ln<=In;++ln){var g=Ne[Re+ln]|Ke[gt+ln]<<16,_=Ft[jt+ln]|Ct[Zt+ln]<<16,S=On+g+tr+_+524296,M=S+2*(g+tr)>>3;h=M+On>>1,On=(S=S+2*(On+_)>>3)+g>>1,T(ue[xe+2*ln-1],255&h,h>>16,Gt,mt+(2*ln-1)*q),T(ue[xe+2*ln-0],255&On,On>>16,Gt,mt+(2*ln-0)*q),Me!=null&&(h=S+tr>>1,On=M+_>>1,T(Me[Ae+2*ln-1],255&h,h>>16,_t,on+(2*ln-1)*q),T(Me[Ae+2*ln+0],255&On,On>>16,_t,on+(2*ln+0)*q)),On=g,tr=_}1&yn||(h=3*On+tr+131074>>2,T(ue[xe+yn-1],255&h,h>>16,Gt,mt+(yn-1)*q),Me!=null&&(h=3*tr+On+131074>>2,T(Me[Ae+yn-1],255&h,h>>16,_t,on+(yn-1)*q)))}}function mn(){ao[No]=Ie,ao[pr]=tc,ao[Ka]=Bo,ao[Za]=Ks,ao[ba]=Gr,ao[wo]=Vh,ao[ih]=Af,ao[Gs]=tc,ao[qs]=Ks,ao[_a]=Gr,ao[u]=Vh}function Bn(w){return w&-16384?0>w?0:255:w>>Up}function $n(w,T){return Bn((19077*w>>8)+(26149*T>>8)-14234)}function or(w,T,q){return Bn((19077*w>>8)-(6419*T>>8)-(13320*q>>8)+8708)}function br(w,T){return Bn((19077*w>>8)+(33050*T>>8)-17685)}function Hr(w,T,q,ue,xe){ue[xe+0]=$n(w,q),ue[xe+1]=or(w,T,q),ue[xe+2]=br(w,T)}function Yi(w,T,q,ue,xe){ue[xe+0]=br(w,T),ue[xe+1]=or(w,T,q),ue[xe+2]=$n(w,q)}function yi(w,T,q,ue,xe){var Me=or(w,T,q);T=Me<<3&224|br(w,T)>>3,ue[xe+0]=248&$n(w,q)|Me>>5,ue[xe+1]=T}function Ci(w,T,q,ue,xe){var Me=240&br(w,T)|15;ue[xe+0]=240&$n(w,q)|or(w,T,q)>>4,ue[xe+1]=Me}function ws(w,T,q,ue,xe){ue[xe+0]=255,Hr(w,T,q,ue,xe+1)}function Ps(w,T,q,ue,xe){Yi(w,T,q,ue,xe),ue[xe+3]=255}function Ko(w,T,q,ue,xe){Hr(w,T,q,ue,xe),ue[xe+3]=255}function Wr(w,T){return 0>w?0:w>T?T:w}function eo(w,T,q){I[w]=function(ue,xe,Me,Ae,Ne,Re,Ke,gt,Ft){for(var jt=gt+(-2&Ft)*q;gt!=jt;)T(ue[xe+0],Me[Ae+0],Ne[Re+0],Ke,gt),T(ue[xe+1],Me[Ae+0],Ne[Re+0],Ke,gt+q),xe+=2,++Ae,++Re,gt+=2*q;1&Ft&&T(ue[xe+0],Me[Ae+0],Ne[Re+0],Ke,gt)}}function Fl(w,T,q){return q==0?w==0?T==0?6:5:T==0?4:0:q}function vo(w,T,q,ue,xe){switch(w>>>30){case 3:Yt(T,q,ue,xe,0);break;case 2:Nt(T,q,ue,xe);break;case 1:Jn(T,q,ue,xe)}}function Au(w,T){var q,ue,xe=T.M,Me=T.Nb,Ae=w.oc,Ne=w.pc+40,Re=w.oc,Ke=w.pc+584,gt=w.oc,Ft=w.pc+600;for(q=0;16>q;++q)Ae[Ne+32*q-1]=129;for(q=0;8>q;++q)Re[Ke+32*q-1]=129,gt[Ft+32*q-1]=129;for(0<xe?Ae[Ne-1-32]=Re[Ke-1-32]=gt[Ft-1-32]=129:(i(Ae,Ne-32-1,127,21),i(Re,Ke-32-1,127,9),i(gt,Ft-32-1,127,9)),ue=0;ue<w.za;++ue){var jt=T.ya[T.aa+ue];if(0<ue){for(q=-1;16>q;++q)r(Ae,Ne+32*q-4,Ae,Ne+32*q+12,4);for(q=-1;8>q;++q)r(Re,Ke+32*q-4,Re,Ke+32*q+4,4),r(gt,Ft+32*q-4,gt,Ft+32*q+4,4)}var Ct=w.Gd,Zt=w.Hd+ue,Gt=jt.ad,mt=jt.Hc;if(0<xe&&(r(Ae,Ne-32,Ct[Zt].y,0,16),r(Re,Ke-32,Ct[Zt].f,0,8),r(gt,Ft-32,Ct[Zt].ea,0,8)),jt.Za){var _t=Ae,on=Ne-32+16;for(0<xe&&(ue>=w.za-1?i(_t,on,Ct[Zt].y[15],4):r(_t,on,Ct[Zt+1].y,0,4)),q=0;4>q;q++)_t[on+128+q]=_t[on+256+q]=_t[on+384+q]=_t[on+0+q];for(q=0;16>q;++q,mt<<=2)_t=Ae,on=Ne+Df[q],wa[jt.Ob[q]](_t,on),vo(mt,Gt,16*+q,_t,on)}else if(_t=Fl(ue,xe,jt.Ob[0]),Ba[_t](Ae,Ne),mt!=0)for(q=0;16>q;++q,mt<<=2)vo(mt,Gt,16*+q,Ae,Ne+Df[q]);for(q=jt.Gc,_t=Fl(ue,xe,jt.Dd),oa[_t](Re,Ke),oa[_t](gt,Ft),mt=Gt,_t=Re,on=Ke,255&(jt=q>>0)&&(170&jt?Nn(mt,256,_t,on):xr(mt,256,_t,on)),jt=gt,mt=Ft,255&(q>>=8)&&(170&q?Nn(Gt,320,jt,mt):xr(Gt,320,jt,mt)),xe<w.Ub-1&&(r(Ct[Zt].y,0,Ae,Ne+480,16),r(Ct[Zt].f,0,Re,Ke+224,8),r(Ct[Zt].ea,0,gt,Ft+224,8)),q=8*Me*w.B,Ct=w.sa,Zt=w.ta+16*ue+16*Me*w.R,Gt=w.qa,jt=w.ra+8*ue+q,mt=w.Ha,_t=w.Ia+8*ue+q,q=0;16>q;++q)r(Ct,Zt+q*w.R,Ae,Ne+32*q,16);for(q=0;8>q;++q)r(Gt,jt+q*w.B,Re,Ke+32*q,8),r(mt,_t+q*w.B,gt,Ft+32*q,8)}}function Ma(w,T,q,ue,xe,Me,Ae,Ne,Re){var Ke=[0],gt=[0],Ft=0,jt=Re!=null?Re.kd:0,Ct=Re??new ma;if(w==null||12>q)return 7;Ct.data=w,Ct.w=T,Ct.ha=q,T=[T],q=[q],Ct.gb=[Ct.gb];e:{var Zt=T,Gt=q,mt=Ct.gb;if(e(w!=null),e(Gt!=null),e(mt!=null),mt[0]=0,12<=Gt[0]&&!n(w,Zt[0],"RIFF")){if(n(w,Zt[0]+8,"WEBP")){mt=3;break e}var _t=ge(w,Zt[0]+4);if(12>_t||4294967286<_t){mt=3;break e}if(jt&&_t>Gt[0]-8){mt=7;break e}mt[0]=_t,Zt[0]+=12,Gt[0]-=12}mt=0}if(mt!=0)return mt;for(_t=0<Ct.gb[0],q=q[0];;){e:{var on=w;Gt=T,mt=q;var yn=Ke,ln=gt,In=Zt=[0];if((h=Ft=[Ft])[0]=0,8>mt[0])mt=7;else{if(!n(on,Gt[0],"VP8X")){if(ge(on,Gt[0]+4)!=10){mt=3;break e}if(18>mt[0]){mt=7;break e}var On=ge(on,Gt[0]+8),tr=1+Ye(on,Gt[0]+12);if(2147483648<=tr*(on=1+Ye(on,Gt[0]+15))){mt=3;break e}In!=null&&(In[0]=On),yn!=null&&(yn[0]=tr),ln!=null&&(ln[0]=on),Gt[0]+=18,mt[0]-=18,h[0]=1}mt=0}}if(Ft=Ft[0],Zt=Zt[0],mt!=0)return mt;if(Gt=!!(2&Zt),!_t&&Ft)return 3;if(Me!=null&&(Me[0]=!!(16&Zt)),Ae!=null&&(Ae[0]=Gt),Ne!=null&&(Ne[0]=0),Ae=Ke[0],Zt=gt[0],Ft&&Gt&&Re==null){mt=0;break}if(4>q){mt=7;break}if(_t&&Ft||!_t&&!Ft&&!n(w,T[0],"ALPH")){q=[q],Ct.na=[Ct.na],Ct.P=[Ct.P],Ct.Sa=[Ct.Sa];e:{On=w,mt=T,_t=q;var h=Ct.gb;yn=Ct.na,ln=Ct.P,In=Ct.Sa,tr=22,e(On!=null),e(_t!=null),on=mt[0];var g=_t[0];for(e(yn!=null),e(In!=null),yn[0]=null,ln[0]=null,In[0]=0;;){if(mt[0]=on,_t[0]=g,8>g){mt=7;break e}var _=ge(On,on+4);if(4294967286<_){mt=3;break e}var S=8+_+1&-2;if(tr+=S,0<h&&tr>h){mt=3;break e}if(!n(On,on,"VP8 ")||!n(On,on,"VP8L")){mt=0;break e}if(g[0]<S){mt=7;break e}n(On,on,"ALPH")||(yn[0]=On,ln[0]=on+8,In[0]=_),on+=S,g-=S}}if(q=q[0],Ct.na=Ct.na[0],Ct.P=Ct.P[0],Ct.Sa=Ct.Sa[0],mt!=0)break}q=[q],Ct.Ja=[Ct.Ja],Ct.xa=[Ct.xa];e:if(h=w,mt=T,_t=q,yn=Ct.gb[0],ln=Ct.Ja,In=Ct.xa,On=mt[0],on=!n(h,On,"VP8 "),tr=!n(h,On,"VP8L"),e(h!=null),e(_t!=null),e(ln!=null),e(In!=null),8>_t[0])mt=7;else{if(on||tr){if(h=ge(h,On+4),12<=yn&&h>yn-12){mt=3;break e}if(jt&&h>_t[0]-8){mt=7;break e}ln[0]=h,mt[0]+=8,_t[0]-=8,In[0]=tr}else In[0]=5<=_t[0]&&h[On+0]==47&&!(h[On+4]>>5),ln[0]=_t[0];mt=0}if(q=q[0],Ct.Ja=Ct.Ja[0],Ct.xa=Ct.xa[0],T=T[0],mt!=0)break;if(4294967286<Ct.Ja)return 3;if(Ne==null||Gt||(Ne[0]=Ct.xa?2:1),Ae=[Ae],Zt=[Zt],Ct.xa){if(5>q){mt=7;break}Ne=Ae,jt=Zt,Gt=Me,w==null||5>q?w=0:5<=q&&w[T+0]==47&&!(w[T+4]>>5)?(_t=[0],h=[0],yn=[0],oe(ln=new Z,w,T,q),Jt(ln,_t,h,yn)?(Ne!=null&&(Ne[0]=_t[0]),jt!=null&&(jt[0]=h[0]),Gt!=null&&(Gt[0]=yn[0]),w=1):w=0):w=0}else{if(10>q){mt=7;break}Ne=Zt,w==null||10>q||!as(w,T+3,q-3)?w=0:(jt=w[T+0]|w[T+1]<<8|w[T+2]<<16,Gt=16383&(w[T+7]<<8|w[T+6]),w=16383&(w[T+9]<<8|w[T+8]),1&jt||3<(jt>>1&7)||!(jt>>4&1)||jt>>5>=Ct.Ja||!Gt||!w?w=0:(Ae&&(Ae[0]=Gt),Ne&&(Ne[0]=w),w=1))}if(!w||(Ae=Ae[0],Zt=Zt[0],Ft&&(Ke[0]!=Ae||gt[0]!=Zt)))return 3;Re!=null&&(Re[0]=Ct,Re.offset=T-Re.w,e(4294967286>T-Re.w),e(Re.offset==Re.ha-q));break}return mt==0||mt==7&&Ft&&Re==null?(Me!=null&&(Me[0]|=Ct.na!=null&&0<Ct.na.length),ue!=null&&(ue[0]=Ae),xe!=null&&(xe[0]=Zt),0):mt}function Qu(w,T,q){var ue=T.width,xe=T.height,Me=0,Ae=0,Ne=ue,Re=xe;if(T.Da=w!=null&&0<w.Da,T.Da&&(Ne=w.cd,Re=w.bd,Me=w.v,Ae=w.j,11>q||(Me&=-2,Ae&=-2),0>Me||0>Ae||0>=Ne||0>=Re||Me+Ne>ue||Ae+Re>xe))return 0;if(T.v=Me,T.j=Ae,T.va=Me+Ne,T.o=Ae+Re,T.U=Ne,T.T=Re,T.da=w!=null&&0<w.da,T.da){if(!Se(Ne,Re,q=[w.ib],Me=[w.hb]))return 0;T.ib=q[0],T.hb=Me[0]}return T.ob=w!=null&&w.ob,T.Kb=w==null||!w.Sd,T.da&&(T.ob=T.ib<3*ue/4&&T.hb<3*xe/4,T.Kb=0),1}function vl(w){if(w==null)return 2;if(11>w.S){var T=w.f.RGBA;T.fb+=(w.height-1)*T.A,T.A=-T.A}else T=w.f.kb,w=w.height,T.O+=(w-1)*T.fa,T.fa=-T.fa,T.N+=(w-1>>1)*T.Ab,T.Ab=-T.Ab,T.W+=(w-1>>1)*T.Db,T.Db=-T.Db,T.F!=null&&(T.J+=(w-1)*T.lb,T.lb=-T.lb);return 0}function yl(w,T,q,ue){if(ue==null||0>=w||0>=T)return 2;if(q!=null){if(q.Da){var xe=q.cd,Me=q.bd,Ae=-2&q.v,Ne=-2&q.j;if(0>Ae||0>Ne||0>=xe||0>=Me||Ae+xe>w||Ne+Me>T)return 2;w=xe,T=Me}if(q.da){if(!Se(w,T,xe=[q.ib],Me=[q.hb]))return 2;w=xe[0],T=Me[0]}}ue.width=w,ue.height=T;e:{var Re=ue.width,Ke=ue.height;if(w=ue.S,0>=Re||0>=Ke||!(w>=No&&13>w))w=2;else{if(0>=ue.Rd&&ue.sd==null){Ae=Me=xe=T=0;var gt=(Ne=Re*If[w])*Ke;if(11>w||(Me=(Ke+1)/2*(T=(Re+1)/2),w==12&&(Ae=(xe=Re)*Ke)),(Ke=s(gt+2*Me+Ae))==null){w=1;break e}ue.sd=Ke,11>w?((Re=ue.f.RGBA).eb=Ke,Re.fb=0,Re.A=Ne,Re.size=gt):((Re=ue.f.kb).y=Ke,Re.O=0,Re.fa=Ne,Re.Fd=gt,Re.f=Ke,Re.N=0+gt,Re.Ab=T,Re.Cd=Me,Re.ea=Ke,Re.W=0+gt+Me,Re.Db=T,Re.Ed=Me,w==12&&(Re.F=Ke,Re.J=0+gt+2*Me),Re.Tc=Ae,Re.lb=xe)}if(T=1,xe=ue.S,Me=ue.width,Ae=ue.height,xe>=No&&13>xe)if(11>xe)w=ue.f.RGBA,T&=(Ne=Math.abs(w.A))*(Ae-1)+Me<=w.size,T&=Ne>=Me*If[xe],T&=w.eb!=null;else{w=ue.f.kb,Ne=(Me+1)/2,gt=(Ae+1)/2,Re=Math.abs(w.fa),Ke=Math.abs(w.Ab);var Ft=Math.abs(w.Db),jt=Math.abs(w.lb),Ct=jt*(Ae-1)+Me;T&=Re*(Ae-1)+Me<=w.Fd,T&=Ke*(gt-1)+Ne<=w.Cd,T=(T&=Ft*(gt-1)+Ne<=w.Ed)&Re>=Me&Ke>=Ne&Ft>=Ne,T&=w.y!=null,T&=w.f!=null,T&=w.ea!=null,xe==12&&(T&=jt>=Me,T&=Ct<=w.Tc,T&=w.F!=null)}else T=0;w=T?0:2}}return w!=0||q!=null&&q.fd&&(w=vl(ue)),w}var Ms=64,ka=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Zo=24,Do=32,jl=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];$e("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(w){return w},I.Predictor2=function(w,T,q){return T[q+0]},I.Predictor3=function(w,T,q){return T[q+1]},I.Predictor4=function(w,T,q){return T[q-1]},I.Predictor5=function(w,T,q){return He(He(w,T[q+1]),T[q+0])},I.Predictor6=function(w,T,q){return He(w,T[q-1])},I.Predictor7=function(w,T,q){return He(w,T[q+0])},I.Predictor8=function(w,T,q){return He(T[q-1],T[q+0])},I.Predictor9=function(w,T,q){return He(T[q+0],T[q+1])},I.Predictor10=function(w,T,q){return He(He(w,T[q-1]),He(T[q+0],T[q+1]))},I.Predictor11=function(w,T,q){var ue=T[q+0];return 0>=Et(ue>>24&255,w>>24&255,(T=T[q-1])>>24&255)+Et(ue>>16&255,w>>16&255,T>>16&255)+Et(ue>>8&255,w>>8&255,T>>8&255)+Et(255&ue,255&w,255&T)?ue:w},I.Predictor12=function(w,T,q){var ue=T[q+0];return(Ge((w>>24&255)+(ue>>24&255)-((T=T[q-1])>>24&255))<<24|Ge((w>>16&255)+(ue>>16&255)-(T>>16&255))<<16|Ge((w>>8&255)+(ue>>8&255)-(T>>8&255))<<8|Ge((255&w)+(255&ue)-(255&T)))>>>0},I.Predictor13=function(w,T,q){var ue=T[q-1];return(xt((w=He(w,T[q+0]))>>24&255,ue>>24&255)<<24|xt(w>>16&255,ue>>16&255)<<16|xt(w>>8&255,ue>>8&255)<<8|xt(w>>0&255,ue>>0&255))>>>0};var yo=I.PredictorAdd0;I.PredictorAdd1=Kt,$e("Predictor2","PredictorAdd2"),$e("Predictor3","PredictorAdd3"),$e("Predictor4","PredictorAdd4"),$e("Predictor5","PredictorAdd5"),$e("Predictor6","PredictorAdd6"),$e("Predictor7","PredictorAdd7"),$e("Predictor8","PredictorAdd8"),$e("Predictor9","PredictorAdd9"),$e("Predictor10","PredictorAdd10"),$e("Predictor11","PredictorAdd11"),$e("Predictor12","PredictorAdd12"),$e("Predictor13","PredictorAdd13");var bo=I.PredictorAdd2;at("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),at("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var Ac,Rs=I.ColorIndexInverseTransform,Wa=I.MapARGB,no=I.VP8LColorIndexInverseTransformAlpha,ro=I.MapAlpha,Ga=I.VP8LPredictorsAdd=[];Ga.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var qa,io,Hs,Aa,Xo,so,wt,Yt,Nt,Nn,Jn,xr,Ji,Ei,du,_o,Qi,Ta,Ya,Da,Oa,Na,ti,ya,Ws,Pi,Di,xs,Hi=s(511),Jo=s(2041),Oo=s(225),sa=s(767),ec=0,Ia=Jo,ks=Oo,$i=sa,oo=Hi,No=0,pr=1,Ka=2,Za=3,ba=4,wo=5,ih=6,Gs=7,qs=8,_a=9,u=10,y=[2,3,7],P=[3,3,11],H=[280,256,256,256,40],le=[0,1,1,1,0],Pe=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ut=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ot=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Wt=8,fn=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Rn=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],er=null,$r=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],As=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],cs=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ys=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],es=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Io=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],sh=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ba=[],wa=[],oa=[],Od=1,Tu=2,bi=[],ao=[];Ht("UpsampleRgbLinePair",Hr,3),Ht("UpsampleBgrLinePair",Yi,3),Ht("UpsampleRgbaLinePair",Ko,4),Ht("UpsampleBgraLinePair",Ps,4),Ht("UpsampleArgbLinePair",ws,4),Ht("UpsampleRgba4444LinePair",Ci,2),Ht("UpsampleRgb565LinePair",yi,2);var Ie=I.UpsampleRgbLinePair,Bo=I.UpsampleBgrLinePair,tc=I.UpsampleRgbaLinePair,Ks=I.UpsampleBgraLinePair,Gr=I.UpsampleArgbLinePair,Vh=I.UpsampleRgba4444LinePair,Af=I.UpsampleRgb565LinePair,Uh=16,bl=1<<Uh-1,oh=-227,Nd=482,Up=6,Tc=0,Hh=s(256),fu=s(256),Hp=s(256),Wh=s(256),Gh=s(Nd-oh),Tf=s(Nd-oh);eo("YuvToRgbRow",Hr,3),eo("YuvToBgrRow",Yi,3),eo("YuvToRgbaRow",Ko,4),eo("YuvToBgraRow",Ps,4),eo("YuvToArgbRow",ws,4),eo("YuvToRgba4444Row",Ci,2),eo("YuvToRgb565Row",yi,2);var Df=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Xa=[0,2,8],Of=[8,7,6,4,4,2,2,2,1,1,1,1],Nf=1;this.WebPDecodeRGBA=function(w,T,q,ue,xe){var Me=pr,Ae=new Us,Ne=new Hn;Ae.ba=Ne,Ne.S=Me,Ne.width=[Ne.width],Ne.height=[Ne.height];var Re=Ne.width,Ke=Ne.height,gt=new hr;if(gt==null||w==null)var Ft=2;else e(gt!=null),Ft=Ma(w,T,q,gt.width,gt.height,gt.Pd,gt.Qd,gt.format,null);if(Ft!=0?Re=0:(Re!=null&&(Re[0]=gt.width[0]),Ke!=null&&(Ke[0]=gt.height[0]),Re=1),Re){Ne.width=Ne.width[0],Ne.height=Ne.height[0],ue!=null&&(ue[0]=Ne.width),xe!=null&&(xe[0]=Ne.height);e:{if(ue=new Is,(xe=new ma).data=w,xe.w=T,xe.ha=q,xe.kd=1,T=[0],e(xe!=null),((w=Ma(xe.data,xe.w,xe.ha,null,null,null,T,null,xe))==0||w==7)&&T[0]&&(w=4),(T=w)==0){if(e(Ae!=null),ue.data=xe.data,ue.w=xe.w+xe.offset,ue.ha=xe.ha-xe.offset,ue.put=rt,ue.ac=ft,ue.bc=$t,ue.ma=Ae,xe.xa){if((w=Nr())==null){Ae=1;break e}if(function(jt,Ct){var Zt=[0],Gt=[0],mt=[0];t:for(;;){if(jt==null)return 0;if(Ct==null)return jt.a=2,0;if(jt.l=Ct,jt.a=0,oe(jt.m,Ct.data,Ct.w,Ct.ha),!Jt(jt.m,Zt,Gt,mt)){jt.a=3;break t}if(jt.xb=Tu,Ct.width=Zt[0],Ct.height=Gt[0],!Rr(Zt[0],Gt[0],1,jt,null))break t;return 1}return e(jt.a!=0),0}(w,ue)){if(ue=(T=yl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){t:{ue=w;n:for(;;){if(ue==null){ue=0;break t}if(e(ue.s.yc!=null),e(ue.s.Ya!=null),e(0<ue.s.Wb),e((q=ue.l)!=null),e((xe=q.ma)!=null),ue.xb!=0){if(ue.ca=xe.ba,ue.tb=xe.tb,e(ue.ca!=null),!Qu(xe.Oa,q,Za)){ue.a=2;break n}if(!yr(ue,q.width)||q.da)break n;if((q.da||en(ue.ca.S))&&Pt(),11>ue.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ue.ca.f.kb.F!=null&&Pt()),ue.Pb&&0<ue.s.ua&&ue.s.vb.X==null&&!Q(ue.s.vb,ue.s.Wa.Xa)){ue.a=1;break n}ue.xb=0}if(!sr(ue,ue.V,ue.Ba,ue.c,ue.i,q.o,Dn))break n;xe.Dc=ue.Ma,ue=1;break t}e(ue.a!=0),ue=0}ue=!ue}ue&&(T=w.a)}else T=w.a}else{if((w=new Yn)==null){Ae=1;break e}if(w.Fa=xe.na,w.P=xe.P,w.qc=xe.Sa,xi(w,ue)){if((T=yl(ue.width,ue.height,Ae.Oa,Ae.ba))==0){if(w.Aa=0,q=Ae.Oa,e((xe=w)!=null),q!=null){if(0<(Re=0>(Re=q.Md)?0:100<Re?255:255*Re/100)){for(Ke=gt=0;4>Ke;++Ke)12>(Ft=xe.pb[Ke]).lc&&(Ft.ia=Re*Of[0>Ft.lc?0:Ft.lc]>>3),gt|=Ft.ia;gt&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=q.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}lr(w,ue)||(T=w.a)}}else T=w.a}T==0&&Ae.Oa!=null&&Ae.Oa.fd&&(T=vl(Ae.ba))}Ae=T}Me=Ae!=0?null:11>Me?Ne.f.RGBA.eb:Ne.f.kb.y}else Me=null;return Me};var If=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(I,z){for(var K="",N=0;N<4;N++)K+=String.fromCharCode(I[z++]);return K}function d(I,z){return(I[z+0]<<0|I[z+1]<<8|I[z+2]<<16)>>>0}function p(I,z){return(I[z+0]<<0|I[z+1]<<8|I[z+2]<<16|I[z+3]<<24)>>>0}new l;var v=[0],m=[0],x=[],E=new l,A=t,k=function(I,z){var K={},N=0,B=!1,V=0,R=0;if(K.frames=[],!function(G,re,he,ce){for(var ve=0;ve<ce;ve++)if(G[re+ve]!=he.charCodeAt(ve))return!0;return!1}(I,z,"RIFF",4)){var j,W;for(p(I,z+=4),z+=8;z<I.length;){var X=c(I,z),oe=p(I,z+=4);z+=4;var _e=oe+(1&oe);switch(X){case"VP8 ":case"VP8L":K.frames[N]===void 0&&(K.frames[N]={}),(Z=K.frames[N]).src_off=B?R:z-8,Z.src_size=V+oe+8,N++,B&&(B=!1,V=0,R=0);break;case"VP8X":(Z=K.header={}).feature_flags=I[z];var Ce=z+4;Z.canvas_width=1+d(I,Ce),Ce+=3,Z.canvas_height=1+d(I,Ce),Ce+=3;break;case"ALPH":B=!0,V=_e+8,R=z-8;break;case"ANIM":(Z=K.header).bgcolor=p(I,z),Ce=z+4,Z.loop_count=(j=I)[(W=Ce)+0]<<0|j[W+1]<<8,Ce+=2;break;case"ANMF":var De,Z;(Z=K.frames[N]={}).offset_x=2*d(I,z),z+=3,Z.offset_y=2*d(I,z),z+=3,Z.width=1+d(I,z),z+=3,Z.height=1+d(I,z),z+=3,Z.duration=d(I,z),z+=3,De=I[z++],Z.dispose=1&De,Z.blend=De>>1&1}X!="ANMF"&&(z+=_e)}return K}}(A,0);k.response=A,k.rgbaoutput=!0,k.dataurl=!1;var D=k.header?k.header:null,$=k.frames?k.frames:null;if(D){D.loop_counter=D.loop_count,v=[D.canvas_height],m=[D.canvas_width];for(var Y=0;Y<$.length&&$[Y].blend!=0;Y++);}var te=$[0],me=E.WebPDecodeRGBA(A,te.src_off,te.src_size,m,v);te.rgba=me,te.imgwidth=m[0],te.imgheight=v[0];for(var pe=0;pe<m[0]*v[0]*4;pe++)x[pe]=me[pe];return this.width=m,this.height=v,this.data=x,this}(function(t){var e=function(){return typeof kb=="function"},n=function(v,m,x,E){var A=4,k=o;switch(E){case t.image_compression.FAST:A=1,k=s;break;case t.image_compression.MEDIUM:A=6,k=a;break;case t.image_compression.SLOW:A=9,k=l}v=r(v,m,x,k);var D=kb(v,{level:A});return t.__addimage__.arrayBufferToBinaryString(D)},r=function(v,m,x,E){for(var A,k,D,$=v.length/m,Y=new Uint8Array(v.length+$),te=d(),me=0;me<$;me+=1){if(D=me*m,A=v.subarray(D,D+m),E)Y.set(E(A,x,k),D+me);else{for(var pe,I=te.length,z=[];pe<I;pe+=1)z[pe]=te[pe](A,x,k);var K=p(z.concat());Y.set(z[K],D+me)}k=A}return Y},i=function(v){var m=Array.apply([],v);return m.unshift(0),m},s=function(v,m){var x,E=[],A=v.length;E[0]=1;for(var k=0;k<A;k+=1)x=v[k-m]||0,E[k+1]=v[k]-x+256&255;return E},o=function(v,m,x){var E,A=[],k=v.length;A[0]=2;for(var D=0;D<k;D+=1)E=x&&x[D]||0,A[D+1]=v[D]-E+256&255;return A},a=function(v,m,x){var E,A,k=[],D=v.length;k[0]=3;for(var $=0;$<D;$+=1)E=v[$-m]||0,A=x&&x[$]||0,k[$+1]=v[$]+256-(E+A>>>1)&255;return k},l=function(v,m,x){var E,A,k,D,$=[],Y=v.length;$[0]=4;for(var te=0;te<Y;te+=1)E=v[te-m]||0,A=x&&x[te]||0,k=x&&x[te-m]||0,D=c(E,A,k),$[te+1]=v[te]-D+256&255;return $},c=function(v,m,x){if(v===m&&m===x)return v;var E=Math.abs(m-x),A=Math.abs(v-x),k=Math.abs(v+m-x-x);return E<=A&&E<=k?v:A<=k?m:x},d=function(){return[i,s,o,a,l]},p=function(v){var m=v.map(function(x){return x.reduce(function(E,A){return E+Math.abs(A)},0)});return m.indexOf(Math.min.apply(null,m))};t.processPNG=function(v,m,x,E){var A,k,D,$,Y,te,me,pe,I,z,K,N,B,V,R,j=this.decode.FLATE_DECODE,W="";if(this.__addimage__.isArrayBuffer(v)&&(v=new Uint8Array(v)),this.__addimage__.isArrayBufferView(v)){if(v=(D=new VH(v)).imgData,k=D.bits,A=D.colorSpace,Y=D.colors,[4,6].indexOf(D.colorType)!==-1){if(D.bits===8){I=(pe=D.pixelBitlength==32?new Uint32Array(D.decodePixels().buffer):D.pixelBitlength==16?new Uint16Array(D.decodePixels().buffer):new Uint8Array(D.decodePixels().buffer)).length,K=new Uint8Array(I*D.colors),z=new Uint8Array(I);var X,oe=D.pixelBitlength-D.bits;for(V=0,R=0;V<I;V++){for(B=pe[V],X=0;X<oe;)K[R++]=B>>>X&255,X+=D.bits;z[V]=B>>>X&255}}if(D.bits===16){I=(pe=new Uint32Array(D.decodePixels().buffer)).length,K=new Uint8Array(I*(32/D.pixelBitlength)*D.colors),z=new Uint8Array(I*(32/D.pixelBitlength)),N=D.colors>1,V=0,R=0;for(var _e=0;V<I;)B=pe[V++],K[R++]=B>>>0&255,N&&(K[R++]=B>>>16&255,B=pe[V++],K[R++]=B>>>0&255),z[_e++]=B>>>16&255;k=8}E!==t.image_compression.NONE&&e()?(v=n(K,D.width*D.colors,D.colors,E),me=n(z,D.width,1,E)):(v=K,me=z,j=void 0)}if(D.colorType===3&&(A=this.color_spaces.INDEXED,te=D.palette,D.transparency.indexed)){var Ce=D.transparency.indexed,De=0;for(V=0,I=Ce.length;V<I;++V)De+=Ce[V];if((De/=255)===I-1&&Ce.indexOf(0)!==-1)$=[Ce.indexOf(0)];else if(De!==I){for(pe=D.decodePixels(),z=new Uint8Array(pe.length),V=0,I=pe.length;V<I;V++)z[V]=Ce[pe[V]];me=n(z,D.width,1)}}var Z=function(G){var re;switch(G){case t.image_compression.FAST:re=11;break;case t.image_compression.MEDIUM:re=13;break;case t.image_compression.SLOW:re=14;break;default:re=12}return re}(E);return j===this.decode.FLATE_DECODE&&(W="/Predictor "+Z+" "),W+="/Colors "+Y+" /BitsPerComponent "+k+" /Columns "+D.width,(this.__addimage__.isArrayBuffer(v)||this.__addimage__.isArrayBufferView(v))&&(v=this.__addimage__.arrayBufferToBinaryString(v)),(me&&this.__addimage__.isArrayBuffer(me)||this.__addimage__.isArrayBufferView(me))&&(me=this.__addimage__.arrayBufferToBinaryString(me)),{alias:x,data:v,index:m,filter:j,decodeParameters:W,transparency:$,palette:te,sMask:me,predictor:Z,width:D.width,height:D.height,bitsPerComponent:k,colorSpace:A}}}})(Mr.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new UH(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},d=new u2(100).encode(c,100);return t.processJPEG.call(this,d,n,r,i)},t.processGIF87A=t.processGIF89A}(Mr.API),hc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hc.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Ss.log("bit decode error:"+n)}},hc.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},hc.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*i+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},hc.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},hc.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,d=r*this.width*4+4*i;this.data[d]=l,this.data[d+1]=a,this.data[d+2]=o,this.data[d+3]=c}this.pos+=t}},hc.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,d=i*this.width*4+4*s;this.data[d]=c,this.data[d+1]=l,this.data[d+2]=a,this.data[d+3]=255}this.pos+=t}},hc.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},hc.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},hc.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new hc(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Mr.API),B5.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new B5(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new u2(100).encode(l,100);return t.processJPEG.call(this,c,n,r,i)}}(Mr.API),Mr.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,c=0;c<i;c+=4){var d=r[c],p=r[c+1],v=r[c+2],m=r[c+3];s[a++]=d,s[a++]=p,s[a++]=v,o[l++]=m}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:x,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},Mr.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=Mr.API,E0=Zf.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:i.metadata.Unicode.kerning,d=c.fof?c.fof:1,p=e.doKerning!==!1,v=0,m=t.length,x=0,E=a[0]||l,A=[];for(n=0;n<m;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?A.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(v=p&&fs(c[r])==="object"&&!isNaN(parseInt(c[r][x],10))?c[r][x]/d:0,A.push((a[r]||E)/l+v)),x=r;return A},D5=Zf.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(t=Zf.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:E0.apply(this,arguments).reduce(function(s,o){return s+o},0)},O5=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},N5=function(t,e,n){n||(n={});var r,i,s,o,a,l,c,d=[],p=[d],v=n.textIndent||0,m=0,x=0,E=t.split(" "),A=E0.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?E[0].length+2:n.lineIndent||0){var k=Array(l).join(" "),D=[];E.map(function(Y){(Y=Y.split(/\s*\n/)).length>1?D=D.concat(Y.map(function(te,me){return(me&&te.length?`
`:"")+te})):D.push(Y[0])}),E=D,l=D5.apply(this,[k,n])}for(s=0,o=E.length;s<o;s++){var $=0;if(r=E[s],l&&r[0]==`
`&&(r=r.substr(1),$=1),v+m+(x=(i=E0.apply(this,[r,n])).reduce(function(Y,te){return Y+te},0))>e||$){if(x>e){for(a=O5.apply(this,[r,i,e-(v+m),e]),d.push(a.shift()),d=[a.pop()];a.length;)p.push([a.shift()]);x=i.slice(r.length-(d[0]?d[0].length:0)).reduce(function(Y,te){return Y+te},0)}else d=[r];p.push(d),v=x+l,m=A}else d.push(r),v+=m+x,m=A}return c=l?function(Y,te){return(te?k:"")+Y.join(" ")}:function(Y){return Y.join(" ")},p.map(c)},Zf.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=(function(d){if(d.widths&&d.kerning)return{widths:d.widths,kerning:d.kerning};var p=this.internal.getFont(d.fontName,d.fontStyle);return p.metadata.Unicode?{widths:p.metadata.Unicode.widths||{0:1},kerning:p.metadata.Unicode.kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=r.length;a<l;a++)c=c.concat(N5.apply(this,[r[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(p){return"0x"+parseInt(p,10).toString(16)},o=t.__fontmetrics__.compress=function(p){var v,m,x,E,A=["{"];for(var k in p){if(v=p[k],isNaN(parseInt(k,10))?m="'"+k+"'":(k=parseInt(k,10),m=(m=s(k).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof v=="number")v<0?(x=s(v).slice(3),E="-"):(x=s(v).slice(2),E=""),x=E+x.slice(0,-1)+r[x.slice(-1)];else{if(fs(v)!=="object")throw new Error("Don't know what to do with value type "+fs(v)+".");x=o(v)}A.push(m+x)}return A.push("}"),A.join("")},a=t.__fontmetrics__.uncompress=function(p){if(typeof p!="string")throw new Error("Invalid argument passed to uncompress.");for(var v,m,x,E,A={},k=1,D=A,$=[],Y="",te="",me=p.length-1,pe=1;pe<me;pe+=1)(E=p[pe])=="'"?v?(x=v.join(""),v=void 0):v=[]:v?v.push(E):E=="{"?($.push([D,x]),D={},x=void 0):E=="}"?((m=$.pop())[0][m[1]]=D,x=void 0,D=m[0]):E=="-"?k=-1:x===void 0?n.hasOwnProperty(E)?(Y+=n[E],x=parseInt(Y,16)*k,k=1,Y=""):Y+=E:n.hasOwnProperty(E)?(te+=n[E],D[x]=parseInt(te,16)*k,k=1,x=void 0,te=""):te+=E;return A},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},d={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(p){var v=p.font,m=d.Unicode[v.postScriptName];m&&(v.metadata.Unicode={},v.metadata.Unicode.widths=m.widths,v.metadata.Unicode.kerning=m.kerning);var x=c.Unicode[v.postScriptName];x&&(v.metadata.Unicode.encoding=x,v.encoding=x.codePages[0])}])}(Mr.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Gg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(Mr),function(t){function e(){return(Or.canvg?Promise.resolve(Or.canvg):Mh(()=>import("./index.es.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Mr.API.addSvgAsImage=function(n,r,i,s,o,a,l,c){if(isNaN(r)||isNaN(i))throw Ss.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Ss.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=s,d.height=o;var p=d.getContext("2d");p.fillStyle="#fff",p.fillRect(0,0,d.width,d.height);var v={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(x){return x.fromString(p,n,v)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(v)}).then(function(){m.addImage(d.toDataURL("image/jpeg",1),r,i,s,o,l,c)})}}(),Mr.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},Mr.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,d=0,p=0;function v(x,E){var A,k=!1;for(A=0;A<x.length;A+=1)x[A]===E&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(p=0;p<m;p+=1)n[a[p]].value=n[a[p]].defaultValue,n[a[p]].explicitSet=!1}if(fs(t)==="object"){for(i in t)if(s=t[i],v(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&v(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(c=0;c<s.length;c+=1)if(r=!0,s[c].length===1&&typeof s[c][0]=="number")l.push(String(s[c]-1));else if(s[c].length>1){for(d=0;d<s[c].length;d+=1)typeof s[c][d]!="number"&&(r=!1);r===!0&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,E=[];for(x in n)n[x].explicitSet===!0&&(n[x].type==="name"?E.push("/"+x+" /"+n[x].value):E.push("/"+x+" "+n[x].value));E.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+E.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),c=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+c+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(Mr.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,c=["","0","00","000","0000"],d=[""],p=0,v=s.length;p<v;++p){if(a=o.metadata.characterToGlyph(s.charCodeAt(p)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(p),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return d.join("");a=a.toString(16),d.push(c[4-a.length],a)}return d.join("")},r=function(s){var o,a,l,c,d,p,v;for(d=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],p=0,v=(a=Object.keys(s).sort(function(m,x){return m-x})).length;p<v;p++)o=a[p],l.length>=100&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(c=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+c+">"));return l.length&&(d+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),d+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var p=a.metadata.Unicode.widths,v=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",x=0;x<v.length;x++)m+=String.fromCharCode(v[x]);var E=c();d({data:m,addLength1:!0,objectId:E}),l("endobj");var A=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var k=c();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+lp(a.fontName)),l("/FontFile2 "+E+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var D=c();l("<<"),l("/Type /Font"),l("/BaseFont /"+lp(a.fontName)),l("/FontDescriptor "+k+" 0 R"),l("/W "+t.API.PDFObject.convert(p)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=c(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+A+" 0 R"),l("/BaseFont /"+lp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+D+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,c=o.newObject,d=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var p=a.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var x=c();d({data:v,addLength1:!0,objectId:x}),l("endobj");var E=c();d({data:r(a.metadata.toUnicode),addLength1:!0,objectId:E}),l("endobj");var A=c();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+x+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+lp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=c();for(var k=0;k<a.metadata.hmtx.widths.length;k++)a.metadata.hmtx.widths[k]=parseInt(a.metadata.hmtx.widths[k]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+E+" 0 R/BaseFont/"+lp(a.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,c=s.y,d=s.options||{},p=s.mutex||{},v=p.pdfEscape,m=p.activeFontKey,x=p.fonts,E=m,A="",k=0,D="",$=x[E].encoding;if(x[E].encoding!=="Identity-H")return{text:a,x:l,y:c,options:d,mutex:p};for(D=a,E=m,Array.isArray(a)&&(D=a[0]),k=0;k<D.length;k+=1)x[E].metadata.hasOwnProperty("cmap")&&(o=x[E].metadata.cmap.unicode.codeMap[D[k].charCodeAt(0)]),o||D[k].charCodeAt(0)<256&&x[E].metadata.hasOwnProperty("Unicode")?A+=D[k]:A+="";var Y="";return parseInt(E.slice(1))<14||$==="WinAnsiEncoding"?Y=v(A,E).split("").map(function(te){return te.charCodeAt(0).toString(16)}).join(""):$==="Identity-H"&&(Y=n(A,x[E])),p.isHex=!0,{text:Y,x:l,y:c,options:d,mutex:p}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var c=0;for(c=0;c<o.length;c+=1)Array.isArray(o[c])&&o[c].length===3?a.push([i(Object.assign({},l,{text:o[c][0]})).text,o[c][1],o[c][2]]):a.push(i(Object.assign({},l,{text:o[c]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(Mr),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Mr.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,c,d,p=e,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},E={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),D=!1,$=0;this.__bidiEngine__={};var Y=function(N){var B=N.charCodeAt(),V=B>>8,R=E[V];return R!==void 0?p[256*R+(255&B)]:V===252||V===253?"AL":k.test(V)?"L":V===8?"R":"N"},te=function(N){for(var B,V=0;V<N.length;V++){if((B=Y(N.charAt(V)))==="L")return!1;if(B==="R")return!0}return!1},me=function(N,B,V,R){var j,W,X,oe,_e=B[R];switch(_e){case"L":case"R":D=!1;break;case"N":case"AN":break;case"EN":D&&(_e="AN");break;case"AL":D=!0,_e="R";break;case"WS":_e="N";break;case"CS":R<1||R+1>=B.length||(j=V[R-1])!=="EN"&&j!=="AN"||(W=B[R+1])!=="EN"&&W!=="AN"?_e="N":D&&(W="AN"),_e=W===j?W:"N";break;case"ES":_e=(j=R>0?V[R-1]:"B")==="EN"&&R+1<B.length&&B[R+1]==="EN"?"EN":"N";break;case"ET":if(R>0&&V[R-1]==="EN"){_e="EN";break}if(D){_e="N";break}for(X=R+1,oe=B.length;X<oe&&B[X]==="ET";)X++;_e=X<oe&&B[X]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(oe=B.length,X=R+1;X<oe&&B[X]==="NSM";)X++;if(X<oe){var Ce=N[R],De=Ce>=1425&&Ce<=2303||Ce===64286;if(j=B[X],De&&(j==="R"||j==="AL")){_e="R";break}}}_e=R<1||(j=B[R-1])==="B"?"N":V[R-1];break;case"B":D=!1,i=!0,_e=$;break;case"S":s=!0,_e="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":D=!1;break;case"BN":_e="N"}return _e},pe=function(N,B,V){var R=N.split("");return V&&I(R,V,{hiLevel:$}),R.reverse(),B&&B.reverse(),R.join("")},I=function(N,B,V){var R,j,W,X,oe,_e=-1,Ce=N.length,De=0,Z=[],G=$?m:v,re=[];for(D=!1,i=!1,s=!1,j=0;j<Ce;j++)re[j]=Y(N[j]);for(W=0;W<Ce;W++){if(oe=De,Z[W]=me(N,re,Z,W),R=240&(De=G[oe][x[Z[W]]]),De&=15,B[W]=X=G[De][5],R>0)if(R===16){for(j=_e;j<W;j++)B[j]=1;_e=-1}else _e=-1;if(G[De][6])_e===-1&&(_e=W);else if(_e>-1){for(j=_e;j<W;j++)B[j]=X;_e=-1}re[W]==="B"&&(B[W]=0),V.hiLevel|=X}s&&function(he,ce,ve){for(var ee=0;ee<ve;ee++)if(he[ee]==="S"){ce[ee]=$;for(var J=ee-1;J>=0&&he[J]==="WS";J--)ce[J]=$}}(re,B,Ce)},z=function(N,B,V,R,j){if(!(j.hiLevel<N)){if(N===1&&$===1&&!i)return B.reverse(),void(V&&V.reverse());for(var W,X,oe,_e,Ce=B.length,De=0;De<Ce;){if(R[De]>=N){for(oe=De+1;oe<Ce&&R[oe]>=N;)oe++;for(_e=De,X=oe-1;_e<X;_e++,X--)W=B[_e],B[_e]=B[X],B[X]=W,V&&(W=V[_e],V[_e]=V[X],V[X]=W);De=oe}De++}}},K=function(N,B,V){var R=N.split(""),j={hiLevel:$};return V||(V=[]),I(R,V,j),function(W,X,oe){if(oe.hiLevel!==0&&d)for(var _e,Ce=0;Ce<W.length;Ce++)X[Ce]===1&&(_e=A.indexOf(W[Ce]))>=0&&(W[Ce]=A[_e+1])}(R,V,j),z(2,R,B,V,j),z(1,R,B,V,j),R.join("")};return this.__bidiEngine__.doBidiReorder=function(N,B,V){if(function(j,W){if(W)for(var X=0;X<j.length;X++)W[X]=X;a===void 0&&(a=te(j)),c===void 0&&(c=te(j))}(N,B),o||!l||c)if(o&&l&&a^c)$=a?1:0,N=pe(N,B,V);else if(!o&&l&&c)$=a?1:0,N=K(N,B,V),N=pe(N,B);else if(!o||a||l||c){if(o&&!l&&a^c)N=pe(N,B),a?($=0,N=K(N,B,V)):($=1,N=K(N,B,V),N=pe(N,B));else if(o&&a&&!l&&c)$=1,N=K(N,B,V),N=pe(N,B);else if(!o&&!l&&a^c){var R=d;a?($=1,N=K(N,B,V),$=0,d=!1,N=K(N,B,V),d=R):($=0,N=K(N,B,V),N=pe(N,B),$=1,d=!1,N=K(N,B,V),d=R,N=pe(N,B))}}else $=0,N=K(N,B,V);else $=a?1:0,N=K(N,B,V);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,c=N.isOutputRtl,d=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),o=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(Mr),Mr.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Ed(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new iW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new HH(this.contents),this.head=new GH(this),this.name=new XH(this),this.cmap=new iP(this),this.toUnicode={},this.hhea=new qH(this),this.maxp=new JH(this),this.hmtx=new QH(this),this.post=new KH(this),this.os2=new YH(this),this.loca=new rW(this),this.glyf=new eW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,c;for(c=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],c.push(Math.round(e*this.scaleFactor));return c}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Pc,Ed=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),HH=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,c,d,p,v,m,x,E;for(E in m=Object.keys(n).length,l=Math.log(2),p=16*Math.floor(Math.log(m)/l),o=Math.floor(p/l),d=16*m-p,(i=new Ed).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(d),s=16*m,c=i.pos+s,a=null,x=[],n)for(v=n[E],i.writeString(E),i.writeInt(t(v)),i.writeInt(c),i.writeInt(v.length),x=x.concat(v),E==="head"&&(a=c),c+=v.length;c%4;)x.push(0),c++;return i.write(x),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=sP.call(n);n.length%4;)n.push(0);for(s=new Ed(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),WH={}.hasOwnProperty,rh=function(t,e){for(var n in e)WH.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Pc=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var GH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Ed).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),R5=function(){function t(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,A,k,D,$;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),p=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),v=m/2,e.pos+=6,s=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),e.pos+=2,E=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),c=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),d=function(){var Y,te;for(te=[],l=Y=0;0<=v?Y<v:Y>v;l=0<=v?++Y:--Y)te.push(e.readUInt16());return te}(),i=(this.length-e.pos+this.offset)/2,a=function(){var Y,te;for(te=[],l=Y=0;0<=i?Y<i:Y>i;l=0<=i?++Y:--Y)te.push(e.readUInt16());return te}(),l=k=0,$=s.length;k<$;l=++k)for(A=s[l],r=D=x=E[l];x<=A?D<=A:D>=A;r=x<=A?++D:--D)d[l]===0?o=r+c[l]:(o=a[d[l]/2+(r-x)-(v-l)]||0)!==0&&(o+=c[l]),this.codeMap[r]=65535&o}e.pos=p}return t.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,A,k,D,$,Y,te,me,pe,I,z,K,N,B,V,R,j,W,X,oe,_e,Ce,De,Z,G,re,he,ce,ve,ee,J,Oe,Te,Ye;switch(R=new Ed,o=Object.keys(e).sort(function(ge,Q){return ge-Q}),n){case"macroman":for(E=0,A=function(){var ge=[];for(x=0;x<256;++x)ge.push(0);return ge}(),D={0:0},s={},j=0,_e=o.length;j<_e;j++)D[J=e[i=o[j]]]==null&&(D[J]=++E),s[i]={old:e[i],new:D[e[i]]},A[i]=D[e[i]];return R.writeUInt16(1),R.writeUInt16(0),R.writeUInt32(12),R.writeUInt16(0),R.writeUInt16(262),R.writeUInt16(0),R.write(A),{charMap:s,subtable:R.data,maxGlyphID:E+1};case"unicode":for(B=[],p=[],$=0,D={},r={},k=c=null,W=0,Ce=o.length;W<Ce;W++)D[te=e[i=o[W]]]==null&&(D[te]=++$),r[i]={old:te,new:D[te]},a=D[te]-i,k!=null&&a===c||(k&&p.push(k),B.push(i),c=a),k=i;for(k&&p.push(k),p.push(65535),B.push(65535),K=2*(z=B.length),I=2*Math.pow(Math.log(z)/Math.LN2,2),v=Math.log(I/2)/Math.LN2,pe=2*z-I,l=[],me=[],m=[],x=X=0,De=B.length;X<De;x=++X){if(N=B[x],d=p[x],N===65535){l.push(0),me.push(0);break}if(N-(V=r[N].new)>=32768)for(l.push(0),me.push(2*(m.length+z-x)),i=oe=N;N<=d?oe<=d:oe>=d;i=N<=d?++oe:--oe)m.push(r[i].new);else l.push(V-N),me.push(0)}for(R.writeUInt16(3),R.writeUInt16(1),R.writeUInt32(12),R.writeUInt16(4),R.writeUInt16(16+8*z+2*m.length),R.writeUInt16(0),R.writeUInt16(K),R.writeUInt16(I),R.writeUInt16(v),R.writeUInt16(pe),ve=0,Z=p.length;ve<Z;ve++)i=p[ve],R.writeUInt16(i);for(R.writeUInt16(0),ee=0,G=B.length;ee<G;ee++)i=B[ee],R.writeUInt16(i);for(Oe=0,re=l.length;Oe<re;Oe++)a=l[Oe],R.writeUInt16(a);for(Te=0,he=me.length;Te<he;Te++)Y=me[Te],R.writeUInt16(Y);for(Ye=0,ce=m.length;Ye<ce;Ye++)E=m[Ye],R.writeUInt16(E);return{charMap:r,subtable:R.data,maxGlyphID:$+1}}},t}(),iP=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new R5(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=R5.encode(n,r),(s=new Ed).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),qH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),YH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),KH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=(function(){var a,l,c;for(c=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)c.push(n.readUInt32());return c}).call(this)}},e}(),ZH=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},XH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,c,d,p,v,m;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(c={},o=p=0,v=i.length;p<v;o=++p)s=i[o],n.pos=s.offset,d=n.readString(s.length),a=new ZH(d,s),c[m=s.nameID]==null&&(c[m]=[]),c[s.nameID].push(a);this.strings=c,this.copyright=c[0],this.fontFamily=c[1],this.fontSubfamily=c[2],this.uniqueSubfamily=c[3],this.fontName=c[4],this.version=c[5];try{this.postscriptName=c[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=c[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=c[7],this.manufacturer=c[8],this.designer=c[9],this.description=c[10],this.vendorUrl=c[11],this.designerUrl=c[12],this.license=c[13],this.licenseUrl=c[14],this.preferredFamily=c[15],this.preferredSubfamily=c[17],this.compatibleFull=c[18],this.sampleText=c[19]},e}(),JH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),QH=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,c;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var d,p;for(p=[],r=d=0;0<=s?d<s:d>s;r=0<=s?++d:--d)p.push(n.readInt16());return p}(),this.widths=(function(){var d,p,v,m;for(m=[],d=0,p=(v=this.metrics).length;d<p;d++)o=v[d],m.push(o.advance);return m}).call(this),i=this.widths[this.widths.length-1],c=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)c.push(this.widths.push(i));return c},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),sP=[].slice,eW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,c,d,p,v;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Ed(r.read(s))).readShort(),d=l.readShort(),v=l.readShort(),c=l.readShort(),p=l.readShort(),this.cache[n]=a===-1?new nW(l,d,v,c,p):new tW(l,a,d,v,c,p),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,c;for(a=[],o=[],l=0,c=r.length;l<c;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),tW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),nW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Ed(sP.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),rW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return rh(e,Pc),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}).call(this):(function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}).call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],c=this.offsets[a+1]-l;c>0&&(s+=c)}for(var d=new Array(4*i.length),p=0;p<i.length;++p)d[4*p+3]=255&i[p],d[4*p+2]=(65280&i[p])>>8,d[4*p+1]=(16711680&i[p])>>16,d[4*p]=(4278190080&i[p])>>24;return d},e}(),iW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,c,d,p,v,m,x,E,A,k;for(i in r=iP.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},k=r.charMap)m[(l=k[i]).old]=l.new;for(x in v=r.maxGlyphID,o)x in m||(m[x]=v++);return d=function(D){var $,Y;for($ in Y={},D)Y[D[$]]=$;return Y}(m),p=Object.keys(d).sort(function(D,$){return D-$}),E=function(){var D,$,Y;for(Y=[],D=0,$=p.length;D<$;D++)a=p[D],Y.push(d[a]);return Y}(),s=this.font.glyf.encode(o,E,m),c=this.font.loca.encode(s.offsets,E),A={cmap:this.font.cmap.raw(),glyf:s.table,loca:c,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},t}();Mr.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,c;for(c=[],a=0,l=n.length;a<l;a++)r=n[a],c.push(e.convert(r));return c}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();const sW={class:"h-full flex"},oW={class:"flex-1 relative"},aW={key:0,class:"absolute inset-0 bg-black/30 backdrop-blur-sm z-[2000] flex items-center justify-center"},lW={key:1,class:"absolute inset-0 flex items-center justify-center bg-gray-50 z-[3000]"},uW={class:"text-center max-w-lg mx-auto p-8"},cW={class:"space-y-4"},hW={class:"map-parent"},dW={key:0,class:"fixed left-0 right-0 z-[1500]",style:{top:"var(--header-height)"}},fW={class:"map-content flex flex-col md:flex-row relative"},pW={class:"flex-1 relative"},gW={key:1,class:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-75 z-50"},mW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-start justify-center z-[9999] p-4 overflow-y-auto"},vW={class:"bg-white rounded-lg p-6 max-w-2xl w-full my-8 relative"},yW={class:"flex justify-between items-center mb-4 sticky top-0 bg-white pb-4 border-b"},bW={class:"overflow-y-auto max-h-[calc(100vh-12rem)]"},_W={key:0,class:"space-y-4"},wW={key:0,class:"space-y-2"},xW={class:"grid grid-cols-1 gap-2"},LW=["onClick"],SW={class:"font-medium text-gray-900"},CW={key:1,class:"space-y-2"},EW={class:"flex items-center mb-4"},PW={class:"text-sm text-gray-600"},MW={class:"grid grid-cols-1 gap-2"},kW=["onClick"],AW={class:"font-medium text-gray-900"},TW={key:2,class:"space-y-2"},DW={class:"flex items-center mb-4"},OW={class:"text-sm text-gray-600"},NW={class:"grid grid-cols-1 gap-2"},IW={key:0,class:"text-center py-4"},BW=["onClick"],RW={class:"font-medium text-gray-900"},FW={key:3,class:"space-y-2"},jW={class:"flex items-center mb-4"},zW={class:"text-sm text-gray-600"},$W={class:"grid grid-cols-1 gap-2"},VW=["onClick"],UW={class:"font-medium text-gray-900"},HW={class:"text-sm text-gray-500"},WW={class:"text-xs text-gray-400 mt-1"},GW={key:1,class:"space-y-4"},qW={key:0,class:"space-y-2"},YW={class:"grid grid-cols-1 gap-2"},KW={key:0,class:"text-center py-8"},ZW=["onClick"],XW={class:"font-medium text-gray-900"},JW={key:1,class:"space-y-2"},QW={class:"flex items-center mb-4"},eG={class:"text-sm text-gray-600"},tG={class:"grid grid-cols-1 gap-2"},nG=["onClick"],rG={class:"font-medium text-gray-900"},iG={class:"text-sm text-gray-500"},sG={class:"text-xs text-gray-400 mt-1"},oG={key:2,class:"space-y-4"},aG={key:0,class:"py-4"},lG={key:1,class:"text-center py-8"},uG={key:2,class:"space-y-2"},cG={class:"grid grid-cols-1 gap-2"},hG=["onClick"],dG={class:"font-medium text-gray-900"},fG={class:"text-sm text-gray-500"},pG={class:"text-xs text-gray-400 mt-1"},gG={key:3,class:"space-y-4"},mG={key:0,class:"text-center py-8"},vG={key:1,class:"space-y-2"},yG=["onClick"],bG={class:"font-medium text-gray-900"},_G={class:"text-sm text-gray-500"},wG={class:"text-xs text-gray-400 mt-1"},F5=$s({__name:"MapView",emits:["shape-selected"],setup(t,{emit:e}){const n=JB(),r=Lt(null),i=Lt(!1),s=Vy(),o=Tp(),a=wf(),l=nu(),c=Lt([]),d=Lt({planId:n.query.planId?parseInt(n.query.planId):null,noteId:n.query.noteId?parseInt(n.query.noteId):null,lat:n.query.lat?parseFloat(n.query.lat):null,lng:n.query.lng?parseFloat(n.query.lng):null,tool:n.query.tool||null}),{currentTool:p,selectedShape:v,map:m,initMap:x,setDrawingTool:E,updateShapeStyle:A,updateShapeProperties:k,featureGroup:D,adjustView:$,clearActiveControlPoints:Y,calculateConnectedCoverageArea:te}=FU(),{initMap:me,changeBaseMap:pe}=jU(),I=Lt(!1),z=Lt(!1),K=Lt(!1),N=Lt(null),B=Lt(null),V=Lt(!1),R=Lt(null),j=da(),W=Lt([]),X=Lt([]),oe=Lt([]),_e=Lt(null),Ce=Lt(null),De=Lt(null),Z=Lt(!1),G=Lt(!1),re=Lt(!1),he=Lt(null),ce=Zn(()=>{var ft,rt;return console.log("[MapView][filteredClients] Computing with:",{userType:(ft=j.user)==null?void 0:ft.user_type,selectedSalarie:_e.value,salarieVisiteurs:X.value,visiteurCount:((rt=X.value)==null?void 0:rt.length)||0}),j.isSalarie||_e.value?X.value:[]}),ve=Zn(()=>{var Sn,Ut,cn;if(!v.value)return null;console.log("[MapView][selectedShape] Initial layer state:",{layer:v.value,hasName:"name"in v.value,name:v.value.name,hasProperties:"properties"in v.value,propertiesName:(Sn=v.value.properties)==null?void 0:Sn.name,allLayerKeys:Object.keys(v.value),allPropertiesKeys:v.value.properties?Object.keys(v.value.properties):[],_leaflet_id:v.value._leaflet_id,_dbId:v.value._dbId,descriptor:Object.getOwnPropertyDescriptor(v.value,"name")});const ft=v.value.properties||{};let rt="unknown";ft.type?rt=ft.type:v.value instanceof Vt.Circle?rt="Circle":v.value instanceof za||v.value instanceof Vt.Rectangle?rt="Rectangle":v.value instanceof cd||v.value instanceof Vt.Polygon?rt="Polygon":v.value instanceof Sd?rt="ElevationLine":(v.value instanceof ea||v.value instanceof Vt.Polyline&&!(v.value instanceof Vt.Polygon))&&(rt="Line"),console.log(`[MapView][selectedShape] Type de forme détecté: ${rt}`),ft.type||(v.value.properties||(v.value.properties={}),v.value.properties.type=rt);let $t;if(ft.style&&ft.style.name)$t=ft.style.name,console.log("[MapView][selectedShape] Using name from style:",$t);else if(ft.name)$t=ft.name,console.log("[MapView][selectedShape] Using name from properties:",$t);else if(v.value.name)$t=v.value.name,console.log("[MapView][selectedShape] Using name from layer:",$t);else{const lt=Object.getOwnPropertyDescriptor(v.value,"name");lt&&lt.value&&($t=lt.value,console.log("[MapView][selectedShape] Found name in non-enumerable layer property:",$t));const qt=["_name","displayName","title"];for(const Dn of qt)if(v.value[Dn]){$t=v.value[Dn],console.log(`[MapView][selectedShape] Found name in ${Dn}:`,$t);break}}$t&&(console.log(`[MapView][selectedShape] Ensuring name "${$t}" is set everywhere`),v.value.properties||(v.value.properties={}),v.value.properties.name=$t,v.value.properties.style||(v.value.properties.style={}),v.value.properties.style.name=$t,v.value.name=$t,typeof v.value.setName=="function"&&(v.value.setName($t),console.log(`[MapView][selectedShape] Used setName method to set name "${$t}"`))),v.value.properties.category||(v.value.properties.category="forages"),v.value.properties.accessLevel||(v.value.properties.accessLevel="visitor"),console.log("[MapView][selectedShape] Preparing properties for DrawingTools:",{type:rt,name:ft.name,foundName:$t,hasNameProperty:"name"in ft,allPropertiesKeys:Object.keys(ft),layerId:v.value._leaflet_id,rawProperties:ft,layerName:v.value.name,layerPropertiesName:(Ut=v.value.properties)==null?void 0:Ut.name});const Jt={...ft,type:rt,name:$t||v.value.name||ft.name||void 0,category:v.value.properties.category||"forages",accessLevel:v.value.properties.accessLevel||"visitor"},Gn={type:rt,properties:Jt,layer:v.value,options:v.value.options||{}};return console.log("[MapView][selectedShape] Final shape object for DrawingTools:",{type:Gn.type,hasName:"name"in Gn.properties,name:Gn.properties.name,layerName:Gn.layer.name,layerPropertiesName:(cn=Gn.layer.properties)==null?void 0:cn.name}),Gn});function ee(ft){const rt=ft.getCenter(),$t=ft.getZoom(),Jt={lat:rt.lat,lng:rt.lng,zoom:$t};document.cookie=`mapState=${JSON.stringify(Jt)};max-age=2592000;path=/`}function J(){const rt=document.cookie.split(";").find($t=>$t.trim().startsWith("mapState="));if(rt)try{return JSON.parse(rt.split("=")[1])}catch($t){return console.error("Erreur lors de la lecture du cookie de position:",$t),null}return null}go(async()=>{var ft,rt;console.log("[MapView][onMounted] Initialisation du composant MapView"),console.log("[MapView][onMounted] État initial des filtres dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2));try{if(await s.fetchPlans(),(j.isAdmin||j.isEntreprise)&&await Qt(),j.isEntreprise){Z.value=!0;try{const lt=await jn.get("/users/",{params:{role:"SALARIE",entreprise:(ft=j.user)==null?void 0:ft.id}});W.value=lt.data}catch(lt){console.error("Error loading salaries:",lt),W.value=[]}finally{Z.value=!1}}if(j.isSalarie){G.value=!0;try{const lt=await j.fetchSalarieVisiteurs(((rt=j.user)==null?void 0:rt.id)||0);X.value=Array.isArray(lt)?lt:[lt]}catch(lt){console.error("Error loading clients:",lt)}finally{G.value=!1}}const $t=J(),Jt=$t?[$t.lat,$t.lng]:[46.603354,1.888334],Gn=($t==null?void 0:$t.zoom)??6;if(r.value&&!m.value){const lt=x(r.value,Jt,Gn);lt.pm.setLang("fr"),lt.pm.addControls({rotateMode:!1}),me(lt),lt.on("moveend",()=>{ee(lt)}),window.addEventListener("map-set-location",qt=>{if(lt&&qt.detail){const{lat:Dn,lng:Ar,zoom:Tt}=qt.detail;lt.flyTo([Dn,Ar],Tt,{duration:1.5,easeLinearity:.25})}}),D.value&&(D.value.on("layeradd",qt=>{const Dn=qt.layer;Dn&&Dn._leaflet_id&&c.value.findIndex(Tt=>Tt.layer&&Tt.layer._leaflet_id===Dn._leaflet_id)===-1&&(console.log(`[MapView][featureGroup.layeradd] Ajout de la couche ${Dn._leaflet_id} à shapes.value`),c.value.push({layer:Dn,id:Dn._dbId||Dn._leaflet_id}))}),D.value.on("layerremove",qt=>{const Dn=qt.layer;if(Dn&&Dn._leaflet_id){const Ar=c.value.findIndex(Tt=>Tt.layer&&Tt.layer._leaflet_id===Dn._leaflet_id);Ar!==-1?(c.value.splice(Ar,1),console.log(`[MapView][featureGroup.layerremove] Couche ${Dn._leaflet_id} supprimée du featureGroup et de shapes.value`)):console.log(`[MapView][featureGroup.layerremove] Couche ${Dn._leaflet_id} supprimée du featureGroup mais introuvable dans shapes.value`)}}))}if(d.value.planId)try{console.log("[MapView][onMounted] Chargement du plan depuis les paramètres d'URL:",d.value.planId),await Q(d.value.planId);const lt=document.querySelector(".map-parent");lt instanceof HTMLElement&&(lt.style.display="block"),d.value.lat&&d.value.lng&&m.value&&(console.log("[MapView][onMounted] Centrage de la carte sur les coordonnées:",d.value.lat,d.value.lng),m.value.flyTo([d.value.lat,d.value.lng],16)),d.value.noteId&&D.value&&(console.log("[MapView][onMounted] Recherche de la note:",d.value.noteId),setTimeout(()=>{var Dn;const qt=((Dn=D.value)==null?void 0:Dn.getLayers())||[];for(const Ar of qt)if(Ar._dbId===d.value.noteId||Ar.id===d.value.noteId){console.log("[MapView][onMounted] Note trouvée:",Ar),typeof Ar.fire=="function"&&Ar.fire("click");break}},1e3)),d.value.tool&&(console.log("[MapView][onMounted] Activation de l'outil:",d.value.tool),E(d.value.tool))}catch(lt){console.error("[MapView][onMounted] Erreur chargement plan depuis URL:",lt),Sn()}else Sn();async function Sn(){const lt=localStorage.getItem("lastPlanId");if(lt)try{console.log("[MapView][loadLastPlan] Chargement du dernier plan:",lt),await Q(parseInt(lt));const qt=document.querySelector(".map-parent");qt instanceof HTMLElement&&(qt.style.display="block")}catch(qt){console.error("[MapView][loadLastPlan] Erreur chargement dernier plan:",qt),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ye(),localStorage.removeItem("lastPlanId")}else console.log("[MapView][loadLastPlan] Aucun dernier plan à charger"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ye()}window.addEventListener("shape:created",lt=>{const{shape:qt,type:Dn,properties:Ar}=lt.detail;console.log("[MapView] Nouvelle forme créée",{shape:qt,type:Dn,properties:Ar}),o.addElement(qt),E("")}),window.addEventListener("geonote:savePlan",()=>{console.log("[MapView] Événement geonote:savePlan reçu - Sauvegarde automatique du plan"),ie()}),window.addEventListener("categoriesReactivated",lt=>{console.log("[MapView][categoriesReactivated] Événement reçu:",lt.detail),Hn()}),window.addEventListener("shapeTypesReactivated",lt=>{console.log("[MapView][shapeTypesReactivated] Événement reçu:",lt.detail),Hn()});const Ut=lt=>{if(console.log("[MapView] Édition de note via Leaflet",lt),console.log("[MapView] Type de e:",typeof lt,"Contenu de e:",JSON.stringify(lt)),!lt||!lt.note){console.error("[MapView] Erreur: e.note est undefined ou null",lt);return}const qt=lt.note;console.log("[MapView] Note à éditer:",qt),B.value={id:qt.id,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},console.log("[MapView] editingMapNote.value après conversion:",B.value),K.value=!0,console.log("[MapView] showNoteEditModal.value:",K.value)},cn=lt=>{if(console.log("[MapView] Édition de note via événement global",lt),!lt.detail||!lt.detail.note){console.error("[MapView] Erreur: event.detail.note est undefined ou null",lt);return}const qt=lt.detail.note;console.log("[MapView] Note à éditer (global):",qt);const Dn=c.value.find(Tt=>Tt.layer===lt.detail.source),Ar=Dn?Dn.id:qt.id;console.log("[MapView] ID de la note pour l'API:",Ar,"Source:",lt.detail.source?"Couche Leaflet":"Autre"),B.value={id:Ar,title:qt.title||qt.name,description:qt.description,location:qt.location,columnId:qt.columnId||a.getDefaultColumn.id,accessLevel:qt.accessLevel,style:qt.style||{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:qt.createdAt||new Date().toISOString(),updatedAt:qt.updatedAt||new Date().toISOString(),comments:qt.comments||[],photos:qt.photos||[]},K.value=!0};window.addEventListener("geonote:edit",cn),D.value&&(D.value.off("note:edit"),D.value.on("note:edit",Ut))}catch($t){console.error("Error during component mount:",$t),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ye(),localStorage.removeItem("lastPlanId")}}),Ri(()=>o.hasUnsavedChanges,ft=>{console.log("[MapView][watch drawingStore.hasUnsavedChanges]",ft),ft&&N.value&&s.markUnsavedChanges()}),Ri(()=>o.filters,(ft,rt)=>{if(console.log("[MapView][watch drawingStore.filters] Changement de filtres détecté:",JSON.stringify(ft,null,2)),rt){const $t=JSON.stringify(rt.accessLevels)!==JSON.stringify(ft.accessLevels),Jt=JSON.stringify(rt.categories)!==JSON.stringify(ft.categories),Gn=JSON.stringify(rt.shapeTypes)!==JSON.stringify(ft.shapeTypes);console.log("[MapView][watch drawingStore.filters] Changements détectés:",{accessLevelsChanged:$t,categoriesChanged:Jt,shapeTypesChanged:Gn}),$t||Jt||Gn?(console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Hn()):console.log("[MapView][watch drawingStore.filters] Aucun changement réel, pas de mise à jour")}else console.log("[MapView][watch drawingStore.filters] Mise à jour de l'affichage suite au changement de filtres"),Hn()},{deep:!0});const Oe=ft=>{console.log("[MapView][filtersChanged] Événement reçu:",ft.detail),Hn()};go(()=>{window.addEventListener("filtersChanged",Oe)}),Ku(()=>{window.removeEventListener("filtersChanged",Oe),console.log("[MapView][filtersChanged] Événement désactivé")}),Ri(()=>o.getFilteredElements,(ft,rt)=>{console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage, éléments filtrés:",{nouveaux:ft.length,anciens:rt?rt.length:"aucun",ids:ft.map($t=>$t.id)}),console.log("[MapView][watch drawingStore.getFilteredElements] Mise à jour de l'affichage suite au changement d'elements filtrés"),Hn()},{deep:!0}),Ri(m,async ft=>{var rt;console.log(`
[MapView][watch map] Nouvelle carte:`,!!ft),ft&&s.currentPlan&&!((rt=D.value)!=null&&rt.getLayers().length)&&(console.log("[MapView][watch map] Chargement initial des éléments du plan:",s.currentPlan.id),Ye(),await o.loadPlanElements(s.currentPlan.id))}),Ri(()=>s.currentPlan,async(ft,rt)=>{var $t,Jt,Gn;if((ft==null?void 0:ft.id)===(rt==null?void 0:rt.id)){console.log("[MapView][watch currentPlan] Plan identique, pas de rechargement nécessaire");return}console.log(`
[MapView][watch currentPlan] ====== CHANGEMENT DE PLAN ======`),console.log("[MapView][watch currentPlan] Nouveau plan:",ft==null?void 0:ft.id);try{if(ft){console.log("[MapView][watch currentPlan] Mise à jour du plan courant..."),N.value=ft;const Sn=document.querySelector(".map-parent");Sn instanceof HTMLElement&&(Sn.style.display="block"),console.log("[MapView][watch currentPlan] Plan mis à jour avec succès")}else{console.log("[MapView][watch currentPlan] Nettoyage du plan courant..."),N.value=null,Ye();const Sn=document.querySelector(".map-parent");Sn instanceof HTMLElement&&(Sn.style.display="none")}}catch(Sn){console.error("[MapView][watch currentPlan] ERREUR:",Sn),N.value=null,Ye()}console.log("[MapView][watch currentPlan] État final:",{currentPlanId:($t=N.value)==null?void 0:$t.id,storePlanId:(Jt=s.currentPlan)==null?void 0:Jt.id,mapVisible:m.value!==null,mapParentDisplay:(Gn=document.querySelector(".map-parent"))==null?void 0:Gn.getAttribute("style")}),console.log(`[MapView][watch currentPlan] ====== FIN CHANGEMENT ======
`)},{immediate:!0}),Td(()=>{m.value&&m.value.off("moveend"),window.removeEventListener("shape:created",()=>{})});function Te(){i.value=!i.value}function Ye(){D.value&&(D.value.eachLayer(ft=>{var rt;((rt=ft.properties)==null?void 0:rt.type)==="Note"&&typeof ft.resetPlanSaveState=="function"&&ft.resetPlanSaveState()}),D.value.clearLayers()),c.value=[],Y(),v.value=null,p.value=""}async function ge(ft){return await vn.measureAsync("refreshMapWithPlan",async()=>{try{vn.measure("refreshMapWithPlan:clearMap",()=>{Ye()},"MapView"),await vn.measureAsync("refreshMapWithPlan:loadPlanElements",async()=>{await o.loadPlanElements(ft)},"MapView");const rt=vn.measure("refreshMapWithPlan:getPlanById",()=>s.getPlanById(ft),"MapView");rt?(vn.measure("refreshMapWithPlan:updateCurrentPlan",()=>{N.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),localStorage.setItem("lastPlanId",rt.id.toString())},"MapView"),await vn.measureAsync("refreshMapWithPlan:loadPlanNotes",async()=>{try{console.log("[MapView][refreshMapWithPlan] Chargement des notes géolocalisées associées au plan:",ft);const Jt=(await Sa.getNotesByPlan(ft)).data;console.log(`[MapView][refreshMapWithPlan] ${Jt.length} notes géolocalisées récupérées`);const Gn=wf();m.value&&D.value&&Jt.forEach(Sn=>{try{if(Gn.addNote({...Sn,id:Sn.id,columnId:Sn.column,accessLevel:Sn.access_level}),Sn.location&&Sn.location.type==="Point"&&Array.isArray(Sn.location.coordinates)&&Sn.location.coordinates.length===2){const Ut=kh.fromBackendData({name:Sn.title,description:Sn.description,location:Sn.location,columnId:Sn.column,accessLevel:Sn.access_level,style:Sn.style||{color:Sn.color||"#3B82F6",weight:2,opacity:1,fillColor:Sn.color||"#3B82F6",fillOpacity:.6,radius:8},category:Sn.category||"forages",comments:Sn.comments||[],photos:Sn.photos||[]});Ut._dbId=Sn.id,D.value.addLayer(Ut),c.value.push({id:Sn.id,type:"Note",layer:Ut,properties:Ut.properties}),console.log("[MapView][refreshMapWithPlan] Note géolocalisée ajoutée à la carte:",{id:Sn.id,title:Sn.title,location:Sn.location})}}catch(Ut){console.error("[MapView][refreshMapWithPlan] Erreur lors de l'ajout de la note géolocalisée:",Ut)}})}catch($t){console.error("[MapView][refreshMapWithPlan] Erreur lors du chargement des notes géolocalisées:",$t)}},"MapView"),m.value&&D.value&&await vn.measureAsync("refreshMapWithPlan:addShapesToMap",async()=>{console.log("[MapView][refreshMapWithPlan] Éléments disponibles:",{count:o.getCurrentElements.length,elements:o.getCurrentElements.map(Sn=>{var Ut;return{id:Sn.id,type:Sn.type_forme,hasName:Sn.data&&"name"in Sn.data,name:(Ut=Sn.data)==null?void 0:Ut.name}})});const $t=o.getCurrentElements.reduce((Sn,Ut)=>(Sn[Ut.type_forme]||(Sn[Ut.type_forme]=[]),Sn[Ut.type_forme].push(Ut),Sn),{}),Jt=10,Gn=Object.entries($t).map(async([Sn,Ut])=>{for(let cn=0;cn<Ut.length;cn+=Jt){const lt=Ut.slice(cn,cn+Jt);await Promise.all(lt.map(async qt=>{await vn.measureAsync(`refreshMapWithPlan:createElement:${qt.type_forme}`,async()=>{var Ar;if(!D.value||!qt.data)return;let Dn=null;switch(qt.type_forme){case"Circle":{const Tt=qt.data;Tt.center&&Tt.radius&&(Dn=new op(Vt.latLng(Tt.center[1],Tt.center[0]),{...Tt.style,radius:Tt.radius}),Tt.name&&(Dn.properties={type:"Circle",name:Tt.name,style:Tt.style,radius:Tt.radius,diameter:Tt.radius*2,surface:Math.PI*Tt.radius*Tt.radius,perimeter:2*Math.PI*Tt.radius},Dn.name=Tt.name));break}case"Rectangle":{const Tt=qt.data;if(Tt.bounds){const zn=Vt.latLngBounds(Vt.latLng(Tt.bounds.southWest[1],Tt.bounds.southWest[0]),Vt.latLng(Tt.bounds.northEast[1],Tt.bounds.northEast[0]));Dn=new za(zn,Tt.style),Tt.name&&(Dn.properties={name:Tt.name},Dn.name=Tt.name)}break}case"Polygon":{const Tt=qt.data;if(Tt.points&&Tt.points.length>0){const zn=Tt.points.map(sr=>Vt.latLng(sr[1],sr[0]));Dn=new cd(zn,Tt.style),Tt.name&&(Dn.properties={name:Tt.name},Dn.name=Tt.name)}break}case"Line":{const Tt=qt.data;if(Tt.points&&Tt.points.length>0){const zn=Tt.points.map(sr=>Vt.latLng(sr[1],sr[0]));Dn=new ea(zn,Tt.style),Tt.name&&(Dn.properties={name:Tt.name},Dn.name=Tt.name)}break}case"ElevationLine":{const Tt=qt.data;if(Tt.points&&Tt.points.length>0){const zn=Tt.points.map(sr=>Vt.latLng(sr[1],sr[0]));Dn=new Sd(zn,Tt.style),Tt.name&&(Dn.properties={name:Tt.name,type:"ElevationLine",elevationData:Tt.elevationData,minElevation:Tt.minElevation,maxElevation:Tt.maxElevation,elevationGain:Tt.elevationGain,elevationLoss:Tt.elevationLoss,averageSlope:Tt.averageSlope,maxSlope:Tt.maxSlope},Dn.name=Tt.name),Tt.elevationData&&(Dn.elevationData=Tt.elevationData)}break}case"Note":{console.log("[MapView][refreshMapWithPlan] Création d'une note:",qt.data);const Tt=qt.data;if(Tt.location&&Array.isArray(Tt.location)&&Tt.location.length===2||Tt.location&&typeof Tt.location=="object"&&Tt.location.type==="Point"&&Array.isArray(Tt.location.coordinates)&&Tt.location.coordinates.length===2)try{Tt.category||(Tt.category="forages",console.log("[MapView][refreshMapWithPlan] Catégorie par défaut ajoutée:",Tt.category)),Tt.accessLevel||(Tt.accessLevel="private",console.log("[MapView][refreshMapWithPlan] Niveau d'accès par défaut ajouté:",Tt.accessLevel));const sr=kh.fromBackendData(Tt);sr._dbId=qt.id,Dn=sr,console.log("[MapView][refreshMapWithPlan] Note créée:",{id:qt.id,location:Tt.location,name:Tt.name,category:Tt.category,accessLevel:Tt.accessLevel,type:sr.properties.type})}catch(sr){console.error("[MapView][refreshMapWithPlan] Erreur lors de la création de la Note:",sr)}else console.error("[MapView][refreshMapWithPlan] Données invalides pour Note:",Tt),console.log("[MapView][refreshMapWithPlan] Format de location attendu:",{formatArray:"[lat, lng]",formatGeoJSON:'{ type: "Point", coordinates: [lng, lat] }'});break}}Dn&&(Dn._dbId=qt.id,(Ar=D.value)==null||Ar.addLayer(Dn),c.value.push({id:qt.id,type:qt.type_forme,layer:Dn,properties:Dn.properties}))},"MapView")})),await new Promise(qt=>setTimeout(qt,0))}});await Promise.all(Gn),vn.measure("refreshMapWithPlan:adjustView",()=>{$()},"MapView")},"MapView"),console.log(`Plan ${ft} chargé avec succès avec ${o.getCurrentElements.length} formes`)):console.error(`Plan ${ft} introuvable après chargement`),z.value=!1}catch(rt){throw console.error("Erreur lors du rafraîchissement de la carte:",rt),rt}},"MapView")}async function Q(ft){return await vn.measureAsync("loadPlan",async()=>{var rt;console.log(`
[MapView][loadPlan] ====== DÉBUT CHARGEMENT PLAN ======`),console.log("[MapView][loadPlan] Tentative de chargement du plan:",ft);try{const $t=await vn.measureAsync("loadPlan:getPlanFromStore",async()=>s.getPlanById(ft),"MapView");if(console.log("[MapView][loadPlan] Plan trouvé dans le store:",!!$t),!$t){console.log("[MapView][loadPlan] Plan non trouvé dans le store, vérification API...");try{await vn.measureAsync("loadPlan:apiCheck",async()=>{await jn.get(`/plans/${ft}/`)},"MapView")}catch(Jt){throw((rt=Jt.response)==null?void 0:rt.status)===404&&(console.warn("[MapView][loadPlan] Plan non trouvé - Nettoyage du localStorage"),localStorage.removeItem("lastPlanId"),N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ye()),Jt}}console.log("[MapView][loadPlan] Rafraîchissement de la carte..."),await vn.measureAsync("loadPlan:refreshMap",async()=>{await ge(ft)},"MapView"),z.value=!1,console.log("[MapView][loadPlan] Invalidation de la taille de la carte..."),sn(),console.log("[MapView][loadPlan] Plan chargé avec succès:",{planId:ft,elementsCount:o.getCurrentElements.length})}catch($t){throw console.error("Erreur lors du chargement du plan:",$t),vn.measure("loadPlan:errorRecovery",()=>{N.value=null,s.clearCurrentPlan(),o.clearCurrentPlan(),Ye(),localStorage.removeItem("lastPlanId")},"MapView"),$t}},"MapView")}async function ie(){var ft;if(!N.value||!D.value){console.warn("Aucun plan actif ou groupe de formes à sauvegarder");return}V.value=!0,R.value="saving";try{const rt=[],$t=new Set(o.getCurrentElements.filter(Ut=>Ut.id!==void 0).map(Ut=>Ut.id)),Jt=new Set;console.log("[savePlan] Début de la sauvegarde",{featureGroupLayers:D.value.getLayers().length,existingIds:Array.from($t),currentElements:o.getCurrentElements}),D.value.eachLayer(Ut=>{var Dn,Ar,Tt,zn,sr,mi,Nr,Rr,yr,ji,_r,Fr,Cr,un,qi,Zi,Vi,pi,zr;console.log("[savePlan] Traitement de la couche",{type:(Dn=Ut.properties)==null?void 0:Dn.type,name:(Ar=Ut.properties)==null?void 0:Ar.name,isPolygon:Ut instanceof Vt.Polygon,properties:Ut.properties});let cn,lt;const qt={color:Ut.options.color||"#2b6451",weight:Ut.options.weight||3,opacity:Ut.options.opacity||1,fillColor:Ut.options.fillColor||"#2b6451",fillOpacity:Ut.options.fillOpacity||.2,dashArray:Ut.options.dashArray||""};if(Ut instanceof za){cn="Rectangle";const Jr=Ut.getBounds();lt={bounds:{southWest:[Jr.getSouthWest().lng,Jr.getSouthWest().lat],northEast:[Jr.getNorthEast().lng,Jr.getNorthEast().lat]},style:qt,name:((Tt=Ut.properties)==null?void 0:Tt.name)||"",rotation:Ut.getRotation(),width:Ut.getDimensions().width,height:Ut.getDimensions().height,center:[Ut.getCenter().lng,Ut.getCenter().lat]}}else if(Ut instanceof Vt.Circle)cn="Circle",lt={center:[Ut.getLatLng().lng,Ut.getLatLng().lat],radius:Ut.getRadius(),name:((zn=Ut.properties)==null?void 0:zn.name)||"",style:qt};else if(Ut instanceof Vt.Rectangle){cn="Rectangle";const Jr=Ut.getBounds();lt={bounds:{southWest:[Jr.getSouthWest().lng,Jr.getSouthWest().lat],northEast:[Jr.getNorthEast().lng,Jr.getNorthEast().lat]},name:((sr=Ut.properties)==null?void 0:sr.name)||"",style:qt}}else if(Ut instanceof Vt.Polyline&&!(Ut instanceof Vt.Polygon))if(((mi=Ut.properties)==null?void 0:mi.type)==="ElevationLine"){cn="ElevationLine";const Jr=Ut.getLatLngs(),gr=((Nr=Ut.properties)==null?void 0:Nr.category)||"forages",Ui=((Rr=Ut.properties)==null?void 0:Rr.accessLevel)||"visitor";console.log("[savePlan] ElevationLine - Catégorie:",gr,"Niveau d'accès:",Ui),lt={points:Jr.map(qo=>[qo.lng,qo.lat]),style:{...qt,color:((yr=Ut.properties.style)==null?void 0:yr.color)||"#FF4500",weight:((ji=Ut.properties.style)==null?void 0:ji.weight)||4,opacity:((_r=Ut.properties.style)==null?void 0:_r.opacity)||.8,_accessLevel:Ui,accessLevel:Ui},name:((Fr=Ut.properties)==null?void 0:Fr.name)||"",category:gr,accessLevel:Ui,elevationData:Ut.properties.elevationData,samplePointStyle:Ut.properties.samplePointStyle,minMaxPointStyle:Ut.properties.minMaxPointStyle,minElevation:Ut.properties.minElevation,maxElevation:Ut.properties.maxElevation,elevationGain:Ut.properties.elevationGain,elevationLoss:Ut.properties.elevationLoss,averageSlope:Ut.properties.averageSlope,maxSlope:Ut.properties.maxSlope}}else{cn="Line";const Jr=Ut.getLatLngs(),gr=((Cr=Ut.properties)==null?void 0:Cr.category)||"forages",Ui=((un=Ut.properties)==null?void 0:un.accessLevel)||"visitor";console.log("[savePlan] Line - Catégorie:",gr,"Niveau d'accès:",Ui),lt={points:Jr.map(qo=>[qo.lng,qo.lat]),name:((qi=Ut.properties)==null?void 0:qi.name)||"",category:gr,accessLevel:Ui,style:{...qt,_accessLevel:Ui,accessLevel:Ui}}}else if(Ut instanceof Vt.Polygon&&!(Ut instanceof Vt.Rectangle)){cn="Polygon";const Jr=Ut.getLatLngs()[0],gr=((Zi=Ut.properties)==null?void 0:Zi.category)||"forages",Ui=((Vi=Ut.properties)==null?void 0:Vi.accessLevel)||"visitor";console.log("[savePlan] Polygon - Catégorie:",gr,"Niveau d'accès:",Ui),lt={points:Jr.map(qo=>[qo.lng,qo.lat]),name:((pi=Ut.properties)==null?void 0:pi.name)||"",category:gr,accessLevel:Ui,style:{...qt,_accessLevel:Ui,accessLevel:Ui}}}else if(((zr=Ut.properties)==null?void 0:zr.type)==="Note"){console.log("[savePlan] Note géolocalisée détectée - ignorée pour la sauvegarde du plan");const Jr=Ut;Jr._dbId&&typeof Jr._dbId=="number"&&Jt.add(Jr._dbId),cn=void 0,lt=void 0}if(cn&&lt){let Jr=Ut._elementId;Ut._dbId&&(Jr=Ut._dbId,typeof Jr=="number"&&Jt.add(Jr)),rt.push({id:Jr,type_forme:cn,data:lt})}}),console.log("[savePlan] Éléments à sauvegarder",{totalElements:rt.length,elements:rt.map(Ut=>({type:Ut.type_forme,hasPoints:"points"in Ut.data,hasStyle:"style"in Ut.data}))});const Gn=Array.from($t).filter(Ut=>!Jt.has(Ut));console.log("[savePlan] Éléments supprimés:",{existingIds:Array.from($t),currentLayerIds:Array.from(Jt),elementsToDelete:Gn}),o.elements=rt.filter(Ut=>!Ut.id||!Gn.includes(Ut.id));const Sn=await o.saveToPlan(N.value.id,{elementsToDelete:Gn});if(Sn&&((ft=N.value)!=null&&ft.id)){const Ut=N.value.id;N.value={...N.value,...Sn},s.updatePlanDetails(Ut,Sn)}R.value="success",D.value&&D.value.eachLayer(Ut=>{var cn;((cn=Ut.properties)==null?void 0:cn.type)==="Note"&&typeof Ut.resetPlanSaveState=="function"&&Ut.resetPlanSaveState()}),setTimeout(()=>{R.value=null},3e3)}catch(rt){console.error("Erreur lors de la sauvegarde du plan:",rt),R.value=null}finally{V.value=!1}}Ku(()=>{j.user||Je(),s.clearCurrentPlan(),o.clearCurrentPlan(),D.value&&D.value.off("note:edit"),window.removeEventListener("geonote:edit",()=>{}),window.removeEventListener("categoriesReactivated",()=>{}),window.removeEventListener("shapeTypesReactivated",()=>{}),window.removeEventListener("shape:created",()=>{}),window.removeEventListener("map-set-location",()=>{})});function fe(ft){if(console.log("[MapView][updateShapeProperties] Mise à jour des propriétés:",ft),k(ft),ft.category&&v.value&&v.value._dbId){const rt=v.value._dbId,$t=o.elements.find(Jt=>Jt.id===rt);if($t){console.log(`[MapView][updateShapeProperties] Mise à jour de la catégorie dans le store: ${ft.category} pour l'élément ${rt}`);const Jt=$t;Jt.data||(Jt.data={}),Jt.data.category=ft.category,o.$patch({unsavedChanges:!0})}}}function Se(ft){try{const rt=new Date(ft);return isNaN(rt.getTime())?(console.error("Date invalide reçue:",ft),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Europe/Paris"}).format(rt)}catch(rt){return console.error("Erreur lors du formatage de la date:",rt),"Date invalide"}}const de=()=>{D.value&&$()},Xe=async()=>{var ft;if(v.value&&D.value){const rt=v.value._leaflet_id,$t=v.value._dbId;if(((ft=v.value.properties)==null?void 0:ft.type)==="Note"&&$t)try{console.log(`[MapView][deleteSelectedShape] Suppression de la note ${$t} du backend...`),await Sa.deleteNote($t),a.removeNote($t),console.log(`[MapView][deleteSelectedShape] Note ${$t} supprimée avec succès du backend et du store`),l.success("Note supprimée avec succès")}catch(Gn){console.error(`[MapView][deleteSelectedShape] Erreur lors de la suppression de la note ${$t} du backend:`,Gn),l.error("Erreur lors de la suppression de la note")}E(""),D.value.removeLayer(v.value),c.value=c.value.filter(Gn=>Gn.layer&&Gn.layer._leaflet_id!==rt),console.log(`[MapView][deleteSelectedShape] Forme ${rt} (dbId: ${$t}) supprimée du featureGroup et de shapes.value`),v.value=null}};async function $e(ft){console.log(`onPlanCreated - Tentative de chargement du plan ${ft}`),await s.fetchPlans();const rt=s.getPlanById(ft);rt?(console.log(`Plan ${ft} trouvé, chargement en cours...`),localStorage.setItem("lastPlanId",ft.toString()),N.value=rt,s.setCurrentPlan(rt),o.setCurrentPlan(rt.id),I.value=!1,sn(),console.log(`Plan ${ft} chargé avec succès`)):console.error(`Plan ${ft} introuvable après création! Vérifiez les permissions.`)}Ri(_e,async ft=>{var rt;if(ft&&((rt=j.user)==null?void 0:rt.user_type)==="admin"){G.value=!0;try{const $t=await j.fetchSalarieVisiteurs(ft.id);X.value=Array.isArray($t)?$t:[$t]}catch($t){console.error("[MapView][watch selectedSalarie] Error:",$t),X.value=[]}finally{G.value=!1}}});function Je(){localStorage.removeItem("lastPlanId")}function He(ft,rt="m"){return rt==="m²"?`${(ft/1e4).toFixed(2)} ha`:rt==="m"?ft>=1e3?`${(ft/1e3).toFixed(2)} km`:`${ft.toFixed(2)} m`:`${ft.toFixed(2)} ${rt}`}const Ge=Lt(!1);function xt(ft){return{Circle:"Cercle",Rectangle:"Rectangle",Semicircle:"Demi-cercle",Line:"Ligne",Polygon:"Polygone",TextRectangle:"Annotation",ElevationLine:"Profil altimétrique"}[ft]||ft}async function Et(){var rt,$t,Jt,Gn,Sn,Ut,cn,lt,qt,Dn;if(!N.value||!m.value||!D.value){console.error("[generateSynthesis] Plan, map ou featureGroup manquant");return}const ft=N.value;try{console.log("[generateSynthesis] Début de la génération"),console.log("[generateSynthesis] Plan courant complet:",ft),await ie();let ji=ft;if(!ft.salarie_details&&!ft.entreprise_details&&!ft.client_details){console.log("[generateSynthesis] Détails manquants, tentative de récupération...");try{const gr=await jn.get(`/plans/${ft.id}/`);gr.status===200&&(console.log("[generateSynthesis] Plan mis à jour:",gr.data),N.value={...ft,...gr.data},ji=gr.data,s.updatePlanDetails(ft.id,gr.data))}catch(gr){console.error("[generateSynthesis] Erreur lors de la récupération des détails:",gr)}}await new Promise(gr=>setTimeout(gr,1e3)),Ge.value=!0;const _r=ji.salarie_details,Fr=ji.client_details,Cr=(_r==null?void 0:_r.entreprise_details)||ji.entreprise_details;console.log("[generateSynthesis] Détails du plan utilisé:",ji),console.log("[generateSynthesis] Détails des utilisateurs:",{salarie:_r?{id:_r.id,nom:`${_r.first_name} ${_r.last_name}`,company:_r.company_name,logo:_r.logo}:null,entreprise:Cr?{id:Cr.id,nom:`${Cr.first_name} ${Cr.last_name}`,company:Cr.company_name,logo:Cr.logo}:null,client:Fr?{id:Fr.id,nom:`${Fr.first_name} ${Fr.last_name}`,company:Fr.company_name}:null}),v.value&&(Y(),v.value=null);const un=new Mr("l","mm","a4");console.log("[generateSynthesis] Chargement du logo de l'application");const qi=new Image;qi.src=e5,await new Promise(gr=>{qi.onload=()=>{console.log("[generateSynthesis] Logo application chargé"),gr()},qi.onerror=Ui=>{console.error("[generateSynthesis] Erreur chargement logo application:",Ui),gr()}}),console.log("[generateSynthesis] Tentative de chargement du logo entreprise:",Cr==null?void 0:Cr.logo);let Zi=null;Cr!=null&&Cr.logo&&(Zi=new Image,Zi.src=Cr.logo,await new Promise(gr=>{Zi?(Zi.onload=()=>{console.log("[generateSynthesis] Logo entreprise chargé avec succès"),gr()},Zi.onerror=Ui=>{console.error("[generateSynthesis] Erreur chargement logo entreprise:",Ui),gr()}):gr()})),console.log("[generateSynthesis] Tentative de chargement du logo salarie:",_r==null?void 0:_r.logo);let Vi=null;_r!=null&&_r.logo&&(Vi=new Image,Vi.src=_r.logo,await new Promise(gr=>{Vi?(Vi.onload=()=>{console.log("[generateSynthesis] Logo salarie chargé avec succès"),gr()},Vi.onerror=Ui=>{console.error("[generateSynthesis] Erreur chargement logo salarie:",Ui),gr()}):gr()})),console.log("[generateSynthesis] Ajout des logos au PDF:",{logoApplication:!0,logoEntreprise:Zi!==null,logoSalarie:Vi!==null}),Zi!==null&&un.addImage(Zi,"JPEG",148.5-40-30,20,40,40),un.addImage(qi,"JPEG",148.5-40/2,20,40,40),Vi!==null&&un.addImage(Vi,"JPEG",148.5+30,20,40,40),un.setFontSize(24),un.setTextColor(0),un.text(ft.nom||"Sans titre",297/2,100,{align:"center"});let pi=120;if(Cr&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Entreprise:",20,pi),un.setFont("helvetica","normal"),un.text(`${Cr.first_name} ${Cr.last_name}${Cr.company_name?` (${Cr.company_name})`:""}`,20,pi+6),pi+=15),_r&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Salarie:",20,pi),un.setFont("helvetica","normal"),un.text(`${_r.first_name} ${_r.last_name}${_r.company_name?` (${_r.company_name})`:""}`,20,pi+6),pi+=15),Fr&&(un.setFontSize(14),un.setFont("helvetica","bold"),un.text("Client:",20,pi),un.setFont("helvetica","normal"),un.text(`${Fr.first_name} ${Fr.last_name}${Fr.company_name?` (${Fr.company_name})`:""}`,20,pi+6),pi+=15),ft.description){un.setFont("helvetica","bold"),un.text("Description:",20,pi),un.setFont("helvetica","normal");const gr=un.splitTextToSize(ft.description,150);un.text(gr,20,pi+6),pi+=8*gr.length+10}pi=Math.min(pi,180),un.setFontSize(10),un.setTextColor(100),un.text(`Date de création: ${Se(ft.date_creation)}`,20,190),un.text(`Dernière modification: ${Se(ft.date_modification)}`,277,190,{align:"right"});const zr=[];D.value.eachLayer(gr=>zr.push(gr));const Jr=Vt.simpleMapScreenshoter({hideElementsWithSelectors:[".leaflet-control-container",".leaflet-pm-toolbar",".leaflet-grid-layer",".leaflet-grid-label"],preventDownload:!0}).addTo(m.value);await new Promise(gr=>setTimeout(gr,3e3));for(let gr=0;gr<zr.length;gr++){un.addPage(),un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.rect(0,0,297,25,"F"),un.setFontSize(10),un.setTextColor(50,50,50),un.setFont("helvetica","bold"),un.text(ft.nom||"Sans titre",20,12);let Is=297-20-(15*(1+(Zi!==null?1:0)+(Vi!==null?1:0))+5*(1+(Zi!==null?1:0)));Zi!==null&&(un.addImage(Zi,"JPEG",Is,5,15,15),Is+=20),un.addImage(qi,"JPEG",Is,5,15,15),Is+=20,Vi!==null&&un.addImage(Vi,"JPEG",Is,5,15,15),un.setDrawColor(200,200,200),un.setLineWidth(.5),un.line(0,25,297,25);const Yn=zr[gr],dn=Yn.properties;if(dn){un.setTextColor(0),un.setFontSize(14),un.setFont("helvetica","bold");const as=dn.name||xt(dn.type);let xi="";if(dn.type!=="TextRectangle"){const ls=te(zr,Yn);xi=ls>0?` (surface totale d'irrigation : ${He(ls,"m²")})`:""}const ki=`${as}${xi}`;un.text(ki,20,35)}if(dn&&dn.type==="ElevationLine")try{const as=((rt=Yn.getBounds)==null?void 0:rt.call(Yn))||(($t=Yn.getLatLng)==null?void 0:$t.call(Yn));as&&m.value.fitBounds(as instanceof Vt.LatLng?Vt.latLngBounds([as]):as,{padding:[50,50]});try{const Cn=((Jt=Yn.getBounds)==null?void 0:Jt.call(Yn))||((Gn=Yn.getLatLng)==null?void 0:Gn.call(Yn));if(!Cn||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const rn=Cn instanceof Vt.LatLng?Vt.latLngBounds([Cn]):Cn;rn&&rn.isValid&&rn.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(rn,{padding:[50,50],animate:!1})}}catch(Cn){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",Cn)}await new Promise(Cn=>setTimeout(Cn,2e3)),m.value.invalidateSize();try{m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())?m.value.invalidateSize({animate:!1}):console.warn("[generateSynthesis] Carte non valide pour l'invalidation de taille")}catch(Cn){console.warn("[generateSynthesis] Erreur lors de l'invalidation de la taille de la carte:",Cn)}await new Promise(Cn=>{const rn=()=>{var fa;const Br=(fa=m.value)==null?void 0:fa.getContainer();if(!Br){Cn();return}const ms=Br.querySelectorAll(".leaflet-tile-loaded");Br.querySelectorAll(".leaflet-tile-loading").length===0&&ms.length>0?Cn():setTimeout(rn,100)};rn()});const xi=await Jr.takeScreen("image"),ki=await new Promise((Cn,rn)=>{const Br=new Image;Br.onload=()=>Cn(Br),Br.onerror=ms=>rn(ms),Br.src=xi}),ls=40,lr=237/2,Tr=Math.min(70,ki.height*lr/ki.width);if(un.addImage(ki,"PNG",20,ls,lr,Tr),dn.elevationData&&dn.elevationData.length>0){const Cn=document.createElement("canvas");Cn.width=800,Cn.height=400;const rn=Cn.getContext("2d");if(rn){const Br=dn.elevationData,ms=dn.minElevation,us=dn.maxElevation,pa=(us-ms)*.05,ga=ms-pa,To=us+pa,Qr=40,na=Cn.width-2*Qr,Bs=Cn.height-2*Qr,zi=vi=>Qr+vi/Br[Br.length-1].distance*na,ra=vi=>Qr+Bs-(vi-ga)/(To-ga)*Bs;rn.fillStyle="#f8fafc",rn.fillRect(0,0,Cn.width,Cn.height),rn.fillStyle="#334155",rn.font="bold 20px Arial",rn.textAlign="center",rn.fillText("Profil altimétrique",Cn.width/2,25),rn.strokeStyle="#e2e8f0",rn.lineWidth=1,rn.beginPath(),rn.moveTo(Qr,Qr),rn.lineTo(Qr,Bs+Qr),rn.lineTo(na+Qr,Bs+Qr),rn.strokeStyle="#94a3b8",rn.stroke();const pl=5;for(let vi=0;vi<=pl;vi++){const Es=ga+vi/pl*(To-ga),vs=ra(Es);rn.beginPath(),rn.strokeStyle="#e2e8f0",rn.moveTo(Qr,vs),rn.lineTo(na+Qr,vs),rn.stroke(),rn.beginPath(),rn.strokeStyle="#94a3b8",rn.moveTo(Qr-5,vs),rn.lineTo(Qr,vs),rn.stroke(),rn.fillStyle="#64748b",rn.font="12px Arial",rn.textAlign="right",rn.fillText(`${Math.round(Es)}m`,Qr-8,vs+4)}const mr=5,wr=Br[Br.length-1].distance;for(let vi=0;vi<=mr;vi++){const Es=vi/mr*wr,vs=zi(Es);rn.beginPath(),rn.strokeStyle="#e2e8f0",rn.moveTo(vs,Qr),rn.lineTo(vs,Bs+Qr),rn.stroke(),rn.beginPath(),rn.strokeStyle="#94a3b8",rn.moveTo(vs,Bs+Qr),rn.lineTo(vs,Bs+Qr+5),rn.stroke(),rn.fillStyle="#64748b",rn.font="12px Arial",rn.textAlign="center",rn.fillText(`${Math.round(Es)}m`,vs,Bs+Qr+16)}const mo=rn.createLinearGradient(0,Qr,0,Bs+Qr);mo.addColorStop(0,"rgba(255, 69, 0, 0.8)"),mo.addColorStop(1,"rgba(255, 69, 0, 0.2)"),rn.beginPath(),rn.moveTo(zi(Br[0].distance),ra(Br[0].elevation)),Br.forEach((vi,Es)=>{Es>0&&rn.lineTo(zi(vi.distance),ra(vi.elevation))}),rn.strokeStyle="#FF4500",rn.lineWidth=2,rn.stroke(),rn.lineTo(zi(Br[Br.length-1].distance),ra(ga)),rn.lineTo(zi(Br[0].distance),ra(ga)),rn.closePath(),rn.fillStyle=mo,rn.fill(),Br.forEach(vi=>{rn.beginPath(),rn.arc(zi(vi.distance),ra(vi.elevation),3,0,Math.PI*2),rn.fillStyle="#FF4500",rn.fill(),rn.strokeStyle="white",rn.lineWidth=1,rn.stroke()});let Ur=0,gl=0;for(let vi=0;vi<Br.length;vi++)Br[vi].elevation===ms&&(Ur=vi),Br[vi].elevation===us&&(gl=vi);rn.beginPath(),rn.arc(zi(Br[gl].distance),ra(Br[gl].elevation),6,0,Math.PI*2),rn.fillStyle="#059669",rn.fill(),rn.strokeStyle="white",rn.lineWidth=2,rn.stroke(),rn.beginPath(),rn.arc(zi(Br[Ur].distance),ra(Br[Ur].elevation),6,0,Math.PI*2),rn.fillStyle="#DC2626",rn.fill(),rn.strokeStyle="white",rn.lineWidth=2,rn.stroke(),rn.font="12px Arial",rn.fillStyle="#059669",rn.textAlign="left",rn.fillText(`Point haut: ${He(us,"m")}`,Qr,Bs+Qr+35),rn.fillStyle="#DC2626",rn.fillText(`Point bas: ${He(ms,"m")}`,Qr+200,Bs+Qr+35);const Va=Cn.toDataURL("image/png");un.addImage(Va,"PNG",20+lr+20,ls,lr,Tr)}}const Ir=ls+Tr+15;un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.roundedRect(20,Ir,257,50,3,3,"FD"),un.setFont("helvetica","bold"),un.setFontSize(12),un.setTextColor(51,65,85),un.text("Caractéristiques",30,Ir+10);const ps=[{label:"Distance totale",value:He(dn.length||0)},{label:"Dénivelé positif",value:He(dn.elevationGain||0,"m")},{label:"Dénivelé négatif",value:He(dn.elevationLoss||0,"m")}],ci=[{label:"Pente moyenne",value:`${(dn.averageSlope||0).toFixed(1)}%`},{label:"Pente maximale",value:`${(dn.maxSlope||0).toFixed(1)}%`},{label:"Altitude min/max",value:`${He(dn.minElevation||0,"m")} / ${He(dn.maxElevation||0,"m")}`}];let Qs=Ir+20;un.setFont("helvetica","normal"),un.setFontSize(10),ps.forEach(Cn=>{un.setTextColor(100,116,139),un.text(Cn.label,30,Qs),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text(Cn.value,110,Qs),un.setFont("helvetica","normal"),Qs+=9}),Qs=Ir+20;const si=297/2;ci.forEach(Cn=>{un.setTextColor(100,116,139),un.text(Cn.label,si,Qs),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text(Cn.value,si+80,Qs),un.setFont("helvetica","normal"),Qs+=9})}catch(as){console.error("[generateSynthesis] Erreur traitement profil altimétrique:",as)}else{const as=((Sn=Yn.getBounds)==null?void 0:Sn.call(Yn))||((Ut=Yn.getLatLng)==null?void 0:Ut.call(Yn));as&&m.value.fitBounds(as instanceof Vt.LatLng?Vt.latLngBounds([as]):as,{padding:[50,50]});try{const xi=((cn=Yn.getBounds)==null?void 0:cn.call(Yn))||((lt=Yn.getLatLng)==null?void 0:lt.call(Yn));if(!xi||!m.value)console.warn("[generateSynthesis] Bounds ou carte invalide");else{const ki=xi instanceof Vt.LatLng?Vt.latLngBounds([xi]):xi;ki&&ki.isValid&&ki.isValid()&&m.value.getContainer()&&document.body.contains(m.value.getContainer())&&m.value.fitBounds(ki,{padding:[50,50],animate:!1})}}catch(xi){console.warn("[generateSynthesis] Erreur lors de l'ajustement de la vue:",xi)}await new Promise(xi=>setTimeout(xi,2e3)),m.value.invalidateSize(),await new Promise(xi=>{const ki=()=>{var Ir;const ls=(Ir=m.value)==null?void 0:Ir.getContainer();if(!ls){xi();return}const lr=ls.querySelectorAll(".leaflet-tile-loaded");ls.querySelectorAll(".leaflet-tile-loading").length===0&&lr.length>0?xi():setTimeout(ki,100)};ki()});try{const xi=await Jr.takeScreen("image"),ki=await new Promise((Ir,ps)=>{const ci=new Image;ci.onload=()=>Ir(ci),ci.onerror=Qs=>ps(Qs),ci.src=xi}),ls=45,lr=297*.6-30;let Tr=ki.height*lr/ki.width;if(Tr>210*.9&&(Tr=210*.9),un.addImage(ki,"PNG",20,ls,lr,Tr),dn){let Ir=function(rn,Br,ms,us,fa){un.setTextColor(100,116,139),un.setFont("helvetica","normal"),un.text(rn,ms+10,us),un.setTextColor(15,23,42),un.setFont("helvetica","bold"),un.text(Br,ms+fa-10,us,{align:"right"})},ci=0;if(dn.type==="Circle")ci=4;else if(dn.type==="Rectangle")ci=4;else if(dn.type==="Line")ci=1,(qt=dn.dimensions)!=null&&qt.width&&ci++,dn.surfaceInfluence&&ci++;else if(dn.type==="Semicircle")ci=6;else if(dn.type==="Polygon")ci=2;else if(dn.type==="CircleWithSections"&&(ci=3,dn.sections&&dn.sections.length>0)){const rn=Math.ceil(dn.sections.length/3);ci+=rn*3}const Qs=Math.max(15+ci*12+30,60),si=297-188.2-20;un.setFillColor(248,250,252),un.setDrawColor(226,232,240),un.roundedRect(188.2,ls,si,Qs,3,3,"FD"),un.setFont("helvetica","bold"),un.setFontSize(12),un.setTextColor(51,65,85),un.text("Caractéristiques",188.2+10,ls+15);let Cn=ls+30;un.setFontSize(10),dn.type==="Circle"?(Ir("Rayon",He(dn.radius),188.2,Cn,si),Cn+=12,Ir("Diamètre",He(dn.radius*2),188.2,Cn,si),Cn+=12,Ir("Surface",He(dn.surface,"m²"),188.2,Cn,si),Cn+=12,Ir("Périmètre",He(dn.perimeter),188.2,Cn,si)):dn.type==="Rectangle"?(Ir("Largeur",He(dn.width),188.2,Cn,si),Cn+=12,Ir("Hauteur",He(dn.height),188.2,Cn,si),Cn+=12,Ir("Surface",He(dn.surface,"m²"),188.2,Cn,si),Cn+=12,Ir("Périmètre",He(dn.perimeter),188.2,Cn,si)):dn.type==="Line"?(Ir("Longueur",He(dn.length),188.2,Cn,si),Cn+=12,(Dn=dn.dimensions)!=null&&Dn.width&&(Ir("Largeur d'influence",He(dn.dimensions.width),188.2,Cn,si),Cn+=12),dn.surfaceInfluence&&Ir("Surface d'influence",He(dn.surfaceInfluence,"m²"),188.2,Cn,si)):dn.type==="Semicircle"?(Ir("Rayon",He(dn.radius),188.2,Cn,si),Cn+=12,Ir("Diamètre",He(dn.radius*2),188.2,Cn,si),Cn+=12,Ir("Surface",He(dn.surface,"m²"),188.2,Cn,si),Cn+=12,Ir("Périmètre",He(dn.perimeter),188.2,Cn,si),Cn+=12,Ir("Longueur d'arc",He(dn.arcLength),188.2,Cn,si),Cn+=12,Ir("Angle d'ouverture",`${dn.openingAngle.toFixed(1)}°`,188.2,Cn,si)):dn.type==="Polygon"?(Ir("Surface",He(dn.surface,"m²"),188.2,Cn,si),Cn+=12,Ir("Périmètre",He(dn.perimeter),188.2,Cn,si)):dn.type==="CircleWithSections"&&(Ir("Rayon",He(dn.radius),188.2,Cn,si),Cn+=12,Ir("Surface totale",He(dn.surface,"m²"),188.2,Cn,si),Cn+=12,Ir("Périmètre",He(dn.perimeter),188.2,Cn,si),Cn+=20,dn.sections&&dn.sections.length>0&&(Cn=Vs(dn.sections,un,188.2,Cn,si)))}}catch(xi){console.error(`[generateSynthesis] Erreur capture forme ${gr+1}:`,xi)}}}m.value.removeControl(Jr),un.save(`synthese_${ft.nom}.pdf`)}catch(Ar){console.error("[generateSynthesis] Erreur:",Ar),alert("Une erreur est survenue lors de la génération de la synthèse. Veuillez réessayer.")}finally{Ge.value=!1}}const Kt=IE.debounce(()=>{const ft=vn.startMeasure("invalidateMapSize","MapView");if(!m.value){ft();return}la(()=>{vn.measure("invalidateMapSize:nextTick",()=>{var rt;try{if(m.value&&m.value.getContainer()&&document.body.contains(m.value.getContainer())){if(m.value.invalidateSize({animate:!1}),(rt=D.value)!=null&&rt.getLayers().length)try{$()}catch($t){console.warn("[invalidateMapSize] Erreur lors de l'ajustement de la vue:",$t)}}else console.warn("[invalidateMapSize] Carte non valide pour l'invalidation")}catch($t){console.warn("[invalidateMapSize] Erreur lors de l'invalidation de la taille de la carte:",$t)}ft()},"MapView")})},250);function sn(){Kt()}Ri(N,(ft,rt)=>{ft&&ft.id!==(rt==null?void 0:rt.id)&&la(()=>{sn()})});const an=Lt(null),Qe=Lt(!1),at=Lt([]),it=Zn(()=>{if(console.log("[MapView][filteredSalaries] Computing with:",{selectedEntreprise:an.value,salaries:W.value,salariesLength:W.value.length}),!an.value)return[];const ft=W.value.filter(rt=>{var Gn,Sn,Ut;const $t=rt.entreprise,Jt=typeof $t=="object"&&$t!==null?$t.id:$t;return console.log("[MapView][filteredSalaries] Checking salarie:",{salarie:rt,salarieEntreprise:$t,salarieEntrepriseId:Jt,selectedEntrepriseId:(Gn=an.value)==null?void 0:Gn.id,matches:Jt===((Sn=an.value)==null?void 0:Sn.id)}),Jt===((Ut=an.value)==null?void 0:Ut.id)});return console.log("[MapView][filteredSalaries] Filtered result:",ft),ft});function Bt(ft){if(!ft)return"";const rt=ft.first_name||"",$t=ft.last_name?ft.last_name.toUpperCase():"",Jt=ft.company_name||ft.role||"";return`${rt} ${$t} (${Jt})`}async function Qt(){Qe.value=!0;try{const ft=await jn.get("/users/",{params:{role:"ENTREPRISE"}});at.value=ft.data}catch(ft){console.error("[MapView] Error loading entreprises:",ft),at.value=[]}finally{Qe.value=!1}}async function Tn(ft){console.log("[MapView][selectEntreprise] Sélection de l'entreprise:",ft),an.value=ft,Z.value=!0;try{console.log("[MapView][selectEntreprise] Envoi de la requête avec params:",{role:"SALARIE",entreprise:ft.id});const rt=await jn.get("/users/",{params:{role:"SALARIE",entreprise:ft.id}});console.log("[MapView][selectEntreprise] Réponse reçue:",rt.data),W.value=rt.data,console.log("[MapView][selectEntreprise] Salaries mis à jour:",W.value)}catch(rt){console.error("[MapView] Error loading salaries for entreprise:",rt),W.value=[]}finally{Z.value=!1}}function xn(){an.value=null,_e.value=null,De.value=null,W.value=[],X.value=[],oe.value=[]}function An(){_e.value=null,De.value=null,X.value=[],oe.value=[]}function Kn(){De.value=null,oe.value=[]}async function en(ft){var rt,$t,Jt,Gn,Sn,Ut;console.log(`
[MapView][selectSalarie] ====== DÉBUT SÉLECTION SALARIE ======`),console.log("Informations du salarie:",{id:ft.id,username:ft.username,company:ft.company_name,role:ft.role}),console.log("Contexte utilisateur:",{userType:(rt=j.user)==null?void 0:rt.user_type,userId:($t=j.user)==null?void 0:$t.id,userRole:(Jt=j.user)==null?void 0:Jt.role,selectedEntrepriseId:(Gn=an.value)==null?void 0:Gn.id}),_e.value=ft,G.value=!0;try{const cn={role:"VISITEUR",salarie:ft.id};j.isEntreprise?(console.log("Ajout de l'ID de l'entreprise connectée:",(Sn=j.user)==null?void 0:Sn.id),cn.entreprise=(Ut=j.user)==null?void 0:Ut.id):an.value&&(console.log("Ajout de l'ID de l'entreprise sélectionnée:",an.value.id),cn.entreprise=an.value.id),console.log("Paramètres de la requête:",cn);const lt=await jn.get("/users/",{params:cn});console.log("Réponse reçue du serveur:",{status:lt.status,dataLength:Array.isArray(lt.data)?lt.data.length:"non-array",data:lt.data}),Array.isArray(lt.data)?(X.value=lt.data,console.log(`${lt.data.length} visiteurs chargés`),lt.data.forEach((qt,Dn)=>{console.log(`Visiteur ${Dn+1}:`,{id:qt.id,username:qt.username,company:qt.company_name,salarie:qt.salarie})})):(console.warn("Format de réponse inattendu:",lt.data),X.value=[]),X.value.length===0&&console.warn("Aucun visiteur trouvé pour ce salarie")}catch(cn){if(console.error("ERREUR lors du chargement des visiteurs:",cn),cn&&typeof cn=="object"&&"response"in cn){const lt=cn;console.error("Détails de l'erreur:",{status:lt.response.status,data:lt.response.data})}X.value=[]}finally{G.value=!1,console.log(`[MapView][selectSalarie] ====== FIN SÉLECTION SALARIE ======
`)}}function Ln(){K.value=!1,B.value=null}function Mn(ft){console.log("[MapView][handleFilterChange] Nouveaux filtres reçus:",JSON.stringify(ft,null,2)),console.log("[MapView][handleFilterChange] Filtres actuels dans le store:",JSON.stringify({accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}},null,2)),console.log("[MapView][handleFilterChange] Mise à jour des filtres dans le store"),o.updateFilters(ft),console.log("[MapView][handleFilterChange] Éléments dans le store:",{count:o.elements.length,ids:o.elements.map(rt=>rt.id)}),console.log("[MapView][handleFilterChange] Mise à jour de l'affichage de la carte"),Hn(),setTimeout(()=>{console.log("[MapView][handleFilterChange] Mise à jour forcée de l'affichage"),Hn()},100),console.log("[MapView][handleFilterChange] Traitement des filtres terminé")}function Hn(){if(!D.value)return;const ft={accessLevels:{...o.filters.accessLevels},categories:{...o.filters.categories},shapeTypes:{...o.filters.shapeTypes}};console.log("[MapView][updateMapDisplay] Mise à jour de l'affichage avec filtres:",JSON.stringify(ft,null,2));const rt={count:o.elements.length,elements:o.elements.map(Tt=>({id:Tt.id,type_forme:Tt.type_forme}))};console.log("[MapView][updateMapDisplay] Éléments dans le store:",JSON.stringify(rt,null,2));const $t=o.getFilteredElements;console.log("[MapView][updateMapDisplay] Éléments filtrés:",{total:o.elements.length,filtered:$t.length,filteredIds:$t.map(Tt=>Tt.id)});const Jt=D.value.getLayers();console.log("[MapView][updateMapDisplay] Couches actuelles:",Jt.length);const Gn=Jt.map(Tt=>({_leaflet_id:Tt._leaflet_id,_dbId:Tt._dbId,hasProperties:!!Tt.properties,propertyType:Tt.properties?Tt.properties.type:null,category:Tt.properties?Tt.properties.category:null}));console.log("[MapView][updateMapDisplay] Détails des couches:",JSON.stringify(Gn,null,2)),console.log("[MapView][updateMapDisplay] État des filtres pour les catégories:",{forages:o.filters.categories.forages,clients:o.filters.categories.clients,entrepots:o.filters.categories.entrepots,livraisons:o.filters.categories.livraisons,cultures:o.filters.categories.cultures,parcelles:o.filters.categories.parcelles});const Sn=new Map;c.value.forEach(Tt=>{Tt.layer&&Tt.id&&Sn.set(Tt.id,Tt.layer)});const Ut=new Map;Jt.forEach(Tt=>{Tt._dbId&&Ut.set(Tt,Tt._dbId)});const cn=new Set($t.map(Tt=>Tt.id));console.log("[MapView][updateMapDisplay] Début du traitement des couches");const lt=Array.from(cn);console.log("[MapView][updateMapDisplay] IDs des éléments filtrés:",JSON.stringify(lt));let qt=0,Dn=0,Ar=0;Jt.forEach(Tt=>{var Zi,Vi;const zn=Tt._dbId,sr=Tt._leaflet_id;if(!zn){if(!Tt.properties){Ar++,console.log(`[MapView][updateMapDisplay] Couche ${sr} sans dbId et sans propriétés, ignorée`);return}Tt._dbId=Date.now()+Math.floor(Math.random()*1e3),console.log(`[MapView][updateMapDisplay] Couche ${sr} sans dbId, ID temporaire assigné: ${Tt._dbId}`)}const mi=Tt.properties||{},Nr=mi.type||Tt.type_forme||"";let Rr=mi.category;if(Tt._dbId){const pi=o.elements.find(zr=>zr.id===Tt._dbId);if(pi){const zr=pi.data;zr&&zr.category&&(Rr!==zr.category&&(console.log(`[MapView][updateMapDisplay] Catégorie différente détectée - Propriétés: ${Rr}, Store: ${zr.category} pour la couche ${Tt._dbId}`),Rr=zr.category),Tt.properties||(Tt.properties={}),Tt.properties.category=Rr)}}Rr||(Rr="default");const yr=mi.accessLevel||"visitor";console.log(`[MapView][updateMapDisplay] Couche ${sr} (dbId: ${Tt._dbId}): type=${Nr}, category=${Rr}, accessLevel=${yr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify(o.filters));let ji=!1;Nr?ji=Nr in o.filters.shapeTypes&&o.filters.shapeTypes[Nr]===!0:ji=o.filters.shapeTypes.Polygon===!0;let _r=!1;Rr?Rr in o.filters.categories?(_r=o.filters.categories[Rr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${Rr}: ${_r}`)):(_r=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${Rr} non trouvée dans les filtres, utilisation de 'forages': ${_r}`)):(_r=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie non spécifiée, utilisation de 'forages': ${_r}`));let Fr=!1;const Cr={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let un="visitor";Cr.company?un="company":Cr.employee?un="employee":Cr.visitor&&(un="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur: ${un}`),un==="company"?Fr=!0:un==="employee"?Fr=yr==="employee"||yr==="visitor":un==="visitor"&&(Fr=yr==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche: ${yr}, visible: ${Fr}`);const qi=ji&&_r&&Fr;console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${sr}: typeVisible=${ji}, categoryVisible=${_r}, accessLevelVisible=${Fr}, isVisible=${qi}`),console.log(`[MapView][updateMapDisplay] Détails de la couche ${sr}: type=${Nr}, category=${Rr}, accessLevel=${yr}`),console.log("[MapView][updateMapDisplay] Filtres actuels:",JSON.stringify({accessLevels:o.filters.accessLevels,categories:o.filters.categories,shapeTypes:o.filters.shapeTypes},null,2)),qi?D.value.hasLayer(Tt)?(qt++,console.log(`[MapView][updateMapDisplay] Couche ${Tt._dbId} (${Nr}) déjà visible avec catégorie ${((Vi=Tt.properties)==null?void 0:Vi.category)||"non définie"}`)):(Rr&&Rr!=="default"&&(!Tt.properties||!Tt.properties.category)&&(Tt.properties||(Tt.properties={}),Tt.properties.category=Rr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant ajout: ${Rr} pour la couche ${Tt._dbId}`)),D.value.addLayer(Tt),qt++,console.log(`[MapView][updateMapDisplay] Affichage de la couche ${Tt._dbId} (${Nr}) avec catégorie ${((Zi=Tt.properties)==null?void 0:Zi.category)||"non définie"}`)):D.value.hasLayer(Tt)?(D.value.removeLayer(Tt),Dn++,console.log(`[MapView][updateMapDisplay] Masquage de la couche ${Tt._dbId} (${Nr}) - Filtres non respectés`)):(Dn++,console.log(`[MapView][updateMapDisplay] Couche ${Tt._dbId} (${Nr}) déjà masquée`))}),console.log("[MapView][updateMapDisplay] Début de la restauration des couches filtrées"),console.log("[MapView][updateMapDisplay] Nombre de formes dans shapes.value:",c.value.length),c.value.forEach(Tt=>{var Vi;if(!Tt.layer){console.log("[MapView][updateMapDisplay] Forme sans couche, ignorée");return}const zn=Tt.layer,sr=zn._leaflet_id,mi=zn._dbId;if(console.log(`[MapView][updateMapDisplay] Traitement de la forme ${sr} (dbId: ${mi})`),D.value.hasLayer(zn)){console.log(`[MapView][updateMapDisplay] La couche ${sr} est déjà dans le featureGroup, ignorée`);return}const Nr=zn.properties||{},Rr=Nr.type||zn.type_forme||"";let yr=null;if(zn._dbId){const pi=o.elements.find(zr=>zr.id===zn._dbId);if(pi){const zr=pi.data;zr&&zr.category&&(yr=zr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis le store: ${yr} pour la couche ${zn._dbId}`))}}!yr&&Nr.category&&(yr=Nr.category,console.log(`[MapView][updateMapDisplay] Catégorie récupérée depuis les propriétés: ${yr} pour la couche ${sr}`)),yr||(yr="default");const ji=Nr.accessLevel||"visitor";if(zn.properties||(zn.properties={}),yr&&yr!=="default"&&(zn.properties.category=yr,console.log(`[MapView][updateMapDisplay] Catégorie définie/restaurée: ${yr} pour la couche ${zn._dbId}`),zn._dbId)){const pi=o.elements.find(zr=>zr.id===zn._dbId);if(pi){const zr=pi;zr.data||(zr.data={}),zr.data.category!==yr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store: ${yr} pour l'élément ${zn._dbId}`),zr.data.category=yr,o.$patch({unsavedChanges:!0}))}}zn.properties.accessLevel||(zn.properties.accessLevel="visitor"),console.log(`[MapView][updateMapDisplay] Propriétés de la couche ${sr}: type=${Rr}, category=${yr}, accessLevel=${ji}`);let _r=!1;Rr?_r=Rr in o.filters.shapeTypes&&o.filters.shapeTypes[Rr]===!0:_r=o.filters.shapeTypes.Polygon===!0;let Fr=!1;yr?yr in o.filters.categories?(Fr=o.filters.categories[yr]===!0,console.log(`[MapView][updateMapDisplay] Vérification de la catégorie ${yr}: ${Fr}`)):(Fr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Catégorie ${yr} non trouvée, utilisation de 'forages': ${Fr}`)):(Fr=o.filters.categories.forages===!0,console.log(`[MapView][updateMapDisplay] Pas de catégorie, utilisation de 'forages': ${Fr}`));let Cr=!1;const un={company:o.filters.accessLevels.company===!0,employee:o.filters.accessLevels.employee===!0,visitor:o.filters.accessLevels.visitor===!0};let qi="visitor";un.company?qi="company":un.employee?qi="employee":un.visitor&&(qi="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès sélectionné par l'utilisateur (2ème étape): ${qi}`),qi==="company"?Cr=!0:qi==="employee"?Cr=ji==="employee"||ji==="visitor":qi==="visitor"&&(Cr=ji==="visitor"),console.log(`[MapView][updateMapDisplay] Niveau d'accès de la couche (2ème étape): ${ji}, visible: ${Cr}`);const Zi=_r&&Fr&&Cr;if(console.log(`[MapView][updateMapDisplay] Visibilité de la couche ${sr}: typeVisible=${_r}, categoryVisible=${Fr}, accessLevelVisible=${Cr}, isVisible=${Zi}`),Zi){if(yr&&yr!=="default"&&(zn.properties||(zn.properties={}),zn.properties.category=yr,console.log(`[MapView][updateMapDisplay] Catégorie définie avant restauration: ${yr} pour la couche ${sr}`),zn._dbId)){const pi=o.elements.find(zr=>zr.id===zn._dbId);if(pi){const zr=pi;zr.data||(zr.data={}),zr.data.category!==yr&&(console.log(`[MapView][updateMapDisplay] Mise à jour de la catégorie dans le store avant restauration: ${yr} pour l'élément ${zn._dbId}`),zr.data.category=yr,o.$patch({unsavedChanges:!0}))}}D.value.addLayer(zn),qt++,console.log(`[MapView][updateMapDisplay] Restauration de la couche ${sr} (${Rr}) avec catégorie ${((Vi=zn.properties)==null?void 0:Vi.category)||"non définie"} - Filtres respectés`)}else console.log(`[MapView][updateMapDisplay] La couche ${sr} (${Rr}) reste masquée - Filtres non respectés`)}),console.log(`[MapView][updateMapDisplay] Restauration terminée: ${qt} couches visibles au total`),console.log(`[MapView][updateMapDisplay] Statistiques: ${qt} couches visibles, ${Dn} couches masquées, ${Ar} couches sans dbId`),console.log("[MapView][updateMapDisplay] Mise à jour terminée")}function hr(ft){if(D.value){const $t=D.value.getLayers().find(Jt=>Jt._leaflet_id===ft.id);$t&&($t.properties.name=ft.title,$t.properties.description=ft.description,$t.properties.columnId=ft.columnId,$t.properties.accessLevel=ft.accessLevel,$t.properties.category||($t.properties.category="forages"),$t.setNoteStyle({color:ft.style.color,fillColor:ft.style.fillColor,weight:ft.style.weight,fillOpacity:ft.style.fillOpacity,radius:ft.style.radius}),$t.closePopup(),$t.unbindPopup(),$t.bindPopup($t.createPopupContent()),console.log("[handleNoteSave] Note mise à jour:",{name:$t.properties.name,category:$t.properties.category,accessLevel:$t.properties.accessLevel,columnId:$t.properties.columnId}),a.notes.find(Gn=>Gn.id===ft.id)?(a.updateNote(ft.id,{title:ft.title,description:ft.description,columnId:ft.columnId,accessLevel:ft.accessLevel,style:ft.style,updatedAt:new Date().toISOString()}),console.log("[handleNoteSave] Note mise à jour dans le store avec columnId:",ft.columnId)):(a.addNote({title:ft.title,description:ft.description,location:[ft.location[0],ft.location[1]],columnId:ft.columnId||"1",style:ft.style,accessLevel:ft.accessLevel}),console.log("[handleNoteSave] Note ajoutée au store avec columnId:",ft.columnId||"1")))}l.success("Note enregistrée avec succès")}async function vr(ft){var rt;De.value=ft,re.value=!0;try{const $t={visiteur:ft.id};j.isEntreprise?$t.entreprise=(rt=j.user)==null?void 0:rt.id:an.value&&($t.entreprise=an.value.id),_e.value&&($t.salarie=_e.value.id);const Jt=await jn.get("/plans/",{params:$t});oe.value=Jt.data}catch($t){console.error("[MapView] Error loading client plans:",$t),oe.value=[]}finally{re.value=!1}}async function ir(){var rt;console.log("[MapView][loadPlansWithoutVisiteur] Chargement des plans sans visiteur");const ft={id:-1,username:"sans_visiteur",first_name:"Sans",last_name:"Visiteur",company_name:"",role:"VISITEUR",display_name:"Plans sans visiteur"};De.value=ft,re.value=!0;try{const $t={visiteur_null:!0};j.isEntreprise?$t.entreprise=(rt=j.user)==null?void 0:rt.id:an.value&&($t.entreprise=an.value.id),_e.value&&($t.salarie=_e.value.id),console.log("[MapView][loadPlansWithoutVisiteur] Paramètres de requête:",$t);const Jt=await jn.get("/plans/",{params:$t});console.log("[MapView][loadPlansWithoutVisiteur] Plans reçus:",Jt.data),oe.value=Jt.data}catch($t){console.error("[MapView] Error loading plans without visiteur:",$t),oe.value=[]}finally{re.value=!1}}async function Vr(){if(j.isEntreprise){re.value=!0;try{await s.fetchPlans()}catch(ft){console.error("[MapView] Erreur lors du chargement des plans:",ft)}finally{re.value=!1}}z.value=!0}function Vs(ft,rt,$t,Jt,Gn){if(!ft||ft.length===0)return Jt;const Sn=[...ft].sort((zn,sr)=>(sr.surface||0)-(zn.surface||0)),Ut=Gn,cn=7,lt=6,qt=2,Dn=[{header:"Nom",width:.3,align:"left"},{header:"Surface",width:.2,align:"right"},{header:"Angles",width:.25,align:"right"},{header:"Rayon",width:.15,align:"right"},{header:"Type",width:.1,align:"center"}],Ar=cn+lt*Sn.length;rt.setFillColor(248,250,252),rt.setDrawColor(226,232,240),rt.roundedRect($t,Jt,Ut,Ar+qt*2,2,2,"FD"),rt.setFillColor(241,245,249),rt.rect($t+qt,Jt+qt,Ut-qt*2,cn,"F"),rt.setFont("helvetica","bold"),rt.setFontSize(7),rt.setTextColor(51,65,85);let Tt=$t+qt;return Dn.forEach(zn=>{const sr=zn.width*(Ut-qt*2);zn.align==="right"?rt.text(zn.header,Tt+sr-qt,Jt+qt+5,{align:"right"}):zn.align==="center"?rt.text(zn.header,Tt+sr/2,Jt+qt+5,{align:"center"}):rt.text(zn.header,Tt+qt/2,Jt+qt+5),Tt+=sr}),rt.setFont("helvetica","normal"),rt.setFontSize(6.5),rt.setTextColor(71,85,105),Sn.forEach((zn,sr)=>{const mi=Jt+cn+qt+sr*lt;sr%2===0&&(rt.setFillColor(250,252,254),rt.rect($t+qt,mi,Ut-qt*2,lt,"F"));let Nr=$t+qt;const Rr=zn.name||`Section ${sr+1}`;rt.text(Rr,Nr+qt/2,mi+4),Nr+=Dn[0].width*(Ut-qt*2);const yr=He(zn.surface||0,"m²");rt.text(yr,Nr+Dn[1].width*(Ut-qt*2)-qt,mi+4,{align:"right"}),Nr+=Dn[1].width*(Ut-qt*2);const ji=zn.startAngle===0&&zn.endAngle===360?"Complet":`${zn.startAngle}°-${zn.endAngle}°`;rt.text(ji,Nr+Dn[2].width*(Ut-qt*2)-qt,mi+4,{align:"right"}),Nr+=Dn[2].width*(Ut-qt*2);const _r=He(zn.radius||0);rt.text(_r,Nr+Dn[3].width*(Ut-qt*2)-qt,mi+4,{align:"right"}),Nr+=Dn[3].width*(Ut-qt*2);const Fr=zn.startAngle===0&&zn.endAngle===360?"C":"P";rt.text(Fr,Nr+Dn[4].width*(Ut-qt*2)/2,mi+4,{align:"center"})}),rt.setDrawColor(226,232,240),rt.setLineWidth(.05),rt.line($t+qt,Jt+cn+qt,$t+Ut-qt,Jt+cn+qt),Jt+Ar+qt*2}return(ft,rt)=>{var $t,Jt,Gn,Sn,Ut,cn;return Be(),ze(En,null,[C("div",sW,[C("div",oW,[Ge.value?(Be(),ze("div",aW,rt[7]||(rt[7]=[Dl('<div class="bg-white/90 rounded-2xl p-8 max-w-md shadow-2xl border border-gray-100"><div class="flex flex-col items-center"><div class="relative w-24 h-24 mb-6"><div class="absolute inset-0 border-4 border-primary-200 rounded-full"></div><div class="absolute inset-0 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"></div><div class="absolute inset-2 border-2 border-primary-400/30 rounded-full animate-pulse"></div><div class="absolute inset-0 flex items-center justify-center"><svg class="w-8 h-8 text-primary-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div></div><h3 class="text-xl font-semibold text-gray-900 mb-2"> Génération de la synthèse </h3><div class="space-y-2 text-center"><p class="text-primary-600 font-medium"> Capture des formes en cours... </p><p class="text-sm text-gray-500"> Nous optimisons la qualité de vos captures pour un rendu parfait </p></div></div></div>',1)]))):nn("",!0),N.value?nn("",!0):(Be(),ze("div",lW,[C("div",uW,[rt[10]||(rt[10]=Dl('<div class="relative w-48 h-48 mx-auto mb-12 rounded-full bg-gradient-to-br from-primary-100 to-primary-50 p-8 shadow-lg ring-4 ring-white"><img src="'+e5+'" alt="TagMap Logo" class="w-full h-full object-contain filter drop-shadow-md"><div class="absolute inset-0 rounded-full bg-gradient-to-t from-transparent to-white/10 pointer-events-none"></div></div><h1 class="text-3xl font-bold text-gray-900 mb-4">Bienvenue sur TagMap</h1><p class="text-gray-600 mb-8">Pour commencer à dessiner, vous devez d&#39;abord créer un nouveau plan ou charger un plan existant.</p>',3)),C("div",cW,[C("button",{onClick:rt[0]||(rt[0]=lt=>I.value=!0),class:"w-full flex items-center justify-center px-4 py-3 bg-primary-600 text-white rounded-lg hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[8]||(rt[8]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),li(" Créer un nouveau plan ")])),C("button",{onClick:Vr,class:"w-full flex items-center justify-center px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-colors duration-200"},rt[9]||(rt[9]=[C("svg",{class:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),li(" Charger un plan existant ")]))])])])),kn(C("div",hW,[N.value&&!Ge.value?(Be(),ze("div",dW,[fi(DV,{"last-save":($t=N.value)!=null&&$t.date_modification?new Date(N.value.date_modification):void 0,"plan-name":(Jt=N.value)==null?void 0:Jt.nom,"plan-description":(Gn=N.value)==null?void 0:Gn.description,"save-status":R.value,onChangeMapType:Xn(pe),onCreateNewPlan:rt[1]||(rt[1]=lt=>I.value=!0),onLoadPlan:Vr,onSavePlan:ie,onAdjustView:de,onGenerateSummary:Et},null,8,["last-save","plan-name","plan-description","save-status","onChangeMapType"])])):nn("",!0),C("div",fW,[i.value&&N.value&&!Ge.value?(Be(),ze("div",{key:0,onClick:Te,class:"md:hidden fixed inset-0 bg-black/30 z-[1800] transition-opacity duration-300"})):nn("",!0),N.value&&!Ge.value?(Be(),ze("div",{key:1,class:"md:hidden fixed left-0 right-0 z-[1900] bg-white py-3 px-3 shadow-lg border-t border-gray-200 flex items-center justify-between cursor-pointer",style:{height:"var(--mobile-bottom-toolbar-height)",bottom:"0"},onClick:Te},rt[11]||(rt[11]=[Dl('<div class="flex items-center w-full justify-center"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7"></path></svg><span class="text-sm text-gray-500 font-medium">Outils de dessin</span></div></div>',1)]))):nn("",!0),C("div",pW,[C("div",{ref_key:"mapContainer",ref:r,class:"absolute inset-0 z-[1000]"},null,512)]),N.value&&!Ge.value?(Be(),ze("div",{key:2,class:Fi([i.value?"translate-y-0":"translate-y-full md:translate-y-0","w-full md:w-64 bg-white border-t md:border-t-0 border-gray-200 flex-shrink-0 z-[2000] transition-transform duration-300 ease-out","fixed md:relative bottom-0 md:bottom-auto right-0 md:top-0 h-[80%] md:h-auto rounded-t-xl md:rounded-none shadow-lg md:shadow-none"]),style:{bottom:"var(--mobile-bottom-toolbar-height)"}},[C("div",{class:"md:hidden w-full flex justify-between items-center px-4 py-2 border-b border-gray-200 cursor-pointer",onClick:Te},rt[12]||(rt[12]=[Dl('<div class="flex items-center"><div class="w-10 h-1.5 bg-gray-300 rounded-full mr-3"></div></div><button class="p-1.5 rounded-full bg-gray-100 hover:bg-gray-200 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>',2)])),fi(X$,{"current-tool":Xn(p),"selected-shape":ve.value,"all-layers":((Sn=Xn(D))==null?void 0:Sn.getLayers())||[],onToolChange:Xn(E),onStyleUpdate:Xn(A),onPropertiesUpdate:fe,onDeleteShape:Xe,onFilterChange:Mn,onCloseDrawer:rt[2]||(rt[2]=lt=>i.value=!1)},null,8,["current-tool","selected-shape","all-layers","onToolChange","onStyleUpdate"])],2)):nn("",!0)]),Ge.value?(Be(),ze("div",gW,rt[13]||(rt[13]=[Dl('<div class="text-center"><div class="mb-4"><svg class="animate-spin h-10 w-10 mx-auto text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div><p class="text-lg font-medium text-gray-900">Génération de la synthèse en cours...</p><p class="text-sm text-gray-500 mt-2">Veuillez patienter pendant que nous analysons votre plan.</p></div>',1)]))):nn("",!0)],512),[[Ay,N.value]]),(Be(),Ol(j2,{to:"body"},[fi(FE,{ref_key:"newPlanModalRef",ref:he,modelValue:I.value,"onUpdate:modelValue":rt[3]||(rt[3]=lt=>I.value=lt),onCreated:$e,onSalarieSelected:rt[4]||(rt[4]=lt=>_e.value=lt),onVisiteurSelected:rt[5]||(rt[5]=lt=>Ce.value=lt)},null,8,["modelValue"])])),(Be(),Ol(j2,{to:"body"},[z.value?(Be(),ze("div",mW,[C("div",vW,[C("div",yW,[rt[15]||(rt[15]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Charger un plan existant",-1)),C("button",{onClick:rt[6]||(rt[6]=lt=>z.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},rt[14]||(rt[14]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",bW,[Xn(j).isAdmin?(Be(),ze("div",_W,[an.value?_e.value?De.value?(Be(),ze("div",FW,[C("div",jW,[C("button",{onClick:Kn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[31]||(rt[31]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),li(" Retour à la liste des clients ")])),rt[32]||(rt[32]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",zW,Dt(Bt(De.value)),1)]),rt[34]||(rt[34]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",$W,[re.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[33]||(rt[33]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Be(!0),ze(En,{key:1},fr(oe.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>Q(lt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",UW,Dt(lt.nom),1),C("div",HW,Dt(lt.description),1),C("div",WW," Modifié le "+Dt(Se(lt.date_modification)),1)],8,VW))),128))])])):(Be(),ze("div",TW,[C("div",DW,[C("button",{onClick:An,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[24]||(rt[24]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),li(" Retour à la liste des salaries ")])),rt[25]||(rt[25]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",OW,Dt(Bt(_e.value)),1)]),rt[30]||(rt[30]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",NW,[C("button",{onClick:ir,class:"flex items-center p-3 text-left bg-primary-50 hover:bg-primary-100 rounded-lg border border-primary-200 transition-colors duration-200"},rt[26]||(rt[26]=[C("div",null,[C("div",{class:"font-medium text-primary-700"},"Plans sans visiteur"),C("div",{class:"text-xs text-primary-600"},"Afficher les plans créés sans visiteur associé")],-1),C("svg",{class:"w-5 h-5 ml-auto text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])),G.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[27]||(rt[27]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Be(),ze(En,{key:1},[ce.value.length===0?(Be(),ze("div",IW,rt[28]||(rt[28]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"},` Vous pouvez utiliser l'option "Plans sans visiteur" ci-dessus `,-1)]))):(Be(!0),ze(En,{key:1},fr(ce.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>vr(lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",RW,Dt(Bt(lt)),1)]),rt[29]||(rt[29]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,BW))),128))],64))])])):(Be(),ze("div",CW,[C("div",EW,[C("button",{onClick:xn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[19]||(rt[19]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),li(" Retour à la liste des entreprises ")])),rt[20]||(rt[20]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",PW,Dt(Bt(an.value)),1)]),rt[23]||(rt[23]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un salarie",-1)),C("div",MW,[Z.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[21]||(rt[21]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Be(!0),ze(En,{key:1},fr(it.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>en(lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",AW,Dt(Bt(lt)),1)]),rt[22]||(rt[22]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,kW))),128))])])):(Be(),ze("div",wW,[rt[18]||(rt[18]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez une entreprise",-1)),C("div",xW,[Qe.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[16]||(rt[16]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Be(!0),ze(En,{key:1},fr(at.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>Tn(lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",SW,Dt(Bt(lt)),1)]),rt[17]||(rt[17]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,LW))),128))])]))])):Xn(j).isSalarie?(Be(),ze("div",GW,[De.value?(Be(),ze("div",JW,[C("div",QW,[C("button",{onClick:Kn,class:"flex items-center text-sm text-gray-600 hover:text-gray-900"},rt[39]||(rt[39]=[C("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),li(" Retour à la liste des clients ")])),rt[40]||(rt[40]=C("span",{class:"mx-2 text-gray-400"},"|",-1)),C("span",eG,Dt(Bt(De.value)),1)]),rt[42]||(rt[42]=C("h3",{class:"font-medium text-gray-700"},"Plans disponibles",-1)),C("div",tG,[re.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[41]||(rt[41]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-2/3 mb-2"}),C("div",{class:"h-3 bg-gray-50 rounded w-1/3"})],-1)]))),64)):(Be(!0),ze(En,{key:1},fr(oe.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>Q(lt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",rG,Dt(lt.nom),1),C("div",iG,Dt(lt.description),1),C("div",sG," Modifié le "+Dt(Se(lt.date_modification)),1)],8,nG))),128))])])):(Be(),ze("div",qW,[rt[38]||(rt[38]=C("h3",{class:"font-medium text-gray-700"},"Sélectionnez un visiteur",-1)),C("div",YW,[G.value?(Be(),ze(En,{key:0},fr(3,lt=>C("div",{key:lt,class:"animate-pulse"},rt[35]||(rt[35]=[C("div",{class:"p-3 bg-white rounded-lg border border-gray-200"},[C("div",{class:"h-5 bg-gray-200 rounded w-3/4 mb-2"}),C("div",{class:"h-4 bg-gray-100 rounded w-1/2"})],-1)]))),64)):(Be(),ze(En,{key:1},[ce.value.length===0?(Be(),ze("div",KW,rt[36]||(rt[36]=[C("div",{class:"text-gray-500 mb-2"},"Aucun visiteur trouvé pour ce salarie",-1),C("div",{class:"text-sm text-gray-400"}," Veuillez vérifier que des visiteurs ont été assignés à ce salarie ",-1)]))):(Be(!0),ze(En,{key:1},fr(ce.value,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>vr(lt),class:"flex items-center p-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",null,[C("div",XW,Dt(Bt(lt)),1)]),rt[37]||(rt[37]=C("svg",{class:"w-5 h-5 ml-auto text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1))],8,ZW))),128))],64))])]))])):Xn(j).isEntreprise?(Be(),ze("div",oG,[re.value?(Be(),ze("div",aG,rt[43]||(rt[43]=[C("div",{class:"flex justify-center"},[C("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"})],-1),C("p",{class:"text-center text-sm text-gray-500 mt-2"},"Chargement des plans...",-1)]))):Xn(s).plans.length===0?(Be(),ze("div",lG,rt[44]||(rt[44]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Be(),ze("div",uG,[rt[45]||(rt[45]=C("h3",{class:"font-medium text-gray-700"},"Vos plans",-1)),C("div",cG,[(Be(!0),ze(En,null,fr(Xn(s).plans,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>Q(lt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",dG,Dt(lt.nom),1),C("div",fG,Dt(lt.description),1),C("div",pG," Modifié le "+Dt(Se(lt.date_modification)),1)],8,hG))),128))])]))])):(Be(),ze("div",gG,[Xn(s).plans.length===0?(Be(),ze("div",mG,rt[46]||(rt[46]=[C("p",{class:"text-gray-500"},"Aucun plan disponible",-1)]))):(Be(),ze("div",vG,[(Be(!0),ze(En,null,fr(Xn(s).plans,lt=>(Be(),ze("button",{key:lt.id,onClick:qt=>Q(lt.id),class:"w-full px-4 py-3 text-left bg-white hover:bg-gray-50 rounded-lg border border-gray-200 transition-colors duration-200"},[C("div",bG,Dt(lt.nom),1),C("div",_G,Dt(lt.description),1),C("div",wG," Modifié le "+Dt(Se(lt.date_modification)),1)],8,yG))),128))]))]))])])])):nn("",!0)]))])]),K.value?(Be(),Ol(BE,{key:0,note:B.value,"is-new-note":!((Ut=B.value)!=null&&Ut.id),location:(cn=B.value)==null?void 0:cn.location,onClose:Ln,onSave:hr},null,8,["note","is-new-note","location"])):nn("",!0)],64)}}}),xG={class:"fixed inset-0 z-[3001] overflow-y-auto"},LG={class:"flex items-center justify-center min-h-screen w-full p-0"},SG={class:"relative bg-white w-full h-full max-h-full overflow-y-auto md:rounded-lg md:max-w-4xl md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},CG={class:"p-4 md:p-6"},EG={class:"flex justify-between items-center mb-4 border-b pb-4"},PG={class:"text-xl font-semibold text-gray-900",id:"modal-headline"},MG={class:"mt-4"},kG={key:0,class:"mb-4 rounded-md bg-red-50 p-4"},AG={class:"flex"},TG={class:"ml-3"},DG={class:"text-sm font-medium text-red-800"},OG={key:0},NG={key:1},IG=["value"],BG={key:2},RG={key:3},FG=["value"],jG={class:"grid grid-cols-1 gap-y-6 gap-x-4 sm:grid-cols-2"},zG={key:0,class:"mt-2 text-sm text-red-600"},$G={key:0,class:"mt-2 text-sm text-red-600"},VG={key:4},UG={class:"flex items-center"},HG={key:5,class:"border-t pt-4 mt-4"},WG={class:"mb-4"},GG={class:"mb-4"},qG={key:6},YG={key:7},KG={key:0,class:"mt-2 text-sm text-red-600"},ZG={class:"flex justify-end space-x-3"},XG=["disabled"],JG={key:0,class:"mr-2"},QG=$s({__name:"UserFormModal",props:{user:{type:Object,default:()=>({})},salaries:{type:Array,default:()=>[]},entreprises:{type:Array,default:()=>[]},isAdmin:{type:Boolean,default:!1},isEntreprise:{type:Boolean,default:!1},currentSalarie:{type:String,default:void 0},currentEntreprise:{type:String,default:void 0},apiErrors:{type:Array,default:()=>[]},refreshKey:{type:Number,default:0}},emits:["close","save","refresh"],setup(t,{emit:e}){const n=t,r=e,i=Lt(!1),s=Lt(""),o=Lt(""),a=Lt(""),l=Lt(""),c=Lt(""),d=ru({id:void 0,first_name:"",last_name:"",username:"",email:"",password:"",company_name:"",role:n.isEntreprise?"SALARIE":n.isAdmin?"ADMIN":"VISITEUR",salarie:null,entreprise:null,is_active:!0,storage_quota:50,storage_used:0,ecowitt_api_key:"",ecowitt_application_key:""});go(()=>{var v;(v=n.user)!=null&&v.id?(d.id=n.user.id,d.first_name=n.user.first_name||"",d.last_name=n.user.last_name||"",d.username=n.user.username||"",d.email=n.user.email||"",d.company_name=n.user.company_name||"",d.role=n.user.role||"VISITEUR",d.is_active=n.user.is_active??!0,d.ecowitt_api_key=n.user.ecowitt_api_key||"",d.ecowitt_application_key=n.user.ecowitt_application_key||"",d.storage_quota=n.user.storage_quota||50,d.storage_used=n.user.storage_used||0,n.user.salarie?typeof n.user.salarie=="object"?d.salarie=n.user.salarie.id:d.salarie=n.user.salarie:n.user.salarie_id?d.salarie=n.user.salarie_id:n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.user.entreprise?typeof n.user.entreprise=="object"?d.entreprise=n.user.entreprise.id:d.entreprise=n.user.entreprise:n.user.entreprise_id?d.entreprise=n.user.entreprise_id:n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise))):(n.currentSalarie&&(d.salarie=parseInt(n.currentSalarie)),n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)),n.isEntreprise?d.role="SALARIE":n.isAdmin||(d.role="VISITEUR"))}),dm(()=>{d.role==="ADMIN"||d.role==="ENTREPRISE"?(d.salarie=null,d.entreprise=null):d.role==="SALARIE"&&(d.salarie=null,n.isEntreprise&&n.currentEntreprise&&(d.entreprise=parseInt(n.currentEntreprise)))}),dm(()=>{s.value="",o.value="",a.value="",l.value="",n.apiErrors&&n.apiErrors.length>0&&n.apiErrors.forEach(v=>{switch(v.field){case"email":s.value=v.message;break;case"username":o.value=v.message;break;case"password":a.value=v.message;break;case"non_field_error":default:l.value=v.message;break}})});async function p(){s.value="",o.value="",a.value="",l.value="";let v=!0;if(d.id||(d.password!==c.value?(a.value="Les mots de passe ne correspondent pas",v=!1):d.password.length<8&&(a.value="Le mot de passe doit contenir au moins 8 caractères",v=!1)),!!v){i.value=!0;try{const m={...d};d.id&&delete m.password,n.isEntreprise&&["SALARIE","VISITEUR"].includes(d.role)&&(m.entreprise_id=n.currentEntreprise?parseInt(n.currentEntreprise):void 0),m.salarie&&(m.salarie_id=m.salarie,delete m.salarie),n.currentSalarie&&d.role==="VISITEUR"&&(m.salarie_id=parseInt(n.currentSalarie)),await r("save",m),r("refresh")}catch(m){console.error("Erreur locale:",m)}finally{i.value=!1}}}return(v,m)=>(Be(),ze("div",xG,[C("div",LG,[m[42]||(m[42]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",SG,[C("div",null,[C("div",CG,[C("div",EG,[C("h3",PG,Dt(t.user?"Modifier l'utilisateur":"Nouvel utilisateur"),1),C("button",{type:"button",onClick:m[0]||(m[0]=x=>v.$emit("close")),class:"text-gray-400 hover:text-gray-500"},m[16]||(m[16]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("div",MG,[l.value?(Be(),ze("div",kG,[C("div",AG,[m[17]||(m[17]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",TG,[C("h3",DG,Dt(l.value),1)])])])):nn("",!0),C("form",{onSubmit:Bh(p,["prevent"]),class:"space-y-6"},[t.isAdmin?(Be(),ze("div",OG,[m[19]||(m[19]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(C("select",{id:"role","onUpdate:modelValue":m[1]||(m[1]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[18]||(m[18]=[C("option",{value:"ADMIN"},"Administrateur",-1),C("option",{value:"ENTREPRISE"},"Entreprise",-1),C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[rs,d.role]])])):nn("",!0),t.isAdmin&&d.role==="SALARIE"?(Be(),ze("div",NG,[m[21]||(m[21]=C("label",{for:"entreprise",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(C("select",{id:"entreprise","onUpdate:modelValue":m[2]||(m[2]=x=>d.entreprise=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},[m[20]||(m[20]=C("option",{value:null},"-- Sélectionner une entreprise --",-1)),(Be(!0),ze(En,null,fr(t.entreprises,x=>(Be(),ze("option",{key:x.id,value:x.id},Dt(x.first_name)+" "+Dt(x.last_name)+" ("+Dt(x.company_name||"Entreprise")+") ",9,IG))),128))],512),[[rs,d.entreprise]])])):nn("",!0),t.isEntreprise&&!d.id?(Be(),ze("div",BG,[m[23]||(m[23]=C("label",{for:"role",class:"block text-sm font-medium text-gray-700"},"Type d'utilisateur",-1)),kn(C("select",{id:"role","onUpdate:modelValue":m[3]||(m[3]=x=>d.role=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},m[22]||(m[22]=[C("option",{value:"SALARIE"},"Salarie",-1),C("option",{value:"VISITEUR"},"Visiteur",-1)]),512),[[rs,d.role]])])):nn("",!0),(t.isAdmin||t.isEntreprise)&&d.role==="VISITEUR"&&!t.currentSalarie?(Be(),ze("div",RG,[m[25]||(m[25]=C("label",{for:"salarie",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(C("select",{id:"salarie","onUpdate:modelValue":m[4]||(m[4]=x=>d.salarie=x),class:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:""},[m[24]||(m[24]=C("option",{value:null},"-- Sélectionner un salarie --",-1)),(Be(!0),ze(En,null,fr(t.salaries,x=>(Be(),ze("option",{key:x.id,value:x.id},Dt(x.first_name)+" "+Dt(x.last_name)+" ("+Dt(x.company_name||"Salarie")+") ",9,FG))),128))],512),[[rs,d.salarie]])])):nn("",!0),C("div",jG,[C("div",null,[m[26]||(m[26]=C("label",{for:"first_name",class:"block text-sm font-medium text-gray-700"},"Prénom",-1)),kn(C("input",{type:"text",id:"first_name","onUpdate:modelValue":m[5]||(m[5]=x=>d.first_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.first_name]])]),C("div",null,[m[27]||(m[27]=C("label",{for:"last_name",class:"block text-sm font-medium text-gray-700"},"Nom",-1)),kn(C("input",{type:"text",id:"last_name","onUpdate:modelValue":m[6]||(m[6]=x=>d.last_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.last_name]])])]),C("div",null,[m[28]||(m[28]=C("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),kn(C("input",{type:"email",id:"email","onUpdate:modelValue":m[7]||(m[7]=x=>d.email=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.email]]),s.value?(Be(),ze("div",zG,Dt(s.value),1)):nn("",!0)]),C("div",null,[m[29]||(m[29]=C("label",{for:"username",class:"block text-sm font-medium text-gray-700"},"Nom d'utilisateur",-1)),kn(C("input",{type:"text",id:"username","onUpdate:modelValue":m[8]||(m[8]=x=>d.username=x),required:"",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.username]]),o.value?(Be(),ze("div",$G,Dt(o.value),1)):nn("",!0)]),C("div",null,[m[30]||(m[30]=C("label",{for:"company_name",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(C("input",{type:"text",id:"company_name","onUpdate:modelValue":m[9]||(m[9]=x=>d.company_name=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.company_name]])]),d.role==="ENTREPRISE"||d.role==="SALARIE"?(Be(),ze("div",VG,[m[32]||(m[32]=C("label",{for:"storage_quota",class:"block text-sm font-medium text-gray-700"},"Quota de stockage (MB)",-1)),C("div",UG,[kn(C("input",{type:"number",id:"storage_quota","onUpdate:modelValue":m[10]||(m[10]=x=>d.storage_quota=x),min:"1",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.storage_quota]]),m[31]||(m[31]=C("span",{class:"ml-2 text-sm text-gray-500"},"MB",-1))]),m[33]||(m[33]=C("p",{class:"mt-1 text-sm text-gray-500"},"Espace de stockage maximum pour les photos des notes",-1))])):nn("",!0),d.role==="ENTREPRISE"?(Be(),ze("div",HG,[m[38]||(m[38]=C("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Configuration API",-1)),C("div",WG,[m[34]||(m[34]=C("label",{for:"ecowitt_api_key",class:"block text-sm font-medium text-gray-700"},"Clé API Ecowitt",-1)),kn(C("input",{type:"text",id:"ecowitt_api_key","onUpdate:modelValue":m[11]||(m[11]=x=>d.ecowitt_api_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé API Ecowitt"},null,512),[[jr,d.ecowitt_api_key]]),m[35]||(m[35]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé API pour accéder aux services météo Ecowitt",-1))]),C("div",GG,[m[36]||(m[36]=C("label",{for:"ecowitt_application_key",class:"block text-sm font-medium text-gray-700"},"Clé d'application Ecowitt",-1)),kn(C("input",{type:"text",id:"ecowitt_application_key","onUpdate:modelValue":m[12]||(m[12]=x=>d.ecowitt_application_key=x),class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md",placeholder:"Entrez la clé d'application Ecowitt"},null,512),[[jr,d.ecowitt_application_key]]),m[37]||(m[37]=C("p",{class:"mt-1 text-sm text-gray-500"},"Clé d'application pour accéder aux services météo Ecowitt",-1))])])):nn("",!0),d.id?nn("",!0):(Be(),ze("div",qG,[m[39]||(m[39]=C("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Mot de passe",-1)),kn(C("input",{type:"password",id:"password","onUpdate:modelValue":m[13]||(m[13]=x=>d.password=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,d.password]])])),d.id?nn("",!0):(Be(),ze("div",YG,[m[40]||(m[40]=C("label",{for:"password_confirm",class:"block text-sm font-medium text-gray-700"},"Confirmer le mot de passe",-1)),kn(C("input",{type:"password",id:"password_confirm","onUpdate:modelValue":m[14]||(m[14]=x=>c.value=x),required:"",autocomplete:"new-password",class:"mt-1 focus:ring-primary-500 focus:border-primary-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"},null,512),[[jr,c.value]]),a.value?(Be(),ze("div",KG,Dt(a.value),1)):nn("",!0)])),C("div",ZG,[C("button",{type:"button",onClick:m[15]||(m[15]=x=>v.$emit("close")),class:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"}," Annuler "),C("button",{type:"submit",disabled:i.value,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[i.value?(Be(),ze("span",JG,m[41]||(m[41]=[C("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):nn("",!0),li(" "+Dt(d.id?"Enregistrer":"Créer"),1)],8,XG)])],32)])])])])])]))}}),eq={class:"fixed inset-0 z-[3001] overflow-y-auto"},tq={class:"flex items-center justify-center min-h-screen w-full"},nq={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":"modal-headline"},rq={class:"p-4 md:p-6"},iq={class:"flex items-start"},sq={class:"ml-4 flex-1"},oq={class:"text-lg leading-6 font-medium text-gray-900",id:"modal-headline"},aq={class:"mt-2"},lq={class:"text-sm text-gray-500"},uq={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3"},oP=$s({__name:"ConfirmationModal",props:{title:{type:String,required:!0},message:{type:String,required:!0}},emits:["confirm","cancel"],setup(t){return(e,n)=>(Be(),ze("div",eq,[C("div",tq,[n[3]||(n[3]=C("div",{class:"fixed inset-0 transition-opacity","aria-hidden":"true"},[C("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})],-1)),C("div",nq,[C("div",rq,[C("div",iq,[n[2]||(n[2]=C("div",{class:"flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[C("svg",{class:"h-6 w-6 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),C("div",sq,[C("h3",oq,Dt(t.title),1),C("div",aq,[C("p",lq,Dt(t.message),1)])])]),C("div",uq,[C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:n[0]||(n[0]=r=>e.$emit("confirm"))}," Confirmer "),C("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm",onClick:n[1]||(n[1]=r=>e.$emit("cancel"))}," Annuler ")])])])])]))}}),cq={class:"h-full bg-gray-50"},hq={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dq={class:"flex justify-between items-center mb-8"},fq={class:"text-3xl font-extrabold text-gray-900"},pq={key:0},gq={key:1},mq={key:2},vq={key:0},yq={key:1},bq={key:2},_q={class:"bg-white shadow rounded-lg mb-6 p-4"},wq={class:"space-y-4"},xq={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Lq={key:0},Sq={key:0,value:"ADMIN"},Cq={key:1,value:"ENTREPRISE"},Eq={key:1},Pq=["value"],Mq={key:2},kq=["value"],Aq={class:"w-full"},Tq={class:"bg-white shadow rounded-lg"},Dq={class:"overflow-x-auto"},Oq={class:"min-w-full divide-y divide-gray-200"},Nq={class:"bg-gray-50"},Iq={key:0,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Bq={key:1,scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},Rq={class:"bg-white divide-y divide-gray-200"},Fq={key:0,class:"animate-pulse"},jq={key:1},zq={class:"px-6 py-4 whitespace-nowrap"},$q={class:"flex items-center"},Vq={class:"flex-shrink-0 h-10 w-10"},Uq={class:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center"},Hq={class:"text-primary-600 font-medium"},Wq={class:"ml-4"},Gq={class:"text-sm font-medium text-gray-900"},qq={class:"text-sm text-gray-500"},Yq={class:"px-6 py-4 whitespace-nowrap"},Kq={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Zq={key:0,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Xq={key:1,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Jq={class:"px-6 py-4 whitespace-nowrap"},Qq={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},eY=["onClick"],tY=["onClick"],nY={key:0,class:"fixed inset-0 z-[3001] overflow-y-auto"},rY=$s({__name:"UserListView",setup(t){const e=da(),n=nu(),r=Lt([]),i=Lt([]),s=Lt([]),o=Lt(!1),a=Lt(!1),l=Lt(null),c=Lt(null),d=Lt(!0),p=Lt([]),v=ru({role:"",search:"",salarie:"",entreprise:""}),m=Zn(()=>e.isAdmin),x=Zn(()=>e.isEntreprise),E=Zn(()=>e.isSalarie),A=Zn(()=>m.value?r.value.filter(R=>R.role==="SALARIE"):x.value?r.value.filter(R=>{var j,W;return R.role==="SALARIE"&&((j=R.entreprise)==null?void 0:j.id)===((W=e.user)==null?void 0:W.id)}):[]),k=Zn(()=>{let R=r.value;if(x.value&&(R=R.filter(j=>{var W,X,oe,_e,Ce;return j.role==="SALARIE"?((W=j.entreprise)==null?void 0:W.id)===((X=e.user)==null?void 0:X.id):j.role==="VISITEUR"?((_e=(oe=j.salarie)==null?void 0:oe.entreprise)==null?void 0:_e.id)===((Ce=e.user)==null?void 0:Ce.id):!1})),E.value&&(R=R.filter(j=>{var W,X;return j.role==="VISITEUR"&&(j.salarie_id===((W=e.user)==null?void 0:W.id)||j.salarie&&j.salarie.id===((X=e.user)==null?void 0:X.id))})),(m.value||x.value)&&(v.role&&(R=R.filter(j=>j.role===v.role)),v.salarie&&(R=R.filter(j=>{var X;const W=((X=j.salarie)==null?void 0:X.id)||j.salarie_id;return(W==null?void 0:W.toString())===v.salarie.toString()})),v.entreprise&&m.value&&(R=R.filter(j=>{var W,X,oe,_e,Ce;return j.role==="SALARIE"?((X=(W=j.entreprise)==null?void 0:W.id)==null?void 0:X.toString())===v.entreprise.toString():j.role==="VISITEUR"?((Ce=(_e=(oe=j.salarie)==null?void 0:oe.entreprise)==null?void 0:_e.id)==null?void 0:Ce.toString())===v.entreprise.toString():!1}))),v.search){const j=v.search.toLowerCase();R=R.filter(W=>{var X,oe,_e,Ce;return((X=W.username)==null?void 0:X.toLowerCase().includes(j))||((oe=W.email)==null?void 0:oe.toLowerCase().includes(j))||((_e=W.first_name)==null?void 0:_e.toLowerCase().includes(j))||((Ce=W.last_name)==null?void 0:Ce.toLowerCase().includes(j))||W.company_name&&W.company_name.toLowerCase().includes(j)})}return R});go(async()=>{await D(),await $()});async function D(){var R,j,W;d.value=!0;try{if(m.value)r.value=await e.fetchUsers();else if(x.value){const[X,oe]=await Promise.all([nv({role:"SALARIE",entrepriseId:(R=e.user)==null?void 0:R.id}),nv({role:"VISITEUR",entrepriseId:(j=e.user)==null?void 0:j.id})]);r.value=[...X,...oe]}else E.value&&(r.value=await nv({role:"VISITEUR",salarieId:(W=e.user)==null?void 0:W.id,includeDetails:!0}),console.log("Visiteurs récupérés:",r.value))}catch(X){console.error("Erreur lors de la récupération des utilisateurs:",X),n.error("Erreur lors de la récupération des utilisateurs")}finally{d.value=!1}}async function $(){try{m.value?await Promise.all([Y(),me()]):x.value&&await te()}catch(R){console.error("Erreur lors de la récupération des dépendances:",R)}}async function Y(){var R;try{m.value?i.value=await e.fetchUsersByRole({role:"SALARIE"}):x.value&&(i.value=await e.fetchEntrepriseSalaries((R=e.user)==null?void 0:R.id))}catch(j){console.error("Erreur lors de la récupération des salaries:",j)}}async function te(){var R,j;if(!(!x.value||!((R=e.user)!=null&&R.id)))try{i.value=await e.fetchEntrepriseSalaries((j=e.user)==null?void 0:j.id)}catch(W){console.error("Erreur lors de la récupération des salaries de l'entreprise:",W)}}async function me(){try{s.value=await e.fetchEnterprises()}catch(R){console.error("Erreur lors de la récupération des entreprises:",R)}}function pe(){l.value=null,o.value=!0}function I(R){l.value={...R},o.value=!0}function z(){o.value=!1,l.value=null,p.value=[]}async function K(R){var W,X,oe,_e,Ce,De;p.value=[];const j=!!R.id;try{const Z={...R};m.value?(Z.entreprise&&typeof Z.entreprise=="object"?Z.entreprise_id=Z.entreprise.id:typeof Z.entreprise=="number"&&(Z.entreprise_id=Z.entreprise),Z.salarie&&typeof Z.salarie=="object"?Z.salarie_id=Z.salarie.id:typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie)):x.value?(Z.entreprise_id=(W=e.user)==null?void 0:W.id,Z.role==="VISITEUR"&&(Z.salarie&&typeof Z.salarie=="object"?Z.salarie_id=Z.salarie.id:typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie))):E.value&&(Z.role="VISITEUR",Z.salarie_id=(X=e.user)==null?void 0:X.id),Z.role==="SALARIE"?((oe=Z.entreprise)!=null&&oe.id?(Z.entreprise_id=Z.entreprise.id,delete Z.entreprise):typeof Z.entreprise=="number"&&(Z.entreprise_id=Z.entreprise,delete Z.entreprise),delete Z.salarie):Z.role==="VISITEUR"&&((_e=Z.salarie)!=null&&_e.id?(Z.salarie_id=Z.salarie.id,delete Z.salarie):typeof Z.salarie=="number"&&(Z.salarie_id=Z.salarie,delete Z.salarie),delete Z.entreprise,delete Z.entreprise_id),j?(await e.updateUser(R.id,Z),n.success("Utilisateur modifié avec succès")):(await e.createUser(Z),n.success("Utilisateur créé avec succès")),await Promise.all([D(),$()]),z()}catch(Z){console.error("Error saving user:",((Ce=Z.response)==null?void 0:Ce.data)||Z),p.value=U7(Z),n.error("Erreur lors de la sauvegarde de l'utilisateur");const G=((De=Z.response)==null?void 0:De.data)||{};let re="";throw typeof G=="object"&&(re=Object.entries(G).map(([he,ce])=>Array.isArray(ce)?`${he}: ${ce[0]}`:`${he}: ${ce}`).filter(he=>he).join(`
`)),re||(re="Une erreur est survenue lors de la sauvegarde"),new Error(re)}}function N(R){c.value=R,a.value=!0}async function B(){if(c.value)try{await e.deleteUser(c.value.id),n.success("Utilisateur supprimé avec succès"),await Promise.all([D(),$()]),a.value=!1,c.value=null}catch(R){throw console.error("Erreur lors de la suppression de l'utilisateur:",R),n.error("Erreur lors de la suppression de l'utilisateur"),R}}function V(R){var j,W,X,oe,_e,Ce,De,Z;return m.value?!0:x.value?R.role==="SALARIE"?((j=R.entreprise)==null?void 0:j.id)===((W=e.user)==null?void 0:W.id):R.role==="VISITEUR"?((oe=(X=R.salarie)==null?void 0:X.entreprise)==null?void 0:oe.id)===((_e=e.user)==null?void 0:_e.id):!1:E.value?R.role==="VISITEUR"&&(R.salarie_id===((Ce=e.user)==null?void 0:Ce.id)||((De=R.salarie)==null?void 0:De.id)===((Z=e.user)==null?void 0:Z.id)):!1}return(R,j)=>{var W,X,oe,_e;return Be(),ze("div",cq,[C("div",hq,[C("div",dq,[C("h1",fq,[m.value?(Be(),ze("span",pq,"Gestion des utilisateurs")):x.value?(Be(),ze("span",gq,"Gestion des salaries et visiteurs")):E.value?(Be(),ze("span",mq,"Gestion des visiteurs")):nn("",!0)]),C("button",{onClick:pe,class:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500"},[j[5]||(j[5]=C("svg",{class:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z","clip-rule":"evenodd"})],-1)),m.value?(Be(),ze("span",vq,"Nouvel utilisateur")):x.value?(Be(),ze("span",yq,"Nouveau salarie/visiteur")):E.value?(Be(),ze("span",bq,"Nouvel visiteur")):nn("",!0)])]),C("div",_q,[C("div",wq,[C("div",xq,[m.value||x.value?(Be(),ze("div",Lq,[j[9]||(j[9]=C("label",{for:"role-filter",class:"block text-sm font-medium text-gray-700"},"Rôle",-1)),kn(C("select",{id:"role-filter","onUpdate:modelValue":j[0]||(j[0]=Ce=>v.role=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[6]||(j[6]=C("option",{value:""},"Tous les rôles",-1)),m.value?(Be(),ze("option",Sq,"Administrateur")):nn("",!0),m.value?(Be(),ze("option",Cq,"Entreprise")):nn("",!0),j[7]||(j[7]=C("option",{value:"SALARIE"},"Salarie",-1)),j[8]||(j[8]=C("option",{value:"VISITEUR"},"Visiteur",-1))],512),[[rs,v.role]])])):nn("",!0),m.value?(Be(),ze("div",Eq,[j[11]||(j[11]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Entreprise",-1)),kn(C("select",{id:"entreprise-filter","onUpdate:modelValue":j[1]||(j[1]=Ce=>v.entreprise=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[10]||(j[10]=C("option",{value:""},"Toutes les entreprises",-1)),(Be(!0),ze(En,null,fr(s.value,Ce=>(Be(),ze("option",{key:Ce.id,value:Ce.id},Dt(Xn(xu)(Ce)),9,Pq))),128))],512),[[rs,v.entreprise]])])):nn("",!0),m.value||x.value?(Be(),ze("div",Mq,[j[13]||(j[13]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Salarie",-1)),kn(C("select",{id:"salarie-filter","onUpdate:modelValue":j[2]||(j[2]=Ce=>v.salarie=Ce),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[j[12]||(j[12]=C("option",{value:""},"Tous les salaries",-1)),(Be(!0),ze(En,null,fr(A.value,Ce=>(Be(),ze("option",{key:Ce.id,value:Ce.id},Dt(Xn(xu)(Ce)),9,kq))),128))],512),[[rs,v.salarie]])])):nn("",!0)]),C("div",Aq,[j[14]||(j[14]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(C("input",{type:"text",id:"search","onUpdate:modelValue":j[3]||(j[3]=Ce=>v.search=Ce),placeholder:"Rechercher par nom, email, entreprise...",class:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm"},null,512),[[jr,v.search]])])])]),C("div",Tq,[C("div",Dq,[C("table",Oq,[C("thead",Nq,[C("tr",null,[j[15]||(j[15]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisateur ",-1)),j[16]||(j[16]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rôle ",-1)),j[17]||(j[17]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email ",-1)),m.value||x.value?(Be(),ze("th",Iq," Entreprise ")):nn("",!0),m.value||x.value?(Be(),ze("th",Bq," Salarie ")):nn("",!0),j[18]||(j[18]=C("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut ",-1)),j[19]||(j[19]=C("th",{scope:"col",class:"relative px-6 py-3"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",Rq,[d.value?(Be(),ze("tr",Fq,j[20]||(j[20]=[C("td",{colspan:"7",class:"py-4 px-6"},[C("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)]))):k.value.length===0?(Be(),ze("tr",jq,j[21]||(j[21]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun utilisateur trouvé ",-1)]))):nn("",!0),(Be(!0),ze(En,null,fr(k.value,Ce=>{var De;return Be(),ze("tr",{key:Ce.id},[C("td",zq,[C("div",$q,[C("div",Vq,[C("div",Uq,[C("span",Hq,Dt(Xn(W7)(Ce.first_name,Ce.last_name)),1)])]),C("div",Wq,[C("div",Gq,Dt(Xn(xu)(Ce)),1),C("div",qq,Dt(Ce.username),1)])])]),C("td",Yq,[C("span",{class:Fi(Xn(Y7)())},Dt(Xn(q7)(Ce.role)),3)]),C("td",Kq,Dt(Ce.email),1),m.value||x.value?(Be(),ze("td",Zq,[Ce.role==="ENTREPRISE"?(Be(),ze(En,{key:0},[li(" - ")],64)):Ce.role==="SALARIE"?(Be(),ze(En,{key:1},[li(Dt(Ce.entreprise?Xn(xu)(Ce.entreprise):"Non assigné"),1)],64)):Ce.role==="VISITEUR"?(Be(),ze(En,{key:2},[li(Dt((De=Ce.salarie)!=null&&De.entreprise?Xn(xu)(Ce.salarie.entreprise):"Non assigné"),1)],64)):(Be(),ze(En,{key:3},[li(" - ")],64))])):nn("",!0),m.value||x.value?(Be(),ze("td",Xq,[Ce.role==="ENTREPRISE"||Ce.role==="ADMIN"?(Be(),ze(En,{key:0},[li(" - ")],64)):Ce.role==="SALARIE"?(Be(),ze(En,{key:1},[li(" - ")],64)):(Be(),ze(En,{key:2},[li(Dt(Ce.salarie?Xn(xu)(Ce.salarie):"Non assigné"),1)],64))])):nn("",!0),C("td",Jq,[C("span",{class:Fi(Xn(K7)(Ce.is_active))},Dt(Ce.is_active?"Actif":"Inactif"),3)]),C("td",Qq,[C("button",{onClick:Z=>I(Ce),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,eY),V(Ce)?(Be(),ze("button",{key:0,onClick:Z=>N(Ce),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,tY)):nn("",!0)])])}),128))])])])])]),o.value?(Be(),ze("div",nY,[fi(QG,{user:l.value,salaries:i.value,entreprises:s.value,"is-admin":m.value,"is-entreprise":x.value,"current-salarie":E.value?(X=(W=Xn(e).user)==null?void 0:W.id)==null?void 0:X.toString():void 0,"current-entreprise":x.value?(_e=(oe=Xn(e).user)==null?void 0:oe.id)==null?void 0:_e.toString():void 0,"api-errors":p.value,onClose:z,onSave:K},null,8,["user","salaries","entreprises","is-admin","is-entreprise","current-salarie","current-entreprise","api-errors"])])):nn("",!0),a.value?(Be(),Ol(oP,{key:1,title:"Supprimer l'utilisateur",message:"Êtes-vous sûr de vouloir supprimer cet utilisateur ? Cette action est irréversible.",onConfirm:B,onCancel:j[4]||(j[4]=Ce=>a.value=!1)})):nn("",!0)])}}}),iY={class:"h-full bg-gray-50"},sY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},oY={class:"sm:flex sm:items-center"},aY={class:"sm:flex-auto"},lY={class:"text-2xl font-semibold text-gray-900"},uY={class:"mt-2 text-sm text-gray-700"},cY={key:0,class:"mt-8"},hY={class:"mb-6"},dY=["value"],fY={class:"mb-6"},pY={value:null},gY=["value"],mY={key:0,class:"mb-6"},vY={value:null},yY=["value"],bY={key:1,class:"mt-8"},_Y={class:"mb-6"},wY=["value"],xY={class:"mt-8"},LY={class:"overflow-hidden shadow-sm ring-1 ring-black ring-opacity-5 rounded-lg"},SY={class:"overflow-x-auto"},CY={class:"min-w-full divide-y divide-gray-300"},EY={class:"bg-gray-50"},PY={scope:"col",class:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900 sm:pl-6 lg:pl-8"},MY={class:"ml-2 flex-none rounded"},kY={scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"},AY={class:"ml-2 flex-none rounded"},TY={class:"divide-y divide-gray-200 bg-white"},DY={key:0},OY={class:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-6 lg:pl-8"},NY={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},IY={class:"px-3 py-4 text-sm text-gray-900"},BY={key:0,class:"flex items-center"},RY={class:"h-8 w-8 flex-shrink-0"},FY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},jY={class:"text-primary-700 font-medium text-sm"},zY={class:"ml-3"},$Y={class:"font-medium"},VY={key:1,class:"text-gray-500"},UY={class:"px-3 py-4 text-sm text-gray-900"},HY={key:0,class:"flex items-center"},WY={class:"h-8 w-8 flex-shrink-0"},GY={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},qY={class:"text-primary-700 font-medium text-sm"},YY={class:"ml-3"},KY={class:"font-medium"},ZY={key:1,class:"text-gray-500"},XY={class:"px-3 py-4 text-sm text-gray-900"},JY={key:0,class:"flex items-center"},QY={class:"h-8 w-8 flex-shrink-0"},eK={class:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center"},tK={class:"text-primary-700 font-medium text-sm"},nK={class:"ml-3"},rK={class:"font-medium"},iK={key:1,class:"text-gray-500"},sK={class:"whitespace-nowrap px-3 py-4 text-sm text-gray-500"},oK={class:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-6 lg:pr-8"},aK=["onClick"],lK=["onClick"],uK=["onClick"],cK={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[2000]"},hK={class:"bg-white rounded-lg p-6 max-w-md w-full"},dK={class:"flex justify-between items-center mb-4"},fK=["disabled"],pK=["disabled"],gK={key:0,class:"space-y-4"},mK={key:0},vK=["disabled"],yK=["value"],bK=["disabled"],_K=["value"],wK={key:0,class:"mt-1 text-sm text-gray-500"},xK=["disabled"],LK=["value"],SK={key:0,class:"mt-1 text-sm text-gray-500"},CK={key:1,class:"mt-4 bg-red-50 p-4 rounded-md"},EK={class:"flex"},PK={class:"ml-3"},MK={class:"text-sm font-medium text-red-800"},kK={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3"},AK=["disabled"],TK={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},DK=$s({__name:"PlansView",setup(t){const e=Nm(),n=Vy(),r=da(),i=Lt([]),s=Lt([]),o=Lt([]),a=Lt([]),l=Lt(!1),c=Lt(!1),d=Lt(!1),p=Lt(null),v=Lt({nom:"",description:"",client:null}),m=Lt({id:0,nom:"",description:"",entreprise:null,salarie:null,visiteur:null}),x=Lt(!1),E=Lt(null),A=Lt(null),k=Lt(null),D=Lt("date_modification"),$=Lt("desc"),Y=Lt(null),te=Zn(()=>A.value?a.value.filter(ee=>typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id===A.value:ee.salarie===A.value||ee.salarie_id===A.value):a.value),me=Zn(()=>{let ee=i.value;console.log(`
[PlansView] Filtering plans:`,ee.map(Oe=>({id:Oe.id,entreprise:Oe.entreprise,salarie:Oe.salarie,visiteur:Oe.visiteur}))),r.isAdmin?(Y.value&&(ee=ee.filter(Oe=>{var Te;return typeof Oe.entreprise=="object"?((Te=Oe.entreprise)==null?void 0:Te.id)===Y.value:Oe.entreprise===Y.value})),A.value&&(ee=ee.filter(Oe=>{var Te;return typeof Oe.salarie=="object"?((Te=Oe.salarie)==null?void 0:Te.id)===A.value:Oe.salarie===A.value}),k.value&&(ee=ee.filter(Oe=>{var Te;return typeof Oe.visiteur=="object"?((Te=Oe.visiteur)==null?void 0:Te.id)===k.value:Oe.visiteur===k.value})))):r.isSalarie&&(ee=ee.filter(Oe=>{var Te,Ye,ge;return typeof Oe.salarie=="object"?((Te=Oe.salarie)==null?void 0:Te.id)===((Ye=r.user)==null?void 0:Ye.id):Oe.salarie===((ge=r.user)==null?void 0:ge.id)}),k.value&&(ee=ee.filter(Oe=>{var Te;return typeof Oe.visiteur=="object"?((Te=Oe.visiteur)==null?void 0:Te.id)===k.value:Oe.visiteur===k.value})));const J=[...ee].sort((Oe,Te)=>{if(D.value==="nom")return $.value==="asc"?Oe.nom.localeCompare(Te.nom):Te.nom.localeCompare(Oe.nom);{const Ye=new Date(Oe[D.value]).getTime(),ge=new Date(Te[D.value]).getTime();return $.value==="asc"?Ye-ge:ge-Ye}});return console.log("[PlansView] Final filtered and sorted plans:",J.map(Oe=>({id:Oe.id,entreprise:Oe.entreprise,salarie:Oe.salarie,visiteur:Oe.visiteur}))),J}),pe=Zn(()=>r.isAdmin?{title:"Tous les plans",description:"Liste complète des plans",plans:i.value}:r.isSalarie?{title:"Plans des visiteurs",description:"Plans où vous êtes assigné comme salarie",plans:i.value.filter(ee=>{var J,Oe,Te;return typeof ee.salarie=="object"?((J=ee.salarie)==null?void 0:J.id)===((Oe=r.user)==null?void 0:Oe.id):ee.salarie===((Te=r.user)==null?void 0:Te.id)})}:{title:"Mes plans",description:"Plans qui vous sont assignés ou que vous avez créés",plans:i.value.filter(ee=>{var Te,Ye,ge,Q;const J=ee.createur.id===((Te=r.user)==null?void 0:Te.id);let Oe=!1;return typeof ee.visiteur=="object"?Oe=((Ye=ee.visiteur)==null?void 0:Ye.id)===((ge=r.user)==null?void 0:ge.id):Oe=ee.visiteur===((Q=r.user)==null?void 0:Q.id),Oe||J})}),I=Zn(()=>Y.value?s.value.filter(ee=>{var J;return typeof ee.entreprise=="object"?((J=ee.entreprise)==null?void 0:J.id)===Y.value:ee.entreprise_id===Y.value}):s.value),z=Zn(()=>m.value.entreprise?s.value.filter(ee=>{var J;return typeof ee.entreprise=="object"?((J=ee.entreprise)==null?void 0:J.id)===m.value.entreprise:ee.entreprise_id===m.value.entreprise}):[]),K=Zn(()=>!m.value.entreprise||!m.value.salarie?[]:a.value.filter(ee=>typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id===m.value.salarie:ee.salarie===m.value.salarie||ee.salarie_id===m.value.salarie));go(async()=>{var ee;await N(),r.isAdmin?await B():r.isSalarie&&await R(((ee=r.user)==null?void 0:ee.id)||0)});async function N(){try{const ee=await n.fetchPlansWithDetails();i.value=ee.data}catch(ee){console.error("Erreur lors du chargement des plans:",ee)}}async function B(){try{console.log("Chargement des entreprises..."),o.value=await r.fetchEnterprises(),console.log("Entreprises chargées:",o.value)}catch(ee){console.error("Erreur lors du chargement des entreprises:",ee)}}async function V(ee){try{if(console.log("Chargement des salaries pour l'entreprise:",ee),ee===void 0){const J=await r.fetchUsersByRole({role:"SALARIE"});s.value=J}else s.value=await r.fetchEntrepriseSalaries(ee);console.log("Salaries chargés:",s.value)}catch(J){console.error("Erreur lors du chargement des salaries:",J)}}async function R(ee){try{console.log("Chargement des visiteurs pour le salarie:",ee);const J=await nv({role:"VISITEUR",salarieId:ee});a.value=J.map(Oe=>({...Oe,salarie_id:ee})),console.log("Visiteurs chargés:",a.value)}catch(J){console.error("Erreur lors du chargement des visiteurs:",J)}}function j(){l.value=!0,v.value={nom:"",description:"",client:null}}async function W(ee){console.log(`
[PlansView][editPlan] ====== DÉBUT ÉDITION PLAN ======`),console.log("[PlansView][editPlan] Plan reçu:",{id:ee.id,nom:ee.nom,entreprise:ee.entreprise,salarie:ee.salarie,visiteur:ee.visiteur});try{console.log("[PlansView][editPlan] Définition du plan courant dans le store..."),n.setCurrentPlan(ee),console.log("[PlansView][editPlan] Sauvegarde de l'ID dans localStorage:",ee.id),localStorage.setItem("lastPlanId",ee.id.toString()),console.log("[PlansView][editPlan] Redirection vers la vue carte..."),await e.push("/"),console.log(`[PlansView][editPlan] ====== FIN ÉDITION PLAN ======
`)}catch(J){console.error("[PlansView][editPlan] ERREUR:",J),J instanceof Error&&console.error("[PlansView][editPlan] Stack trace:",J.stack),alert("Une erreur est survenue lors du chargement du plan")}}async function X(ee){ee!=null&&ee.id&&(p.value=ee,d.value=!0)}async function oe(){var ee,J;if((ee=p.value)!=null&&ee.id)try{await n.deletePlan(p.value.id),await N(),((J=n.currentPlan)==null?void 0:J.id)===p.value.id&&n.clearCurrentPlan()}catch(Oe){console.error("Erreur lors de la suppression du plan:",Oe),alert("Une erreur est survenue lors de la suppression du plan")}finally{d.value=!1,p.value=null}}function _e(){d.value=!1,p.value=null}function Ce(ee){return new Date(ee).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}function De(ee){if(!ee)return"";const J=ee.first_name||"",Oe=ee.last_name||"";return(J.charAt(0)+Oe.charAt(0)).toUpperCase()}async function Z(ee){x.value=!0,E.value=null;try{r.isAdmin&&!o.value.length&&await B();const J=typeof ee.entreprise=="object"&&ee.entreprise?ee.entreprise.id:ee.entreprise,Oe=typeof ee.salarie=="object"&&ee.salarie?ee.salarie.id:ee.salarie,Te=typeof ee.visiteur=="object"&&ee.visiteur?ee.visiteur.id:ee.visiteur;m.value={id:ee.id,nom:ee.nom,description:ee.description,entreprise:J||null,salarie:Oe||null,visiteur:Te||null},J&&await V(J),Oe&&await R(Oe),c.value=!0}catch(J){console.error("Erreur lors de l'ouverture du modal:",J),E.value="Erreur lors du chargement des données"}finally{x.value=!1}}async function G(){var ee,J,Oe,Te,Ye;E.value=null,x.value=!0;try{if(!m.value.nom.trim())throw new Error("Le nom du plan est requis");if(m.value.visiteur&&!m.value.salarie)throw new Error("Un salarie doit être sélectionné pour assigner un visiteur");if(m.value.salarie&&!m.value.entreprise)throw new Error("Une entreprise doit être sélectionnée pour assigner un salarie");console.log("Données envoyées pour la mise à jour:",{id:m.value.id,nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});const ge=await n.updatePlanDetails(m.value.id,{nom:m.value.nom.trim(),description:m.value.description.trim(),entreprise_id:m.value.entreprise,salarie_id:m.value.salarie,visiteur_id:m.value.visiteur});console.log("Réponse de la mise à jour:",ge),ge&&(c.value=!1,await N())}catch(ge){if(console.error("Erreur lors de la mise à jour du plan:",ge),(J=(ee=ge.response)==null?void 0:ee.data)!=null&&J.detail)E.value=ge.response.data.detail;else if((Te=(Oe=ge.response)==null?void 0:Oe.data)!=null&&Te.non_field_errors)E.value=ge.response.data.non_field_errors[0];else if((Ye=ge.response)!=null&&Ye.data){const Q=Object.entries(ge.response.data).map(([ie,fe])=>`${ie}: ${Array.isArray(fe)?fe[0]:fe}`);E.value=Q.join(`
`)}else E.value=ge.message||"Une erreur est survenue lors de la mise à jour du plan"}finally{x.value=!1}}Ri(()=>Y.value,async ee=>{A.value=null,k.value=null,ee?await V(ee):await V()}),Ri(()=>A.value,async ee=>{k.value=null,ee&&await R(ee)}),Ri(()=>m.value.entreprise,async ee=>{ee===null?(m.value.salarie=null,m.value.visiteur=null):await V(ee)}),Ri(()=>m.value.salarie,async ee=>{m.value.visiteur=null,ee&&await R(ee)});function re(ee){var Ye,ge,Q;const J=r.user;if(!J)return!1;if(J.user_type==="admin")return!0;if(J.user_type==="entreprise")return typeof ee.entreprise=="object"?((Ye=ee.entreprise)==null?void 0:Ye.id)===J.id:ee.entreprise===J.id;if(J.user_type==="salarie")return typeof ee.salarie=="object"?((ge=ee.salarie)==null?void 0:ge.id)===J.id:ee.salarie===J.id;const Oe=ee.createur.id===J.id;let Te=!1;return typeof ee.visiteur=="object"?Te=((Q=ee.visiteur)==null?void 0:Q.id)===J.id:Te=ee.visiteur===J.id,Te||Oe}async function he(ee){await N(),localStorage.setItem("lastPlanId",ee.toString()),console.log(`Plan ${ee} créé et défini comme plan actif`),e.push("/")}function ce(ee){D.value===ee?$.value=$.value==="asc"?"desc":"asc":(D.value=ee,$.value="desc")}function ve(ee){return ee?xu(ee):""}return(ee,J)=>{var Oe;return Be(),ze("div",iY,[C("div",sY,[C("div",oY,[C("div",aY,[C("h1",lY,Dt(pe.value.title),1),C("p",uY,Dt(pe.value.description),1)]),C("div",{class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},[C("button",{onClick:j,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"}," Nouveau plan ")])]),Xn(r).isAdmin?(Be(),ze("div",cY,[C("div",hY,[J[15]||(J[15]=C("label",{for:"entreprise-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par entreprise",-1)),kn(C("select",{id:"entreprise-filter","onUpdate:modelValue":J[0]||(J[0]=Te=>Y.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[14]||(J[14]=C("option",{value:null},"Toutes les entreprises",-1)),(Be(!0),ze(En,null,fr(o.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,dY))),128))],512),[[rs,Y.value]])]),C("div",fY,[J[16]||(J[16]=C("label",{for:"salarie-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par salarie",-1)),kn(C("select",{id:"salarie-filter","onUpdate:modelValue":J[1]||(J[1]=Te=>A.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",pY,Dt(I.value.length?"Tous les salaries":"Aucun salarie disponible"),1),(Be(!0),ze(En,null,fr(I.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,gY))),128))],512),[[rs,A.value]])]),A.value?(Be(),ze("div",mY,[J[17]||(J[17]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(C("select",{id:"visiteur-filter","onUpdate:modelValue":J[2]||(J[2]=Te=>k.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[C("option",vY,Dt(te.value.length?"Tous les visiteurs":"Aucun visiteur disponible"),1),(Be(!0),ze(En,null,fr(te.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,yY))),128))],512),[[rs,k.value]])])):nn("",!0)])):Xn(r).isSalarie?(Be(),ze("div",bY,[C("div",_Y,[J[19]||(J[19]=C("label",{for:"visiteur-filter",class:"block text-sm font-medium text-gray-700"},"Filtrer par visiteur",-1)),kn(C("select",{id:"visiteur-filter","onUpdate:modelValue":J[3]||(J[3]=Te=>k.value=Te),class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md"},[J[18]||(J[18]=C("option",{value:null},"Tous les visiteurs",-1)),(Be(!0),ze(En,null,fr(a.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,wY))),128))],512),[[rs,k.value]])])])):nn("",!0),C("div",xY,[C("div",LY,[C("div",SY,[C("table",CY,[C("thead",EY,[C("tr",null,[C("th",PY,[C("button",{onClick:J[4]||(J[4]=Te=>ce("nom")),class:"group inline-flex items-center"},[J[21]||(J[21]=li(" Nom ")),C("span",MY,[(Be(),ze("svg",{class:Fi(["h-5 w-5",{"text-gray-900":D.value==="nom","text-gray-400":D.value!=="nom","rotate-180":D.value==="nom"&&$.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[20]||(J[20]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[24]||(J[24]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Description ",-1)),J[25]||(J[25]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Entreprise ",-1)),J[26]||(J[26]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Salarie ",-1)),J[27]||(J[27]=C("th",{scope:"col",class:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900"}," Visiteur ",-1)),C("th",kY,[C("button",{onClick:J[5]||(J[5]=Te=>ce("date_modification")),class:"group inline-flex items-center"},[J[23]||(J[23]=li(" Dernière modification ")),C("span",AY,[(Be(),ze("svg",{class:Fi(["h-5 w-5",{"text-gray-900":D.value==="date_modification","text-gray-400":D.value!=="date_modification","rotate-180":D.value==="date_modification"&&$.value==="asc"}]),viewBox:"0 0 20 20",fill:"currentColor"},J[22]||(J[22]=[C("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]),2))])])]),J[28]||(J[28]=C("th",{scope:"col",class:"relative py-3.5 pl-3 pr-4 sm:pr-6 lg:pr-8"},[C("span",{class:"sr-only"},"Actions")],-1))])]),C("tbody",TY,[me.value.length===0?(Be(),ze("tr",DY,J[29]||(J[29]=[C("td",{colspan:"7",class:"py-4 px-6 text-center text-gray-500"}," Aucun plan disponible ",-1)]))):nn("",!0),(Be(!0),ze(En,null,fr(me.value,Te=>(Be(),ze("tr",{key:Te.id,class:"hover:bg-gray-50"},[C("td",OY,Dt(Te.nom),1),C("td",NY,Dt(Te.description||"-"),1),C("td",IY,[Te.entreprise&&typeof Te.entreprise=="object"?(Be(),ze("div",BY,[C("div",RY,[C("div",FY,[C("span",jY,Dt(De(Te.entreprise)),1)])]),C("div",zY,[C("div",$Y,Dt(Xn(xu)(Te.entreprise)),1)])])):(Be(),ze("div",VY," Non assigné "))]),C("td",UY,[Te.salarie&&typeof Te.salarie=="object"?(Be(),ze("div",HY,[C("div",WY,[C("div",GY,[C("span",qY,Dt(De(Te.salarie)),1)])]),C("div",YY,[C("div",KY,Dt(Xn(xu)(Te.salarie)),1)])])):(Be(),ze("div",ZY," Non assigné "))]),C("td",XY,[Te.visiteur&&typeof Te.visiteur=="object"?(Be(),ze("div",JY,[C("div",QY,[C("div",eK,[C("span",tK,Dt(De(Te.visiteur)),1)])]),C("div",nK,[C("div",rK,Dt(Xn(xu)(Te.visiteur)),1)])])):(Be(),ze("div",iK," Non assigné "))]),C("td",sK,Dt(Ce(Te.date_modification)),1),C("td",oK,[C("button",{onClick:Ye=>W(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Ouvrir ",8,aK),C("button",{onClick:Ye=>Z(Te),class:"text-primary-600 hover:text-primary-900 mr-4"}," Modifier ",8,lK),re(Te)?(Be(),ze("button",{key:0,onClick:Ye=>X(Te),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,uK)):nn("",!0)])]))),128))])])])])]),fi(FE,{modelValue:l.value,"onUpdate:modelValue":J[6]||(J[6]=Te=>l.value=Te),salaries:s.value,clients:a.value,onCreated:he},null,8,["modelValue","salaries","clients"]),c.value?(Be(),ze("div",cK,[C("div",hK,[C("div",dK,[J[31]||(J[31]=C("h2",{class:"text-xl font-semibold text-gray-900"},"Modifier le plan",-1)),C("button",{onClick:J[7]||(J[7]=Te=>c.value=!1),class:"text-gray-400 hover:text-gray-500 focus:outline-none"},J[30]||(J[30]=[C("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),C("form",{onSubmit:Bh(G,["prevent"]),class:"space-y-4"},[C("div",null,[J[32]||(J[32]=C("label",{for:"edit-nom",class:"block text-sm font-medium text-gray-700"}," Nom ",-1)),kn(C("input",{type:"text",id:"edit-nom","onUpdate:modelValue":J[8]||(J[8]=Te=>m.value.nom=Te),disabled:x.value,class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed",required:""},null,8,fK),[[jr,m.value.nom]])]),C("div",null,[J[33]||(J[33]=C("label",{for:"edit-description",class:"block text-sm font-medium text-gray-700"}," Description ",-1)),kn(C("textarea",{id:"edit-description","onUpdate:modelValue":J[9]||(J[9]=Te=>m.value.description=Te),disabled:x.value,rows:"3",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,pK),[[jr,m.value.description]])]),Xn(r).isAdmin||((Oe=Xn(r).user)==null?void 0:Oe.user_type)==="entreprise"?(Be(),ze("div",gK,[Xn(r).isAdmin?(Be(),ze("div",mK,[J[35]||(J[35]=C("label",{for:"edit-entreprise",class:"block text-sm font-medium text-gray-700"}," Entreprise ",-1)),kn(C("select",{id:"edit-entreprise","onUpdate:modelValue":J[10]||(J[10]=Te=>m.value.entreprise=Te),disabled:x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[34]||(J[34]=C("option",{value:null},"Sélectionner une entreprise",-1)),(Be(!0),ze(En,null,fr(o.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,yK))),128))],8,vK),[[rs,m.value.entreprise]])])):nn("",!0),C("div",null,[J[37]||(J[37]=C("label",{for:"edit-salarie",class:"block text-sm font-medium text-gray-700"}," Salarie ",-1)),kn(C("select",{id:"edit-salarie","onUpdate:modelValue":J[11]||(J[11]=Te=>m.value.salarie=Te),disabled:Xn(r).isAdmin&&!m.value.entreprise||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[36]||(J[36]=C("option",{value:null},"Sélectionner un salarie",-1)),(Be(!0),ze(En,null,fr(z.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,_K))),128))],8,bK),[[rs,m.value.salarie]]),Xn(r).isAdmin&&!m.value.entreprise?(Be(),ze("p",wK," Veuillez d'abord sélectionner une entreprise ")):nn("",!0)]),C("div",null,[J[39]||(J[39]=C("label",{for:"edit-visiteur",class:"block text-sm font-medium text-gray-700"}," Visiteur ",-1)),kn(C("select",{id:"edit-visiteur","onUpdate:modelValue":J[12]||(J[12]=Te=>m.value.visiteur=Te),disabled:!m.value.salarie||x.value,class:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm rounded-md disabled:bg-gray-100 disabled:cursor-not-allowed"},[J[38]||(J[38]=C("option",{value:null},"Sélectionner un visiteur",-1)),(Be(!0),ze(En,null,fr(K.value,Te=>(Be(),ze("option",{key:Te.id,value:Te.id},Dt(ve(Te)),9,LK))),128))],8,xK),[[rs,m.value.visiteur]]),m.value.salarie?nn("",!0):(Be(),ze("p",SK," Veuillez d'abord sélectionner un salarie "))])])):nn("",!0),E.value?(Be(),ze("div",CK,[C("div",EK,[J[40]||(J[40]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",PK,[C("p",MK,Dt(E.value),1)])])])):nn("",!0),C("div",kK,[C("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:mt-0 sm:text-sm",onClick:J[13]||(J[13]=Te=>c.value=!1)}," Annuler "),C("button",{type:"submit",disabled:x.value,class:"inline-flex w-full justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:text-sm disabled:opacity-50"},[x.value?(Be(),ze("svg",TK,J[41]||(J[41]=[C("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),C("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):nn("",!0),li(" "+Dt(x.value?"Enregistrement...":"Enregistrer"),1)],8,AK)])],32)])])):nn("",!0),d.value?(Be(),Ol(oP,{key:3,title:"Supprimer le plan",message:"Êtes-vous sûr de vouloir supprimer ce plan ? Cette action est irréversible.",onConfirm:oe,onCancel:_e})):nn("",!0)])])}}});var aP={exports:{}};const OK=_E(rI);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function j5(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function th(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?j5(Object(n),!0).forEach(function(r){NK(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function cv(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cv=function(e){return typeof e}:cv=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cv(t)}function NK(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zu(){return Zu=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zu.apply(this,arguments)}function IK(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function BK(t,e){if(t==null)return{};var n=IK(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function RK(t){return FK(t)||jK(t)||zK(t)||$K()}function FK(t){if(Array.isArray(t))return Bb(t)}function jK(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zK(t,e){if(t){if(typeof t=="string")return Bb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bb(t,e)}}function Bb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $K(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var VK="1.14.0";function Oh(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var zh=Oh(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Im=Oh(/Edge/i),z5=Oh(/firefox/i),qg=Oh(/safari/i)&&!Oh(/chrome/i)&&!Oh(/android/i),lP=Oh(/iP(ad|od|hone)/i),UK=Oh(/chrome/i)&&Oh(/android/i),uP={capture:!1,passive:!1};function Ai(t,e,n){t.addEventListener(e,n,!zh&&uP)}function wi(t,e,n){t.removeEventListener(e,n,!zh&&uP)}function Xv(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function HK(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function mc(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&Xv(t,e):Xv(t,e))||r&&t===n)return t;if(t===n)break}while(t=HK(t))}return null}var $5=/\s+/g;function ho(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace($5," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace($5," ")}}function ar(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function gf(t,e){var n="";if(typeof t=="string")n=t;else do{var r=ar(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function cP(t,e,n){if(t){var r=t.getElementsByTagName(e),i=0,s=r.length;if(n)for(;i<s;i++)n(r[i],i);return r}return[]}function Jc(){var t=document.scrollingElement;return t||document.documentElement}function Xs(t,e,n,r,i){if(!(!t.getBoundingClientRect&&t!==window)){var s,o,a,l,c,d,p;if(t!==window&&t.parentNode&&t!==Jc()?(s=t.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,d=s.height,p=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,p=window.innerWidth),(e||n)&&t!==window&&(i=i||t.parentNode,!zh))do if(i&&i.getBoundingClientRect&&(ar(i,"transform")!=="none"||n&&ar(i,"position")!=="static")){var v=i.getBoundingClientRect();o-=v.top+parseInt(ar(i,"border-top-width")),a-=v.left+parseInt(ar(i,"border-left-width")),l=o+s.height,c=a+s.width;break}while(i=i.parentNode);if(r&&t!==window){var m=gf(i||t),x=m&&m.a,E=m&&m.d;m&&(o/=E,a/=x,p/=x,d/=E,l=o+d,c=a+p)}return{top:o,left:a,bottom:l,right:c,width:p,height:d}}}function V5(t,e,n){for(var r=dd(t,!0),i=Xs(t)[e];r;){var s=Xs(r)[n],o=void 0;if(o=i>=s,!o)return r;if(r===Jc())break;r=dd(r,!1)}return!1}function Dp(t,e,n,r){for(var i=0,s=0,o=t.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Dr.ghost&&(r||o[s]!==Dr.dragged)&&mc(o[s],n.draggable,t,!1)){if(i===e)return o[s];i++}s++}return null}function W_(t,e){for(var n=t.lastElementChild;n&&(n===Dr.ghost||ar(n,"display")==="none"||e&&!Xv(n,e));)n=n.previousElementSibling;return n||null}function Eo(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Dr.clone&&(!e||Xv(t,e))&&n++;return n}function U5(t){var e=0,n=0,r=Jc();if(t)do{var i=gf(t),s=i.a,o=i.d;e+=t.scrollLeft*s,n+=t.scrollTop*o}while(t!==r&&(t=t.parentNode));return[e,n]}function WK(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function dd(t,e){if(!t||!t.getBoundingClientRect)return Jc();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=ar(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX=="auto"||i.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(i.overflowY=="auto"||i.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return Jc();if(r||e)return n;r=!0}}while(n=n.parentNode);return Jc()}function GK(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function c2(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yg;function hP(t,e){return function(){if(!Yg){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Yg=setTimeout(function(){Yg=void 0},e)}}}function qK(){clearTimeout(Yg),Yg=void 0}function dP(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function G_(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}function H5(t,e){ar(t,"position","absolute"),ar(t,"top",e.top),ar(t,"left",e.left),ar(t,"width",e.width),ar(t,"height",e.height)}function h2(t){ar(t,"position",""),ar(t,"top",""),ar(t,"left",""),ar(t,"width",""),ar(t,"height","")}var cl="Sortable"+new Date().getTime();function YK(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(i){if(!(ar(i,"display")==="none"||i===Dr.ghost)){t.push({target:i,rect:Xs(i)});var s=th({},t[t.length-1].rect);if(i.thisAnimationDuration){var o=gf(i,!0);o&&(s.top-=o.f,s.left-=o.e)}i.fromRect=s}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(WK(t,{target:r}),1)},animateAll:function(r){var i=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var s=!1,o=0;t.forEach(function(a){var l=0,c=a.target,d=c.fromRect,p=Xs(c),v=c.prevFromRect,m=c.prevToRect,x=a.rect,E=gf(c,!0);E&&(p.top-=E.f,p.left-=E.e),c.toRect=p,c.thisAnimationDuration&&c2(v,p)&&!c2(d,p)&&(x.top-p.top)/(x.left-p.left)===(d.top-p.top)/(d.left-p.left)&&(l=ZK(x,v,m,i.options)),c2(p,d)||(c.prevFromRect=d,c.prevToRect=p,l||(l=i.options.animation),i.animate(c,x,p,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof r=="function"&&r()},o):typeof r=="function"&&r(),t=[]},animate:function(r,i,s,o){if(o){ar(r,"transition",""),ar(r,"transform","");var a=gf(this.el),l=a&&a.a,c=a&&a.d,d=(i.left-s.left)/(l||1),p=(i.top-s.top)/(c||1);r.animatingX=!!d,r.animatingY=!!p,ar(r,"transform","translate3d("+d+"px,"+p+"px,0)"),this.forRepaintDummy=KK(r),ar(r,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),ar(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){ar(r,"transition",""),ar(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},o)}}}}function KK(t){return t.offsetWidth}function ZK(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var Xf=[],d2={initializeByDefault:!0},Bm={mount:function(e){for(var n in d2)d2.hasOwnProperty(n)&&!(n in e)&&(e[n]=d2[n]);Xf.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Xf.push(e)},pluginEvent:function(e,n,r){var i=this;this.eventCanceled=!1,r.cancel=function(){i.eventCanceled=!0};var s=e+"Global";Xf.forEach(function(o){n[o.pluginName]&&(n[o.pluginName][s]&&n[o.pluginName][s](th({sortable:n},r)),n.options[o.pluginName]&&n[o.pluginName][e]&&n[o.pluginName][e](th({sortable:n},r)))})},initializePlugins:function(e,n,r,i){Xf.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,n,e.options);c.sortable=e,c.options=e.options,e[l]=c,Zu(r,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,n){var r={};return Xf.forEach(function(i){typeof i.eventProperties=="function"&&Zu(r,i.eventProperties.call(n[i.pluginName],e))}),r},modifyOption:function(e,n,r){var i;return Xf.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[n]=="function"&&(i=s.optionListeners[n].call(e[s.pluginName],r))}),i}};function Sg(t){var e=t.sortable,n=t.rootEl,r=t.name,i=t.targetEl,s=t.cloneEl,o=t.toEl,a=t.fromEl,l=t.oldIndex,c=t.newIndex,d=t.oldDraggableIndex,p=t.newDraggableIndex,v=t.originalEvent,m=t.putSortable,x=t.extraEventProperties;if(e=e||n&&n[cl],!!e){var E,A=e.options,k="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!zh&&!Im?E=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(E=document.createEvent("Event"),E.initEvent(r,!0,!0)),E.to=o||n,E.from=a||n,E.item=i||n,E.clone=s,E.oldIndex=l,E.newIndex=c,E.oldDraggableIndex=d,E.newDraggableIndex=p,E.originalEvent=v,E.pullMode=m?m.lastPutMode:void 0;var D=th(th({},x),Bm.getEventProperties(r,e));for(var $ in D)E[$]=D[$];n&&n.dispatchEvent(E),A[k]&&A[k].call(e,E)}}var XK=["evt"],Gl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=r.evt,s=BK(r,XK);Bm.pluginEvent.bind(Dr)(e,n,th({dragEl:Fn,parentEl:Lo,ghostEl:oi,rootEl:Zs,nextEl:tf,lastDownEl:hv,cloneEl:So,cloneHidden:ud,dragStarted:Cg,putSortable:ja,activeSortable:Dr.active,originalEvent:i,oldIndex:dp,oldDraggableIndex:Kg,newIndex:bu,newDraggableIndex:ld,hideGhostForTarget:mP,unhideGhostForTarget:vP,cloneNowHidden:function(){ud=!0},cloneNowShown:function(){ud=!1},dispatchSortableEvent:function(a){Sl({sortable:n,name:a,originalEvent:i})}},s))};function Sl(t){Sg(th({putSortable:ja,cloneEl:So,targetEl:Fn,rootEl:Zs,oldIndex:dp,oldDraggableIndex:Kg,newIndex:bu,newDraggableIndex:ld},t))}var Fn,Lo,oi,Zs,tf,hv,So,ud,dp,bu,Kg,ld,P0,ja,up=!1,Jv=!1,Qv=[],Yd,dc,f2,p2,W5,G5,Cg,Jf,Zg,Xg=!1,M0=!1,dv,il,g2=[],Rb=!1,ey=[],Gy=typeof document<"u",k0=lP,q5=Im||zh?"cssFloat":"float",JK=Gy&&!UK&&!lP&&"draggable"in document.createElement("div"),fP=function(){if(Gy){if(zh)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}}(),pP=function(e,n){var r=ar(e),i=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),s=Dp(e,0,n),o=Dp(e,1,n),a=s&&ar(s),l=o&&ar(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Xs(s).width,d=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Xs(o).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var p=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===p)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=i&&r[q5]==="none"||o&&r[q5]==="none"&&c+d>i)?"vertical":"horizontal"},QK=function(e,n,r){var i=r?e.left:e.top,s=r?e.right:e.bottom,o=r?e.width:e.height,a=r?n.left:n.top,l=r?n.right:n.bottom,c=r?n.width:n.height;return i===a||s===l||i+o/2===a+c/2},eZ=function(e,n){var r;return Qv.some(function(i){var s=i[cl].options.emptyInsertThreshold;if(!(!s||W_(i))){var o=Xs(i),a=e>=o.left-s&&e<=o.right+s,l=n>=o.top-s&&n<=o.bottom+s;if(a&&l)return r=i}}),r},gP=function(e){function n(s,o){return function(a,l,c,d){var p=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||p))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return n(s(a,l,c,d),o)(a,l,c,d);var v=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===v||s.join&&s.indexOf(v)>-1}}var r={},i=e.group;(!i||cv(i)!="object")&&(i={name:i}),r.name=i.name,r.checkPull=n(i.pull,!0),r.checkPut=n(i.put),r.revertClone=i.revertClone,e.group=r},mP=function(){!fP&&oi&&ar(oi,"display","none")},vP=function(){!fP&&oi&&ar(oi,"display","")};Gy&&document.addEventListener("click",function(t){if(Jv)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Jv=!1,!1},!0);var Kd=function(e){if(Fn){e=e.touches?e.touches[0]:e;var n=eZ(e.clientX,e.clientY);if(n){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]=e[i]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[cl]._onDragOver(r)}}},tZ=function(e){Fn&&Fn.parentNode[cl]._isOutsideThisEl(e.target)};function Dr(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Zu({},e),t[cl]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pP(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Dr.supportPointer!==!1&&"PointerEvent"in window&&!qg,emptyInsertThreshold:5};Bm.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);gP(e);for(var i in this)i.charAt(0)==="_"&&typeof this[i]=="function"&&(this[i]=this[i].bind(this));this.nativeDraggable=e.forceFallback?!1:JK,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Ai(t,"pointerdown",this._onTapStart):(Ai(t,"mousedown",this._onTapStart),Ai(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Ai(t,"dragover",this),Ai(t,"dragenter",this)),Qv.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Zu(this,YK())}Dr.prototype={constructor:Dr,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Jf=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,Fn):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,i=this.options,s=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,d=i.filter;if(uZ(r),!Fn&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||i.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&qg&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=mc(l,i.draggable,r,!1),!(l&&l.animated)&&hv!==l)){if(dp=Eo(l),Kg=Eo(l,i.draggable),typeof d=="function"){if(d.call(this,e,l,this)){Sl({sortable:n,rootEl:c,name:"filter",targetEl:l,toEl:r,fromEl:r}),Gl("filter",n,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(d&&(d=d.split(",").some(function(p){if(p=mc(c,p.trim(),r,!1),p)return Sl({sortable:n,rootEl:p,name:"filter",targetEl:l,fromEl:r,toEl:r}),Gl("filter",n,{evt:e}),!0}),d)){s&&e.cancelable&&e.preventDefault();return}i.handle&&!mc(c,i.handle,r,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,n,r){var i=this,s=i.el,o=i.options,a=s.ownerDocument,l;if(r&&!Fn&&r.parentNode===s){var c=Xs(r);if(Zs=s,Fn=r,Lo=Fn.parentNode,tf=Fn.nextSibling,hv=r,P0=o.group,Dr.dragged=Fn,Yd={target:Fn,clientX:(n||e).clientX,clientY:(n||e).clientY},W5=Yd.clientX-c.left,G5=Yd.clientY-c.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,Fn.style["will-change"]="all",l=function(){if(Gl("delayEnded",i,{evt:e}),Dr.eventCanceled){i._onDrop();return}i._disableDelayedDragEvents(),!z5&&i.nativeDraggable&&(Fn.draggable=!0),i._triggerDragStart(e,n),Sl({sortable:i,name:"choose",originalEvent:e}),ho(Fn,o.chosenClass,!0)},o.ignore.split(",").forEach(function(d){cP(Fn,d.trim(),m2)}),Ai(a,"dragover",Kd),Ai(a,"mousemove",Kd),Ai(a,"touchmove",Kd),Ai(a,"mouseup",i._onDrop),Ai(a,"touchend",i._onDrop),Ai(a,"touchcancel",i._onDrop),z5&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Fn.draggable=!0),Gl("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Im||zh))){if(Dr.eventCanceled){this._onDrop();return}Ai(a,"mouseup",i._disableDelayedDrag),Ai(a,"touchend",i._disableDelayedDrag),Ai(a,"touchcancel",i._disableDelayedDrag),Ai(a,"mousemove",i._delayedDragTouchMoveHandler),Ai(a,"touchmove",i._delayedDragTouchMoveHandler),o.supportPointer&&Ai(a,"pointermove",i._delayedDragTouchMoveHandler),i._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Fn&&m2(Fn),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._disableDelayedDrag),wi(e,"touchend",this._disableDelayedDrag),wi(e,"touchcancel",this._disableDelayedDrag),wi(e,"mousemove",this._delayedDragTouchMoveHandler),wi(e,"touchmove",this._delayedDragTouchMoveHandler),wi(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Ai(document,"pointermove",this._onTouchMove):n?Ai(document,"touchmove",this._onTouchMove):Ai(document,"mousemove",this._onTouchMove):(Ai(Fn,"dragend",this),Ai(Zs,"dragstart",this._onDragStart));try{document.selection?fv(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(up=!1,Zs&&Fn){Gl("dragStarted",this,{evt:n}),this.nativeDraggable&&Ai(document,"dragover",tZ);var r=this.options;!e&&ho(Fn,r.dragClass,!1),ho(Fn,r.ghostClass,!0),Dr.active=this,e&&this._appendGhost(),Sl({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(dc){this._lastX=dc.clientX,this._lastY=dc.clientY,mP();for(var e=document.elementFromPoint(dc.clientX,dc.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(dc.clientX,dc.clientY),e!==n);)n=e;if(Fn.parentNode[cl]._isOutsideThisEl(e),n)do{if(n[cl]){var r=void 0;if(r=n[cl]._onDragOver({clientX:dc.clientX,clientY:dc.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);vP()}},_onTouchMove:function(e){if(Yd){var n=this.options,r=n.fallbackTolerance,i=n.fallbackOffset,s=e.touches?e.touches[0]:e,o=oi&&gf(oi,!0),a=oi&&o&&o.a,l=oi&&o&&o.d,c=k0&&il&&U5(il),d=(s.clientX-Yd.clientX+i.x)/(a||1)+(c?c[0]-g2[0]:0)/(a||1),p=(s.clientY-Yd.clientY+i.y)/(l||1)+(c?c[1]-g2[1]:0)/(l||1);if(!Dr.active&&!up){if(r&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(oi){o?(o.e+=d-(f2||0),o.f+=p-(p2||0)):o={a:1,b:0,c:0,d:1,e:d,f:p};var v="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");ar(oi,"webkitTransform",v),ar(oi,"mozTransform",v),ar(oi,"msTransform",v),ar(oi,"transform",v),f2=d,p2=p,dc=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!oi){var e=this.options.fallbackOnBody?document.body:Zs,n=Xs(Fn,!0,k0,!0,e),r=this.options;if(k0){for(il=e;ar(il,"position")==="static"&&ar(il,"transform")==="none"&&il!==document;)il=il.parentNode;il!==document.body&&il!==document.documentElement?(il===document&&(il=Jc()),n.top+=il.scrollTop,n.left+=il.scrollLeft):il=Jc(),g2=U5(il)}oi=Fn.cloneNode(!0),ho(oi,r.ghostClass,!1),ho(oi,r.fallbackClass,!0),ho(oi,r.dragClass,!0),ar(oi,"transition",""),ar(oi,"transform",""),ar(oi,"box-sizing","border-box"),ar(oi,"margin",0),ar(oi,"top",n.top),ar(oi,"left",n.left),ar(oi,"width",n.width),ar(oi,"height",n.height),ar(oi,"opacity","0.8"),ar(oi,"position",k0?"absolute":"fixed"),ar(oi,"zIndex","100000"),ar(oi,"pointerEvents","none"),Dr.ghost=oi,e.appendChild(oi),ar(oi,"transform-origin",W5/parseInt(oi.style.width)*100+"% "+G5/parseInt(oi.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,i=e.dataTransfer,s=r.options;if(Gl("dragStart",this,{evt:e}),Dr.eventCanceled){this._onDrop();return}Gl("setupClone",this),Dr.eventCanceled||(So=G_(Fn),So.draggable=!1,So.style["will-change"]="",this._hideClone(),ho(So,this.options.chosenClass,!1),Dr.clone=So),r.cloneId=fv(function(){Gl("clone",r),!Dr.eventCanceled&&(r.options.removeCloneOnHide||Zs.insertBefore(So,Fn),r._hideClone(),Sl({sortable:r,name:"clone"}))}),!n&&ho(Fn,s.dragClass,!0),n?(Jv=!0,r._loopId=setInterval(r._emulateDragOver,50)):(wi(document,"mouseup",r._onDrop),wi(document,"touchend",r._onDrop),wi(document,"touchcancel",r._onDrop),i&&(i.effectAllowed="move",s.setData&&s.setData.call(r,i,Fn)),Ai(document,"drop",r),ar(Fn,"transform","translateZ(0)")),up=!0,r._dragStartId=fv(r._dragStarted.bind(r,n,e)),Ai(document,"selectstart",r),Cg=!0,qg&&ar(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,i,s,o,a=this.options,l=a.group,c=Dr.active,d=P0===l,p=a.sort,v=ja||c,m,x=this,E=!1;if(Rb)return;function A(oe,_e){Gl(oe,x,th({evt:e,isOwner:d,axis:m?"vertical":"horizontal",revert:o,dragRect:i,targetRect:s,canSort:p,fromSortable:v,target:r,completed:D,onMove:function(De,Z){return A0(Zs,n,Fn,i,De,Xs(De),e,Z)},changed:$},_e))}function k(){A("dragOverAnimationCapture"),x.captureAnimationState(),x!==v&&v.captureAnimationState()}function D(oe){return A("dragOverCompleted",{insertion:oe}),oe&&(d?c._hideClone():c._showClone(x),x!==v&&(ho(Fn,ja?ja.options.ghostClass:c.options.ghostClass,!1),ho(Fn,a.ghostClass,!0)),ja!==x&&x!==Dr.active?ja=x:x===Dr.active&&ja&&(ja=null),v===x&&(x._ignoreWhileAnimating=r),x.animateAll(function(){A("dragOverAnimationComplete"),x._ignoreWhileAnimating=null}),x!==v&&(v.animateAll(),v._ignoreWhileAnimating=null)),(r===Fn&&!Fn.animated||r===n&&!r.animated)&&(Jf=null),!a.dragoverBubble&&!e.rootEl&&r!==document&&(Fn.parentNode[cl]._isOutsideThisEl(e.target),!oe&&Kd(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),E=!0}function $(){bu=Eo(Fn),ld=Eo(Fn,a.draggable),Sl({sortable:x,name:"change",toEl:n,newIndex:bu,newDraggableIndex:ld,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=mc(r,a.draggable,n,!0),A("dragOver"),Dr.eventCanceled)return E;if(Fn.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||x._ignoreWhileAnimating===r)return D(!1);if(Jv=!1,c&&!a.disabled&&(d?p||(o=Lo!==Zs):ja===this||(this.lastPutMode=P0.checkPull(this,c,Fn,e))&&l.checkPut(this,c,Fn,e))){if(m=this._getDirection(e,r)==="vertical",i=Xs(Fn),A("dragOverValid"),Dr.eventCanceled)return E;if(o)return Lo=Zs,k(),this._hideClone(),A("revert"),Dr.eventCanceled||(tf?Zs.insertBefore(Fn,tf):Zs.appendChild(Fn)),D(!0);var Y=W_(n,a.draggable);if(!Y||sZ(e,m,this)&&!Y.animated){if(Y===Fn)return D(!1);if(Y&&n===e.target&&(r=Y),r&&(s=Xs(r)),A0(Zs,n,Fn,i,r,s,e,!!r)!==!1)return k(),n.appendChild(Fn),Lo=n,$(),D(!0)}else if(Y&&iZ(e,m,this)){var te=Dp(n,0,a,!0);if(te===Fn)return D(!1);if(r=te,s=Xs(r),A0(Zs,n,Fn,i,r,s,e,!1)!==!1)return k(),n.insertBefore(Fn,te),Lo=n,$(),D(!0)}else if(r.parentNode===n){s=Xs(r);var me=0,pe,I=Fn.parentNode!==n,z=!QK(Fn.animated&&Fn.toRect||i,r.animated&&r.toRect||s,m),K=m?"top":"left",N=V5(r,"top","top")||V5(Fn,"top","top"),B=N?N.scrollTop:void 0;Jf!==r&&(pe=s[K],Xg=!1,M0=!z&&a.invertSwap||I),me=oZ(e,r,s,m,z?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,M0,Jf===r);var V;if(me!==0){var R=Eo(Fn);do R-=me,V=Lo.children[R];while(V&&(ar(V,"display")==="none"||V===oi))}if(me===0||V===r)return D(!1);Jf=r,Zg=me;var j=r.nextElementSibling,W=!1;W=me===1;var X=A0(Zs,n,Fn,i,r,s,e,W);if(X!==!1)return(X===1||X===-1)&&(W=X===1),Rb=!0,setTimeout(rZ,30),k(),W&&!j?n.appendChild(Fn):r.parentNode.insertBefore(Fn,W?j:r),N&&dP(N,0,B-N.scrollTop),Lo=Fn.parentNode,pe!==void 0&&!M0&&(dv=Math.abs(pe-Xs(r)[K])),$(),D(!0)}if(n.contains(Fn))return D(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){wi(document,"mousemove",this._onTouchMove),wi(document,"touchmove",this._onTouchMove),wi(document,"pointermove",this._onTouchMove),wi(document,"dragover",Kd),wi(document,"mousemove",Kd),wi(document,"touchmove",Kd)},_offUpEvents:function(){var e=this.el.ownerDocument;wi(e,"mouseup",this._onDrop),wi(e,"touchend",this._onDrop),wi(e,"pointerup",this._onDrop),wi(e,"touchcancel",this._onDrop),wi(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(bu=Eo(Fn),ld=Eo(Fn,r.draggable),Gl("drop",this,{evt:e}),Lo=Fn&&Fn.parentNode,bu=Eo(Fn),ld=Eo(Fn,r.draggable),Dr.eventCanceled){this._nulling();return}up=!1,M0=!1,Xg=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fb(this.cloneId),Fb(this._dragStartId),this.nativeDraggable&&(wi(document,"drop",this),wi(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),qg&&ar(document.body,"user-select",""),ar(Fn,"transform",""),e&&(Cg&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),oi&&oi.parentNode&&oi.parentNode.removeChild(oi),(Zs===Lo||ja&&ja.lastPutMode!=="clone")&&So&&So.parentNode&&So.parentNode.removeChild(So),Fn&&(this.nativeDraggable&&wi(Fn,"dragend",this),m2(Fn),Fn.style["will-change"]="",Cg&&!up&&ho(Fn,ja?ja.options.ghostClass:this.options.ghostClass,!1),ho(Fn,this.options.chosenClass,!1),Sl({sortable:this,name:"unchoose",toEl:Lo,newIndex:null,newDraggableIndex:null,originalEvent:e}),Zs!==Lo?(bu>=0&&(Sl({rootEl:Lo,name:"add",toEl:Lo,fromEl:Zs,originalEvent:e}),Sl({sortable:this,name:"remove",toEl:Lo,originalEvent:e}),Sl({rootEl:Lo,name:"sort",toEl:Lo,fromEl:Zs,originalEvent:e}),Sl({sortable:this,name:"sort",toEl:Lo,originalEvent:e})),ja&&ja.save()):bu!==dp&&bu>=0&&(Sl({sortable:this,name:"update",toEl:Lo,originalEvent:e}),Sl({sortable:this,name:"sort",toEl:Lo,originalEvent:e})),Dr.active&&((bu==null||bu===-1)&&(bu=dp,ld=Kg),Sl({sortable:this,name:"end",toEl:Lo,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gl("nulling",this),Zs=Fn=Lo=oi=tf=So=hv=ud=Yd=dc=Cg=bu=ld=dp=Kg=Jf=Zg=ja=P0=Dr.dragged=Dr.ghost=Dr.clone=Dr.active=null,ey.forEach(function(e){e.checked=!0}),ey.length=f2=p2=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":Fn&&(this._onDragOver(e),nZ(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,i=0,s=r.length,o=this.options;i<s;i++)n=r[i],mc(n,o.draggable,this.el,!1)&&e.push(n.getAttribute(o.dataIdAttr)||lZ(n));return e},sort:function(e,n){var r={},i=this.el;this.toArray().forEach(function(s,o){var a=i.children[o];mc(a,this.options.draggable,i,!1)&&(r[s]=a)},this),n&&this.captureAnimationState(),e.forEach(function(s){r[s]&&(i.removeChild(r[s]),i.appendChild(r[s]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return mc(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var i=Bm.modifyOption(this,e,n);typeof i<"u"?r[e]=i:r[e]=n,e==="group"&&gP(r)},destroy:function(){Gl("destroy",this);var e=this.el;e[cl]=null,wi(e,"mousedown",this._onTapStart),wi(e,"touchstart",this._onTapStart),wi(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(wi(e,"dragover",this),wi(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Qv.splice(Qv.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ud){if(Gl("hideClone",this),Dr.eventCanceled)return;ar(So,"display","none"),this.options.removeCloneOnHide&&So.parentNode&&So.parentNode.removeChild(So),ud=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ud){if(Gl("showClone",this),Dr.eventCanceled)return;Fn.parentNode==Zs&&!this.options.group.revertClone?Zs.insertBefore(So,Fn):tf?Zs.insertBefore(So,tf):Zs.appendChild(So),this.options.group.revertClone&&this.animate(Fn,So),ar(So,"display",""),ud=!1}}};function nZ(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function A0(t,e,n,r,i,s,o,a){var l,c=t[cl],d=c.options.onMove,p;return window.CustomEvent&&!zh&&!Im?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=t,l.dragged=n,l.draggedRect=r,l.related=i||e,l.relatedRect=s||Xs(e),l.willInsertAfter=a,l.originalEvent=o,t.dispatchEvent(l),d&&(p=d.call(c,l,o)),p}function m2(t){t.draggable=!1}function rZ(){Rb=!1}function iZ(t,e,n){var r=Xs(Dp(n.el,0,n.options,!0)),i=10;return e?t.clientX<r.left-i||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-i||t.clientY<r.bottom&&t.clientX<r.left}function sZ(t,e,n){var r=Xs(W_(n.el,n.options.draggable)),i=10;return e?t.clientX>r.right+i||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+i}function oZ(t,e,n,r,i,s,o,a){var l=r?t.clientY:t.clientX,c=r?n.height:n.width,d=r?n.top:n.left,p=r?n.bottom:n.right,v=!1;if(!o){if(a&&dv<c*i){if(!Xg&&(Zg===1?l>d+c*s/2:l<p-c*s/2)&&(Xg=!0),Xg)v=!0;else if(Zg===1?l<d+dv:l>p-dv)return-Zg}else if(l>d+c*(1-i)/2&&l<p-c*(1-i)/2)return aZ(e)}return v=v||o,v&&(l<d+c*s/2||l>p-c*s/2)?l>d+c/2?1:-1:0}function aZ(t){return Eo(Fn)<Eo(t)?1:-1}function lZ(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function uZ(t){ey.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&ey.push(r)}}function fv(t){return setTimeout(t,0)}function Fb(t){return clearTimeout(t)}Gy&&Ai(document,"touchmove",function(t){(Dr.active||up)&&t.cancelable&&t.preventDefault()});Dr.utils={on:Ai,off:wi,css:ar,find:cP,is:function(e,n){return!!mc(e,n,e,!1)},extend:GK,throttle:hP,closest:mc,toggleClass:ho,clone:G_,index:Eo,nextTick:fv,cancelNextTick:Fb,detectDirection:pP,getChild:Dp};Dr.get=function(t){return t[cl]};Dr.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Dr.utils=th(th({},Dr.utils),r.utils)),Bm.mount(r)})};Dr.create=function(t,e){return new Dr(t,e)};Dr.version=VK;var Qo=[],Eg,jb,zb=!1,v2,y2,ty,Pg;function cZ(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Ai(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Ai(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Ai(document,"touchmove",this._handleFallbackAutoScroll):Ai(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?wi(document,"dragover",this._handleAutoScroll):(wi(document,"pointermove",this._handleFallbackAutoScroll),wi(document,"touchmove",this._handleFallbackAutoScroll),wi(document,"mousemove",this._handleFallbackAutoScroll)),Y5(),pv(),qK()},nulling:function(){ty=jb=Eg=zb=Pg=v2=y2=null,Qo.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var i=this,s=(n.touches?n.touches[0]:n).clientX,o=(n.touches?n.touches[0]:n).clientY,a=document.elementFromPoint(s,o);if(ty=n,r||this.options.forceAutoScrollFallback||Im||zh||qg){b2(n,this.options,a,r);var l=dd(a,!0);zb&&(!Pg||s!==v2||o!==y2)&&(Pg&&Y5(),Pg=setInterval(function(){var c=dd(document.elementFromPoint(s,o),!0);c!==l&&(l=c,pv()),b2(n,i.options,c,r)},10),v2=s,y2=o)}else{if(!this.options.bubbleScroll||dd(a,!0)===Jc()){pv();return}b2(n,this.options,dd(a,!1),!1)}}},Zu(t,{pluginName:"scroll",initializeByDefault:!0})}function pv(){Qo.forEach(function(t){clearInterval(t.pid)}),Qo=[]}function Y5(){clearInterval(Pg)}var b2=hP(function(t,e,n,r){if(e.scroll){var i=(t.touches?t.touches[0]:t).clientX,s=(t.touches?t.touches[0]:t).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=Jc(),c=!1,d;jb!==n&&(jb=n,pv(),Eg=e.scroll,d=e.scrollFn,Eg===!0&&(Eg=dd(n,!0)));var p=0,v=Eg;do{var m=v,x=Xs(m),E=x.top,A=x.bottom,k=x.left,D=x.right,$=x.width,Y=x.height,te=void 0,me=void 0,pe=m.scrollWidth,I=m.scrollHeight,z=ar(m),K=m.scrollLeft,N=m.scrollTop;m===l?(te=$<pe&&(z.overflowX==="auto"||z.overflowX==="scroll"||z.overflowX==="visible"),me=Y<I&&(z.overflowY==="auto"||z.overflowY==="scroll"||z.overflowY==="visible")):(te=$<pe&&(z.overflowX==="auto"||z.overflowX==="scroll"),me=Y<I&&(z.overflowY==="auto"||z.overflowY==="scroll"));var B=te&&(Math.abs(D-i)<=o&&K+$<pe)-(Math.abs(k-i)<=o&&!!K),V=me&&(Math.abs(A-s)<=o&&N+Y<I)-(Math.abs(E-s)<=o&&!!N);if(!Qo[p])for(var R=0;R<=p;R++)Qo[R]||(Qo[R]={});(Qo[p].vx!=B||Qo[p].vy!=V||Qo[p].el!==m)&&(Qo[p].el=m,Qo[p].vx=B,Qo[p].vy=V,clearInterval(Qo[p].pid),(B!=0||V!=0)&&(c=!0,Qo[p].pid=setInterval((function(){r&&this.layer===0&&Dr.active._onTouchMove(ty);var j=Qo[this.layer].vy?Qo[this.layer].vy*a:0,W=Qo[this.layer].vx?Qo[this.layer].vx*a:0;typeof d=="function"&&d.call(Dr.dragged.parentNode[cl],W,j,t,ty,Qo[this.layer].el)!=="continue"||dP(Qo[this.layer].el,W,j)}).bind({layer:p}),24))),p++}while(e.bubbleScroll&&v!==l&&(v=dd(v,!1)));zb=c}},30),yP=function(e){var n=e.originalEvent,r=e.putSortable,i=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(n){var c=r||s;a();var d=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,p=document.elementFromPoint(d.clientX,d.clientY);l(),c&&!c.el.contains(p)&&(o("spill"),this.onSpill({dragEl:i,putSortable:r}))}};function q_(){}q_.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var i=Dp(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(n,i):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:yP};Zu(q_,{pluginName:"revertOnSpill"});function Y_(){}Y_.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,i=r||this.sortable;i.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),i.animateAll()},drop:yP};Zu(Y_,{pluginName:"removeOnSpill"});var ju;function hZ(){function t(){this.defaults={swapClass:"sortable-swap-highlight"}}return t.prototype={dragStart:function(n){var r=n.dragEl;ju=r},dragOverValid:function(n){var r=n.completed,i=n.target,s=n.onMove,o=n.activeSortable,a=n.changed,l=n.cancel;if(o.options.swap){var c=this.sortable.el,d=this.options;if(i&&i!==c){var p=ju;s(i)!==!1?(ho(i,d.swapClass,!0),ju=i):ju=null,p&&p!==ju&&ho(p,d.swapClass,!1)}a(),r(!0),l()}},drop:function(n){var r=n.activeSortable,i=n.putSortable,s=n.dragEl,o=i||this.sortable,a=this.options;ju&&ho(ju,a.swapClass,!1),ju&&(a.swap||i&&i.options.swap)&&s!==ju&&(o.captureAnimationState(),o!==r&&r.captureAnimationState(),dZ(s,ju),o.animateAll(),o!==r&&r.animateAll())},nulling:function(){ju=null}},Zu(t,{pluginName:"swap",eventProperties:function(){return{swapItem:ju}}})}function dZ(t,e){var n=t.parentNode,r=e.parentNode,i,s;!n||!r||n.isEqualNode(e)||r.isEqualNode(t)||(i=Eo(t),s=Eo(e),n.isEqualNode(r)&&i<s&&s++,n.insertBefore(e,n.children[i]),r.insertBefore(t,r.children[s]))}var Kr=[],yu=[],ag,fc,lg=!1,ql=!1,Qf=!1,Ts,ug,T0;function fZ(){function t(e){for(var n in this)n.charAt(0)==="_"&&typeof this[n]=="function"&&(this[n]=this[n].bind(this));e.options.supportPointer?Ai(document,"pointerup",this._deselectMultiDrag):(Ai(document,"mouseup",this._deselectMultiDrag),Ai(document,"touchend",this._deselectMultiDrag)),Ai(document,"keydown",this._checkKeyDown),Ai(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(i,s){var o="";Kr.length&&fc===e?Kr.forEach(function(a,l){o+=(l?", ":"")+a.textContent}):o=s.textContent,i.setData("Text",o)}}}return t.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(n){var r=n.dragEl;Ts=r},delayEnded:function(){this.isMultiDrag=~Kr.indexOf(Ts)},setupClone:function(n){var r=n.sortable,i=n.cancel;if(this.isMultiDrag){for(var s=0;s<Kr.length;s++)yu.push(G_(Kr[s])),yu[s].sortableIndex=Kr[s].sortableIndex,yu[s].draggable=!1,yu[s].style["will-change"]="",ho(yu[s],this.options.selectedClass,!1),Kr[s]===Ts&&ho(yu[s],this.options.chosenClass,!1);r._hideClone(),i()}},clone:function(n){var r=n.sortable,i=n.rootEl,s=n.dispatchSortableEvent,o=n.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||Kr.length&&fc===r&&(K5(!0,i),s("clone"),o()))},showClone:function(n){var r=n.cloneNowShown,i=n.rootEl,s=n.cancel;this.isMultiDrag&&(K5(!1,i),yu.forEach(function(o){ar(o,"display","")}),r(),T0=!1,s())},hideClone:function(n){var r=this;n.sortable;var i=n.cloneNowHidden,s=n.cancel;this.isMultiDrag&&(yu.forEach(function(o){ar(o,"display","none"),r.options.removeCloneOnHide&&o.parentNode&&o.parentNode.removeChild(o)}),i(),T0=!0,s())},dragStartGlobal:function(n){n.sortable,!this.isMultiDrag&&fc&&fc.multiDrag._deselectMultiDrag(),Kr.forEach(function(r){r.sortableIndex=Eo(r)}),Kr=Kr.sort(function(r,i){return r.sortableIndex-i.sortableIndex}),Qf=!0},dragStarted:function(n){var r=this,i=n.sortable;if(this.isMultiDrag){if(this.options.sort&&(i.captureAnimationState(),this.options.animation)){Kr.forEach(function(o){o!==Ts&&ar(o,"position","absolute")});var s=Xs(Ts,!1,!0,!0);Kr.forEach(function(o){o!==Ts&&H5(o,s)}),ql=!0,lg=!0}i.animateAll(function(){ql=!1,lg=!1,r.options.animation&&Kr.forEach(function(o){h2(o)}),r.options.sort&&D0()})}},dragOver:function(n){var r=n.target,i=n.completed,s=n.cancel;ql&&~Kr.indexOf(r)&&(i(!1),s())},revert:function(n){var r=n.fromSortable,i=n.rootEl,s=n.sortable,o=n.dragRect;Kr.length>1&&(Kr.forEach(function(a){s.addAnimationState({target:a,rect:ql?Xs(a):o}),h2(a),a.fromRect=o,r.removeAnimationState(a)}),ql=!1,pZ(!this.options.removeCloneOnHide,i))},dragOverCompleted:function(n){var r=n.sortable,i=n.isOwner,s=n.insertion,o=n.activeSortable,a=n.parentEl,l=n.putSortable,c=this.options;if(s){if(i&&o._hideClone(),lg=!1,c.animation&&Kr.length>1&&(ql||!i&&!o.options.sort&&!l)){var d=Xs(Ts,!1,!0,!0);Kr.forEach(function(v){v!==Ts&&(H5(v,d),a.appendChild(v))}),ql=!0}if(!i)if(ql||D0(),Kr.length>1){var p=T0;o._showClone(r),o.options.animation&&!T0&&p&&yu.forEach(function(v){o.addAnimationState({target:v,rect:ug}),v.fromRect=ug,v.thisAnimationDuration=null})}else o._showClone(r)}},dragOverAnimationCapture:function(n){var r=n.dragRect,i=n.isOwner,s=n.activeSortable;if(Kr.forEach(function(a){a.thisAnimationDuration=null}),s.options.animation&&!i&&s.multiDrag.isMultiDrag){ug=Zu({},r);var o=gf(Ts,!0);ug.top-=o.f,ug.left-=o.e}},dragOverAnimationComplete:function(){ql&&(ql=!1,D0())},drop:function(n){var r=n.originalEvent,i=n.rootEl,s=n.parentEl,o=n.sortable,a=n.dispatchSortableEvent,l=n.oldIndex,c=n.putSortable,d=c||this.sortable;if(r){var p=this.options,v=s.children;if(!Qf)if(p.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),ho(Ts,p.selectedClass,!~Kr.indexOf(Ts)),~Kr.indexOf(Ts))Kr.splice(Kr.indexOf(Ts),1),ag=null,Sg({sortable:o,rootEl:i,name:"deselect",targetEl:Ts});else{if(Kr.push(Ts),Sg({sortable:o,rootEl:i,name:"select",targetEl:Ts}),r.shiftKey&&ag&&o.el.contains(ag)){var m=Eo(ag),x=Eo(Ts);if(~m&&~x&&m!==x){var E,A;for(x>m?(A=m,E=x):(A=x,E=m+1);A<E;A++)~Kr.indexOf(v[A])||(ho(v[A],p.selectedClass,!0),Kr.push(v[A]),Sg({sortable:o,rootEl:i,name:"select",targetEl:v[A]}))}}else ag=Ts;fc=d}if(Qf&&this.isMultiDrag){if(ql=!1,(s[cl].options.sort||s!==i)&&Kr.length>1){var k=Xs(Ts),D=Eo(Ts,":not(."+this.options.selectedClass+")");if(!lg&&p.animation&&(Ts.thisAnimationDuration=null),d.captureAnimationState(),!lg&&(p.animation&&(Ts.fromRect=k,Kr.forEach(function(Y){if(Y.thisAnimationDuration=null,Y!==Ts){var te=ql?Xs(Y):k;Y.fromRect=te,d.addAnimationState({target:Y,rect:te})}})),D0(),Kr.forEach(function(Y){v[D]?s.insertBefore(Y,v[D]):s.appendChild(Y),D++}),l===Eo(Ts))){var $=!1;Kr.forEach(function(Y){if(Y.sortableIndex!==Eo(Y)){$=!0;return}}),$&&a("update")}Kr.forEach(function(Y){h2(Y)}),d.animateAll()}fc=d}(i===s||c&&c.lastPutMode!=="clone")&&yu.forEach(function(Y){Y.parentNode&&Y.parentNode.removeChild(Y)})}},nullingGlobal:function(){this.isMultiDrag=Qf=!1,yu.length=0},destroyGlobal:function(){this._deselectMultiDrag(),wi(document,"pointerup",this._deselectMultiDrag),wi(document,"mouseup",this._deselectMultiDrag),wi(document,"touchend",this._deselectMultiDrag),wi(document,"keydown",this._checkKeyDown),wi(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(n){if(!(typeof Qf<"u"&&Qf)&&fc===this.sortable&&!(n&&mc(n.target,this.options.draggable,this.sortable.el,!1))&&!(n&&n.button!==0))for(;Kr.length;){var r=Kr[0];ho(r,this.options.selectedClass,!1),Kr.shift(),Sg({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:r})}},_checkKeyDown:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(n){n.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},Zu(t,{pluginName:"multiDrag",utils:{select:function(n){var r=n.parentNode[cl];!r||!r.options.multiDrag||~Kr.indexOf(n)||(fc&&fc!==r&&(fc.multiDrag._deselectMultiDrag(),fc=r),ho(n,r.options.selectedClass,!0),Kr.push(n))},deselect:function(n){var r=n.parentNode[cl],i=Kr.indexOf(n);!r||!r.options.multiDrag||!~i||(ho(n,r.options.selectedClass,!1),Kr.splice(i,1))}},eventProperties:function(){var n=this,r=[],i=[];return Kr.forEach(function(s){r.push({multiDragElement:s,index:s.sortableIndex});var o;ql&&s!==Ts?o=-1:ql?o=Eo(s,":not(."+n.options.selectedClass+")"):o=Eo(s),i.push({multiDragElement:s,index:o})}),{items:RK(Kr),clones:[].concat(yu),oldIndicies:r,newIndicies:i}},optionListeners:{multiDragKey:function(n){return n=n.toLowerCase(),n==="ctrl"?n="Control":n.length>1&&(n=n.charAt(0).toUpperCase()+n.substr(1)),n}}})}function pZ(t,e){Kr.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function K5(t,e){yu.forEach(function(n,r){var i=e.children[n.sortableIndex+(t?Number(r):0)];i?e.insertBefore(n,i):e.appendChild(n)})}function D0(){Kr.forEach(function(t){t!==Ts&&t.parentNode&&t.parentNode.removeChild(t)})}Dr.mount(new cZ);Dr.mount(Y_,q_);const gZ=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:fZ,Sortable:Dr,Swap:hZ,default:Dr},Symbol.toStringTag,{value:"Module"})),mZ=_E(gZ);(function(t,e){(function(r,i){t.exports=i(OK,mZ)})(typeof self<"u"?self:Ca,function(n,r){return function(i){var s={};function o(a){if(s[a])return s[a].exports;var l=s[a]={i:a,l:!1,exports:{}};return i[a].call(l.exports,l,l.exports,o),l.l=!0,l.exports}return o.m=i,o.c=s,o.d=function(a,l,c){o.o(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:c})},o.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},o.t=function(a,l){if(l&1&&(a=o(a)),l&8||l&4&&typeof a=="object"&&a&&a.__esModule)return a;var c=Object.create(null);if(o.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:a}),l&2&&typeof a!="string")for(var d in a)o.d(c,d,(function(p){return a[p]}).bind(null,d));return c},o.n=function(a){var l=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(l,"a",l),l},o.o=function(a,l){return Object.prototype.hasOwnProperty.call(a,l)},o.p="",o(o.s="fb15")}({"00ee":function(i,s,o){var a=o("b622"),l=a("toStringTag"),c={};c[l]="z",i.exports=String(c)==="[object z]"},"0366":function(i,s,o){var a=o("1c0b");i.exports=function(l,c,d){if(a(l),c===void 0)return l;switch(d){case 0:return function(){return l.call(c)};case 1:return function(p){return l.call(c,p)};case 2:return function(p,v){return l.call(c,p,v)};case 3:return function(p,v,m){return l.call(c,p,v,m)}}return function(){return l.apply(c,arguments)}}},"057f":function(i,s,o){var a=o("fc6a"),l=o("241c").f,c={}.toString,d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],p=function(v){try{return l(v)}catch{return d.slice()}};i.exports.f=function(m){return d&&c.call(m)=="[object Window]"?p(m):l(a(m))}},"06cf":function(i,s,o){var a=o("83ab"),l=o("d1e7"),c=o("5c6c"),d=o("fc6a"),p=o("c04e"),v=o("5135"),m=o("0cfb"),x=Object.getOwnPropertyDescriptor;s.f=a?x:function(A,k){if(A=d(A),k=p(k,!0),m)try{return x(A,k)}catch{}if(v(A,k))return c(!l.f.call(A,k),A[k])}},"0cfb":function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("cc12");i.exports=!a&&!l(function(){return Object.defineProperty(c("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(i,s,o){var a=o("23e7"),l=o("d58f").left,c=o("a640"),d=o("ae40"),p=c("reduce"),v=d("reduce",{1:0});a({target:"Array",proto:!0,forced:!p||!v},{reduce:function(x){return l(this,x,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(i,s,o){var a=o("c6b6"),l=o("9263");i.exports=function(c,d){var p=c.exec;if(typeof p=="function"){var v=p.call(c,d);if(typeof v!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return v}if(a(c)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return l.call(c,d)}},"159b":function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("17c2"),d=o("9112");for(var p in l){var v=a[p],m=v&&v.prototype;if(m&&m.forEach!==c)try{d(m,"forEach",c)}catch{m.forEach=c}}},"17c2":function(i,s,o){var a=o("b727").forEach,l=o("a640"),c=o("ae40"),d=l("forEach"),p=c("forEach");i.exports=!d||!p?function(m){return a(this,m,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(i,s,o){var a=o("d066");i.exports=a("document","documentElement")},"1c0b":function(i,s){i.exports=function(o){if(typeof o!="function")throw TypeError(String(o)+" is not a function");return o}},"1c7e":function(i,s,o){var a=o("b622"),l=a("iterator"),c=!1;try{var d=0,p={next:function(){return{done:!!d++}},return:function(){c=!0}};p[l]=function(){return this},Array.from(p,function(){throw 2})}catch{}i.exports=function(v,m){if(!m&&!c)return!1;var x=!1;try{var E={};E[l]=function(){return{next:function(){return{done:x=!0}}}},v(E)}catch{}return x}},"1d80":function(i,s){i.exports=function(o){if(o==null)throw TypeError("Can't call method on "+o);return o}},"1dde":function(i,s,o){var a=o("d039"),l=o("b622"),c=o("2d00"),d=l("species");i.exports=function(p){return c>=51||!a(function(){var v=[],m=v.constructor={};return m[d]=function(){return{foo:1}},v[p](Boolean).foo!==1})}},"23cb":function(i,s,o){var a=o("a691"),l=Math.max,c=Math.min;i.exports=function(d,p){var v=a(d);return v<0?l(v+p,0):c(v,p)}},"23e7":function(i,s,o){var a=o("da84"),l=o("06cf").f,c=o("9112"),d=o("6eeb"),p=o("ce4e"),v=o("e893"),m=o("94ca");i.exports=function(x,E){var A=x.target,k=x.global,D=x.stat,$,Y,te,me,pe,I;if(k?Y=a:D?Y=a[A]||p(A,{}):Y=(a[A]||{}).prototype,Y)for(te in E){if(pe=E[te],x.noTargetGet?(I=l(Y,te),me=I&&I.value):me=Y[te],$=m(k?te:A+(D?".":"#")+te,x.forced),!$&&me!==void 0){if(typeof pe==typeof me)continue;v(pe,me)}(x.sham||me&&me.sham)&&c(pe,"sham",!0),d(Y,te,pe,x)}}},"241c":function(i,s,o){var a=o("ca84"),l=o("7839"),c=l.concat("length","prototype");s.f=Object.getOwnPropertyNames||function(p){return a(p,c)}},"25f0":function(i,s,o){var a=o("6eeb"),l=o("825a"),c=o("d039"),d=o("ad6d"),p="toString",v=RegExp.prototype,m=v[p],x=c(function(){return m.call({source:"a",flags:"b"})!="/a/b"}),E=m.name!=p;(x||E)&&a(RegExp.prototype,p,function(){var k=l(this),D=String(k.source),$=k.flags,Y=String($===void 0&&k instanceof RegExp&&!("flags"in v)?d.call(k):$);return"/"+D+"/"+Y},{unsafe:!0})},"2ca0":function(i,s,o){var a=o("23e7"),l=o("06cf").f,c=o("50c4"),d=o("5a34"),p=o("1d80"),v=o("ab13"),m=o("c430"),x="".startsWith,E=Math.min,A=v("startsWith"),k=!m&&!A&&!!function(){var D=l(String.prototype,"startsWith");return D&&!D.writable}();a({target:"String",proto:!0,forced:!k&&!A},{startsWith:function($){var Y=String(p(this));d($);var te=c(E(arguments.length>1?arguments[1]:void 0,Y.length)),me=String($);return x?x.call(Y,me,te):Y.slice(te,te+me.length)===me}})},"2d00":function(i,s,o){var a=o("da84"),l=o("342f"),c=a.process,d=c&&c.versions,p=d&&d.v8,v,m;p?(v=p.split("."),m=v[0]+v[1]):l&&(v=l.match(/Edge\/(\d+)/),(!v||v[1]>=74)&&(v=l.match(/Chrome\/(\d+)/),v&&(m=v[1]))),i.exports=m&&+m},"342f":function(i,s,o){var a=o("d066");i.exports=a("navigator","userAgent")||""},"35a1":function(i,s,o){var a=o("f5df"),l=o("3f8c"),c=o("b622"),d=c("iterator");i.exports=function(p){if(p!=null)return p[d]||p["@@iterator"]||l[a(p)]}},"37e8":function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("825a"),d=o("df75");i.exports=a?Object.defineProperties:function(v,m){c(v);for(var x=d(m),E=x.length,A=0,k;E>A;)l.f(v,k=x[A++],m[k]);return v}},"3bbe":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l)&&l!==null)throw TypeError("Can't set "+String(l)+" as a prototype");return l}},"3ca3":function(i,s,o){var a=o("6547").charAt,l=o("69f3"),c=o("7dd0"),d="String Iterator",p=l.set,v=l.getterFor(d);c(String,"String",function(m){p(this,{type:d,string:String(m),index:0})},function(){var x=v(this),E=x.string,A=x.index,k;return A>=E.length?{value:void 0,done:!0}:(k=a(E,A),x.index+=k.length,{value:k,done:!1})})},"3f8c":function(i,s){i.exports={}},4160:function(i,s,o){var a=o("23e7"),l=o("17c2");a({target:"Array",proto:!0,forced:[].forEach!=l},{forEach:l})},"428f":function(i,s,o){var a=o("da84");i.exports=a},"44ad":function(i,s,o){var a=o("d039"),l=o("c6b6"),c="".split;i.exports=a(function(){return!Object("z").propertyIsEnumerable(0)})?function(d){return l(d)=="String"?c.call(d,""):Object(d)}:Object},"44d2":function(i,s,o){var a=o("b622"),l=o("7c73"),c=o("9bf2"),d=a("unscopables"),p=Array.prototype;p[d]==null&&c.f(p,d,{configurable:!0,value:l(null)}),i.exports=function(v){p[d][v]=!0}},"44e7":function(i,s,o){var a=o("861d"),l=o("c6b6"),c=o("b622"),d=c("match");i.exports=function(p){var v;return a(p)&&((v=p[d])!==void 0?!!v:l(p)=="RegExp")}},4930:function(i,s,o){var a=o("d039");i.exports=!!Object.getOwnPropertySymbols&&!a(function(){return!String(Symbol())})},"4d64":function(i,s,o){var a=o("fc6a"),l=o("50c4"),c=o("23cb"),d=function(p){return function(v,m,x){var E=a(v),A=l(E.length),k=c(x,A),D;if(p&&m!=m){for(;A>k;)if(D=E[k++],D!=D)return!0}else for(;A>k;k++)if((p||k in E)&&E[k]===m)return p||k||0;return!p&&-1}};i.exports={includes:d(!0),indexOf:d(!1)}},"4de4":function(i,s,o){var a=o("23e7"),l=o("b727").filter,c=o("1dde"),d=o("ae40"),p=c("filter"),v=d("filter");a({target:"Array",proto:!0,forced:!p||!v},{filter:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(i,s,o){var a=o("0366"),l=o("7b0b"),c=o("9bdd"),d=o("e95a"),p=o("50c4"),v=o("8418"),m=o("35a1");i.exports=function(E){var A=l(E),k=typeof this=="function"?this:Array,D=arguments.length,$=D>1?arguments[1]:void 0,Y=$!==void 0,te=m(A),me=0,pe,I,z,K,N,B;if(Y&&($=a($,D>2?arguments[2]:void 0,2)),te!=null&&!(k==Array&&d(te)))for(K=te.call(A),N=K.next,I=new k;!(z=N.call(K)).done;me++)B=Y?c(K,$,[z.value,me],!0):z.value,v(I,me,B);else for(pe=p(A.length),I=new k(pe);pe>me;me++)B=Y?$(A[me],me):A[me],v(I,me,B);return I.length=me,I}},"4fad":function(i,s,o){var a=o("23e7"),l=o("6f53").entries;a({target:"Object",stat:!0},{entries:function(d){return l(d)}})},"50c4":function(i,s,o){var a=o("a691"),l=Math.min;i.exports=function(c){return c>0?l(a(c),9007199254740991):0}},5135:function(i,s){var o={}.hasOwnProperty;i.exports=function(a,l){return o.call(a,l)}},5319:function(i,s,o){var a=o("d784"),l=o("825a"),c=o("7b0b"),d=o("50c4"),p=o("a691"),v=o("1d80"),m=o("8aa5"),x=o("14c3"),E=Math.max,A=Math.min,k=Math.floor,D=/\$([$&'`]|\d\d?|<[^>]*>)/g,$=/\$([$&'`]|\d\d?)/g,Y=function(te){return te===void 0?te:String(te)};a("replace",2,function(te,me,pe,I){var z=I.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,K=I.REPLACE_KEEPS_$0,N=z?"$":"$0";return[function(R,j){var W=v(this),X=R==null?void 0:R[te];return X!==void 0?X.call(R,W,j):me.call(String(W),R,j)},function(V,R){if(!z&&K||typeof R=="string"&&R.indexOf(N)===-1){var j=pe(me,V,this,R);if(j.done)return j.value}var W=l(V),X=String(this),oe=typeof R=="function";oe||(R=String(R));var _e=W.global;if(_e){var Ce=W.unicode;W.lastIndex=0}for(var De=[];;){var Z=x(W,X);if(Z===null||(De.push(Z),!_e))break;var G=String(Z[0]);G===""&&(W.lastIndex=m(X,d(W.lastIndex),Ce))}for(var re="",he=0,ce=0;ce<De.length;ce++){Z=De[ce];for(var ve=String(Z[0]),ee=E(A(p(Z.index),X.length),0),J=[],Oe=1;Oe<Z.length;Oe++)J.push(Y(Z[Oe]));var Te=Z.groups;if(oe){var Ye=[ve].concat(J,ee,X);Te!==void 0&&Ye.push(Te);var ge=String(R.apply(void 0,Ye))}else ge=B(ve,X,ee,J,Te,R);ee>=he&&(re+=X.slice(he,ee)+ge,he=ee+ve.length)}return re+X.slice(he)}];function B(V,R,j,W,X,oe){var _e=j+V.length,Ce=W.length,De=$;return X!==void 0&&(X=c(X),De=D),me.call(oe,De,function(Z,G){var re;switch(G.charAt(0)){case"$":return"$";case"&":return V;case"`":return R.slice(0,j);case"'":return R.slice(_e);case"<":re=X[G.slice(1,-1)];break;default:var he=+G;if(he===0)return Z;if(he>Ce){var ce=k(he/10);return ce===0?Z:ce<=Ce?W[ce-1]===void 0?G.charAt(1):W[ce-1]+G.charAt(1):Z}re=W[he-1]}return re===void 0?"":re})}})},5692:function(i,s,o){var a=o("c430"),l=o("c6cd");(i.exports=function(c,d){return l[c]||(l[c]=d!==void 0?d:{})})("versions",[]).push({version:"3.6.5",mode:a?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(i,s,o){var a=o("d066"),l=o("241c"),c=o("7418"),d=o("825a");i.exports=a("Reflect","ownKeys")||function(v){var m=l.f(d(v)),x=c.f;return x?m.concat(x(v)):m}},"5a34":function(i,s,o){var a=o("44e7");i.exports=function(l){if(a(l))throw TypeError("The method doesn't accept regular expressions");return l}},"5c6c":function(i,s){i.exports=function(o,a){return{enumerable:!(o&1),configurable:!(o&2),writable:!(o&4),value:a}}},"5db7":function(i,s,o){var a=o("23e7"),l=o("a2bf"),c=o("7b0b"),d=o("50c4"),p=o("1c0b"),v=o("65f0");a({target:"Array",proto:!0},{flatMap:function(x){var E=c(this),A=d(E.length),k;return p(x),k=v(E,0),k.length=l(k,E,E,A,0,1,x,arguments.length>1?arguments[1]:void 0),k}})},6547:function(i,s,o){var a=o("a691"),l=o("1d80"),c=function(d){return function(p,v){var m=String(l(p)),x=a(v),E=m.length,A,k;return x<0||x>=E?d?"":void 0:(A=m.charCodeAt(x),A<55296||A>56319||x+1===E||(k=m.charCodeAt(x+1))<56320||k>57343?d?m.charAt(x):A:d?m.slice(x,x+2):(A-55296<<10)+(k-56320)+65536)}};i.exports={codeAt:c(!1),charAt:c(!0)}},"65f0":function(i,s,o){var a=o("861d"),l=o("e8b5"),c=o("b622"),d=c("species");i.exports=function(p,v){var m;return l(p)&&(m=p.constructor,typeof m=="function"&&(m===Array||l(m.prototype))?m=void 0:a(m)&&(m=m[d],m===null&&(m=void 0))),new(m===void 0?Array:m)(v===0?0:v)}},"69f3":function(i,s,o){var a=o("7f9a"),l=o("da84"),c=o("861d"),d=o("9112"),p=o("5135"),v=o("f772"),m=o("d012"),x=l.WeakMap,E,A,k,D=function(z){return k(z)?A(z):E(z,{})},$=function(z){return function(K){var N;if(!c(K)||(N=A(K)).type!==z)throw TypeError("Incompatible receiver, "+z+" required");return N}};if(a){var Y=new x,te=Y.get,me=Y.has,pe=Y.set;E=function(z,K){return pe.call(Y,z,K),K},A=function(z){return te.call(Y,z)||{}},k=function(z){return me.call(Y,z)}}else{var I=v("state");m[I]=!0,E=function(z,K){return d(z,I,K),K},A=function(z){return p(z,I)?z[I]:{}},k=function(z){return p(z,I)}}i.exports={set:E,get:A,has:k,enforce:D,getterFor:$}},"6eeb":function(i,s,o){var a=o("da84"),l=o("9112"),c=o("5135"),d=o("ce4e"),p=o("8925"),v=o("69f3"),m=v.get,x=v.enforce,E=String(String).split("String");(i.exports=function(A,k,D,$){var Y=$?!!$.unsafe:!1,te=$?!!$.enumerable:!1,me=$?!!$.noTargetGet:!1;if(typeof D=="function"&&(typeof k=="string"&&!c(D,"name")&&l(D,"name",k),x(D).source=E.join(typeof k=="string"?k:"")),A===a){te?A[k]=D:d(k,D);return}else Y?!me&&A[k]&&(te=!0):delete A[k];te?A[k]=D:l(A,k,D)})(Function.prototype,"toString",function(){return typeof this=="function"&&m(this).source||p(this)})},"6f53":function(i,s,o){var a=o("83ab"),l=o("df75"),c=o("fc6a"),d=o("d1e7").f,p=function(v){return function(m){for(var x=c(m),E=l(x),A=E.length,k=0,D=[],$;A>k;)$=E[k++],(!a||d.call(x,$))&&D.push(v?[$,x[$]]:x[$]);return D}};i.exports={entries:p(!0),values:p(!1)}},"73d9":function(i,s,o){var a=o("44d2");a("flatMap")},7418:function(i,s){s.f=Object.getOwnPropertySymbols},"746f":function(i,s,o){var a=o("428f"),l=o("5135"),c=o("e538"),d=o("9bf2").f;i.exports=function(p){var v=a.Symbol||(a.Symbol={});l(v,p)||d(v,p,{value:c.f(p)})}},7839:function(i,s){i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(i,s,o){var a=o("1d80");i.exports=function(l){return Object(a(l))}},"7c73":function(i,s,o){var a=o("825a"),l=o("37e8"),c=o("7839"),d=o("d012"),p=o("1be4"),v=o("cc12"),m=o("f772"),x=">",E="<",A="prototype",k="script",D=m("IE_PROTO"),$=function(){},Y=function(z){return E+k+x+z+E+"/"+k+x},te=function(z){z.write(Y("")),z.close();var K=z.parentWindow.Object;return z=null,K},me=function(){var z=v("iframe"),K="java"+k+":",N;return z.style.display="none",p.appendChild(z),z.src=String(K),N=z.contentWindow.document,N.open(),N.write(Y("document.F=Object")),N.close(),N.F},pe,I=function(){try{pe=document.domain&&new ActiveXObject("htmlfile")}catch{}I=pe?te(pe):me();for(var z=c.length;z--;)delete I[A][c[z]];return I()};d[D]=!0,i.exports=Object.create||function(K,N){var B;return K!==null?($[A]=a(K),B=new $,$[A]=null,B[D]=K):B=I(),N===void 0?B:l(B,N)}},"7dd0":function(i,s,o){var a=o("23e7"),l=o("9ed3"),c=o("e163"),d=o("d2bb"),p=o("d44e"),v=o("9112"),m=o("6eeb"),x=o("b622"),E=o("c430"),A=o("3f8c"),k=o("ae93"),D=k.IteratorPrototype,$=k.BUGGY_SAFARI_ITERATORS,Y=x("iterator"),te="keys",me="values",pe="entries",I=function(){return this};i.exports=function(z,K,N,B,V,R,j){l(N,K,B);var W=function(ce){if(ce===V&&De)return De;if(!$&&ce in _e)return _e[ce];switch(ce){case te:return function(){return new N(this,ce)};case me:return function(){return new N(this,ce)};case pe:return function(){return new N(this,ce)}}return function(){return new N(this)}},X=K+" Iterator",oe=!1,_e=z.prototype,Ce=_e[Y]||_e["@@iterator"]||V&&_e[V],De=!$&&Ce||W(V),Z=K=="Array"&&_e.entries||Ce,G,re,he;if(Z&&(G=c(Z.call(new z)),D!==Object.prototype&&G.next&&(!E&&c(G)!==D&&(d?d(G,D):typeof G[Y]!="function"&&v(G,Y,I)),p(G,X,!0,!0),E&&(A[X]=I))),V==me&&Ce&&Ce.name!==me&&(oe=!0,De=function(){return Ce.call(this)}),(!E||j)&&_e[Y]!==De&&v(_e,Y,De),A[K]=De,V)if(re={values:W(me),keys:R?De:W(te),entries:W(pe)},j)for(he in re)($||oe||!(he in _e))&&m(_e,he,re[he]);else a({target:K,proto:!0,forced:$||oe},re);return re}},"7f9a":function(i,s,o){var a=o("da84"),l=o("8925"),c=a.WeakMap;i.exports=typeof c=="function"&&/native code/.test(l(c))},"825a":function(i,s,o){var a=o("861d");i.exports=function(l){if(!a(l))throw TypeError(String(l)+" is not an object");return l}},"83ab":function(i,s,o){var a=o("d039");i.exports=!a(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(i,s,o){var a=o("c04e"),l=o("9bf2"),c=o("5c6c");i.exports=function(d,p,v){var m=a(p);m in d?l.f(d,m,c(0,v)):d[m]=v}},"861d":function(i,s){i.exports=function(o){return typeof o=="object"?o!==null:typeof o=="function"}},8875:function(i,s,o){var a,l,c;(function(d,p){l=[],a=p,c=typeof a=="function"?a.apply(s,l):a,c!==void 0&&(i.exports=c)})(typeof self<"u"?self:this,function(){function d(){var p=Object.getOwnPropertyDescriptor(document,"currentScript");if(!p&&"currentScript"in document&&document.currentScript||p&&p.get!==d&&document.currentScript)return document.currentScript;try{throw new Error}catch(pe){var v=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,m=/@([^@]*):(\d+):(\d+)\s*$/ig,x=v.exec(pe.stack)||m.exec(pe.stack),E=x&&x[1]||!1,A=x&&x[2]||!1,k=document.location.href.replace(document.location.hash,""),D,$,Y,te=document.getElementsByTagName("script");E===k&&(D=document.documentElement.outerHTML,$=new RegExp("(?:[^\\n]+?\\n){0,"+(A-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Y=D.replace($,"$1").trim());for(var me=0;me<te.length;me++)if(te[me].readyState==="interactive"||te[me].src===E||E===k&&te[me].innerHTML&&te[me].innerHTML.trim()===Y)return te[me];return null}}return d})},8925:function(i,s,o){var a=o("c6cd"),l=Function.toString;typeof a.inspectSource!="function"&&(a.inspectSource=function(c){return l.call(c)}),i.exports=a.inspectSource},"8aa5":function(i,s,o){var a=o("6547").charAt;i.exports=function(l,c,d){return c+(d?a(l,c).length:1)}},"8bbf":function(i,s){i.exports=n},"90e3":function(i,s){var o=0,a=Math.random();i.exports=function(l){return"Symbol("+String(l===void 0?"":l)+")_"+(++o+a).toString(36)}},9112:function(i,s,o){var a=o("83ab"),l=o("9bf2"),c=o("5c6c");i.exports=a?function(d,p,v){return l.f(d,p,c(1,v))}:function(d,p,v){return d[p]=v,d}},9263:function(i,s,o){var a=o("ad6d"),l=o("9f7f"),c=RegExp.prototype.exec,d=String.prototype.replace,p=c,v=function(){var A=/a/,k=/b*/g;return c.call(A,"a"),c.call(k,"a"),A.lastIndex!==0||k.lastIndex!==0}(),m=l.UNSUPPORTED_Y||l.BROKEN_CARET,x=/()??/.exec("")[1]!==void 0,E=v||x||m;E&&(p=function(k){var D=this,$,Y,te,me,pe=m&&D.sticky,I=a.call(D),z=D.source,K=0,N=k;return pe&&(I=I.replace("y",""),I.indexOf("g")===-1&&(I+="g"),N=String(k).slice(D.lastIndex),D.lastIndex>0&&(!D.multiline||D.multiline&&k[D.lastIndex-1]!==`
`)&&(z="(?: "+z+")",N=" "+N,K++),Y=new RegExp("^(?:"+z+")",I)),x&&(Y=new RegExp("^"+z+"$(?!\\s)",I)),v&&($=D.lastIndex),te=c.call(pe?Y:D,N),pe?te?(te.input=te.input.slice(K),te[0]=te[0].slice(K),te.index=D.lastIndex,D.lastIndex+=te[0].length):D.lastIndex=0:v&&te&&(D.lastIndex=D.global?te.index+te[0].length:$),x&&te&&te.length>1&&d.call(te[0],Y,function(){for(me=1;me<arguments.length-2;me++)arguments[me]===void 0&&(te[me]=void 0)}),te}),i.exports=p},"94ca":function(i,s,o){var a=o("d039"),l=/#|\.prototype\./,c=function(x,E){var A=p[d(x)];return A==m?!0:A==v?!1:typeof E=="function"?a(E):!!E},d=c.normalize=function(x){return String(x).replace(l,".").toLowerCase()},p=c.data={},v=c.NATIVE="N",m=c.POLYFILL="P";i.exports=c},"99af":function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("e8b5"),d=o("861d"),p=o("7b0b"),v=o("50c4"),m=o("8418"),x=o("65f0"),E=o("1dde"),A=o("b622"),k=o("2d00"),D=A("isConcatSpreadable"),$=9007199254740991,Y="Maximum allowed index exceeded",te=k>=51||!l(function(){var z=[];return z[D]=!1,z.concat()[0]!==z}),me=E("concat"),pe=function(z){if(!d(z))return!1;var K=z[D];return K!==void 0?!!K:c(z)},I=!te||!me;a({target:"Array",proto:!0,forced:I},{concat:function(K){var N=p(this),B=x(N,0),V=0,R,j,W,X,oe;for(R=-1,W=arguments.length;R<W;R++)if(oe=R===-1?N:arguments[R],pe(oe)){if(X=v(oe.length),V+X>$)throw TypeError(Y);for(j=0;j<X;j++,V++)j in oe&&m(B,V,oe[j])}else{if(V>=$)throw TypeError(Y);m(B,V++,oe)}return B.length=V,B}})},"9bdd":function(i,s,o){var a=o("825a");i.exports=function(l,c,d,p){try{return p?c(a(d)[0],d[1]):c(d)}catch(m){var v=l.return;throw v!==void 0&&a(v.call(l)),m}}},"9bf2":function(i,s,o){var a=o("83ab"),l=o("0cfb"),c=o("825a"),d=o("c04e"),p=Object.defineProperty;s.f=a?p:function(m,x,E){if(c(m),x=d(x,!0),c(E),l)try{return p(m,x,E)}catch{}if("get"in E||"set"in E)throw TypeError("Accessors not supported");return"value"in E&&(m[x]=E.value),m}},"9ed3":function(i,s,o){var a=o("ae93").IteratorPrototype,l=o("7c73"),c=o("5c6c"),d=o("d44e"),p=o("3f8c"),v=function(){return this};i.exports=function(m,x,E){var A=x+" Iterator";return m.prototype=l(a,{next:c(1,E)}),d(m,A,!1,!0),p[A]=v,m}},"9f7f":function(i,s,o){var a=o("d039");function l(c,d){return RegExp(c,d)}s.UNSUPPORTED_Y=a(function(){var c=l("a","y");return c.lastIndex=2,c.exec("abcd")!=null}),s.BROKEN_CARET=a(function(){var c=l("^r","gy");return c.lastIndex=2,c.exec("str")!=null})},a2bf:function(i,s,o){var a=o("e8b5"),l=o("50c4"),c=o("0366"),d=function(p,v,m,x,E,A,k,D){for(var $=E,Y=0,te=k?c(k,D,3):!1,me;Y<x;){if(Y in m){if(me=te?te(m[Y],Y,v):m[Y],A>0&&a(me))$=d(p,v,me,l(me.length),$,A-1)-1;else{if($>=9007199254740991)throw TypeError("Exceed the acceptable array length");p[$]=me}$++}Y++}return $};i.exports=d},a352:function(i,s){i.exports=r},a434:function(i,s,o){var a=o("23e7"),l=o("23cb"),c=o("a691"),d=o("50c4"),p=o("7b0b"),v=o("65f0"),m=o("8418"),x=o("1dde"),E=o("ae40"),A=x("splice"),k=E("splice",{ACCESSORS:!0,0:0,1:2}),D=Math.max,$=Math.min,Y=9007199254740991,te="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!A||!k},{splice:function(pe,I){var z=p(this),K=d(z.length),N=l(pe,K),B=arguments.length,V,R,j,W,X,oe;if(B===0?V=R=0:B===1?(V=0,R=K-N):(V=B-2,R=$(D(c(I),0),K-N)),K+V-R>Y)throw TypeError(te);for(j=v(z,R),W=0;W<R;W++)X=N+W,X in z&&m(j,W,z[X]);if(j.length=R,V<R){for(W=N;W<K-R;W++)X=W+R,oe=W+V,X in z?z[oe]=z[X]:delete z[oe];for(W=K;W>K-R+V;W--)delete z[W-1]}else if(V>R)for(W=K-R;W>N;W--)X=W+R-1,oe=W+V-1,X in z?z[oe]=z[X]:delete z[oe];for(W=0;W<V;W++)z[W+N]=arguments[W+2];return z.length=K-R+V,j}})},a4d3:function(i,s,o){var a=o("23e7"),l=o("da84"),c=o("d066"),d=o("c430"),p=o("83ab"),v=o("4930"),m=o("fdbf"),x=o("d039"),E=o("5135"),A=o("e8b5"),k=o("861d"),D=o("825a"),$=o("7b0b"),Y=o("fc6a"),te=o("c04e"),me=o("5c6c"),pe=o("7c73"),I=o("df75"),z=o("241c"),K=o("057f"),N=o("7418"),B=o("06cf"),V=o("9bf2"),R=o("d1e7"),j=o("9112"),W=o("6eeb"),X=o("5692"),oe=o("f772"),_e=o("d012"),Ce=o("90e3"),De=o("b622"),Z=o("e538"),G=o("746f"),re=o("d44e"),he=o("69f3"),ce=o("b727").forEach,ve=oe("hidden"),ee="Symbol",J="prototype",Oe=De("toPrimitive"),Te=he.set,Ye=he.getterFor(ee),ge=Object[J],Q=l.Symbol,ie=c("JSON","stringify"),fe=B.f,Se=V.f,de=K.f,Xe=R.f,$e=X("symbols"),Je=X("op-symbols"),He=X("string-to-symbol-registry"),Ge=X("symbol-to-string-registry"),xt=X("wks"),Et=l.QObject,Kt=!Et||!Et[J]||!Et[J].findChild,sn=p&&x(function(){return pe(Se({},"a",{get:function(){return Se(this,"a",{value:7}).a}})).a!=7})?function(en,Ln,Mn){var Hn=fe(ge,Ln);Hn&&delete ge[Ln],Se(en,Ln,Mn),Hn&&en!==ge&&Se(ge,Ln,Hn)}:Se,an=function(en,Ln){var Mn=$e[en]=pe(Q[J]);return Te(Mn,{type:ee,tag:en,description:Ln}),p||(Mn.description=Ln),Mn},Qe=m?function(en){return typeof en=="symbol"}:function(en){return Object(en)instanceof Q},at=function(Ln,Mn,Hn){Ln===ge&&at(Je,Mn,Hn),D(Ln);var hr=te(Mn,!0);return D(Hn),E($e,hr)?(Hn.enumerable?(E(Ln,ve)&&Ln[ve][hr]&&(Ln[ve][hr]=!1),Hn=pe(Hn,{enumerable:me(0,!1)})):(E(Ln,ve)||Se(Ln,ve,me(1,{})),Ln[ve][hr]=!0),sn(Ln,hr,Hn)):Se(Ln,hr,Hn)},it=function(Ln,Mn){D(Ln);var Hn=Y(Mn),hr=I(Hn).concat(An(Hn));return ce(hr,function(vr){(!p||Qt.call(Hn,vr))&&at(Ln,vr,Hn[vr])}),Ln},Bt=function(Ln,Mn){return Mn===void 0?pe(Ln):it(pe(Ln),Mn)},Qt=function(Ln){var Mn=te(Ln,!0),Hn=Xe.call(this,Mn);return this===ge&&E($e,Mn)&&!E(Je,Mn)?!1:Hn||!E(this,Mn)||!E($e,Mn)||E(this,ve)&&this[ve][Mn]?Hn:!0},Tn=function(Ln,Mn){var Hn=Y(Ln),hr=te(Mn,!0);if(!(Hn===ge&&E($e,hr)&&!E(Je,hr))){var vr=fe(Hn,hr);return vr&&E($e,hr)&&!(E(Hn,ve)&&Hn[ve][hr])&&(vr.enumerable=!0),vr}},xn=function(Ln){var Mn=de(Y(Ln)),Hn=[];return ce(Mn,function(hr){!E($e,hr)&&!E(_e,hr)&&Hn.push(hr)}),Hn},An=function(Ln){var Mn=Ln===ge,Hn=de(Mn?Je:Y(Ln)),hr=[];return ce(Hn,function(vr){E($e,vr)&&(!Mn||E(ge,vr))&&hr.push($e[vr])}),hr};if(v||(Q=function(){if(this instanceof Q)throw TypeError("Symbol is not a constructor");var Ln=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Mn=Ce(Ln),Hn=function(hr){this===ge&&Hn.call(Je,hr),E(this,ve)&&E(this[ve],Mn)&&(this[ve][Mn]=!1),sn(this,Mn,me(1,hr))};return p&&Kt&&sn(ge,Mn,{configurable:!0,set:Hn}),an(Mn,Ln)},W(Q[J],"toString",function(){return Ye(this).tag}),W(Q,"withoutSetter",function(en){return an(Ce(en),en)}),R.f=Qt,V.f=at,B.f=Tn,z.f=K.f=xn,N.f=An,Z.f=function(en){return an(De(en),en)},p&&(Se(Q[J],"description",{configurable:!0,get:function(){return Ye(this).description}}),d||W(ge,"propertyIsEnumerable",Qt,{unsafe:!0}))),a({global:!0,wrap:!0,forced:!v,sham:!v},{Symbol:Q}),ce(I(xt),function(en){G(en)}),a({target:ee,stat:!0,forced:!v},{for:function(en){var Ln=String(en);if(E(He,Ln))return He[Ln];var Mn=Q(Ln);return He[Ln]=Mn,Ge[Mn]=Ln,Mn},keyFor:function(Ln){if(!Qe(Ln))throw TypeError(Ln+" is not a symbol");if(E(Ge,Ln))return Ge[Ln]},useSetter:function(){Kt=!0},useSimple:function(){Kt=!1}}),a({target:"Object",stat:!0,forced:!v,sham:!p},{create:Bt,defineProperty:at,defineProperties:it,getOwnPropertyDescriptor:Tn}),a({target:"Object",stat:!0,forced:!v},{getOwnPropertyNames:xn,getOwnPropertySymbols:An}),a({target:"Object",stat:!0,forced:x(function(){N.f(1)})},{getOwnPropertySymbols:function(Ln){return N.f($(Ln))}}),ie){var Kn=!v||x(function(){var en=Q();return ie([en])!="[null]"||ie({a:en})!="{}"||ie(Object(en))!="{}"});a({target:"JSON",stat:!0,forced:Kn},{stringify:function(Ln,Mn,Hn){for(var hr=[Ln],vr=1,ir;arguments.length>vr;)hr.push(arguments[vr++]);if(ir=Mn,!(!k(Mn)&&Ln===void 0||Qe(Ln)))return A(Mn)||(Mn=function(Vr,Vs){if(typeof ir=="function"&&(Vs=ir.call(this,Vr,Vs)),!Qe(Vs))return Vs}),hr[1]=Mn,ie.apply(null,hr)}})}Q[J][Oe]||j(Q[J],Oe,Q[J].valueOf),re(Q,ee),_e[ve]=!0},a630:function(i,s,o){var a=o("23e7"),l=o("4df4"),c=o("1c7e"),d=!c(function(p){Array.from(p)});a({target:"Array",stat:!0,forced:d},{from:l})},a640:function(i,s,o){var a=o("d039");i.exports=function(l,c){var d=[][l];return!!d&&a(function(){d.call(null,c||function(){throw 1},1)})}},a691:function(i,s){var o=Math.ceil,a=Math.floor;i.exports=function(l){return isNaN(l=+l)?0:(l>0?a:o)(l)}},ab13:function(i,s,o){var a=o("b622"),l=a("match");i.exports=function(c){var d=/./;try{"/./"[c](d)}catch{try{return d[l]=!1,"/./"[c](d)}catch{}}return!1}},ac1f:function(i,s,o){var a=o("23e7"),l=o("9263");a({target:"RegExp",proto:!0,forced:/./.exec!==l},{exec:l})},ad6d:function(i,s,o){var a=o("825a");i.exports=function(){var l=a(this),c="";return l.global&&(c+="g"),l.ignoreCase&&(c+="i"),l.multiline&&(c+="m"),l.dotAll&&(c+="s"),l.unicode&&(c+="u"),l.sticky&&(c+="y"),c}},ae40:function(i,s,o){var a=o("83ab"),l=o("d039"),c=o("5135"),d=Object.defineProperty,p={},v=function(m){throw m};i.exports=function(m,x){if(c(p,m))return p[m];x||(x={});var E=[][m],A=c(x,"ACCESSORS")?x.ACCESSORS:!1,k=c(x,0)?x[0]:v,D=c(x,1)?x[1]:void 0;return p[m]=!!E&&!l(function(){if(A&&!a)return!0;var $={length:-1};A?d($,1,{enumerable:!0,get:v}):$[1]=1,E.call($,k,D)})}},ae93:function(i,s,o){var a=o("e163"),l=o("9112"),c=o("5135"),d=o("b622"),p=o("c430"),v=d("iterator"),m=!1,x=function(){return this},E,A,k;[].keys&&(k=[].keys(),"next"in k?(A=a(a(k)),A!==Object.prototype&&(E=A)):m=!0),E==null&&(E={}),!p&&!c(E,v)&&l(E,v,x),i.exports={IteratorPrototype:E,BUGGY_SAFARI_ITERATORS:m}},b041:function(i,s,o){var a=o("00ee"),l=o("f5df");i.exports=a?{}.toString:function(){return"[object "+l(this)+"]"}},b0c0:function(i,s,o){var a=o("83ab"),l=o("9bf2").f,c=Function.prototype,d=c.toString,p=/^\s*function ([^ (]*)/,v="name";a&&!(v in c)&&l(c,v,{configurable:!0,get:function(){try{return d.call(this).match(p)[1]}catch{return""}}})},b622:function(i,s,o){var a=o("da84"),l=o("5692"),c=o("5135"),d=o("90e3"),p=o("4930"),v=o("fdbf"),m=l("wks"),x=a.Symbol,E=v?x:x&&x.withoutSetter||d;i.exports=function(A){return c(m,A)||(p&&c(x,A)?m[A]=x[A]:m[A]=E("Symbol."+A)),m[A]}},b64b:function(i,s,o){var a=o("23e7"),l=o("7b0b"),c=o("df75"),d=o("d039"),p=d(function(){c(1)});a({target:"Object",stat:!0,forced:p},{keys:function(m){return c(l(m))}})},b727:function(i,s,o){var a=o("0366"),l=o("44ad"),c=o("7b0b"),d=o("50c4"),p=o("65f0"),v=[].push,m=function(x){var E=x==1,A=x==2,k=x==3,D=x==4,$=x==6,Y=x==5||$;return function(te,me,pe,I){for(var z=c(te),K=l(z),N=a(me,pe,3),B=d(K.length),V=0,R=I||p,j=E?R(te,B):A?R(te,0):void 0,W,X;B>V;V++)if((Y||V in K)&&(W=K[V],X=N(W,V,z),x)){if(E)j[V]=X;else if(X)switch(x){case 3:return!0;case 5:return W;case 6:return V;case 2:v.call(j,W)}else if(D)return!1}return $?-1:k||D?D:j}};i.exports={forEach:m(0),map:m(1),filter:m(2),some:m(3),every:m(4),find:m(5),findIndex:m(6)}},c04e:function(i,s,o){var a=o("861d");i.exports=function(l,c){if(!a(l))return l;var d,p;if(c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l))||typeof(d=l.valueOf)=="function"&&!a(p=d.call(l))||!c&&typeof(d=l.toString)=="function"&&!a(p=d.call(l)))return p;throw TypeError("Can't convert object to primitive value")}},c430:function(i,s){i.exports=!1},c6b6:function(i,s){var o={}.toString;i.exports=function(a){return o.call(a).slice(8,-1)}},c6cd:function(i,s,o){var a=o("da84"),l=o("ce4e"),c="__core-js_shared__",d=a[c]||l(c,{});i.exports=d},c740:function(i,s,o){var a=o("23e7"),l=o("b727").findIndex,c=o("44d2"),d=o("ae40"),p="findIndex",v=!0,m=d(p);p in[]&&Array(1)[p](function(){v=!1}),a({target:"Array",proto:!0,forced:v||!m},{findIndex:function(E){return l(this,E,arguments.length>1?arguments[1]:void 0)}}),c(p)},c8ba:function(i,s){var o;o=function(){return this}();try{o=o||new Function("return this")()}catch{typeof window=="object"&&(o=window)}i.exports=o},c975:function(i,s,o){var a=o("23e7"),l=o("4d64").indexOf,c=o("a640"),d=o("ae40"),p=[].indexOf,v=!!p&&1/[1].indexOf(1,-0)<0,m=c("indexOf"),x=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:v||!m||!x},{indexOf:function(A){return v?p.apply(this,arguments)||0:l(this,A,arguments.length>1?arguments[1]:void 0)}})},ca84:function(i,s,o){var a=o("5135"),l=o("fc6a"),c=o("4d64").indexOf,d=o("d012");i.exports=function(p,v){var m=l(p),x=0,E=[],A;for(A in m)!a(d,A)&&a(m,A)&&E.push(A);for(;v.length>x;)a(m,A=v[x++])&&(~c(E,A)||E.push(A));return E}},caad:function(i,s,o){var a=o("23e7"),l=o("4d64").includes,c=o("44d2"),d=o("ae40"),p=d("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:!p},{includes:function(m){return l(this,m,arguments.length>1?arguments[1]:void 0)}}),c("includes")},cc12:function(i,s,o){var a=o("da84"),l=o("861d"),c=a.document,d=l(c)&&l(c.createElement);i.exports=function(p){return d?c.createElement(p):{}}},ce4e:function(i,s,o){var a=o("da84"),l=o("9112");i.exports=function(c,d){try{l(a,c,d)}catch{a[c]=d}return d}},d012:function(i,s){i.exports={}},d039:function(i,s){i.exports=function(o){try{return!!o()}catch{return!0}}},d066:function(i,s,o){var a=o("428f"),l=o("da84"),c=function(d){return typeof d=="function"?d:void 0};i.exports=function(d,p){return arguments.length<2?c(a[d])||c(l[d]):a[d]&&a[d][p]||l[d]&&l[d][p]}},d1e7:function(i,s,o){var a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,c=l&&!a.call({1:2},1);s.f=c?function(p){var v=l(this,p);return!!v&&v.enumerable}:a},d28b:function(i,s,o){var a=o("746f");a("iterator")},d2bb:function(i,s,o){var a=o("825a"),l=o("3bbe");i.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var c=!1,d={},p;try{p=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,p.call(d,[]),c=d instanceof Array}catch{}return function(m,x){return a(m),l(x),c?p.call(m,x):m.__proto__=x,m}}():void 0)},d3b7:function(i,s,o){var a=o("00ee"),l=o("6eeb"),c=o("b041");a||l(Object.prototype,"toString",c,{unsafe:!0})},d44e:function(i,s,o){var a=o("9bf2").f,l=o("5135"),c=o("b622"),d=c("toStringTag");i.exports=function(p,v,m){p&&!l(p=m?p:p.prototype,d)&&a(p,d,{configurable:!0,value:v})}},d58f:function(i,s,o){var a=o("1c0b"),l=o("7b0b"),c=o("44ad"),d=o("50c4"),p=function(v){return function(m,x,E,A){a(x);var k=l(m),D=c(k),$=d(k.length),Y=v?$-1:0,te=v?-1:1;if(E<2)for(;;){if(Y in D){A=D[Y],Y+=te;break}if(Y+=te,v?Y<0:$<=Y)throw TypeError("Reduce of empty array with no initial value")}for(;v?Y>=0:$>Y;Y+=te)Y in D&&(A=x(A,D[Y],Y,k));return A}};i.exports={left:p(!1),right:p(!0)}},d784:function(i,s,o){o("ac1f");var a=o("6eeb"),l=o("d039"),c=o("b622"),d=o("9263"),p=o("9112"),v=c("species"),m=!l(function(){var D=/./;return D.exec=function(){var $=[];return $.groups={a:"7"},$},"".replace(D,"$<a>")!=="7"}),x=function(){return"a".replace(/./,"$0")==="$0"}(),E=c("replace"),A=function(){return/./[E]?/./[E]("a","$0")==="":!1}(),k=!l(function(){var D=/(?:)/,$=D.exec;D.exec=function(){return $.apply(this,arguments)};var Y="ab".split(D);return Y.length!==2||Y[0]!=="a"||Y[1]!=="b"});i.exports=function(D,$,Y,te){var me=c(D),pe=!l(function(){var V={};return V[me]=function(){return 7},""[D](V)!=7}),I=pe&&!l(function(){var V=!1,R=/a/;return D==="split"&&(R={},R.constructor={},R.constructor[v]=function(){return R},R.flags="",R[me]=/./[me]),R.exec=function(){return V=!0,null},R[me](""),!V});if(!pe||!I||D==="replace"&&!(m&&x&&!A)||D==="split"&&!k){var z=/./[me],K=Y(me,""[D],function(V,R,j,W,X){return R.exec===d?pe&&!X?{done:!0,value:z.call(R,j,W)}:{done:!0,value:V.call(j,R,W)}:{done:!1}},{REPLACE_KEEPS_$0:x,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:A}),N=K[0],B=K[1];a(String.prototype,D,N),a(RegExp.prototype,me,$==2?function(V,R){return B.call(V,this,R)}:function(V){return B.call(V,this)})}te&&p(RegExp.prototype[me],"sham",!0)}},d81d:function(i,s,o){var a=o("23e7"),l=o("b727").map,c=o("1dde"),d=o("ae40"),p=c("map"),v=d("map");a({target:"Array",proto:!0,forced:!p||!v},{map:function(x){return l(this,x,arguments.length>1?arguments[1]:void 0)}})},da84:function(i,s,o){(function(a){var l=function(c){return c&&c.Math==Math&&c};i.exports=l(typeof globalThis=="object"&&globalThis)||l(typeof window=="object"&&window)||l(typeof self=="object"&&self)||l(typeof a=="object"&&a)||Function("return this")()}).call(this,o("c8ba"))},dbb4:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("56ef"),d=o("fc6a"),p=o("06cf"),v=o("8418");a({target:"Object",stat:!0,sham:!l},{getOwnPropertyDescriptors:function(x){for(var E=d(x),A=p.f,k=c(E),D={},$=0,Y,te;k.length>$;)te=A(E,Y=k[$++]),te!==void 0&&v(D,Y,te);return D}})},dbf1:function(i,s,o){(function(a){o.d(s,"a",function(){return c});function l(){return typeof window<"u"?window.console:a.console}var c=l()}).call(this,o("c8ba"))},ddb0:function(i,s,o){var a=o("da84"),l=o("fdbc"),c=o("e260"),d=o("9112"),p=o("b622"),v=p("iterator"),m=p("toStringTag"),x=c.values;for(var E in l){var A=a[E],k=A&&A.prototype;if(k){if(k[v]!==x)try{d(k,v,x)}catch{k[v]=x}if(k[m]||d(k,m,E),l[E]){for(var D in c)if(k[D]!==c[D])try{d(k,D,c[D])}catch{k[D]=c[D]}}}}},df75:function(i,s,o){var a=o("ca84"),l=o("7839");i.exports=Object.keys||function(d){return a(d,l)}},e01a:function(i,s,o){var a=o("23e7"),l=o("83ab"),c=o("da84"),d=o("5135"),p=o("861d"),v=o("9bf2").f,m=o("e893"),x=c.Symbol;if(l&&typeof x=="function"&&(!("description"in x.prototype)||x().description!==void 0)){var E={},A=function(){var me=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),pe=this instanceof A?new x(me):me===void 0?x():x(me);return me===""&&(E[pe]=!0),pe};m(A,x);var k=A.prototype=x.prototype;k.constructor=A;var D=k.toString,$=String(x("test"))=="Symbol(test)",Y=/^Symbol\((.*)\)[^)]+$/;v(k,"description",{configurable:!0,get:function(){var me=p(this)?this.valueOf():this,pe=D.call(me);if(d(E,me))return"";var I=$?pe.slice(7,-1):pe.replace(Y,"$1");return I===""?void 0:I}}),a({global:!0,forced:!0},{Symbol:A})}},e163:function(i,s,o){var a=o("5135"),l=o("7b0b"),c=o("f772"),d=o("e177"),p=c("IE_PROTO"),v=Object.prototype;i.exports=d?Object.getPrototypeOf:function(m){return m=l(m),a(m,p)?m[p]:typeof m.constructor=="function"&&m instanceof m.constructor?m.constructor.prototype:m instanceof Object?v:null}},e177:function(i,s,o){var a=o("d039");i.exports=!a(function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype})},e260:function(i,s,o){var a=o("fc6a"),l=o("44d2"),c=o("3f8c"),d=o("69f3"),p=o("7dd0"),v="Array Iterator",m=d.set,x=d.getterFor(v);i.exports=p(Array,"Array",function(E,A){m(this,{type:v,target:a(E),index:0,kind:A})},function(){var E=x(this),A=E.target,k=E.kind,D=E.index++;return!A||D>=A.length?(E.target=void 0,{value:void 0,done:!0}):k=="keys"?{value:D,done:!1}:k=="values"?{value:A[D],done:!1}:{value:[D,A[D]],done:!1}},"values"),c.Arguments=c.Array,l("keys"),l("values"),l("entries")},e439:function(i,s,o){var a=o("23e7"),l=o("d039"),c=o("fc6a"),d=o("06cf").f,p=o("83ab"),v=l(function(){d(1)}),m=!p||v;a({target:"Object",stat:!0,forced:m,sham:!p},{getOwnPropertyDescriptor:function(E,A){return d(c(E),A)}})},e538:function(i,s,o){var a=o("b622");s.f=a},e893:function(i,s,o){var a=o("5135"),l=o("56ef"),c=o("06cf"),d=o("9bf2");i.exports=function(p,v){for(var m=l(v),x=d.f,E=c.f,A=0;A<m.length;A++){var k=m[A];a(p,k)||x(p,k,E(v,k))}}},e8b5:function(i,s,o){var a=o("c6b6");i.exports=Array.isArray||function(c){return a(c)=="Array"}},e95a:function(i,s,o){var a=o("b622"),l=o("3f8c"),c=a("iterator"),d=Array.prototype;i.exports=function(p){return p!==void 0&&(l.Array===p||d[c]===p)}},f5df:function(i,s,o){var a=o("00ee"),l=o("c6b6"),c=o("b622"),d=c("toStringTag"),p=l(function(){return arguments}())=="Arguments",v=function(m,x){try{return m[x]}catch{}};i.exports=a?l:function(m){var x,E,A;return m===void 0?"Undefined":m===null?"Null":typeof(E=v(x=Object(m),d))=="string"?E:p?l(x):(A=l(x))=="Object"&&typeof x.callee=="function"?"Arguments":A}},f772:function(i,s,o){var a=o("5692"),l=o("90e3"),c=a("keys");i.exports=function(d){return c[d]||(c[d]=l(d))}},fb15:function(i,s,o){if(o.r(s),typeof window<"u"){var a=window.document.currentScript;{var l=o("8875");a=l(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:l})}var c=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);c&&(o.p=c[1])}o("99af"),o("4de4"),o("4160"),o("c975"),o("d81d"),o("a434"),o("159b"),o("a4d3"),o("e439"),o("dbb4"),o("b64b");function d(Qe,at,it){return at in Qe?Object.defineProperty(Qe,at,{value:it,enumerable:!0,configurable:!0,writable:!0}):Qe[at]=it,Qe}function p(Qe,at){var it=Object.keys(Qe);if(Object.getOwnPropertySymbols){var Bt=Object.getOwnPropertySymbols(Qe);at&&(Bt=Bt.filter(function(Qt){return Object.getOwnPropertyDescriptor(Qe,Qt).enumerable})),it.push.apply(it,Bt)}return it}function v(Qe){for(var at=1;at<arguments.length;at++){var it=arguments[at]!=null?arguments[at]:{};at%2?p(Object(it),!0).forEach(function(Bt){d(Qe,Bt,it[Bt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Qe,Object.getOwnPropertyDescriptors(it)):p(Object(it)).forEach(function(Bt){Object.defineProperty(Qe,Bt,Object.getOwnPropertyDescriptor(it,Bt))})}return Qe}function m(Qe){if(Array.isArray(Qe))return Qe}o("e01a"),o("d28b"),o("e260"),o("d3b7"),o("3ca3"),o("ddb0");function x(Qe,at){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(Qe)))){var it=[],Bt=!0,Qt=!1,Tn=void 0;try{for(var xn=Qe[Symbol.iterator](),An;!(Bt=(An=xn.next()).done)&&(it.push(An.value),!(at&&it.length===at));Bt=!0);}catch(Kn){Qt=!0,Tn=Kn}finally{try{!Bt&&xn.return!=null&&xn.return()}finally{if(Qt)throw Tn}}return it}}o("a630"),o("fb6a"),o("b0c0"),o("25f0");function E(Qe,at){(at==null||at>Qe.length)&&(at=Qe.length);for(var it=0,Bt=new Array(at);it<at;it++)Bt[it]=Qe[it];return Bt}function A(Qe,at){if(Qe){if(typeof Qe=="string")return E(Qe,at);var it=Object.prototype.toString.call(Qe).slice(8,-1);if(it==="Object"&&Qe.constructor&&(it=Qe.constructor.name),it==="Map"||it==="Set")return Array.from(Qe);if(it==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(it))return E(Qe,at)}}function k(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Qe,at){return m(Qe)||x(Qe,at)||A(Qe,at)||k()}function $(Qe){if(Array.isArray(Qe))return E(Qe)}function Y(Qe){if(typeof Symbol<"u"&&Symbol.iterator in Object(Qe))return Array.from(Qe)}function te(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(Qe){return $(Qe)||Y(Qe)||A(Qe)||te()}var pe=o("a352"),I=o.n(pe);function z(Qe){Qe.parentElement!==null&&Qe.parentElement.removeChild(Qe)}function K(Qe,at,it){var Bt=it===0?Qe.children[0]:Qe.children[it-1].nextSibling;Qe.insertBefore(at,Bt)}var N=o("dbf1");o("13d5"),o("4fad"),o("ac1f"),o("5319");function B(Qe){var at=Object.create(null);return function(Bt){var Qt=at[Bt];return Qt||(at[Bt]=Qe(Bt))}}var V=/-(\w)/g,R=B(function(Qe){return Qe.replace(V,function(at,it){return it.toUpperCase()})});o("5db7"),o("73d9");var j=["Start","Add","Remove","Update","End"],W=["Choose","Unchoose","Sort","Filter","Clone"],X=["Move"],oe=[X,j,W].flatMap(function(Qe){return Qe}).map(function(Qe){return"on".concat(Qe)}),_e={manage:X,manageAndEmit:j,emit:W};function Ce(Qe){return oe.indexOf(Qe)!==-1}o("caad"),o("2ca0");var De=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Z(Qe){return De.includes(Qe)}function G(Qe){return["transition-group","TransitionGroup"].includes(Qe)}function re(Qe){return["id","class","role","style"].includes(Qe)||Qe.startsWith("data-")||Qe.startsWith("aria-")||Qe.startsWith("on")}function he(Qe){return Qe.reduce(function(at,it){var Bt=D(it,2),Qt=Bt[0],Tn=Bt[1];return at[Qt]=Tn,at},{})}function ce(Qe){var at=Qe.$attrs,it=Qe.componentData,Bt=it===void 0?{}:it,Qt=he(Object.entries(at).filter(function(Tn){var xn=D(Tn,2),An=xn[0];return xn[1],re(An)}));return v(v({},Qt),Bt)}function ve(Qe){var at=Qe.$attrs,it=Qe.callBackBuilder,Bt=he(ee(at));Object.entries(it).forEach(function(Tn){var xn=D(Tn,2),An=xn[0],Kn=xn[1];_e[An].forEach(function(en){Bt["on".concat(en)]=Kn(en)})});var Qt="[data-draggable]".concat(Bt.draggable||"");return v(v({},Bt),{},{draggable:Qt})}function ee(Qe){return Object.entries(Qe).filter(function(at){var it=D(at,2),Bt=it[0];return it[1],!re(Bt)}).map(function(at){var it=D(at,2),Bt=it[0],Qt=it[1];return[R(Bt),Qt]}).filter(function(at){var it=D(at,2),Bt=it[0];return it[1],!Ce(Bt)})}o("c740");function J(Qe,at){if(!(Qe instanceof at))throw new TypeError("Cannot call a class as a function")}function Oe(Qe,at){for(var it=0;it<at.length;it++){var Bt=at[it];Bt.enumerable=Bt.enumerable||!1,Bt.configurable=!0,"value"in Bt&&(Bt.writable=!0),Object.defineProperty(Qe,Bt.key,Bt)}}function Te(Qe,at,it){return at&&Oe(Qe.prototype,at),Qe}var Ye=function(at){var it=at.el;return it},ge=function(at,it){return at.__draggable_context=it},Q=function(at){return at.__draggable_context},ie=function(){function Qe(at){var it=at.nodes,Bt=it.header,Qt=it.default,Tn=it.footer,xn=at.root,An=at.realList;J(this,Qe),this.defaultNodes=Qt,this.children=[].concat(me(Bt),me(Qt),me(Tn)),this.externalComponent=xn.externalComponent,this.rootTransition=xn.transition,this.tag=xn.tag,this.realList=An}return Te(Qe,[{key:"render",value:function(it,Bt){var Qt=this.tag,Tn=this.children,xn=this._isRootComponent,An=xn?{default:function(){return Tn}}:Tn;return it(Qt,Bt,An)}},{key:"updated",value:function(){var it=this.defaultNodes,Bt=this.realList;it.forEach(function(Qt,Tn){ge(Ye(Qt),{element:Bt[Tn],index:Tn})})}},{key:"getUnderlyingVm",value:function(it){return Q(it)}},{key:"getVmIndexFromDomIndex",value:function(it,Bt){var Qt=this.defaultNodes,Tn=Qt.length,xn=Bt.children,An=xn.item(it);if(An===null)return Tn;var Kn=Q(An);if(Kn)return Kn.index;if(Tn===0)return 0;var en=Ye(Qt[0]),Ln=me(xn).findIndex(function(Mn){return Mn===en});return it<Ln?0:Tn}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),Qe}(),fe=o("8bbf");function Se(Qe,at){var it=Qe[at];return it?it():[]}function de(Qe){var at=Qe.$slots,it=Qe.realList,Bt=Qe.getKey,Qt=it||[],Tn=["header","footer"].map(function(Mn){return Se(at,Mn)}),xn=D(Tn,2),An=xn[0],Kn=xn[1],en=at.item;if(!en)throw new Error("draggable element must have an item slot");var Ln=Qt.flatMap(function(Mn,Hn){return en({element:Mn,index:Hn}).map(function(hr){return hr.key=Bt(Mn),hr.props=v(v({},hr.props||{}),{},{"data-draggable":!0}),hr})});if(Ln.length!==Qt.length)throw new Error("Item slot must have only one child");return{header:An,footer:Kn,default:Ln}}function Xe(Qe){var at=G(Qe),it=!Z(Qe)&&!at;return{transition:at,externalComponent:it,tag:it?Object(fe.resolveComponent)(Qe):at?fe.TransitionGroup:Qe}}function $e(Qe){var at=Qe.$slots,it=Qe.tag,Bt=Qe.realList,Qt=Qe.getKey,Tn=de({$slots:at,realList:Bt,getKey:Qt}),xn=Xe(it);return new ie({nodes:Tn,root:xn,realList:Bt})}function Je(Qe,at){var it=this;Object(fe.nextTick)(function(){return it.$emit(Qe.toLowerCase(),at)})}function He(Qe){var at=this;return function(it,Bt){if(at.realList!==null)return at["onDrag".concat(Qe)](it,Bt)}}function Ge(Qe){var at=this,it=He.call(this,Qe);return function(Bt,Qt){it.call(at,Bt,Qt),Je.call(at,Qe,Bt)}}var xt=null,Et={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(at){return at}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Kt=["update:modelValue","change"].concat(me([].concat(me(_e.manageAndEmit),me(_e.emit)).map(function(Qe){return Qe.toLowerCase()}))),sn=Object(fe.defineComponent)({name:"draggable",inheritAttrs:!1,props:Et,emits:Kt,data:function(){return{error:!1}},render:function(){try{this.error=!1;var at=this.$slots,it=this.$attrs,Bt=this.tag,Qt=this.componentData,Tn=this.realList,xn=this.getKey,An=$e({$slots:at,tag:Bt,realList:Tn,getKey:xn});this.componentStructure=An;var Kn=ce({$attrs:it,componentData:Qt});return An.render(fe.h,Kn)}catch(en){return this.error=!0,Object(fe.h)("pre",{style:{color:"red"}},en.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&N.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var at=this;if(!this.error){var it=this.$attrs,Bt=this.$el,Qt=this.componentStructure;Qt.updated();var Tn=ve({$attrs:it,callBackBuilder:{manageAndEmit:function(Kn){return Ge.call(at,Kn)},emit:function(Kn){return Je.bind(at,Kn)},manage:function(Kn){return He.call(at,Kn)}}}),xn=Bt.nodeType===1?Bt:Bt.parentElement;this._sortable=new I.a(xn,Tn),this.targetDomElement=xn,xn.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var at=this.list;return at||this.modelValue},getKey:function(){var at=this.itemKey;return typeof at=="function"?at:function(it){return it[at]}}},watch:{$attrs:{handler:function(at){var it=this._sortable;it&&ee(at).forEach(function(Bt){var Qt=D(Bt,2),Tn=Qt[0],xn=Qt[1];it.option(Tn,xn)})},deep:!0}},methods:{getUnderlyingVm:function(at){return this.componentStructure.getUnderlyingVm(at)||null},getUnderlyingPotencialDraggableComponent:function(at){return at.__draggable_component__},emitChanges:function(at){var it=this;Object(fe.nextTick)(function(){return it.$emit("change",at)})},alterList:function(at){if(this.list){at(this.list);return}var it=me(this.modelValue);at(it),this.$emit("update:modelValue",it)},spliceList:function(){var at=arguments,it=function(Qt){return Qt.splice.apply(Qt,me(at))};this.alterList(it)},updatePosition:function(at,it){var Bt=function(Tn){return Tn.splice(it,0,Tn.splice(at,1)[0])};this.alterList(Bt)},getRelatedContextFromMoveEvent:function(at){var it=at.to,Bt=at.related,Qt=this.getUnderlyingPotencialDraggableComponent(it);if(!Qt)return{component:Qt};var Tn=Qt.realList,xn={list:Tn,component:Qt};if(it!==Bt&&Tn){var An=Qt.getUnderlyingVm(Bt)||{};return v(v({},An),xn)}return xn},getVmIndexFromDomIndex:function(at){return this.componentStructure.getVmIndexFromDomIndex(at,this.targetDomElement)},onDragStart:function(at){this.context=this.getUnderlyingVm(at.item),at.item._underlying_vm_=this.clone(this.context.element),xt=at.item},onDragAdd:function(at){var it=at.item._underlying_vm_;if(it!==void 0){z(at.item);var Bt=this.getVmIndexFromDomIndex(at.newIndex);this.spliceList(Bt,0,it);var Qt={element:it,newIndex:Bt};this.emitChanges({added:Qt})}},onDragRemove:function(at){if(K(this.$el,at.item,at.oldIndex),at.pullMode==="clone"){z(at.clone);return}var it=this.context,Bt=it.index,Qt=it.element;this.spliceList(Bt,1);var Tn={element:Qt,oldIndex:Bt};this.emitChanges({removed:Tn})},onDragUpdate:function(at){z(at.item),K(at.from,at.item,at.oldIndex);var it=this.context.index,Bt=this.getVmIndexFromDomIndex(at.newIndex);this.updatePosition(it,Bt);var Qt={element:this.context.element,oldIndex:it,newIndex:Bt};this.emitChanges({moved:Qt})},computeFutureIndex:function(at,it){if(!at.element)return 0;var Bt=me(it.to.children).filter(function(An){return An.style.display!=="none"}),Qt=Bt.indexOf(it.related),Tn=at.component.getVmIndexFromDomIndex(Qt),xn=Bt.indexOf(xt)!==-1;return xn||!it.willInsertAfter?Tn:Tn+1},onDragMove:function(at,it){var Bt=this.move,Qt=this.realList;if(!Bt||!Qt)return!0;var Tn=this.getRelatedContextFromMoveEvent(at),xn=this.computeFutureIndex(Tn,at),An=v(v({},this.context),{},{futureIndex:xn}),Kn=v(v({},at),{},{relatedContext:Tn,draggedContext:An});return Bt(Kn,it)},onDragEnd:function(){xt=null}}}),an=sn;s.default=an},fb6a:function(i,s,o){var a=o("23e7"),l=o("861d"),c=o("e8b5"),d=o("23cb"),p=o("50c4"),v=o("fc6a"),m=o("8418"),x=o("b622"),E=o("1dde"),A=o("ae40"),k=E("slice"),D=A("slice",{ACCESSORS:!0,0:0,1:2}),$=x("species"),Y=[].slice,te=Math.max;a({target:"Array",proto:!0,forced:!k||!D},{slice:function(pe,I){var z=v(this),K=p(z.length),N=d(pe,K),B=d(I===void 0?K:I,K),V,R,j;if(c(z)&&(V=z.constructor,typeof V=="function"&&(V===Array||c(V.prototype))?V=void 0:l(V)&&(V=V[$],V===null&&(V=void 0)),V===Array||V===void 0))return Y.call(z,N,B);for(R=new(V===void 0?Array:V)(te(B-N,0)),j=0;N<B;N++,j++)N in z&&m(R,j,z[N]);return R.length=j,R}})},fc6a:function(i,s,o){var a=o("44ad"),l=o("1d80");i.exports=function(c){return a(l(c))}},fdbc:function(i,s){i.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(i,s,o){var a=o("4930");i.exports=a&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(aP);var vZ=aP.exports;const yZ=j_(vZ),bZ={class:"h-full bg-gray-50"},_Z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wZ={class:"sm:flex sm:items-center"},xZ={class:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none"},LZ={key:0,class:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10"},SZ={class:"mt-6 bg-white shadow rounded-lg p-4"},CZ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},EZ=["value"],PZ={key:0,class:"mt-6 p-6 text-center bg-white shadow rounded-lg"},MZ={key:1,class:"mt-6 overflow-x-auto pb-4"},kZ={key:0,class:"p-6 text-center bg-white shadow rounded-lg mb-4"},AZ={class:"flex space-x-4 min-w-max"},TZ={class:"bg-white rounded-lg shadow overflow-hidden"},DZ={class:"flex items-center"},OZ={class:"flex items-center"},NZ={class:"text-xs text-gray-500 bg-white px-2 py-1 rounded-full"},IZ={class:"p-2 max-h-[calc(100vh-250px)] overflow-y-auto"},BZ={class:"min-h-[100px] draggable-container"},RZ={class:"note-container"},FZ={class:"bg-white rounded-md shadow-sm border border-gray-200 overflow-hidden"},jZ={class:"p-3 flex items-center justify-between note-drag-handle cursor-move no-select"},zZ={class:"flex items-center"},$Z={class:"text-sm font-medium text-gray-900 truncate"},VZ={class:"px-3 py-2"},UZ={class:"text-sm text-gray-500 line-clamp-2"},HZ={class:"px-3 py-2 bg-gray-50 border-t border-gray-100 flex justify-between items-center"},WZ={class:"text-xs text-gray-500"},GZ={class:"flex space-x-1"},qZ={key:0,class:"text-xs text-primary-500 flex items-center mr-1",title:"Note géolocalisée"},YZ={key:1,class:"text-xs text-gray-400 flex items-center mr-1",title:"Note simple"},KZ=["onClick"],ZZ=["onClick"],XZ=["onClick"],JZ=["onClick"],QZ={key:0,class:"fixed z-[3001] inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},eX={class:"flex items-center justify-center min-h-screen w-full"},tX={class:"relative bg-white w-full h-full md:rounded-lg md:max-w-lg md:h-auto md:max-h-[90vh] md:my-8 shadow-xl transform transition-all overflow-hidden"},nX={class:"mt-6 flex flex-col-reverse sm:flex-row-reverse sm:justify-end gap-3 p-4 md:px-6"},rX=$s({__name:"NotesView",setup(t){const e=Nm(),n=nu(),r=wf(),i=Tp(),s=Lt(!0),o=Lt(!1),a=Lt(!1),l=Lt(null),c=Lt(null),d=Lt("info"),p=Lt(null),v=Zn(()=>{const De=r.getSortedColumns;return console.log("[NotesView][columnsForDrag] Colonnes triées:",De),De}),m=[{id:Ki.PRIVATE,title:"Privé",description:"Visible uniquement par vous"},{id:Ki.COMPANY,title:"Entreprise",description:"Visible uniquement par l'entreprise"},{id:Ki.EMPLOYEE,title:"Salariés",description:"Visible par l'entreprise et ses salariés"},{id:Ki.VISITOR,title:"Visiteurs",description:"Visible par tous (entreprise, salariés et visiteurs)"}],x=ru({search:"",date:"",accessLevel:""});function E(De){if(!De)return"Date non définie";try{const Z=new Date(De);return isNaN(Z.getTime())?(console.warn("[safeFormatDate] Date invalide:",De),"Date invalide"):new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(Z)}catch(Z){return console.error("[safeFormatDate] Erreur lors du formatage de la date:",Z),"Date invalide"}}function A(De){if(!De)return null;try{const Z=new Date(De);return isNaN(Z.getTime())?(console.warn("[safeDate] Date invalide:",De),null):Z}catch(Z){return console.error("[safeDate] Erreur lors de la création de la date:",Z),null}}function k(De){return E(De)}const D=Zn(()=>{let De=r.getAccessibleNotes;if(x.search){const Z=x.search.toLowerCase();De=De.filter(G=>G.title.toLowerCase().includes(Z)||G.description.toLowerCase().includes(Z))}if(x.accessLevel&&(De=De.filter(Z=>Z.accessLevel===x.accessLevel)),x.date){const Z=new Date;Z.setHours(0,0,0,0);const G=new Date(Z);G.setDate(Z.getDate()-Z.getDay());const re=new Date(Z.getFullYear(),Z.getMonth(),1);De=De.filter(he=>{const ce=A(he.createdAt);return ce?x.date==="today"?ce>=Z:x.date==="week"?ce>=G:x.date==="month"?ce>=re:!0:!1})}return De}),$=Zn(()=>De=>r.getNotesByColumn(De));function Y(De){if(De==null)return"Non défini";switch(De){case Ki.PRIVATE:return"Privé";case Ki.COMPANY:return"Entreprise";case Ki.EMPLOYEE:return"Salariés";case Ki.VISITOR:return"Visiteurs";default:return"Non défini"}}function te(De){if(De==null)return"#9CA3AF";switch(De){case Ki.PRIVATE:return"#9CA3AF";case Ki.COMPANY:return"#EF4444";case Ki.EMPLOYEE:return"#F59E0B";case Ki.VISITOR:return"#10B981";default:return"#6B7280"}}go(()=>{console.log("[NotesView] Composant monté"),me().then(()=>{console.log("[NotesView] Données chargées avec succès")}).catch(De=>{console.error("[NotesView] Erreur lors du chargement des données:",De),n.error("Erreur lors du chargement des données")})});async function me(){console.log(`
[NotesView][loadInitialData] Début du chargement des données`);try{s.value=!0,console.log("[NotesView][loadInitialData] Chargement des colonnes..."),await r.loadColumns(),console.log("[NotesView][loadInitialData] Colonnes chargées:",r.columns),console.log("[NotesView][loadInitialData] Chargement des notes...");const De=await Sa.getNotes();console.log("[NotesView][loadInitialData] Notes reçues:",De.data),De.data.length>0?(console.log("[NotesView][loadInitialData] Détails des notes:"),De.data.forEach((he,ce)=>{console.log(`Note ${ce+1}:`,{id:he.id,title:he.title,columnId:he.column||he.column_id,access_level:he.access_level,column:he.column})})):console.warn("[NotesView][loadInitialData] Aucune note reçue du backend!");const Z=r.columns.map(he=>he.id),G=De.data.filter(he=>{const ce=(he.column||he.column_id||"").toString();return ce===""||!Z.includes(ce)});if(G.length>0){console.warn(`[NotesView][loadInitialData] ${G.length} notes avec des colonnes invalides:`,G),console.log("[NotesView][loadInitialData] Assignation des notes à la colonne À faire (2)");for(const he of G)try{await Sa.updateNote(he.id,{column:"2"})}catch(ce){console.error(`[NotesView][loadInitialData] Erreur lors de l'assignation de la note ${he.id} à la colonne À faire:`,ce)}}const re=De.data.map(he=>({id:he.id,title:he.title,description:he.description,location:he.location,columnId:(he.column||he.column_id||"2").toString(),access_level:he.access_level,style:he.style||{},comments:he.comments||[],photos:he.photos||[],order:he.order||0,createdAt:he.created_at,updatedAt:he.updated_at}));r.notes.length=0,re.forEach(he=>{r.addNote(he)}),console.log("[NotesView][loadInitialData] Notes chargées dans le store");for(const he of r.columns){const ce=r.getNotesByColumn(he.id);console.log(`[NotesView][loadInitialData] Colonne ${he.title} (${he.id}): ${ce.length} notes`),ce.length>0&&ce.forEach(ve=>{console.log(`  - Note ID=${ve.id}, Titre="${ve.title}", Niveau d'accès=${ve.accessLevel}, Colonne=${ve.columnId}`)})}}catch(De){console.error("[NotesView][loadInitialData] Erreur:",De),n.error("Erreur lors du chargement des données")}finally{s.value=!1,console.log("[NotesView][loadInitialData] Chargement terminé")}}function pe(){e.push({path:"/",query:{tool:"Note"}})}async function I(De){if(!De.location){n.warning("Cette note n'est pas géolocalisée");return}try{const G=(await Sa.getNote(De.id)).data,re=G.plan;console.log("[NotesView][viewOnMap] Détails de la note récupérés:",G),e.push({path:"/",query:{lat:Array.isArray(De.location)?De.location[0].toString():De.location.coordinates[1].toString(),lng:Array.isArray(De.location)?De.location[1].toString():De.location.coordinates[0].toString(),noteId:De.id.toString(),planId:re?re.toString():void 0}})}catch(Z){console.error("[NotesView][viewOnMap] Erreur lors de la récupération des détails de la note:",Z),n.error("Erreur lors de l'ouverture de la note sur la carte")}}function z(De){if(!De.location){n.warning("Cette note n'est pas géolocalisée");return}let Z,G;Array.isArray(De.location)?(Z=De.location[0],G=De.location[1]):(Z=De.location.coordinates[1],G=De.location.coordinates[0]);const re=`https://www.google.com/maps/dir/?api=1&destination=${Z},${G}`;window.open(re,"_blank")}function K(De){c.value=JSON.parse(JSON.stringify(De)),d.value="info",a.value=!0}async function N(De){if(console.log("[NotesView][handleNoteSave] Note sauvegardée:",De),De&&De.id){const Z=r.notes.find(G=>G.id===De.id);Z&&(!De.comments&&Z.comments&&(De.comments=Z.comments),!De.photos&&Z.photos&&(De.photos=Z.photos))}if(a.value=!1,p.value&&c.value)try{const Z={location:c.value.location,name:c.value.title,description:c.value.description,columnId:c.value.columnId,accessLevel:c.value.accessLevel,style:c.value.style,comments:c.value.comments||[],photos:c.value.photos||[],order:c.value.order,createdAt:c.value.createdAt,updatedAt:new Date().toISOString()},G=i.elements.findIndex(re=>{var he;return re.type_forme==="Note"&&re.id===((he=c.value)==null?void 0:he.id)});G!==-1?i.elements[G].data=Z:i.elements.push({id:c.value.id,type_forme:"Note",data:Z}),await i.saveToPlan(p.value),n.success("Note sauvegardée et plan mis à jour avec succès")}catch(Z){console.error("Erreur lors de la sauvegarde de la note:",Z),n.error("Erreur lors de la sauvegarde de la note")}}function B(De){l.value=De,o.value=!0}async function V(){if(l.value)try{try{await Sa.deleteNote(l.value.id)}catch(De){if(De.response&&De.response.status===404)console.log("[NotesView][deleteNote] Note non trouvée dans le backend (404), suppression locale uniquement");else throw De}r.removeNote(l.value.id),n.success("Note supprimée avec succès")}catch(De){console.error("Erreur lors de la suppression de la note:",De),n.error("Erreur lors de la suppression de la note")}finally{o.value=!1,l.value=null}}async function R(De,Z){console.log("[NotesView][onDragChange] Événement:",De),console.log("[NotesView][onDragChange] Colonne cible:",Z);try{if(De.added){const{element:G}=De.added;console.log("[NotesView][onDragChange] Note à déplacer:",G);const re=typeof G=="object"&&G.id?G.id:null;if(!re)throw console.error("[NotesView][onDragChange] ID de note invalide:",G),new Error("ID de note invalide");r.moveNote(re,Z);const ce=$.value(Z).map(ee=>ee.id);r.reorderNotes(Z,ce);const ve=r.getColumnById(Z);n.success(`Note déplacée vers ${(ve==null?void 0:ve.title)||"une autre colonne"}`),await j(re,{columnId:Z})}if(De.moved){const G=$.value(Z),re=G.map(he=>he.id);r.reorderNotes(Z,re),n.success("Ordre des notes mis à jour");for(const[he,ce]of G.entries())await j(ce.id,{order:he})}}catch(G){console.error("[NotesView][onDragChange] Erreur:",G),n.error("Une erreur est survenue lors du déplacement de la note")}}async function j(De,Z){console.log("[NotesView][updateNoteInBackend] Mise à jour de la note:",De,Z);try{const G=r.notes.find(ce=>ce.id===De);if(!G){console.error("[NotesView][updateNoteInBackend] Note non trouvée:",De);return}const re={...Z};if(Z.columnId){const ce=r.getColumnById(Z.columnId);ce?(console.log(`[NotesView][updateNoteInBackend] Mise à jour de la colonne: ${ce.id} (${ce.title})`),re.column=ce.id,delete re.columnId,delete re.column_id):console.warn(`[NotesView][updateNoteInBackend] Colonne non trouvée: ${Z.columnId}`)}const he={...G,...re,updatedAt:new Date().toISOString()};console.log("[NotesView][updateNoteInBackend] Données envoyées au backend:",he),await Sa.updateNote(De,he),console.log("[NotesView][updateNoteInBackend] Note mise à jour avec succès")}catch(G){throw console.error("[NotesView][updateNoteInBackend] Erreur:",G),G}}function W(){c.value={id:"",title:"Nouvelle note",description:"",location:null,columnId:r.getDefaultColumn.id,accessLevel:Ki.PRIVATE,style:{color:"#3B82F6",weight:2,opacity:1,fillColor:"#3B82F6",fillOpacity:.6,radius:8},order:0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),comments:[],photos:[]},a.value=!0,d.value="info"}const X=Lt(null),oe=Lt(!1);function _e(){oe.value=!oe.value}function Ce(De){X.value&&!X.value.contains(De.target)&&(oe.value=!1)}return go(()=>{document.addEventListener("click",Ce)}),Td(()=>{document.removeEventListener("click",Ce)}),(De,Z)=>{var G,re;return Be(),ze("div",bZ,[C("div",_Z,[C("div",wZ,[Z[6]||(Z[6]=C("div",{class:"sm:flex-auto"},[C("h1",{class:"text-2xl font-semibold text-gray-900"},"Notes"),C("p",{class:"mt-2 text-sm text-gray-700"}," Liste de toutes vos notes. ")],-1)),C("div",xZ,[C("div",{class:"relative",ref_key:"dropdownRef",ref:X},[C("button",{onClick:_e,class:"inline-flex items-center justify-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 sm:w-auto"},Z[5]||(Z[5]=[li(" Créer "),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)])),oe.value?(Be(),ze("div",LZ,[C("div",{class:"py-1"},[C("button",{onClick:W,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note simple "),C("button",{onClick:pe,class:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"}," Note géolocalisée ")])])):nn("",!0)],512)])]),C("div",SZ,[C("div",CZ,[C("div",null,[Z[7]||(Z[7]=C("label",{for:"search",class:"block text-sm font-medium text-gray-700"},"Recherche",-1)),kn(C("input",{type:"text",id:"search","onUpdate:modelValue":Z[0]||(Z[0]=he=>x.search=he),placeholder:"Rechercher par titre ou description...",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},null,512),[[jr,x.search]])]),C("div",null,[Z[9]||(Z[9]=C("label",{for:"date",class:"block text-sm font-medium text-gray-700"},"Date",-1)),kn(C("select",{id:"date","onUpdate:modelValue":Z[1]||(Z[1]=he=>x.date=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},Z[8]||(Z[8]=[C("option",{value:""},"Toutes les dates",-1),C("option",{value:"today"},"Aujourd'hui",-1),C("option",{value:"week"},"Cette semaine",-1),C("option",{value:"month"},"Ce mois",-1)]),512),[[rs,x.date]])]),C("div",null,[Z[11]||(Z[11]=C("label",{for:"accessLevel",class:"block text-sm font-medium text-gray-700"},"Niveau d'accès",-1)),kn(C("select",{id:"accessLevel","onUpdate:modelValue":Z[2]||(Z[2]=he=>x.accessLevel=he),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"},[Z[10]||(Z[10]=C("option",{value:""},"Tous les niveaux",-1)),(Be(),ze(En,null,fr(m,he=>C("option",{key:he.id,value:he.id},Dt(he.title),9,EZ)),64))],512),[[rs,x.accessLevel]])])])]),s.value?(Be(),ze("div",PZ,Z[12]||(Z[12]=[C("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"},null,-1),C("p",{class:"mt-2 text-sm text-gray-500"},"Chargement des notes...",-1)]))):(Be(),ze("div",MZ,[D.value.length===0&&v.value.length===0?(Be(),ze("div",kZ,Z[13]||(Z[13]=[C("p",{class:"text-sm text-gray-500"},"Aucune note ni colonne trouvée",-1)]))):nn("",!0),C("div",AZ,[(Be(!0),ze(En,null,fr(v.value,he=>(Be(),ze("div",{key:he.id,class:"column-wrapper w-80 flex-shrink-0"},[C("div",TZ,[C("div",{class:"p-3 flex items-center justify-between no-select",style:eu({backgroundColor:he.color+"20",borderBottom:"2px solid "+he.color})},[C("div",DZ,[C("h3",{class:"text-sm font-semibold",style:eu({color:he.color})},Dt(he.title),5)]),C("div",OZ,[C("span",NZ,Dt($.value(he.id).length),1)])],4),C("div",IZ,[C("div",BZ,[fi(Xn(yZ),{list:$.value(he.id),class:"space-y-2",group:"notes","item-key":"id",handle:".note-drag-handle",onChange:ce=>R(ce,he.id),animation:150,"ghost-class":"ghost-card","chosen-class":"chosen","drag-class":"dragging"},{item:Wu(({element:ce})=>[C("div",RZ,[C("div",FZ,[C("div",jZ,[C("div",zZ,[Z[14]||(Z[14]=C("svg",{class:"h-4 w-4 mr-2 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8h16M4 16h16"})],-1)),C("h4",$Z,Dt(ce.title),1)]),C("div",null,[C("span",{class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",style:eu({backgroundColor:te(ce.accessLevel)+"20",color:te(ce.accessLevel)})},Dt(Y(ce.accessLevel)||"Non défini"),5)])]),C("div",VZ,[C("p",UZ,Dt(ce.description||"Aucune description"),1)]),C("div",HZ,[C("span",WZ,Dt(ce.updatedAt?k(ce.updatedAt):ce.createdAt?k(ce.createdAt):"Date non définie"),1),C("div",GZ,[ce.location?(Be(),ze("span",qZ,Z[15]||(Z[15]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))):(Be(),ze("span",YZ,Z[16]||(Z[16]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)]))),ce.location?(Be(),ze(En,{key:2},[C("button",{onClick:ve=>z(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Ouvrir dans Google Maps"},Z[17]||(Z[17]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]),8,KZ),C("button",{onClick:ve=>I(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Voir sur la carte"},Z[18]||(Z[18]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)]),8,ZZ)],64)):nn("",!0),C("button",{onClick:ve=>K(ce),class:"p-1 text-gray-400 hover:text-primary-500 focus:outline-none",title:"Éditer la note"},Z[19]||(Z[19]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,XZ),C("button",{onClick:ve=>B(ce),class:"p-1 text-gray-400 hover:text-red-500 focus:outline-none",title:"Supprimer la note"},Z[20]||(Z[20]=[C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[C("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,JZ)])])])])]),"empty-content":Wu(()=>Z[21]||(Z[21]=[C("div",{class:"p-4 text-center text-gray-400 text-sm italic"}," Aucune note dans cette colonne ",-1)])),_:2},1032,["list","onChange"])])])])]))),128))])]))]),o.value?(Be(),ze("div",QZ,[C("div",eX,[Z[23]||(Z[23]=C("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"},null,-1)),C("div",tX,[Z[22]||(Z[22]=Dl('<div class="p-4 md:p-6" data-v-3f5bbe8c><div class="flex items-start" data-v-3f5bbe8c><div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100" data-v-3f5bbe8c><svg class="h-6 w-6 text-red-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" data-v-3f5bbe8c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-3f5bbe8c></path></svg></div><div class="ml-4 flex-1" data-v-3f5bbe8c><h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title" data-v-3f5bbe8c> Supprimer la note </h3><div class="mt-2" data-v-3f5bbe8c><p class="text-sm text-gray-500" data-v-3f5bbe8c> Êtes-vous sûr de vouloir supprimer cette note ? Cette action est irréversible. </p></div></div></div></div>',1)),C("div",nX,[C("button",{onClick:V,type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm"}," Supprimer "),C("button",{onClick:Z[3]||(Z[3]=he=>o.value=!1),type:"button",class:"w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 sm:w-auto sm:text-sm"}," Annuler ")])])])])):nn("",!0),a.value?(Be(),Ol(BE,{key:1,note:c.value,"is-new-note":!((G=c.value)!=null&&G.id),location:(re=c.value)==null?void 0:re.location,onClose:Z[4]||(Z[4]=he=>a.value=!1),onSave:N},null,8,["note","is-new-note","location"])):nn("",!0)])}}}),iX=jh(rX,[["__scopeId","data-v-3f5bbe8c"]]);/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Rm(t){return t+.5|0}const fd=(t,e,n)=>Math.max(Math.min(t,n),e);function Mg(t){return fd(Rm(t*2.55),0,255)}function _d(t){return fd(Rm(t*255),0,255)}function Sh(t){return fd(Rm(t/2.55)/100,0,1)}function Z5(t){return fd(Rm(t*100),0,100)}const zu={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$b=[..."0123456789ABCDEF"],sX=t=>$b[t&15],oX=t=>$b[(t&240)>>4]+$b[t&15],O0=t=>(t&240)>>4===(t&15),aX=t=>O0(t.r)&&O0(t.g)&&O0(t.b)&&O0(t.a);function lX(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&zu[t[1]]*17,g:255&zu[t[2]]*17,b:255&zu[t[3]]*17,a:e===5?zu[t[4]]*17:255}:(e===7||e===9)&&(n={r:zu[t[1]]<<4|zu[t[2]],g:zu[t[3]]<<4|zu[t[4]],b:zu[t[5]]<<4|zu[t[6]],a:e===9?zu[t[7]]<<4|zu[t[8]]:255})),n}const uX=(t,e)=>t<255?e(t):"";function cX(t){var e=aX(t)?sX:oX;return t?"#"+e(t.r)+e(t.g)+e(t.b)+uX(t.a,e):void 0}const hX=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function bP(t,e,n){const r=e*Math.min(n,1-n),i=(s,o=(s+t/30)%12)=>n-r*Math.max(Math.min(o-3,9-o,1),-1);return[i(0),i(8),i(4)]}function dX(t,e,n){const r=(i,s=(i+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[r(5),r(3),r(1)]}function fX(t,e,n){const r=bP(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function pX(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}function K_(t){const n=t.r/255,r=t.g/255,i=t.b/255,s=Math.max(n,r,i),o=Math.min(n,r,i),a=(s+o)/2;let l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=pX(n,r,i,d,s),l=l*60+.5),[l|0,c||0,a]}function Z_(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(_d)}function X_(t,e,n){return Z_(bP,t,e,n)}function gX(t,e,n){return Z_(fX,t,e,n)}function mX(t,e,n){return Z_(dX,t,e,n)}function _P(t){return(t%360+360)%360}function vX(t){const e=hX.exec(t);let n=255,r;if(!e)return;e[5]!==r&&(n=e[6]?Mg(+e[5]):_d(+e[5]));const i=_P(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?r=gX(i,s,o):e[1]==="hsv"?r=mX(i,s,o):r=X_(i,s,o),{r:r[0],g:r[1],b:r[2],a:n}}function yX(t,e){var n=K_(t);n[0]=_P(n[0]+e),n=X_(n),t.r=n[0],t.g=n[1],t.b=n[2]}function bX(t){if(!t)return;const e=K_(t),n=e[0],r=Z5(e[1]),i=Z5(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${Sh(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}const X5={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},J5={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _X(){const t={},e=Object.keys(J5),n=Object.keys(X5);let r,i,s,o,a;for(r=0;r<e.length;r++){for(o=a=e[r],i=0;i<n.length;i++)s=n[i],a=a.replace(s,X5[s]);s=parseInt(J5[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let N0;function wX(t){N0||(N0=_X(),N0.transparent=[0,0,0,0]);const e=N0[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const xX=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function LX(t){const e=xX.exec(t);let n=255,r,i,s;if(e){if(e[7]!==r){const o=+e[7];n=e[8]?Mg(o):fd(o*255,0,255)}return r=+e[1],i=+e[3],s=+e[5],r=255&(e[2]?Mg(r):fd(r,0,255)),i=255&(e[4]?Mg(i):fd(i,0,255)),s=255&(e[6]?Mg(s):fd(s,0,255)),{r,g:i,b:s,a:n}}}function SX(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Sh(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const _2=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,ep=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function CX(t,e,n){const r=ep(Sh(t.r)),i=ep(Sh(t.g)),s=ep(Sh(t.b));return{r:_d(_2(r+n*(ep(Sh(e.r))-r))),g:_d(_2(i+n*(ep(Sh(e.g))-i))),b:_d(_2(s+n*(ep(Sh(e.b))-s))),a:t.a+n*(e.a-t.a)}}function I0(t,e,n){if(t){let r=K_(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,e===0?360:1)),r=X_(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function wP(t,e){return t&&Object.assign(e||{},t)}function Q5(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_d(t[3]))):(e=wP(t,{r:0,g:0,b:0,a:1}),e.a=_d(e.a)),e}function EX(t){return t.charAt(0)==="r"?LX(t):vX(t)}class bm{constructor(e){if(e instanceof bm)return e;const n=typeof e;let r;n==="object"?r=Q5(e):n==="string"&&(r=lX(e)||wX(e)||EX(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=wP(this._rgb);return e&&(e.a=Sh(e.a)),e}set rgb(e){this._rgb=Q5(e)}rgbString(){return this._valid?SX(this._rgb):void 0}hexString(){return this._valid?cX(this._rgb):void 0}hslString(){return this._valid?bX(this._rgb):void 0}mix(e,n){if(e){const r=this.rgb,i=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=r.a-i.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,r.r=255&c*r.r+s*i.r+.5,r.g=255&c*r.g+s*i.g+.5,r.b=255&c*r.b+s*i.b+.5,r.a=o*r.a+(1-o)*i.a,this.rgb=r}return this}interpolate(e,n){return e&&(this._rgb=CX(this._rgb,e._rgb,n)),this}clone(){return new bm(this.rgb)}alpha(e){return this._rgb.a=_d(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Rm(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return I0(this._rgb,2,e),this}darken(e){return I0(this._rgb,2,-e),this}saturate(e){return I0(this._rgb,1,e),this}desaturate(e){return I0(this._rgb,1,-e),this}rotate(e){return yX(this._rgb,e),this}}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */function _h(){}const PX=(()=>{let t=0;return()=>t++})();function Gi(t){return t===null||typeof t>"u"}function Js(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ti(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Po(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function _u(t,e){return Po(t)?t:e}function ui(t,e){return typeof t>"u"?e:t}const MX=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,xP=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Os(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ds(t,e,n,r){let i,s,o;if(Js(t))for(s=t.length,i=0;i<s;i++)e.call(n,t[i],i);else if(Ti(t))for(o=Object.keys(t),s=o.length,i=0;i<s;i++)e.call(n,t[o[i]],o[i])}function ny(t,e){let n,r,i,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],s=e[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function ry(t){if(Js(t))return t.map(ry);if(Ti(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=ry(t[n[i]]);return e}return t}function LP(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function kX(t,e,n,r){if(!LP(t))return;const i=e[t],s=n[t];Ti(i)&&Ti(s)?_m(i,s,r):e[t]=ry(s)}function _m(t,e,n){const r=Js(e)?e:[e],i=r.length;if(!Ti(t))return t;n=n||{};const s=n.merger||kX;let o;for(let a=0;a<i;++a){if(o=r[a],!Ti(o))continue;const l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],t,o,n)}return t}function Jg(t,e){return _m(t,e,{merger:AX})}function AX(t,e,n){if(!LP(t))return;const r=e[t],i=n[t];Ti(r)&&Ti(i)?Jg(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=ry(i))}const e3={"":t=>t,x:t=>t.x,y:t=>t.y};function TX(t){const e=t.split("."),n=[];let r="";for(const i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}function DX(t){const e=TX(t);return n=>{for(const r of e){if(r==="")break;n=n&&n[r]}return n}}function Pd(t,e){return(e3[e]||(e3[e]=DX(e)))(t)}function J_(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wm=t=>typeof t<"u",Md=t=>typeof t=="function",t3=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function OX(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const zs=Math.PI,js=2*zs,NX=js+zs,iy=Number.POSITIVE_INFINITY,IX=zs/180,Uo=zs/2,Zd=zs/4,n3=zs*2/3,pd=Math.log10,Qc=Math.sign;function Qg(t,e,n){return Math.abs(t-e)<n}function r3(t){const e=Math.round(t);t=Qg(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(pd(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function BX(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(n|0)&&e.push(n),e.sort((i,s)=>i-s).pop(),e}function Op(t){return!isNaN(parseFloat(t))&&isFinite(t)}function RX(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function SP(t,e,n){let r,i,s;for(r=0,i=t.length;r<i;r++)s=t[r][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function bc(t){return t*(zs/180)}function Q_(t){return t*(180/zs)}function i3(t){if(!Po(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function CP(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*zs&&(s+=js),{angle:s,distance:i}}function Vb(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function FX(t,e){return(t-e+NX)%js-zs}function wu(t){return(t%js+js)%js}function xm(t,e,n,r){const i=wu(t),s=wu(e),o=wu(n),a=wu(s-i),l=wu(o-i),c=wu(i-s),d=wu(i-o);return i===s||i===o||r&&s===o||a>l&&c<d}function Ea(t,e,n){return Math.max(e,Math.min(n,t))}function jX(t){return Ea(t,-32768,32767)}function Ah(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function ew(t,e,n){n=n||(o=>t[o]<e);let r=t.length-1,i=0,s;for(;r-i>1;)s=i+r>>1,n(s)?i=s:r=s;return{lo:i,hi:r}}const Th=(t,e,n,r)=>ew(t,n,r?i=>{const s=t[i][e];return s<n||s===n&&t[i+1][e]===n}:i=>t[i][e]<n),zX=(t,e,n)=>ew(t,n,r=>t[r][e]>=n);function $X(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}const EP=["push","pop","shift","splice","unshift"];function VX(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),EP.forEach(n=>{const r="_onData"+J_(n),i=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=i.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...s)}),o}})})}function s3(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(EP.forEach(s=>{delete t[s]}),delete t._chartjs)}function PP(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const MP=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function kP(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,MP.call(window,()=>{r=!1,t.apply(e,n)}))}}function UX(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}const tw=t=>t==="start"?"left":t==="end"?"right":"center",sl=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,HX=(t,e,n,r)=>t===(r?"left":"right")?n:t==="center"?(e+n)/2:e;function AP(t,e,n){const r=e.length;let i=0,s=r;if(t._sorted){const{iScale:o,_parsed:a}=t,l=o.axis,{min:c,max:d,minDefined:p,maxDefined:v}=o.getUserBounds();p&&(i=Ea(Math.min(Th(a,l,c).lo,n?r:Th(e,l,o.getPixelForValue(c)).lo),0,r-1)),v?s=Ea(Math.max(Th(a,o.axis,d,!0).hi+1,n?0:Th(e,l,o.getPixelForValue(d),!0).hi+1),i,r)-i:s=r-i}return{start:i,count:s}}function TP(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const s=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const B0=t=>t===0||t===1,o3=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*js/n)),a3=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*js/n)+1,em={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Uo)+1,easeOutSine:t=>Math.sin(t*Uo),easeInOutSine:t=>-.5*(Math.cos(zs*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>B0(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>B0(t)?t:o3(t,.075,.3),easeOutElastic:t=>B0(t)?t:a3(t,.075,.3),easeInOutElastic(t){return B0(t)?t:t<.5?.5*o3(t*2,.1125,.45):.5+.5*a3(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-em.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?em.easeInBounce(t*2)*.5:em.easeOutBounce(t*2-1)*.5+.5};function nw(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function l3(t){return nw(t)?t:new bm(t)}function w2(t){return nw(t)?t:new bm(t).saturate(.5).darken(.1).hexString()}const WX=["x","y","borderWidth","radius","tension"],GX=["color","borderColor","backgroundColor"];function qX(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:GX},numbers:{type:"number",properties:WX}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YX(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const u3=new Map;function KX(t,e){e=e||{};const n=t+JSON.stringify(e);let r=u3.get(n);return r||(r=new Intl.NumberFormat(t,e),u3.set(n,r)),r}function Fm(t,e,n){return KX(e,n).format(t)}const DP={values(t){return Js(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const r=this.chart.options.locale;let i,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(i="scientific"),s=ZX(t,n)}const o=pd(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Fm(t,r,l)},logarithmic(t,e,n){if(t===0)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(pd(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?DP.numeric.call(this,t,e,n):""}};function ZX(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var qy={formatters:DP};function XX(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:qy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const xf=Object.create(null),Ub=Object.create(null);function tm(t,e){if(!e)return t;const n=e.split(".");for(let r=0,i=n.length;r<i;++r){const s=n[r];t=t[s]||(t[s]=Object.create(null))}return t}function x2(t,e,n){return typeof e=="string"?_m(tm(t,e),n):_m(tm(t,""),e)}class JX{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>w2(i.backgroundColor),this.hoverBorderColor=(r,i)=>w2(i.borderColor),this.hoverColor=(r,i)=>w2(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return x2(this,e,n)}get(e){return tm(this,e)}describe(e,n){return x2(Ub,e,n)}override(e,n){return x2(xf,e,n)}route(e,n,r,i){const s=tm(this,e),o=tm(this,r),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[i];return Ti(l)?Object.assign({},c,l):ui(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Mo=new JX({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qX,YX,XX]);function QX(t){return!t||Gi(t.size)||Gi(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function sy(t,e,n,r,i){let s=e[i];return s||(s=e[i]=t.measureText(i).width,n.push(i)),s>r&&(r=s),r}function eJ(t,e,n,r){r=r||{};let i=r.data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},s=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let o=0;const a=n.length;let l,c,d,p,v;for(l=0;l<a;l++)if(p=n[l],p!=null&&!Js(p))o=sy(t,i,s,o,p);else if(Js(p))for(c=0,d=p.length;c<d;c++)v=p[c],v!=null&&!Js(v)&&(o=sy(t,i,s,o,v));t.restore();const m=s.length/2;if(m>n.length){for(l=0;l<m;l++)delete i[s[l]];s.splice(0,m)}return o}function Xd(t,e,n){const r=t.currentDevicePixelRatio,i=n!==0?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function c3(t,e){e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Hb(t,e,n,r){OP(t,e,n,r,null)}function OP(t,e,n,r,i){let s,o,a,l,c,d,p,v;const m=e.pointStyle,x=e.rotation,E=e.radius;let A=(x||0)*IX;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,r),t.rotate(A),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(E)||E<=0)){switch(t.beginPath(),m){default:i?t.ellipse(n,r,i/2,E,0,0,js):t.arc(n,r,E,0,js),t.closePath();break;case"triangle":d=i?i/2:E,t.moveTo(n+Math.sin(A)*d,r-Math.cos(A)*E),A+=n3,t.lineTo(n+Math.sin(A)*d,r-Math.cos(A)*E),A+=n3,t.lineTo(n+Math.sin(A)*d,r-Math.cos(A)*E),t.closePath();break;case"rectRounded":c=E*.516,l=E-c,o=Math.cos(A+Zd)*l,p=Math.cos(A+Zd)*(i?i/2-c:l),a=Math.sin(A+Zd)*l,v=Math.sin(A+Zd)*(i?i/2-c:l),t.arc(n-p,r-a,c,A-zs,A-Uo),t.arc(n+v,r-o,c,A-Uo,A),t.arc(n+p,r+a,c,A,A+Uo),t.arc(n-v,r+o,c,A+Uo,A+zs),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*E,d=i?i/2:l,t.rect(n-d,r-l,2*d,2*l);break}A+=Zd;case"rectRot":p=Math.cos(A)*(i?i/2:E),o=Math.cos(A)*E,a=Math.sin(A)*E,v=Math.sin(A)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+v,r-o),t.lineTo(n+p,r+a),t.lineTo(n-v,r+o),t.closePath();break;case"crossRot":A+=Zd;case"cross":p=Math.cos(A)*(i?i/2:E),o=Math.cos(A)*E,a=Math.sin(A)*E,v=Math.sin(A)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"star":p=Math.cos(A)*(i?i/2:E),o=Math.cos(A)*E,a=Math.sin(A)*E,v=Math.sin(A)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o),A+=Zd,p=Math.cos(A)*(i?i/2:E),o=Math.cos(A)*E,a=Math.sin(A)*E,v=Math.sin(A)*(i?i/2:E),t.moveTo(n-p,r-a),t.lineTo(n+p,r+a),t.moveTo(n+v,r-o),t.lineTo(n-v,r+o);break;case"line":o=i?i/2:Math.cos(A)*E,a=Math.sin(A)*E,t.moveTo(n-o,r-a),t.lineTo(n+o,r+a);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(A)*(i?i/2:E),r+Math.sin(A)*E);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Dh(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Yy(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ky(t){t.restore()}function tJ(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if(i==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else i==="after"!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function nJ(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function rJ(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Gi(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function iJ(t,e,n,r,i){if(i.strikethrough||i.underline){const s=t.measureText(r),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(o,d),t.lineTo(a,d),t.stroke()}}function sJ(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Lf(t,e,n,r,i,s={}){const o=Js(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=i.string,rJ(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&sJ(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Gi(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,r,s.maxWidth)),t.fillText(c,n,r,s.maxWidth),iJ(t,n,r,c,s),r+=Number(i.lineHeight);t.restore()}function Lm(t,e){const{x:n,y:r,w:i,h:s,radius:o}=e;t.arc(n+o.topLeft,r+o.topLeft,o.topLeft,1.5*zs,zs,!0),t.lineTo(n,r+s-o.bottomLeft),t.arc(n+o.bottomLeft,r+s-o.bottomLeft,o.bottomLeft,zs,Uo,!0),t.lineTo(n+i-o.bottomRight,r+s),t.arc(n+i-o.bottomRight,r+s-o.bottomRight,o.bottomRight,Uo,0,!0),t.lineTo(n+i,r+o.topRight),t.arc(n+i-o.topRight,r+o.topRight,o.topRight,0,-Uo,!0),t.lineTo(n+o.topLeft,r)}const oJ=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,aJ=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function lJ(t,e){const n=(""+t).match(oJ);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const uJ=t=>+t||0;function rw(t,e){const n={},r=Ti(e),i=r?Object.keys(e):e,s=Ti(t)?r?o=>ui(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of i)n[o]=uJ(s(o));return n}function NP(t){return rw(t,{top:"y",right:"x",bottom:"y",left:"x"})}function mf(t){return rw(t,["topLeft","topRight","bottomLeft","bottomRight"])}function fl(t){const e=NP(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ha(t,e){t=t||{},e=e||Mo.font;let n=ui(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let r=ui(t.style,e.style);r&&!(""+r).match(aJ)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:ui(t.family,e.family),lineHeight:lJ(ui(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:ui(t.weight,e.weight),string:""};return i.string=QX(i),i}function kg(t,e,n,r){let i,s,o;for(i=0,s=t.length;i<s;++i)if(o=t[i],o!==void 0&&o!==void 0)return o}function cJ(t,e,n){const{min:r,max:i}=t,s=xP(e,(i-r)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(r,-Math.abs(s)),max:o(i,s)}}function Dd(t,e){return Object.assign(Object.create(t),e)}function iw(t,e=[""],n,r,i=()=>t[0]){const s=n||t;typeof r>"u"&&(r=FP("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:r,_getTarget:i,override:a=>iw([a,...t],e,s,r)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return BP(a,l,()=>yJ(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return d3(a).includes(l)},ownKeys(a){return d3(a)},set(a,l,c){const d=a._storage||(a._storage=i());return a[l]=d[l]=c,delete a._keys,!0}})}function Np(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:IP(t,r),setContext:s=>Np(t,s,n,r),override:s=>Np(t.override(s),e,n,r)};return new Proxy(i,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return BP(s,o,()=>dJ(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function IP(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Md(n)?n:()=>n,isIndexable:Md(r)?r:()=>r}}const hJ=(t,e)=>t?t+J_(e):e,sw=(t,e)=>Ti(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function BP(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const r=n();return t[e]=r,r}function dJ(t,e,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:o}=t;let a=r[e];return Md(a)&&o.isScriptable(e)&&(a=fJ(e,a,t,n)),Js(a)&&a.length&&(a=pJ(e,a,t,o.isIndexable)),sw(e,a)&&(a=Np(a,i,s&&s[e],o)),a}function fJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||r);return a.delete(t),sw(t,l)&&(l=ow(i._scopes,i,t,l)),l}function pJ(t,e,n,r){const{_proxy:i,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&r(t))return e[s.index%e.length];if(Ti(e[0])){const l=e,c=i._scopes.filter(d=>d!==l);e=[];for(const d of l){const p=ow(c,i,t,d);e.push(Np(p,s,o&&o[t],a))}}return e}function RP(t,e,n){return Md(t)?t(e,n):t}const gJ=(t,e)=>t===!0?e:typeof t=="string"?Pd(e,t):void 0;function mJ(t,e,n,r,i){for(const s of e){const o=gJ(n,s);if(o){t.add(o);const a=RP(o._fallback,n,i);if(typeof a<"u"&&a!==n&&a!==r)return a}else if(o===!1&&typeof r<"u"&&n!==r)return null}return!1}function ow(t,e,n,r){const i=e._rootScopes,s=RP(e._fallback,n,r),o=[...t,...i],a=new Set;a.add(r);let l=h3(a,o,n,s||n,r);return l===null||typeof s<"u"&&s!==n&&(l=h3(a,o,s,l,r),l===null)?!1:iw(Array.from(a),[""],i,s,()=>vJ(e,n,r))}function h3(t,e,n,r,i){for(;n;)n=mJ(t,e,n,r,i);return n}function vJ(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Js(i)&&Ti(n)?n:i||{}}function yJ(t,e,n,r){let i;for(const s of e)if(i=FP(hJ(s,t),n),typeof i<"u")return sw(t,i)?ow(n,r,t,i):i}function FP(t,e){for(const n of e){if(!n)continue;const r=n[t];if(typeof r<"u")return r}}function d3(t){let e=t._keys;return e||(e=t._keys=bJ(t._scopes)),e}function bJ(t){const e=new Set;for(const n of t)for(const r of Object.keys(n).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function jP(t,e,n,r){const{iScale:i}=t,{key:s="r"}=this._parsing,o=new Array(r);let a,l,c,d;for(a=0,l=r;a<l;++a)c=a+n,d=e[c],o[a]={r:i.parse(Pd(d,s),c)};return o}const _J=Number.EPSILON||1e-14,Ip=(t,e)=>e<t.length&&!t[e].skip&&t[e],zP=t=>t==="x"?"y":"x";function wJ(t,e,n,r){const i=t.skip?e:t,s=e,o=n.skip?e:n,a=Vb(s,i),l=Vb(o,s);let c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const p=r*c,v=r*d;return{previous:{x:s.x-p*(o.x-i.x),y:s.y-p*(o.y-i.y)},next:{x:s.x+v*(o.x-i.x),y:s.y+v*(o.y-i.y)}}}function xJ(t,e,n){const r=t.length;let i,s,o,a,l,c=Ip(t,0);for(let d=0;d<r-1;++d)if(l=c,c=Ip(t,d+1),!(!l||!c)){if(Qg(e[d],0,_J)){n[d]=n[d+1]=0;continue}i=n[d]/e[d],s=n[d+1]/e[d],a=Math.pow(i,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[d]=i*o*e[d],n[d+1]=s*o*e[d])}}function LJ(t,e,n="x"){const r=zP(n),i=t.length;let s,o,a,l=Ip(t,0);for(let c=0;c<i;++c){if(o=a,a=l,l=Ip(t,c+1),!a)continue;const d=a[n],p=a[r];o&&(s=(d-o[n])/3,a[`cp1${n}`]=d-s,a[`cp1${r}`]=p-s*e[c]),l&&(s=(l[n]-d)/3,a[`cp2${n}`]=d+s,a[`cp2${r}`]=p+s*e[c])}}function SJ(t,e="x"){const n=zP(e),r=t.length,i=Array(r).fill(0),s=Array(r);let o,a,l,c=Ip(t,0);for(o=0;o<r;++o)if(a=l,l=c,c=Ip(t,o+1),!!l){if(c){const d=c[e]-l[e];i[o]=d!==0?(c[n]-l[n])/d:0}s[o]=a?c?Qc(i[o-1])!==Qc(i[o])?0:(i[o-1]+i[o])/2:i[o-1]:i[o]}xJ(t,i,s),LJ(t,s,e)}function R0(t,e,n){return Math.max(Math.min(t,n),e)}function CJ(t,e){let n,r,i,s,o,a=Dh(t[0],e);for(n=0,r=t.length;n<r;++n)o=s,s=a,a=n<r-1&&Dh(t[n+1],e),s&&(i=t[n],o&&(i.cp1x=R0(i.cp1x,e.left,e.right),i.cp1y=R0(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=R0(i.cp2x,e.left,e.right),i.cp2y=R0(i.cp2y,e.top,e.bottom)))}function EJ(t,e,n,r,i){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")SJ(t,i);else{let c=r?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=wJ(c,a,t[Math.min(s+1,o-(r?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&CJ(t,n)}function aw(){return typeof window<"u"&&typeof document<"u"}function lw(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function oy(t,e,n){let r;return typeof t=="string"?(r=parseInt(t,10),t.indexOf("%")!==-1&&(r=r/100*e.parentNode[n])):r=t,r}const Zy=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function PJ(t,e){return Zy(t).getPropertyValue(e)}const MJ=["top","right","bottom","left"];function vf(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=MJ[i];r[s]=parseFloat(t[e+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const kJ=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function AJ(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:s}=r;let o=!1,a,l;if(kJ(i,s,t.target))a=i,l=s;else{const c=e.getBoundingClientRect();a=r.clientX-c.left,l=r.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function nf(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=Zy(n),s=i.boxSizing==="border-box",o=vf(i,"padding"),a=vf(i,"border","width"),{x:l,y:c,box:d}=AJ(t,n),p=o.left+(d&&a.left),v=o.top+(d&&a.top);let{width:m,height:x}=e;return s&&(m-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-p)/m*n.width/r),y:Math.round((c-v)/x*n.height/r)}}function TJ(t,e,n){let r,i;if(e===void 0||n===void 0){const s=lw(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Zy(s),l=vf(a,"border","width"),c=vf(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,r=oy(a.maxWidth,s,"clientWidth"),i=oy(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:r||iy,maxHeight:i||iy}}const F0=t=>Math.round(t*10)/10;function DJ(t,e,n,r){const i=Zy(t),s=vf(i,"margin"),o=oy(i.maxWidth,t,"clientWidth")||iy,a=oy(i.maxHeight,t,"clientHeight")||iy,l=TJ(t,e,n);let{width:c,height:d}=l;if(i.boxSizing==="content-box"){const v=vf(i,"border","width"),m=vf(i,"padding");c-=m.width+v.width,d-=m.height+v.height}return c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=F0(Math.min(c,o,l.maxWidth)),d=F0(Math.min(d,a,l.maxHeight)),c&&!d&&(d=F0(c/2)),(e!==void 0||n!==void 0)&&r&&l.height&&d>l.height&&(d=l.height,c=F0(Math.floor(d*r))),{width:c,height:d}}function f3(t,e,n){const r=e||1,i=Math.floor(t.height*r),s=Math.floor(t.width*r);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==r||o.height!==i||o.width!==s?(t.currentDevicePixelRatio=r,o.height=i,o.width=s,t.ctx.setTransform(r,0,0,r,0,0),!0):!1}const OJ=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};aw()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function p3(t,e){const n=PJ(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function rf(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function NJ(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:r==="middle"?n<.5?t.y:e.y:r==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function IJ(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=rf(t,i,n),a=rf(i,s,n),l=rf(s,e,n),c=rf(o,a,n),d=rf(a,l,n);return rf(c,d,n)}const BJ=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,r){return n-r},leftForLtr(n,r){return n-r}}},RJ=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Lp(t,e,n){return t?BJ(e,n):RJ()}function $P(t,e){let n,r;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function VP(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function UP(t){return t==="angle"?{between:xm,compare:FX,normalize:wu}:{between:Ah,compare:(e,n)=>e-n,normalize:e=>e}}function g3({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n===0,style:i}}function FJ(t,e,n){const{property:r,start:i,end:s}=n,{between:o,normalize:a}=UP(r),l=e.length;let{start:c,end:d,loop:p}=t,v,m;if(p){for(c+=l,d+=l,v=0,m=l;v<m&&o(a(e[c%l][r]),i,s);++v)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:p,style:t.style}}function HP(t,e,n){if(!n)return[t];const{property:r,start:i,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=UP(r),{start:d,end:p,loop:v,style:m}=FJ(t,e,n),x=[];let E=!1,A=null,k,D,$;const Y=()=>l(i,$,k)&&a(i,$)!==0,te=()=>a(s,k)===0||l(s,$,k),me=()=>E||Y(),pe=()=>!E||te();for(let I=d,z=d;I<=p;++I)D=e[I%o],!D.skip&&(k=c(D[r]),k!==$&&(E=l(k,i,s),A===null&&me()&&(A=a(k,i)===0?I:z),A!==null&&pe()&&(x.push(g3({start:A,end:I,loop:v,count:o,style:m})),A=null),z=I,$=k));return A!==null&&x.push(g3({start:A,end:p,loop:v,count:o,style:m})),x}function WP(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const s=HP(r[i],t.points,e);s.length&&n.push(...s)}return n}function jJ(t,e,n,r){let i=0,s=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(s+=i);s>i&&t[s%e].skip;)s--;return s%=e,{start:i,end:s}}function zJ(t,e,n,r){const i=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%i];c.skip||c.stop?a.skip||(r=!1,s.push({start:e%i,end:(l-1)%i,loop:r}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%i,end:o%i,loop:r}),s}function $J(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const s=!!t._loop,{start:o,end:a}=jJ(n,i,s,r);if(r===!0)return m3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+i:a,c=!!t._fullLoop&&o===0&&a===i-1;return m3(t,zJ(n,o,l,c),n,e)}function m3(t,e,n,r){return!r||!r.setContext||!n?e:VJ(t,e,n,r)}function VJ(t,e,n,r){const i=t._chart.getContext(),s=v3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let d=s,p=e[0].start,v=p;function m(x,E,A,k){const D=a?-1:1;if(x!==E){for(x+=l;n[x%l].skip;)x-=D;for(;n[E%l].skip;)E+=D;x%l!==E%l&&(c.push({start:x%l,end:E%l,loop:A,style:k}),d=k,p=E%l)}}for(const x of e){p=a?p:x.start;let E=n[p%l],A;for(v=p+1;v<=x.end;v++){const k=n[v%l];A=v3(r.setContext(Dd(i,{type:"segment",p0:E,p1:k,p0DataIndex:(v-1)%l,p1DataIndex:v%l,datasetIndex:o}))),UJ(A,d)&&m(p,v-1,x.loop,d),E=k,d=A}p<v-1&&m(p,v-1,x.loop,d)}return c}function v3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function UJ(t,e){if(!e)return!1;const n=[],r=function(i,s){return nw(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,r)!==JSON.stringify(e,r)}/*!
 * Chart.js v4.4.1
 * https://www.chartjs.org
 * (c) 2023 Chart.js Contributors
 * Released under the MIT License
 */class HJ{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,r,i){const s=n.listeners[i],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(r-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=MP.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const s=r.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),s.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let r=n.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,r)),r}listen(e,n,r){this._getAnims(e).listeners[n].push(r)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const r=n.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wh=new HJ;const y3="transparent",WJ={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const r=l3(t||y3),i=r.valid&&l3(e||y3);return i&&i.valid?i.mix(r,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class GJ{constructor(e,n,r,i){const s=n[r];i=kg([e.to,i,s,e.from]);const o=kg([e.from,s,i]);this._active=!0,this._fn=e.fn||WJ[e.type||typeof o],this._easing=em[e.easing]||em.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=r,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(e,n,r){if(this._active){this._notify(!1);const i=this._target[this._prop],s=r-this._start,o=this._duration-s;this._start=r,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=kg([e.to,n,i,e.from]),this._from=kg([e.from,i,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,r=this._duration,i=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<r),!this._active){this._target[i]=a,this._notify(!0);return}if(n<0){this._target[i]=s;return}l=n/r%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,r)=>{e.push({res:n,rej:r})})}_notify(e){const n=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][n]()}}class GP{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Ti(e))return;const n=Object.keys(Mo.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const s=e[i];if(!Ti(s))return;const o={};for(const a of n)o[a]=s[a];(Js(s.properties)&&s.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,o)})})}_animateOptions(e,n){const r=n.options,i=YJ(e,r);if(!i)return[];const s=this._createAnimations(i,r);return r.$shared&&qJ(e.options.$animations,r).then(()=>{e.options=r},()=>{}),s}_createAnimations(e,n){const r=this._properties,i=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){i.push(...this._animateOptions(e,n));continue}const d=n[c];let p=s[c];const v=r.get(c);if(p)if(v&&p.active()){p.update(v,d,a);continue}else p.cancel();if(!v||!v.duration){e[c]=d;continue}s[c]=p=new GJ(v,e,c,d),i.push(p)}return i}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const r=this._createAnimations(e,n);if(r.length)return wh.add(this._chart,r),!0}}function qJ(t,e){const n=[],r=Object.keys(e);for(let i=0;i<r.length;i++){const s=t[r[i]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function YJ(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function b3(t,e){const n=t&&t.options||{},r=n.reverse,i=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:r?s:i,end:r?i:s}}function KJ(t,e,n){if(n===!1)return!1;const r=b3(t,n),i=b3(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function ZJ(t){let e,n,r,i;return Ti(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:t===!1}}function qP(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function _3(t,e,n,r={}){const i=t.keys,s=r.mode==="single";let o,a,l,c;if(e!==null){for(o=0,a=i.length;o<a;++o){if(l=+i[o],l===n){if(r.all)continue;break}c=t.values[l],Po(c)&&(s||e===0||Qc(e)===Qc(c))&&(e+=c)}return e}}function XJ(t){const e=Object.keys(t),n=new Array(e.length);let r,i,s;for(r=0,i=e.length;r<i;++r)s=e[r],n[r]={x:s,y:t[s]};return n}function w3(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function JJ(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function QJ(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}function eQ(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function x3(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const s=t[i.index];if(n&&s>0||!n&&s<0)return i.index}return null}function L3(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=r,l=s.axis,c=o.axis,d=JJ(s,o,r),p=e.length;let v;for(let m=0;m<p;++m){const x=e[m],{[l]:E,[c]:A}=x,k=x._stacks||(x._stacks={});v=k[c]=eQ(i,d,E),v[a]=A,v._top=x3(v,o,!0,r.type),v._bottom=x3(v,o,!1,r.type);const D=v._visualValues||(v._visualValues={});D[a]=A}}function L2(t,e){const n=t.scales;return Object.keys(n).filter(r=>n[r].axis===e).shift()}function tQ(t,e){return Dd(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function nQ(t,e,n){return Dd(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function cg(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const i of e){const s=i._stacks;if(!s||s[r]===void 0||s[r][n]===void 0)return;delete s[r][n],s[r]._visualValues!==void 0&&s[r]._visualValues[n]!==void 0&&delete s[r]._visualValues[n]}}}const S2=t=>t==="reset"||t==="none",S3=(t,e)=>e?t:Object.assign({},t),rQ=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:qP(n,!0),values:null};class wc{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=w3(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&cg(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,r=this.getDataset(),i=(p,v,m,x)=>p==="x"?v:p==="r"?x:m,s=n.xAxisID=ui(r.xAxisID,L2(e,"x")),o=n.yAxisID=ui(r.yAxisID,L2(e,"y")),a=n.rAxisID=ui(r.rAxisID,L2(e,"r")),l=n.indexAxis,c=n.iAxisID=i(l,s,o,a),d=n.vAxisID=i(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&s3(this._data,this),e._stacked&&cg(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(Ti(n))this._data=XJ(n);else if(r!==n){if(r){s3(r,this);const i=this._cachedMeta;cg(i),i._parsed=[]}n&&Object.isExtensible(n)&&VX(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const s=n._stacked;n._stacked=w3(n.vScale,n),n.stack!==r.stack&&(i=!0,cg(n),n.stack=r.stack),this._resyncElements(e),(i||s!==n._stacked)&&L3(this,n._parsed)}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:r,_data:i}=this,{iScale:s,_stacked:o}=r,a=s.axis;let l=e===0&&n===i.length?!0:r._sorted,c=e>0&&r._parsed[e-1],d,p,v;if(this._parsing===!1)r._parsed=i,r._sorted=!0,v=i;else{Js(i[e])?v=this.parseArrayData(r,i,e,n):Ti(i[e])?v=this.parseObjectData(r,i,e,n):v=this.parsePrimitiveData(r,i,e,n);const m=()=>p[a]===null||c&&p[a]<c[a];for(d=0;d<n;++d)r._parsed[d+e]=p=v[d],l&&(m()&&(l=!1),c=p);r._sorted=l}o&&L3(this,v)}parsePrimitiveData(e,n,r,i){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),d=s===o,p=new Array(i);let v,m,x;for(v=0,m=i;v<m;++v)x=v+r,p[v]={[a]:d||s.parse(c[x],x),[l]:o.parse(n[x],x)};return p}parseArrayData(e,n,r,i){const{xScale:s,yScale:o}=e,a=new Array(i);let l,c,d,p;for(l=0,c=i;l<c;++l)d=l+r,p=n[d],a[l]={x:s.parse(p[0],d),y:o.parse(p[1],d)};return a}parseObjectData(e,n,r,i){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(i);let d,p,v,m;for(d=0,p=i;d<p;++d)v=d+r,m=n[v],c[d]={x:s.parse(Pd(m,a),v),y:o.parse(Pd(m,l),v)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){const i=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:qP(i,!0),values:n._stacks[e.axis]._visualValues};return _3(a,o,s.index,{mode:r})}updateRangeFromParsed(e,n,r,i){const s=r[n.axis];let o=s===null?NaN:s;const a=i&&r._stacks[n.axis];i&&a&&(i.values=a,o=_3(i,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const r=this._cachedMeta,i=r._parsed,s=r._sorted&&e===r.iScale,o=i.length,a=this._getOtherScale(e),l=rQ(n,r,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=QJ(a);let v,m;function x(){m=i[v];const E=m[a.axis];return!Po(m[e.axis])||d>E||p<E}for(v=0;v<o&&!(!x()&&(this.updateRangeFromParsed(c,e,m,l),s));++v);if(s){for(v=o-1;v>=0;--v)if(!x()){this.updateRangeFromParsed(c,e,m,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,r=[];let i,s,o;for(i=0,s=n.length;i<s;++i)o=n[i][e.axis],Po(o)&&r.push(o);return r}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,r=n.iScale,i=n.vScale,s=this.getParsed(e);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:i?""+i.getLabelForValue(s[i.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=ZJ(ui(this.options.clip,KJ(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,r=this._cachedMeta,i=r.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||i.length-a,c=this.options.drawActiveElementsOnTop;let d;for(r.dataset&&r.dataset.draw(e,s,a,l),d=a;d<a+l;++d){const p=i[d];p.hidden||(p.active&&c?o.push(p):p.draw(e,s))}for(d=0;d<o.length;++d)o[d].draw(e,s)}getStyle(e,n){const r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){const i=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=nQ(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=i.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=tQ(this.chart.getContext(),this.index)),s.dataset=i,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=r,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){const i=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&wm(r);if(a)return S3(a,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,e),p=i?[`${e}Hover`,"hover",e,""]:[e,""],v=c.getOptionScopes(this.getDataset(),d),m=Object.keys(Mo.elements[e]),x=()=>this.getContext(r,i,n),E=c.resolveNamedOptions(v,m,x,p);return E.$shared&&(E.$shared=l,s[o]=Object.freeze(S3(E,l))),E}_resolveAnimations(e,n,r){const i=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(i.options.animation!==!1){const d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,n),v=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(v,this.getContext(e,r,n))}const c=new GP(i,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||S2(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const r=this.resolveDataElementOptions(e,n),i=this._sharedOptions,s=this.getSharedOptions(r),o=this.includeOptions(n,s)||s!==i;return this.updateSharedOptions(s,n,r),{sharedOptions:s,includeOptions:o}}updateElement(e,n,r,i){S2(i)?Object.assign(e,r):this._resolveAnimations(n,i).update(e,r)}updateSharedOptions(e,n,r){e&&!S2(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,i){e.active=i;const s=this.getStyle(n,i);this._resolveAnimations(n,r,i).update(e,{options:!i&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,r=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const i=r.length,s=n.length,o=Math.min(s,i);o&&this.parse(0,o),s>i?this._insertElements(i,s-i,e):s<i&&this._removeElements(s,i-s)}_insertElements(e,n,r=!0){const i=this._cachedMeta,s=i.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(e,n),r&&this.updateElements(s,e,n,"reset")}updateElements(e,n,r,i){}_removeElements(e,n){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(e,n);r._stacked&&cg(r,i)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,r,i]=e;this[n](r,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Ze(wc,"defaults",{}),Ze(wc,"datasetElementType",null),Ze(wc,"dataElementType",null);function iQ(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let i=0,s=n.length;i<s;i++)r=r.concat(n[i].controller.getAllParsedValues(t));t._cache.$bar=PP(r.sort((i,s)=>i-s))}return t._cache.$bar}function sQ(t){const e=t.iScale,n=iQ(e,t.type);let r=e._length,i,s,o,a;const l=()=>{o===32767||o===-32768||(wm(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(i=0,s=n.length;i<s;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,s=e.ticks.length;i<s;++i)o=e.getPixelForTick(i),l();return r}function oQ(t,e,n,r){const i=n.barThickness;let s,o;return Gi(i)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=i*r,o=1),{chunk:s/r,ratio:o,start:e.pixels[t]-s/2}}function aQ(t,e,n,r){const i=e.pixels,s=i[t];let o=t>0?i[t-1]:null,a=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/r,ratio:n.barPercentage,start:c}}function lQ(t,e,n,r){const i=n.parse(t[0],r),s=n.parse(t[1],r),o=Math.min(i,s),a=Math.max(i,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:s,min:o,max:a}}function YP(t,e,n,r){return Js(t)?lQ(t,e,n,r):e[n.axis]=n.parse(t,r),e}function C3(t,e,n,r){const i=t.iScale,s=t.vScale,o=i.getLabels(),a=i===s,l=[];let c,d,p,v;for(c=n,d=n+r;c<d;++c)v=e[c],p={},p[i.axis]=a||i.parse(o[c],c),l.push(YP(v,p,s,c));return l}function C2(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function uQ(t,e,n){return t!==0?Qc(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function cQ(t){let e,n,r,i,s;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:e,top:i,bottom:s}}function hQ(t,e,n,r){let i=e.borderSkipped;const s={};if(!i){t.borderSkipped=s;return}if(i===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:d}=cQ(t);i==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[E3(d,o,a,l)]=!0,i=c)),s[E3(i,o,a,l)]=!0,t.borderSkipped=s}function E3(t,e,n,r){return r?(t=dQ(t,e,n),t=P3(t,n,e)):t=P3(t,e,n),t}function dQ(t,e,n){return t===e?n:t===n?e:t}function P3(t,e,n){return t==="start"?e:t==="end"?n:t}function fQ(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class gv extends wc{parsePrimitiveData(e,n,r,i){return C3(e,n,r,i)}parseArrayData(e,n,r,i){return C3(e,n,r,i)}parseObjectData(e,n,r,i){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,d=o.axis==="x"?a:l,p=[];let v,m,x,E;for(v=r,m=r+i;v<m;++v)E=n[v],x={},x[s.axis]=s.parse(Pd(E,c),v),p.push(YP(Pd(E,d),x,o,v));return p}updateRangeFromParsed(e,n,r,i){super.updateRangeFromParsed(e,n,r,i);const s=r._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:r,vScale:i}=n,s=this.getParsed(e),o=s._custom,a=C2(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(s[i.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,i){const s=i==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:v}=this._getSharedOptions(n,i);for(let m=n;m<n+r;m++){const x=this.getParsed(m),E=s||Gi(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(m),A=this._calculateBarIndexPixels(m,d),k=(x._stacks||{})[a.axis],D={horizontal:c,base:E.base,enableBorderRadius:!k||C2(x._custom)||o===k._top||o===k._bottom,x:c?E.head:A.center,y:c?A.center:E.head,height:c?A.size:Math.abs(E.size),width:c?Math.abs(E.size):A.size};v&&(D.options=p||this.resolveDataElementOptions(m,e[m].active?"active":i));const $=D.options||e[m].options;hQ(D,$,k,o),fQ(D,$,d.ratio),this.updateElement(e[m],m,D,i)}}_getStacks(e,n){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(l=>l.controller.options.grouped),s=r.options.stacked,o=[],a=l=>{const c=l.controller.getParsed(n),d=c&&c[l.vScale.axis];if(Gi(d)||isNaN(d))return!0};for(const l of i)if(!(n!==void 0&&a(l))&&((s===!1||o.indexOf(l.stack)===-1||s===void 0&&l.stack===void 0)&&o.push(l.stack),l.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){const i=this._getStacks(e,r),s=n!==void 0?i.indexOf(n):-1;return s===-1?i.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,r=n.iScale,i=[];let s,o;for(s=0,o=n.data.length;s<o;++s)i.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));const a=e.barThickness;return{min:a||sQ(n),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:r,index:i},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,d=C2(c);let p=l[n.axis],v=0,m=r?this.applyStack(n,l,r):p,x,E;m!==p&&(v=m-p,m=p),d&&(p=c.barStart,m=c.barEnd-c.barStart,p!==0&&Qc(p)!==Qc(c.barEnd)&&(v=0),v+=p);const A=!Gi(s)&&!d?s:v;let k=n.getPixelForValue(A);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(v+m):x=k,E=x-k,Math.abs(E)<o){E=uQ(E,n,a)*o,p===a&&(k-=E/2);const D=n.getPixelForDecimal(0),$=n.getPixelForDecimal(1),Y=Math.min(D,$),te=Math.max(D,$);k=Math.max(Math.min(k,te),Y),x=k+E,r&&!d&&(l._stacks[n.axis]._visualValues[i]=n.getValueForPixel(x)-n.getValueForPixel(k))}if(k===n.getPixelForValue(a)){const D=Qc(E)*n.getLineWidthForValue(a)/2;k+=D,E-=D}return{size:E,base:k,head:x,center:x+E/2}}_calculateBarIndexPixels(e,n){const r=n.scale,i=this.options,s=i.skipNull,o=ui(i.maxBarThickness,1/0);let a,l;if(n.grouped){const c=s?this._getStackCount(e):n.stackCount,d=i.barThickness==="flex"?aQ(e,n,i,c):oQ(e,n,i,c),p=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0);a=d.start+d.chunk*p+d.chunk/2,l=Math.min(o,d.chunk*d.ratio)}else a=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,r=e.data,i=r.length;let s=0;for(;s<i;++s)this.getParsed(s)[n.axis]!==null&&r[s].draw(this._ctx)}}Ze(gv,"id","bar"),Ze(gv,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Ze(gv,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class mv extends wc{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,i){const s=super.parsePrimitiveData(e,n,r,i);for(let o=0;o<s.length;o++)s[o]._custom=this.resolveDataElementOptions(o+r).radius;return s}parseArrayData(e,n,r,i){const s=super.parseArrayData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ui(a[2],this.resolveDataElementOptions(o+r).radius)}return s}parseObjectData(e,n,r,i){const s=super.parseObjectData(e,n,r,i);for(let o=0;o<s.length;o++){const a=n[r+o];s[o]._custom=ui(a&&a.r&&+a.r,this.resolveDataElementOptions(o+r).radius)}return s}getMaxOverflow(){const e=this._cachedMeta.data;let n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y),c=o._custom;return{label:r[e]||"",value:"("+a+", "+l+(c?", "+c:"")+")"}}update(e){const n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(n,i),d=o.axis,p=a.axis;for(let v=n;v<n+r;v++){const m=e[v],x=!s&&this.getParsed(v),E={},A=E[d]=s?o.getPixelForDecimal(.5):o.getPixelForValue(x[d]),k=E[p]=s?a.getBasePixel():a.getPixelForValue(x[p]);E.skip=isNaN(A)||isNaN(k),c&&(E.options=l||this.resolveDataElementOptions(v,m.active?"active":i),s&&(E.options.radius=0)),this.updateElement(m,v,E,i)}}resolveDataElementOptions(e,n){const r=this.getParsed(e);let i=super.resolveDataElementOptions(e,n);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const s=i.radius;return n!=="active"&&(i.radius=0),i.radius+=ui(r&&r._custom,s),i}}Ze(mv,"id","bubble"),Ze(mv,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Ze(mv,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function pQ(t,e,n){let r=1,i=1,s=0,o=0;if(e<js){const a=t,l=a+e,c=Math.cos(a),d=Math.sin(a),p=Math.cos(l),v=Math.sin(l),m=($,Y,te)=>xm($,a,l,!0)?1:Math.max(Y,Y*n,te,te*n),x=($,Y,te)=>xm($,a,l,!0)?-1:Math.min(Y,Y*n,te,te*n),E=m(0,c,p),A=m(Uo,d,v),k=x(zs,c,p),D=x(zs+Uo,d,v);r=(E-k)/2,i=(A-D)/2,s=-(E+k)/2,o=-(A+D)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:o}}class uf extends wc{constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let s=l=>+r[l];if(Ti(r[e])){const{key:l="value"}=this._parsing;s=c=>+Pd(r[c],l)}let o,a;for(o=e,a=e+n;o<a;++o)i._parsed[o]=s(o)}}_getRotation(){return bc(this.options.rotation-90)}_getCircumference(){return bc(this.options.circumference)}_getRotationExtents(){let e=js,n=-js;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,s=i._getRotation(),o=i._getCircumference();e=Math.min(e,s),n=Math.max(n,s+o)}return{rotation:e,circumference:n-e}}update(e){const n=this.chart,{chartArea:r}=n,i=this._cachedMeta,s=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,a=Math.max((Math.min(r.width,r.height)-o)/2,0),l=Math.min(MX(this.options.cutout,a),1),c=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:v,ratioY:m,offsetX:x,offsetY:E}=pQ(p,d,l),A=(r.width-o)/v,k=(r.height-o)/m,D=Math.max(Math.min(A,k)/2,0),$=xP(this.options.radius,D),Y=Math.max($*l,0),te=($-Y)/this._getVisibleDatasetWeightTotal();this.offsetX=x*$,this.offsetY=E*$,i.total=this.calculateTotal(),this.outerRadius=$-te*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-te*c,0),this.updateElements(s,0,s.length,e)}_circumference(e,n){const r=this.options,i=this._cachedMeta,s=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||i._parsed[e]===null||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*s/js)}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,a=o.chartArea,c=o.options.animation,d=(a.left+a.right)/2,p=(a.top+a.bottom)/2,v=s&&c.animateScale,m=v?0:this.innerRadius,x=v?0:this.outerRadius,{sharedOptions:E,includeOptions:A}=this._getSharedOptions(n,i);let k=this._getRotation(),D;for(D=0;D<n;++D)k+=this._circumference(D,s);for(D=n;D<n+r;++D){const $=this._circumference(D,s),Y=e[D],te={x:d+this.offsetX,y:p+this.offsetY,startAngle:k,endAngle:k+$,circumference:$,outerRadius:x,innerRadius:m};A&&(te.options=E||this.resolveDataElementOptions(D,Y.active?"active":i)),k+=$,this.updateElement(Y,D,te,i)}}calculateTotal(){const e=this._cachedMeta,n=e.data;let r=0,i;for(i=0;i<n.length;i++){const s=e._parsed[i];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(i)&&!n[i].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(e){const n=this._cachedMeta.total;return n>0&&!isNaN(e)?js*(Math.abs(e)/n):0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e],r.options.locale);return{label:i[e]||"",value:s}}getMaxBorderWidth(e){let n=0;const r=this.chart;let i,s,o,a,l;if(!e){for(i=0,s=r.data.datasets.length;i<s;++i)if(r.isDatasetVisible(i)){o=r.getDatasetMeta(i),e=o.data,a=o.controller;break}}if(!e)return 0;for(i=0,s=e.length;i<s;++i)l=a.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(n=Math.max(n,l.borderWidth||0,l.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,i=e.length;r<i;++r){const s=this.resolveDataElementOptions(r);n=Math.max(n,s.offset||0,s.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(ui(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Ze(uf,"id","doughnut"),Ze(uf,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Ze(uf,"descriptors",{_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Ze(uf,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}});class vv extends wc{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:r,data:i=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=AP(n,i,o);this._drawStart=a,this._drawCount=l,TP(n)&&(a=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=i;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!o,options:c},e),this.updateElements(i,a,l,e)}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(n,i),v=o.axis,m=a.axis,{spanGaps:x,segment:E}=this.options,A=Op(x)?x:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||s||i==="none",D=n+r,$=e.length;let Y=n>0&&this.getParsed(n-1);for(let te=0;te<$;++te){const me=e[te],pe=k?me:{};if(te<n||te>=D){pe.skip=!0;continue}const I=this.getParsed(te),z=Gi(I[m]),K=pe[v]=o.getPixelForValue(I[v],te),N=pe[m]=s||z?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,I,l):I[m],te);pe.skip=isNaN(K)||isNaN(N)||z,pe.stop=te>0&&Math.abs(I[v]-Y[v])>A,E&&(pe.parsed=I,pe.raw=c.data[te]),p&&(pe.options=d||this.resolveDataElementOptions(te,me.active?"active":i)),k||this.updateElement(me,te,pe,i),Y=I}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,i=e.data||[];if(!i.length)return r;const s=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Ze(vv,"id","line"),Ze(vv,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Ze(vv,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class nm extends wc{constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const n=this._cachedMeta,r=this.chart,i=r.data.labels||[],s=Fm(n._parsed[e].r,r.options.locale);return{label:i[e]||"",value:s}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){const e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<n.min&&(n.min=s),s>n.max&&(n.max=s))}),n}_updateRadius(){const e=this.chart,n=e.chartArea,r=e.options,i=Math.min(n.right-n.left,n.bottom-n.top),s=Math.max(i/2,0),o=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),a=(s-o)/e.getVisibleDatasetCount();this.outerRadius=s-a*this.index,this.innerRadius=this.outerRadius-a}updateElements(e,n,r,i){const s=i==="reset",o=this.chart,l=o.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,p=c.yCenter,v=c.getIndexAngle(0)-.5*zs;let m=v,x;const E=360/this.countVisibleElements();for(x=0;x<n;++x)m+=this._computeAngle(x,i,E);for(x=n;x<n+r;x++){const A=e[x];let k=m,D=m+this._computeAngle(x,i,E),$=o.getDataVisibility(x)?c.getDistanceFromCenterForValue(this.getParsed(x).r):0;m=D,s&&(l.animateScale&&($=0),l.animateRotate&&(k=D=v));const Y={x:d,y:p,innerRadius:0,outerRadius:$,startAngle:k,endAngle:D,options:this.resolveDataElementOptions(x,A.active?"active":i)};this.updateElement(A,x,Y,i)}}countVisibleElements(){const e=this._cachedMeta;let n=0;return e.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?bc(this.resolveDataElementOptions(e,n).angle||r):0}}Ze(nm,"id","polarArea"),Ze(nm,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Ze(nm,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const n=e.data;if(n.labels.length&&n.datasets.length){const{labels:{pointStyle:r,color:i}}=e.legend.options;return n.labels.map((s,o)=>{const l=e.getDatasetMeta(0).controller.getStyle(o);return{text:s,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(o),index:o}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Wb extends uf{}Ze(Wb,"id","pie"),Ze(Wb,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class yv extends wc{getLabelAndValue(e){const n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,i){return jP.bind(this)(e,n,r,i)}update(e){const n=this._cachedMeta,r=n.dataset,i=n.data||[],s=n.iScale.getLabels();if(r.points=i,e!=="resize"){const o=this.resolveDatasetElementOptions(e);this.options.showLine||(o.borderWidth=0);const a={_loop:!0,_fullLoop:s.length===i.length,options:o};this.updateElement(r,void 0,a,e)}this.updateElements(i,0,i.length,e)}updateElements(e,n,r,i){const s=this._cachedMeta.rScale,o=i==="reset";for(let a=n;a<n+r;a++){const l=e[a],c=this.resolveDataElementOptions(a,l.active?"active":i),d=s.getPointPositionForValue(a,this.getParsed(a).r),p=o?s.xCenter:d.x,v=o?s.yCenter:d.y,m={x:p,y:v,angle:d.angle,skip:isNaN(p)||isNaN(v),options:c};this.updateElement(l,a,m,i)}}}Ze(yv,"id","radar"),Ze(yv,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Ze(yv,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class bv extends wc{getLabelAndValue(e){const n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:s}=n,o=this.getParsed(e),a=i.getLabelForValue(o.x),l=s.getLabelForValue(o.y);return{label:r[e]||"",value:"("+a+", "+l+")"}}update(e){const n=this._cachedMeta,{data:r=[]}=n,i=this.chart._animationsDisabled;let{start:s,count:o}=AP(n,r,i);if(this._drawStart=s,this._drawCount=o,TP(n)&&(s=0,o=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:a,_dataset:l}=n;a._chart=this.chart,a._datasetIndex=this.index,a._decimated=!!l._decimated,a.points=r;const c=this.resolveDatasetElementOptions(e);c.segment=this.options.segment,this.updateElement(a,void 0,{animated:!i,options:c},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,s,o,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,i){const s=i==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(n,i),p=this.getSharedOptions(d),v=this.includeOptions(i,p),m=o.axis,x=a.axis,{spanGaps:E,segment:A}=this.options,k=Op(E)?E:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||s||i==="none";let $=n>0&&this.getParsed(n-1);for(let Y=n;Y<n+r;++Y){const te=e[Y],me=this.getParsed(Y),pe=D?te:{},I=Gi(me[x]),z=pe[m]=o.getPixelForValue(me[m],Y),K=pe[x]=s||I?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,me,l):me[x],Y);pe.skip=isNaN(z)||isNaN(K)||I,pe.stop=Y>0&&Math.abs(me[m]-$[m])>k,A&&(pe.parsed=me,pe.raw=c.data[Y]),v&&(pe.options=p||this.resolveDataElementOptions(Y,te.active?"active":i)),D||this.updateElement(te,Y,pe,i),$=me}this.updateSharedOptions(p,i,d)}getMaxOverflow(){const e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let a=0;for(let l=n.length-1;l>=0;--l)a=Math.max(a,n[l].size(this.resolveDataElementOptions(l))/2);return a>0&&a}const r=e.dataset,i=r.options&&r.options.borderWidth||0;if(!n.length)return i;const s=n[0].size(this.resolveDataElementOptions(0)),o=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(i,s,o)/2}}Ze(bv,"id","scatter"),Ze(bv,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Ze(bv,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var gQ=Object.freeze({__proto__:null,BarController:gv,BubbleController:mv,DoughnutController:uf,LineController:vv,PieController:Wb,PolarAreaController:nm,RadarController:yv,ScatterController:bv});function Jd(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class uw{constructor(e){Ze(this,"options");this.options=e||{}}static override(e){Object.assign(uw.prototype,e)}init(){}formats(){return Jd()}parse(){return Jd()}format(){return Jd()}add(){return Jd()}diff(){return Jd()}startOf(){return Jd()}endOf(){return Jd()}}var KP={_date:uw};function mQ(t,e,n,r){const{controller:i,data:s,_sorted:o}=t,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const l=a._reversePixels?zX:Th;if(r){if(i._sharedOptions){const c=s[0],d=typeof c.getRange=="function"&&c.getRange(e);if(d){const p=l(s,e,n-d),v=l(s,e,n+d);return{lo:p.lo,hi:v.hi}}}}else return l(s,e,n)}return{lo:0,hi:s.length-1}}function Xy(t,e,n,r,i){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:d}=s[a],{lo:p,hi:v}=mQ(s[a],e,o,i);for(let m=p;m<=v;++m){const x=d[m];x.skip||r(x,c,m)}}}function vQ(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(r,i){const s=e?Math.abs(r.x-i.x):0,o=n?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function E2(t,e,n,r,i){const s=[];return!i&&!t.isPointInArea(e)||Xy(t,n,e,function(a,l,c){!i&&!Dh(a,t.chartArea,0)||a.inRange(e.x,e.y,r)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function yQ(t,e,n,r){let i=[];function s(o,a,l){const{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],r),{angle:p}=CP(o,{x:e.x,y:e.y});xm(p,c,d)&&i.push({element:o,datasetIndex:a,index:l})}return Xy(t,n,e,s),i}function bQ(t,e,n,r,i,s){let o=[];const a=vQ(n);let l=Number.POSITIVE_INFINITY;function c(d,p,v){const m=d.inRange(e.x,e.y,i);if(r&&!m)return;const x=d.getCenterPoint(i);if(!(!!s||t.isPointInArea(x))&&!m)return;const A=a(e,x);A<l?(o=[{element:d,datasetIndex:p,index:v}],l=A):A===l&&o.push({element:d,datasetIndex:p,index:v})}return Xy(t,n,e,c),o}function P2(t,e,n,r,i,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!r?yQ(t,e,n,i):bQ(t,e,n,r,i,s)}function M3(t,e,n,r,i){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Xy(t,n,e,(l,c,d)=>{l[o](e[n],i)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(e.x,e.y,i))}),r&&!a?[]:s}var _Q={modes:{index(t,e,n,r){const i=nf(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const d=a[0].index,p=c.data[d];p&&!p.skip&&l.push({element:p,datasetIndex:c.index,index:d})}),l):[]},dataset(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?E2(t,i,s,r,o):P2(t,i,s,!1,r,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return E2(t,i,s,r,o)},nearest(t,e,n,r){const i=nf(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return P2(t,i,s,n.intersect,r,o)},x(t,e,n,r){const i=nf(e,t);return M3(t,i,"x",n.intersect,r)},y(t,e,n,r){const i=nf(e,t);return M3(t,i,"y",n.intersect,r)}}};const ZP=["left","top","right","bottom"];function hg(t,e){return t.filter(n=>n.pos===e)}function k3(t,e){return t.filter(n=>ZP.indexOf(n.pos)===-1&&n.box.axis===e)}function dg(t,e){return t.sort((n,r)=>{const i=e?r:n,s=e?n:r;return i.weight===s.weight?i.index-s.index:i.weight-s.weight})}function wQ(t){const e=[];let n,r,i,s,o,a;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=i,e.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:o&&s+o,stackWeight:a});return e}function xQ(t){const e={};for(const n of t){const{stack:r,pos:i,stackWeight:s}=n;if(!r||!ZP.includes(i))continue;const o=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function LQ(t,e){const n=xQ(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*r:l&&e.availableWidth,a.height=i):(a.width=r,a.height=d?d*i:l&&e.availableHeight)}return n}function SQ(t){const e=wQ(t),n=dg(e.filter(c=>c.box.fullSize),!0),r=dg(hg(e,"left"),!0),i=dg(hg(e,"right")),s=dg(hg(e,"top"),!0),o=dg(hg(e,"bottom")),a=k3(e,"x"),l=k3(e,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(o).concat(a),chartArea:hg(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(o).concat(a)}}function A3(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function XP(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function CQ(t,e,n,r){const{pos:i,box:s}=n,o=t.maxPadding;if(!Ti(i)){n.size&&(t[i]-=n.size);const p=r[n.stack]||{size:0,count:1};p.size=Math.max(p.size,n.horizontal?s.height:s.width),n.size=p.size/p.count,t[i]+=n.size}s.getPadding&&XP(o,s.getPadding());const a=Math.max(0,e.outerWidth-A3(o,t,"left","right")),l=Math.max(0,e.outerHeight-A3(o,t,"top","bottom")),c=a!==t.w,d=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function EQ(t){const e=t.maxPadding;function n(r){const i=Math.max(e[r]-t[r],0);return t[r]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function PQ(t,e){const n=e.maxPadding;function r(i){const s={left:0,top:0,right:0,bottom:0};return i.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return r(t?["left","right"]:["top","bottom"])}function Ag(t,e,n,r){const i=[];let s,o,a,l,c,d;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,PQ(a.horizontal,e));const{same:p,other:v}=CQ(e,n,a,r);c|=p&&i.length,d=d||v,l.fullSize||i.push(a)}return c&&Ag(i,e,n,r)||d}function j0(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function T3(t,e,n,r){const i=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=r[a.stack]||{placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){const p=e.w*d,v=c.size||l.height;wm(c.start)&&(o=c.start),l.fullSize?j0(l,i.left,o,n.outerWidth-i.right-i.left,v):j0(l,e.left+c.placed,o,p,v),c.start=o,c.placed+=p,o=l.bottom}else{const p=e.h*d,v=c.size||l.width;wm(c.start)&&(s=c.start),l.fullSize?j0(l,s,i.top,v,n.outerHeight-i.bottom-i.top):j0(l,s,e.top+c.placed,v,p),c.start=s,c.placed+=p,s=l.right}}e.x=s,e.y=o}var dl={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=fl(t.options.layout.padding),s=Math.max(e-i.width,0),o=Math.max(n-i.height,0),a=SQ(t.boxes),l=a.vertical,c=a.horizontal;ds(t.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const d=l.reduce((E,A)=>A.box.options&&A.box.options.display===!1?E:E+1,0)||1,p=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),v=Object.assign({},i);XP(v,fl(r));const m=Object.assign({maxPadding:v,w:s,h:o,x:i.left,y:i.top},i),x=LQ(l.concat(c),p);Ag(a.fullSize,m,p,x),Ag(l,m,p,x),Ag(c,m,p,x)&&Ag(l,m,p,x),EQ(m),T3(a.leftAndTop,m,p,x),m.x+=m.w,m.y+=m.h,T3(a.rightAndBottom,m,p,x),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ds(a.chartArea,E=>{const A=E.box;Object.assign(A,t.chartArea),A.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class JP{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,r){}removeEventListener(e,n,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,r,i){return n=Math.max(0,n||e.width),r=r||e.height,{width:n,height:Math.max(0,i?Math.floor(n/i):r)}}isAttached(e){return!0}updateConfig(e){}}class MQ extends JP{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const _v="$chartjs",kQ={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},D3=t=>t===null||t==="";function AQ(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[_v]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",D3(i)){const s=p3(t,"width");s!==void 0&&(t.width=s)}if(D3(r))if(t.style.height==="")t.height=t.width/(e||2);else{const s=p3(t,"height");s!==void 0&&(t.height=s)}return t}const QP=OJ?{passive:!0}:!1;function TQ(t,e,n){t.addEventListener(e,n,QP)}function DQ(t,e,n){t.canvas.removeEventListener(e,n,QP)}function OQ(t,e){const n=kQ[t.type]||t.type,{x:r,y:i}=nf(t,e);return{type:n,chart:e,native:t,x:r!==void 0?r:null,y:i!==void 0?i:null}}function ay(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function NQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.addedNodes,r),o=o&&!ay(a.removedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function IQ(t,e,n){const r=t.canvas,i=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||ay(a.removedNodes,r),o=o&&!ay(a.addedNodes,r);o&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Sm=new Map;let O3=0;function eM(){const t=window.devicePixelRatio;t!==O3&&(O3=t,Sm.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function BQ(t,e){Sm.size||window.addEventListener("resize",eM),Sm.set(t,e)}function RQ(t){Sm.delete(t),Sm.size||window.removeEventListener("resize",eM)}function FQ(t,e,n){const r=t.canvas,i=r&&lw(r);if(!i)return;const s=kP((a,l)=>{const c=i.clientWidth;n(a,l),c<i.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(i),BQ(t,s),o}function M2(t,e,n){n&&n.disconnect(),e==="resize"&&RQ(t)}function jQ(t,e,n){const r=t.canvas,i=kP(s=>{t.ctx!==null&&n(OQ(s,t))},t);return TQ(r,e,i),i}class zQ extends JP{acquireContext(e,n){const r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(AQ(e,n),r):null}releaseContext(e){const n=e.canvas;if(!n[_v])return!1;const r=n[_v].initial;["height","width"].forEach(s=>{const o=r[s];Gi(o)?n.removeAttribute(s):n.setAttribute(s,o)});const i=r.style||{};return Object.keys(i).forEach(s=>{n.style[s]=i[s]}),n.width=n.width,delete n[_v],!0}addEventListener(e,n,r){this.removeEventListener(e,n);const i=e.$proxies||(e.$proxies={}),o={attach:NQ,detach:IQ,resize:FQ}[n]||jQ;i[n]=o(e,n,r)}removeEventListener(e,n){const r=e.$proxies||(e.$proxies={}),i=r[n];if(!i)return;({attach:M2,detach:M2,resize:M2}[n]||DQ)(e,n,i),r[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,r,i){return DJ(e,n,r,i)}isAttached(e){const n=lw(e);return!!(n&&n.isConnected)}}function $Q(t){return!aw()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?MQ:zQ}var Y0;let $h=(Y0=class{constructor(){Ze(this,"x");Ze(this,"y");Ze(this,"active",!1);Ze(this,"options");Ze(this,"$animations")}tooltipPosition(e){const{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}hasValue(){return Op(this.x)&&Op(this.y)}getProps(e,n){const r=this.$animations;if(!n||!r)return this;const i={};return e.forEach(s=>{i[s]=r[s]&&r[s].active()?r[s]._to:this[s]}),i}},Ze(Y0,"defaults",{}),Ze(Y0,"defaultRoutes"),Y0);function VQ(t,e){const n=t.options.ticks,r=UQ(t),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?WQ(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>i)return GQ(e,c,s,o/i),c;const d=HQ(s,e,i);if(o>0){let p,v;const m=o>1?Math.round((l-a)/(o-1)):null;for(z0(e,c,d,Gi(m)?0:a-m,a),p=0,v=o-1;p<v;p++)z0(e,c,d,s[p],s[p+1]);return z0(e,c,d,l,Gi(m)?e.length:l+m),c}return z0(e,c,d),c}function UQ(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}function HQ(t,e,n){const r=qQ(t),i=e.length/n;if(!r)return Math.max(i,1);const s=BX(r);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>i)return l}return Math.max(i,1)}function WQ(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}function GQ(t,e,n,r){let i=0,s=n[0],o;for(r=Math.ceil(r),o=0;o<t.length;o++)o===s&&(e.push(t[o]),i++,s=n[i*r])}function z0(t,e,n,r,i){const s=ui(r,0),o=Math.min(ui(i,t.length),t.length);let a=0,l,c,d;for(n=Math.ceil(n),i&&(l=i-r,n=l/Math.floor(l/n)),d=s;d<0;)a++,d=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===d&&(e.push(t[c]),a++,d=Math.round(s+a*n))}function qQ(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}const YQ=t=>t==="left"?"right":t==="right"?"left":t,N3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,I3=(t,e)=>Math.min(e||t,t);function B3(t,e){const n=[],r=t.length/e,i=t.length;let s=0;for(;s<i;s+=r)n.push(t[Math.floor(s)]);return n}function KQ(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(i),c;if(!(n&&(r===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(i-1))/2,l+=i<e?c:-c,l<s-a||l>o+a)))return l}function ZQ(t,e){ds(t,n=>{const r=n.gc,i=r.length/2;let s;if(i>e){for(s=0;s<i;++s)delete n.data[r[s]];r.splice(0,i)}})}function fg(t){return t.drawTicks?t.tickLength:0}function R3(t,e){if(!t.display)return 0;const n=ha(t.font,e),r=fl(t.padding);return(Js(t.text)?t.text.length:1)*n.lineHeight+r.height}function XQ(t,e){return Dd(t,{scale:e,type:"scale"})}function JQ(t,e,n){return Dd(t,{tick:n,index:e,type:"tick"})}function QQ(t,e,n){let r=tw(t);return(n&&e!=="right"||!n&&e==="right")&&(r=YQ(r)),r}function eee(t,e,n,r){const{top:i,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:d}=l;let p=0,v,m,x;const E=o-i,A=a-s;if(t.isHorizontal()){if(m=sl(r,s,a),Ti(n)){const k=Object.keys(n)[0],D=n[k];x=d[k].getPixelForValue(D)+E-e}else n==="center"?x=(c.bottom+c.top)/2+E-e:x=N3(t,n,e);v=a-s}else{if(Ti(n)){const k=Object.keys(n)[0],D=n[k];m=d[k].getPixelForValue(D)-A+e}else n==="center"?m=(c.left+c.right)/2-A+e:m=N3(t,n,e);x=sl(r,o,i),p=n==="left"?-Uo:Uo}return{titleX:m,titleY:x,maxWidth:v,rotation:p}}class Pf extends $h{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:r,_suggestedMax:i}=this;return e=_u(e,Number.POSITIVE_INFINITY),n=_u(n,Number.NEGATIVE_INFINITY),r=_u(r,Number.POSITIVE_INFINITY),i=_u(i,Number.NEGATIVE_INFINITY),{min:_u(e,r),max:_u(n,i),minDefined:Po(e),maxDefined:Po(n)}}getMinMax(e){let{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds(),o;if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),i||(n=Math.min(n,o.min)),s||(r=Math.max(r,o.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:_u(n,_u(r,n)),max:_u(r,_u(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Os(this.options.beforeUpdate,[this])}update(e,n,r){const{beginAtZero:i,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=cJ(this,s,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?B3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=VQ(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,r;this.isHorizontal()?(n=this.left,r=this.right):(n=this.top,r=this.bottom,e=!e),this._startPixel=n,this._endPixel=r,this._reversePixels=e,this._length=r-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Os(this.options.afterUpdate,[this])}beforeSetDimensions(){Os(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Os(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Os(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Os(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r],s.label=Os(n.callback,[s.value,r,e],this)}afterTickToLabelConversion(){Os(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Os(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,r=I3(this.ticks.length,e.ticks.maxTicksLimit),i=n.minRotation||0,s=n.maxRotation;let o=i,a,l,c;if(!this._isVisible()||!n.display||i>=s||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const d=this._getLabelSizes(),p=d.widest.width,v=d.highest.height,m=Ea(this.chart.width-p,0,this.maxWidth);a=e.offset?this.maxWidth/r:m/(r-1),p+6>a&&(a=m/(r-(e.offset?.5:1)),l=this.maxHeight-fg(e.grid)-n.padding-R3(e.title,this.chart.options.font),c=Math.sqrt(p*p+v*v),o=Q_(Math.min(Math.asin(Ea((d.highest.height+6)/a,-1,1)),Math.asin(Ea(l/c,-1,1))-Math.asin(Ea(v/c,-1,1)))),o=Math.max(i,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Os(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Os(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:r,title:i,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=R3(i,n.options.font);if(a?(e.width=this.maxWidth,e.height=fg(s)+l):(e.height=this.maxHeight,e.width=fg(s)+l),r.display&&this.ticks.length){const{first:c,last:d,widest:p,highest:v}=this._getLabelSizes(),m=r.padding*2,x=bc(this.labelRotation),E=Math.cos(x),A=Math.sin(x);if(a){const k=r.mirror?0:A*p.width+E*v.height;e.height=Math.min(this.maxHeight,e.height+k+m)}else{const k=r.mirror?0:E*p.width+A*v.height;e.width=Math.min(this.maxWidth,e.width+k+m)}this._calculatePadding(c,d,A,E)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,r,i){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,m=0;l?c?(v=i*e.width,m=r*n.height):(v=r*e.height,m=i*n.width):s==="start"?m=n.width:s==="end"?v=e.width:s!=="inner"&&(v=e.width/2,m=n.width/2),this.paddingLeft=Math.max((v-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-p+o)*this.width/(this.width-p),0)}else{let d=n.height/2,p=e.height/2;s==="start"?(d=0,p=e.height):s==="end"&&(d=n.height,p=0),this.paddingTop=d+o,this.paddingBottom=p+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Os(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,r;for(n=0,r=e.length;n<r;n++)Gi(e[n].label)&&(e.splice(n,1),r--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let r=this.ticks;n<r.length&&(r=B3(r,n)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,r){const{ctx:i,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/I3(n,r));let c=0,d=0,p,v,m,x,E,A,k,D,$,Y,te;for(p=0;p<n;p+=l){if(x=e[p].label,E=this._resolveTickFontOptions(p),i.font=A=E.string,k=s[A]=s[A]||{data:{},gc:[]},D=E.lineHeight,$=Y=0,!Gi(x)&&!Js(x))$=sy(i,k.data,k.gc,$,x),Y=D;else if(Js(x))for(v=0,m=x.length;v<m;++v)te=x[v],!Gi(te)&&!Js(te)&&($=sy(i,k.data,k.gc,$,te),Y+=D);o.push($),a.push(Y),c=Math.max($,c),d=Math.max(Y,d)}ZQ(s,n);const me=o.indexOf(c),pe=a.indexOf(d),I=z=>({width:o[z]||0,height:a[z]||0});return{first:I(0),last:I(n-1),widest:I(me),highest:I(pe),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return jX(this._alignToPixels?Xd(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const r=n[e];return r.$context||(r.$context=JQ(this.getContext(),e,r))}return this.$context||(this.$context=XQ(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=bc(this.labelRotation),r=Math.abs(Math.cos(n)),i=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*r>a*i?a/r:l/i:l*i<a*r?l/r:a/i}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,r=this.chart,i=this.options,{grid:s,position:o,border:a}=i,l=s.offset,c=this.isHorizontal(),p=this.ticks.length+(l?1:0),v=fg(s),m=[],x=a.setContext(this.getContext()),E=x.display?x.width:0,A=E/2,k=function(W){return Xd(r,W,E)};let D,$,Y,te,me,pe,I,z,K,N,B,V;if(o==="top")D=k(this.bottom),pe=this.bottom-v,z=D-A,N=k(e.top)+A,V=e.bottom;else if(o==="bottom")D=k(this.top),N=e.top,V=k(e.bottom)-A,pe=D+A,z=this.top+v;else if(o==="left")D=k(this.right),me=this.right-v,I=D-A,K=k(e.left)+A,B=e.right;else if(o==="right")D=k(this.left),K=e.left,B=k(e.right)-A,me=D+A,I=this.left+v;else if(n==="x"){if(o==="center")D=k((e.top+e.bottom)/2+.5);else if(Ti(o)){const W=Object.keys(o)[0],X=o[W];D=k(this.chart.scales[W].getPixelForValue(X))}N=e.top,V=e.bottom,pe=D+A,z=pe+v}else if(n==="y"){if(o==="center")D=k((e.left+e.right)/2);else if(Ti(o)){const W=Object.keys(o)[0],X=o[W];D=k(this.chart.scales[W].getPixelForValue(X))}me=D-A,I=me-v,K=e.left,B=e.right}const R=ui(i.ticks.maxTicksLimit,p),j=Math.max(1,Math.ceil(p/R));for($=0;$<p;$+=j){const W=this.getContext($),X=s.setContext(W),oe=a.setContext(W),_e=X.lineWidth,Ce=X.color,De=oe.dash||[],Z=oe.dashOffset,G=X.tickWidth,re=X.tickColor,he=X.tickBorderDash||[],ce=X.tickBorderDashOffset;Y=KQ(this,$,l),Y!==void 0&&(te=Xd(r,Y,_e),c?me=I=K=B=te:pe=z=N=V=te,m.push({tx1:me,ty1:pe,tx2:I,ty2:z,x1:K,y1:N,x2:B,y2:V,width:_e,color:Ce,borderDash:De,borderDashOffset:Z,tickWidth:G,tickColor:re,tickBorderDash:he,tickBorderDashOffset:ce}))}return this._ticksLength=p,this._borderValue=D,m}_computeLabelItems(e){const n=this.axis,r=this.options,{position:i,ticks:s}=r,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:p}=s,v=fg(r.grid),m=v+d,x=p?-d:m,E=-bc(this.labelRotation),A=[];let k,D,$,Y,te,me,pe,I,z,K,N,B,V="middle";if(i==="top")me=this.bottom-x,pe=this._getXAxisLabelAlignment();else if(i==="bottom")me=this.top+x,pe=this._getXAxisLabelAlignment();else if(i==="left"){const j=this._getYAxisLabelAlignment(v);pe=j.textAlign,te=j.x}else if(i==="right"){const j=this._getYAxisLabelAlignment(v);pe=j.textAlign,te=j.x}else if(n==="x"){if(i==="center")me=(e.top+e.bottom)/2+m;else if(Ti(i)){const j=Object.keys(i)[0],W=i[j];me=this.chart.scales[j].getPixelForValue(W)+m}pe=this._getXAxisLabelAlignment()}else if(n==="y"){if(i==="center")te=(e.left+e.right)/2-m;else if(Ti(i)){const j=Object.keys(i)[0],W=i[j];te=this.chart.scales[j].getPixelForValue(W)}pe=this._getYAxisLabelAlignment(v).textAlign}n==="y"&&(l==="start"?V="top":l==="end"&&(V="bottom"));const R=this._getLabelSizes();for(k=0,D=a.length;k<D;++k){$=a[k],Y=$.label;const j=s.setContext(this.getContext(k));I=this.getPixelForTick(k)+s.labelOffset,z=this._resolveTickFontOptions(k),K=z.lineHeight,N=Js(Y)?Y.length:1;const W=N/2,X=j.color,oe=j.textStrokeColor,_e=j.textStrokeWidth;let Ce=pe;o?(te=I,pe==="inner"&&(k===D-1?Ce=this.options.reverse?"left":"right":k===0?Ce=this.options.reverse?"right":"left":Ce="center"),i==="top"?c==="near"||E!==0?B=-N*K+K/2:c==="center"?B=-R.highest.height/2-W*K+K:B=-R.highest.height+K/2:c==="near"||E!==0?B=K/2:c==="center"?B=R.highest.height/2-W*K:B=R.highest.height-N*K,p&&(B*=-1),E!==0&&!j.showLabelBackdrop&&(te+=K/2*Math.sin(E))):(me=I,B=(1-N)*K/2);let De;if(j.showLabelBackdrop){const Z=fl(j.backdropPadding),G=R.heights[k],re=R.widths[k];let he=B-Z.top,ce=0-Z.left;switch(V){case"middle":he-=G/2;break;case"bottom":he-=G;break}switch(pe){case"center":ce-=re/2;break;case"right":ce-=re;break;case"inner":k===D-1?ce-=re:k>0&&(ce-=re/2);break}De={left:ce,top:he,width:re+Z.width,height:G+Z.height,color:j.backdropColor}}A.push({label:Y,font:z,textOffset:B,options:{rotation:E,color:X,strokeColor:oe,strokeWidth:_e,textAlign:Ce,textBaseline:V,translation:[te,me],backdrop:De}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-bc(this.labelRotation))return e==="top"?"left":"right";let i="center";return n.align==="start"?i="left":n.align==="end"?i="right":n.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:r,mirror:i,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,d;return n==="left"?i?(d=this.right+s,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d=this.left)):n==="right"?i?(d=this.left+s,r==="near"?c="right":r==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,r==="near"?c="left":r==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:r,top:i,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(r,i,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const i=this.ticks.findIndex(s=>s.value===e);return i>=0?n.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){const n=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,d)=>{!d.width||!d.color||(r.save(),r.lineWidth=d.width,r.strokeStyle=d.color,r.setLineDash(d.borderDash||[]),r.lineDashOffset=d.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(c.x,c.y),r.stroke(),r.restore())};if(n.display)for(s=0,o=i.length;s<o;++s){const l=i[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:r,grid:i}}=this,s=r.setContext(this.getContext()),o=r.display?s.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,p,v;this.isHorizontal()?(c=Xd(e,this.left,o)-o/2,d=Xd(e,this.right,a)+a/2,p=v=l):(p=Xd(e,this.top,o)-o/2,v=Xd(e,this.bottom,a)+a/2,c=d=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,p),n.lineTo(d,v),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&Yy(r,i);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,d=o.textOffset;Lf(r,c,0,d,l,a)}i&&Ky(r)}drawTitle(){const{ctx:e,options:{position:n,title:r,reverse:i}}=this;if(!r.display)return;const s=ha(r.font),o=fl(r.padding),a=r.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Ti(n)?(l+=o.bottom,Js(r.text)&&(l+=s.lineHeight*(r.text.length-1))):l+=o.top;const{titleX:c,titleY:d,maxWidth:p,rotation:v}=eee(this,l,n,a);Lf(e,r.text,0,0,s,{color:r.color,maxWidth:p,rotation:v,textAlign:QQ(a,n,i),textBaseline:"middle",translation:[c,d]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,r=ui(e.grid&&e.grid.z,-1),i=ui(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Pf.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:r,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return ha(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $0{constructor(e,n,r){this.type=e,this.scope=n,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let r;ree(n)&&(r=this.register(n));const i=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in i||(i[s]=e,tee(e,o,r),this.override&&Mo.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,r=e.id,i=this.scope;r in n&&delete n[r],i&&r in Mo[i]&&(delete Mo[i][r],this.override&&delete xf[r])}}function tee(t,e,n){const r=_m(Object.create(null),[n?Mo.get(n):{},Mo.get(e),t.defaults]);Mo.set(e,r),t.defaultRoutes&&nee(e,t.defaultRoutes),t.descriptors&&Mo.describe(e,t.descriptors)}function nee(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),s=[t].concat(r).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Mo.route(s,i,l,a)})}function ree(t){return"id"in t&&"defaults"in t}class iee{constructor(){this.controllers=new $0(wc,"datasets",!0),this.elements=new $0($h,"elements"),this.plugins=new $0(Object,"plugins"),this.scales=new $0(Pf,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,r){[...n].forEach(i=>{const s=r||this._getRegistryForType(i);r||s.isForType(i)||s===this.plugins&&i.id?this._exec(e,s,i):ds(i,o=>{const a=r||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,r){const i=J_(e);Os(r["before"+i],[],r),n[e](r),Os(r["after"+i],[],r)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const r=this._typedRegistries[n];if(r.isForType(e))return r}return this.plugins}_get(e,n,r){const i=n.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}}var Vc=new iee;class see{constructor(){this._init=[]}notify(e,n,r,i){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const s=i?this._descriptors(e).filter(i):this._descriptors(e),o=this._notify(s,e,n,r);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,n,r,i){i=i||{};for(const s of e){const o=s.plugin,a=o[r],l=[n,i,s.options];if(Os(a,l,o)===!1&&i.cancelable)return!1}return!0}invalidate(){Gi(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const r=e&&e.config,i=ui(r.options&&r.options.plugins,{}),s=oee(r);return i===!1&&!n?[]:lee(e,s,i,n)}_notifyStateChanges(e){const n=this._oldCache||[],r=this._cache,i=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(i(n,r),e,"stop"),this._notify(i(r,n),e,"start")}}function oee(t){const e={},n=[],r=Object.keys(Vc.plugins.items);for(let s=0;s<r.length;s++)n.push(Vc.getPlugin(r[s]));const i=t.plugins||[];for(let s=0;s<i.length;s++){const o=i[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function aee(t,e){return!e&&t===!1?null:t===!0?{}:t}function lee(t,{plugins:e,localIds:n},r,i){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=aee(r[l],i);c!==null&&s.push({plugin:a,options:uee(t.config,{plugin:a,local:n[l]},c,o)})}return s}function uee(t,{plugin:e,local:n},r,i){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(r,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Gb(t,e){const n=Mo.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function cee(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function hee(t,e){return t===e?"_index_":"_value_"}function F3(t){if(t==="x"||t==="y"||t==="r")return t}function dee(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function qb(t,...e){if(F3(t))return t;for(const n of e){const r=n.axis||dee(n.position)||t.length>1&&F3(t[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function j3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function fee(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(r=>r.xAxisID===t||r.yAxisID===t);if(n.length)return j3(t,"x",n[0])||j3(t,"y",n[0])}return{}}function pee(t,e){const n=xf[t.type]||{scales:{}},r=e.scales||{},i=Gb(t.type,e),s=Object.create(null);return Object.keys(r).forEach(o=>{const a=r[o];if(!Ti(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=qb(o,a,fee(o,t),Mo.scales[a.type]),c=hee(l,i),d=n.scales||{};s[o]=Jg(Object.create(null),[{axis:l},a,d[l],d[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Gb(a,e),d=(xf[a]||{}).scales||{};Object.keys(d).forEach(p=>{const v=cee(p,l),m=o[v+"AxisID"]||v;s[m]=s[m]||Object.create(null),Jg(s[m],[{axis:v},r[m],d[p]])})}),Object.keys(s).forEach(o=>{const a=s[o];Jg(a,[Mo.scales[a.type],Mo.scale])}),s}function tM(t){const e=t.options||(t.options={});e.plugins=ui(e.plugins,{}),e.scales=pee(t,e)}function nM(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function gee(t){return t=t||{},t.data=nM(t.data),tM(t),t}const z3=new Map,rM=new Set;function V0(t,e){let n=z3.get(t);return n||(n=e(),z3.set(t,n),rM.add(n)),n}const pg=(t,e,n)=>{const r=Pd(e,n);r!==void 0&&t.add(r)};class mee{constructor(e){this._config=gee(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=nM(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tM(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return V0(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return V0(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return V0(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,r=this.type;return V0(`${r}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const r=this._scopeCache;let i=r.get(e);return(!i||n)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,n,r){const{options:i,type:s}=this,o=this._cachedScopes(e,r),a=o.get(n);if(a)return a;const l=new Set;n.forEach(d=>{e&&(l.add(e),d.forEach(p=>pg(l,e,p))),d.forEach(p=>pg(l,i,p)),d.forEach(p=>pg(l,xf[s]||{},p)),d.forEach(p=>pg(l,Mo,p)),d.forEach(p=>pg(l,Ub,p))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),rM.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,xf[n]||{},Mo.datasets[n]||{},{type:n},Mo,Ub]}resolveNamedOptions(e,n,r,i=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=$3(this._resolverCache,e,i);let l=o;if(yee(o,n)){s.$shared=!1,r=Md(r)?r():r;const c=this.createResolver(e,r,a);l=Np(o,r,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,r=[""],i){const{resolver:s}=$3(this._resolverCache,e,r);return Ti(n)?Np(s,n,void 0,i):s}}function $3(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let s=r.get(i);return s||(s={resolver:iw(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,s)),s}const vee=t=>Ti(t)&&Object.getOwnPropertyNames(t).some(e=>Md(t[e]));function yee(t,e){const{isScriptable:n,isIndexable:r}=IP(t);for(const i of e){const s=n(i),o=r(i),a=(o||s)&&t[i];if(s&&(Md(a)||vee(a))||o&&Js(a))return!0}return!1}var bee="4.4.1";const _ee=["top","bottom","left","right","chartArea"];function V3(t,e){return t==="top"||t==="bottom"||_ee.indexOf(t)===-1&&e==="x"}function U3(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function H3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Os(n&&n.onComplete,[t],e)}function wee(t){const e=t.chart,n=e.options.animation;Os(n&&n.onProgress,[t],e)}function iM(t){return aw()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const wv={},W3=t=>{const e=iM(t);return Object.values(wv).filter(n=>n.canvas===e).pop()};function xee(t,e,n){const r=Object.keys(t);for(const i of r){const s=+i;if(s>=e){const o=t[i];delete t[i],(n>0||s>e)&&(t[s+n]=o)}}}function Lee(t,e,n,r){return!n||t.type==="mouseout"?null:r?e:t}function U0(t,e,n){return t.options.clip?t[n]:e[n]}function See(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:U0(n,e,"left"),right:U0(n,e,"right"),top:U0(r,e,"top"),bottom:U0(r,e,"bottom")}:e}class Wc{static register(...e){Vc.add(...e),G3()}static unregister(...e){Vc.remove(...e),G3()}constructor(e,n){const r=this.config=new mee(n),i=iM(e),s=W3(i);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||$Q(i)),this.platform.updateConfig(r);const a=this.platform.acquireContext(i,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,d=l&&l.width;if(this.id=PX(),this.ctx=a,this.canvas=l,this.width=d,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new see,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=UX(p=>this.update(p),o.resizeDelay||0),this._dataChanges=[],wv[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wh.listen(this,"complete",H3),wh.listen(this,"progress",wee),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:i,_aspectRatio:s}=this;return Gi(e)?n&&s?s:i?r/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Vc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():f3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return c3(this.canvas,this.ctx),this}stop(){return wh.stop(this),this}resize(e,n){wh.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const r=this.options,i=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,e,n,s),a=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,f3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Os(r.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ds(n,(r,i)=>{r.id=i})}buildOrUpdateScales(){const e=this.options,n=e.scales,r=this.scales,i=Object.keys(r).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=qb(o,a),c=l==="r",d=l==="x";return{options:a,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),ds(s,o=>{const a=o.options,l=a.id,c=qb(l,a),d=ui(a.type,o.dtype);(a.position===void 0||V3(a.position,c)!==V3(o.dposition))&&(a.position=o.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{const v=Vc.getScale(d);p=new v({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(a,e)}),ds(i,(o,a)=>{o||delete r[a]}),ds(r,o=>{dl.configure(this,o,o.options),dl.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((i,s)=>i.index-s.index),r>n){for(let i=n;i<r;++i)this._destroyDatasetMeta(i);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(U3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,i)=>{n.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=n.length;r<i;r++){const s=n[r];let o=this.getDatasetMeta(r);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(r),o=this.getDatasetMeta(r)),o.type=a,o.indexAxis=s.indexAxis||Gb(a,this.options),o.order=s.order||0,o.index=r,o.label=""+s.label,o.visible=this.isDatasetVisible(r),o.controller)o.controller.updateIndex(r),o.controller.linkScales();else{const l=Vc.getController(a),{datasetElementType:c,dataElementType:d}=Mo.datasets[a];Object.assign(l,{dataElementType:Vc.getElement(d),datasetElementType:c&&Vc.getElement(c)}),o.controller=new l(this,r),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ds(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:p}=this.getDatasetMeta(c),v=!i&&s.indexOf(p)===-1;p.buildOrUpdateElements(v),o=Math.max(+p.getMaxOverflow(),o)}o=this._minPadding=r.layout.autoPadding?o:0,this._updateLayout(o),i||ds(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(U3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ds(this.scales,e=>{dl.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!t3(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:s}of n){const o=r==="_removeElements"?-s:s;xee(e,i,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,r=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),i=r(0);for(let s=1;s<n;s++)if(!t3(i,r(s)))return;return Array.from(i).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;dl.update(this,this.width,this.height,e);const n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],ds(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,s)=>{i._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Md(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const r=this.getDatasetMeta(e),i={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(n),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wh.has(this)?this.attached&&!wh.running(this)&&wh.start(this):(this.draw(),H3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resize(r,i),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,r=[];let i,s;for(i=0,s=n.length;i<s;++i){const o=n[i];(!e||o.visible)&&r.push(o)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,r=e._clip,i=!r.disabled,s=See(e,this.chartArea),o={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",o)!==!1&&(i&&Yy(n,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),e.controller.draw(),i&&Ky(n),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(e){return Dh(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,i){const s=_Q.modes[n];return typeof s=="function"?s(this,e,r,i):[]}getDatasetMeta(e){const n=this.data.datasets[e],r=this._metasets;let i=r.filter(s=>s&&s._dataset===n).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Dd(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){const r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){const i=r?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,i);wm(n)?(s.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),o.update(s,{visible:r}),this.update(a=>a.datasetIndex===e?i:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),wh.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),c3(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete wv[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,r=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},i=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ds(this.options.events,s=>r(s,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,r=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},i=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),r("resize",s),r("detach",o)};o=()=>{this.attached=!1,i("resize",s),this._stop(),this._resize(0,0),r("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ds(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ds(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){const i=r?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+i+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],r=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!ny(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){const i=this.options.hover,s=(l,c)=>l.filter(d=>!c.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),o=s(n,e),a=r?e:s(e,n);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,n){const r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},i=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const s=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(s||r.changed)&&this.render(),this}_handleEvent(e,n,r){const{_active:i=[],options:s}=this,o=n,a=this._getActiveElements(e,i,r,o),l=OX(e),c=Lee(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Os(s.onHover,[e,a,this],this),l&&Os(s.onClick,[e,a,this],this));const d=!ny(a,i);return(d||n)&&(this._active=a,this._updateHoverStyles(a,i,n)),this._lastEvent=c,d}_getActiveElements(e,n,r,i){if(e.type==="mouseout")return[];if(!r)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,i)}}Ze(Wc,"defaults",Mo),Ze(Wc,"instances",wv),Ze(Wc,"overrides",xf),Ze(Wc,"registry",Vc),Ze(Wc,"version",bee),Ze(Wc,"getChart",W3);function G3(){return ds(Wc.instances,t=>t._plugins.invalidate())}function Cee(t,e,n){const{startAngle:r,pixelMargin:i,x:s,y:o,outerRadius:a,innerRadius:l}=e;let c=i/a;t.beginPath(),t.arc(s,o,a,r-c,n+c),l>i?(c=i/l,t.arc(s,o,l,n+c,r-c,!0)):t.arc(s,o,i,n+Uo,r-Uo),t.closePath(),t.clip()}function Eee(t){return rw(t,["outerStart","outerEnd","innerStart","innerEnd"])}function Pee(t,e,n,r){const i=Eee(t.options.borderRadius),s=(n-e)/2,o=Math.min(s,r*e/2),a=l=>{const c=(n-Math.min(s,l))*r/2;return Ea(l,0,Math.min(s,c))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Ea(i.innerStart,0,o),innerEnd:Ea(i.innerEnd,0,o)}}function tp(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function ly(t,e,n,r,i,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=e,p=Math.max(e.outerRadius+r+n-c,0),v=d>0?d+r+n+c:0;let m=0;const x=i-l;if(r){const j=d>0?d-r:0,W=p>0?p-r:0,X=(j+W)/2,oe=X!==0?x*X/(X+r):x;m=(x-oe)/2}const E=Math.max(.001,x*p-n/zs)/p,A=(x-E)/2,k=l+A+m,D=i-A-m,{outerStart:$,outerEnd:Y,innerStart:te,innerEnd:me}=Pee(e,v,p,D-k),pe=p-$,I=p-Y,z=k+$/pe,K=D-Y/I,N=v+te,B=v+me,V=k+te/N,R=D-me/B;if(t.beginPath(),s){const j=(z+K)/2;if(t.arc(o,a,p,z,j),t.arc(o,a,p,j,K),Y>0){const _e=tp(I,K,o,a);t.arc(_e.x,_e.y,Y,K,D+Uo)}const W=tp(B,D,o,a);if(t.lineTo(W.x,W.y),me>0){const _e=tp(B,R,o,a);t.arc(_e.x,_e.y,me,D+Uo,R+Math.PI)}const X=(D-me/v+(k+te/v))/2;if(t.arc(o,a,v,D-me/v,X,!0),t.arc(o,a,v,X,k+te/v,!0),te>0){const _e=tp(N,V,o,a);t.arc(_e.x,_e.y,te,V+Math.PI,k-Uo)}const oe=tp(pe,k,o,a);if(t.lineTo(oe.x,oe.y),$>0){const _e=tp(pe,z,o,a);t.arc(_e.x,_e.y,$,k-Uo,z)}}else{t.moveTo(o,a);const j=Math.cos(z)*p+o,W=Math.sin(z)*p+a;t.lineTo(j,W);const X=Math.cos(K)*p+o,oe=Math.sin(K)*p+a;t.lineTo(X,oe)}t.closePath()}function Mee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a}=e;let l=e.endAngle;if(s){ly(t,e,n,r,l,i);for(let c=0;c<s;++c)t.fill();isNaN(a)||(l=o+(a%js||js))}return ly(t,e,n,r,l,i),t.fill(),l}function kee(t,e,n,r,i){const{fullCircles:s,startAngle:o,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:d,borderDash:p,borderDashOffset:v}=l,m=l.borderAlign==="inner";if(!c)return;t.setLineDash(p||[]),t.lineDashOffset=v,m?(t.lineWidth=c*2,t.lineJoin=d||"round"):(t.lineWidth=c,t.lineJoin=d||"bevel");let x=e.endAngle;if(s){ly(t,e,n,r,x,i);for(let E=0;E<s;++E)t.stroke();isNaN(a)||(x=o+(a%js||js))}m&&Cee(t,e,x),s||(ly(t,e,n,r,x,i),t.stroke())}class Tg extends $h{constructor(n){super();Ze(this,"circumference");Ze(this,"endAngle");Ze(this,"fullCircles");Ze(this,"innerRadius");Ze(this,"outerRadius");Ze(this,"pixelMargin");Ze(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.getProps(["x","y"],i),{angle:o,distance:a}=CP(s,{x:n,y:r}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:p,circumference:v}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,E=ui(v,c-l)>=js||xm(o,l,c),A=Ah(a,d+m,p+m);return E&&A}getCenterPoint(n){const{x:r,y:i,startAngle:s,endAngle:o,innerRadius:a,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],n),{offset:c,spacing:d}=this.options,p=(s+o)/2,v=(a+l+d+c)/2;return{x:r+Math.cos(p)*v,y:i+Math.sin(p)*v}}tooltipPosition(n){return this.getCenterPoint(n)}draw(n){const{options:r,circumference:i}=this,s=(r.offset||0)/4,o=(r.spacing||0)/2,a=r.circular;if(this.pixelMargin=r.borderAlign==="inner"?.33:0,this.fullCircles=i>js?Math.floor(i/js):0,i===0||this.innerRadius<0||this.outerRadius<0)return;n.save();const l=(this.startAngle+this.endAngle)/2;n.translate(Math.cos(l)*s,Math.sin(l)*s);const c=1-Math.sin(Math.min(zs,i||0)),d=s*c;n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,Mee(n,this,d,o,a),kee(n,this,d,o,a),n.restore()}}Ze(Tg,"id","arc"),Ze(Tg,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Ze(Tg,"defaultRoutes",{backgroundColor:"backgroundColor"}),Ze(Tg,"descriptors",{_scriptable:!0,_indexable:n=>n!=="borderDash"});function sM(t,e,n=e){t.lineCap=ui(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ui(n.borderDash,e.borderDash)),t.lineDashOffset=ui(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ui(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ui(n.borderWidth,e.borderWidth),t.strokeStyle=ui(n.borderColor,e.borderColor)}function Aee(t,e,n){t.lineTo(n.x,n.y)}function Tee(t){return t.stepped?tJ:t.tension||t.cubicInterpolationMode==="monotone"?nJ:Aee}function oM(t,e,n={}){const r=t.length,{start:i=0,end:s=r-1}=n,{start:o,end:a}=e,l=Math.max(i,o),c=Math.min(s,a),d=i<o&&s<o||i>a&&s>a;return{count:r,start:l,loop:e.loop,ilen:c<l&&!d?r+c-l:c-l}}function Dee(t,e,n,r){const{points:i,options:s}=e,{count:o,start:a,loop:l,ilen:c}=oM(i,n,r),d=Tee(s);let{move:p=!0,reverse:v}=r||{},m,x,E;for(m=0;m<=c;++m)x=i[(a+(v?c-m:m))%o],!x.skip&&(p?(t.moveTo(x.x,x.y),p=!1):d(t,E,x,v,s.stepped),E=x);return l&&(x=i[(a+(v?c:0))%o],d(t,E,x,v,s.stepped)),!!l}function Oee(t,e,n,r){const i=e.points,{count:s,start:o,ilen:a}=oM(i,n,r),{move:l=!0,reverse:c}=r||{};let d=0,p=0,v,m,x,E,A,k;const D=Y=>(o+(c?a-Y:Y))%s,$=()=>{E!==A&&(t.lineTo(d,A),t.lineTo(d,E),t.lineTo(d,k))};for(l&&(m=i[D(0)],t.moveTo(m.x,m.y)),v=0;v<=a;++v){if(m=i[D(v)],m.skip)continue;const Y=m.x,te=m.y,me=Y|0;me===x?(te<E?E=te:te>A&&(A=te),d=(p*d+Y)/++p):($(),t.lineTo(Y,te),x=me,p=0,E=A=te),k=te}$()}function Yb(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?Oee:Dee}function Nee(t){return t.stepped?NJ:t.tension||t.cubicInterpolationMode==="monotone"?IJ:rf}function Iee(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),sM(t,e.options),t.stroke(i)}function Bee(t,e,n,r){const{segments:i,options:s}=e,o=Yb(e);for(const a of i)sM(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}const Ree=typeof Path2D=="function";function Fee(t,e,n,r){Ree&&!e.options.segment?Iee(t,e,n,r):Bee(t,e,n,r)}class gd extends $h{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;EJ(this._points,r,e,i,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=$J(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){const r=this.options,i=e[n],s=this.points,o=WP(this,{property:n,start:i,end:i});if(!o.length)return;const a=[],l=Nee(r);let c,d;for(c=0,d=o.length;c<d;++c){const{start:p,end:v}=o[c],m=s[p],x=s[v];if(m===x){a.push(m);continue}const E=Math.abs((i-m[n])/(x[n]-m[n])),A=l(m,x,E,r.stepped);A[n]=e[n],a.push(A)}return a.length===1?a[0]:a}pathSegment(e,n,r){return Yb(this)(e,this,n,r)}path(e,n,r){const i=this.segments,s=Yb(this);let o=this._loop;n=n||0,r=r||this.points.length-n;for(const a of i)o&=s(e,this,a,{start:n,end:n+r-1});return!!o}draw(e,n,r,i){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),Fee(e,this,r,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Ze(gd,"id","line"),Ze(gd,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Ze(gd,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Ze(gd,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function q3(t,e,n,r){const i=t.options,{[n]:s}=t.getProps([n],r);return Math.abs(e-s)<i.radius+i.hitRadius}class xv extends $h{constructor(n){super();Ze(this,"parsed");Ze(this,"skip");Ze(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,r,i){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],i);return Math.pow(n-o,2)+Math.pow(r-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,r){return q3(this,n,"x",r)}inYRange(n,r){return q3(this,n,"y",r)}getCenterPoint(n){const{x:r,y:i}=this.getProps(["x","y"],n);return{x:r,y:i}}size(n){n=n||this.options||{};let r=n.radius||0;r=Math.max(r,r&&n.hoverRadius||0);const i=r&&n.borderWidth||0;return(r+i)*2}draw(n,r){const i=this.options;this.skip||i.radius<.1||!Dh(this,r,this.size(i)/2)||(n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.fillStyle=i.backgroundColor,Hb(n,i,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Ze(xv,"id","point"),Ze(xv,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Ze(xv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function aM(t,e){const{x:n,y:r,base:i,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,d,p;return t.horizontal?(p=o/2,a=Math.min(n,i),l=Math.max(n,i),c=r-p,d=r+p):(p=s/2,a=n-p,l=n+p,c=Math.min(r,i),d=Math.max(r,i)),{left:a,top:c,right:l,bottom:d}}function md(t,e,n,r){return t?0:Ea(e,n,r)}function jee(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,s=NP(r);return{t:md(i.top,s.top,0,n),r:md(i.right,s.right,0,e),b:md(i.bottom,s.bottom,0,n),l:md(i.left,s.left,0,e)}}function zee(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,s=mf(i),o=Math.min(e,n),a=t.borderSkipped,l=r||Ti(i);return{topLeft:md(!l||a.top||a.left,s.topLeft,0,o),topRight:md(!l||a.top||a.right,s.topRight,0,o),bottomLeft:md(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:md(!l||a.bottom||a.right,s.bottomRight,0,o)}}function $ee(t){const e=aM(t),n=e.right-e.left,r=e.bottom-e.top,i=jee(t,n/2,r/2),s=zee(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:s},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function k2(t,e,n,r){const i=e===null,s=n===null,a=t&&!(i&&s)&&aM(t,r);return a&&(i||Ah(e,a.left,a.right))&&(s||Ah(n,a.top,a.bottom))}function Vee(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function Uee(t,e){t.rect(e.x,e.y,e.w,e.h)}function A2(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-r,o=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+s,h:t.h+o,radius:t.radius}}class Lv extends $h{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:r,backgroundColor:i}}=this,{inner:s,outer:o}=$ee(this),a=Vee(o.radius)?Lm:Uee;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,A2(o,n,s)),e.clip(),a(e,A2(s,-n,o)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,A2(s,n)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,n,r){return k2(this,e,n,r)}inXRange(e,n){return k2(this,e,null,n)}inYRange(e,n){return k2(this,null,e,n)}getCenterPoint(e){const{x:n,y:r,base:i,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+i)/2:n,y:s?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Ze(Lv,"id","bar"),Ze(Lv,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Ze(Lv,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var Hee=Object.freeze({__proto__:null,ArcElement:Tg,BarElement:Lv,LineElement:gd,PointElement:xv});const Kb=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Y3=Kb.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function lM(t){return Kb[t%Kb.length]}function uM(t){return Y3[t%Y3.length]}function Wee(t,e){return t.borderColor=lM(e),t.backgroundColor=uM(e),++e}function Gee(t,e){return t.backgroundColor=t.data.map(()=>lM(e++)),e}function qee(t,e){return t.backgroundColor=t.data.map(()=>uM(e++)),e}function Yee(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof uf?e=Gee(n,e):i instanceof nm?e=qee(n,e):i&&(e=Wee(n,e))}}function K3(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function Kee(t){return t&&(t.borderColor||t.backgroundColor)}var Zee={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:s}=i;if(!n.forceOverride&&(K3(r)||Kee(i)||s&&K3(s)))return;const o=Yee(t);r.forEach(o)}};function Xee(t,e,n,r,i){const s=i.samples||r;if(s>=n)return t.slice(e,e+n);const o=[],a=(n-2)/(s-2);let l=0;const c=e+n-1;let d=e,p,v,m,x,E;for(o[l++]=t[d],p=0;p<s-2;p++){let A=0,k=0,D;const $=Math.floor((p+1)*a)+1+e,Y=Math.min(Math.floor((p+2)*a)+1,n)+e,te=Y-$;for(D=$;D<Y;D++)A+=t[D].x,k+=t[D].y;A/=te,k/=te;const me=Math.floor(p*a)+1+e,pe=Math.min(Math.floor((p+1)*a)+1,n)+e,{x:I,y:z}=t[d];for(m=x=-1,D=me;D<pe;D++)x=.5*Math.abs((I-A)*(t[D].y-z)-(I-t[D].x)*(k-z)),x>m&&(m=x,v=t[D],E=D);o[l++]=v,d=E}return o[l++]=t[c],o}function Jee(t,e,n,r){let i=0,s=0,o,a,l,c,d,p,v,m,x,E;const A=[],k=e+n-1,D=t[e].x,Y=t[k].x-D;for(o=e;o<e+n;++o){a=t[o],l=(a.x-D)/Y*r,c=a.y;const te=l|0;if(te===d)c<x?(x=c,p=o):c>E&&(E=c,v=o),i=(s*i+a.x)/++s;else{const me=o-1;if(!Gi(p)&&!Gi(v)){const pe=Math.min(p,v),I=Math.max(p,v);pe!==m&&pe!==me&&A.push({...t[pe],x:i}),I!==m&&I!==me&&A.push({...t[I],x:i})}o>0&&me!==m&&A.push(t[me]),A.push(a),d=te,s=0,x=E=c,p=v=m=o}}return A}function cM(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Z3(t){t.data.datasets.forEach(e=>{cM(e)})}function Qee(t,e){const n=e.length;let r=0,i;const{iScale:s}=t,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=Ea(Th(e,s.axis,o).lo,0,n-1)),c?i=Ea(Th(e,s.axis,a).hi+1,r,n)-r:i=n-r,{start:r,count:i}}var ete={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){Z3(t);return}const r=t.width;t.data.datasets.forEach((i,s)=>{const{_data:o,indexAxis:a}=i,l=t.getDatasetMeta(s),c=o||i.data;if(kg([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=t.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||t.options.parsing)return;let{start:p,count:v}=Qee(l,c);const m=n.threshold||4*r;if(v<=m){cM(i);return}Gi(o)&&(i._data=c,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(E){this._data=E}}));let x;switch(n.algorithm){case"lttb":x=Xee(c,p,v,r,n);break;case"min-max":x=Jee(c,p,v,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}i._decimated=x})},destroy(t){Z3(t)}};function tte(t,e,n){const r=t.segments,i=t.points,s=e.points,o=[];for(const a of r){let{start:l,end:c}=a;c=cw(l,c,i);const d=Zb(n,i[l],i[c],a.loop);if(!e.segments){o.push({source:a,target:d,start:i[l],end:i[c]});continue}const p=WP(e,d);for(const v of p){const m=Zb(n,s[v.start],s[v.end],v.loop),x=HP(a,i,m);for(const E of x)o.push({source:E,target:v,start:{[n]:X3(d,m,"start",Math.max)},end:{[n]:X3(d,m,"end",Math.min)}})}}return o}function Zb(t,e,n,r){if(r)return;let i=e[t],s=n[t];return t==="angle"&&(i=wu(i),s=wu(s)),{property:t,start:i,end:s}}function nte(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=cw(o,a,i);const l=i[o],c=i[a];r!==null?(s.push({x:l.x,y:r}),s.push({x:c.x,y:r})):n!==null&&(s.push({x:n,y:l.y}),s.push({x:n,y:c.y}))}),s}function cw(t,e,n){for(;e>t;e--){const r=n[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function X3(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function hM(t,e){let n=[],r=!1;return Js(t)?(r=!0,n=t):n=nte(t,e),n.length?new gd({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function J3(t){return t&&t.fill!==!1}function rte(t,e,n){let i=t[e].fill;const s=[e];let o;if(!n)return i;for(;i!==!1&&s.indexOf(i)===-1;){if(!Po(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;s.push(i),i=o.fill}return!1}function ite(t,e,n){const r=lte(t);if(Ti(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Po(i)&&Math.floor(i)===i?ste(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function ste(t,e,n,r){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=r?!1:n}function ote(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:Ti(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function ate(t,e,n){let r;return t==="start"?r=n:t==="end"?r=e.options.reverse?e.min:e.max:Ti(t)?r=t.value:r=e.getBaseValue(),r}function lte(t){const e=t.options,n=e.fill;let r=ui(n&&n.target,n);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function ute(t){const{scale:e,index:n,line:r}=t,i=[],s=r.segments,o=r.points,a=cte(e,n);a.push(hM({x:null,y:e.bottom},r));for(let l=0;l<s.length;l++){const c=s[l];for(let d=c.start;d<=c.end;d++)hte(i,o[d],a)}return new gd({points:i,options:{}})}function cte(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const s=r[i];if(s.index===e)break;s.hidden||n.unshift(s.dataset)}return n}function hte(t,e,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:o,last:a,point:l}=dte(s,e,"x");if(!(!l||o&&a)){if(o)r.unshift(l);else if(t.push(l),!a)break}}t.push(...r)}function dte(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],s=t.segments,o=t.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const d=s[c],p=o[d.start][n],v=o[d.end][n];if(Ah(i,p,v)){a=i===p,l=i===v;break}}return{first:a,last:l,point:r}}class dM{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,r){const{x:i,y:s,radius:o}=this;return n=n||{start:0,end:js},e.arc(i,s,o,n.end,n.start,!0),!r.bounds}interpolate(e){const{x:n,y:r,radius:i}=this,s=e.angle;return{x:n+Math.cos(s)*i,y:r+Math.sin(s)*i,angle:s}}}function fte(t){const{chart:e,fill:n,line:r}=t;if(Po(n))return pte(e,n);if(n==="stack")return ute(t);if(n==="shape")return!0;const i=gte(t);return i instanceof dM?i:hM(i,r)}function pte(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function gte(t){return(t.scale||{}).getPointPositionForValue?vte(t):mte(t)}function mte(t){const{scale:e={},fill:n}=t,r=ote(n,e);if(Po(r)){const i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function vte(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,s=r.reverse?e.max:e.min,o=ate(n,e,s),a=[];if(r.grid.circular){const l=e.getPointPositionForValue(0,s);return new dM({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(o)})}for(let l=0;l<i;++l)a.push(e.getPointPositionForValue(l,o));return a}function T2(t,e,n){const r=fte(e),{line:i,scale:s,axis:o}=e,a=i.options,l=a.fill,c=a.backgroundColor,{above:d=c,below:p=c}=l||{};r&&i.points.length&&(Yy(t,n),yte(t,{line:i,target:r,above:d,below:p,area:n,scale:s,axis:o}),Ky(t))}function yte(t,e){const{line:n,target:r,above:i,below:s,area:o,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&s!==i&&(Q3(t,r,o.top),eL(t,{line:n,target:r,color:i,scale:a,property:l}),t.restore(),t.save(),Q3(t,r,o.bottom)),eL(t,{line:n,target:r,color:s,scale:a,property:l}),t.restore()}function Q3(t,e,n){const{segments:r,points:i}=e;let s=!0,o=!1;t.beginPath();for(const a of r){const{start:l,end:c}=a,d=i[l],p=i[cw(l,c,i)];s?(t.moveTo(d.x,d.y),s=!1):(t.lineTo(d.x,n),t.lineTo(d.x,d.y)),o=!!e.pathSegment(t,a,{move:o}),o?t.closePath():t.lineTo(p.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function eL(t,e){const{line:n,target:r,property:i,color:s,scale:o}=e,a=tte(n,r,i);for(const{source:l,target:c,start:d,end:p}of a){const{style:{backgroundColor:v=s}={}}=l,m=r!==!0;t.save(),t.fillStyle=v,bte(t,o,m&&Zb(i,d,p)),t.beginPath();const x=!!n.pathSegment(t,l);let E;if(m){x?t.closePath():tL(t,r,p,i);const A=!!r.pathSegment(t,c,{move:x,reverse:!0});E=x&&A,E||tL(t,r,d,i)}t.closePath(),t.fill(E?"evenodd":"nonzero"),t.restore()}}function bte(t,e,n){const{top:r,bottom:i}=e.chart.chartArea,{property:s,start:o,end:a}=n||{};s==="x"&&(t.beginPath(),t.rect(o,r,a-o,i-r),t.clip())}function tL(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var _te={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let s,o,a,l;for(o=0;o<r;++o)s=t.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof gd&&(l={visible:t.isDatasetVisible(o),index:o,fill:ite(a,o,r),chart:t,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,i.push(l);for(o=0;o<r;++o)l=i[o],!(!l||l.fill===!1)&&(l.fill=rte(i,o,n.propagate))},beforeDraw(t,e,n){const r=n.drawTime==="beforeDraw",i=t.getSortedVisibleDatasetMetas(),s=t.chartArea;for(let o=i.length-1;o>=0;--o){const a=i[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),r&&a.fill&&T2(t.ctx,a,s))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;const r=t.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const s=r[i].$filler;J3(s)&&T2(t.ctx,s,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;!J3(r)||n.drawTime!=="beforeDatasetDraw"||T2(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const nL=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}},wte=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class rL extends $h{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,r){this.maxWidth=e,this.maxHeight=n,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Os(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(r=>e.filter(r,this.chart.data))),e.sort&&(n=n.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const r=e.labels,i=ha(r.font),s=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=nL(r,s);let c,d;n.font=i.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,i,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(d,e.maxHeight||this.maxHeight)}_fitRows(e,n,r,i){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=i+a;let p=e;s.textAlign="left",s.textBaseline="middle";let v=-1,m=-d;return this.legendItems.forEach((x,E)=>{const A=r+n/2+s.measureText(x.text).width;(E===0||c[c.length-1]+A+2*a>o)&&(p+=d,c[c.length-(E>0?0:1)]=0,m+=d,v++),l[E]={left:0,top:m,row:v,width:A,height:i},c[c.length-1]+=A+a}),p}_fitCols(e,n,r,i){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-e;let p=a,v=0,m=0,x=0,E=0;return this.legendItems.forEach((A,k)=>{const{itemWidth:D,itemHeight:$}=xte(r,n,s,A,i);k>0&&m+$+2*a>d&&(p+=v+a,c.push({width:v,height:m}),x+=v+a,E++,v=m=0),l[k]={left:x,top:m,col:E,width:D,height:$},v=Math.max(v,D),m+=$+a}),p+=v,c.push({width:v,height:m}),p}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:r,labels:{padding:i},rtl:s}}=this,o=Lp(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=sl(r,this.left+i,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=sl(r,this.left+i,this.right-this.lineWidths[a])),c.top+=this.top+e+i,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+i}else{let a=0,l=sl(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=sl(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+i,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Yy(e,this),this._draw(),Ky(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:r,ctx:i}=this,{align:s,labels:o}=e,a=Mo.color,l=Lp(e.rtl,this.left,this.width),c=ha(o.font),{padding:d}=o,p=c.size,v=p/2;let m;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:x,boxHeight:E,itemHeight:A}=nL(o,p),k=function(me,pe,I){if(isNaN(x)||x<=0||isNaN(E)||E<0)return;i.save();const z=ui(I.lineWidth,1);if(i.fillStyle=ui(I.fillStyle,a),i.lineCap=ui(I.lineCap,"butt"),i.lineDashOffset=ui(I.lineDashOffset,0),i.lineJoin=ui(I.lineJoin,"miter"),i.lineWidth=z,i.strokeStyle=ui(I.strokeStyle,a),i.setLineDash(ui(I.lineDash,[])),o.usePointStyle){const K={radius:E*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:z},N=l.xPlus(me,x/2),B=pe+v;OP(i,K,N,B,o.pointStyleWidth&&x)}else{const K=pe+Math.max((p-E)/2,0),N=l.leftForLtr(me,x),B=mf(I.borderRadius);i.beginPath(),Object.values(B).some(V=>V!==0)?Lm(i,{x:N,y:K,w:x,h:E,radius:B}):i.rect(N,K,x,E),i.fill(),z!==0&&i.stroke()}i.restore()},D=function(me,pe,I){Lf(i,I.text,me,pe+A/2,c,{strikethrough:I.hidden,textAlign:l.textAlign(I.textAlign)})},$=this.isHorizontal(),Y=this._computeTitleHeight();$?m={x:sl(s,this.left+d,this.right-r[0]),y:this.top+d+Y,line:0}:m={x:this.left+d,y:sl(s,this.top+Y+d,this.bottom-n[0].height),line:0},$P(this.ctx,e.textDirection);const te=A+d;this.legendItems.forEach((me,pe)=>{i.strokeStyle=me.fontColor,i.fillStyle=me.fontColor;const I=i.measureText(me.text).width,z=l.textAlign(me.textAlign||(me.textAlign=o.textAlign)),K=x+v+I;let N=m.x,B=m.y;l.setWidth(this.width),$?pe>0&&N+K+d>this.right&&(B=m.y+=te,m.line++,N=m.x=sl(s,this.left+d,this.right-r[m.line])):pe>0&&B+te>this.bottom&&(N=m.x=N+n[m.line].width+d,m.line++,B=m.y=sl(s,this.top+Y+d,this.bottom-n[m.line].height));const V=l.x(N);if(k(V,B,me),N=HX(z,N+x+v,$?N+K:this.right,e.rtl),D(l.x(N),B,me),$)m.x+=K+d;else if(typeof me.text!="string"){const R=c.lineHeight;m.y+=fM(me,R)+d}else m.y+=te}),VP(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,r=ha(n.font),i=fl(n.padding);if(!n.display)return;const s=Lp(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=r.size/2,c=i.top+l;let d,p=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),d=this.top+c,p=sl(e.align,p,this.right-v);else{const x=this.columnSizes.reduce((E,A)=>Math.max(E,A.height),0);d=c+sl(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const m=sl(a,p,p+v);o.textAlign=s.textAlign(tw(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=r.string,Lf(o,n.text,m,d,r)}_computeTitleHeight(){const e=this.options.title,n=ha(e.font),r=fl(e.padding);return e.display?n.lineHeight+r.height:0}_getLegendItemAt(e,n){let r,i,s;if(Ah(e,this.left,this.right)&&Ah(n,this.top,this.bottom)){for(s=this.legendHitBoxes,r=0;r<s.length;++r)if(i=s[r],Ah(e,i.left,i.left+i.width)&&Ah(n,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){const n=this.options;if(!Cte(e.type,n))return;const r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const i=this._hoveredItem,s=wte(i,r);i&&!s&&Os(n.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!s&&Os(n.onHover,[e,r,this],this)}else r&&Os(n.onClick,[e,r,this],this)}}function xte(t,e,n,r,i){const s=Lte(r,t,e,n),o=Ste(i,r,e.lineHeight);return{itemWidth:s,itemHeight:o}}function Lte(t,e,n,r){let i=t.text;return i&&typeof i!="string"&&(i=i.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+r.measureText(i).width}function Ste(t,e,n){let r=t;return typeof e.text!="string"&&(r=fM(e,n)),r}function fM(t,e){const n=t.text?t.text.length:0;return e*n}function Cte(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var Ete={id:"legend",_element:rL,start(t,e,n){const r=t.legend=new rL({ctx:t.ctx,options:n,chart:t});dl.configure(t,r,n),dl.addBox(t,r)},stop(t){dl.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;dl.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),d=fl(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:r||c.pointStyle,rotation:c.rotation,textAlign:i||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class hw extends $h{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const i=Js(r.text)?r.text.length:1;this._padding=fl(r.padding);const s=i*ha(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:r,bottom:i,right:s,options:o}=this,a=o.align;let l=0,c,d,p;return this.isHorizontal()?(d=sl(a,r,s),p=n+e,c=s-r):(o.position==="left"?(d=r+e,p=sl(a,i,n),l=zs*-.5):(d=s-e,p=sl(a,n,i),l=zs*.5),c=i-n),{titleX:d,titleY:p,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const r=ha(n.font),s=r.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);Lf(e,n.text,0,0,r,{color:n.color,maxWidth:l,rotation:c,textAlign:tw(n.align),textBaseline:"middle",translation:[o,a]})}}function Pte(t,e){const n=new hw({ctx:t.ctx,options:e,chart:t});dl.configure(t,n,e),dl.addBox(t,n),t.titleBlock=n}var Mte={id:"title",_element:hw,start(t,e,n){Pte(t,n)},stop(t){const e=t.titleBlock;dl.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;dl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const H0=new WeakMap;var kte={id:"subtitle",start(t,e,n){const r=new hw({ctx:t.ctx,options:n,chart:t});dl.configure(t,r,n),dl.addBox(t,r),H0.set(t,r)},stop(t){dl.removeBox(t,H0.get(t)),H0.delete(t)},beforeUpdate(t,e,n){const r=H0.get(t);dl.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Dg={average(t){if(!t.length)return!1;let e,n,r=0,i=0,s=0;for(e=0,n=t.length;e<n;++e){const o=t[e].element;if(o&&o.hasValue()){const a=o.tooltipPosition();r+=a.x,i+=a.y,++s}}return{x:r/s,y:i/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,r=e.y,i=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Vb(e,c);d<i&&(i=d,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,r=l.y}return{x:n,y:r}}};function zc(t,e){return e&&(Js(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function xh(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function Ate(t,e){const{element:n,datasetIndex:r,index:i}=e,s=t.getDatasetMeta(r).controller,{label:o,value:a}=s.getLabelAndValue(i);return{chart:t,label:o,parsed:s.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:a,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function iL(t,e){const n=t.chart.ctx,{body:r,footer:i,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=ha(e.bodyFont),c=ha(e.titleFont),d=ha(e.footerFont),p=s.length,v=i.length,m=r.length,x=fl(e.padding);let E=x.height,A=0,k=r.reduce((Y,te)=>Y+te.before.length+te.lines.length+te.after.length,0);if(k+=t.beforeBody.length+t.afterBody.length,p&&(E+=p*c.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),k){const Y=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;E+=m*Y+(k-m)*l.lineHeight+(k-1)*e.bodySpacing}v&&(E+=e.footerMarginTop+v*d.lineHeight+(v-1)*e.footerSpacing);let D=0;const $=function(Y){A=Math.max(A,n.measureText(Y).width+D)};return n.save(),n.font=c.string,ds(t.title,$),n.font=l.string,ds(t.beforeBody.concat(t.afterBody),$),D=e.displayColors?o+2+e.boxPadding:0,ds(r,Y=>{ds(Y.before,$),ds(Y.lines,$),ds(Y.after,$)}),D=0,n.font=d.string,ds(t.footer,$),n.restore(),A+=x.width,{width:A,height:E}}function Tte(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}function Dte(t,e,n,r){const{x:i,width:s}=r,o=n.caretSize+n.caretPadding;if(t==="left"&&i+s+o>e.width||t==="right"&&i-s-o<0)return!0}function Ote(t,e,n,r){const{x:i,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return r==="center"?c=i<=(a+l)/2?"left":"right":i<=s/2?c="left":i>=o-s/2&&(c="right"),Dte(c,t,e,n)&&(c="center"),c}function sL(t,e,n){const r=n.yAlign||e.yAlign||Tte(t,n);return{xAlign:n.xAlign||e.xAlign||Ote(t,e,n,r),yAlign:r}}function Nte(t,e){let{x:n,width:r}=t;return e==="right"?n-=r:e==="center"&&(n-=r/2),n}function Ite(t,e,n){let{y:r,height:i}=t;return e==="top"?r+=n:e==="bottom"?r-=i+n:r-=i/2,r}function oL(t,e,n,r){const{caretSize:i,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=i+s,{topLeft:d,topRight:p,bottomLeft:v,bottomRight:m}=mf(o);let x=Nte(e,a);const E=Ite(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(d,v)+i:a==="right"&&(x+=Math.max(p,m)+i),{x:Ea(x,0,r.width-e.width),y:Ea(E,0,r.height-e.height)}}function W0(t,e,n){const r=fl(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-r.right:t.x+r.left}function aL(t){return zc([],xh(t))}function Bte(t,e,n){return Dd(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function lL(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const pM={beforeTitle:_h,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:_h,beforeBody:_h,beforeLabel:_h,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Gi(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:_h,afterBody:_h,beforeFooter:_h,footer:_h,afterFooter:_h};function Yl(t,e,n,r){const i=t[e].call(n,r);return typeof i>"u"?pM[e].call(n,r):i}class Xb extends $h{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&n.options.animation&&r.animations,s=new GP(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Bte(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:r}=n,i=Yl(r,"beforeTitle",this,e),s=Yl(r,"title",this,e),o=Yl(r,"afterTitle",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}getBeforeBody(e,n){return aL(Yl(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:r}=n,i=[];return ds(e,s=>{const o={before:[],lines:[],after:[]},a=lL(r,s);zc(o.before,xh(Yl(a,"beforeLabel",this,s))),zc(o.lines,Yl(a,"label",this,s)),zc(o.after,xh(Yl(a,"afterLabel",this,s))),i.push(o)}),i}getAfterBody(e,n){return aL(Yl(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:r}=n,i=Yl(r,"beforeFooter",this,e),s=Yl(r,"footer",this,e),o=Yl(r,"afterFooter",this,e);let a=[];return a=zc(a,xh(i)),a=zc(a,xh(s)),a=zc(a,xh(o)),a}_createItems(e){const n=this._active,r=this.chart.data,i=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(Ate(this.chart,n[l]));return e.filter&&(a=a.filter((d,p,v)=>e.filter(d,p,v,r))),e.itemSort&&(a=a.sort((d,p)=>e.itemSort(d,p,r))),ds(a,d=>{const p=lL(e.callbacks,d);i.push(Yl(p,"labelColor",this,d)),s.push(Yl(p,"labelPointStyle",this,d)),o.push(Yl(p,"labelTextColor",this,d))}),this.labelColors=i,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const r=this.options.setContext(this.getContext()),i=this._active;let s,o=[];if(!i.length)this.opacity!==0&&(s={opacity:0});else{const a=Dg[r.position].call(this,i,this._eventPosition);o=this._createItems(r),this.title=this.getTitle(o,r),this.beforeBody=this.getBeforeBody(o,r),this.body=this.getBody(o,r),this.afterBody=this.getAfterBody(o,r),this.footer=this.getFooter(o,r);const l=this._size=iL(this,r),c=Object.assign({},a,l),d=sL(this.chart,r,c),p=oL(r,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,i){const s=this.getCaretPosition(e,r,i);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,r){const{xAlign:i,yAlign:s}=this,{caretSize:o,cornerRadius:a}=r,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:p}=mf(a),{x:v,y:m}=e,{width:x,height:E}=n;let A,k,D,$,Y,te;return s==="center"?(Y=m+E/2,i==="left"?(A=v,k=A-o,$=Y+o,te=Y-o):(A=v+x,k=A+o,$=Y-o,te=Y+o),D=A):(i==="left"?k=v+Math.max(l,d)+o:i==="right"?k=v+x-Math.max(c,p)-o:k=this.caretX,s==="top"?($=m,Y=$-o,A=k-o,D=k+o):($=m+E,Y=$+o,A=k+o,D=k-o),te=$),{x1:A,x2:k,x3:D,y1:$,y2:Y,y3:te}}drawTitle(e,n,r){const i=this.title,s=i.length;let o,a,l;if(s){const c=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.titleAlign,r),n.textAlign=c.textAlign(r.titleAlign),n.textBaseline="middle",o=ha(r.titleFont),a=r.titleSpacing,n.fillStyle=r.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(i[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=r.titleMarginBottom-a)}}_drawColorBox(e,n,r,i,s){const o=this.labelColors[r],a=this.labelPointStyles[r],{boxHeight:l,boxWidth:c}=s,d=ha(s.bodyFont),p=W0(this,"left",s),v=i.x(p),m=l<d.lineHeight?(d.lineHeight-l)/2:0,x=n.y+m;if(s.usePointStyle){const E={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},A=i.leftForLtr(v,c)+c/2,k=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Hb(e,E,A,k),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hb(e,E,A,k)}else{e.lineWidth=Ti(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const E=i.leftForLtr(v,c),A=i.leftForLtr(i.xPlus(v,1),c-2),k=mf(o.borderRadius);Object.values(k).some(D=>D!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Lm(e,{x:E,y:x,w:c,h:l,radius:k}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Lm(e,{x:A,y:x+1,w:c-2,h:l-2,radius:k}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(E,x,c,l),e.strokeRect(E,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(A,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){const{body:i}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:d}=r,p=ha(r.bodyFont);let v=p.lineHeight,m=0;const x=Lp(r.rtl,this.x,this.width),E=function(I){n.fillText(I,x.x(e.x+m),e.y+v/2),e.y+=v+s},A=x.textAlign(o);let k,D,$,Y,te,me,pe;for(n.textAlign=o,n.textBaseline="middle",n.font=p.string,e.x=W0(this,A,r),n.fillStyle=r.bodyColor,ds(this.beforeBody,E),m=a&&A!=="right"?o==="center"?c/2+d:c+2+d:0,Y=0,me=i.length;Y<me;++Y){for(k=i[Y],D=this.labelTextColors[Y],n.fillStyle=D,ds(k.before,E),$=k.lines,a&&$.length&&(this._drawColorBox(n,e,Y,x,r),v=Math.max(p.lineHeight,l)),te=0,pe=$.length;te<pe;++te)E($[te]),v=p.lineHeight;ds(k.after,E)}m=0,v=p.lineHeight,ds(this.afterBody,E),e.y-=s}drawFooter(e,n,r){const i=this.footer,s=i.length;let o,a;if(s){const l=Lp(r.rtl,this.x,this.width);for(e.x=W0(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=l.textAlign(r.footerAlign),n.textBaseline="middle",o=ha(r.footerFont),n.fillStyle=r.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(i[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+r.footerSpacing}}drawBackground(e,n,r,i){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:d}=r,{topLeft:p,topRight:v,bottomLeft:m,bottomRight:x}=mf(i.cornerRadius);n.fillStyle=i.backgroundColor,n.strokeStyle=i.borderColor,n.lineWidth=i.borderWidth,n.beginPath(),n.moveTo(a+p,l),o==="top"&&this.drawCaret(e,n,r,i),n.lineTo(a+c-v,l),n.quadraticCurveTo(a+c,l,a+c,l+v),o==="center"&&s==="right"&&this.drawCaret(e,n,r,i),n.lineTo(a+c,l+d-x),n.quadraticCurveTo(a+c,l+d,a+c-x,l+d),o==="bottom"&&this.drawCaret(e,n,r,i),n.lineTo(a+m,l+d),n.quadraticCurveTo(a,l+d,a,l+d-m),o==="center"&&s==="left"&&this.drawCaret(e,n,r,i),n.lineTo(a,l+p),n.quadraticCurveTo(a,l,a+p,l),n.closePath(),n.fill(),i.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,r=this.$animations,i=r&&r.x,s=r&&r.y;if(i||s){const o=Dg[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=iL(this,e),l=Object.assign({},o,this._size),c=sL(n,e,l),d=oL(e,l,c,n);(i._to!==d.x||s._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(n);const i={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const o=fl(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=r,this.drawBackground(s,e,i,n),$P(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),VP(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const r=this._active,i=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!ny(r,i),o=this._positionChanged(i,n);(s||o)&&(this._active=i,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,r),a=this._positionChanged(o,e),l=n||!ny(o,s)||a;return l&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,r,i){const s=this.options;if(e.type==="mouseout")return[];if(!i)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,r);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:r,caretY:i,options:s}=this,o=Dg[s.position].call(this,e,n);return o!==!1&&(r!==o.x||i!==o.y)}}Ze(Xb,"positioners",Dg);var Rte={id:"tooltip",_element:Xb,positioners:Dg,afterInit(t,e,n){n&&(t.tooltip=new Xb({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:pM},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Fte=Object.freeze({__proto__:null,Colors:Zee,Decimation:ete,Filler:_te,Legend:Ete,SubTitle:kte,Title:Mte,Tooltip:Rte});const jte=(t,e,n,r)=>(typeof e=="string"?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function zte(t,e,n,r){const i=t.indexOf(e);if(i===-1)return jte(t,e,n,r);const s=t.lastIndexOf(e);return i!==s?n:i}const $te=(t,e)=>t===null?null:Ea(Math.round(t),0,e);function uL(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Jb extends Pf{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const r=this.getLabels();for(const{index:i,label:s}of n)r[i]===s&&r.splice(i,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Gi(e))return null;const r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:zte(r,e,ui(n,e),this._addedLabels),$te(n,r.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const e=this.min,n=this.max,r=this.options.offset,i=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let o=e;o<=n;o++)i.push({value:o});return i}getLabelForValue(e){return uL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Ze(Jb,"id","category"),Ze(Jb,"defaults",{ticks:{callback:uL}});function Vte(t,e){const n=[],{bounds:i,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:p,includeBounds:v}=t,m=s||1,x=d-1,{min:E,max:A}=e,k=!Gi(o),D=!Gi(a),$=!Gi(c),Y=(A-E)/(p+1);let te=r3((A-E)/x/m)*m,me,pe,I,z;if(te<1e-14&&!k&&!D)return[{value:E},{value:A}];z=Math.ceil(A/te)-Math.floor(E/te),z>x&&(te=r3(z*te/x/m)*m),Gi(l)||(me=Math.pow(10,l),te=Math.ceil(te*me)/me),i==="ticks"?(pe=Math.floor(E/te)*te,I=Math.ceil(A/te)*te):(pe=E,I=A),k&&D&&s&&RX((a-o)/s,te/1e3)?(z=Math.round(Math.min((a-o)/te,d)),te=(a-o)/z,pe=o,I=a):$?(pe=k?o:pe,I=D?a:I,z=c-1,te=(I-pe)/z):(z=(I-pe)/te,Qg(z,Math.round(z),te/1e3)?z=Math.round(z):z=Math.ceil(z));const K=Math.max(i3(te),i3(pe));me=Math.pow(10,Gi(l)?K:l),pe=Math.round(pe*me)/me,I=Math.round(I*me)/me;let N=0;for(k&&(v&&pe!==o?(n.push({value:o}),pe<o&&N++,Qg(Math.round((pe+N*te)*me)/me,o,cL(o,Y,t))&&N++):pe<o&&N++);N<z;++N){const B=Math.round((pe+N*te)*me)/me;if(D&&B>a)break;n.push({value:B})}return D&&v&&I!==a?n.length&&Qg(n[n.length-1].value,a,cL(a,Y,t))?n[n.length-1].value=a:n.push({value:a}):(!D||I===a)&&n.push({value:I}),n}function cL(t,e,{horizontal:n,minRotation:r}){const i=bc(r),s=(n?Math.sin(i):Math.cos(i))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class uy extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Gi(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:r}=this.getUserBounds();let{min:i,max:s}=this;const o=l=>i=n?i:l,a=l=>s=r?s:l;if(e){const l=Qc(i),c=Qc(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(i===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(i-l)}this.min=i,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),n=n||11),n&&(i=Math.min(n,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Vte(i,s);return e.bounds==="ticks"&&SP(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){const i=(r-n)/Math.max(e.length-1,1)/2;n-=i,r+=i}this._startValue=n,this._endValue=r,this._valueRange=r-n}getLabelForValue(e){return Fm(e,this.chart.options.locale,this.options.ticks.format)}}class Qb extends uy{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Po(e)?e:0,this.max=Po(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,r=bc(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Ze(Qb,"id","linear"),Ze(Qb,"defaults",{ticks:{callback:qy.formatters.numeric}});const Cm=t=>Math.floor(pd(t)),Qd=(t,e)=>Math.pow(10,Cm(t)+e);function hL(t){return t/Math.pow(10,Cm(t))===1}function dL(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}function Ute(t,e){const n=e-t;let r=Cm(n);for(;dL(t,e,r)>10;)r++;for(;dL(t,e,r)<10;)r--;return Math.min(r,Cm(t))}function Hte(t,{min:e,max:n}){e=_u(t.min,e);const r=[],i=Cm(e);let s=Ute(e,n),o=s<0?Math.pow(10,Math.abs(s)):1;const a=Math.pow(10,s),l=i>s?Math.pow(10,i):0,c=Math.round((e-l)*o)/o,d=Math.floor((e-l)/a/10)*a*10;let p=Math.floor((c-d)/Math.pow(10,s)),v=_u(t.min,Math.round((l+d+p*Math.pow(10,s))*o)/o);for(;v<n;)r.push({value:v,major:hL(v),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(s++,p=2,o=s>=0?1:o),v=Math.round((l+d+p*Math.pow(10,s))*o)/o;const m=_u(t.max,v);return r.push({value:m,major:hL(m),significand:p}),r}class e_ extends Pf{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){const r=uy.prototype.parse.apply(this,[e,n]);if(r===0){this._zero=!0;return}return Po(r)&&r>0?r:null}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Po(e)?Math.max(0,e):null,this.max=Po(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Po(this._userMin)&&(this.min=e===Qd(this.min,0)?Qd(this.min,-1):Qd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let r=this.min,i=this.max;const s=a=>r=e?r:a,o=a=>i=n?i:a;r===i&&(r<=0?(s(1),o(10)):(s(Qd(r,-1)),o(Qd(i,1)))),r<=0&&s(Qd(i,-1)),i<=0&&o(Qd(r,1)),this.min=r,this.max=i}buildTicks(){const e=this.options,n={min:this._userMin,max:this._userMax},r=Hte(n,this);return e.bounds==="ticks"&&SP(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Fm(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=pd(e),this._valueRange=pd(this.max)-pd(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(pd(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}}Ze(e_,"id","logarithmic"),Ze(e_,"defaults",{ticks:{callback:qy.formatters.logarithmic,major:{enabled:!0}}});function t_(t){const e=t.ticks;if(e.display&&t.display){const n=fl(e.backdropPadding);return ui(e.font&&e.font.size,Mo.font.size)+n.height}return 0}function Wte(t,e,n){return n=Js(n)?n:[n],{w:eJ(t,e.string,n),h:n.length*e.lineHeight}}function fL(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Gte(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],s=t._pointLabels.length,o=t.options.pointLabels,a=o.centerPointLabels?zs/s:0;for(let l=0;l<s;l++){const c=o.setContext(t.getPointLabelContext(l));i[l]=c.padding;const d=t.getPointPosition(l,t.drawingArea+i[l],a),p=ha(c.font),v=Wte(t.ctx,p,t._pointLabels[l]);r[l]=v;const m=wu(t.getIndexAngle(l)+a),x=Math.round(Q_(m)),E=fL(x,d.x,v.w,0,180),A=fL(x,d.y,v.h,90,270);qte(n,e,m,E,A)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=Zte(t,r,i)}function qte(t,e,n,r,i){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;r.start<e.l?(a=(e.l-r.start)/s,t.l=Math.min(t.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/s,t.r=Math.max(t.r,e.r+a)),i.start<e.t?(l=(e.t-i.start)/o,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/o,t.b=Math.max(t.b,e.b+l))}function Yte(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:s,padding:o,size:a}=n,l=t.getPointPosition(e,r+i+o,s),c=Math.round(Q_(wu(l.angle+Uo))),d=Qte(l.y,a.h,c),p=Xte(c),v=Jte(l.x,a.w,p);return{visible:!0,x:l.x,y:d,textAlign:p,left:v,top:d,right:v+a.w,bottom:d+a.h}}function Kte(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:s}=t;return!(Dh({x:n,y:r},e)||Dh({x:n,y:s},e)||Dh({x:i,y:r},e)||Dh({x:i,y:s},e))}function Zte(t,e,n){const r=[],i=t._pointLabels.length,s=t.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:t_(s)/2,additionalAngle:o?zs/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=e[d];const p=Yte(t,d,l);r.push(p),a==="auto"&&(p.visible=Kte(p,c),p.visible&&(c=p))}return r}function Xte(t){return t===0||t===180?"center":t<180?"left":"right"}function Jte(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function Qte(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function ene(t,e,n){const{left:r,top:i,right:s,bottom:o}=n,{backdropColor:a}=e;if(!Gi(a)){const l=mf(e.borderRadius),c=fl(e.backdropPadding);t.fillStyle=a;const d=r-c.left,p=i-c.top,v=s-r+c.width,m=o-i+c.height;Object.values(l).some(x=>x!==0)?(t.beginPath(),Lm(t,{x:d,y:p,w:v,h:m,radius:l}),t.fill()):t.fillRect(d,p,v,m)}}function tne(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const s=t._pointLabelItems[i];if(!s.visible)continue;const o=r.setContext(t.getPointLabelContext(i));ene(n,o,s);const a=ha(o.font),{x:l,y:c,textAlign:d}=s;Lf(n,t._pointLabels[i],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function gM(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,js);else{let s=t.getPointPosition(0,e);i.moveTo(s.x,s.y);for(let o=1;o<r;o++)s=t.getPointPosition(o,e),i.lineTo(s.x,s.y)}}function nne(t,e,n,r,i){const s=t.ctx,o=e.circular,{color:a,lineWidth:l}=e;!o&&!r||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(i.dash),s.lineDashOffset=i.dashOffset,s.beginPath(),gM(t,n,o,r),s.closePath(),s.stroke(),s.restore())}function rne(t,e,n){return Dd(t,{label:n,index:e,type:"pointLabel"})}class Og extends uy{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=fl(t_(this.options)/2),n=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(n,r)/2)}determineDataLimits(){const{min:e,max:n}=this.getMinMax(!1);this.min=Po(e)&&!isNaN(e)?e:0,this.max=Po(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/t_(this.options))}generateTickLabels(e){uy.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,r)=>{const i=Os(this.options.pointLabels.callback,[n,r],this);return i||i===0?i:""}).filter((n,r)=>this.chart.getDataVisibility(r))}fit(){const e=this.options;e.display&&e.pointLabels.display?Gte(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,r,i){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,r,i))}getIndexAngle(e){const n=js/(this._pointLabels.length||1),r=this.options.startAngle||0;return wu(e*n+bc(r))}getDistanceFromCenterForValue(e){if(Gi(e))return NaN;const n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(Gi(e))return NaN;const n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){const n=this._pointLabels||[];if(e>=0&&e<n.length){const r=n[e];return rne(this.getContext(),e,r)}}getPointPosition(e,n,r=0){const i=this.getIndexAngle(e)-Uo+r;return{x:Math.cos(i)*n+this.xCenter,y:Math.sin(i)*n+this.yCenter,angle:i}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:n,top:r,right:i,bottom:s}=this._pointLabelItems[e];return{left:n,top:r,right:i,bottom:s}}drawBackground(){const{backgroundColor:e,grid:{circular:n}}=this.options;if(e){const r=this.ctx;r.save(),r.beginPath(),gM(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){const e=this.ctx,n=this.options,{angleLines:r,grid:i,border:s}=n,o=this._pointLabels.length;let a,l,c;if(n.pointLabels.display&&tne(this,o),i.display&&this.ticks.forEach((d,p)=>{if(p!==0){l=this.getDistanceFromCenterForValue(d.value);const v=this.getContext(p),m=i.setContext(v),x=s.setContext(v);nne(this,m,l,o,x)}}),r.display){for(e.save(),a=o-1;a>=0;a--){const d=r.setContext(this.getPointLabelContext(a)),{color:p,lineWidth:v}=d;!v||!p||(e.lineWidth=v,e.strokeStyle=p,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,n=this.options,r=n.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&!n.reverse)return;const c=r.setContext(this.getContext(l)),d=ha(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=d.string,o=e.measureText(a.label).width,e.fillStyle=c.backdropColor;const p=fl(c.backdropPadding);e.fillRect(-o/2-p.left,-s-d.size/2-p.top,o+p.width,d.size+p.height)}Lf(e,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}}Ze(Og,"id","radialLinear"),Ze(Og,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:qy.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Ze(Og,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Ze(Og,"descriptors",{angleLines:{_fallback:"grid"}});const Jy={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ql=Object.keys(Jy);function pL(t,e){return t-e}function gL(t,e){if(Gi(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:s}=t._parseOpts;let o=e;return typeof r=="function"&&(o=r(o)),Po(o)||(o=typeof r=="string"?n.parse(o,r):n.parse(o)),o===null?null:(i&&(o=i==="week"&&(Op(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,i)),+o)}function mL(t,e,n,r){const i=Ql.length;for(let s=Ql.indexOf(t);s<i-1;++s){const o=Jy[Ql[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=r)return Ql[s]}return Ql[i-1]}function ine(t,e,n,r,i){for(let s=Ql.length-1;s>=Ql.indexOf(n);s--){const o=Ql[s];if(Jy[o].common&&t._adapter.diff(i,r,o)>=e-1)return o}return Ql[n?Ql.indexOf(n):0]}function sne(t){for(let e=Ql.indexOf(t)+1,n=Ql.length;e<n;++e)if(Jy[Ql[e]].common)return Ql[e]}function vL(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:r,hi:i}=ew(n,e),s=n[r]>=e?n[r]:n[i];t[s]=!0}}function one(t,e,n,r){const i=t._adapter,s=+i.startOf(e[0].value,r),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+i.add(a,1,r))l=n[a],l>=0&&(e[l].major=!0);return e}function yL(t,e,n){const r=[],i={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],i[a]=o,r.push({value:a,major:!1});return s===0||!n?r:one(t,r,i,n)}class Em extends Pf{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const r=e.time||(e.time={}),i=this._adapter=new KP._date(e.adapters.date);i.init(n),Jg(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:gL(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,r=e.time.unit||"day";let{min:i,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(i=Math.min(i,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Po(i)&&!isNaN(i)?i:+n.startOf(Date.now(),r),s=Po(s)&&!isNaN(s)?s:+n.endOf(Date.now(),r)+1,this.min=Math.min(i,s-1),this.max=Math.max(i+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){const e=this.options,n=e.time,r=e.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const s=this.min,o=this.max,a=$X(i,s,o);return this._unit=n.unit||(r.autoSkip?mL(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):ine(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:sne(this._unit),this.initOffsets(i),e.reverse&&a.reverse(),yL(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,i,s;this.options.offset&&e.length&&(i=this.getDecimalForValue(e[0]),e.length===1?n=1-i:n=(this.getDecimalForValue(e[1])-i)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?r=s:r=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Ea(n,0,o),r=Ea(r,0,o),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){const e=this._adapter,n=this.min,r=this.max,i=this.options,s=i.time,o=s.unit||mL(s.minUnit,n,r,this._getLabelCapacity(n)),a=ui(i.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Op(l)||l===!0,d={};let p=n,v,m;if(c&&(p=+e.startOf(p,"isoWeek",l)),p=+e.startOf(p,c?"day":o),e.diff(r,n,o)>1e5*a)throw new Error(n+" and "+r+" are too far apart with stepSize of "+a+" "+o);const x=i.ticks.source==="data"&&this.getDataTimestamps();for(v=p,m=0;v<r;v=+e.add(v,a,o),m++)vL(d,v,x);return(v===r||i.bounds==="ticks"||m===1)&&vL(d,v,x),Object.keys(d).sort(pL).map(E=>+E)}getLabelForValue(e){const n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){const i=this.options.time.displayFormats,s=this._unit,o=n||i[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,r,i){const s=this.options,o=s.ticks.callback;if(o)return Os(o,[e,n,r],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&a[l],p=c&&a[c],v=r[n],m=c&&p&&v&&v.major;return this._adapter.format(e,i||(m?p:d))}generateTickLabels(e){let n,r,i;for(n=0,r=e.length;n<r;++n)i=e[n],i.label=this._tickFormatFunction(i.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,r=this.ctx.measureText(e).width,i=bc(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:r*s+a*o,h:r*o+a*s}}_getLabelCapacity(e){const n=this.options.time,r=n.displayFormats,i=r[n.unit]||r.millisecond,s=this._tickFormatFunction(e,0,yL(this,[e],this._majorUnit),i),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(n=0,r=i.length;n<r;++n)e=e.concat(i[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,r;if(e.length)return e;const i=this.getLabels();for(n=0,r=i.length;n<r;++n)e.push(gL(this,i[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return PP(e.sort(pL))}}Ze(Em,"id","time"),Ze(Em,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function G0(t,e,n){let r=0,i=t.length-1,s,o,a,l;n?(e>=t[r].pos&&e<=t[i].pos&&({lo:r,hi:i}=Th(t,"pos",e)),{pos:s,time:a}=t[r],{pos:o,time:l}=t[i]):(e>=t[r].time&&e<=t[i].time&&({lo:r,hi:i}=Th(t,"time",e)),{time:s,pos:a}=t[r],{time:o,pos:l}=t[i]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class n_ extends Em{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=G0(n,this.min),this._tableRange=G0(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:r}=this,i=[],s=[];let o,a,l,c,d;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=r&&i.push(c);if(i.length<2)return[{time:n,pos:0},{time:r,pos:1}];for(o=0,a=i.length;o<a;++o)d=i[o+1],l=i[o-1],c=i[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(n)||r.length===1)&&r.push(n),r.sort((i,s)=>i-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),r=this.getLabelTimestamps();return n.length&&r.length?e=this.normalize(n.concat(r)):e=n.length?n:r,e=this._cache.all=e,e}getDecimalForValue(e){return(G0(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return G0(this._table,r*this._tableRange+this._minPos,!0)}}Ze(n_,"id","timeseries"),Ze(n_,"defaults",Em.defaults);var ane=Object.freeze({__proto__:null,CategoryScale:Jb,LinearScale:Qb,LogarithmicScale:e_,RadialLinearScale:Og,TimeScale:Em,TimeSeriesScale:n_});const lne=[gQ,Hee,Fte,ane];Wc.register(...lne);const mM=6048e5,une=864e5,jm=6e4,zm=36e5,cne=1e3,bL=Symbol.for("constructDateFrom");function ko(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&bL in t?t[bL](e):t instanceof Date?new t.constructor(e):new Date(e)}function Xr(t,e){return ko(e||t,t)}function Qy(t,e,n){const r=Xr(t,n==null?void 0:n.in);return isNaN(e)?ko((n==null?void 0:n.in)||t,NaN):(e&&r.setDate(r.getDate()+e),r)}function dw(t,e,n){const r=Xr(t,n==null?void 0:n.in);if(isNaN(e))return ko(t,NaN);if(!e)return r;const i=r.getDate(),s=ko(t,r.getTime());s.setMonth(r.getMonth()+e+1,0);const o=s.getDate();return i>=o?s:(r.setFullYear(s.getFullYear(),s.getMonth(),i),r)}function fw(t,e,n){return ko(t,+Xr(t)+e)}function hne(t,e,n){return fw(t,e*zm)}let dne={};function Mf(){return dne}function nh(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.weekStartsOn)??0,i=Xr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Bp(t,e){return nh(t,{...e,weekStartsOn:1})}function vM(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear(),i=ko(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Bp(i),o=ko(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Bp(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function cy(t){const e=Xr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function kf(t,...e){const n=ko.bind(null,e.find(r=>typeof r=="object"));return e.map(n)}function r_(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function yM(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r_(r),o=r_(i),a=+s-cy(s),l=+o-cy(o);return Math.round((a-l)/une)}function fne(t,e){const n=vM(t,e),r=ko(t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Bp(r)}function pne(t,e,n){const r=Xr(t,n==null?void 0:n.in);return r.setTime(r.getTime()+e*jm),r}function gne(t,e,n){return dw(t,e*3,n)}function mne(t,e,n){return fw(t,e*1e3)}function vne(t,e,n){return Qy(t,e*7,n)}function yne(t,e,n){return dw(t,e*12,n)}function rm(t,e){const n=+Xr(t)-+Xr(e);return n<0?-1:n>0?1:n}function bne(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function bM(t){return!(!bne(t)&&typeof t!="number"||isNaN(+Xr(t)))}function _ne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=r.getFullYear()-i.getFullYear(),o=r.getMonth()-i.getMonth();return s*12+o}function wne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e);return r.getFullYear()-i.getFullYear()}function _M(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=_L(r,i),o=Math.abs(yM(r,i));r.setDate(r.getDate()-s*o);const a=+(_L(r,i)===-s),l=s*(o-a);return l===0?0:l}function _L(t,e){const n=t.getFullYear()-e.getFullYear()||t.getMonth()-e.getMonth()||t.getDate()-e.getDate()||t.getHours()-e.getHours()||t.getMinutes()-e.getMinutes()||t.getSeconds()-e.getSeconds()||t.getMilliseconds()-e.getMilliseconds();return n<0?-1:n>0?1:n}function $m(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function xne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=(+r-+i)/zm;return $m(n==null?void 0:n.roundingMethod)(s)}function pw(t,e){return+Xr(t)-+Xr(e)}function Lne(t,e,n){const r=pw(t,e)/jm;return $m(n==null?void 0:n.roundingMethod)(r)}function wM(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setHours(23,59,59,999),n}function xM(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function Sne(t,e){const n=Xr(t,e==null?void 0:e.in);return+wM(n,e)==+xM(n,e)}function LM(t,e,n){const[r,i,s]=kf(n==null?void 0:n.in,t,t,e),o=rm(i,s),a=Math.abs(_ne(i,s));if(a<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*a);let l=rm(i,s)===-o;Sne(r)&&a===1&&rm(r,s)===1&&(l=!1);const c=o*(a-+l);return c===0?0:c}function Cne(t,e,n){const r=LM(t,e,n)/3;return $m(n==null?void 0:n.roundingMethod)(r)}function Ene(t,e,n){const r=pw(t,e)/1e3;return $m(n==null?void 0:n.roundingMethod)(r)}function Pne(t,e,n){const r=_M(t,e,n)/7;return $m(n==null?void 0:n.roundingMethod)(r)}function Mne(t,e,n){const[r,i]=kf(n==null?void 0:n.in,t,e),s=rm(r,i),o=Math.abs(wne(r,i));r.setFullYear(1584),i.setFullYear(1584);const a=rm(r,i)===-s,l=s*(o-+a);return l===0?0:l}function kne(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3;return n.setMonth(i,1),n.setHours(0,0,0,0),n}function Ane(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setDate(1),n.setHours(0,0,0,0),n}function Tne(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function SM(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Dne(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMinutes(59,59,999),n}function One(t,e){var a,l;const n=Mf(),r=n.weekStartsOn??((l=(a=n.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??0,i=Xr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?-7:0)+6-(s-r);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function Nne(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setSeconds(59,999),n}function Ine(t,e){const n=Xr(t,e==null?void 0:e.in),r=n.getMonth(),i=r-r%3+3;return n.setMonth(i,0),n.setHours(23,59,59,999),n}function Bne(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMilliseconds(999),n}const Rne={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fne=(t,e,n)=>{let r;const i=Rne[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function D2(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const jne={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},zne={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$ne={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Vne={date:D2({formats:jne,defaultWidth:"full"}),time:D2({formats:zne,defaultWidth:"full"}),dateTime:D2({formats:$ne,defaultWidth:"full"})},Une={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Hne=(t,e,n,r)=>Une[t];function gg(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const Wne={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Gne={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},qne={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Yne={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Kne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zne={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Xne=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Jne={ordinalNumber:Xne,era:gg({values:Wne,defaultWidth:"wide"}),quarter:gg({values:Gne,defaultWidth:"wide",argumentCallback:t=>t-1}),month:gg({values:qne,defaultWidth:"wide"}),day:gg({values:Yne,defaultWidth:"wide"}),dayPeriod:gg({values:Kne,defaultWidth:"wide",formattingValues:Zne,defaultFormattingWidth:"wide"})};function mg(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?ere(a,p=>p.test(o)):Qne(a,p=>p.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const d=e.slice(o.length);return{value:c,rest:d}}}function Qne(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ere(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function tre(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const nre=/^(\d+)(th|st|nd|rd)?/i,rre=/\d+/i,ire={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},sre={any:[/^b/i,/^(a|c)/i]},ore={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},are={any:[/1/i,/2/i,/3/i,/4/i]},lre={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ure={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},cre={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},hre={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},dre={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},fre={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},pre={ordinalNumber:tre({matchPattern:nre,parsePattern:rre,valueCallback:t=>parseInt(t,10)}),era:mg({matchPatterns:ire,defaultMatchWidth:"wide",parsePatterns:sre,defaultParseWidth:"any"}),quarter:mg({matchPatterns:ore,defaultMatchWidth:"wide",parsePatterns:are,defaultParseWidth:"any",valueCallback:t=>t+1}),month:mg({matchPatterns:lre,defaultMatchWidth:"wide",parsePatterns:ure,defaultParseWidth:"any"}),day:mg({matchPatterns:cre,defaultMatchWidth:"wide",parsePatterns:hre,defaultParseWidth:"any"}),dayPeriod:mg({matchPatterns:dre,defaultMatchWidth:"any",parsePatterns:fre,defaultParseWidth:"any"})},CM={code:"en-US",formatDistance:Fne,formatLong:Vne,formatRelative:Hne,localize:Jne,match:pre,options:{weekStartsOn:0,firstWeekContainsDate:1}};function gre(t,e){const n=Xr(t,e==null?void 0:e.in);return yM(n,SM(n))+1}function EM(t,e){const n=Xr(t,e==null?void 0:e.in),r=+Bp(n)-+fne(n);return Math.round(r/mM)+1}function gw(t,e){var d,p,v,m;const n=Xr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Mf(),s=(e==null?void 0:e.firstWeekContainsDate)??((p=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(v=i.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=ko((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=nh(o,e),l=ko((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=nh(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function mre(t,e){var a,l,c,d;const n=Mf(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(c=n.locale)==null?void 0:c.options)==null?void 0:d.firstWeekContainsDate)??1,i=gw(t,e),s=ko((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),nh(s,e)}function PM(t,e){const n=Xr(t,e==null?void 0:e.in),r=+nh(n,e)-+mre(n,e);return Math.round(r/mM)+1}function hs(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const ed={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return hs(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):hs(n+1,2)},d(t,e){return hs(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return hs(t.getHours()%12||12,e.length)},H(t,e){return hs(t.getHours(),e.length)},m(t,e){return hs(t.getMinutes(),e.length)},s(t,e){return hs(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return hs(i,e.length)}},np={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wL={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return ed.y(t,e)},Y:function(t,e,n,r){const i=gw(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return hs(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):hs(s,e.length)},R:function(t,e){const n=vM(t);return hs(n,e.length)},u:function(t,e){const n=t.getFullYear();return hs(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return hs(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return hs(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return ed.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return hs(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=PM(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):hs(i,e.length)},I:function(t,e,n){const r=EM(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):hs(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ed.d(t,e)},D:function(t,e,n){const r=gre(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):hs(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return hs(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return hs(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return hs(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=np.noon:r===0?i=np.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=np.evening:r>=12?i=np.afternoon:r>=4?i=np.morning:i=np.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return ed.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ed.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):hs(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ed.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ed.s(t,e)},S:function(t,e){return ed.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LL(r);case"XXXX":case"XX":return sf(r);case"XXXXX":case"XXX":default:return sf(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LL(r);case"xxxx":case"xx":return sf(r);case"xxxxx":case"xxx":default:return sf(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+xL(r,":");case"OOOO":default:return"GMT"+sf(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+xL(r,":");case"zzzz":default:return"GMT"+sf(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return hs(r,e.length)},T:function(t,e,n){return hs(+t,e.length)}};function xL(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+hs(s,2)}function LL(t,e){return t%60===0?(t>0?"-":"+")+hs(Math.abs(t)/60,2):sf(t,e)}function sf(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=hs(Math.trunc(r/60),2),s=hs(r%60,2);return n+i+e+s}const SL=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},MM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},vre=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return SL(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",SL(r,e)).replace("{{time}}",MM(i,e))},i_={p:MM,P:vre},yre=/^D+$/,bre=/^Y+$/,_re=["D","DD","YY","YYYY"];function kM(t){return yre.test(t)}function AM(t){return bre.test(t)}function s_(t,e,n){const r=wre(t,e,n);if(console.warn(r),_re.includes(t))throw new RangeError(r)}function wre(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xre=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Lre=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sre=/^'([^]*?)'?$/,Cre=/''/g,Ere=/[a-zA-Z]/;function Pre(t,e,n){var d,p,v,m,x,E,A,k;const r=Mf(),i=(n==null?void 0:n.locale)??r.locale??CM,s=(n==null?void 0:n.firstWeekContainsDate)??((p=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:p.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(v=r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((E=(x=n==null?void 0:n.locale)==null?void 0:x.options)==null?void 0:E.weekStartsOn)??r.weekStartsOn??((k=(A=r.locale)==null?void 0:A.options)==null?void 0:k.weekStartsOn)??0,a=Xr(t,n==null?void 0:n.in);if(!bM(a))throw new RangeError("Invalid time value");let l=e.match(Lre).map(D=>{const $=D[0];if($==="p"||$==="P"){const Y=i_[$];return Y(D,i.formatLong)}return D}).join("").match(xre).map(D=>{if(D==="''")return{isToken:!1,value:"'"};const $=D[0];if($==="'")return{isToken:!1,value:Mre(D)};if(wL[$])return{isToken:!0,value:D};if($.match(Ere))throw new RangeError("Format string contains an unescaped latin alphabet character `"+$+"`");return{isToken:!1,value:D}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(D=>{if(!D.isToken)return D.value;const $=D.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&AM($)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&kM($))&&s_($,e,String(t));const Y=wL[$[0]];return Y(a,$,i.localize,c)}).join("")}function Mre(t){const e=t.match(Sre);return e?e[1].replace(Cre,"'"):t}function kre(){return Object.assign({},Mf())}function Are(t,e){const n=Xr(t,e==null?void 0:e.in).getDay();return n===0?7:n}function Tre(t,e){const n=Dre(e)?new e(0):ko(e,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),n}function Dre(t){var e;return typeof t=="function"&&((e=t.prototype)==null?void 0:e.constructor)===t}const Ore=10;class TM{constructor(){Ze(this,"subPriority",0)}validate(e,n){return!0}}class Nre extends TM{constructor(e,n,r,i,s){super(),this.value=e,this.validateValue=n,this.setValue=r,this.priority=i,s&&(this.subPriority=s)}validate(e,n){return this.validateValue(e,this.value,n)}set(e,n,r){return this.setValue(e,n,this.value,r)}}class Ire extends TM{constructor(n,r){super();Ze(this,"priority",Ore);Ze(this,"subPriority",-1);this.context=n||(i=>ko(r,i))}set(n,r){return r.timestampIsSet?n:ko(n,Tre(n,this.context))}}class is{run(e,n,r,i){const s=this.parse(e,n,r,i);return s?{setter:new Nre(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,n,r){return!0}}class Bre extends is{constructor(){super(...arguments);Ze(this,"priority",140);Ze(this,"incompatibleTokens",["R","u","t","T"])}parse(n,r,i){switch(r){case"G":case"GG":case"GGG":return i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"});case"GGGGG":return i.era(n,{width:"narrow"});case"GGGG":default:return i.era(n,{width:"wide"})||i.era(n,{width:"abbreviated"})||i.era(n,{width:"narrow"})}}set(n,r,i){return r.era=i,n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}const Ho={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Gc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Wo(t,e){return t&&{value:e(t.value),rest:t.rest}}function fo(t,e){const n=e.match(t);return n?{value:parseInt(n[0],10),rest:e.slice(n[0].length)}:null}function qc(t,e){const n=e.match(t);if(!n)return null;if(n[0]==="Z")return{value:0,rest:e.slice(1)};const r=n[1]==="+"?1:-1,i=n[2]?parseInt(n[2],10):0,s=n[3]?parseInt(n[3],10):0,o=n[5]?parseInt(n[5],10):0;return{value:r*(i*zm+s*jm+o*cne),rest:e.slice(n[0].length)}}function DM(t){return fo(Ho.anyDigitsSigned,t)}function Ao(t,e){switch(t){case 1:return fo(Ho.singleDigit,e);case 2:return fo(Ho.twoDigits,e);case 3:return fo(Ho.threeDigits,e);case 4:return fo(Ho.fourDigits,e);default:return fo(new RegExp("^\\d{1,"+t+"}"),e)}}function hy(t,e){switch(t){case 1:return fo(Ho.singleDigitSigned,e);case 2:return fo(Ho.twoDigitsSigned,e);case 3:return fo(Ho.threeDigitsSigned,e);case 4:return fo(Ho.fourDigitsSigned,e);default:return fo(new RegExp("^-?\\d{1,"+t+"}"),e)}}function mw(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function OM(t,e){const n=e>0,r=n?e:1-e;let i;if(r<=50)i=t||100;else{const s=r+50,o=Math.trunc(s/100)*100,a=t>=s%100;i=t+o-(a?100:0)}return n?i:1-i}function NM(t){return t%400===0||t%4===0&&t%100!==0}class Rre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="yy"});switch(r){case"y":return Wo(Ao(4,n),s);case"yo":return Wo(i.ordinalNumber(n,{unit:"year"}),s);default:return Wo(Ao(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i){const s=n.getFullYear();if(i.isTwoDigitYear){const a=OM(i.year,s);return n.setFullYear(a,0,1),n.setHours(0,0,0,0),n}const o=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(o,0,1),n.setHours(0,0,0,0),n}}class Fre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(n,r,i){const s=o=>({year:o,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Wo(Ao(4,n),s);case"Yo":return Wo(i.ordinalNumber(n,{unit:"year"}),s);default:return Wo(Ao(r.length,n),s)}}validate(n,r){return r.isTwoDigitYear||r.year>0}set(n,r,i,s){const o=gw(n,s);if(i.isTwoDigitYear){const l=OM(i.year,o);return n.setFullYear(l,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}const a=!("era"in r)||r.era===1?i.year:1-i.year;return n.setFullYear(a,0,s.firstWeekContainsDate),n.setHours(0,0,0,0),nh(n,s)}}class jre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(n,r){return hy(r==="R"?4:r.length,n)}set(n,r,i){const s=ko(n,0);return s.setFullYear(i,0,4),s.setHours(0,0,0,0),Bp(s)}}class zre extends is{constructor(){super(...arguments);Ze(this,"priority",130);Ze(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(n,r){return hy(r==="u"?4:r.length,n)}set(n,r,i){return n.setFullYear(i,0,1),n.setHours(0,0,0,0),n}}class $re extends is{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"Q":case"QQ":return Ao(r.length,n);case"Qo":return i.ordinalNumber(n,{unit:"quarter"});case"QQQ":return i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(n,{width:"wide",context:"formatting"})||i.quarter(n,{width:"abbreviated",context:"formatting"})||i.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Vre extends is{constructor(){super(...arguments);Ze(this,"priority",120);Ze(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"q":case"qq":return Ao(r.length,n);case"qo":return i.ordinalNumber(n,{unit:"quarter"});case"qqq":return i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(n,{width:"wide",context:"standalone"})||i.quarter(n,{width:"abbreviated",context:"standalone"})||i.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=1&&r<=4}set(n,r,i){return n.setMonth((i-1)*3,1),n.setHours(0,0,0,0),n}}class Ure extends is{constructor(){super(...arguments);Ze(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);Ze(this,"priority",110)}parse(n,r,i){const s=o=>o-1;switch(r){case"M":return Wo(fo(Ho.month,n),s);case"MM":return Wo(Ao(2,n),s);case"Mo":return Wo(i.ordinalNumber(n,{unit:"month"}),s);case"MMM":return i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(n,{width:"wide",context:"formatting"})||i.month(n,{width:"abbreviated",context:"formatting"})||i.month(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}class Hre extends is{constructor(){super(...arguments);Ze(this,"priority",110);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(n,r,i){const s=o=>o-1;switch(r){case"L":return Wo(fo(Ho.month,n),s);case"LL":return Wo(Ao(2,n),s);case"Lo":return Wo(i.ordinalNumber(n,{unit:"month"}),s);case"LLL":return i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(n,{width:"wide",context:"standalone"})||i.month(n,{width:"abbreviated",context:"standalone"})||i.month(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.setMonth(i,1),n.setHours(0,0,0,0),n}}function Wre(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=PM(r,n)-e;return r.setDate(r.getDate()-i*7),Xr(r,n==null?void 0:n.in)}class Gre extends is{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(n,r,i){switch(r){case"w":return fo(Ho.week,n);case"wo":return i.ordinalNumber(n,{unit:"week"});default:return Ao(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i,s){return nh(Wre(n,i,s),s)}}function qre(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=EM(r,n)-e;return r.setDate(r.getDate()-i*7),r}class Yre extends is{constructor(){super(...arguments);Ze(this,"priority",100);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(n,r,i){switch(r){case"I":return fo(Ho.week,n);case"Io":return i.ordinalNumber(n,{unit:"week"});default:return Ao(r.length,n)}}validate(n,r){return r>=1&&r<=53}set(n,r,i){return Bp(qre(n,i))}}const Kre=[31,28,31,30,31,30,31,31,30,31,30,31],Zre=[31,29,31,30,31,30,31,31,30,31,30,31];class Xre extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subPriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"d":return fo(Ho.date,n);case"do":return i.ordinalNumber(n,{unit:"date"});default:return Ao(r.length,n)}}validate(n,r){const i=n.getFullYear(),s=NM(i),o=n.getMonth();return s?r>=1&&r<=Zre[o]:r>=1&&r<=Kre[o]}set(n,r,i){return n.setDate(i),n.setHours(0,0,0,0),n}}class Jre extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"subpriority",1);Ze(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(n,r,i){switch(r){case"D":case"DD":return fo(Ho.dayOfYear,n);case"Do":return i.ordinalNumber(n,{unit:"date"});default:return Ao(r.length,n)}}validate(n,r){const i=n.getFullYear();return NM(i)?r>=1&&r<=366:r>=1&&r<=365}set(n,r,i){return n.setMonth(0,i),n.setHours(0,0,0,0),n}}function vw(t,e,n){var p,v,m,x;const r=Mf(),i=(n==null?void 0:n.weekStartsOn)??((v=(p=n==null?void 0:n.locale)==null?void 0:p.options)==null?void 0:v.weekStartsOn)??r.weekStartsOn??((x=(m=r.locale)==null?void 0:m.options)==null?void 0:x.weekStartsOn)??0,s=Xr(t,n==null?void 0:n.in),o=s.getDay(),l=(e%7+7)%7,c=7-i,d=e<0||e>6?e-(o+c)%7:(l+c)%7-(o+c)%7;return Qy(s,d,n)}class Qre extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(n,r,i){switch(r){case"E":case"EE":case"EEE":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class eie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Wo(Ao(r.length,n),o);case"eo":return Wo(i.ordinalNumber(n,{unit:"day"}),o);case"eee":return i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeeee":return i.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}class tie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(n,r,i,s){const o=a=>{const l=Math.floor((a-1)/7)*7;return(a+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Wo(Ao(r.length,n),o);case"co":return Wo(i.ordinalNumber(n,{unit:"day"}),o);case"ccc":return i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"ccccc":return i.day(n,{width:"narrow",context:"standalone"});case"cccccc":return i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(n,{width:"wide",context:"standalone"})||i.day(n,{width:"abbreviated",context:"standalone"})||i.day(n,{width:"short",context:"standalone"})||i.day(n,{width:"narrow",context:"standalone"})}}validate(n,r){return r>=0&&r<=6}set(n,r,i,s){return n=vw(n,i,s),n.setHours(0,0,0,0),n}}function nie(t,e,n){const r=Xr(t,n==null?void 0:n.in),i=Are(r,n),s=e-i;return Qy(r,s,n)}class rie extends is{constructor(){super(...arguments);Ze(this,"priority",90);Ze(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(n,r,i){const s=o=>o===0?7:o;switch(r){case"i":case"ii":return Ao(r.length,n);case"io":return i.ordinalNumber(n,{unit:"day"});case"iii":return Wo(i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiii":return Wo(i.day(n,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Wo(i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Wo(i.day(n,{width:"wide",context:"formatting"})||i.day(n,{width:"abbreviated",context:"formatting"})||i.day(n,{width:"short",context:"formatting"})||i.day(n,{width:"narrow",context:"formatting"}),s)}}validate(n,r){return r>=1&&r<=7}set(n,r,i){return n=nie(n,i),n.setHours(0,0,0,0),n}}class iie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(n,r,i){switch(r){case"a":case"aa":case"aaa":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class sie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(n,r,i){switch(r){case"b":case"bb":case"bbb":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class oie extends is{constructor(){super(...arguments);Ze(this,"priority",80);Ze(this,"incompatibleTokens",["a","b","t","T"])}parse(n,r,i){switch(r){case"B":case"BB":case"BBB":return i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(n,{width:"wide",context:"formatting"})||i.dayPeriod(n,{width:"abbreviated",context:"formatting"})||i.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,r,i){return n.setHours(mw(i),0,0,0),n}}class aie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["H","K","k","t","T"])}parse(n,r,i){switch(r){case"h":return fo(Ho.hour12h,n);case"ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ao(r.length,n)}}validate(n,r){return r>=1&&r<=12}set(n,r,i){const s=n.getHours()>=12;return s&&i<12?n.setHours(i+12,0,0,0):!s&&i===12?n.setHours(0,0,0,0):n.setHours(i,0,0,0),n}}class lie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(n,r,i){switch(r){case"H":return fo(Ho.hour23h,n);case"Ho":return i.ordinalNumber(n,{unit:"hour"});default:return Ao(r.length,n)}}validate(n,r){return r>=0&&r<=23}set(n,r,i){return n.setHours(i,0,0,0),n}}class uie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["h","H","k","t","T"])}parse(n,r,i){switch(r){case"K":return fo(Ho.hour11h,n);case"Ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ao(r.length,n)}}validate(n,r){return r>=0&&r<=11}set(n,r,i){return n.getHours()>=12&&i<12?n.setHours(i+12,0,0,0):n.setHours(i,0,0,0),n}}class cie extends is{constructor(){super(...arguments);Ze(this,"priority",70);Ze(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(n,r,i){switch(r){case"k":return fo(Ho.hour24h,n);case"ko":return i.ordinalNumber(n,{unit:"hour"});default:return Ao(r.length,n)}}validate(n,r){return r>=1&&r<=24}set(n,r,i){const s=i<=24?i%24:i;return n.setHours(s,0,0,0),n}}class hie extends is{constructor(){super(...arguments);Ze(this,"priority",60);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"m":return fo(Ho.minute,n);case"mo":return i.ordinalNumber(n,{unit:"minute"});default:return Ao(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setMinutes(i,0,0),n}}class die extends is{constructor(){super(...arguments);Ze(this,"priority",50);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r,i){switch(r){case"s":return fo(Ho.second,n);case"so":return i.ordinalNumber(n,{unit:"second"});default:return Ao(r.length,n)}}validate(n,r){return r>=0&&r<=59}set(n,r,i){return n.setSeconds(i,0),n}}class fie extends is{constructor(){super(...arguments);Ze(this,"priority",30);Ze(this,"incompatibleTokens",["t","T"])}parse(n,r){const i=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Wo(Ao(r.length,n),i)}set(n,r,i){return n.setMilliseconds(i),n}}class pie extends is{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","x"])}parse(n,r){switch(r){case"X":return qc(Gc.basicOptionalMinutes,n);case"XX":return qc(Gc.basic,n);case"XXXX":return qc(Gc.basicOptionalSeconds,n);case"XXXXX":return qc(Gc.extendedOptionalSeconds,n);case"XXX":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ko(n,n.getTime()-cy(n)-i)}}class gie extends is{constructor(){super(...arguments);Ze(this,"priority",10);Ze(this,"incompatibleTokens",["t","T","X"])}parse(n,r){switch(r){case"x":return qc(Gc.basicOptionalMinutes,n);case"xx":return qc(Gc.basic,n);case"xxxx":return qc(Gc.basicOptionalSeconds,n);case"xxxxx":return qc(Gc.extendedOptionalSeconds,n);case"xxx":default:return qc(Gc.extended,n)}}set(n,r,i){return r.timestampIsSet?n:ko(n,n.getTime()-cy(n)-i)}}class mie extends is{constructor(){super(...arguments);Ze(this,"priority",40);Ze(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[ko(n,i*1e3),{timestampIsSet:!0}]}}class vie extends is{constructor(){super(...arguments);Ze(this,"priority",20);Ze(this,"incompatibleTokens","*")}parse(n){return DM(n)}set(n,r,i){return[ko(n,i),{timestampIsSet:!0}]}}const yie={G:new Bre,y:new Rre,Y:new Fre,R:new jre,u:new zre,Q:new $re,q:new Vre,M:new Ure,L:new Hre,w:new Gre,I:new Yre,d:new Xre,D:new Jre,E:new Qre,e:new eie,c:new tie,i:new rie,a:new iie,b:new sie,B:new oie,h:new aie,H:new lie,K:new uie,k:new cie,m:new hie,s:new die,S:new fie,X:new pie,x:new gie,t:new mie,T:new vie},bie=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,_ie=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,wie=/^'([^]*?)'?$/,xie=/''/g,Lie=/\S/,Sie=/[a-zA-Z]/;function Cie(t,e,n,r){var A,k,D,$,Y,te,me,pe;const i=()=>ko((r==null?void 0:r.in)||n,NaN),s=kre(),o=(r==null?void 0:r.locale)??s.locale??CM,a=(r==null?void 0:r.firstWeekContainsDate)??((k=(A=r==null?void 0:r.locale)==null?void 0:A.options)==null?void 0:k.firstWeekContainsDate)??s.firstWeekContainsDate??(($=(D=s.locale)==null?void 0:D.options)==null?void 0:$.firstWeekContainsDate)??1,l=(r==null?void 0:r.weekStartsOn)??((te=(Y=r==null?void 0:r.locale)==null?void 0:Y.options)==null?void 0:te.weekStartsOn)??s.weekStartsOn??((pe=(me=s.locale)==null?void 0:me.options)==null?void 0:pe.weekStartsOn)??0;if(!e)return t?i():Xr(n,r==null?void 0:r.in);const c={firstWeekContainsDate:a,weekStartsOn:l,locale:o},d=[new Ire(r==null?void 0:r.in,n)],p=e.match(_ie).map(I=>{const z=I[0];if(z in i_){const K=i_[z];return K(I,o.formatLong)}return I}).join("").match(bie),v=[];for(let I of p){!(r!=null&&r.useAdditionalWeekYearTokens)&&AM(I)&&s_(I,e,t),!(r!=null&&r.useAdditionalDayOfYearTokens)&&kM(I)&&s_(I,e,t);const z=I[0],K=yie[z];if(K){const{incompatibleTokens:N}=K;if(Array.isArray(N)){const V=v.find(R=>N.includes(R.token)||R.token===z);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${I}\` at the same time`)}else if(K.incompatibleTokens==="*"&&v.length>0)throw new RangeError(`The format string mustn't contain \`${I}\` and any other token at the same time`);v.push({token:z,fullToken:I});const B=K.run(t,I,o.match,c);if(!B)return i();d.push(B.setter),t=B.rest}else{if(z.match(Sie))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");if(I==="''"?I="'":z==="'"&&(I=Eie(I)),t.indexOf(I)===0)t=t.slice(I.length);else return i()}}if(t.length>0&&Lie.test(t))return i();const m=d.map(I=>I.priority).sort((I,z)=>z-I).filter((I,z,K)=>K.indexOf(I)===z).map(I=>d.filter(z=>z.priority===I).sort((z,K)=>K.subPriority-z.subPriority)).map(I=>I[0]);let x=Xr(n,r==null?void 0:r.in);if(isNaN(+x))return i();const E={};for(const I of m){if(!I.validate(x,c))return i();const z=I.set(x,E,c);Array.isArray(z)?(x=z[0],Object.assign(E,z[1])):x=z}return x}function Eie(t){return t.match(wie)[1].replace(xie,"'")}function Pie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMinutes(0,0,0),n}function Mie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setSeconds(0,0),n}function kie(t,e){const n=Xr(t,e==null?void 0:e.in);return n.setMilliseconds(0),n}function Aie(t,e){const n=()=>ko(e==null?void 0:e.in,NaN),r=(e==null?void 0:e.additionalDigits)??2,i=Nie(t);let s;if(i.date){const c=Iie(i.date,r);s=Bie(c.restDateString,c.year)}if(!s||isNaN(+s))return n();const o=+s;let a=0,l;if(i.time&&(a=Rie(i.time),isNaN(a)))return n();if(i.timezone){if(l=Fie(i.timezone),isNaN(l))return n()}else{const c=new Date(o+a),d=Xr(0,e==null?void 0:e.in);return d.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),d.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),d}return Xr(o+a+l,e==null?void 0:e.in)}const q0={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Tie=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Die=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Oie=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Nie(t){const e={},n=t.split(q0.dateTimeDelimiter);let r;if(n.length>2)return e;if(/:/.test(n[0])?r=n[0]:(e.date=n[0],r=n[1],q0.timeZoneDelimiter.test(e.date)&&(e.date=t.split(q0.timeZoneDelimiter)[0],r=t.substr(e.date.length,t.length))),r){const i=q0.timezone.exec(r);i?(e.time=r.replace(i[1],""),e.timezone=i[1]):e.time=r}return e}function Iie(t,e){const n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),r=t.match(n);if(!r)return{year:NaN,restDateString:""};const i=r[1]?parseInt(r[1]):null,s=r[2]?parseInt(r[2]):null;return{year:s===null?i:s*100,restDateString:t.slice((r[1]||r[2]).length)}}function Bie(t,e){if(e===null)return new Date(NaN);const n=t.match(Tie);if(!n)return new Date(NaN);const r=!!n[4],i=vg(n[1]),s=vg(n[2])-1,o=vg(n[3]),a=vg(n[4]),l=vg(n[5])-1;if(r)return Uie(e,a,l)?jie(e,a,l):new Date(NaN);{const c=new Date(0);return!$ie(e,s,o)||!Vie(e,i)?new Date(NaN):(c.setUTCFullYear(e,s,Math.max(i,o)),c)}}function vg(t){return t?parseInt(t):1}function Rie(t){const e=t.match(Die);if(!e)return NaN;const n=O2(e[1]),r=O2(e[2]),i=O2(e[3]);return Hie(n,r,i)?n*zm+r*jm+i*1e3:NaN}function O2(t){return t&&parseFloat(t.replace(",","."))||0}function Fie(t){if(t==="Z")return 0;const e=t.match(Oie);if(!e)return 0;const n=e[1]==="+"?-1:1,r=parseInt(e[2]),i=e[3]&&parseInt(e[3])||0;return Wie(r,i)?n*(r*zm+i*jm):NaN}function jie(t,e,n){const r=new Date(0);r.setUTCFullYear(t,0,4);const i=r.getUTCDay()||7,s=(e-1)*7+n+1-i;return r.setUTCDate(r.getUTCDate()+s),r}const zie=[31,null,31,30,31,30,31,31,30,31,30,31];function IM(t){return t%400===0||t%4===0&&t%100!==0}function $ie(t,e,n){return e>=0&&e<=11&&n>=1&&n<=(zie[e]||(IM(t)?29:28))}function Vie(t,e){return e>=1&&e<=(IM(t)?366:365)}function Uie(t,e,n){return e>=1&&e<=53&&n>=0&&n<=6}function Hie(t,e,n){return t===24?e===0&&n===0:n>=0&&n<60&&e>=0&&e<60&&t>=0&&t<25}function Wie(t,e){return e>=0&&e<=59}/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */const Gie={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};KP._date.override({_id:"date-fns",formats:function(){return Gie},parse:function(t,e){if(t===null||typeof t>"u")return null;const n=typeof t;return n==="number"||t instanceof Date?t=Xr(t):n==="string"&&(typeof e=="string"?t=Cie(t,e,new Date,this.options):t=Aie(t,this.options)),bM(t)?t.getTime():null},format:function(t,e){return Pre(t,e,this.options)},add:function(t,e,n){switch(n){case"millisecond":return fw(t,e);case"second":return mne(t,e);case"minute":return pne(t,e);case"hour":return hne(t,e);case"day":return Qy(t,e);case"week":return vne(t,e);case"month":return dw(t,e);case"quarter":return gne(t,e);case"year":return yne(t,e);default:return t}},diff:function(t,e,n){switch(n){case"millisecond":return pw(t,e);case"second":return Ene(t,e);case"minute":return Lne(t,e);case"hour":return xne(t,e);case"day":return _M(t,e);case"week":return Pne(t,e);case"month":return LM(t,e);case"quarter":return Cne(t,e);case"year":return Mne(t,e);default:return 0}},startOf:function(t,e,n){switch(e){case"second":return kie(t);case"minute":return Mie(t);case"hour":return Pie(t);case"day":return r_(t);case"week":return nh(t);case"isoWeek":return nh(t,{weekStartsOn:+n});case"month":return Ane(t);case"quarter":return kne(t);case"year":return SM(t);default:return t}},endOf:function(t,e){switch(e){case"second":return Bne(t);case"minute":return Nne(t);case"hour":return Dne(t);case"day":return wM(t);case"week":return One(t);case"month":return xM(t);case"quarter":return Ine(t);case"year":return Tne(t);default:return t}}});const qie={class:"container mx-auto px-4 py-8"},Yie={class:"mb-8"},Kie={key:0,class:"mb-6"},Zie={class:"flex gap-4"},Xie=["disabled"],Jie={key:0,value:""},Qie=["value"],ese={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-md"},tse={class:"flex"},nse={class:"ml-3"},rse={class:"text-sm font-medium text-red-800"},ise={class:"mb-6"},sse={class:"flex gap-4"},ose=["disabled"],ase={key:0,value:""},lse={key:1,value:""},use=["value"],cse=["disabled"],hse={key:0,class:"mt-4 bg-white rounded-lg shadow-md p-4"},dse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 text-sm"},fse={class:"font-medium"},pse={class:"font-medium"},gse={class:"font-medium"},mse={class:"font-medium"},vse={class:"font-medium"},yse={class:"font-medium"},bse={class:"md:col-span-2 lg:col-span-3 flex items-center"},_se=["href"],wse={class:"mb-6"},xse={class:"border-b border-gray-200"},Lse={class:"-mb-px flex space-x-8","aria-label":"Tabs"},Sse=["onClick"],Cse={key:2,class:"mb-8"},Ese={class:"text-sm text-gray-600 mb-4"},Pse={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Mse={class:"bg-white rounded-lg shadow-md p-6"},kse={class:"text-4xl font-bold text-primary-600 mb-2"},Ase={class:"text-sm text-gray-600"},Tse={class:"bg-white rounded-lg shadow-md p-6"},Dse={class:"text-4xl font-bold text-primary-600 mb-2"},Ose={class:"mt-4"},Nse={class:"w-full bg-gray-200 rounded-full h-2.5"},Ise={class:"bg-white rounded-lg shadow-md p-6"},Bse={class:"text-4xl font-bold text-primary-600 mb-2"},Rse={class:"text-sm text-gray-600"},Fse={class:"bg-white rounded-lg shadow-md p-6"},jse={class:"text-4xl font-bold text-primary-600 mb-2"},zse={class:"text-sm text-gray-600"},$se={class:"bg-white rounded-lg shadow-md p-6"},Vse={class:"text-4xl font-bold text-primary-600 mb-2"},Use={class:"text-sm text-gray-600"},Hse={class:"bg-white rounded-lg shadow-md p-6"},Wse={class:"text-4xl font-bold text-primary-600 mb-2"},Gse={class:"text-sm text-gray-600"},qse={key:3,class:"mb-8"},Yse={class:"flex justify-between items-center mb-4"},Kse={class:"flex items-center gap-4"},Zse={key:0,class:"text-sm text-gray-600"},Xse=["disabled"],Jse={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},Qse={key:0,class:"md:col-span-2 grid grid-cols-2 gap-4"},eoe=["value"],toe={key:0,class:"mt-1 text-sm text-red-600"},noe={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},roe={class:"bg-white rounded-lg shadow-md p-6"},ioe={class:"chart-container"},soe={class:"bg-white rounded-lg shadow-md p-6"},ooe={class:"chart-container"},aoe={class:"bg-white rounded-lg shadow-md p-6"},loe={class:"chart-container"},uoe={class:"bg-white rounded-lg shadow-md p-6"},coe={class:"chart-container"},hoe={class:"bg-white rounded-lg shadow-md p-6"},doe={class:"chart-container"},foe={class:"bg-white rounded-lg shadow-md p-6"},poe={class:"chart-container"},goe=$s({__name:"MeteoView",setup(t){const e=nu(),n=da(),r=Lt({}),i=Lt(new Date),s=Lt(""),o=Lt([]),a=Lt(""),l=Lt([]),c=Lt(null),d=Lt(""),p=Lt(""),v=Zn(()=>n.isAdmin);let m=null;const x=Zn(()=>!a.value||!o.value.length?null:o.value.find(Q=>Q.mac===a.value));function E(Q){return Q?Q.latitude&&Q.longitude&&Q.latitude!==0&&Q.longitude!==0:!1}function A(Q){return E(Q)?`${Q.latitude.toFixed(6)}, ${Q.longitude.toFixed(6)}`:""}function k(Q){if(!E(Q))return"#";const ie=Q.latitude,fe=Q.longitude,Se=encodeURIComponent(Q.name||"Station météo");return`https://www.google.com/maps/search/?api=1&query=${ie},${fe}&query_place_id=${Se}`}async function D(){try{d.value="";const Q={};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchDevices] Appel API avec params:",Q);const ie=await W1.getDevices(Q);console.log("[fetchDevices] Réponse API:",ie.data);let fe;if(ie.data&&ie.data.devices)fe=ie.data.devices;else if(Array.isArray(ie.data))fe=ie.data;else if(fe=[],typeof ie.data=="object"&&ie.data!==null){for(const Se in ie.data)if(Array.isArray(ie.data[Se])){fe=ie.data[Se];break}}o.value=fe.map(Se=>{var de,Xe;return{id:Se.id,name:Se.name||`Station ${Se.mac}`,mac:Se.mac,model:((de=Se.stationtype)==null?void 0:de.split("_")[0])||"Inconnu",firmware_version:(Xe=Se.stationtype)!=null&&Xe.includes("_V")?Se.stationtype.split("_V")[1]:"1.0",timezone:Se.date_zone_id||"UTC",created_at:Se.createtime?new Date(Se.createtime*1e3).toISOString():new Date().toISOString(),latitude:Se.latitude||0,longitude:Se.longitude||0}}),console.log("[fetchDevices] Appareils normalisés:",o.value),o.value.length>0?(a.value=o.value[0].mac,await $()):console.warn("[fetchDevices] Aucun appareil disponible")}catch(Q){console.error("[fetchDevices] Erreur lors de la récupération des appareils:",Q),Q.response&&Q.response.data&&Q.response.data.error?d.value=Q.response.data.error:(d.value="Erreur lors de la récupération des stations météo",e.error("Erreur lors de la récupération des stations météo")),o.value=[],a.value="",r.value={}}}async function $(){if(a.value)try{d.value="";const Q={mac:a.value};v.value&&c.value&&(Q.entreprise=c.value),console.log("[fetchWeatherData] Appel API avec params:",Q);const ie=await W1.getRealTimeData(Q);console.log("[fetchWeatherData] Réponse API:",ie.data),console.log("[fetchWeatherData] Structure de la réponse:",{hasData:ie.data&&"data"in ie.data,hasCode:ie.data&&"code"in ie.data,topLevelKeys:ie.data?Object.keys(ie.data):[]});let fe;ie.data&&"data"in ie.data?fe=ie.data.data:ie.data&&("outdoor"in ie.data||"indoor"in ie.data)?fe=ie.data:(fe={},console.warn("[fetchWeatherData] Format de réponse non reconnu")),r.value=fe,i.value=new Date,console.log("[fetchWeatherData] Données météo extraites:",r.value)}catch(Q){console.error("[fetchWeatherData] Erreur:",Q),Q.response&&Q.response.data&&Q.response.data.error?d.value=Q.response.data.error:(d.value="Erreur lors de la récupération des données météo",e.error("Erreur lors de la récupération des données météo")),r.value={}}}function Y(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":((ie-32)*5/9).toFixed(1)}function te(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":(ie*1.60934).toFixed(1)}function me(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":(ie*25.4).toFixed(1)}function pe(Q){if(Q==null)return"0";const ie=typeof Q=="string"?parseFloat(Q):Q;return isNaN(ie)?"0":ie.toFixed(1)}function I(Q){if(!Q)return"N/A";const ie=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSO","SO","OSO","O","ONO","NO","NNO"],fe=Math.round(Q/22.5)%16;return ie[fe]}function z(Q){return Q?Q>0?"En hausse":"En baisse":"Stable"}async function K(){if(v.value)try{const Q=await Ml.getUsers({role:"ENTREPRISE"});l.value=Q.data,l.value.length>0&&!c.value&&(c.value=l.value[0].id)}catch(Q){console.error("Erreur lors de la récupération des entreprises:",Q),e.error("Erreur lors de la récupération des entreprises")}}async function N(){try{o.value=[],a.value="",r.value={},d.value="",Object.values(ve).forEach(Q=>{try{Q.destroy()}catch(ie){console.error("Erreur lors de la destruction d'un graphique:",ie)}}),ve={},await D()}catch(Q){console.error("Erreur lors de la récupération des appareils avec l'entreprise:",Q),e.error("Erreur lors du changement d'entreprise")}}const B=[{id:"realtime",name:"Temps réel"},{id:"history",name:"Historique"}],V=Lt("realtime"),R=Lt("today"),j=Lt("5min"),W=Lt(""),X=Lt(""),oe=()=>{const Q=new Date,ie=new Date(Q);ie.setDate(Q.getDate()-1),W.value=ie.toISOString().split("T")[0],X.value=ie.toISOString().split("T")[0]},_e=[{value:"5min",label:"5 minutes",maxDays:1,maxPastDays:90},{value:"30min",label:"30 minutes",maxDays:7,maxPastDays:365},{value:"4hour",label:"4 heures",maxDays:31,maxPastDays:730},{value:"1day",label:"1 jour",maxDays:365,maxPastDays:1460}],Ce=Zn(()=>{const Q=ee(),ie=new Date(Q.start),fe=new Date(Q.end);fe.setHours(23,59,59,999);const Se=Math.abs(fe.getTime()-ie.getTime()),de=Math.ceil(Se/(1e3*60*60*24)),$e=Math.abs(new Date().getTime()-ie.getTime()),Je=Math.ceil($e/(1e3*60*60*24));return _e.filter(He=>de<=He.maxDays&&Je<=He.maxPastDays)});Ri(R,Q=>{Q==="custom"&&oe(),!Ce.value.some(fe=>fe.value===j.value)&&Ce.value.length>0&&(j.value=Ce.value[0].value)}),Ri([W,X],()=>{R.value==="custom"&&!Ce.value.some(ie=>ie.value===j.value)&&Ce.value.length>0&&(j.value=Ce.value[0].value)});const De=Lt(null),Z=Lt(null),G=Lt(null),re=Lt(null),he=Lt(null),ce=Lt(null);let ve={};const ee=()=>{let Q=new Date,ie=new Date;switch(R.value){case"today":Q.setHours(0,0,0,0);break;case"yesterday":Q.setDate(Q.getDate()-1),Q.setHours(0,0,0,0),ie.setDate(ie.getDate()-1),ie.setHours(23,59,59,999);break;case"week":Q.setDate(Q.getDate()-7);break;case"month":Q.setDate(Q.getDate()-30);break;case"custom":Q=new Date(W.value),ie=new Date(X.value);break}return{start:Q.toISOString().split("T")[0],end:ie.toISOString().split("T")[0]}},J=async()=>{try{if(Oe.value){console.log("[updateAllCharts] Mise à jour déjà en cours, annulation");return}if(Oe.value=!0,Ce.value.length===0){e.warning("Aucun intervalle disponible pour cette période"),Oe.value=!1;return}Ce.value.some(Se=>Se.value===j.value)||(j.value=Ce.value[0].value),console.log("[updateAllCharts] Début de la mise à jour des graphiques");const ie=ee(),fe={mac:a.value,start_date:ie.start,end_date:ie.end,cycle_type:j.value};v.value&&c.value&&(fe.entreprise=c.value),console.log("[updateAllCharts] Récupération des données historiques:",fe);try{const de=(await W1.getHistoryData(fe)).data;console.log("[updateAllCharts] Données historiques reçues:",de);const Xe=[{type:"temp",ref:De},{type:"humidity",ref:Z},{type:"pressure",ref:G},{type:"wind",ref:re},{type:"rain",ref:he},{type:"solar",ref:ce}];for(const $e of Xe)if(console.log(`[updateAllCharts] Mise à jour du graphique ${$e.type}`),$e.ref.value){const Je=ge(de,$e.type);Te($e.type,$e.ref.value,Je)}s.value=new Date().toLocaleString()}catch(Se){console.error("[updateAllCharts] Erreur lors de la récupération des données:",Se),e.error("Erreur lors de la récupération des données historiques")}finally{Oe.value=!1}}catch(Q){console.error("[updateAllCharts] Erreur lors de la mise à jour des graphiques:",Q),e.error("Erreur lors de la mise à jour des graphiques"),Oe.value=!1}},Oe=Lt(!1),Te=(Q,ie,fe)=>{try{if(ve[Q]&&(ve[Q].destroy(),delete ve[Q]),console.log(`[updateChart] Données reçues pour ${Q}:`,fe),!fe.datasets||!fe.datasets.length){console.warn(`[updateChart] Pas de datasets pour ${Q}`),ve[Q]=new Wc(ie,{type:"line",data:{labels:[],datasets:[]},options:{plugins:{title:{display:!0,text:"Aucune donnée disponible"}}}});return}let Se="hour";j.value==="5min"||j.value==="30min"?Se="hour":(j.value==="4hour"||j.value==="1day")&&(Se="day");const de=ee(),Xe=new Date(de.start),$e=new Date(de.end);$e.setHours(23,59,59,999);const Je={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(He){return He.length>0?new Date(He[0].parsed.x).toLocaleString():""}}}},scales:{x:{type:"time",time:{unit:Se,displayFormats:{hour:"HH:mm",day:"dd/MM",week:"dd/MM",month:"MM/yyyy"}},min:Xe.getTime(),max:$e.getTime(),title:{display:!0,text:"Date/Heure"}},y:{beginAtZero:!0,title:{display:!0,text:Ye(Q)},ticks:{callback:function(He){const Ge=typeof He=="string"?parseFloat(He):He;switch(Q){case"temp":return Ge.toFixed(1)+"°C";case"humidity":return Ge.toFixed(0)+"%";case"pressure":return Ge.toFixed(0)+" hPa";case"wind":case"rain":return Ge.toFixed(1)+(Q==="wind"?" km/h":" mm");case"solar":return Ge.toFixed(0)+" W/m²";default:return Ge}}}}},interaction:{mode:"nearest",axis:"x",intersect:!1}};ve[Q]=new Wc(ie,{type:"line",data:{datasets:fe.datasets||[]},options:Je}),console.log(`[updateChart] Graphique ${Q} créé avec ${fe.datasets.length} datasets`)}catch(Se){console.error(`[updateChart] Erreur lors de la mise à jour du graphique ${Q}:`,Se)}},Ye=Q=>{switch(Q){case"temp":return"Température (°C)";case"humidity":return"Humidité (%)";case"pressure":return"Pression (hPa)";case"wind":return"Vitesse (km/h)";case"rain":return"Précipitations (mm)";case"solar":return"Rayonnement (W/m²)";default:return""}},ge=(Q,ie)=>{var Xe,$e,Je,He,Ge,xt,Et,Kt,sn,an,Qe,at,it,Bt,Qt,Tn,xn,An,Kn;if(console.log(`[formatHistoryDataForChart] Données reçues pour ${ie}:`,Q),!Q)return console.warn(`[formatHistoryDataForChart] Pas de données pour ${ie}`),null;let fe;if("data"in Q)fe=Q.data;else if(ie in Q)fe=Q;else return console.warn(`[formatHistoryDataForChart] Structure de données non reconnue pour ${ie}`),null;console.log(`[formatHistoryDataForChart] Données extraites pour ${ie}:`,fe);const Se=[],de=(en,Ln,Mn,Hn)=>{if(!Array.isArray(en)){console.warn(`[formatHistoryDataForChart] Les données pour ${Ln} ne sont pas un tableau`);return}const hr=en.map(vr=>{const ir=parseFloat(String(vr.value));return{x:vr.time,y:Hn?Hn(ir):ir}}).filter(vr=>!isNaN(vr.y));hr.length>0&&Se.push({label:Ln,data:hr,borderColor:Mn,fill:!1,tension:.4})};switch(ie){case"temp":($e=(Xe=fe.outdoor)==null?void 0:Xe.temperature)!=null&&$e.list?de(Object.entries(fe.outdoor.temperature.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Température","#FF6384",en=>(en-32)*5/9):(Je=fe.outdoor)!=null&&Je.temperature&&de(fe.outdoor.temperature,"Température","#FF6384",en=>(en-32)*5/9);break;case"humidity":(Ge=(He=fe.outdoor)==null?void 0:He.humidity)!=null&&Ge.list?de(Object.entries(fe.outdoor.humidity.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Humidité","#36A2EB"):(xt=fe.outdoor)!=null&&xt.humidity&&de(fe.outdoor.humidity,"Humidité","#36A2EB");break;case"pressure":(Kt=(Et=fe.pressure)==null?void 0:Et.absolute)!=null&&Kt.list?de(Object.entries(fe.pressure.absolute.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Pression","#4BC0C0",en=>en*33.8639):(sn=fe.pressure)!=null&&sn.absolute&&de(fe.pressure.absolute,"Pression","#4BC0C0",en=>en*33.8639);break;case"wind":(Qe=(an=fe.wind)==null?void 0:an.wind_speed)!=null&&Qe.list?(de(Object.entries(fe.wind.wind_speed.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Vitesse du vent","#FFCE56",en=>en*1.60934),(at=fe.wind.wind_gust)!=null&&at.list&&de(Object.entries(fe.wind.wind_gust.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Rafales","#FF9F40",en=>en*1.60934)):(it=fe.wind)!=null&&it.wind_speed&&(de(fe.wind.wind_speed,"Vitesse du vent","#FFCE56",en=>en*1.60934),fe.wind.wind_gust&&de(fe.wind.wind_gust,"Rafales","#FF9F40",en=>en*1.60934));break;case"rain":(Qt=(Bt=fe.rainfall)==null?void 0:Bt.daily)!=null&&Qt.list?de(Object.entries(fe.rainfall.daily.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Précipitations journalières","#9966FF",en=>en*25.4):(Tn=fe.rainfall)!=null&&Tn.daily&&de(fe.rainfall.daily,"Précipitations journalières","#9966FF",en=>en*25.4);break;case"solar":(An=(xn=fe.solar_and_uvi)==null?void 0:xn.solar)!=null&&An.list?de(Object.entries(fe.solar_and_uvi.solar.list).map(([en,Ln])=>({time:parseInt(en)*1e3,value:Ln})),"Rayonnement solaire","#FF9F40"):(Kn=fe.solar_and_uvi)!=null&&Kn.solar&&de(fe.solar_and_uvi.solar,"Rayonnement solaire","#FF9F40");break}return console.log(`[formatHistoryDataForChart] Datasets générés pour ${ie}:`,Se),{datasets:Se}};return Ku(()=>{Object.values(ve).forEach(Q=>Q.destroy())}),Ri([R,j,W,X],()=>{V.value==="history"&&a.value&&J()}),go(async()=>{const Q=[];v.value&&Q.push(K()),await Promise.all(Q),await D(),m=window.setInterval($,5*60*1e3)}),Ri(c,Q=>{v.value&&Q&&N()}),Ri(a,Q=>{Q&&V.value==="history"&&J()}),Ri(V,Q=>{Q==="history"&&a.value&&J()}),Ku(()=>{m&&clearInterval(m)}),(Q,ie)=>{var fe,Se,de,Xe,$e,Je,He,Ge,xt,Et,Kt,sn,an,Qe,at,it,Bt,Qt,Tn,xn,An,Kn,en,Ln,Mn,Hn,hr,vr,ir,Vr,Vs,ft,rt,$t,Jt,Gn,Sn,Ut;return Be(),ze("div",qie,[C("div",Yie,[ie[38]||(ie[38]=C("h1",{class:"text-3xl font-bold mb-4"},"Météo",-1)),v.value?(Be(),ze("div",Kie,[ie[6]||(ie[6]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une entreprise ",-1)),C("div",Zie,[kn(C("select",{"onUpdate:modelValue":ie[0]||(ie[0]=cn=>c.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!l.value.length,onChange:N},[l.value.length?nn("",!0):(Be(),ze("option",Jie,"Chargement des entreprises...")),(Be(!0),ze(En,null,fr(l.value,cn=>(Be(),ze("option",{key:cn.id,value:cn.id},Dt(cn.company_name||`${cn.first_name} ${cn.last_name}`),9,Qie))),128))],40,Xie),[[rs,c.value]])])])):nn("",!0),d.value?(Be(),ze("div",ese,[C("div",tse,[ie[7]||(ie[7]=C("div",{class:"flex-shrink-0"},[C("svg",{class:"h-5 w-5 text-red-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),C("div",nse,[C("h3",rse,Dt(d.value),1)])])])):nn("",!0),C("div",ise,[ie[17]||(ie[17]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Sélectionner une station ",-1)),C("div",sse,[kn(C("select",{"onUpdate:modelValue":ie[1]||(ie[1]=cn=>a.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500",disabled:!!(!o.value.length||d.value)},[!o.value.length&&!d.value?(Be(),ze("option",ase,"Chargement des stations...")):nn("",!0),d.value?(Be(),ze("option",lse,"Aucune station disponible")):nn("",!0),(Be(!0),ze(En,null,fr(o.value,cn=>(Be(),ze("option",{key:cn.mac,value:cn.mac},Dt(cn.name)+" ("+Dt(cn.model)+" - v"+Dt(cn.firmware_version)+") ",9,use))),128))],8,ose),[[rs,a.value]]),C("button",{onClick:$,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!!(!a.value||d.value)}," Actualiser ",8,cse)]),x.value?(Be(),ze("div",hse,[ie[16]||(ie[16]=C("h3",{class:"text-lg font-semibold mb-2"},"Informations sur la station",-1)),C("div",dse,[C("div",null,[ie[8]||(ie[8]=C("span",{class:"text-gray-500"},"Modèle:",-1)),C("p",fse,Dt(x.value.model),1)]),C("div",null,[ie[9]||(ie[9]=C("span",{class:"text-gray-500"},"Version:",-1)),C("p",pse,Dt(x.value.firmware_version),1)]),C("div",null,[ie[10]||(ie[10]=C("span",{class:"text-gray-500"},"ID:",-1)),C("p",gse,Dt(x.value.id),1)]),C("div",null,[ie[11]||(ie[11]=C("span",{class:"text-gray-500"},"MAC:",-1)),C("p",mse,Dt(x.value.mac),1)]),C("div",null,[ie[12]||(ie[12]=C("span",{class:"text-gray-500"},"Fuseau horaire:",-1)),C("p",vse,Dt(x.value.timezone),1)]),C("div",null,[ie[13]||(ie[13]=C("span",{class:"text-gray-500"},"Installation:",-1)),C("p",yse,Dt(new Date(x.value.created_at).toLocaleDateString()),1)]),C("div",bse,[ie[15]||(ie[15]=C("span",{class:"text-gray-500 mr-2"},"Position:",-1)),E(x.value)?(Be(),ze("a",{key:0,href:k(x.value),target:"_blank",class:"text-primary-600 hover:text-primary-800 flex items-center",title:"Ouvrir dans Google Maps"},[ie[14]||(ie[14]=C("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor"},[C("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)),li(" "+Dt(A(x.value)),1)],8,_se)):nn("",!0)])])])):nn("",!0)]),C("div",wse,[C("div",xse,[C("nav",Lse,[(Be(),ze(En,null,fr(B,cn=>C("button",{key:cn.id,onClick:lt=>V.value=cn.id,class:Fi([V.value===cn.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm"])},Dt(cn.name),11,Sse)),64))])])]),V.value==="realtime"?(Be(),ze("div",Cse,[C("p",Ese," Dernière mise à jour : "+Dt(i.value?new Date(i.value).toLocaleString():"Jamais"),1),C("div",Pse,[C("div",Mse,[ie[18]||(ie[18]=C("h2",{class:"text-xl font-semibold mb-4"},"Température Extérieure",-1)),C("div",kse,Dt(Y((Se=(fe=r.value.outdoor)==null?void 0:fe.temperature)==null?void 0:Se.value))+"°C ",1),C("div",Ase," Min: "+Dt(Y(((Xe=(de=r.value.outdoor)==null?void 0:de.temperature)==null?void 0:Xe.min)||"0"))+"°C Max: "+Dt(Y(((Je=($e=r.value.outdoor)==null?void 0:$e.temperature)==null?void 0:Je.max)||"0"))+"°C ",1)]),C("div",Tse,[ie[19]||(ie[19]=C("h2",{class:"text-xl font-semibold mb-4"},"Humidité",-1)),C("div",Dse,Dt(((Ge=(He=r.value.outdoor)==null?void 0:He.humidity)==null?void 0:Ge.value)||"0")+"% ",1),C("div",Ose,[C("div",Nse,[C("div",{class:"bg-primary-600 h-2.5 rounded-full",style:eu({width:`${((Et=(xt=r.value.outdoor)==null?void 0:xt.humidity)==null?void 0:Et.value)||0}%`})},null,4)])])]),C("div",Ise,[ie[20]||(ie[20]=C("h2",{class:"text-xl font-semibold mb-4"},"Pression Atmosphérique",-1)),C("div",Bse,Dt(pe((sn=(Kt=r.value.pressure)==null?void 0:Kt.absolute)==null?void 0:sn.value))+" hPa ",1),C("div",Rse," Tendance: "+Dt(z((Qe=(an=r.value.pressure)==null?void 0:an.absolute)==null?void 0:Qe.trend)),1)]),C("div",Fse,[ie[22]||(ie[22]=C("h2",{class:"text-xl font-semibold mb-4"},"Vent",-1)),C("div",jse,Dt(te(((it=(at=r.value.wind)==null?void 0:at.speed)==null?void 0:it.value)||((Qt=(Bt=r.value.wind)==null?void 0:Bt.wind_speed)==null?void 0:Qt.value)))+" km/h ",1),C("div",zse,[li(" Direction: "+Dt(I(((xn=(Tn=r.value.wind)==null?void 0:Tn.direction)==null?void 0:xn.value)||((Kn=(An=r.value.wind)==null?void 0:An.wind_direction)==null?void 0:Kn.value)))+" ",1),ie[21]||(ie[21]=C("br",null,null,-1)),li(" Rafales: "+Dt(te(((Ln=(en=r.value.wind)==null?void 0:en.gust)==null?void 0:Ln.value)||((Hn=(Mn=r.value.wind)==null?void 0:Mn.wind_gust)==null?void 0:Hn.value)))+" km/h ",1)])]),C("div",$se,[ie[24]||(ie[24]=C("h2",{class:"text-xl font-semibold mb-4"},"Précipitations",-1)),C("div",Vse,Dt(me((vr=(hr=r.value.rainfall)==null?void 0:hr.daily)==null?void 0:vr.value))+" mm ",1),C("div",Use,[li(" Taux: "+Dt(me(((Vr=(ir=r.value.rainfall)==null?void 0:ir.rate)==null?void 0:Vr.value)||((ft=(Vs=r.value.rainfall)==null?void 0:Vs.rain_rate)==null?void 0:ft.value)))+" mm/h ",1),ie[23]||(ie[23]=C("br",null,null,-1)),li(" Mensuel: "+Dt(me(($t=(rt=r.value.rainfall)==null?void 0:rt.monthly)==null?void 0:$t.value))+" mm ",1)])]),C("div",Hse,[ie[25]||(ie[25]=C("h2",{class:"text-xl font-semibold mb-4"},"Rayonnement",-1)),C("div",Wse,Dt(((Gn=(Jt=r.value.solar_and_uvi)==null?void 0:Jt.solar)==null?void 0:Gn.value)||"0")+" W/m² ",1),C("div",Gse," UV: "+Dt(((Ut=(Sn=r.value.solar_and_uvi)==null?void 0:Sn.uvi)==null?void 0:Ut.value)||"0"),1)])])])):V.value==="history"?(Be(),ze("div",qse,[C("div",Yse,[ie[26]||(ie[26]=C("h2",{class:"text-xl font-semibold"},"Données historiques",-1)),C("div",Kse,[s.value?(Be(),ze("div",Zse," Dernière mise à jour: "+Dt(s.value),1)):nn("",!0),C("button",{onClick:J,class:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",disabled:!a.value}," Actualiser ",8,Xse)])]),C("div",Jse,[C("div",null,[ie[28]||(ie[28]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Période ",-1)),kn(C("select",{"onUpdate:modelValue":ie[2]||(ie[2]=cn=>R.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},ie[27]||(ie[27]=[Dl('<option value="today" data-v-6b2ee587>Aujourd&#39;hui</option><option value="yesterday" data-v-6b2ee587>Hier</option><option value="week" data-v-6b2ee587>7 derniers jours</option><option value="month" data-v-6b2ee587>30 derniers jours</option><option value="custom" data-v-6b2ee587>Période personnalisée</option>',5)]),512),[[rs,R.value]])]),R.value==="custom"?(Be(),ze("div",Qse,[C("div",null,[ie[29]||(ie[29]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de début ",-1)),kn(C("input",{type:"date","onUpdate:modelValue":ie[3]||(ie[3]=cn=>W.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[jr,W.value]])]),C("div",null,[ie[30]||(ie[30]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Date de fin ",-1)),kn(C("input",{type:"date","onUpdate:modelValue":ie[4]||(ie[4]=cn=>X.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},null,512),[[jr,X.value]])])])):nn("",!0),C("div",null,[ie[31]||(ie[31]=C("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Intervalle ",-1)),kn(C("select",{"onUpdate:modelValue":ie[5]||(ie[5]=cn=>j.value=cn),class:"block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500"},[(Be(!0),ze(En,null,fr(Ce.value,cn=>(Be(),ze("option",{key:cn.value,value:cn.value},Dt(cn.label),9,eoe))),128))],512),[[rs,j.value]]),p.value?(Be(),ze("div",toe,Dt(p.value),1)):nn("",!0)])]),C("div",noe,[C("div",roe,[ie[32]||(ie[32]=C("h3",{class:"text-lg font-semibold mb-4"},"Température",-1)),C("div",ioe,[C("canvas",{ref_key:"tempChart",ref:De},null,512)])]),C("div",soe,[ie[33]||(ie[33]=C("h3",{class:"text-lg font-semibold mb-4"},"Humidité",-1)),C("div",ooe,[C("canvas",{ref_key:"humidityChart",ref:Z},null,512)])]),C("div",aoe,[ie[34]||(ie[34]=C("h3",{class:"text-lg font-semibold mb-4"},"Pression",-1)),C("div",loe,[C("canvas",{ref_key:"pressureChart",ref:G},null,512)])]),C("div",uoe,[ie[35]||(ie[35]=C("h3",{class:"text-lg font-semibold mb-4"},"Vent",-1)),C("div",coe,[C("canvas",{ref_key:"windChart",ref:re},null,512)])]),C("div",hoe,[ie[36]||(ie[36]=C("h3",{class:"text-lg font-semibold mb-4"},"Précipitations",-1)),C("div",doe,[C("canvas",{ref_key:"rainChart",ref:he},null,512)])]),C("div",foe,[ie[37]||(ie[37]=C("h3",{class:"text-lg font-semibold mb-4"},"Rayonnement",-1)),C("div",poe,[C("canvas",{ref_key:"solarChart",ref:ce},null,512)])])])])):nn("",!0)])])}}}),moe=jh(goe,[["__scopeId","data-v-6b2ee587"]]),BM=ZB({history:PB("/"),routes:[{path:"/",name:"home",component:F5,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/meteo",name:"meteo",component:moe,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/plans",name:"plans",component:DK,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/users",name:"users",component:rY,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie"]}},{path:"/profile",name:"profile",component:()=>Mh(()=>import("./ProfileView.js"),[]),meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/login",name:"login",component:Ij,meta:{requiresGuest:!0}},{path:"/forgot-password",name:"forgot-password",component:()=>Mh(()=>import("./ForgotPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/reset-password/:token",name:"reset-password",component:()=>Mh(()=>import("./ResetPasswordView.js"),[]),meta:{requiresGuest:!0}},{path:"/change-password",name:"changePassword",component:rj,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/notes",name:"notes",component:iX,meta:{requiresAuth:!0,allowedRoles:["admin","entreprise","salarie","visiteur"]}},{path:"/map",name:"map",component:F5,meta:{requiresAuth:!0}},{path:"/:pathMatch(.*)*",name:"not-found",component:()=>Mh(()=>import("./NotFoundView.js"),[])}]});BM.beforeEach(async(t,e,n)=>{var a,l;const r=da();if(console.log("Route:",t.path,"Auth state:",{initialized:r.initialized,isAuthenticated:r.isAuthenticated,user:r.user}),!r.initialized)try{await r.initialize(window.INITIAL_STATE)}catch(c){console.error("Error initializing auth store:",c)}const i=r.isAuthenticated,s=(a=r.user)==null?void 0:a.must_change_password,o=(l=r.user)==null?void 0:l.user_type;if(t.meta.requiresAuth&&!i){n("/login");return}if(i&&s&&t.name!=="changePassword"){n({name:"changePassword"});return}if(t.name==="changePassword"&&!s){n({name:"home"});return}if(t.meta.allowedRoles&&o&&!t.meta.allowedRoles.includes(o)){n({name:"home"});return}if(t.meta.requiresGuest&&i){n({name:"home"});return}n()});function voe(t={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:i,onRegisteredSW:s,onRegisterError:o}=t;let a,l;const c=async(p=!0)=>{await l};async function d(){if("serviceWorker"in navigator){if(a=await Mh(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/static/frontend/sw.js",{scope:"/static/frontend/",type:"classic"})).catch(p=>{o==null||o(p)}),!a)return;a.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),a.addEventListener("installed",p=>{p.isUpdate||r==null||r()}),a.register({immediate:e}).then(p=>{s?s("/static/frontend/sw.js",p):i==null||i(p)}).catch(p=>{o==null||o(p)})}}return l=d(),c}const yw=Fv(I9),RM=iI();yw.use(RM);yw.use(BM);const yoe=da(RM);window.INITIAL_STATE&&yoe.initialize(window.INITIAL_STATE);yw.mount("#app");const boe=voe({onNeedRefresh(){console.log("Une mise à jour est disponible !"),window.dispatchEvent(new CustomEvent("pwa-update-available"))},onOfflineReady(){console.log("L'application est prête à être utilisée hors ligne"),window.dispatchEvent(new CustomEvent("pwa-offline-ready"))}});export{fs as _,ru as a,C as b,ze as c,$s as d,nn as e,Xn as f,li as g,kn as h,Be as i,Dl as j,fi as k,Wu as l,_S as m,Fi as n,go as o,JB as p,Nm as q,Lt as r,Ca as s,Dt as t,da as u,jr as v,Bh as w,j_ as x};
